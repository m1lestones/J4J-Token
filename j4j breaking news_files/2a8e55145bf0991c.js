(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,654747,e=>{"use strict";let t,n;var r,a=e.i(281675);let i={data:""},o=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,s=/\/\*[^]*?\*\/|  +/g,l=/\n+/g,c=(e,t)=>{let n="",r="",a="";for(let i in e){let o=e[i];"@"==i[0]?"i"==i[1]?n=i+" "+o+";":r+="f"==i[1]?c(o,i):i+"{"+c(o,"k"==i[1]?"":t)+"}":"object"==typeof o?r+=c(o,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=o&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=c.p?c.p(i,o):i+":"+o+";")}return n+(t&&a?t+"{"+a+"}":a)+r},u={},d=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+d(e[n]);return t}return e};function m(e){let t,n,r=this||{},a=e.call?e(r.p):e;return((e,t,n,r,a)=>{var i;let m=d(e),f=u[m]||(u[m]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(m));if(!u[f]){let t=m!==e?e:(e=>{let t,n,r=[{}];for(;t=o.exec(e.replace(s,""));)t[4]?r.shift():t[3]?(n=t[3].replace(l," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(l," ").trim();return r[0]})(e);u[f]=c(a?{["@keyframes "+f]:t}:t,n?"":"."+f)}let h=n&&u.g?u.g:null;return n&&(u.g=u[f]),i=u[f],h?t.data=t.data.replace(h,i):-1===t.data.indexOf(i)&&(t.data=r?i+t.data:t.data+i),f})(a.unshift?a.raw?(t=[].slice.call(arguments,1),n=r.p,a.reduce((e,r,a)=>{let i=t[a];if(i&&i.call){let e=i(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":c(e,""):!1===e?"":e}return e+r+(null==i?"":i)},"")):a.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):a,(e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||i})(r.target),r.g,r.o,r.k)}m.bind({g:1});let f,h,v,g=m.bind({k:1});function y(e,t){let n=this||{};return function(){let r=arguments;function a(i,o){let s=Object.assign({},i),l=s.className||a.className;n.p=Object.assign({theme:h&&h()},s),n.o=/ *go\d+/.test(l),s.className=m.apply(n,r)+(l?" "+l:""),t&&(s.ref=o);let c=e;return e[0]&&(c=s.as||e,delete s.as),v&&c[0]&&v(s),f(c,s)}return t?t(a):a}}var b=(e,t)=>"function"==typeof e?e(t):e,_=(t=0,()=>(++t).toString()),T=()=>{if(void 0===n&&"u">typeof window){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n},k="default",E=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:r}=t;return E(e,{type:+!!e.toasts.find(e=>e.id===r.id),toast:r});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+i}))}}},S=[],w={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},x={},C=(e,t=k)=>{x[t]=E(x[t]||w,e),S.forEach(([e,n])=>{e===t&&n(x[t])})},I=e=>Object.keys(x).forEach(t=>C(e,t)),R=(e=k)=>t=>{C(t,e)},P={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},N=e=>(t,n)=>{let r,a=((e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||_()}))(t,e,n);return R(a.toasterId||(r=a.id,Object.keys(x).find(e=>x[e].toasts.some(e=>e.id===r))))({type:2,toast:a}),a.id},A=(e,t)=>N("blank")(e,t);A.error=N("error"),A.success=N("success"),A.loading=N("loading"),A.custom=N("custom"),A.dismiss=(e,t)=>{let n={type:3,toastId:e};t?R(t)(n):I(n)},A.dismissAll=e=>A.dismiss(void 0,e),A.remove=(e,t)=>{let n={type:4,toastId:e};t?R(t)(n):I(n)},A.removeAll=e=>A.remove(void 0,e),A.promise=(e,t,n)=>{let r=A.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let a=t.success?b(t.success,e):void 0;return a?A.success(a,{id:r,...n,...null==n?void 0:n.success}):A.dismiss(r),e}).catch(e=>{let a=t.error?b(t.error,e):void 0;a?A.error(a,{id:r,...n,...null==n?void 0:n.error}):A.dismiss(r)}),e};var L=1e3,O=g`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,M=g`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,D=g`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,j=y("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${O} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${M} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${D} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,U=g`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,F=y("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${U} 1s linear infinite;
`,H=g`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,B=g`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,V=y("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${H} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${B} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,q=y("div")`
  position: absolute;
`,G=y("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,z=g`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$=y("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${z} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,W=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return void 0!==t?"string"==typeof t?a.createElement($,null,t):t:"blank"===n?null:a.createElement(G,null,a.createElement(F,{...r}),"loading"!==n&&a.createElement(q,null,"error"===n?a.createElement(j,{...r}):a.createElement(V,{...r})))},K=y("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Q=y("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Y=a.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,a]=T()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[`
0% {transform: translate3d(0,${-200*n}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${-150*n}%,-1px) scale(.6); opacity:0;}
`];return{animation:t?`${g(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${g(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},o=a.createElement(W,{toast:e}),s=a.createElement(Q,{...e.ariaProps},b(e.message,e));return a.createElement(K,{className:e.className,style:{...i,...n,...e.style}},"function"==typeof r?r({icon:o,message:s}):a.createElement(a.Fragment,null,o,s))});r=a.createElement,c.p=void 0,f=r,h=void 0,v=void 0;var X=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let o=a.useCallback(t=>{if(t){let n=()=>{r(e,t.getBoundingClientRect().height)};n(),new MutationObserver(n).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return a.createElement("div",{ref:o,className:t,style:n},i)},J=m`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Z=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,toasterId:o,containerStyle:s,containerClassName:l})=>{let{toasts:c,handlers:u}=((e,t="default")=>{let{toasts:n,pausedAt:r}=((e={},t=k)=>{let[n,r]=(0,a.useState)(x[t]||w),i=(0,a.useRef)(x[t]);(0,a.useEffect)(()=>(i.current!==x[t]&&r(x[t]),S.push([t,r]),()=>{let e=S.findIndex(([e])=>e===t);e>-1&&S.splice(e,1)}),[t]);let o=n.toasts.map(t=>{var n,r,a;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||P[t.type],style:{...e.style,...null==(a=e[t.type])?void 0:a.style,...t.style}}});return{...n,toasts:o}})(e,t),i=(0,a.useRef)(new Map).current,o=(0,a.useCallback)((e,t=L)=>{if(i.has(e))return;let n=setTimeout(()=>{i.delete(e),s({type:4,toastId:e})},t);i.set(e,n)},[]);(0,a.useEffect)(()=>{if(r)return;let e=Date.now(),a=n.map(n=>{if(n.duration===1/0)return;let r=(n.duration||0)+n.pauseDuration-(e-n.createdAt);if(r<0){n.visible&&A.dismiss(n.id);return}return setTimeout(()=>A.dismiss(n.id,t),r)});return()=>{a.forEach(e=>e&&clearTimeout(e))}},[n,r,t]);let s=(0,a.useCallback)(R(t),[t]),l=(0,a.useCallback)(()=>{s({type:5,time:Date.now()})},[s]),c=(0,a.useCallback)((e,t)=>{s({type:1,toast:{id:e,height:t}})},[s]),u=(0,a.useCallback)(()=>{r&&s({type:6,time:Date.now()})},[r,s]),d=(0,a.useCallback)((e,t)=>{let{reverseOrder:r=!1,gutter:a=8,defaultPosition:i}=t||{},o=n.filter(t=>(t.position||i)===(e.position||i)&&t.height),s=o.findIndex(t=>t.id===e.id),l=o.filter((e,t)=>t<s&&e.visible).length;return o.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+a,0)},[n]);return(0,a.useEffect)(()=>{n.forEach(e=>{if(e.dismissed)o(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}})(n,o);return a.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...s},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(n=>{let o,s,l=n.position||t,c=u.calculateOffset(n,{reverseOrder:e,gutter:r,defaultPosition:t}),d=(o=l.includes("top"),s=l.includes("center")?{justifyContent:"center"}:l.includes("right")?{justifyContent:"flex-end"}:{},{left:0,right:0,display:"flex",position:"absolute",transition:T()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${c*(o?1:-1)}px)`,...o?{top:0}:{bottom:0},...s});return a.createElement(X,{id:n.id,key:n.id,onHeightUpdate:u.updateHeight,className:n.visible?J:"",style:d},"custom"===n.type?b(n.message,n):i?i(n):a.createElement(Y,{toast:n,position:l}))}))};e.s(["Toaster",()=>Z,"default",()=>A],654747)},738045,e=>{"use strict";var t=e.i(952544);let n=`${t.environment.clipsCdnUrl}/public`;e.s(["ARCHIVED_FILTER_PARAM",0,"archivedFilter","DEFAULT_GRIP_WIDTH_PX",0,16,"FEATURED_CLIPS",0,"Featured clips","FFMPEG_CDN_BASE",0,n,"FFMPEG_REMUX_ARGS",0,["-f","concat","-safe","0","-i","list.txt","-fflags","+genpts","-c:v","copy","-af","aresample=async=1:first_pts=0","-c:a","aac","-b:a","128k","-movflags","+faststart","-avoid_negative_ts","make_zero","out.mp4"],"LONG_VIDEO_CHUNK_SECONDS",0,1800,"LONG_VIDEO_THRESHOLD_SECONDS",0,3600,"PREVIEW_CLIP_DURATION_SECONDS",0,90,"PREVIOUS_STREAMS",0,"Previous streams","SEE_ALL",0,"see all","SEGMENT_DOWNLOAD_CONCURRENCY",0,6,"SEGMENT_DOWNLOAD_MAX_RETRIES",0,3])},454616,e=>{"use strict";var t,n=((t={}).ALL="all",t.ACTIVE="active",t.HIDDEN="hidden",t.CLIPS="clips",t);e.s(["ArchivedVideosFilter",()=>n,"ArchivedVideosFilterLabelsCreator",0,{all:"All streams",active:"Visible streams",hidden:"Hidden streams",clips:"Clips"},"ArchivedVideosFilterLabelsViewer",0,{active:"Past streams",hidden:"",all:"",clips:"Clips"}])},852655,e=>{"use strict";var t=e.i(649785),n=e.i(761459),r=e.i(936736),a=e.i(54567);let i="get-clips-for-room";function o(e){return e.lastEvaluatedKey}e.s(["GET_CLIPS_FOR_ROOM_QUERY_KEY",0,i,"useGetClipsForRoom",0,e=>{let s,l,c,u=(0,t.c)(14),{roomName:d,limit:m,enabled:f,includeUserHidden:h,clipType:v}=e,g=void 0===m?10:m,y=void 0!==h&&h,b=v??null;u[0]!==y||u[1]!==g||u[2]!==d||u[3]!==b?(s=[i,d,g,y,b],u[0]=y,u[1]=g,u[2]=d,u[3]=b,u[4]=s):s=u[4],u[5]!==v||u[6]!==y||u[7]!==g||u[8]!==d?(l=async e=>{let{pageParam:t}=e,n=new URLSearchParams;n.set("limit",String(g)),t&&n.set("lastEvaluatedKey",t),y&&n.set("includeUserHidden","true"),v&&n.set("clipType",v);try{return await r.api.get(`clips/${d}?${n.toString()}`).json()}catch(e){throw a.logger.error("[useGetClipsForRoom] Fetch clips error",{roomName:d,limit:g,includeUserHidden:y,clipType:v??null,error:e.message}),e}},u[5]=v,u[6]=y,u[7]=g,u[8]=d,u[9]=l):l=u[9];let _=!!d&&(void 0===f||f);return u[10]!==s||u[11]!==l||u[12]!==_?(c={queryKey:s,queryFn:l,getNextPageParam:o,initialPageParam:void 0,enabled:_},u[10]=s,u[11]=l,u[12]=_,u[13]=c):c=u[13],(0,n.useInfiniteQuery)(c)}])},128296,e=>{"use strict";var t,n=((t={}).Complete="COMPLETE",t.Highlight="HIGHLIGHT",t.Preview="PREVIEW",t);e.s(["ClipType",()=>n])},921753,e=>{"use strict";var t=e.i(690877),n=e.i(936736),r=e.i(54567);let a="is-creator";e.s(["IS_CREATOR_QUERY_KEY",0,a,"useIsApprovedCreator",0,({mintId:e,enabled:i,onSuccess:o,walletAddress:s})=>(0,t.useQuery)({queryKey:[a,e,s],queryFn:async()=>{let t=new URLSearchParams;t.set("mintId",e);try{let e=await n.api.get(`livestream/is-approved-creator?${t.toString()}`).json();return o?.(e),e}catch(n){let t=n instanceof Error?n.message:String(n);throw r.logger.error("[useIsApprovedCreator] Fetch failed",{mintId:e,error:t}),n}},enabled:i,select:e=>e.isApprovedCreator,refetchOnWindowFocus:!1})])},113427,e=>{"use strict";var t=e.i(690877),n=e.i(936736),r=e.i(54567);let a="get-coin";e.s(["GET_COIN_QUERY_KEY",0,a,"useGetCoin",0,({mintId:e,enabled:i,onSuccess:o})=>(0,t.useQuery)({queryKey:[a,e],queryFn:async()=>{try{let t=await n.clientServerApi.get(`coins-v2/${e}`).json();return r.logger.debug("[useGetCoin] Fetch coin data successful",{mintId:e,coinName:t?.name,hasData:!!t}),o?.(t),t}catch(n){let t=n instanceof Error?n.message:String(n);throw r.logger.error("[useGetCoin] Fetch coin data failed",{mintId:e,error:t}),n}},enabled:i,refetchInterval:25e3,refetchIntervalInBackground:!0})])},852687,e=>{"use strict";function t(e,t){if(!e)throw Error(t)}function n(e){if("number"!=typeof e)throw Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>0x7fffffff||e<-0x80000000)throw Error("invalid int 32: "+e)}function r(e){if("number"!=typeof e)throw Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>0xffffffff||e<0)throw Error("invalid uint 32: "+e)}function a(e){if("number"!=typeof e)throw Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw Error("invalid float 32: "+e)}let i=Symbol("@bufbuild/protobuf/enum-type");function o(e,t,n,r){e[i]=s(t,n.map(t=>({no:t.no,name:t.name,localName:e[t.no]})),r)}function s(e,t,n){let r=Object.create(null),a=Object.create(null),i=[];for(let e of t){let t=l(e);i.push(t),r[e.name]=t,a[e.no]=t}return{typeName:e,values:i,findName:e=>r[e],findNumber:e=>a[e]}}function l(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class c{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){let n=this.getType().runtime.bin,r=n.makeReadOptions(t);return n.readMessage(this,r.readerFactory(e),e.byteLength,r),this}fromJson(e,t){let n=this.getType(),r=n.runtime.json,a=r.makeReadOptions(t);return r.readMessage(n,e,a,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(e){throw Error(`cannot decode ${this.getType().typeName} from JSON: ${e instanceof Error?e.message:String(e)}`)}return this.fromJson(n,t)}toBinary(e){let t=this.getType().runtime.bin,n=t.makeWriteOptions(e),r=n.writerFactory();return t.writeMessage(this,r,n),r.finish()}toJson(e){let t=this.getType().runtime.json,n=t.makeWriteOptions(e);return t.writeMessage(this,n)}toJsonString(e){var t;return JSON.stringify(this.toJson(e),null,null!=(t=null==e?void 0:e.prettySpaces)?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}var u,d,m,f,h,v,g,y,b=e.i(171580);function _(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,(128&r)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,(128&n)==0)return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,(128&r)==0)return this.assertBounds(),[e,t]}throw Error("invalid varint")}function T(e,t,n){for(let r=0;r<28;r+=7){let a=e>>>r,i=a>>>7!=0||0!=t,o=(i?128|a:a)&255;if(n.push(o),!i)return}let r=e>>>28&15|(7&t)<<4,a=t>>3!=0;if(n.push((a?128|r:r)&255),a){for(let e=3;e<31;e+=7){let r=t>>>e,a=r>>>7!=0,i=(a?128|r:r)&255;if(n.push(i),!a)return}n.push(t>>>31&1)}}function k(e){let t="-"===e[0];t&&(e=e.slice(1));let n=0,r=0;function a(t,a){let i=Number(e.slice(t,a));r*=1e6,(n=1e6*n+i)>=0x100000000&&(r+=n/0x100000000|0,n%=0x100000000)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?w(n,r):S(n,r)}function E(e,t){if({lo:e,hi:t}={lo:e>>>0,hi:t>>>0},t<=2097151)return String(0x100000000*t+e);let n=0xffffff&e,r=(e>>>24|t<<8)&0xffffff,a=t>>16&65535,i=n+6777216*r+6710656*a,o=r+8147497*a,s=2*a;return i>=1e7&&(o+=Math.floor(i/1e7),i%=1e7),o>=1e7&&(s+=Math.floor(o/1e7),o%=1e7),s.toString()+x(o)+x(i)}function S(e,t){return{lo:0|e,hi:0|t}}function w(e,t){return t=~t,e?e=~e+1:t+=1,S(e,t)}let x=e=>{let t=String(e);return"0000000".slice(t.length)+t};function C(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function I(){let e=this.buf[this.pos++],t=127&e;if((128&e)==0||(t|=(127&(e=this.buf[this.pos++]))<<7,(128&e)==0)||(t|=(127&(e=this.buf[this.pos++]))<<14,(128&e)==0)||(t|=(127&(e=this.buf[this.pos++]))<<21,(128&e)==0))return this.assertBounds(),t;t|=(15&(e=this.buf[this.pos++]))<<28;for(let t=5;(128&e)!=0&&t<10;t++)e=this.buf[this.pos++];if((128&e)!=0)throw Error("invalid varint");return this.assertBounds(),t>>>0}let R=function(){let e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof b.default||"object"!=typeof b.default.env||"1"!==b.default.env.BUF_BIGINT_DISABLE)){let t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),r=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){let r="bigint"==typeof e?e:BigInt(e);if(r>n||r<t)throw Error(`int64 invalid: ${e}`);return r},uParse(e){let t="bigint"==typeof e?e:BigInt(e);if(t>a||t<r)throw Error(`uint64 invalid: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}let n=e=>t(/^-?[0-9]+$/.test(e),`int64 invalid: ${e}`),r=e=>t(/^[0-9]+$/.test(e),`uint64 invalid: ${e}`);return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),r(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),n(e),k(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),r(e),k(e)),dec:(e,t)=>{let n,r,a;return(r=0x80000000&(n=S(e,t)).hi)&&(n=w(n.lo,n.hi)),a=E(n.lo,n.hi),r?"-"+a:a},uDec:(e,t)=>E(e,t)}}();function P(e,t,n){if(t===n)return!0;if(e==v.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}switch(e){case v.UINT64:case v.FIXED64:case v.INT64:case v.SFIXED64:case v.SINT64:return t==n}return!1}function N(e,t){switch(e){case v.BOOL:return!1;case v.UINT64:case v.FIXED64:case v.INT64:case v.SFIXED64:case v.SINT64:return 0==t?R.zero:"0";case v.DOUBLE:case v.FLOAT:return 0;case v.BYTES:return new Uint8Array(0);case v.STRING:return"";default:return 0}}function A(e,t){switch(e){case v.BOOL:return!1===t;case v.STRING:return""===t;case v.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return 0==t}}function L(e){let t=e.field.localName,n=Object.create(null);return n[t]=function(e){let t=e.field;if(t.repeated)return[];if(void 0!==t.default)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return N(t.T,t.L);case"message":let n=t.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}(e),[n,()=>n[t]]}(u=v||(v={}))[u.DOUBLE=1]="DOUBLE",u[u.FLOAT=2]="FLOAT",u[u.INT64=3]="INT64",u[u.UINT64=4]="UINT64",u[u.INT32=5]="INT32",u[u.FIXED64=6]="FIXED64",u[u.FIXED32=7]="FIXED32",u[u.BOOL=8]="BOOL",u[u.STRING=9]="STRING",u[u.BYTES=12]="BYTES",u[u.UINT32=13]="UINT32",u[u.SFIXED32=15]="SFIXED32",u[u.SFIXED64=16]="SFIXED64",u[u.SINT32=17]="SINT32",u[u.SINT64=18]="SINT64",(d=g||(g={}))[d.BIGINT=0]="BIGINT",d[d.STRING=1]="STRING";let O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),M=[];for(let e=0;e<O.length;e++)M[O[e].charCodeAt(0)]=e;M[45]=O.indexOf("+"),M[95]=O.indexOf("/");let D={dec(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n=new Uint8Array(t),r=0,a=0,i,o=0;for(let t=0;t<e.length;t++){if(void 0===(i=M[e.charCodeAt(t)]))switch(e[t]){case"=":a=0;case"\n":case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:o=i,a=1;break;case 1:n[r++]=o<<2|(48&i)>>4,o=i,a=2;break;case 2:n[r++]=(15&o)<<4|(60&i)>>2,o=i,a=3;break;case 3:n[r++]=(3&o)<<6|i,a=0}}if(1==a)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(e){let t="",n=0,r,a=0;for(let i=0;i<e.length;i++)switch(r=e[i],n){case 0:t+=O[r>>2],a=(3&r)<<4,n=1;break;case 1:t+=O[a|r>>4],a=(15&r)<<2,n=2;break;case 2:t+=O[a|r>>6],t+=O[63&r],n=0}return n&&(t+=O[a],t+="=",1==n&&(t+="=")),t}};function j(e,t){let n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(e=>e.no==t.field.no)}function U(e,n){t(e.extendee.typeName==n.getType().typeName,`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}function F(e,t){let n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":if(e.opt||e.req)return void 0!==t[n];if("enum"==e.kind)return t[n]!==e.T.values[0].no;return!A(e.T,t[n]);case"message":return void 0!==t[n];case"map":return Object.keys(t[n]).length>0}}function H(e,t){let n=e.localName,r=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=r?e.T.values[0].no:void 0;break;case"scalar":t[n]=r?N(e.T,e.L):void 0;break;case"message":t[n]=void 0}}function B(e,t){if(null===e||"object"!=typeof e||!Object.getOwnPropertyNames(c.prototype).every(t=>t in e&&"function"==typeof e[t]))return!1;let n=e.getType();return null!==n&&"function"==typeof n&&"typeName"in n&&"string"==typeof n.typeName&&(void 0===t||n.typeName==t.typeName)}function V(e,t){return B(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}v.DOUBLE,v.FLOAT,v.INT64,v.UINT64,v.INT32,v.UINT32,v.BOOL,v.STRING,v.BYTES;let q={ignoreUnknownFields:!1},G={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},z=Symbol(),$=Symbol();function W(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return String(e)}}function K(e,n,r,a,i){let o=r.localName;if(r.repeated){if(t("map"!=r.kind),null===n)return;if(!Array.isArray(n))throw Error(`cannot decode field ${i.typeName}.${r.name} from JSON: ${W(n)}`);let s=e[o];for(let e of n){if(null===e)throw Error(`cannot decode field ${i.typeName}.${r.name} from JSON: ${W(e)}`);switch(r.kind){case"message":s.push(r.T.fromJson(e,a));break;case"enum":let t=Y(r.T,e,a.ignoreUnknownFields,!0);t!==$&&s.push(t);break;case"scalar":try{s.push(Q(r.T,e,r.L,!0))}catch(n){let t=`cannot decode field ${i.typeName}.${r.name} from JSON: ${W(e)}`;throw n instanceof Error&&n.message.length>0&&(t+=`: ${n.message}`),Error(t)}}}}else if("map"==r.kind){if(null===n)return;if("object"!=typeof n||Array.isArray(n))throw Error(`cannot decode field ${i.typeName}.${r.name} from JSON: ${W(n)}`);let t=e[o];for(let[e,o]of Object.entries(n)){let s;if(null===o)throw Error(`cannot decode field ${i.typeName}.${r.name} from JSON: map value null`);try{s=function(e,t){if(e===v.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1}return Q(e,t,g.BIGINT,!0).toString()}(r.K,e)}catch(t){let e=`cannot decode map key for field ${i.typeName}.${r.name} from JSON: ${W(n)}`;throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),Error(e)}switch(r.V.kind){case"message":t[s]=r.V.T.fromJson(o,a);break;case"enum":let l=Y(r.V.T,o,a.ignoreUnknownFields,!0);l!==$&&(t[s]=l);break;case"scalar":try{t[s]=Q(r.V.T,o,g.BIGINT,!0)}catch(t){let e=`cannot decode map value for field ${i.typeName}.${r.name} from JSON: ${W(n)}`;throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),Error(e)}}}}else switch(r.oneof&&(e=e[r.oneof.localName]={case:o},o="value"),r.kind){case"message":let s=r.T;if(null===n&&"google.protobuf.Value"!=s.typeName)return;let l=e[o];B(l)?l.fromJson(n,a):(e[o]=l=s.fromJson(n,a),s.fieldWrapper&&!r.oneof&&(e[o]=s.fieldWrapper.unwrapField(l)));break;case"enum":let c=Y(r.T,n,a.ignoreUnknownFields,!1);switch(c){case z:H(r,e);break;case $:break;default:e[o]=c}break;case"scalar":try{let t=Q(r.T,n,r.L,!1);t===z?H(r,e):e[o]=t}catch(t){let e=`cannot decode field ${i.typeName}.${r.name} from JSON: ${W(n)}`;throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),Error(e)}}}function Q(e,t,i,o){if(null===t)return o?N(e,i):z;switch(e){case v.DOUBLE:case v.FLOAT:if("NaN"===t)return NaN;if("Infinity"===t)return 1/0;if("-Infinity"===t)return-1/0;if(""===t||"string"==typeof t&&t.trim().length!==t.length||"string"!=typeof t&&"number"!=typeof t)break;let s=Number(t);if(Number.isNaN(s)||!Number.isFinite(s))break;return e==v.FLOAT&&a(s),s;case v.INT32:case v.FIXED32:case v.SFIXED32:case v.SINT32:case v.UINT32:let l;if("number"==typeof t?l=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(l=Number(t)),void 0===l)break;return e==v.UINT32||e==v.FIXED32?r(l):n(l),l;case v.INT64:case v.SFIXED64:case v.SINT64:if("number"!=typeof t&&"string"!=typeof t)break;let c=R.parse(t);return i?c.toString():c;case v.FIXED64:case v.UINT64:if("number"!=typeof t&&"string"!=typeof t)break;let u=R.uParse(t);return i?u.toString():u;case v.BOOL:if("boolean"!=typeof t)break;return t;case v.STRING:if("string"!=typeof t)break;try{encodeURIComponent(t)}catch(e){throw Error("invalid UTF8")}return t;case v.BYTES:if(""===t)return new Uint8Array(0);if("string"!=typeof t)break;return D.dec(t)}throw Error()}function Y(e,t,n,r){if(null===t)return"google.protobuf.NullValue"==e.typeName?0:r?e.values[0].no:z;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":let a=e.findName(t);if(void 0!==a)return a.no;if(n)return $}throw Error(`cannot decode enum ${e.typeName} from JSON: ${W(t)}`)}function X(e,n,r){if("map"==e.kind){t("object"==typeof n&&null!=n);let a={},i=Object.entries(n);switch(e.V.kind){case"scalar":for(let[t,n]of i)a[t.toString()]=Z(e.V.T,n);break;case"message":for(let[e,t]of i)a[e.toString()]=t.toJson(r);break;case"enum":let o=e.V.T;for(let[e,t]of i)a[e.toString()]=J(o,t,r.enumAsInteger)}return r.emitDefaultValues||i.length>0?a:void 0}if(e.repeated){t(Array.isArray(n));let a=[];switch(e.kind){case"scalar":for(let t=0;t<n.length;t++)a.push(Z(e.T,n[t]));break;case"enum":for(let t=0;t<n.length;t++)a.push(J(e.T,n[t],r.enumAsInteger));break;case"message":for(let e=0;e<n.length;e++)a.push(n[e].toJson(r))}return r.emitDefaultValues||a.length>0?a:void 0}switch(e.kind){case"scalar":return Z(e.T,n);case"enum":return J(e.T,n,r.enumAsInteger);case"message":return V(e.T,n).toJson(r)}}function J(e,n,r){var a;if(t("number"==typeof n),"google.protobuf.NullValue"==e.typeName)return null;if(r)return n;let i=e.findNumber(n);return null!=(a=null==i?void 0:i.name)?a:n}function Z(e,n){switch(e){case v.INT32:case v.SFIXED32:case v.SINT32:case v.FIXED32:case v.UINT32:return t("number"==typeof n),n;case v.FLOAT:case v.DOUBLE:if(t("number"==typeof n),Number.isNaN(n))return"NaN";if(n===1/0)return"Infinity";if(n===-1/0)return"-Infinity";return n;case v.STRING:return t("string"==typeof n),n;case v.BOOL:return t("boolean"==typeof n),n;case v.UINT64:case v.FIXED64:case v.INT64:case v.SFIXED64:case v.SINT64:return t("bigint"==typeof n||"string"==typeof n||"number"==typeof n),n.toString();case v.BYTES:return t(n instanceof Uint8Array),D.enc(n)}}(m=y||(y={}))[m.Varint=0]="Varint",m[m.Bit64=1]="Bit64",m[m.LengthDelimited=2]="LengthDelimited",m[m.StartGroup=3]="StartGroup",m[m.EndGroup=4]="EndGroup",m[m.Bit32=5]="Bit32";class ee{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(r(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return n(e),C(e,this.buf),this}bool(e){return this.buf.push(+!!e),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){a(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){r(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){n(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return n(e),C(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=R.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=R.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=R.enc(e);return T(t.lo,t.hi,this.buf),this}sint64(e){let t=R.enc(e),n=t.hi>>31;return T(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=R.uEnc(e);return T(t.lo,t.hi,this.buf),this}}class et{constructor(e,t){this.varint64=_,this.uint32=I,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case y.Varint:for(;128&this.buf[this.pos++];);break;case y.Bit64:this.pos+=4;case y.Bit32:this.pos+=4;break;case y.LengthDelimited:let r=this.uint32();this.pos+=r;break;case y.StartGroup:for(;;){let[e,n]=this.tag();if(n===y.EndGroup){if(void 0!==t&&e!==t)throw Error("invalid end group tag");break}this.skip(n,e)}break;default:throw Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return R.dec(...this.varint64())}uint64(){return R.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,R.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return R.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return R.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}let en=Symbol("@bufbuild/protobuf/unknown-fields"),er={readUnknownFields:!0,readerFactory:e=>new et(e)},ea={writeUnknownFields:!0,writerFactory:()=>new ee};function ei(e,t,n,r,a){let{repeated:i,localName:o}=n;switch(n.oneof&&((e=e[n.oneof.localName]).case!=o&&delete e.value,e.case=o,o="value"),n.kind){case"scalar":case"enum":let s="enum"==n.kind?v.INT32:n.T,l=el;if("scalar"==n.kind&&n.L>0&&(l=es),i){let n=e[o];if(r==y.LengthDelimited&&s!=v.STRING&&s!=v.BYTES){let e=t.uint32()+t.pos;for(;t.pos<e;)n.push(l(t,s))}else n.push(l(t,s))}else e[o]=l(t,s);break;case"message":let c=n.T;i?e[o].push(eo(t,new c,a,n)):B(e[o])?eo(t,e[o],a,n):(e[o]=eo(t,new c,a,n),!c.fieldWrapper||n.oneof||n.repeated||(e[o]=c.fieldWrapper.unwrapField(e[o])));break;case"map":let[u,d]=function(e,t,n){let r,a,i=t.uint32(),o=t.pos+i;for(;t.pos<o;){let[i]=t.tag();switch(i){case 1:r=el(t,e.K);break;case 2:switch(e.V.kind){case"scalar":a=el(t,e.V.T);break;case"enum":a=t.int32();break;case"message":a=eo(t,new e.V.T,n,void 0)}}}if(void 0===r&&(r=N(e.K,g.BIGINT)),"string"!=typeof r&&"number"!=typeof r&&(r=r.toString()),void 0===a)switch(e.V.kind){case"scalar":a=N(e.V.T,g.BIGINT);break;case"enum":a=e.V.T.values[0].no;break;case"message":a=new e.V.T}return[r,a]}(n,t,a);e[o][u]=d}}function eo(e,t,n,r){let a=t.getType().runtime.bin,i=null==r?void 0:r.delimited;return a.readMessage(t,e,i?r.no:e.uint32(),n,i),t}function es(e,t){let n=el(e,t);return"bigint"==typeof n?n.toString():n}function el(e,t){switch(t){case v.STRING:return e.string();case v.BOOL:return e.bool();case v.DOUBLE:return e.double();case v.FLOAT:return e.float();case v.INT32:return e.int32();case v.INT64:return e.int64();case v.UINT64:return e.uint64();case v.FIXED64:return e.fixed64();case v.BYTES:return e.bytes();case v.FIXED32:return e.fixed32();case v.SFIXED32:return e.sfixed32();case v.SFIXED64:return e.sfixed64();case v.SINT64:return e.sint64();case v.UINT32:return e.uint32();case v.SINT32:return e.sint32()}}function ec(e,n,r,a){t(void 0!==n);let i=e.repeated;switch(e.kind){case"scalar":case"enum":let o="enum"==e.kind?v.INT32:e.T;if(i)if(t(Array.isArray(n)),e.packed)!function(e,t,n,r){if(!r.length)return;e.tag(n,y.LengthDelimited).fork();let[,a]=em(t);for(let t=0;t<r.length;t++)e[a](r[t]);e.join()}(r,o,e.no,n);else for(let t of n)ed(r,o,e.no,t);else ed(r,o,e.no,n);break;case"message":if(i)for(let i of(t(Array.isArray(n)),n))eu(r,a,e,i);else eu(r,a,e,n);break;case"map":for(let[i,o]of(t("object"==typeof n&&null!=n),Object.entries(n)))!function(e,n,r,a,i){e.tag(r.no,y.LengthDelimited),e.fork();let o=a;switch(r.K){case v.INT32:case v.FIXED32:case v.UINT32:case v.SFIXED32:case v.SINT32:o=Number.parseInt(a);break;case v.BOOL:t("true"==a||"false"==a),o="true"==a}switch(ed(e,r.K,1,o),r.V.kind){case"scalar":ed(e,r.V.T,2,i);break;case"enum":ed(e,v.INT32,2,i);break;case"message":t(void 0!==i),e.tag(2,y.LengthDelimited).bytes(i.toBinary(n))}e.join()}(r,a,e,i,o)}}function eu(e,t,n,r){let a=V(n.T,r);n.delimited?e.tag(n.no,y.StartGroup).raw(a.toBinary(t)).tag(n.no,y.EndGroup):e.tag(n.no,y.LengthDelimited).bytes(a.toBinary(t))}function ed(e,n,r,a){t(void 0!==a);let[i,o]=em(n);e.tag(r,i)[o](a)}function em(e){let t=y.Varint;switch(e){case v.BYTES:case v.STRING:t=y.LengthDelimited;break;case v.DOUBLE:case v.FIXED64:case v.SFIXED64:t=y.Bit64;break;case v.FIXED32:case v.SFIXED32:case v.FLOAT:t=y.Bit32}return[t,v[e].toLowerCase()]}function ep(e){if(void 0===e)return e;if(B(e))return e.clone();if(e instanceof Uint8Array){let t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function ef(e){return e instanceof Uint8Array?e:new Uint8Array(e)}class eh{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){let e={};for(let t of this.list())e[t.jsonName]=e[t.name]=t;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){let e={};for(let t of this.list())e[t.no]=t;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){let e;this.members=[];let t=this.members;for(let n of this.list())n.oneof?n.oneof!==e&&(e=n.oneof,t.push(e)):t.push(n)}return this.members}}function ev(e,t){let n=ey(e);return t?n:eE(ek(n))}let eg=ey;function ey(e){let t=!1,n=[];for(let r=0;r<e.length;r++){let a=e.charAt(r);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),n.push(a)}}return n.join("")}let eb=new Set(["constructor","toString","toJSON","valueOf"]),e_=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),eT=e=>`${e}$`,ek=e=>e_.has(e)?eT(e):e,eE=e=>eb.has(e)?eT(e):e;class eS{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=ev(e,!1)}addField(e){t(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}let ew=(f=e=>new eh(e,e=>(function(e,t){var n,r,a,i,o,s;let l,c=[];for(let u of"function"==typeof e?e():e){if(u.localName=ev(u.name,void 0!==u.oneof),u.jsonName=null!=(n=u.jsonName)?n:eg(u.name),u.repeated=null!=(r=u.repeated)&&r,"scalar"==u.kind&&(u.L=null!=(a=u.L)?a:g.BIGINT),u.delimited=null!=(i=u.delimited)&&i,u.req=null!=(o=u.req)&&o,u.opt=null!=(s=u.opt)&&s,void 0===u.packed&&(t?u.packed="enum"==u.kind||"scalar"==u.kind&&u.T!=v.BYTES&&u.T!=v.STRING:u.packed=!1),void 0!==u.oneof){let e="string"==typeof u.oneof?u.oneof:u.oneof.name;l&&l.name==e||(l=new eS(e)),u.oneof=l,l.addField(u)}c.push(u)}return c})(e,!0)),h=e=>{for(let t of e.getType().fields.byMember()){if(t.opt)continue;let n=t.localName;if(t.repeated){e[n]=[];continue}switch(t.kind){case"oneof":e[n]={case:void 0};break;case"enum":e[n]=0;break;case"map":e[n]={};break;case"scalar":e[n]=N(t.T,t.L)}}},{syntax:"proto3",json:{makeReadOptions:function(e){return e?Object.assign(Object.assign({},q),e):q},makeWriteOptions:function(e){return e?Object.assign(Object.assign({},G),e):G},readMessage(e,t,n,r){if(null==t||Array.isArray(t)||"object"!=typeof t)throw Error(`cannot decode message ${e.typeName} from JSON: ${W(t)}`);r=null!=r?r:new e;let a=new Map,i=n.typeRegistry;for(let[o,s]of Object.entries(t)){let t=e.fields.findJsonName(o);if(t){if(t.oneof){if(null===s&&"scalar"==t.kind)continue;let n=a.get(t.oneof);if(void 0!==n)throw Error(`cannot decode message ${e.typeName} from JSON: multiple keys for oneof "${t.oneof.name}" present: "${n}", "${o}"`);a.set(t.oneof,o)}K(r,s,t,n,e)}else{let t=!1;if((null==i?void 0:i.findExtension)&&o.startsWith("[")&&o.endsWith("]")){let a=i.findExtension(o.substring(1,o.length-1));if(a&&a.extendee.typeName==e.typeName){t=!0;let[e,i]=L(a);K(e,s,a.field,n,a),function(e,t,n,r){U(t,e);let a=t.runtime.bin.makeReadOptions(r),i=t.runtime.bin.makeWriteOptions(r);if(j(e,t)){let n=e.getType().runtime.bin.listUnknownFields(e).filter(e=>e.no!=t.field.no);for(let t of(e.getType().runtime.bin.discardUnknownFields(e),n))e.getType().runtime.bin.onUnknownField(e,t.no,t.wireType,t.data)}let o=i.writerFactory(),s=t.field;s.opt||s.repeated||"enum"!=s.kind&&"scalar"!=s.kind||(s=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(s,n,o,i);let l=a.readerFactory(o.finish());for(;l.pos<l.len;){let[t,n]=l.tag(),r=l.skip(n,t);e.getType().runtime.bin.onUnknownField(e,t,n,r)}}(r,a,i(),n)}}if(!t&&!n.ignoreUnknownFields)throw Error(`cannot decode message ${e.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(e,t){let n,r=e.getType(),a={};try{for(n of r.fields.byNumber()){if(!F(n,e)){var i;if(n.req)throw"required field not set";if(!t.emitDefaultValues||!((i=n).repeated||"map"==i.kind||!i.oneof&&"message"!=i.kind&&!i.opt&&!i.req))continue}let r=n.oneof?e[n.oneof.localName].value:e[n.localName],o=X(n,r,t);void 0!==o&&(a[t.useProtoFieldName?n.name:n.jsonName]=o)}let o=t.typeRegistry;if(null==o?void 0:o.findExtensionFor)for(let n of r.runtime.bin.listUnknownFields(e)){let i=o.findExtensionFor(r.typeName,n.no);if(i&&j(e,i)){let n=function(e,t,n){U(t,e);let r=t.runtime.bin.makeReadOptions(n),a=function(e,t){if(!t.repeated&&("enum"==t.kind||"scalar"==t.kind)){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(e=>e.no===t.no)}(e.getType().runtime.bin.listUnknownFields(e),t.field),[i,o]=L(t);for(let e of a)t.runtime.bin.readField(i,r.readerFactory(e.data),t.field,e.wireType,r);return o()}(e,i,t),r=X(i.field,n,t);void 0!==r&&(a[i.field.jsonName]=r)}}}catch(a){let e=n?`cannot encode field ${r.typeName}.${n.name} to JSON`:`cannot encode message ${r.typeName} to JSON`,t=a instanceof Error?a.message:String(a);throw Error(e+(t.length>0?`: ${t}`:""))}return a},readScalar:(e,t,n)=>Q(e,t,null!=n?n:g.BIGINT,!0),writeScalar(e,t,n){if(void 0!==t&&(n||A(e,t)))return Z(e,t)},debug:W},bin:{makeReadOptions:function(e){return e?Object.assign(Object.assign({},er),e):er},makeWriteOptions:function(e){return e?Object.assign(Object.assign({},ea),e):ea},listUnknownFields(e){var t;return null!=(t=e[en])?t:[]},discardUnknownFields(e){delete e[en]},writeUnknownFields(e,t){let n=e[en];if(n)for(let e of n)t.tag(e.no,e.wireType).raw(e.data)},onUnknownField(e,t,n,r){Array.isArray(e[en])||(e[en]=[]),e[en].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r,a){let i,o,s=e.getType(),l=a?t.len:t.pos+n;for(;t.pos<l&&([i,o]=t.tag(),!0!==a||o!=y.EndGroup);){let n=s.fields.find(i);if(!n){let n=t.skip(o,i);r.readUnknownFields&&this.onUnknownField(e,i,o,n);continue}ei(e,t,n,o,r)}if(a&&(o!=y.EndGroup||i!==n))throw Error("invalid end group tag")},readField:ei,writeMessage(e,t,n){let r=e.getType();for(let a of r.fields.byNumber()){if(!F(a,e)){if(a.req)throw Error(`cannot encode field ${r.typeName}.${a.name} to binary: required field not set`);continue}let i=a.oneof?e[a.oneof.localName].value:e[a.localName];ec(a,i,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,r){void 0!==t&&ec(e,t,n,r)}},util:Object.assign(Object.assign({},{setEnumType:o,initPartial(e,t){if(void 0!==e)for(let n of t.getType().fields.byMember()){let r=n.localName;if(null!=e[r])switch(n.kind){case"oneof":let a=e[r].case;if(void 0===a)continue;let i=n.findField(a),o=e[r].value;i&&"message"==i.kind&&!B(o,i.T)?o=new i.T(o):i&&"scalar"===i.kind&&i.T===v.BYTES&&(o=ef(o)),t[r]={case:a,value:o};break;case"scalar":case"enum":let s=e[r];n.T===v.BYTES&&(s=n.repeated?s.map(ef):ef(s)),t[r]=s;break;case"map":switch(n.V.kind){case"scalar":case"enum":if(n.V.T===v.BYTES)for(let[n,a]of Object.entries(e[r]))t[r][n]=ef(a);else Object.assign(t[r],e[r]);break;case"message":let l=n.V.T;for(let n of Object.keys(e[r])){let a=e[r][n];l.fieldWrapper||(a=new l(a)),t[r][n]=a}}break;case"message":let c=n.T;if(n.repeated)t[r]=e[r].map(e=>B(e,c)?e:new c(e));else{let n=e[r];c.fieldWrapper?"google.protobuf.BytesValue"===c.typeName?t[r]=ef(n):t[r]=n:t[r]=B(n,c)?n:new c(n)}}}},equals:(e,t,n)=>t===n||!!t&&!!n&&e.fields.byMember().every(e=>{let r=t[e.localName],a=n[e.localName];if(e.repeated){if(r.length!==a.length)return!1;switch(e.kind){case"message":return r.every((t,n)=>e.T.equals(t,a[n]));case"scalar":return r.every((t,n)=>P(e.T,t,a[n]));case"enum":return r.every((e,t)=>P(v.INT32,e,a[t]))}throw Error(`repeated cannot contain ${e.kind}`)}switch(e.kind){case"message":let i=r,o=a;return e.T.fieldWrapper&&(void 0===i||B(i)||(i=e.T.fieldWrapper.wrapField(i)),void 0===o||B(o)||(o=e.T.fieldWrapper.wrapField(o))),e.T.equals(i,o);case"enum":return P(v.INT32,r,a);case"scalar":return P(e.T,r,a);case"oneof":if(r.case!==a.case)return!1;let s=e.findField(r.case);if(void 0===s)return!0;switch(s.kind){case"message":return s.T.equals(r.value,a.value);case"enum":return P(v.INT32,r.value,a.value);case"scalar":return P(s.T,r.value,a.value)}throw Error(`oneof cannot contain ${s.kind}`);case"map":let l=Object.keys(r).concat(Object.keys(a));switch(e.V.kind){case"message":let c=e.V.T;return l.every(e=>c.equals(r[e],a[e]));case"enum":return l.every(e=>P(v.INT32,r[e],a[e]));case"scalar":let u=e.V.T;return l.every(e=>P(u,r[e],a[e]))}}}),clone(e){let t=e.getType(),n=new t;for(let r of t.fields.byMember()){let t,a=e[r.localName];if(r.repeated)t=a.map(ep);else if("map"==r.kind)for(let[e,i]of(t=n[r.localName],Object.entries(a)))t[e]=ep(i);else t="oneof"==r.kind?r.findField(a.case)?{case:a.case,value:ep(a.value)}:{case:void 0}:ep(a);n[r.localName]=t}for(let r of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(n,r.no,r.wireType,r.data);return n}}),{newFieldList:f,initFields:h}),makeMessageType(e,t,n){var r,a;let i,o;return r=this,Object.setPrototypeOf((o=({[i=null!=(a=null==n?void 0:n.localName)?a:e.substring(e.lastIndexOf(".")+1)]:function(e){r.util.initFields(this),r.util.initPartial(e,this)}})[i]).prototype,new c),Object.assign(o,{runtime:r,typeName:e,fields:r.util.newFieldList(t),fromBinary:(e,t)=>new o().fromBinary(e,t),fromJson:(e,t)=>new o().fromJson(e,t),fromJsonString:(e,t)=>new o().fromJsonString(e,t),equals:(e,t)=>r.util.equals(o,e,t)}),o},makeEnum:function(e,t,n){let r={};for(let e of t){let t=l(e);r[t.localName]=t.no,r[t.no]=t.localName}return o(r,e,t,n),r},makeEnumType:s,getEnumType:function(e){let n=e[i];return t(n,"missing enum type on enum object"),n},makeExtension(e,t,n){var r;let a;return r=this,{typeName:e,extendee:t,get field(){if(!a){let t="function"==typeof n?n():n;t.name=e.split(".").pop(),t.jsonName=`[${e}]`,a=r.util.newFieldList([t]).list()[0]}return a},runtime:r}}});class ex extends c{constructor(e){super(),this.seconds=R.zero,this.nanos=0,ew.util.initPartial(e,this)}fromJson(e,t){if("string"!=typeof e)throw Error(`cannot decode google.protobuf.Timestamp from JSON: ${ew.json.debug(e)}`);let n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");let r=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(r))throw Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=R.parse(r/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){let t=1e3*Number(this.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){let e=(this.nanos+1e9).toString().substring(1);n="000000"===e.substring(3)?"."+e.substring(0,3)+"Z":"000"===e.substring(6)?"."+e.substring(0,6)+"Z":"."+e+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return ex.fromDate(new Date)}static fromDate(e){let t=e.getTime();return new ex({seconds:R.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new ex().fromBinary(e,t)}static fromJson(e,t){return new ex().fromJson(e,t)}static fromJsonString(e,t){return new ex().fromJsonString(e,t)}static equals(e,t){return ew.util.equals(ex,e,t)}}ex.runtime=ew,ex.typeName="google.protobuf.Timestamp",ex.fields=ew.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class eC extends c{constructor(e){super(),this.seconds=R.zero,this.nanos=0,ew.util.initPartial(e,this)}fromJson(e,t){if("string"!=typeof e)throw Error(`cannot decode google.protobuf.Duration from JSON: ${ew.json.debug(e)}`);let n=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(null===n)throw Error(`cannot decode google.protobuf.Duration from JSON: ${ew.json.debug(e)}`);let r=Number(n[1]);if(r>315576e6||r<-315576e6)throw Error(`cannot decode google.protobuf.Duration from JSON: ${ew.json.debug(e)}`);if(this.seconds=R.parse(r),"string"==typeof n[2]){let e=n[2]+"0".repeat(9-n[2].length);this.nanos=parseInt(e),(r<0||Object.is(r,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||-315576e6>Number(this.seconds))throw Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(0!==this.nanos){let e=Math.abs(this.nanos).toString();"000000"===(e="0".repeat(9-e.length)+e).substring(3)?e=e.substring(0,3):"000"===e.substring(6)&&(e=e.substring(0,6)),t+="."+e,this.nanos<0&&0==Number(this.seconds)&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new eC().fromBinary(e,t)}static fromJson(e,t){return new eC().fromJson(e,t)}static fromJsonString(e,t){return new eC().fromJsonString(e,t)}static equals(e,t){return ew.util.equals(eC,e,t)}}eC.runtime=ew,eC.typeName="google.protobuf.Duration",eC.fields=ew.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class eI extends c{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),ew.util.initPartial(e,this)}toJson(e){var t;if(""===this.typeUrl)return{};let n=this.typeUrlToName(this.typeUrl),r=null==(t=null==e?void 0:e.typeRegistry)?void 0:t.findMessage(n);if(!r)throw Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let a=r.fromBinary(this.value).toJson(e);return(n.startsWith("google.protobuf.")||null===a||Array.isArray(a)||"object"!=typeof a)&&(a={value:a}),a["@type"]=this.typeUrl,a}fromJson(e,t){var n;let r;if(null===e||Array.isArray(e)||"object"!=typeof e)throw Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${null===e?"null":Array.isArray(e)?"array":typeof e}`);if(0==Object.keys(e).length)return this;let a=e["@type"];if("string"!=typeof a||""==a)throw Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');let i=this.typeUrlToName(a),o=null==(n=null==t?void 0:t.typeRegistry)?void 0:n.findMessage(i);if(!o)throw Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);if(i.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))r=o.fromJson(e.value,t);else{let n=Object.assign({},e);delete n["@type"],r=o.fromJson(n,t)}return this.packFrom(r),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return!!this.is(e.getType())&&(e.fromBinary(this.value),!0)}unpack(e){if(""===this.typeUrl)return;let t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(""===this.typeUrl)return!1;let t=this.typeUrlToName(this.typeUrl);return t===("string"==typeof e?e:e.typeName)}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw Error(`invalid type url: ${e}`);let t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw Error(`invalid type url: ${e}`);return n}static pack(e){let t=new eI;return t.packFrom(e),t}static fromBinary(e,t){return new eI().fromBinary(e,t)}static fromJson(e,t){return new eI().fromJson(e,t)}static fromJsonString(e,t){return new eI().fromJsonString(e,t)}static equals(e,t){return ew.util.equals(eI,e,t)}}eI.runtime=ew,eI.typeName="google.protobuf.Any",eI.fields=ew.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);let eR=ew.makeEnum("livekit.agent.ChatRole",[{no:0,name:"DEVELOPER"},{no:1,name:"SYSTEM"},{no:2,name:"USER"},{no:3,name:"ASSISTANT"}]),eP=ew.makeMessageType("livekit.agent.MetricsReport",()=>[{no:1,name:"started_speaking_at",kind:"message",T:ex},{no:2,name:"stopped_speaking_at",kind:"message",T:ex},{no:3,name:"transcription_delay",kind:"scalar",T:1,opt:!0},{no:4,name:"end_of_turn_delay",kind:"scalar",T:1,opt:!0},{no:5,name:"on_user_turn_completed_delay",kind:"scalar",T:1,opt:!0},{no:6,name:"llm_node_ttft",kind:"scalar",T:1,opt:!0},{no:7,name:"tts_node_ttfb",kind:"scalar",T:1,opt:!0},{no:8,name:"e2e_latency",kind:"scalar",T:1,opt:!0}]),eN=ew.makeMessageType("livekit.agent.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"role",kind:"enum",T:ew.getEnumType(eR)},{no:3,name:"content",kind:"message",T:eA,repeated:!0},{no:4,name:"interrupted",kind:"scalar",T:8},{no:5,name:"transcript_confidence",kind:"scalar",T:1,opt:!0},{no:6,name:"extra",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"metrics",kind:"message",T:eP},{no:8,name:"created_at",kind:"message",T:ex}]),eA=ew.makeMessageType("livekit.agent.ChatMessage.ChatContent",()=>[{no:1,name:"text",kind:"scalar",T:9,oneof:"payload"}],{localName:"ChatMessage_ChatContent"}),eL=ew.makeMessageType("livekit.agent.FunctionCall",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"call_id",kind:"scalar",T:9},{no:3,name:"arguments",kind:"scalar",T:9},{no:4,name:"name",kind:"scalar",T:9},{no:5,name:"created_at",kind:"message",T:ex}]),eO=ew.makeMessageType("livekit.agent.FunctionCallOutput",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"call_id",kind:"scalar",T:9},{no:4,name:"output",kind:"scalar",T:9},{no:5,name:"is_error",kind:"scalar",T:8},{no:6,name:"created_at",kind:"message",T:ex}]),eM=ew.makeMessageType("livekit.agent.AgentHandoff",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"old_agent_id",kind:"scalar",T:9,opt:!0},{no:3,name:"new_agent_id",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:ex}]),eD=(()=>[{no:1,name:"message",kind:"message",T:eN,oneof:"item"},{no:2,name:"function_call",kind:"message",T:eL,oneof:"item"},{no:3,name:"function_call_output",kind:"message",T:eO,oneof:"item"},{no:4,name:"agent_handoff",kind:"message",T:eM,oneof:"item"}],ew.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:ej,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}])),ej=ew.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:ex},{no:3,name:"value",kind:"scalar",T:2}]),eU=ew.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:ex},{no:7,name:"normalized_end_timestamp",kind:"message",T:ex,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),eF=ew.makeEnum("livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"},{no:3,name:"AC_MP3"}]),eH=ew.makeEnum("livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]),eB=ew.makeEnum("livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]),eV=ew.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),eq=ew.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),eG=ew.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),ez=ew.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),e$=ew.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),eW=ew.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),eK=ew.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),eQ=ew.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),eY=ew.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),eX=(()=>[{no:1,name:"after_id",kind:"scalar",T:9},{no:2,name:"limit",kind:"scalar",T:5}],ew.makeMessageType("livekit.ListUpdate",()=>[{no:1,name:"set",kind:"scalar",T:9,repeated:!0},{no:2,name:"add",kind:"scalar",T:9,repeated:!0},{no:3,name:"remove",kind:"scalar",T:9,repeated:!0},{no:4,name:"clear",kind:"scalar",T:8}])),eJ=ew.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:eZ,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:tm}]),eZ=ew.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),e0=ew.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:ew.getEnumType(eG),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),e1=ew.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ew.getEnumType(e2)},{no:4,name:"tracks",kind:"message",T:e9,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:e0},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:ew.getEnumType(e5)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:ew.getEnumType(eK)},{no:18,name:"kind_details",kind:"enum",T:ew.getEnumType(e3),repeated:!0},{no:19,name:"data_tracks",kind:"message",T:e7,repeated:!0}]),e2=ew.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),e5=ew.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),e3=ew.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"},{no:2,name:"CONNECTOR_WHATSAPP"},{no:3,name:"CONNECTOR_TWILIO"}]),e4=ew.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),e6=ew.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:te,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:ew.getEnumType(tt)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),e9=ew.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:ew.getEnumType(eq)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:ew.getEnumType(eG)},{no:10,name:"layers",kind:"message",T:te,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:e6,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:ew.getEnumType(e4)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:tm},{no:19,name:"audio_features",kind:"enum",T:ew.getEnumType(eY),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:ew.getEnumType(eV)}]),e7=ew.makeMessageType("livekit.DataTrackInfo",()=>[{no:1,name:"pub_handle",kind:"scalar",T:13},{no:2,name:"sid",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"encryption",kind:"enum",T:ew.getEnumType(e4)}]),e8=ew.makeMessageType("livekit.DataTrackSubscriptionOptions",()=>[{no:1,name:"target_fps",kind:"scalar",T:13,opt:!0}]),te=ew.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:ew.getEnumType(ez)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),tt=ew.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),tn=(()=>[{no:1,name:"encryption_type",kind:"enum",T:ew.getEnumType(e4)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}],ew.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}])),tr=(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}],ew.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}])),ta=(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}],ew.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}])),ti=ew.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),to=ew.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:ew.getEnumType(ts)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),ts=ew.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),tl=(()=>[{no:1,name:"sdk",kind:"enum",T:ew.getEnumType(tl)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}],ew.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}])),tc=ew.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:tu},{no:2,name:"screen",kind:"message",T:tu},{no:3,name:"resume_connection",kind:"enum",T:ew.getEnumType(eW)},{no:4,name:"disabled_codecs",kind:"message",T:td},{no:5,name:"force_relay",kind:"enum",T:ew.getEnumType(eW)}]),tu=ew.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:ew.getEnumType(eW)}]),td=ew.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:eZ,repeated:!0},{no:2,name:"publish",kind:"message",T:eZ,repeated:!0}]),tm=(()=>[{no:1,name:"start_time",kind:"message",T:ex},{no:2,name:"end_time",kind:"message",T:ex},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}],ew.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}])),tp=ew.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),tf=ew.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:ew.getEnumType(tp)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),th=ew.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),tv=(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:ew.getEnumType(e4)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:tf,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:th,oneof:"content_header"}],ew.makeMessageType("livekit.FilterParams",()=>[{no:1,name:"include_events",kind:"scalar",T:9,repeated:!0},{no:2,name:"exclude_events",kind:"scalar",T:9,repeated:!0}])),tg=ew.makeMessageType("livekit.WebhookConfig",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"signing_key",kind:"scalar",T:9},{no:3,name:"filter_params",kind:"message",T:tv}]),ty=ew.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),tb=ew.makeEnum("livekit.JobType",[{no:0,name:"JT_ROOM"},{no:1,name:"JT_PUBLISHER"},{no:2,name:"JT_PARTICIPANT"}]),t_=ew.makeEnum("livekit.WorkerStatus",[{no:0,name:"WS_AVAILABLE"},{no:1,name:"WS_FULL"}]),tT=ew.makeEnum("livekit.JobStatus",[{no:0,name:"JS_PENDING"},{no:1,name:"JS_RUNNING"},{no:2,name:"JS_SUCCESS"},{no:3,name:"JS_FAILED"}]),tk=ew.makeMessageType("livekit.Job",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:9,name:"dispatch_id",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:ew.getEnumType(tb)},{no:3,name:"room",kind:"message",T:eJ},{no:4,name:"participant",kind:"message",T:e1,opt:!0},{no:5,name:"namespace",kind:"scalar",T:9},{no:6,name:"metadata",kind:"scalar",T:9},{no:7,name:"agent_name",kind:"scalar",T:9},{no:8,name:"state",kind:"message",T:tE},{no:10,name:"enable_recording",kind:"scalar",T:8}]),tE=ew.makeMessageType("livekit.JobState",()=>[{no:1,name:"status",kind:"enum",T:ew.getEnumType(tT)},{no:2,name:"error",kind:"scalar",T:9},{no:3,name:"started_at",kind:"scalar",T:3},{no:4,name:"ended_at",kind:"scalar",T:3},{no:5,name:"updated_at",kind:"scalar",T:3},{no:6,name:"participant_identity",kind:"scalar",T:9},{no:7,name:"worker_id",kind:"scalar",T:9},{no:8,name:"agent_id",kind:"scalar",T:9}]),tS=(()=>[{no:1,name:"type",kind:"enum",T:ew.getEnumType(tb)},{no:2,name:"room",kind:"message",T:eJ},{no:3,name:"participant",kind:"message",T:e1}],ew.makeMessageType("livekit.RoomAgentDispatch",()=>[{no:1,name:"agent_name",kind:"scalar",T:9},{no:2,name:"metadata",kind:"scalar",T:9}])),tw=(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"agent_name",kind:"scalar",T:9},{no:3,name:"room",kind:"scalar",T:9},{no:4,name:"metadata",kind:"scalar",T:9},{no:5,name:"state",kind:"message",T:tw}],ew.makeMessageType("livekit.AgentDispatchState",()=>[{no:1,name:"jobs",kind:"message",T:tk,repeated:!0},{no:2,name:"created_at",kind:"scalar",T:3},{no:3,name:"deleted_at",kind:"scalar",T:3}])),tx=ew.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),tC=ew.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),tI=ew.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),tR=ew.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:te,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:ew.getEnumType(tt)}]),tP=ew.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:ew.getEnumType(eq)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:ew.getEnumType(eG)},{no:9,name:"layers",kind:"message",T:te,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:tR,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:ew.getEnumType(e4)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:ew.getEnumType(eV)},{no:17,name:"audio_features",kind:"enum",T:ew.getEnumType(eY),repeated:!0}]),tN=ew.makeMessageType("livekit.PublishDataTrackRequest",()=>[{no:1,name:"pub_handle",kind:"scalar",T:13},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"encryption",kind:"enum",T:ew.getEnumType(e4)}]),tA=ew.makeMessageType("livekit.PublishDataTrackResponse",()=>[{no:1,name:"info",kind:"message",T:e7}]),tL=ew.makeMessageType("livekit.UnpublishDataTrackRequest",()=>[{no:1,name:"pub_handle",kind:"scalar",T:13}]),tO=(()=>[{no:1,name:"info",kind:"message",T:e7}],ew.makeMessageType("livekit.DataTrackSubscriberHandles.PublishedDataTrack",()=>[{no:1,name:"publisher_identity",kind:"scalar",T:9},{no:2,name:"publisher_sid",kind:"scalar",T:9},{no:3,name:"track_sid",kind:"scalar",T:9}],{localName:"DataTrackSubscriberHandles_PublishedDataTrack"})),tM=ew.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:ew.getEnumType(tx)},{no:3,name:"final",kind:"scalar",T:8}]),tD=ew.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),tj=(()=>[{no:1,name:"room",kind:"message",T:eJ},{no:2,name:"participant",kind:"message",T:e1},{no:3,name:"other_participants",kind:"message",T:e1,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:tz,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:tc},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:to},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:eZ,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}],ew.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:e9}])),tU=(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}],ew.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}])),tF=(()=>[{no:1,name:"participants",kind:"message",T:e1,repeated:!0}],ew.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:ti,repeated:!0}])),tH=(()=>[{no:1,name:"updates",kind:"message",T:tH,repeated:!0}],ew.makeMessageType("livekit.UpdateDataSubscription.Update",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"options",kind:"message",T:e8}],{localName:"UpdateDataSubscription_Update"})),tB=(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:ew.getEnumType(ez)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}],ew.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:ew.getEnumType(eY),repeated:!0}])),tV=ew.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),tq=(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:ew.getEnumType(eK)},{no:3,name:"action",kind:"enum",T:ew.getEnumType(tq)},{no:4,name:"regions",kind:"message",T:tZ}],ew.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}])),tG=(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:te,repeated:!0}],ew.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}])),tz=ew.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),t$=(()=>[{no:1,name:"speakers",kind:"message",T:tn,repeated:!0}],ew.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:ew.getEnumType(e$)},{no:3,name:"score",kind:"scalar",T:2}])),tW=(()=>[{no:1,name:"updates",kind:"message",T:t$,repeated:!0}],ew.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ew.getEnumType(tC)}])),tK=(()=>[{no:1,name:"stream_states",kind:"message",T:tW,repeated:!0}],ew.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:ew.getEnumType(ez)},{no:2,name:"enabled",kind:"scalar",T:8}])),tQ=ew.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:tK,repeated:!0}]),tY=(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:tK,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:tQ,repeated:!0}],ew.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}])),tX=(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:tY,repeated:!0}],ew.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}])),tJ=ew.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:ew.getEnumType(tx)}]),tZ=(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:ew.getEnumType(tI),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}],ew.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:t0,repeated:!0}])),t0=ew.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),t1=(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:ew.getEnumType(eQ)}],ew.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"},{no:7,name:"INVALID_HANDLE"},{no:8,name:"INVALID_NAME"},{no:9,name:"DUPLICATE_HANDLE"},{no:10,name:"DUPLICATE_NAME"}])),t2=(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}],ew.makeEnum("livekit.EncodedFileType",[{no:0,name:"DEFAULT_FILETYPE"},{no:1,name:"MP4"},{no:2,name:"OGG"},{no:3,name:"MP3"}])),t5=ew.makeEnum("livekit.SegmentedFileProtocol",[{no:0,name:"DEFAULT_SEGMENTED_FILE_PROTOCOL"},{no:1,name:"HLS_PROTOCOL"}]),t3=ew.makeEnum("livekit.SegmentedFileSuffix",[{no:0,name:"INDEX"},{no:1,name:"TIMESTAMP"}]),t4=ew.makeEnum("livekit.ImageFileSuffix",[{no:0,name:"IMAGE_SUFFIX_INDEX"},{no:1,name:"IMAGE_SUFFIX_TIMESTAMP"},{no:2,name:"IMAGE_SUFFIX_NONE_OVERWRITE"}]),t6=ew.makeEnum("livekit.StreamProtocol",[{no:0,name:"DEFAULT_PROTOCOL"},{no:1,name:"RTMP"},{no:2,name:"SRT"}]),t9=ew.makeEnum("livekit.AudioMixing",[{no:0,name:"DEFAULT_MIXING"},{no:1,name:"DUAL_CHANNEL_AGENT"},{no:2,name:"DUAL_CHANNEL_ALTERNATE"}]),t7=ew.makeEnum("livekit.EncodingOptionsPreset",[{no:0,name:"H264_720P_30"},{no:1,name:"H264_720P_60"},{no:2,name:"H264_1080P_30"},{no:3,name:"H264_1080P_60"},{no:4,name:"PORTRAIT_H264_720P_30"},{no:5,name:"PORTRAIT_H264_720P_60"},{no:6,name:"PORTRAIT_H264_1080P_30"},{no:7,name:"PORTRAIT_H264_1080P_60"}]),t8=ew.makeEnum("livekit.EgressStatus",[{no:0,name:"EGRESS_STARTING"},{no:1,name:"EGRESS_ACTIVE"},{no:2,name:"EGRESS_ENDING"},{no:3,name:"EGRESS_COMPLETE"},{no:4,name:"EGRESS_FAILED"},{no:5,name:"EGRESS_ABORTED"},{no:6,name:"EGRESS_LIMIT_REACHED"}]),ne=ew.makeEnum("livekit.EgressSourceType",[{no:0,name:"EGRESS_SOURCE_TYPE_WEB",localName:"WEB"},{no:1,name:"EGRESS_SOURCE_TYPE_SDK",localName:"SDK"}]),nt=ew.makeMessageType("livekit.RoomCompositeEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"layout",kind:"scalar",T:9},{no:3,name:"audio_only",kind:"scalar",T:8},{no:15,name:"audio_mixing",kind:"enum",T:ew.getEnumType(t9)},{no:4,name:"video_only",kind:"scalar",T:8},{no:5,name:"custom_base_url",kind:"scalar",T:9},{no:6,name:"file",kind:"message",T:no,oneof:"output"},{no:7,name:"stream",kind:"message",T:nh,oneof:"output"},{no:10,name:"segments",kind:"message",T:ns,oneof:"output"},{no:8,name:"preset",kind:"enum",T:ew.getEnumType(t7),oneof:"options"},{no:9,name:"advanced",kind:"message",T:nv,oneof:"options"},{no:11,name:"file_outputs",kind:"message",T:no,repeated:!0},{no:12,name:"stream_outputs",kind:"message",T:nh,repeated:!0},{no:13,name:"segment_outputs",kind:"message",T:ns,repeated:!0},{no:14,name:"image_outputs",kind:"message",T:nc,repeated:!0},{no:16,name:"webhooks",kind:"message",T:tg,repeated:!0}]),nn=ew.makeMessageType("livekit.WebEgressRequest",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"audio_only",kind:"scalar",T:8},{no:3,name:"video_only",kind:"scalar",T:8},{no:12,name:"await_start_signal",kind:"scalar",T:8},{no:4,name:"file",kind:"message",T:no,oneof:"output"},{no:5,name:"stream",kind:"message",T:nh,oneof:"output"},{no:6,name:"segments",kind:"message",T:ns,oneof:"output"},{no:7,name:"preset",kind:"enum",T:ew.getEnumType(t7),oneof:"options"},{no:8,name:"advanced",kind:"message",T:nv,oneof:"options"},{no:9,name:"file_outputs",kind:"message",T:no,repeated:!0},{no:10,name:"stream_outputs",kind:"message",T:nh,repeated:!0},{no:11,name:"segment_outputs",kind:"message",T:ns,repeated:!0},{no:13,name:"image_outputs",kind:"message",T:nc,repeated:!0},{no:14,name:"webhooks",kind:"message",T:tg,repeated:!0}]),nr=ew.makeMessageType("livekit.ParticipantEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"screen_share",kind:"scalar",T:8},{no:4,name:"preset",kind:"enum",T:ew.getEnumType(t7),oneof:"options"},{no:5,name:"advanced",kind:"message",T:nv,oneof:"options"},{no:6,name:"file_outputs",kind:"message",T:no,repeated:!0},{no:7,name:"stream_outputs",kind:"message",T:nh,repeated:!0},{no:8,name:"segment_outputs",kind:"message",T:ns,repeated:!0},{no:9,name:"image_outputs",kind:"message",T:nc,repeated:!0},{no:10,name:"webhooks",kind:"message",T:tg,repeated:!0}]),na=ew.makeMessageType("livekit.TrackCompositeEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"audio_track_id",kind:"scalar",T:9},{no:3,name:"video_track_id",kind:"scalar",T:9},{no:4,name:"file",kind:"message",T:no,oneof:"output"},{no:5,name:"stream",kind:"message",T:nh,oneof:"output"},{no:8,name:"segments",kind:"message",T:ns,oneof:"output"},{no:6,name:"preset",kind:"enum",T:ew.getEnumType(t7),oneof:"options"},{no:7,name:"advanced",kind:"message",T:nv,oneof:"options"},{no:11,name:"file_outputs",kind:"message",T:no,repeated:!0},{no:12,name:"stream_outputs",kind:"message",T:nh,repeated:!0},{no:13,name:"segment_outputs",kind:"message",T:ns,repeated:!0},{no:14,name:"image_outputs",kind:"message",T:nc,repeated:!0},{no:15,name:"webhooks",kind:"message",T:tg,repeated:!0}]),ni=ew.makeMessageType("livekit.TrackEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"track_id",kind:"scalar",T:9},{no:3,name:"file",kind:"message",T:nl,oneof:"output"},{no:4,name:"websocket_url",kind:"scalar",T:9,oneof:"output"},{no:5,name:"webhooks",kind:"message",T:tg,repeated:!0}]),no=ew.makeMessageType("livekit.EncodedFileOutput",()=>[{no:1,name:"file_type",kind:"enum",T:ew.getEnumType(t2)},{no:2,name:"filepath",kind:"scalar",T:9},{no:6,name:"disable_manifest",kind:"scalar",T:8},{no:3,name:"s3",kind:"message",T:nu,oneof:"output"},{no:4,name:"gcp",kind:"message",T:nd,oneof:"output"},{no:5,name:"azure",kind:"message",T:nm,oneof:"output"},{no:7,name:"aliOSS",kind:"message",T:np,oneof:"output"}]),ns=ew.makeMessageType("livekit.SegmentedFileOutput",()=>[{no:1,name:"protocol",kind:"enum",T:ew.getEnumType(t5)},{no:2,name:"filename_prefix",kind:"scalar",T:9},{no:3,name:"playlist_name",kind:"scalar",T:9},{no:11,name:"live_playlist_name",kind:"scalar",T:9},{no:4,name:"segment_duration",kind:"scalar",T:13},{no:10,name:"filename_suffix",kind:"enum",T:ew.getEnumType(t3)},{no:8,name:"disable_manifest",kind:"scalar",T:8},{no:5,name:"s3",kind:"message",T:nu,oneof:"output"},{no:6,name:"gcp",kind:"message",T:nd,oneof:"output"},{no:7,name:"azure",kind:"message",T:nm,oneof:"output"},{no:9,name:"aliOSS",kind:"message",T:np,oneof:"output"}]),nl=ew.makeMessageType("livekit.DirectFileOutput",()=>[{no:1,name:"filepath",kind:"scalar",T:9},{no:5,name:"disable_manifest",kind:"scalar",T:8},{no:2,name:"s3",kind:"message",T:nu,oneof:"output"},{no:3,name:"gcp",kind:"message",T:nd,oneof:"output"},{no:4,name:"azure",kind:"message",T:nm,oneof:"output"},{no:6,name:"aliOSS",kind:"message",T:np,oneof:"output"}]),nc=ew.makeMessageType("livekit.ImageOutput",()=>[{no:1,name:"capture_interval",kind:"scalar",T:13},{no:2,name:"width",kind:"scalar",T:5},{no:3,name:"height",kind:"scalar",T:5},{no:4,name:"filename_prefix",kind:"scalar",T:9},{no:5,name:"filename_suffix",kind:"enum",T:ew.getEnumType(t4)},{no:6,name:"image_codec",kind:"enum",T:ew.getEnumType(eB)},{no:7,name:"disable_manifest",kind:"scalar",T:8},{no:8,name:"s3",kind:"message",T:nu,oneof:"output"},{no:9,name:"gcp",kind:"message",T:nd,oneof:"output"},{no:10,name:"azure",kind:"message",T:nm,oneof:"output"},{no:11,name:"aliOSS",kind:"message",T:np,oneof:"output"}]),nu=ew.makeMessageType("livekit.S3Upload",()=>[{no:1,name:"access_key",kind:"scalar",T:9},{no:2,name:"secret",kind:"scalar",T:9},{no:11,name:"session_token",kind:"scalar",T:9},{no:12,name:"assume_role_arn",kind:"scalar",T:9},{no:13,name:"assume_role_external_id",kind:"scalar",T:9},{no:3,name:"region",kind:"scalar",T:9},{no:4,name:"endpoint",kind:"scalar",T:9},{no:5,name:"bucket",kind:"scalar",T:9},{no:6,name:"force_path_style",kind:"scalar",T:8},{no:7,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:8,name:"tagging",kind:"scalar",T:9},{no:9,name:"content_disposition",kind:"scalar",T:9},{no:10,name:"proxy",kind:"message",T:nf}]),nd=ew.makeMessageType("livekit.GCPUpload",()=>[{no:1,name:"credentials",kind:"scalar",T:9},{no:2,name:"bucket",kind:"scalar",T:9},{no:3,name:"proxy",kind:"message",T:nf}]),nm=ew.makeMessageType("livekit.AzureBlobUpload",()=>[{no:1,name:"account_name",kind:"scalar",T:9},{no:2,name:"account_key",kind:"scalar",T:9},{no:3,name:"container_name",kind:"scalar",T:9}]),np=ew.makeMessageType("livekit.AliOSSUpload",()=>[{no:1,name:"access_key",kind:"scalar",T:9},{no:2,name:"secret",kind:"scalar",T:9},{no:3,name:"region",kind:"scalar",T:9},{no:4,name:"endpoint",kind:"scalar",T:9},{no:5,name:"bucket",kind:"scalar",T:9}]),nf=ew.makeMessageType("livekit.ProxyConfig",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"password",kind:"scalar",T:9}]),nh=ew.makeMessageType("livekit.StreamOutput",()=>[{no:1,name:"protocol",kind:"enum",T:ew.getEnumType(t6)},{no:2,name:"urls",kind:"scalar",T:9,repeated:!0}]),nv=ew.makeMessageType("livekit.EncodingOptions",()=>[{no:1,name:"width",kind:"scalar",T:5},{no:2,name:"height",kind:"scalar",T:5},{no:3,name:"depth",kind:"scalar",T:5},{no:4,name:"framerate",kind:"scalar",T:5},{no:5,name:"audio_codec",kind:"enum",T:ew.getEnumType(eF)},{no:6,name:"audio_bitrate",kind:"scalar",T:5},{no:11,name:"audio_quality",kind:"scalar",T:5},{no:7,name:"audio_frequency",kind:"scalar",T:5},{no:8,name:"video_codec",kind:"enum",T:ew.getEnumType(eH)},{no:9,name:"video_bitrate",kind:"scalar",T:5},{no:12,name:"video_quality",kind:"scalar",T:5},{no:10,name:"key_frame_interval",kind:"scalar",T:1}]),ng=(()=>[{no:1,name:"egress_id",kind:"scalar",T:9},{no:2,name:"room_id",kind:"scalar",T:9},{no:13,name:"room_name",kind:"scalar",T:9},{no:26,name:"source_type",kind:"enum",T:ew.getEnumType(ne)},{no:3,name:"status",kind:"enum",T:ew.getEnumType(t8)},{no:10,name:"started_at",kind:"scalar",T:3},{no:11,name:"ended_at",kind:"scalar",T:3},{no:18,name:"updated_at",kind:"scalar",T:3},{no:21,name:"details",kind:"scalar",T:9},{no:9,name:"error",kind:"scalar",T:9},{no:22,name:"error_code",kind:"scalar",T:5},{no:4,name:"room_composite",kind:"message",T:nt,oneof:"request"},{no:14,name:"web",kind:"message",T:nn,oneof:"request"},{no:19,name:"participant",kind:"message",T:nr,oneof:"request"},{no:5,name:"track_composite",kind:"message",T:na,oneof:"request"},{no:6,name:"track",kind:"message",T:ni,oneof:"request"},{no:7,name:"stream",kind:"message",T:ng,oneof:"result"},{no:8,name:"file",kind:"message",T:n_,oneof:"result"},{no:12,name:"segments",kind:"message",T:nT,oneof:"result"},{no:15,name:"stream_results",kind:"message",T:ny,repeated:!0},{no:16,name:"file_results",kind:"message",T:n_,repeated:!0},{no:17,name:"segment_results",kind:"message",T:nT,repeated:!0},{no:20,name:"image_results",kind:"message",T:nk,repeated:!0},{no:23,name:"manifest_location",kind:"scalar",T:9},{no:25,name:"backup_storage_used",kind:"scalar",T:8}],ew.makeMessageType("livekit.StreamInfoList",()=>[{no:1,name:"info",kind:"message",T:ny,repeated:!0}])),ny=ew.makeMessageType("livekit.StreamInfo",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3},{no:4,name:"duration",kind:"scalar",T:3},{no:5,name:"status",kind:"enum",T:ew.getEnumType(nb)},{no:6,name:"error",kind:"scalar",T:9},{no:7,name:"last_retry_at",kind:"scalar",T:3},{no:8,name:"retries",kind:"scalar",T:13}]),nb=ew.makeEnum("livekit.StreamInfo.Status",[{no:0,name:"ACTIVE"},{no:1,name:"FINISHED"},{no:2,name:"FAILED"}]),n_=ew.makeMessageType("livekit.FileInfo",()=>[{no:1,name:"filename",kind:"scalar",T:9},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3},{no:6,name:"duration",kind:"scalar",T:3},{no:4,name:"size",kind:"scalar",T:3},{no:5,name:"location",kind:"scalar",T:9}]),nT=ew.makeMessageType("livekit.SegmentsInfo",()=>[{no:1,name:"playlist_name",kind:"scalar",T:9},{no:8,name:"live_playlist_name",kind:"scalar",T:9},{no:2,name:"duration",kind:"scalar",T:3},{no:3,name:"size",kind:"scalar",T:3},{no:4,name:"playlist_location",kind:"scalar",T:9},{no:9,name:"live_playlist_location",kind:"scalar",T:9},{no:5,name:"segment_count",kind:"scalar",T:3},{no:6,name:"started_at",kind:"scalar",T:3},{no:7,name:"ended_at",kind:"scalar",T:3}]),nk=ew.makeMessageType("livekit.ImagesInfo",()=>[{no:4,name:"filename_prefix",kind:"scalar",T:9},{no:1,name:"image_count",kind:"scalar",T:3},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3}]),nE=ew.makeMessageType("livekit.AutoParticipantEgress",()=>[{no:1,name:"preset",kind:"enum",T:ew.getEnumType(t7),oneof:"options"},{no:2,name:"advanced",kind:"message",T:nv,oneof:"options"},{no:3,name:"file_outputs",kind:"message",T:no,repeated:!0},{no:4,name:"segment_outputs",kind:"message",T:ns,repeated:!0}]),nS=ew.makeMessageType("livekit.AutoTrackEgress",()=>[{no:1,name:"filepath",kind:"scalar",T:9},{no:5,name:"disable_manifest",kind:"scalar",T:8},{no:2,name:"s3",kind:"message",T:nu,oneof:"output"},{no:3,name:"gcp",kind:"message",T:nd,oneof:"output"},{no:4,name:"azure",kind:"message",T:nm,oneof:"output"},{no:6,name:"aliOSS",kind:"message",T:np,oneof:"output"}]),nw=ew.makeEnum("livekit.IngressInput",[{no:0,name:"RTMP_INPUT"},{no:1,name:"WHIP_INPUT"},{no:2,name:"URL_INPUT"}]),nx=ew.makeEnum("livekit.IngressAudioEncodingPreset",[{no:0,name:"OPUS_STEREO_96KBPS"},{no:1,name:"OPUS_MONO_64KBS"}]),nC=ew.makeEnum("livekit.IngressVideoEncodingPreset",[{no:0,name:"H264_720P_30FPS_3_LAYERS"},{no:1,name:"H264_1080P_30FPS_3_LAYERS"},{no:2,name:"H264_540P_25FPS_2_LAYERS"},{no:3,name:"H264_720P_30FPS_1_LAYER"},{no:4,name:"H264_1080P_30FPS_1_LAYER"},{no:5,name:"H264_720P_30FPS_3_LAYERS_HIGH_MOTION"},{no:6,name:"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION"},{no:7,name:"H264_540P_25FPS_2_LAYERS_HIGH_MOTION"},{no:8,name:"H264_720P_30FPS_1_LAYER_HIGH_MOTION"},{no:9,name:"H264_1080P_30FPS_1_LAYER_HIGH_MOTION"}]),nI=ew.makeMessageType("livekit.IngressAudioOptions",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"source",kind:"enum",T:ew.getEnumType(eG)},{no:3,name:"preset",kind:"enum",T:ew.getEnumType(nx),oneof:"encoding_options"},{no:4,name:"options",kind:"message",T:nP,oneof:"encoding_options"}]),nR=ew.makeMessageType("livekit.IngressVideoOptions",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"source",kind:"enum",T:ew.getEnumType(eG)},{no:3,name:"preset",kind:"enum",T:ew.getEnumType(nC),oneof:"encoding_options"},{no:4,name:"options",kind:"message",T:nN,oneof:"encoding_options"}]),nP=ew.makeMessageType("livekit.IngressAudioEncodingOptions",()=>[{no:1,name:"audio_codec",kind:"enum",T:ew.getEnumType(eF)},{no:2,name:"bitrate",kind:"scalar",T:13},{no:3,name:"disable_dtx",kind:"scalar",T:8},{no:4,name:"channels",kind:"scalar",T:13}]),nN=ew.makeMessageType("livekit.IngressVideoEncodingOptions",()=>[{no:1,name:"video_codec",kind:"enum",T:ew.getEnumType(eH)},{no:2,name:"frame_rate",kind:"scalar",T:1},{no:3,name:"layers",kind:"message",T:te,repeated:!0}]),nA=(()=>[{no:1,name:"ingress_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"stream_key",kind:"scalar",T:9},{no:4,name:"url",kind:"scalar",T:9},{no:5,name:"input_type",kind:"enum",T:ew.getEnumType(nw)},{no:13,name:"bypass_transcoding",kind:"scalar",T:8},{no:15,name:"enable_transcoding",kind:"scalar",T:8,opt:!0},{no:6,name:"audio",kind:"message",T:nI},{no:7,name:"video",kind:"message",T:nR},{no:8,name:"room_name",kind:"scalar",T:9},{no:9,name:"participant_identity",kind:"scalar",T:9},{no:10,name:"participant_name",kind:"scalar",T:9},{no:14,name:"participant_metadata",kind:"scalar",T:9},{no:11,name:"reusable",kind:"scalar",T:8},{no:12,name:"state",kind:"message",T:nA},{no:16,name:"enabled",kind:"scalar",T:8,opt:!0}],ew.makeMessageType("livekit.IngressState",()=>[{no:1,name:"status",kind:"enum",T:ew.getEnumType(nL)},{no:2,name:"error",kind:"scalar",T:9},{no:3,name:"video",kind:"message",T:nO},{no:4,name:"audio",kind:"message",T:nM},{no:5,name:"room_id",kind:"scalar",T:9},{no:7,name:"started_at",kind:"scalar",T:3},{no:8,name:"ended_at",kind:"scalar",T:3},{no:10,name:"updated_at",kind:"scalar",T:3},{no:9,name:"resource_id",kind:"scalar",T:9},{no:6,name:"tracks",kind:"message",T:e9,repeated:!0}])),nL=ew.makeEnum("livekit.IngressState.Status",[{no:0,name:"ENDPOINT_INACTIVE"},{no:1,name:"ENDPOINT_BUFFERING"},{no:2,name:"ENDPOINT_PUBLISHING"},{no:3,name:"ENDPOINT_ERROR"},{no:4,name:"ENDPOINT_COMPLETE"}]),nO=ew.makeMessageType("livekit.InputVideoState",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"average_bitrate",kind:"scalar",T:13},{no:3,name:"width",kind:"scalar",T:13},{no:4,name:"height",kind:"scalar",T:13},{no:5,name:"framerate",kind:"scalar",T:1}]),nM=ew.makeMessageType("livekit.InputAudioState",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"average_bitrate",kind:"scalar",T:13},{no:3,name:"channels",kind:"scalar",T:13},{no:4,name:"sample_rate",kind:"scalar",T:13}]),nD=ew.makeMessageType("livekit.RoomEgress",()=>[{no:1,name:"room",kind:"message",T:nt},{no:3,name:"participant",kind:"message",T:nE},{no:2,name:"tracks",kind:"message",T:nS}]),nj=ew.makeMessageType("livekit.RoomConfiguration",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"empty_timeout",kind:"scalar",T:13},{no:3,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:11,name:"metadata",kind:"scalar",T:9},{no:5,name:"egress",kind:"message",T:nD},{no:7,name:"min_playout_delay",kind:"scalar",T:13},{no:8,name:"max_playout_delay",kind:"scalar",T:13},{no:9,name:"sync_streams",kind:"scalar",T:8},{no:10,name:"agents",kind:"message",T:tS,repeated:!0}]),nU=ew.makeEnum("livekit.SIPStatusCode",[{no:0,name:"SIP_STATUS_UNKNOWN"},{no:100,name:"SIP_STATUS_TRYING"},{no:180,name:"SIP_STATUS_RINGING"},{no:181,name:"SIP_STATUS_CALL_IS_FORWARDED"},{no:182,name:"SIP_STATUS_QUEUED"},{no:183,name:"SIP_STATUS_SESSION_PROGRESS"},{no:199,name:"SIP_STATUS_EARLY_DIALOG_TERMINATED"},{no:200,name:"SIP_STATUS_OK"},{no:202,name:"SIP_STATUS_ACCEPTED"},{no:204,name:"SIP_STATUS_NO_NOTIFICATION"},{no:300,name:"SIP_STATUS_MULTIPLE_CHOICES"},{no:301,name:"SIP_STATUS_MOVED_PERMANENTLY"},{no:302,name:"SIP_STATUS_MOVED_TEMPORARILY"},{no:305,name:"SIP_STATUS_USE_PROXY"},{no:380,name:"SIP_STATUS_ALTERNATIVE_SERVICE"},{no:400,name:"SIP_STATUS_BAD_REQUEST"},{no:401,name:"SIP_STATUS_UNAUTHORIZED"},{no:402,name:"SIP_STATUS_PAYMENT_REQUIRED"},{no:403,name:"SIP_STATUS_FORBIDDEN"},{no:404,name:"SIP_STATUS_NOTFOUND"},{no:405,name:"SIP_STATUS_METHOD_NOT_ALLOWED"},{no:406,name:"SIP_STATUS_NOT_ACCEPTABLE"},{no:407,name:"SIP_STATUS_PROXY_AUTH_REQUIRED"},{no:408,name:"SIP_STATUS_REQUEST_TIMEOUT"},{no:409,name:"SIP_STATUS_CONFLICT"},{no:410,name:"SIP_STATUS_GONE"},{no:411,name:"SIP_STATUS_LENGTH_REQUIRED"},{no:412,name:"SIP_STATUS_CONDITIONAL_REQUEST_FAILED"},{no:413,name:"SIP_STATUS_REQUEST_ENTITY_TOO_LARGE"},{no:414,name:"SIP_STATUS_REQUEST_URI_TOO_LONG"},{no:415,name:"SIP_STATUS_UNSUPPORTED_MEDIA_TYPE"},{no:416,name:"SIP_STATUS_REQUESTED_RANGE_NOT_SATISFIABLE"},{no:417,name:"SIP_STATUS_UNKNOWN_RESOURCE_PRIORITY"},{no:420,name:"SIP_STATUS_BAD_EXTENSION"},{no:421,name:"SIP_STATUS_EXTENSION_REQUIRED"},{no:422,name:"SIP_STATUS_SESSION_INTERVAL_TOO_SMALL"},{no:423,name:"SIP_STATUS_INTERVAL_TOO_BRIEF"},{no:424,name:"SIP_STATUS_BAD_LOCATION_INFORMATION"},{no:425,name:"SIP_STATUS_BAD_ALERT_MESSAGE"},{no:428,name:"SIP_STATUS_USE_IDENTITY_HEADER"},{no:429,name:"SIP_STATUS_PROVIDE_REFERRER_IDENTITY"},{no:430,name:"SIP_STATUS_FLOW_FAILED"},{no:433,name:"SIP_STATUS_ANONYMITY_DISALLOWED"},{no:436,name:"SIP_STATUS_BAD_IDENTITY_INFO"},{no:437,name:"SIP_STATUS_UNSUPPORTED_CERTIFICATE"},{no:438,name:"SIP_STATUS_INVALID_IDENTITY_HEADER"},{no:439,name:"SIP_STATUS_FIRST_HOP_LACKS_OUTBOUND_SUPPORT"},{no:440,name:"SIP_STATUS_MAX_BREADTH_EXCEEDED"},{no:469,name:"SIP_STATUS_BAD_INFO_PACKAGE"},{no:470,name:"SIP_STATUS_CONSENT_NEEDED"},{no:480,name:"SIP_STATUS_TEMPORARILY_UNAVAILABLE"},{no:481,name:"SIP_STATUS_CALL_TRANSACTION_DOES_NOT_EXISTS"},{no:482,name:"SIP_STATUS_LOOP_DETECTED"},{no:483,name:"SIP_STATUS_TOO_MANY_HOPS"},{no:484,name:"SIP_STATUS_ADDRESS_INCOMPLETE"},{no:485,name:"SIP_STATUS_AMBIGUOUS"},{no:486,name:"SIP_STATUS_BUSY_HERE"},{no:487,name:"SIP_STATUS_REQUEST_TERMINATED"},{no:488,name:"SIP_STATUS_NOT_ACCEPTABLE_HERE"},{no:489,name:"SIP_STATUS_BAD_EVENT"},{no:491,name:"SIP_STATUS_REQUEST_PENDING"},{no:493,name:"SIP_STATUS_UNDECIPHERABLE"},{no:494,name:"SIP_STATUS_SECURITY_AGREEMENT_REQUIRED"},{no:500,name:"SIP_STATUS_INTERNAL_SERVER_ERROR"},{no:501,name:"SIP_STATUS_NOT_IMPLEMENTED"},{no:502,name:"SIP_STATUS_BAD_GATEWAY"},{no:503,name:"SIP_STATUS_SERVICE_UNAVAILABLE"},{no:504,name:"SIP_STATUS_GATEWAY_TIMEOUT"},{no:505,name:"SIP_STATUS_VERSION_NOT_SUPPORTED"},{no:513,name:"SIP_STATUS_MESSAGE_TOO_LARGE"},{no:600,name:"SIP_STATUS_GLOBAL_BUSY_EVERYWHERE"},{no:603,name:"SIP_STATUS_GLOBAL_DECLINE"},{no:604,name:"SIP_STATUS_GLOBAL_DOES_NOT_EXIST_ANYWHERE"},{no:606,name:"SIP_STATUS_GLOBAL_NOT_ACCEPTABLE"},{no:607,name:"SIP_STATUS_GLOBAL_UNWANTED"},{no:608,name:"SIP_STATUS_GLOBAL_REJECTED"}]),nF=ew.makeEnum("livekit.SIPTransport",[{no:0,name:"SIP_TRANSPORT_AUTO"},{no:1,name:"SIP_TRANSPORT_UDP"},{no:2,name:"SIP_TRANSPORT_TCP"},{no:3,name:"SIP_TRANSPORT_TLS"}]),nH=ew.makeEnum("livekit.SIPHeaderOptions",[{no:0,name:"SIP_NO_HEADERS"},{no:1,name:"SIP_X_HEADERS"},{no:2,name:"SIP_ALL_HEADERS"}]),nB=ew.makeEnum("livekit.SIPMediaEncryption",[{no:0,name:"SIP_MEDIA_ENCRYPT_DISABLE"},{no:1,name:"SIP_MEDIA_ENCRYPT_ALLOW"},{no:2,name:"SIP_MEDIA_ENCRYPT_REQUIRE"}]),nV=ew.makeEnum("livekit.ProviderType",[{no:0,name:"PROVIDER_TYPE_UNKNOWN",localName:"UNKNOWN"},{no:1,name:"PROVIDER_TYPE_INTERNAL",localName:"INTERNAL"},{no:2,name:"PROVIDER_TYPE_EXTERNAL",localName:"EXTERNAL"}]),nq=(()=>[{no:1,name:"code",kind:"enum",T:ew.getEnumType(nU)},{no:2,name:"status",kind:"scalar",T:9}],ew.makeEnum("livekit.SIPTrunkInfo.TrunkKind",[{no:0,name:"TRUNK_LEGACY"},{no:1,name:"TRUNK_INBOUND"},{no:2,name:"TRUNK_OUTBOUND"}])),nG=(()=>[{no:1,name:"sip_trunk_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"numbers",kind:"scalar",T:9,repeated:!0},{no:5,name:"allowed_addresses",kind:"scalar",T:9,repeated:!0},{no:6,name:"allowed_numbers",kind:"scalar",T:9,repeated:!0},{no:7,name:"auth_username",kind:"scalar",T:9},{no:8,name:"auth_password",kind:"scalar",T:9},{no:9,name:"headers",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:10,name:"headers_to_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:14,name:"attributes_to_headers",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:15,name:"include_headers",kind:"enum",T:ew.getEnumType(nH)},{no:11,name:"ringing_timeout",kind:"message",T:eC},{no:12,name:"max_call_duration",kind:"message",T:eC},{no:13,name:"krisp_enabled",kind:"scalar",T:8},{no:16,name:"media_encryption",kind:"enum",T:ew.getEnumType(nB)}],ew.makeMessageType("livekit.SIPDispatchRuleDirect",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9}])),nz=ew.makeMessageType("livekit.SIPDispatchRuleIndividual",()=>[{no:1,name:"room_prefix",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9}]),n$=ew.makeMessageType("livekit.SIPDispatchRuleCallee",()=>[{no:1,name:"room_prefix",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9},{no:3,name:"randomize",kind:"scalar",T:8}]),nW=ew.makeMessageType("livekit.SIPDispatchRule",()=>[{no:1,name:"dispatch_rule_direct",kind:"message",T:nG,oneof:"rule"},{no:2,name:"dispatch_rule_individual",kind:"message",T:nz,oneof:"rule"},{no:3,name:"dispatch_rule_callee",kind:"message",T:n$,oneof:"rule"}]);()=>[{no:1,name:"sip_dispatch_rule_id",kind:"scalar",T:9},{no:2,name:"rule",kind:"message",T:nW},{no:3,name:"trunk_ids",kind:"scalar",T:9,repeated:!0},{no:4,name:"hide_phone_number",kind:"scalar",T:8},{no:7,name:"inbound_numbers",kind:"scalar",T:9,repeated:!0},{no:5,name:"name",kind:"scalar",T:9},{no:6,name:"metadata",kind:"scalar",T:9},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"room_preset",kind:"scalar",T:9},{no:10,name:"room_config",kind:"message",T:nj},{no:11,name:"krisp_enabled",kind:"scalar",T:8},{no:12,name:"media_encryption",kind:"enum",T:ew.getEnumType(nB)}],e.s(["ParticipantInfo_Kind",()=>e5,"TrackSource",()=>eG],852687)},249437,305288,525665,e=>{"use strict";let t,n,r,a,i;var o=e.i(281675),s=e.i(484169);let l=Math.min,c=Math.max,u=Math.round,d=Math.floor,m=e=>({x:e,y:e}),f={left:"right",right:"left",bottom:"top",top:"bottom"},h={start:"end",end:"start"};function v(e,t){return"function"==typeof e?e(t):e}function g(e){return e.split("-")[0]}function y(e){return e.split("-")[1]}function b(e){return"x"===e?"y":"x"}function _(e){return"y"===e?"height":"width"}let T=new Set(["top","bottom"]);function k(e){return T.has(g(e))?"y":"x"}function E(e){return e.replace(/start|end/g,e=>h[e])}let S=["left","right"],w=["right","left"],x=["top","bottom"],C=["bottom","top"];function I(e){return e.replace(/left|right|bottom|top/g,e=>f[e])}function R(e){let{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function P(e,t,n){let r,{reference:a,floating:i}=e,o=k(t),s=b(k(t)),l=_(s),c=g(t),u="y"===o,d=a.x+a.width/2-i.width/2,m=a.y+a.height/2-i.height/2,f=a[l]/2-i[l]/2;switch(c){case"top":r={x:d,y:a.y-i.height};break;case"bottom":r={x:d,y:a.y+a.height};break;case"right":r={x:a.x+a.width,y:m};break;case"left":r={x:a.x-i.width,y:m};break;default:r={x:a.x,y:a.y}}switch(y(t)){case"start":r[s]-=f*(n&&u?-1:1);break;case"end":r[s]+=f*(n&&u?-1:1)}return r}let N=async(e,t,n)=>{let{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),l=await (null==o.isRTL?void 0:o.isRTL(t)),c=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:d}=P(c,r,l),m=r,f={},h=0;for(let n=0;n<s.length;n++){let{name:i,fn:v}=s[n],{x:g,y:y,data:b,reset:_}=await v({x:u,y:d,initialPlacement:r,placement:m,strategy:a,middlewareData:f,rects:c,platform:o,elements:{reference:e,floating:t}});u=g??u,d=y??d,f={...f,[i]:{...f[i],...b}},_&&h<=50&&(h++,"object"==typeof _&&(_.placement&&(m=_.placement),_.rects&&(c=!0===_.rects?await o.getElementRects({reference:e,floating:t,strategy:a}):_.rects),{x:u,y:d}=P(c,m,l)),n=-1)}return{x:u,y:d,placement:m,strategy:a,middlewareData:f}};async function A(e,t){var n,r;void 0===t&&(t={});let{x:a,y:i,platform:o,rects:s,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:f=!1,padding:h=0}=v(t,e),g="number"!=typeof(r=h)?{top:0,right:0,bottom:0,left:0,...r}:{top:r,right:r,bottom:r,left:r},y=l[f?"floating"===m?"reference":"floating":m],b=R(await o.getClippingRect({element:null==(n=await (null==o.isElement?void 0:o.isElement(y)))||n?y:y.contextElement||await (null==o.getDocumentElement?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),_="floating"===m?{x:a,y:i,width:s.floating.width,height:s.floating.height}:s.reference,T=await (null==o.getOffsetParent?void 0:o.getOffsetParent(l.floating)),k=await (null==o.isElement?void 0:o.isElement(T))&&await (null==o.getScale?void 0:o.getScale(T))||{x:1,y:1},E=R(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:T,strategy:c}):_);return{top:(b.top-E.top+g.top)/k.y,bottom:(E.bottom-b.bottom+g.bottom)/k.y,left:(b.left-E.left+g.left)/k.x,right:(E.right-b.right+g.right)/k.x}}let L=new Set(["left","top"]);async function O(e,t){let{placement:n,platform:r,elements:a}=e,i=await (null==r.isRTL?void 0:r.isRTL(a.floating)),o=g(n),s=y(n),l="y"===k(n),c=L.has(o)?-1:1,u=i&&l?-1:1,d=v(t,e),{mainAxis:m,crossAxis:f,alignmentAxis:h}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof h&&(f="end"===s?-1*h:h),l?{x:f*u,y:m*c}:{x:m*c,y:f*u}}function M(){return"u">typeof window}function D(e){return F(e)?(e.nodeName||"").toLowerCase():"#document"}function j(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function U(e){var t;return null==(t=(F(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function F(e){return!!M()&&(e instanceof Node||e instanceof j(e).Node)}function H(e){return!!M()&&(e instanceof Element||e instanceof j(e).Element)}function B(e){return!!M()&&(e instanceof HTMLElement||e instanceof j(e).HTMLElement)}function V(e){return!(!M()||typeof ShadowRoot>"u")&&(e instanceof ShadowRoot||e instanceof j(e).ShadowRoot)}let q=new Set(["inline","contents"]);function G(e){let{overflow:t,overflowX:n,overflowY:r,display:a}=et(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!q.has(a)}let z=new Set(["table","td","th"]),$=[":popover-open",":modal"];function W(e){return $.some(t=>{try{return e.matches(t)}catch{return!1}})}let K=["transform","translate","scale","rotate","perspective"],Q=["transform","translate","scale","rotate","perspective","filter"],Y=["paint","layout","strict","content"];function X(e){let t=J(),n=H(e)?et(e):e;return K.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||Q.some(e=>(n.willChange||"").includes(e))||Y.some(e=>(n.contain||"").includes(e))}function J(){return!(typeof CSS>"u")&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let Z=new Set(["html","body","#document"]);function ee(e){return Z.has(D(e))}function et(e){return j(e).getComputedStyle(e)}function en(e){return H(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function er(e){if("html"===D(e))return e;let t=e.assignedSlot||e.parentNode||V(e)&&e.host||U(e);return V(t)?t.host:t}function ea(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);let a=function e(t){let n=er(t);return ee(n)?t.ownerDocument?t.ownerDocument.body:t.body:B(n)&&G(n)?n:e(n)}(e),i=a===(null==(r=e.ownerDocument)?void 0:r.body),o=j(a);if(i){let e=ei(o);return t.concat(o,o.visualViewport||[],G(a)?a:[],e&&n?ea(e):[])}return t.concat(a,ea(a,[],n))}function ei(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eo(e){let t=et(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,a=B(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=u(n)!==i||u(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function es(e){return H(e)?e:e.contextElement}function el(e){let t=es(e);if(!B(t))return m(1);let n=t.getBoundingClientRect(),{width:r,height:a,$:i}=eo(t),o=(i?u(n.width):n.width)/r,s=(i?u(n.height):n.height)/a;return o&&Number.isFinite(o)||(o=1),s&&Number.isFinite(s)||(s=1),{x:o,y:s}}let ec=m(0);function eu(e){let t=j(e);return J()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ec}function ed(e,t,n,r){var a;void 0===t&&(t=!1),void 0===n&&(n=!1);let i=e.getBoundingClientRect(),o=es(e),s=m(1);t&&(r?H(r)&&(s=el(r)):s=el(e));let l=(void 0===(a=n)&&(a=!1),r&&(!a||r===j(o))&&a)?eu(o):m(0),c=(i.left+l.x)/s.x,u=(i.top+l.y)/s.y,d=i.width/s.x,f=i.height/s.y;if(o){let e=j(o),t=r&&H(r)?j(r):r,n=e,a=ei(n);for(;a&&r&&t!==n;){let e=el(a),t=a.getBoundingClientRect(),r=et(a),i=t.left+(a.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(a.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,u*=e.y,d*=e.x,f*=e.y,c+=i,u+=o,a=ei(n=j(a))}}return R({width:d,height:f,x:c,y:u})}function em(e,t){let n=en(e).scrollLeft;return t?t.left+n:ed(U(e)).left+n}function ep(e,t){let n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-em(e,n),y:n.top+t.scrollTop}}let ef=new Set(["absolute","fixed"]);function eh(e,t,n){var r;let a;if("viewport"===t)a=function(e,t){let n=j(e),r=U(e),a=n.visualViewport,i=r.clientWidth,o=r.clientHeight,s=0,l=0;if(a){i=a.width,o=a.height;let e=J();(!e||e&&"fixed"===t)&&(s=a.offsetLeft,l=a.offsetTop)}let c=em(r);if(c<=0){let e=r.ownerDocument,t=e.body,n=getComputedStyle(t),a="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,o=Math.abs(r.clientWidth-t.clientWidth-a);o<=25&&(i-=o)}else c<=25&&(i+=c);return{width:i,height:o,x:s,y:l}}(e,n);else if("document"===t){let t,n,i,o,s,l,u;r=U(e),t=U(r),n=en(r),i=r.ownerDocument.body,o=c(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=c(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight),l=-n.scrollLeft+em(r),u=-n.scrollTop,"rtl"===et(i).direction&&(l+=c(t.clientWidth,i.clientWidth)-o),a={width:o,height:s,x:l,y:u}}else if(H(t)){let e,r,i,o,s,l;r=(e=ed(t,!0,"fixed"===n)).top+t.clientTop,i=e.left+t.clientLeft,o=B(t)?el(t):m(1),s=t.clientWidth*o.x,l=t.clientHeight*o.y,a={width:s,height:l,x:i*o.x,y:r*o.y}}else{let n=eu(e);a={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return R(a)}function ev(e){return"static"===et(e).position}function eg(e,t){if(!B(e)||"fixed"===et(e).position)return null;if(t)return t(e);let n=e.offsetParent;return U(e)===n&&(n=n.ownerDocument.body),n}function ey(e,t){var n;let r=j(e);if(W(e))return r;if(!B(e)){let t=er(e);for(;t&&!ee(t);){if(H(t)&&!ev(t))return t;t=er(t)}return r}let a=eg(e,t);for(;a&&(n=a,z.has(D(n)))&&ev(a);)a=eg(a,t);return a&&ee(a)&&ev(a)&&!X(a)?r:a||function(e){let t=er(e);for(;B(t)&&!ee(t);){if(X(t))return t;if(W(t))break;t=er(t)}return null}(e)||r}let eb=async function(e){let t=this.getOffsetParent||ey,n=this.getDimensions,r=await n(e.floating);return{reference:function(e,t,n){let r=B(t),a=U(t),i="fixed"===n,o=ed(e,!0,i,t),s={scrollLeft:0,scrollTop:0},l=m(0);if(r||!r&&!i)if(("body"!==D(t)||G(a))&&(s=en(t)),r){let e=ed(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&(l.x=em(a));i&&!r&&a&&(l.x=em(a));let c=!a||r||i?m(0):ep(a,s);return{x:o.left+s.scrollLeft-l.x-c.x,y:o.top+s.scrollTop-l.y-c.y,width:o.width,height:o.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},e_={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e,i="fixed"===a,o=U(r),s=!!t&&W(t.floating);if(r===o||s&&i)return n;let l={scrollLeft:0,scrollTop:0},c=m(1),u=m(0),d=B(r);if((d||!d&&!i)&&(("body"!==D(r)||G(o))&&(l=en(r)),B(r))){let e=ed(r);c=el(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}let f=!o||d||i?m(0):ep(o,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}},getDocumentElement:U,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e,i=[..."clippingAncestors"===n?W(t)?[]:function(e,t){let n=t.get(e);if(n)return n;let r=ea(e,[],!1).filter(e=>H(e)&&"body"!==D(e)),a=null,i="fixed"===et(e).position,o=i?er(e):e;for(;H(o)&&!ee(o);){let t=et(o),n=X(o);n||"fixed"!==t.position||(a=null),(i?!n&&!a:!n&&"static"===t.position&&!!a&&ef.has(a.position)||G(o)&&!n&&function e(t,n){let r=er(t);return!(r===n||!H(r)||ee(r))&&("fixed"===et(r).position||e(r,n))}(e,o))?r=r.filter(e=>e!==o):a=t,o=er(o)}return t.set(e,r),r}(t,this._c):[].concat(n),r],o=i[0],s=i.reduce((e,n)=>{let r=eh(t,n,a);return e.top=c(r.top,e.top),e.right=l(r.right,e.right),e.bottom=l(r.bottom,e.bottom),e.left=c(r.left,e.left),e},eh(t,o,a));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:ey,getElementRects:eb,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:n}=eo(e);return{width:t,height:n}},getScale:el,isElement:H,isRTL:function(e){return"rtl"===et(e).direction}};function eT(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}var ek="u">typeof globalThis?globalThis:"u">typeof window?window:e.g;function eE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eS,ew={exports:{}},ex=ew.exports;let eC=eE((eS||(eS=1,aw=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],a={},i=null;function o(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch{return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var n=this.getLevel(),a=0;a<r.length;a++){var i=r[a];this[i]=a<n?e:this.methodFactory(i,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function u(r,a,i){var l;return"debug"===(l=r)&&(l="log"),typeof console!==t&&("trace"===l&&n?s:void 0!==console[l]?o(console,l):void 0!==console.log?o(console,"log"):e)||c.apply(this,arguments)}function d(e,n){var o,s,c,d=this,m="loglevel";function f(){var e;if(!(typeof window===t||!m)){try{e=window.localStorage[m]}catch{}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(m),a=n.indexOf(r+"=");-1!==a&&(e=/^([^;]+)/.exec(n.slice(a+r.length+1))[1])}catch{}return void 0===d.levels[e]&&(e=void 0),e}}function h(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?m+=":"+e:"symbol"==typeof e&&(m=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||u,d.getLevel=function(){return c??s??o},d.setLevel=function(e,n){return c=h(e),!1!==n&&function(e){var n=(r[e]||"silent").toUpperCase();if(!(typeof window===t||!m)){try{window.localStorage[m]=n;return}catch{}try{window.document.cookie=encodeURIComponent(m)+"="+n+";"}catch{}}}(c),l.call(d)},d.setDefaultLevel=function(e){s=h(e),f()||d.setLevel(e,!1)},d.resetLevel=function(){c=null,function(){if(!(typeof window===t||!m)){try{window.localStorage.removeItem(m)}catch{}try{window.document.cookie=encodeURIComponent(m)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),l.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(i!==d&&(o=h(i.getLevel())),l.call(d),i===d)for(var e in a)a[e].rebuild()},o=h(i?i.getLevel():"WARN");var v=f();null!=v&&(c=h(v)),l.call(d)}(i=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=a[e];return t||(t=a[e]=new d(e,i.methodFactory)),t};var m=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=m),i},i.getLoggers=function(){return a},i.default=i,i},ew.exports?ew.exports=aw():ex.log=aw()),ew.exports));var eI=function(e,t){return(eI=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function eR(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}eI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function eP(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function eN(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function eA(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function eL(e,t,n){if(n||2==arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function eO(e){return this instanceof eO?(this.v=e,this):new eO(e)}function eM(e){return"function"==typeof e}function eD(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ej=eD(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,t){return t+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function eU(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var eF=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,t,n,r,a;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var o=eN(i),s=o.next();!s.done;s=o.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else i.remove(this);var l=this.initialTeardown;if(eM(l))try{l()}catch(e){a=e instanceof ej?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=eN(c),d=u.next();!d.done;d=u.next()){var m=d.value;try{eV(m)}catch(e){a=a??[],e instanceof ej?a=eL(eL([],eA(a)),eA(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(a)throw new ej(a)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)eV(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(n=this._finalizers)?n:[]).push(e)}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&eU(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&eU(n,e),e instanceof t&&e._removeParent(this)},(e=new t).closed=!0,t.EMPTY=e,t}(),eH=eF.EMPTY;function eB(e){return e instanceof eF||e&&"closed"in e&&eM(e.remove)&&eM(e.add)&&eM(e.unsubscribe)}function eV(e){eM(e)?e():e.unsubscribe()}var eq=void 0,eG=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,eL([e,t],eA(n)))};function ez(e){eG(function(){throw e})}function e$(){}var eW=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,eB(t)&&t.add(n)):n.destination=eY,n}return eR(t,e),t.create=function(e,t,n){return new eQ(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(eF),eK=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){ez(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){ez(e)}else ez(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){ez(e)}},e}(),eQ=function(e){function t(t,n,r){var a=e.call(this)||this;return a.destination=new eK(eM(t)||!t?{next:t??void 0,error:n??void 0,complete:r??void 0}:t),a}return eR(t,e),t}(eW),eY={closed:!0,next:e$,error:function(e){throw e},complete:e$},eX="function"==typeof Symbol&&Symbol.observable||"@@observable";function eJ(e){return e}var eZ=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,a,i=this,o=!function(e){return e&&e instanceof eW||e&&eM(e.next)&&eM(e.error)&&eM(e.complete)&&eB(e)}(e)?new eQ(e,t,n):e;return r=i.operator,a=i.source,o.add(r?r.call(o,a):a?i._subscribe(o):i._trySubscribe(o)),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=e0(t))(function(t,r){var a=new eQ({next:function(t){try{e(t)}catch(e){r(e),a.unsubscribe()}},error:r,complete:t});n.subscribe(a)})},e.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},e.prototype[eX]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?eJ:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=e0(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function e0(e){var t;return null!=(t=e??eq)?t:Promise}function e1(e){return function(t){if(eM(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function e2(e,t,n,r,a){return new e5(e,t,n,r,a)}var e5=function(e){function t(t,n,r,a,i,o){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=o,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return eR(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null==(t=this.onFinalize)||t.call(this)}},t}(eW),e3=eD(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),e4=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return eR(t,e),t.prototype.lift=function(e){var t=new e6(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new e3},t.prototype.next=function(e){var t,n;if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));try{for(var r=eN(this.currentObservers),a=r.next();!a.done;a=r.next())a.value.next(e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},t.prototype.error=function(e){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;for(var t=this.observers;t.length;)t.shift().error(e)}},t.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var e=this.observers;e.length;)e.shift().complete()}},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,a=this.observers;return n||r?eH:(this.currentObservers=null,a.push(e),new eF(function(){t.currentObservers=null,eU(a,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new eZ;return e.source=this,e},t.create=function(e,t){return new e6(e,t)},t}(eZ),e6=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return eR(t,e),t.prototype.next=function(e){var t,n;null==(n=null==(t=this.destination)?void 0:t.next)||n.call(t,e)},t.prototype.error=function(e){var t,n;null==(n=null==(t=this.destination)?void 0:t.error)||n.call(t,e)},t.prototype.complete=function(){var e,t;null==(t=null==(e=this.destination)?void 0:e.complete)||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!=(n=null==(t=this.source)?void 0:t.subscribe(e))?n:eH},t}(e4),e9=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return eR(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n.closed||t.next(this._value),n},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,n=this._value;if(e)throw t;return this._throwIfClosed(),n},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(e4),e7=function(){return Date.now()},e8=function(e){function t(t,n){return e.call(this)||this}return eR(t,e),t.prototype.schedule=function(e,t){return this},t}(eF),te=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,eL([e,t],eA(n)))},tt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return eR(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n,r=this.id,a=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(a,r,t)),this.pending=!0,this.delay=t,this.id=null!=(n=this.id)?n:this.requestAsyncId(a,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),te(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,eU(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(e8),tn=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=e7,e}(),tr=new(function(e){function t(t,n){void 0===n&&(n=tn.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return eR(t,e),t.prototype.flush=function(e){var t,n=this.actions;if(this._active)return void n.push(e);this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=n.shift())if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}},t}(tn))(tt);function ta(e){var t;return(t=e[e.length-1])&&eM(t.schedule)?e.pop():void 0}var ti=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function to(e){return eM(null==e?void 0:e.then)}function ts(e){return Symbol.asyncIterator&&eM(null==e?void 0:e[Symbol.asyncIterator])}function tl(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var tc="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function tu(e){return eM(null==e?void 0:e[tc])}function td(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function o(e,t){a[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})},t&&(r[e]=t(r[e])))}function s(e,t){try{var n;(n=a[e](t)).value instanceof eO?Promise.resolve(n.value.v).then(l,c):u(i[0][2],n)}catch(e){u(i[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}(this,arguments,function(){var t,n,r;return eP(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,eO(t.read())];case 3:return r=(n=a.sent()).value,n.done?[4,eO(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,eO(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function tm(e){return eM(null==e?void 0:e.getReader)}function tp(e){if(e instanceof eZ)return e;if(null!=e){var t,n,r,a;if(eM(e[eX])){return t=e,new eZ(function(e){var n=t[eX]();if(eM(n.subscribe))return n.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if(ti(e)){return n=e,new eZ(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}if(to(e)){return r=e,new eZ(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,ez)})}if(ts(e))return tf(e);if(tu(e)){return a=e,new eZ(function(e){var t,n;try{for(var r=eN(a),i=r.next();!i.done;i=r.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.complete()})}if(tm(e))return tf(td(e))}throw tl(e)}function tf(e){return new eZ(function(t){(function(e,t){var n,r,a,i,o,s,l,c;return o=this,s=void 0,l=void 0,c=function(){var o;return eP(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=eN(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,a){var i,o,s;i=r,o=a,s=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){i({value:e,done:s})},o)})}}}(e),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a={error:s.sent()},[3,11];case 6:return s.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(l||(l=Promise))(function(e,t){function n(e){try{a(c.next(e))}catch(e){t(e)}}function r(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):((a=t.value)instanceof l?a:new l(function(e){e(a)})).then(n,r)}a((c=c.apply(o,s||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function th(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=!1);var i=t.schedule(function(){n(),a?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!a)return i}function tv(e,t){return void 0===t&&(t=0),e1(function(n,r){n.subscribe(e2(r,function(n){return th(r,e,function(){return r.next(n)},t)},function(){return th(r,e,function(){return r.complete()},t)},function(n){return th(r,e,function(){return r.error(n)},t)}))})}function tg(e,t){return void 0===t&&(t=0),e1(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function ty(e,t){if(!e)throw Error("Iterable cannot be null");return new eZ(function(n){th(n,t,function(){var r=e[Symbol.asyncIterator]();th(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function tb(e,t){return t?function(e,t){if(null!=e){if(eM(e[eX]))return tp(e).pipe(tg(t),tv(t));if(ti(e))return new eZ(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})});if(to(e))return tp(e).pipe(tg(t),tv(t));if(ts(e))return ty(e,t);if(tu(e))return new eZ(function(n){var r;return th(n,t,function(){r=e[tc](),th(n,t,function(){var e,t,a;try{t=(e=r.next()).value,a=e.done}catch(e){n.error(e);return}a?n.complete():n.next(t)},0,!0)}),function(){return eM(null==r?void 0:r.return)&&r.return()}});if(tm(e))return ty(td(e),t)}throw tl(e)}(e,t):tp(e)}function t_(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ta(e);return tb(e,n)}var tT=eD(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function tk(e){throw new tT(e)}function tE(e,t){return e1(function(n,r){var a=0;n.subscribe(e2(r,function(n){r.next(e.call(t,n,a++))}))})}var tS=Array.isArray;function tw(e,t,n){return void 0===n&&(n=1/0),eM(t)?tw(function(n,r){return tE(function(e,a){return t(n,e,r,a)})(tp(e(n,r)))},n):("number"==typeof t&&(n=t),e1(function(t,r){var a,i,o,s,l,c,u;return a=n,i=[],o=0,s=0,l=!1,c=function(){!l||i.length||o||r.complete()},u=function(t){o++;var n=!1;tp(e(t,s++)).subscribe(e2(r,function(e){r.next(e)},function(){n=!0},void 0,function(){if(n)try{for(o--;i.length&&o<a;)!function(){var e=i.shift();u(e)}();c()}catch(e){r.error(e)}}))},t.subscribe(e2(r,function(e){return o<a?u(e):i.push(e)},function(){l=!0,c()})),function(){}}))}function tx(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tw(eJ,1)(tb(e,ta(e)))}var tC=["addListener","removeListener"],tI=["addEventListener","removeEventListener"],tR=["on","off"];function tP(e,t){return function(n){return function(r){return e[n](t,r)}}}function tN(e,t){return e1(function(n,r){var a=0;n.subscribe(e2(r,function(n){return e.call(t,n,a++)&&r.next(n)}))})}function tA(e,t){return e===t}function tL(e,t){var n;return e1((n=arguments.length>=2,function(r,a){var i=n,o=t,s=0;r.subscribe(e2(a,function(t){var n=s++;o=i?e(o,t,n):(i=!0,t),a.next(o)},void 0))}))}function tO(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0===t)return void e();if(!1!==t){var a=new eQ({next:function(){a.unsubscribe(),e()}});return tp(t.apply(void 0,eL([],eA(n)))).subscribe(a)}}function tM(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ta(e);return e1(function(t,r){(n?tx(e,t,n):tx(e,t)).subscribe(r)})}function tD(e,t){return e1(function(n,r){var a=null,i=0,o=!1,s=function(){return o&&!a&&r.complete()};n.subscribe(e2(r,function(n){null==a||a.unsubscribe();var o=0,l=i++;tp(e(n,l)).subscribe(a=e2(r,function(e){return r.next(t?t(n,e,l,o++):e)},function(){a=null,s()}))},function(){o=!0,s()}))})}function tj(e){return e1(function(t,n){tp(e).subscribe(e2(n,function(){return n.complete()},e$)),n.closed||t.subscribe(n)})}var tU=Object.defineProperty,tF=Object.defineProperties,tH=Object.getOwnPropertyDescriptors,tB=Object.getOwnPropertySymbols,tV=Object.prototype.hasOwnProperty,tq=Object.prototype.propertyIsEnumerable,tG=(e,t,n)=>t in e?tU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tz=(e,t)=>{for(var n in t||(t={}))tV.call(t,n)&&tG(e,n,t[n]);if(tB)for(var n of tB(t))tq.call(t,n)&&tG(e,n,t[n]);return e},t$=(e,t,n)=>new Promise((r,a)=>{var i=e=>{try{s(n.next(e))}catch(e){a(e)}},o=e=>{try{s(n.throw(e))}catch(e){a(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,o);s((n=n.apply(e,t)).next())});function tW(e){var t,n,r;return!(typeof e>"u")&&(!!(t=e)&&t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&"u">typeof(null==(n=t.publication)?void 0:n.track)||!!(r=e)&&r.hasOwnProperty("participant")&&r.hasOwnProperty("source")&&r.hasOwnProperty("publication")&&"u">typeof r.publication)}function tK(e){return!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u"}function tQ(e){if("string"==typeof e||"number"==typeof e)return`${e}`;if(tK(e))return`${e.participant.identity}_${e.source}_placeholder`;if(tW(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw Error(`Can't generate a id for the given track reference: ${e}`)}function tY(e,t){return void 0!==e&&void 0!==t&&(tW(e)&&tW(t)?e.publication.trackSid===t.publication.trackSid:tQ(e)===tQ(t))}function tX(e,t){return!(typeof t>"u")&&(tW(e)?t.some(t=>t.participant.identity===e.participant.identity&&tW(t)&&t.publication.trackSid===e.publication.trackSid):!!tK(e)&&t.some(t=>t.participant.identity===e.participant.identity&&tK(t)&&t.source===e.source))}function tJ(){let e=document.createElement("p");e.style.width="100%",e.style.height="200px";let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);let n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),document.body.removeChild(t),n-r}function tZ(){return"u">typeof document}var t0="[^\\.\\s@:](?:[^\\s@:]*[^\\s@:\\.])?@[^\\.\\s@]+(?:\\.[^\\.\\s@]+)*";function t1(e,t,n){return function(e,t,n,r){void 0===r&&(r={});let{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:u=!1}=r,m=es(e),f=a||i?[...m?ea(m):[],...ea(t)]:[];f.forEach(e=>{a&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)});let h=m&&s?function(e,t){let n=null,r,a=U(e);function i(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function o(s,u){void 0===s&&(s=!1),void 0===u&&(u=1),i();let m=e.getBoundingClientRect(),{left:f,top:h,width:v,height:g}=m;if(s||t(),!v||!g)return;let y={rootMargin:-d(h)+"px "+-d(a.clientWidth-(f+v))+"px "+-d(a.clientHeight-(h+g))+"px "+-d(f)+"px",threshold:c(0,l(1,u))||1},b=!0;function _(t){let n=t[0].intersectionRatio;if(n!==u){if(!b)return o();n?o(!1,n):r=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==n||eT(m,e.getBoundingClientRect())||o(),b=!1}try{n=new IntersectionObserver(_,{...y,root:a.ownerDocument})}catch{n=new IntersectionObserver(_,y)}n.observe(e)}(!0),i}(m,n):null,v=-1,g=null;o&&(g=new ResizeObserver(e=>{let[r]=e;r&&r.target===m&&g&&(g.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var e;null==(e=g)||e.observe(t)})),n()}),m&&!u&&g.observe(m),g.observe(t));let y,b=u?ed(e):null;return u&&function t(){let r=ed(e);b&&!eT(b,r)&&n(),b=r,y=requestAnimationFrame(t)}(),n(),()=>{var e;f.forEach(e=>{a&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=g)||e.disconnect(),g=null,u&&cancelAnimationFrame(y)}}(e,t,()=>t$(this,null,function*(){var r,a,i;let o,s,u,{x:d,y:m}=yield(i={placement:"top",middleware:[{name:"offset",options:6,async fn(e){var t,n;let{x:r,y:a,placement:i,middlewareData:o}=e,s=await O(e,6);return i===(null==(t=o.offset)?void 0:t.placement)&&null!=(n=o.arrow)&&n.alignmentOffset?{}:{x:r+s.x,y:a+s.y,data:{...s,placement:i}}}},(void 0===r&&(r={}),{name:"flip",options:r,async fn(e){var t,n,a,i,o,s,l,c;let u,d,m,{placement:f,middlewareData:h,rects:T,initialPlacement:R,platform:P,elements:N}=e,{mainAxis:L=!0,crossAxis:O=!0,fallbackPlacements:M,fallbackStrategy:D="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:U=!0,...F}=v(r,e);if(null!=(t=h.arrow)&&t.alignmentOffset)return{};let H=g(f),B=k(R),V=g(R)===R,q=await (null==P.isRTL?void 0:P.isRTL(N.floating)),G=M||(V||!U?[I(R)]:(u=I(R),[E(R),u,E(u)])),z="none"!==j;!M&&z&&G.push(...(d=y(R),m=function(e,t,n){switch(e){case"top":case"bottom":return n?t?w:S:t?S:w;case"left":case"right":return t?x:C;default:return[]}}(g(R),"start"===j,q),d&&(m=m.map(e=>e+"-"+d),U&&(m=m.concat(m.map(E)))),m));let $=[R,...G],W=await A(e,F),K=[],Q=(null==(n=h.flip)?void 0:n.overflows)||[];if(L&&K.push(W[H]),O){let e,t,n,r,a=(s=f,l=T,void 0===(c=q)&&(c=!1),e=y(s),n=_(t=b(k(s))),r="x"===t?e===(c?"end":"start")?"right":"left":"start"===e?"bottom":"top",l.reference[n]>l.floating[n]&&(r=I(r)),[r,I(r)]);K.push(W[a[0]],W[a[1]])}if(Q=[...Q,{placement:f,overflows:K}],!K.every(e=>e<=0)){let e=((null==(a=h.flip)?void 0:a.index)||0)+1,t=$[e];if(t&&("alignment"!==O||B===k(t)||Q.every(e=>k(e.placement)!==B||e.overflows[0]>0)))return{data:{index:e,overflows:Q},reset:{placement:t}};let n=null==(i=Q.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!n)switch(D){case"bestFit":{let e=null==(o=Q.filter(e=>{if(z){let t=k(e.placement);return t===B||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:o[0];e&&(n=e);break}case"initialPlacement":n=R}if(f!==n)return{reset:{placement:n}}}return{}}}),{name:"shift",options:a={padding:5},async fn(e){let{x:t,y:n,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...u}=v(a,e),d={x:t,y:n},m=await A(e,u),f=k(g(r)),h=b(f),y=d[h],_=d[f];if(i){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",n=y+m[e],r=y-m[t];y=c(n,l(y,r))}if(o){let e="y"===f?"top":"left",t="y"===f?"bottom":"right",n=_+m[e],r=_-m[t];_=c(n,l(_,r))}let T=s.fn({...e,[h]:y,[f]:_});return{...T,data:{x:T.x-t,y:T.y-n,enabled:{[h]:i,[f]:o}}}}}]},o=new Map,u={...(s={platform:e_,...i}).platform,_c:o},N(e,t,{...s,platform:u}));null==n||n(d,m)}))}function t2(e,t){return!e.contains(t.target)}var t5=()=>{var e;let t,n;return{email:function({exact:e}={}){return e?RegExp(`^${t0}$`):RegExp(t0,"g")}(),url:(e=tz({},e={}),t=RegExp("(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}","g").source,n=`(?:(?:(?:[a-z]+:)?//)?|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|${t}|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`,e.exact?RegExp(`(?:^${n}$)`,"i"):RegExp(n,"ig"))}};function t3(e,t){let n=Object.entries(t).map(([t,n],r)=>Array.from(e.matchAll(n)).map(({index:e,0:n})=>({type:t,weight:r,content:n,index:e??0}))).flat().sort((e,t)=>{let n=e.index-t.index;return 0!==n?n:e.weight-t.weight}).filter(({index:e},t,n)=>{if(0===t)return!0;let r=n[t-1];return r.index+r.content.length<=e}),r=[],a=0;for(let{type:t,content:i,index:o}of n)o>a&&r.push(e.substring(a,o)),r.push({type:t,content:i}),a=o+i.length;return e.length>a&&r.push(e.substring(a)),r}var t4=[s.RoomEvent.ConnectionStateChanged,s.RoomEvent.RoomMetadataChanged,s.RoomEvent.ActiveSpeakersChanged,s.RoomEvent.ConnectionQualityChanged,s.RoomEvent.ParticipantConnected,s.RoomEvent.ParticipantDisconnected,s.RoomEvent.ParticipantPermissionsChanged,s.RoomEvent.ParticipantMetadataChanged,s.RoomEvent.ParticipantNameChanged,s.RoomEvent.ParticipantAttributesChanged,s.RoomEvent.TrackMuted,s.RoomEvent.TrackUnmuted,s.RoomEvent.TrackPublished,s.RoomEvent.TrackUnpublished,s.RoomEvent.TrackStreamStateChanged,s.RoomEvent.TrackSubscriptionFailed,s.RoomEvent.TrackSubscriptionPermissionChanged,s.RoomEvent.TrackSubscriptionStatusChanged,s.RoomEvent.LocalTrackPublished,s.RoomEvent.LocalTrackUnpublished],t6=[s.ParticipantEvent.TrackPublished,s.ParticipantEvent.TrackUnpublished,s.ParticipantEvent.TrackMuted,s.ParticipantEvent.TrackUnmuted,s.ParticipantEvent.TrackStreamStateChanged,s.ParticipantEvent.TrackSubscribed,s.ParticipantEvent.TrackUnsubscribed,s.ParticipantEvent.TrackSubscriptionPermissionChanged,s.ParticipantEvent.TrackSubscriptionFailed,s.ParticipantEvent.LocalTrackPublished,s.ParticipantEvent.LocalTrackUnpublished],t9=[s.ParticipantEvent.ConnectionQualityChanged,s.ParticipantEvent.IsSpeakingChanged,s.ParticipantEvent.ParticipantMetadataChanged,s.ParticipantEvent.ParticipantPermissionsChanged,s.ParticipantEvent.TrackMuted,s.ParticipantEvent.TrackUnmuted,s.ParticipantEvent.TrackPublished,s.ParticipantEvent.TrackUnpublished,s.ParticipantEvent.TrackStreamStateChanged,s.ParticipantEvent.TrackSubscriptionFailed,s.ParticipantEvent.TrackSubscriptionPermissionChanged,s.ParticipantEvent.TrackSubscriptionStatusChanged,s.ParticipantEvent.LocalTrackPublished,s.ParticipantEvent.LocalTrackUnpublished],t7=eC.getLogger("lk-components-js");t7.setDefaultLevel("WARN");var t8=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}];function ne(e,t,n,r){if(e.length<1)throw Error("At least one grid layout definition must be provided.");let a=[...e].map(e=>{var t,n;return{name:`${e.columns}x${e.rows}`,columns:e.columns,rows:e.rows,maxTiles:e.columns*e.rows,minWidth:null!=(t=e.minWidth)?t:0,minHeight:null!=(n=e.minHeight)?n:0,orientation:e.orientation}}).sort((e,t)=>e.maxTiles!==t.maxTiles?e.maxTiles-t.maxTiles:0!==e.minWidth||0!==t.minWidth?e.minWidth-t.minWidth:0!==e.minHeight||0!==t.minHeight?e.minHeight-t.minHeight:0);if(n<=0||r<=0)return a[0];let i=0,o=n/r>1?"landscape":"portrait",s=a.find((e,n,r)=>{i=n;let a=-1!==r.findIndex((t,r)=>{let a=!t.orientation||t.orientation===o,i=t.maxTiles===e.maxTiles;return r>n&&i&&a});return e.maxTiles>=t&&!a});if(void 0===s)if(s=a[a.length-1])t7.warn(`No layout found for: participantCount: ${t}, width/height: ${n}/${r} fallback to biggest available layout (${s}).`);else throw Error("No layout or fallback layout found.");if((n<s.minWidth||r<s.minHeight)&&i>0){let e=a[i-1];s=ne(a.slice(0,i),e.maxTiles,n,r)}return s}function nt(){return"u">typeof navigator&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}function nn(e,t){var n;return tF(tz({},e),tH({receivedAtMediaTimestamp:null!=(n=t.rtpTimestamp)?n:0,receivedAt:t.timestamp}))}function nr(e,t,n){return[...e,...t].reduceRight((e,t)=>(e.find(e=>e.id===t.id)||e.unshift(t),e),[]).slice(0-n)}var na=((n=na||{}).AgentState="lk.agent.state",n.PublishOnBehalf="lk.publish_on_behalf",n.TranscriptionFinal="lk.transcription_final",n.TranscriptionSegmentId="lk.segment_id",n.TranscribedTrackId="lk.transcribed_track_id",n),ni=[],no={showChat:!1,unreadMessages:0,showSettings:!1};function ns(e){return"object"==typeof e}function nl(e){return Array.isArray(e)&&e.filter(ns).length>0}function nc(e,t){return t.audioLevel-e.audioLevel}function nu(e,t){return e.isSpeaking===t.isSpeaking?0:e.isSpeaking?-1:1}function nd(e,t){var n,r,a,i;return void 0!==e.lastSpokeAt||void 0!==t.lastSpokeAt?(null!=(r=null==(n=t.lastSpokeAt)?void 0:n.getTime())?r:0)-(null!=(i=null==(a=e.lastSpokeAt)?void 0:a.getTime())?i:0):0}function nm(e,t){var n,r,a,i;return(null!=(r=null==(n=e.joinedAt)?void 0:n.getTime())?r:0)-(null!=(i=null==(a=t.joinedAt)?void 0:a.getTime())?i:0)}function np(e){let t,n,r,a,i=[],o=[],l=[],c=[];e.forEach(e=>{e.participant.isLocal&&e.source===s.Track.Source.Camera?i.push(e):e.source===s.Track.Source.ScreenShare?o.push(e):e.source===s.Track.Source.Camera?l.push(e):c.push(e)});return[...i,...(t=[],n=[],o.forEach(e=>{e.participant.isLocal?t.push(e):n.push(e)}),t.sort((e,t)=>nm(e.participant,t.participant)),n.sort((e,t)=>nm(e.participant,t.participant)),[...n,...t]),...(r=[],a=[],l.forEach(e=>{e.participant.isLocal?r.push(e):a.push(e)}),a.sort((e,t)=>{let n;return e.participant.isSpeaking&&t.participant.isSpeaking?nc(e.participant,t.participant):e.participant.isSpeaking!==t.participant.isSpeaking?nu(e.participant,t.participant):e.participant.lastSpokeAt!==t.participant.lastSpokeAt?nd(e.participant,t.participant):tW(e)!==tW(t)?tW(e)?tW(t)?0:-1:+!!tW(t):e.participant.isCameraEnabled!==t.participant.isCameraEnabled?(n=e.participant.isCameraEnabled)!==t.participant.isCameraEnabled?n?-1:1:0:nm(e.participant,t.participant)}),[...r,...a]),...c]}function nf(e){let t=[...e];t.sort((e,t)=>{if(e.isSpeaking&&t.isSpeaking)return nc(e,t);if(e.isSpeaking!==t.isSpeaking)return nu(e,t);if(e.lastSpokeAt!==t.lastSpokeAt)return nd(e,t);let n=e.videoTrackPublications.size>0;return n!==t.videoTrackPublications.size>0?n?-1:1:nm(e,t)});let n=t.find(e=>e.isLocal);if(n){let e=t.indexOf(n);e>=0&&(t.splice(e,1),t.length>0?t.splice(0,0,n):t.push(n))}return t}function nh(e,t){return Array(Math.max(e.length,t.length)).fill([]).map((n,r)=>[e[r],t[r]])}function nv(e,t,n){return e.filter(e=>!t.map(e=>n(e)).includes(n(e)))}function ng(e){return e.map(e=>"string"==typeof e||"number"==typeof e?`${e}`:tQ(e))}function ny(e,t){let n=t.findIndex(t=>tQ(t)===tQ(e));if(-1===n)throw Error(`Element not part of the array: ${tQ(e)} not in ${ng(t)}`);return n}function nb(e,t){return e.reduce((e,n,r)=>r%t==0?[...e,[n]]:[...e.slice(0,-1),[...e.slice(-1)[0],n]],[])}function n_(e,t,n){var r,a;let i=(r=e,a=t,r.map(e=>a.find(t=>tQ(e)===tQ(t)||"number"!=typeof e&&tK(e)&&tW(t)&&tK(e)&&tW(t)&&t.participant.identity===e.participant.identity&&t.source===e.source)??e));if(i.length<t.length){let e=nv(t,i,tQ);i=[...i,...e]}if(nh(nb(i,n),nb(t,n)).forEach(([e,t],r)=>{if(e&&t){var a;let o={dropped:nv(a=nb(i,n)[r],t,tQ),added:nv(t,a,tQ)};(0!==o.added.length||0!==o.dropped.length)&&(t7.debug(`Detected visual changes on page: ${r}, current: ${ng(e)}, next: ${ng(t)}`,{changes:o}),o.added.length===o.dropped.length&&nh(o.added,o.dropped).forEach(([e,t])=>{if(e&&t){var n;let r,a;r=ny(e,n=i),a=ny(t,n),n.splice(r,1,t),n.splice(a,1,e),i=n}else throw Error(`For a swap action we need a addition and a removal one is missing: ${e}, ${t}`)}),0===o.added.length&&o.dropped.length>0&&o.dropped.forEach(e=>{var t;let n;n=ny(e,t=i),t.splice(n,1),i=t}),o.added.length>0&&0===o.dropped.length&&o.added.forEach(e=>{i=[...i,e]}))}}),i.length>t.length){let e=nv(i,t,tQ);i=i.filter(t=>!e.map(tQ).includes(tQ(t)))}return i}function nT(e){return`lk-${e}`}function nk(e){let t=nE(e),n=nM(e.participant).pipe(tE(()=>nE(e)),tM(t));return{className:nT(e.source===s.Track.Source.Camera||e.source===s.Track.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function nE(e){if(tW(e))return e.publication;{let{source:t,name:n,participant:r}=e;if(t&&n)return r.getTrackPublications().find(e=>e.source===t&&e.trackName===n);if(n)return r.getTrackPublicationByName(n);if(t)return r.getTrackPublication(t);throw Error("At least one of source and name needs to be defined")}}function nS(e,...t){return new eZ(n=>{let r=()=>{n.next(e)};return t.forEach(t=>{e.on(t,r)}),()=>{t.forEach(t=>{e.off(t,r)})}}).pipe(tM(e))}function nw(e,t){return new eZ(n=>{let r=(...e)=>{n.next(e)};return e.on(t,r),()=>{e.off(t,r)}})}function nx(e){return nw(e,s.RoomEvent.ConnectionStateChanged).pipe(tE(([e])=>e),tM(e.state))}function nC(e){return nS(e,s.RoomEvent.RoomMetadataChanged,s.RoomEvent.ConnectionStateChanged).pipe(tE(e=>({name:e.name,metadata:e.metadata})))}function nI(e){return nw(e,s.RoomEvent.ActiveSpeakersChanged).pipe(tE(([e])=>e))}function nR(e,t,n=!0){return tx(new eZ(r=>{s.Room.getLocalDevices(e,n).then(e=>{r.next(e),r.complete()}).catch(e=>{null==t||t(e),r.next([]),r.complete()})}),new eZ(r=>{var a;let i=()=>t$(this,null,function*(){try{let t=yield s.Room.getLocalDevices(e,n);r.next(t)}catch(e){null==t||t(e)}});if("u">typeof window){if(!window.isSecureContext)throw Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");null==(a=null==navigator?void 0:navigator.mediaDevices)||a.addEventListener("devicechange",i)}return()=>{var e;null==(e=null==navigator?void 0:navigator.mediaDevices)||e.removeEventListener("devicechange",i)}}))}function nP(e){return nS(e,s.RoomEvent.AudioPlaybackStatusChanged).pipe(tE(e=>({canPlayAudio:e.canPlaybackAudio})))}function nN(e){return nS(e,s.RoomEvent.VideoPlaybackStatusChanged).pipe(tE(e=>({canPlayVideo:e.canPlaybackVideo})))}function nA(e,t){return nw(e,s.RoomEvent.ParticipantEncryptionStatusChanged).pipe(tN(([,n])=>(null==t?void 0:t.identity)===(null==n?void 0:n.identity)||!n&&(null==t?void 0:t.identity)===e.localParticipant.identity),tE(([e])=>e),tM(null!=t&&t.isLocal?t.isE2EEEnabled:!!(null!=t&&t.isEncrypted)))}function nL(e){return nw(e,s.RoomEvent.RecordingStatusChanged).pipe(tE(([e])=>e),tM(e.isRecording))}function nO(e,...t){return new eZ(n=>{let r=()=>{n.next(e)};return t.forEach(t=>{e.on(t,r)}),()=>{t.forEach(t=>{e.off(t,r)})}}).pipe(tM(e))}function nM(e){return nO(e,s.ParticipantEvent.TrackMuted,s.ParticipantEvent.TrackUnmuted,s.ParticipantEvent.ParticipantPermissionsChanged,s.ParticipantEvent.TrackPublished,s.ParticipantEvent.TrackUnpublished,s.ParticipantEvent.LocalTrackPublished,s.ParticipantEvent.LocalTrackUnpublished,s.ParticipantEvent.MediaDevicesError,s.ParticipantEvent.TrackSubscriptionStatusChanged).pipe(tE(e=>{let{isMicrophoneEnabled:t,isCameraEnabled:n,isScreenShareEnabled:r}=e,a=e.getTrackPublication(s.Track.Source.Microphone);return{isCameraEnabled:n,isMicrophoneEnabled:t,isScreenShareEnabled:r,cameraTrack:e.getTrackPublication(s.Track.Source.Camera),microphoneTrack:a,participant:e}}))}function nD(e){return e?nO(e,s.ParticipantEvent.ParticipantMetadataChanged,s.ParticipantEvent.ParticipantNameChanged).pipe(tE(({name:e,identity:t,metadata:n})=>({name:e,identity:t,metadata:n})),tM({name:e.name,identity:e.identity,metadata:e.metadata})):void 0}function nj(e,t){return new eZ(n=>{let r=(...e)=>{n.next(e)};return e.on(t,r),()=>{e.off(t,r)}})}function nU(e){var t,n,r,a;return nO(e.participant,s.ParticipantEvent.TrackMuted,s.ParticipantEvent.TrackUnmuted,s.ParticipantEvent.TrackSubscribed,s.ParticipantEvent.TrackUnsubscribed,s.ParticipantEvent.LocalTrackPublished,s.ParticipantEvent.LocalTrackUnpublished).pipe(tE(t=>{var n,r;let a=null!=(n=e.publication)?n:t.getTrackPublication(e.source);return null==(r=null==a?void 0:a.isMuted)||r}),tM(null==(a=null!=(r=null==(t=e.publication)?void 0:t.isMuted)?r:null==(n=e.participant.getTrackPublication(e.source))?void 0:n.isMuted)||a))}function nF(e){return nj(e,s.ParticipantEvent.IsSpeakingChanged).pipe(tE(([e])=>e))}function nH(e,t={}){var n;let r,a=new eZ(e=>(r=e,()=>o.unsubscribe())).pipe(tM(Array.from(e.remoteParticipants.values()))),i=null!=(n=t.additionalRoomEvents)?n:t4,o=nS(e,...Array.from(new Set([s.RoomEvent.ParticipantConnected,s.RoomEvent.ParticipantDisconnected,s.RoomEvent.ConnectionStateChanged,...i]))).subscribe(e=>null==r?void 0:r.next(Array.from(e.remoteParticipants.values())));return e.remoteParticipants.size>0&&(null==r||r.next(Array.from(e.remoteParticipants.values()))),a}function nB(e,t,n={}){var r;let a=null!=(r=n.additionalEvents)?r:t9;return nS(e,s.RoomEvent.ParticipantConnected,s.RoomEvent.ParticipantDisconnected,s.RoomEvent.ConnectionStateChanged).pipe(tD(e=>{let n=e.getParticipantByIdentity(t);return n?nO(n,...a):new eZ(e=>e.next(void 0))}),tM(e.getParticipantByIdentity(t)))}function nV(e){return nj(e,s.ParticipantEvent.ParticipantPermissionsChanged).pipe(tE(()=>e.permissions),tM(e.permissions))}function nq(e,{kind:t,identity:n},r={}){var a;let i=null!=(a=r.additionalEvents)?a:t9,o=e=>{let r=!0;return t&&(r=r&&e.kind===t),n&&(r=r&&e.identity===n),r};return nS(e,s.RoomEvent.ParticipantConnected,s.RoomEvent.ParticipantDisconnected,s.RoomEvent.ConnectionStateChanged).pipe(tD(e=>{let t=Array.from(e.remoteParticipants.values()).find(e=>o(e));return t?nO(t,...i):new eZ(e=>e.next(void 0))}),tM(Array.from(e.remoteParticipants.values()).find(e=>o(e))))}function nG(e){return typeof e>"u"?new eZ:nj(e,s.ParticipantEvent.AttributesChanged).pipe(tE(([t])=>({changed:t,attributes:e.attributes})),tM({changed:e.attributes,attributes:e.attributes}))}function nz(e,t,n,r,a){let{localParticipant:i}=t,o=(e,t)=>{let n=!1;switch(e){case s.Track.Source.Camera:n=t.isCameraEnabled;break;case s.Track.Source.Microphone:n=t.isMicrophoneEnabled;break;case s.Track.Source.ScreenShare:n=t.isScreenShareEnabled}return n},l=nM(i).pipe(tE(t=>o(e,t.participant)),tM(o(e,i))),c=new e4,u=(t,o)=>t$(this,null,function*(){try{switch(o??(o=n),c.next(!0),e){case s.Track.Source.Camera:return yield i.setCameraEnabled(t??!i.isCameraEnabled,o,r),i.isCameraEnabled;case s.Track.Source.Microphone:return yield i.setMicrophoneEnabled(t??!i.isMicrophoneEnabled,o,r),i.isMicrophoneEnabled;case s.Track.Source.ScreenShare:return yield i.setScreenShareEnabled(t??!i.isScreenShareEnabled,o,r),i.isScreenShareEnabled;default:throw TypeError("Tried to toggle unsupported source")}}catch(e){if(a&&e instanceof Error){null==a||a(e);return}throw e}finally{c.next(!1)}});return{className:nT("button"),toggle:u,enabledObserver:l,pendingObserver:c.asObservable()}}function n$(){let e=!1,t=new e4,n=new e4,r=r=>t$(this,null,function*(){n.next(!0),e=r??!e,t.next(e),n.next(!1)});return{className:nT("button"),toggle:r,enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}function nW(e,t,n){let r=new e9(void 0),a=nw(t,s.RoomEvent.ActiveDeviceChanged).pipe(tN(([t])=>t===e),tE(([e,t])=>(t7.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:e,deviceId:t}),t))),i=(n,...a)=>t$(this,[n,...a],function*(n,a={}){var i,o,l;if(t){let c,u=(0,s.getBrowser)();if("audiooutput"===e&&((null==u?void 0:u.name)==="Safari"||(null==u?void 0:u.os)==="iOS"))return void t7.warn("Switching audio output device is not supported on Safari and iOS.");t7.debug(`Switching active device of kind "${e}" with id ${n}.`),yield t.switchActiveDevice(e,n,a.exact);let d=null!=(i=t.getActiveDevice(e))?i:n;d!==n&&"default"!==n&&t7.info(`We tried to select the device with id (${n}), but the browser decided to select the device with id (${d}) instead.`),"audioinput"===e?c=null==(o=t.localParticipant.getTrackPublication(s.Track.Source.Microphone))?void 0:o.track:"videoinput"===e&&(c=null==(l=t.localParticipant.getTrackPublication(s.Track.Source.Camera))?void 0:l.track);let m="default"===n&&!c||"default"===n&&(null==c?void 0:c.mediaStreamTrack.label.startsWith("Default"));r.next(m?n:d)}});return{className:nT("media-device-select"),activeDeviceObservable:a,setActiveMediaDevice:i}}function nK(e){return{className:nT("disconnect-button"),disconnect:t=>{e.disconnect(t)}}}function nQ(e){return{className:nT("connection-quality"),connectionQualityObserver:nj(e,s.ParticipantEvent.ConnectionQualityChanged).pipe(tE(([e])=>e),tM(e.connectionQuality))}}function nY(e){let t="track-muted-indicator-camera";switch(e.source){case s.Track.Source.Camera:t="track-muted-indicator-camera";break;case s.Track.Source.Microphone:t="track-muted-indicator-microphone"}return{className:nT(t),mediaMutedObserver:nU(e)}}function nX(e){return{className:"lk-participant-name",infoObserver:nD(e)}}function nJ(){return{className:nT("participant-tile")}}var nZ={CHAT:"lk.chat",TRANSCRIPTION:"lk.transcription"};function n0(e,t){return t$(this,arguments,function*(e,t,n={}){let{reliable:r,destinationIdentities:a,topic:i}=n;yield e.publishData(t,{destinationIdentities:a,topic:i,reliable:r})})}function n1(e,t,n){let r,a=Array.isArray(t)?t:[t];return{messageObservable:nw(e,s.RoomEvent.DataReceived).pipe(tN(([,,,e])=>void 0===t||void 0!==e&&a.includes(e)),tE(([e,t,,r])=>{let a={payload:e,topic:r,from:t};return null==n||n(a),a})),isSendingObservable:new eZ(e=>{r=e}),send:(t,...n)=>t$(this,[t,...n],function*(t,n={}){r.next(!0);try{yield n0(e.localParticipant,t,tz({topic:a[0]},n))}finally{r.next(!1)}})}}var n2=new WeakMap,n5=e=>JSON.parse(new TextDecoder().decode(e)),n3=e=>new TextEncoder().encode(JSON.stringify(e));function n4(e,t){var n,r,a,i,o,l;let c=new e4,u=null!=(n=null==t?void 0:t.channelTopic)?n:nZ.CHAT,d=null!=(r=null==t?void 0:t.channelTopic)?r:"lk-chat-topic",m=!1;n2.has(e)||(m=!0);let f=null!=(a=n2.get(e))?a:new Map,h=null!=(i=f.get(u))?i:new e4;f.set(u,h),n2.set(e,f);let v=null!=(o=null==t?void 0:t.messageDecoder)?o:n5;if(m){e.registerTextStreamHandler(u,(t,n)=>t$(this,null,function*(){let{id:r,timestamp:a}=t.info;tb(t).pipe(tL((e,t)=>e+t),tE(t=>({id:r,timestamp:a,message:t,from:e.getParticipantByIdentity(n.identity),type:"chatMessage"}))).subscribe({next:e=>h.next(e)})}));let{messageObservable:t}=n1(e,[d]);t.pipe(tE(e=>{let t=v(e.payload);return!0==t.ignoreLegacy?void 0:tF(tz({},t),tH({type:"chatMessage",from:e.from}))}),tN(e=>!!e),tj(c)).subscribe(h)}let g=h.pipe(tL((e,t)=>{if("id"in t&&e.find(e=>{var n,r;return(null==(n=e.from)?void 0:n.identity)===(null==(r=t.from)?void 0:r.identity)&&e.id===t.id})){let n=e.findIndex(e=>e.id===t.id);if(n>-1){let r=e[n];e[n]=tF(tz({},t),tH({timestamp:r.timestamp,editTimestamp:t.timestamp}))}return[...e]}return[...e,t]},[]),tj(c)),y=new e9(!1),b=null!=(l=null==t?void 0:t.messageEncoder)?l:n3,_=(t,n)=>t$(this,null,function*(){var r,a,i;n||(n={}),null!=n.topic||(n.topic=u),y.next(!0);try{let o,l,c,u,m,f,v={id:(yield e.localParticipant.sendText(t,n)).id,timestamp:Date.now(),message:t},g=(o=tz({},v),l={attachedFiles:n.attachments},tF(o,tH(l))),y=(c=tz({},g),u={type:"chatMessage",from:e.localParticipant,attributes:n.attributes},tF(c,tH(u)));h.next(y);let _=b((m=tz({},v),f={ignoreLegacy:(null==(r=e.serverInfo)?void 0:r.edition)===1||!!(null!=(a=e.serverInfo)&&a.version)&&(0,s.compareVersions)(null==(i=e.serverInfo)?void 0:i.version,"1.8.2")>0},tF(m,tH(f))));try{yield n0(e.localParticipant,_,{reliable:!0,topic:d})}catch(e){t7.info("could not send message in legacy chat format",e)}return y}finally{y.next(!1)}});return e.once(s.RoomEvent.Disconnected,function(){c.next(),c.complete(),h.complete(),n2.delete(e),e.unregisterTextStreamHandler(u)}),{messageObservable:g,isSendingObservable:y,send:_}}function n6(){let e=e=>t$(this,null,function*(){t7.info("Start Audio for room: ",e),yield e.startAudio()});return{className:nT("start-audio-button"),roomAudioPlaybackAllowedObservable:nP,handleStartAudioPlayback:e}}function n9(){let e=e=>t$(this,null,function*(){t7.info("Start Video for room: ",e),yield e.startVideo()});return{className:nT("start-audio-button"),roomVideoPlaybackAllowedObservable:nN,handleStartVideoPlayback:e}}function n7(){return{className:[nT("button"),nT("chat-toggle")].join(" ")}}function n8(){return{className:[nT("button"),nT("focus-toggle-button")].join(" ")}}function re(){return{className:"lk-clear-pin-button lk-button"}}function rt(){return{className:"lk-room-container"}}function rn(e,t,n=!0){let r=[e.localParticipant,...Array.from(e.remoteParticipants.values())],a=[];return r.forEach(e=>{t.forEach(t=>{let r=Array.from(e.trackPublications.values()).filter(e=>e.source===t&&(!n||e.track)).map(t=>({participant:e,publication:t,source:t.source}));a.push(...r)})}),{trackReferences:a,participants:r}}function rr(e,t,n=!1){let{sources:r,kind:a,name:i}=t;return Array.from(e.trackPublications.values()).filter(e=>(!r||r.includes(e.source))&&(!a||e.kind===a)&&(!i||e.trackName===i)&&(!n||e.track)).map(t=>({participant:e,publication:t,source:t.source}))}function ra(e,t,n){var r,a;let i=null!=(r=n.additionalRoomEvents)?r:t4,o=null==(a=n.onlySubscribed)||a;return nS(e,...Array.from(new Set([s.RoomEvent.ParticipantConnected,s.RoomEvent.ParticipantDisconnected,s.RoomEvent.ConnectionStateChanged,s.RoomEvent.LocalTrackPublished,s.RoomEvent.LocalTrackUnpublished,s.RoomEvent.TrackPublished,s.RoomEvent.TrackUnpublished,s.RoomEvent.TrackSubscriptionStatusChanged,...i]).values())).pipe(tE(e=>{let n=rn(e,t,o);return t7.debug(`TrackReference[] was updated. (length ${n.trackReferences.length})`,n),n}),tM(rn(e,t,o)))}function ri(e,t){return nO(e,...t6).pipe(tE(e=>{let n=rr(e,t);return t7.debug(`TrackReference[] was updated. (length ${n.length})`,n),n}),tM(rr(e,t)))}function ro(e,t){return new eZ(n=>{let r=(...e)=>{n.next(e)};return e.on(t,r),()=>{e.off(t,r)}})}function rs(e){return ro(e,s.TrackEvent.TranscriptionReceived)}function rl(e){return ro(e,s.TrackEvent.TimeSyncUpdate).pipe(tE(([e])=>e))}function rc(e,t=1e3){var n,r;if(null===e)return t_(!1);let a=(function e(t,n,r,a){if(eM(r)&&(a=r,r=void 0),a){return e(t,n,r).pipe((i=a,tE(function(e){return tS(e)?i.apply(void 0,eL([],eA(e))):i(e)})))}var i,o,s,l,c=eA(eM((o=t).addEventListener)&&eM(o.removeEventListener)?tI.map(function(e){return function(a){return t[e](n,a,r)}}):eM((s=t).addListener)&&eM(s.removeListener)?tC.map(tP(t,n)):eM((l=t).on)&&eM(l.off)?tR.map(tP(t,n)):[],2),u=c[0],d=c[1];if(!u&&ti(t))return tw(function(t){return e(t,n,r)})(tp(t));if(!u)throw TypeError("Invalid event target");return new eZ(function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return u(t),function(){return d(t)}})})(e,"mousemove",{passive:!0}).pipe(tE(()=>!0)),i=a.pipe(function(e,t){var n=e instanceof Date&&!isNaN(e)?{first:e}:"number"==typeof e?{each:e}:e,r=n.first,a=n.each,i=n.with,o=void 0===i?tk:i,s=n.scheduler,l=void 0===s?tr:s,c=n.meta,u=void 0===c?null:c;if(null==r&&null==a)throw TypeError("No timeout provided.");return e1(function(e,t){var n,i,s=null,c=0,d=function(e){i=th(t,l,function(){try{n.unsubscribe(),tp(o({meta:u,lastValue:s,seen:c})).subscribe(t)}catch(e){t.error(e)}},e)};n=e.subscribe(e2(t,function(e){null==i||i.unsubscribe(),c++,t.next(s=e),a>0&&d(a)},void 0,void 0,function(){null!=i&&i.closed||null==i||i.unsubscribe(),s=null})),c||d(null!=r?"number"==typeof r?r:r-l.now():a)})}({each:t,with:()=>tx(t_(!1),i.pipe(e1(function(e,t){var n=!1,r=e2(t,function(){null==r||r.unsubscribe(),n=!0},e$);tp(a).subscribe(r),e.subscribe(e2(t,function(e){return n&&t.next(e)}))})))}),(void 0===r&&(r=eJ),n=n??tA,e1(function(e,t){var a,i=!0;e.subscribe(e2(t,function(e){var o=r(e);(i||!n(a,o))&&(i=!1,a=o,t.next(e))}))})));return i}var{load:ru,save:rd}=(ax="lk-user-choices",{load:()=>(function(e){if(typeof localStorage>"u")return void t7.error("Local storage is not available.");try{let t=localStorage.getItem(e);if(!t)return void t7.warn(`Item with key ${e} does not exist in local storage.`);return JSON.parse(t)}catch(e){t7.error(`Error getting item from local storage: ${e}`);return}})(ax),save:e=>(function(e,t){if(typeof localStorage>"u")return void t7.error("Local storage is not available.");try{if(t){let n=Object.fromEntries(Object.entries(t).filter(([,e])=>""!==e));localStorage.setItem(e,JSON.stringify(n))}}catch(e){t7.error(`Error setting item to local storage: ${e}`)}})(ax,e)});function rm(e,t=!1){!0!==t&&rd(e)}function rp(e,t=!1){var n,r,a,i,o;let s={videoEnabled:null==(n=null==e?void 0:e.videoEnabled)||n,audioEnabled:null==(r=null==e?void 0:e.audioEnabled)||r,videoDeviceId:null!=(a=null==e?void 0:e.videoDeviceId)?a:"default",audioDeviceId:null!=(i=null==e?void 0:e.audioDeviceId)?i:"default",username:null!=(o=null==e?void 0:e.username)?o:""};if(t)return s;{let e=ru();return tz(tz({},s),e??{})}}var rf=null,rh=null,rv=0;function rg(){return rf||(rf=new Map),rf}function ry(e,t){var n,r,a,i,o,l,c,u,d,m,f;let h,v,g=(rh||(rh=new WeakMap),(v=(h=rh).get(e))||(v=`room_${rv++}`,h.set(e,v)),`${v}:${t}`),y=rg(),b=y.get(g);if(b)return b;let _=new e4,T=[],k="lk.segment_id",E=_.pipe((r=eM(n={subscribe:()=>{e.registerTextStreamHandler(t,(e,t)=>t$(this,null,function*(){var n;let r=tb(e).pipe(tL((e,t)=>e+t,"")),a=!!(null!=(n=e.info.attributes)&&n[k]);r.subscribe(n=>{let r=T.findIndex(t=>{var n,r;return t.streamInfo.id===e.info.id||a&&(null==(n=t.streamInfo.attributes)?void 0:n[k])===(null==(r=e.info.attributes)?void 0:r[k])});-1!==r?T[r]=tF(tz({},T[r]),tH({text:n})):T.push({text:n,participantInfo:t,streamInfo:e.info}),_.next([...T])})}))},finalize:()=>{e.unregisterTextStreamHandler(t)}})?{next:n,error:void 0,complete:void 0}:n)?e1(function(e,t){null==(n=r.subscribe)||n.call(r);var n,a=!0;e.subscribe(e2(t,function(e){var n;null==(n=r.next)||n.call(r,e),t.next(e)},function(){var e;a=!1,null==(e=r.complete)||e.call(r),t.complete()},function(e){var n;a=!1,null==(n=r.error)||n.call(r,e),t.error(e)},function(){var e,t;a&&(null==(e=r.unsubscribe)||e.call(r)),null==(t=r.finalize)||t.call(r)}))}):eJ,(void 0===a&&(a={}),o=void 0===(i=a.connector)?function(){return new e4}:i,c=void 0===(l=a.resetOnError)||l,d=void 0===(u=a.resetOnComplete)||u,f=void 0===(m=a.resetOnRefCountZero)||m,function(e){var t,n,r,a=0,i=!1,s=!1,l=function(){null==n||n.unsubscribe(),n=void 0},u=function(){l(),t=r=void 0,i=s=!1},m=function(){var e=t;u(),null==e||e.unsubscribe()};return e1(function(e,h){a++,s||i||l();var v=r=r??o();h.add(function(){0!=--a||s||i||(n=tO(m,f))}),v.subscribe(h),!t&&a>0&&(t=new eQ({next:function(e){return v.next(e)},error:function(e){s=!0,l(),n=tO(u,c,e),v.error(e)},complete:function(){i=!0,l(),n=tO(u,d),v.complete()}}),tp(e).subscribe(t))})(e)}));return y.set(g,E),e.on(s.RoomEvent.Disconnected,()=>{rg().delete(g),T=[],_.next([])}),E}function rb(e,t){if("show_chat"===t.msg)return{...e,showChat:!0,unreadMessages:0};if("hide_chat"===t.msg)return{...e,showChat:!1};if("toggle_chat"!==t.msg)return"unread_msg"===t.msg?{...e,unreadMessages:t.count}:"toggle_settings"===t.msg?{...e,showSettings:!e.showSettings}:{...e};{let t={...e,showChat:!e.showChat};return!0===t.showChat&&(t.unreadMessages=0),t}}function r_(e,t){return"set_pin"===t.msg?[t.trackReference]:"clear_pin"===t.msg?[]:{...e}}let rT=o.createContext(void 0);function rk(){let e=o.useContext(rT);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function rE(e){let t=rx();if(e??(e=t),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function rS(){let[e,t]=o.useReducer(r_,ni),[n,r]=o.useReducer(rb,no);return{pin:{dispatch:t,state:e},widget:{dispatch:r,state:n}}}function rw(e){let[t,n]=o.useReducer(r_,ni),[r,a]=o.useReducer(rb,no);return e??{pin:{dispatch:n,state:t},widget:{dispatch:a,state:r}}}function rx(){return o.useContext(rT)}let rC=o.createContext(void 0);function rI(){return o.useContext(rC)}function rR(e){let t=rI(),n=e??t;if(!n)throw Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}let rP=o.createContext(void 0);function rN(){return o.useContext(rP)}function rA(e){let t=rN(),n=rI(),r=e??t??(null==n?void 0:n.participant);if(!r)throw Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return r}let rL=o.createContext(void 0);function rO(){let e=o.useContext(rL);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function rM(){return o.useContext(rL)}function rD(e){let t=rM(),n=e??t;if(!n)throw Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}let rj=o.createContext(void 0);function rU(){return o.useContext(rj)}function rF(e){let t=rU(),n=e??t;if(!n)throw Error("No session provided, make sure you are inside a Session context or pass the session explicitly");return n}let rH=o.createContext(void 0);function rB(e){let t=o.useContext(rH);if(!0===e){if(t)return t;throw Error("tried to access feature context, but none is present")}return t}e.s(["$",()=>rm,"A",()=>n_,"B",()=>rN,"C",()=>nD,"D",()=>nJ,"E",()=>nH,"F",()=>rE,"G",()=>t8,"H",()=>nB,"I",()=>nq,"J",()=>nC,"K",()=>nI,"L",()=>rH,"M",()=>nf,"N",()=>n6,"O",()=>n9,"P",()=>n7,"Q",()=>nY,"R",()=>rL,"S",()=>nz,"T",()=>n$,"U",()=>ns,"V",()=>ra,"W",()=>nl,"X",()=>nE,"Y",()=>nk,"Z",()=>n4,"_",()=>rp,"a",()=>rk,"a0",()=>nA,"a1",()=>tW,"a2",()=>ri,"a3",()=>rl,"a4",()=>rs,"a5",()=>nr,"a6",()=>nn,"a7",()=>nG,"a8",()=>na,"a9",()=>nL,"aa",()=>ry,"ab",()=>nZ,"ac",()=>rU,"ad",()=>rF,"ae",()=>rI,"af",()=>rT,"ag",()=>nX,"ah",()=>ek,"ai",()=>eE,"aj",()=>rP,"ak",()=>rC,"al",()=>rB,"am",()=>rc,"an",()=>tJ,"ao",()=>rw,"ap",()=>t3,"aq",()=>t5,"ar",()=>rj,"as",()=>t1,"at",()=>t2,"au",()=>nt,"av",()=>rS,"aw",()=>tY,"ax",()=>tZ,"b",()=>re,"c",()=>rA,"d",()=>nQ,"e",()=>nx,"f",()=>rO,"g",()=>n1,"h",()=>nK,"i",()=>rR,"j",()=>rx,"k",()=>n8,"l",()=>t7,"m",()=>tX,"n",()=>ne,"o",()=>nU,"p",()=>tQ,"q",()=>nF,"r",()=>nP,"s",()=>rt,"t",()=>nM,"u",()=>rD,"v",()=>nV,"w",()=>rM,"x",()=>nR,"y",()=>nW,"z",()=>np],305288);var rV=e.i(171580);function rq(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=function e(t){var n,r,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(n=0;n<i;n++)t[n]&&(r=e(t[n]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}(e))&&(r&&(r+=" "),r+=t);return r}function rG(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],a=r[e];"function"==typeof n&&"function"==typeof a&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=function(...e){return(...t)=>{for(let n of e)if("function"==typeof n)try{n(...t)}catch(e){console.error(e)}}}(n,a):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof a?t[e]=rq(n,a):t[e]=void 0!==a?a:n}}return t}function rz(e){return void 0!==e}function r$(...e){return rG(...e.filter(rz))}function rW(e,t,n){return o.Children.map(e,r=>o.isValidElement(r)&&o.Children.only(e)?(r.props.className&&(t??(t={}),t.className=rq(r.props.className,t.className),t.style={...r.props.style,...t.style}),o.cloneElement(r,{...t,key:n})):r)}function rK(e){var t,n;if("u">typeof window&&"u">typeof rV.default&&((null==(t=null==rV.default?void 0:rV.default.env)?void 0:t.NODE_ENV)==="dev"||(null==(n=null==rV.default?void 0:rV.default.env)?void 0:n.NODE_ENV)==="development")){let e=document.querySelector(".lk-room-container");e&&!getComputedStyle(e).getPropertyValue("--lk-has-imported-styles")&&t7.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}function rQ(e,t){return"processor"===e&&t&&"object"==typeof t&&"name"in t?t.name:"e2ee"===e&&t?"e2ee-enabled":t}let rY={connect:!0,audio:!1,video:!1},rX=o.forwardRef(function(e,t){let{room:n,htmlProps:r}=function(e){let{token:t,serverUrl:n,options:r,room:a,connectOptions:i,connect:l,audio:c,video:u,screen:d,onConnected:m,onDisconnected:f,onError:h,onMediaDeviceFailure:v,onEncryptionError:g,simulateParticipants:y,...b}={...rY,...e};r&&a&&t7.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");let[_,T]=o.useState(),k=o.useRef(l);o.useEffect(()=>{T(a??new s.Room(r))},[a,JSON.stringify(r,rQ)]);let E=o.useMemo(()=>{let{className:e}=rt();return rG(b,{className:e})},[b]);return o.useEffect(()=>{if(!_)return;let e=()=>{let e=_.localParticipant;t7.debug("trying to publish local tracks"),Promise.all([e.setMicrophoneEnabled(!!c,"boolean"!=typeof c?c:void 0),e.setCameraEnabled(!!u,"boolean"!=typeof u?u:void 0),e.setScreenShareEnabled(!!d,"boolean"!=typeof d?d:void 0)]).catch(e=>{t7.warn(e),null==h||h(e)})},t=(e,t)=>{let n=s.MediaDeviceFailure.getFailure(e);null==v||v(n,t)},n=e=>{null==g||g(e)},r=e=>{null==f||f(e)},a=()=>{null==m||m()};return _.on(s.RoomEvent.SignalConnected,e).on(s.RoomEvent.MediaDevicesError,t).on(s.RoomEvent.EncryptionError,n).on(s.RoomEvent.Disconnected,r).on(s.RoomEvent.Connected,a),()=>{_.off(s.RoomEvent.SignalConnected,e).off(s.RoomEvent.MediaDevicesError,t).off(s.RoomEvent.EncryptionError,n).off(s.RoomEvent.Disconnected,r).off(s.RoomEvent.Connected,a)}},[_,c,u,d,h,g,v,m,f]),o.useEffect(()=>{if(_){if(y)return void _.simulateParticipants({participants:{count:y},publish:{audio:!0,useRealTracks:!0}});if(l){if(k.current=!0,t7.debug("connecting"),!t)return void t7.debug("no token yet");if(!n){t7.warn("no livekit url provided"),null==h||h(Error("no livekit url provided"));return}_.connect(n,t,i).catch(e=>{t7.warn(e),!0===k.current&&(null==h||h(e))})}else t7.debug("disconnecting because connect is false"),k.current=!1,_.disconnect()}},[l,t,JSON.stringify(i),_,h,n,y]),o.useEffect(()=>{if(_)return()=>{t7.info("disconnecting on onmount"),_.disconnect()}},[_]),{room:_,htmlProps:E}}(e);return o.createElement("div",{ref:t,...r},n&&o.createElement(rL.Provider,{value:n},o.createElement(rH.Provider,{value:e.featureFlags},e.children)))});e.s(["L",()=>rX,"a",()=>r$,"c",()=>rW,"m",()=>rG,"r",()=>rQ,"w",()=>rK],525665);let rJ=e=>{let n,r,a,[i,s]=o.useState({width:0,height:0});o.useLayoutEffect(()=>{if(e.current){let{width:t,height:n}=e.current.getBoundingClientRect();s({width:t,height:n})}},[e.current]);let l=o.useCallback(e=>s(e.contentRect),[]);return r=t||(t=function(){let e=!1,t=[],n=new Map;if(typeof window>"u")return;let r=new ResizeObserver((r,a)=>{t=t.concat(r),e||window.requestAnimationFrame(()=>{let r=new Set;for(let e=0;e<t.length;e++){if(r.has(t[e].target))continue;r.add(t[e].target);let i=n.get(t[e].target);null==i||i.forEach(n=>n(t[e],a))}t=[],e=!1}),e=!0});return{observer:r,subscribe(e,t){r.observe(e);let a=n.get(e)??[];a.push(t),n.set(e,a)},unsubscribe(e,t){let a=n.get(e)??[];if(1===a.length){r.unobserve(e),n.delete(e);return}let i=a.indexOf(t);-1!==i&&a.splice(i,1),n.set(e,a)}}}()),n=o.useRef(l),o.useEffect(()=>{n.current=l}),a=n,o.useLayoutEffect(()=>{let t=!1,n=e.current;if(n)return null==r||r.subscribe(n,i),()=>{t=!0,null==r||r.unsubscribe(n,i)};function i(e,n){t||a.current(e,n)}},[e.current,r,a]),null==r||r.observer,i};function rZ(e,t,n=!0){let[r,a]=o.useState(t);return o.useEffect(()=>{if(n&&a(t),typeof window>"u"||!e)return;let r=e.subscribe(a);return()=>r.unsubscribe()},[e,n]),r}function r0(e){let t=e=>"u">typeof window&&window.matchMedia(e).matches,[n,r]=o.useState(t(e));function a(){r(t(e))}return o.useEffect(()=>{let t=window.matchMedia(e);return a(),t.addListener?t.addListener(a):t.addEventListener("change",a),()=>{t.removeListener?t.removeListener(a):t.removeEventListener("change",a)}},[e]),n}function r1(e){let{state:t,dispatch:n}=rk().pin;return{buttonProps:o.useMemo(()=>{let{className:r}=re();return rG(e,{className:r,disabled:!(null!=t&&t.length),onClick:()=>{n&&n({msg:"clear_pin"})}})},[e,n,t])}}function r2(e={}){let t=rA(e.participant),{className:n,connectionQualityObserver:r}=o.useMemo(()=>nQ(t),[t]);return{className:n,quality:rZ(r,t.connectionQuality)}}function r5(e){let t=rD(e);return rZ(o.useMemo(()=>nx(t),[t]),t.state)}function r3(e,t){let n="function"==typeof e?e:t,r="string"==typeof e?e:void 0,a=rO(),{send:i,messageObservable:s,isSendingObservable:l}=o.useMemo(()=>n1(a,r,n),[a,r,n]);return{message:rZ(s,void 0),send:i,isSending:rZ(l,!1)}}function r4(e){let t=rO(),n=r5(t);return{buttonProps:o.useMemo(()=>{let{className:r,disconnect:a}=nK(t);return rG(e,{className:r,onClick:()=>a(e.stopTracks??!0),disabled:n===s.ConnectionState.Disconnected})},[t,e,n])}}function r6({trackRef:e,props:t}){let n=rR(e),r=rx(),{className:a}=o.useMemo(()=>n8(),[]),i=o.useMemo(()=>tX(n,null==r?void 0:r.pin.state),[n,null==r?void 0:r.pin.state]);return{mergedProps:o.useMemo(()=>rG(t,{className:a,onClick:e=>{var a,o,s,l,c;null==(a=t.onClick)||a.call(t,e),i?null==(s=null==r?void 0:(o=r.pin).dispatch)||s.call(o,{msg:"clear_pin"}):null==(c=null==r?void 0:(l=r.pin).dispatch)||c.call(l,{msg:"set_pin",trackReference:n})}}),[t,a,n,i,null==r?void 0:r.pin]),inFocus:i}}function r9(e,t,n={}){let r=n.gridLayouts??t8,{width:a,height:i}=rJ(e),s=ne(r,t,a,i);return o.useEffect(()=>{e.current&&s&&(e.current.style.setProperty("--lk-col-count",null==s?void 0:s.columns.toString()),e.current.style.setProperty("--lk-row-count",null==s?void 0:s.rows.toString()))},[e,s]),{layout:s,containerWidth:a,containerHeight:i}}function r7(e,t={}){var n,r;let a=rA("string"==typeof e?t.participant:e.participant),i="string"==typeof e?{participant:a,source:e}:e,[s,l]=o.useState(!!(null!=(n=i.publication)&&n.isMuted||null!=(r=a.getTrackPublication(i.source))&&r.isMuted));return o.useEffect(()=>{let e=nU(i).subscribe(l);return()=>e.unsubscribe()},[tQ(i)]),s}function r8(e){let t=rA(e);return rZ(o.useMemo(()=>nF(t),[t]),t.isSpeaking)}function ae(e={}){let t=rD(e.room),[n,r]=o.useState(t.localParticipant),[a,i]=o.useState(n.isMicrophoneEnabled),[s,l]=o.useState(n.isCameraEnabled),[c,u]=o.useState(n.isScreenShareEnabled),[d,m]=o.useState(n.lastMicrophoneError),[f,h]=o.useState(n.lastCameraError),[v,g]=o.useState(void 0),[y,b]=o.useState(void 0),_=e=>{l(e.isCameraEnabled),i(e.isMicrophoneEnabled),u(e.isScreenShareEnabled),b(e.cameraTrack),g(e.microphoneTrack),m(e.participant.lastMicrophoneError),h(e.participant.lastCameraError),r(e.participant)};return o.useEffect(()=>{let e=nM(t.localParticipant).subscribe(_);return()=>e.unsubscribe()},[t]),{isMicrophoneEnabled:a,isScreenShareEnabled:c,isCameraEnabled:s,microphoneTrack:v,cameraTrack:y,lastMicrophoneError:d,lastCameraError:f,localParticipant:n}}function at(){let e=rO();return rZ(o.useMemo(()=>nV(e.localParticipant),[e]),e.localParticipant.permissions)}function an({kind:e,room:t,track:n,requestPermissions:r,onError:a}){let i=rM(),l=o.useMemo(()=>t??i??new s.Room,[t,i]),c=rZ(o.useMemo(()=>nR(e,a,r),[e,r,a]),[]),[u,d]=o.useState((null==l?void 0:l.getActiveDevice(e))??"default"),{className:m,activeDeviceObservable:f,setActiveMediaDevice:h}=o.useMemo(()=>nW(e,l),[e,l,n]);return o.useEffect(()=>{let e=f.subscribe(e=>{e&&(t7.info("setCurrentDeviceId",e),d(e))});return()=>{null==e||e.unsubscribe()}},[f]),{devices:c,className:m,activeDeviceId:u,setActiveMediaDevice:h}}function ar({kind:e,onError:t}){return rZ(o.useMemo(()=>nR(e,t),[e,t]),[])}function aa(e,t,n={}){let r=o.useRef([]),a=o.useRef(-1),i=t!==a.current,s="function"==typeof n.customSortFunction?n.customSortFunction(e):np(e),l=[...s];if(!1===i)try{l=n_(r.current,s,t)}catch(e){t7.error("Error while running updatePages(): ",e)}return i?r.current=s:r.current=l,a.current=t,l}function ai(e,t){let[n,r]=o.useState(1),a=Math.max(Math.ceil(t.length/e),1);n>a&&r(a);let i=n*e,s=i-e,l=e=>{r(t=>"next"===e?t===a?t:t+1:1===t?t:t-1)},c=aa(t,e).slice(s,i);return{totalPageCount:a,nextPage:()=>l("next"),prevPage:()=>l("previous"),setPage:e=>{e>a?r(a):e<1?r(1):r(e)},firstItemIndex:s,lastItemIndex:i,tracks:c,currentPage:n}}function ao({trackRef:e,onParticipantClick:t,disableSpeakingIndicator:n,htmlProps:r}){let a=rR(e),i=o.useMemo(()=>{let{className:e}=nJ();return rG(r,{className:e,onClick:e=>{var n;if(null==(n=r.onClick)||n.call(r,e),"function"==typeof t){let e=a.publication??a.participant.getTrackPublication(a.source);t({participant:a.participant,track:e})}}})},[r,t,a.publication,a.source,a.participant]),l=a.participant.getTrackPublication(s.Track.Source.Microphone),c=o.useMemo(()=>({participant:a.participant,source:s.Track.Source.Microphone,publication:l}),[l,a.participant]),u=r7(a),d=r7(c),m=r8(a.participant),f=function(e){if(e.publication instanceof s.LocalTrackPublication){let t=e.publication.track;if(t){let{facingMode:e}=(0,s.facingModeFromLocalTrack)(t);return e}}return"undefined"}(a);return{elementProps:{"data-lk-audio-muted":d,"data-lk-video-muted":u,"data-lk-speaking":!0!==n&&m,"data-lk-local-participant":a.participant.isLocal,"data-lk-source":a.source,"data-lk-facing-mode":f,...i}}}function as(e={}){let t=rD(e.room),[n,r]=o.useState([]);return o.useEffect(()=>{let n=nH(t,{additionalRoomEvents:e.updateOnlyOn}).subscribe(r);return()=>n.unsubscribe()},[t,JSON.stringify(e.updateOnlyOn)]),n}function al(e={}){let t=as(e),{localParticipant:n}=ae(e);return o.useMemo(()=>[n,...t],[n,t])}function ac(e){return e=rE(e),o.useMemo(()=>(null==e?void 0:e.pin.state)!==void 0&&e.pin.state.length>=1?e.pin.state:[],[e.pin.state])}function au(e,t={}){let n=rO(),[r]=o.useState(t.updateOnlyOn),a=o.useMemo(()=>"string"==typeof e?nB(n,e,{additionalEvents:r}):nq(n,e,{additionalEvents:r}),[n,JSON.stringify(e),r]),[i,s]=o.useState({p:void 0});return o.useEffect(()=>{let e=a.subscribe(e=>s({p:e}));return()=>e.unsubscribe()},[a]),i.p}function ad(e={}){let t=rD(e.room),{name:n,metadata:r}=rZ(o.useMemo(()=>nC(t),[t]),{name:t.name,metadata:t.metadata});return{name:n,metadata:r}}function am(e){let t=rD(null==e?void 0:e.room);return rZ(o.useMemo(()=>nI(t),[t]),t.activeSpeakers)}function ap({room:e,props:t}){let n=rD(e),{className:r,roomAudioPlaybackAllowedObservable:a,handleStartAudioPlayback:i}=o.useMemo(()=>n6(),[]),{canPlayAudio:s}=rZ(o.useMemo(()=>a(n),[n,a]),{canPlayAudio:n.canPlaybackAudio});return{mergedProps:o.useMemo(()=>rG(t,{className:r,onClick:()=>{i(n)},style:{display:s?"none":"block"}}),[t,r,s,i,n]),canPlayAudio:s}}function af({room:e,props:t}){let n=rD(e),{className:r,roomVideoPlaybackAllowedObservable:a,handleStartVideoPlayback:i}=o.useMemo(()=>n9(),[]),{canPlayVideo:s}=rZ(o.useMemo(()=>a(n),[n,a]),{canPlayVideo:n.canPlaybackVideo});return{mergedProps:o.useMemo(()=>rG(t,{className:r,onClick:()=>{i(n)},style:{display:s?"none":"block"}}),[t,r,s,i,n]),canPlayVideo:s}}function ah(e,t={}){let n=o.useRef(null),r=o.useRef(null),a=t.minSwipeDistance??50,i=e=>{r.current=null,n.current=e.targetTouches[0].clientX},s=e=>{r.current=e.targetTouches[0].clientX},l=o.useCallback(()=>{if(!n.current||!r.current)return;let e=n.current-r.current,i=e>a,o=e<-a;i&&t.onLeftSwipe&&t.onLeftSwipe(),o&&t.onRightSwipe&&t.onRightSwipe()},[a,t]);o.useEffect(()=>{let t=e.current;return t&&(t.addEventListener("touchstart",i,{passive:!0}),t.addEventListener("touchmove",s,{passive:!0}),t.addEventListener("touchend",l,{passive:!0})),()=>{t&&(t.removeEventListener("touchstart",i),t.removeEventListener("touchmove",s),t.removeEventListener("touchend",l))}},[e,l])}function av({props:e}){let{dispatch:t,state:n}=rk().widget,{className:r}=o.useMemo(()=>n7(),[]);return{mergedProps:o.useMemo(()=>rG(e,{className:r,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":null!=n&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[e,r,t,n])}}function ag(e){var t,n;let r=rR(e),{className:a,mediaMutedObserver:i}=o.useMemo(()=>nY(r),[tQ(r)]);return{isMuted:rZ(i,!!(null!=(t=r.publication)&&t.isMuted||null!=(n=r.participant.getTrackPublication(r.source))&&n.isMuted)),className:a}}function ay({source:e,onChange:t,initialState:n,captureOptions:r,publishOptions:a,onDeviceError:i,room:s,...l}){var c;let u=rM(),d=o.useMemo(()=>s??u,[s,u]),m=null==(c=null==d?void 0:d.localParticipant)?void 0:c.getTrackPublication(e),f=o.useRef(!1),{toggle:h,className:v,pendingObserver:g,enabledObserver:y}=o.useMemo(()=>d?nz(e,d,r,a,i):n$(),[d,e,JSON.stringify(r),a]),b=rZ(g,!1),_=rZ(y,n??!!(null!=m&&m.isEnabled));o.useEffect(()=>{null==t||t(_,f.current),f.current=!1},[_,t]),o.useEffect(()=>{void 0!==n&&(t7.debug("forcing initial toggle state",e,n),h(n))},[]);let T=o.useMemo(()=>rG(l,{className:v}),[l,v]),k=o.useCallback(e=>{var t;f.current=!0,h().catch(()=>f.current=!1),null==(t=l.onClick)||t.call(l,e)},[l,h]);return{toggle:h,enabled:_,pending:b,track:m,buttonProps:{...T,"aria-pressed":_,"data-lk-source":e,"data-lk-enabled":_,disabled:b,onClick:k}}}function ab(e=[s.Track.Source.Camera,s.Track.Source.Microphone,s.Track.Source.ScreenShare,s.Track.Source.ScreenShareAudio,s.Track.Source.Unknown],t={}){let n=rD(t.room),[r,a]=o.useState([]),[i,l]=o.useState([]),c=o.useMemo(()=>e.map(e=>ns(e)?e.source:e),[JSON.stringify(e)]);return o.useEffect(()=>{let e=ra(n,c,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:e,participants:t})=>{t7.debug("setting track bundles",e,t),a(e),l(t)});return()=>e.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),o.useMemo(()=>{if(!nl(e))return r;{let t=function(e,t){let n=new Map;if(nl(e)){let r=e.filter(e=>e.withPlaceholder).map(e=>e.source);t.forEach(e=>{let t=e.getTrackPublications().map(e=>{var t;return null==(t=e.track)?void 0:t.source}).filter(e=>void 0!==e),a=Array.from(function(e,t){let n=new Set(e);for(let e of t)n.delete(e);return n}(new Set(r),new Set(t)));a.length>0&&n.set(e.identity,a)})}return n}(e,i),n=Array.from(r);return i.forEach(e=>{t.has(e.identity)&&(t.get(e.identity)??[]).forEach(t=>{r.find(({participant:n,publication:r})=>e.identity===n.identity&&r.source===t)||(t7.debug(`Add ${t} placeholder for participant ${e.identity}.`),n.push({participant:e,source:t}))})}),n}},[r,i,e])}function a_(e){let t=rD(null==e?void 0:e.room),n=r5(t),r=o.useMemo(()=>n===s.ConnectionState.Disconnected,[n]),a=o.useMemo(()=>n4(t,e),[t,e,r]),i=rZ(a.isSendingObservable,!1),l=rZ(a.messageObservable,[]);return{send:a.send,chatMessages:l,isSending:i}}function aT(e={}){let[t,n]=o.useState(rp(e.defaults,e.preventLoad??!1)),r=o.useCallback(e=>{n(t=>({...t,audioEnabled:e}))},[]),a=o.useCallback(e=>{n(t=>({...t,videoEnabled:e}))},[]),i=o.useCallback(e=>{n(t=>({...t,audioDeviceId:e}))},[]),s=o.useCallback(e=>{n(t=>({...t,videoDeviceId:e}))},[]),l=o.useCallback(e=>{n(t=>({...t,username:e}))},[]);return o.useEffect(()=>{rm(t,e.preventSave??!1)},[t,e.preventSave]),{userChoices:t,saveAudioInputEnabled:r,saveVideoInputEnabled:a,saveAudioInputDeviceId:i,saveVideoInputDeviceId:s,saveUsername:l}}function ak(e,t={}){let n=rA(e),r=rD(t.room);return rZ(o.useMemo(()=>nA(r,n),[r,n]),n.isLocal?n.isE2EEEnabled:!!(null!=n&&n.isEncrypted))}let aE={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}};function aS(e,t={}){var n;let r=e instanceof s.Track?e:null==(n=null==e?void 0:e.publication)?void 0:n.track,a={...aE,...t},[i,l]=o.useState(Array(a.bands).fill(0));return o.useEffect(()=>{if(!r||!(null!=r&&r.mediaStream))return void l(e=>e.slice().fill(0));let{analyser:e,cleanup:n}=(0,s.createAudioAnalyser)(r,a.analyserOptions),i=new Float32Array(e.frequencyBinCount),o=setInterval(()=>{e.getFloatFrequencyData(i);let n=new Float32Array(i.length);for(let e=0;e<i.length;e++)n[e]=i[e];let r=(n=n.slice(t.loPass,t.hiPass)).map(e=>e===-1/0?0:Math.sqrt(1- -1*Math.max(-100,Math.min(-10,e))/100)),o=Math.ceil(r.length/a.bands),s=[];for(let e=0;e<a.bands;e++){let t=r.slice(e*o,(e+1)*o).reduce((e,t)=>e+=t,0);s.push(t/o)}l(s)},a.updateInterval);return()=>{n(),clearInterval(o)}},[r,null==r?void 0:r.mediaStream,JSON.stringify(t)]),i}na.AgentState;var aw,ax,aC,aI={exports:{}};!function(){if(aC)return aI.exports;aC=1;var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}aI.exports=a,aI.exports.once=function(e,t){return new Promise(function(n,r){var a,i,o;function s(n){e.removeListener(t,l),r(n)}function l(){"function"==typeof e.removeListener&&e.removeListener("error",s),n([].slice.call(arguments))}h(e,t,l,{once:!0}),"error"!==t&&(a=e,i=s,o={once:!0},"function"==typeof a.on&&h(a,"error",i,o))})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var i=10;function o(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function s(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var a,i,l;if(o(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),l=i[t]),void 0===l)l=i[t]=n,++e._eventsCount;else if("function"==typeof l?l=i[t]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),(a=s(e))>0&&l.length>a&&!l.warned){l.warned=!0;var c=Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,console&&console.warn&&console.warn(c)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=c.bind(r);return a.listener=n,r.wrapFn=a,a}function d(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):f(a,a.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else if("function"==typeof e.addEventListener)e.addEventListener(t,function a(i){r.once&&e.removeEventListener(t,a),n(i)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||r(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),a.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return s(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,s=Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else for(var c=l.length,u=f(l,c),r=0;r<c;++r)n(u[r],this,t);return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return o(t),this.on(e,u(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,u(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,a,i,s;if(o(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,a=i;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var a,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(a=i[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},aI.exports}();var aR=((r=aR||{}).CameraChanged="cameraChanged",r.MicrophoneChanged="microphoneChanged",r.StateChanged="stateChanged",r),aP=((a=aP||{}).ConnectionStateChanged="connectionStateChanged",a.MediaDevicesError="mediaDevicesError",a.EncryptionError="encryptionError",a),aN=((i=aN||{}).MessageReceived="messageReceived",i);e.s(["A",()=>at,"B",()=>ac,"C",()=>ae,"E",()=>r3,"H",()=>r8,"K",()=>al,"L",()=>au,"M",()=>as,"O",()=>am,"a",()=>r5,"b",()=>av,"c",()=>r4,"d",()=>r6,"e",()=>an,"f",()=>ap,"g",()=>af,"h",()=>ay,"i",()=>r2,"j",()=>rZ,"k",()=>ag,"l",()=>ao,"m",()=>ak,"n",()=>r9,"o",()=>ai,"p",()=>ah,"q",()=>rJ,"r",()=>aa,"s",()=>aS,"t",()=>ab,"u",()=>r1,"v",()=>ad,"w",()=>a_,"x",()=>aT,"y",()=>ar,"z",()=>r0],249437)},93336,305407,e=>{"use strict";var t=e.i(249437);e.s(["useLocalParticipant",()=>t.C],93336),e.s(["useLocalParticipantPermissions",()=>t.A],305407)},882234,692948,e=>{"use strict";e.s(["isParticipantLoggedIn",()=>u,"useIsLocalParticipantLoggedIn",()=>c],882234);var t=e.i(649785),n=e.i(93336),r=e.i(89085),a=e.i(188014);e.s(["getParticipantRole",()=>l,"useLivekitRole",()=>s],692948);var i=e.i(305407),o=e.i(325320);let s=()=>{let e,n=(0,t.c)(4),{token:a}=(0,o.useLivestreamContext)(),s=(0,i.useLocalParticipantPermissions)(),l=a?.role===r.LivekitRole.HOST,c=!l&&s?.canPublish,u=!l&&!c;return n[0]!==c||n[1]!==l||n[2]!==u?(e={isHost:l,isCoHost:c,isViewer:u},n[0]=c,n[1]=l,n[2]=u,n[3]=e):e=n[3],e},l=e=>{let t=(0,a.safeParseParticipantMetadata)(e);return t?.role||r.LivekitRole.VIEWER},c=()=>{let e,r=(0,t.c)(4),{isHost:a,isCoHost:i}=s(),{localParticipant:o}=(0,n.useLocalParticipant)(),l=o.identity;return r[0]!==l||r[1]!==i||r[2]!==a?(e=a||i||l.includes("-viewer-"),r[0]=l,r[1]=i,r[2]=a,r[3]=e):e=r[3],e},u=e=>{let t=(0,a.safeParseParticipantMetadata)(e);return t?.role===r.LivekitRole.HOST||t?.role===r.LivekitRole.CO_HOST||e.identity.includes("-viewer-")}},396693,e=>{"use strict";let t="/livestreams/pepe-placeholder.png",n=["ipfs.io","cf-ipfs.com","pump.mypinata.cloud"];e.s(["IPFS_PREFIX",0,"https://ipfs.io/ipfs/","PEPE_PLACEHOLDER",0,t,"cleanImageUri",0,(e,r)=>e?(e=>{try{let t=new URL(e);return n.includes(t.hostname)&&t.pathname.startsWith("/ipfs/")&&t.pathname.length>6}catch(e){return!1}})(e)?(!(e=e.includes("https://cf-ipfs.com/ipfs/")?e.replace(/https:\/\/cf-ipfs\.com\/ipfs\//,"https://ipfs.io/ipfs/"):e.replace(/https:\/\/[^/]+\/ipfs\//,r)).startsWith(r)&&e.includes("ipfs/")&&(e=r+e.substring(e.indexOf("ipfs/")+5)),e):(e=>{try{let t=new URL(e);return"https:"===t.protocol}catch(e){return!1}})(e)?e:t:t])},182251,339269,188014,202565,e=>{"use strict";e.s(["useLivestreamDataStore",()=>b],182251);var t=e.i(78436);e.s(["isHostOrCoHost",()=>y,"isLivestreamEqual",()=>g],202565);var n=e.i(89085);e.s(["buildEnrichedParticipant",()=>m,"getParticipantAddress",()=>f,"getParticipantDisplayName",()=>h,"isTrackActive",()=>v,"safeParseParticipantMetadata",()=>d],188014);var r=e.i(852687);e.i(484169);var a=e.i(882234),i=e.i(692948);e.s(["getParticipantMetadata",()=>u,"useLocalParticipantMetadata",()=>c],339269);var o=e.i(649785),s=e.i(93336),l=e.i(396693);let c=()=>{let e,t=(0,o.c)(2),{localParticipant:n}=(0,s.useLocalParticipant)();return t[0]!==n?(e=u(n),t[0]=n,t[1]=e):e=t[1],e},u=e=>{let t=d(e),r=!!t?.invited_to_stage,a=!!t?.screen_share_request_timestamp,i=!!t?.hand_raised,o=t?.role||n.LivekitRole.VIEWER,s=t?.username;return{isScreenShareRequested:a,isHandRaised:i,isInvited:r,role:o,avatarUrl:t?.avatar_image||l.PEPE_PLACEHOLDER,username:s}},d=e=>{try{if(!e?.metadata)return null;let t=JSON.parse(e.metadata);return{...t,avatar_image:t.avatar_image||l.PEPE_PLACEHOLDER}}catch{return null}},m=({participant:e,localParticipant:t})=>{let{isHandRaised:n,isScreenShareRequested:r,isInvited:o,username:s}=u(e),l=!!t&&e?.identity===t?.identity;return{identity:e.identity,displayName:h(e),participant:e,isCurrentUser:l,isHandRaised:n,isScreenShareRequested:r,isInvited:o,isLoggedIn:(0,a.isParticipantLoggedIn)(e),role:(0,i.getParticipantRole)(e),username:s,avatarUrl:u(e).avatarUrl}},f=e=>e.split("-")[0]||e,h=(e,t)=>{let n,a=d(e);return n=e.kind===r.ParticipantInfo_Kind.AGENT?e.identity.slice(e.identity.length-6,e.identity.length):e.kind===r.ParticipantInfo_Kind.INGRESS?a?.username||e.identity.split("-")[0].slice(0,6):e.name||a?.username||e.identity.split("-")[0].slice(0,6),t?`${n} (screensharing)`:n},v=e=>!!e?.publication?.track&&!e.publication.track.isMuted,g=(e,t)=>e===t||!!e&&!!t&&["id","mintId","creatorAddress","streamStartTimestamp","streamEndTimestamp","isLive","downrankScore","title"].every(n=>e[n]===t[n]);function y(e){return!!e&&(!!e&&d(e)?.role===n.LivekitRole.HOST||!!e&&d(e)?.role===n.LivekitRole.CO_HOST)}let b=(0,t.create)((e,t)=>({livestreamsByMintId:{},getLivestream:e=>t().livestreamsByMintId[e]??null,setLivestream:(n,r)=>{(({get:e,set:t,key:n,next:r,equals:a})=>{let i=e()[n];(a?a(i,r):Object.is(i,r))||t(e=>({...e,[n]:r}))})({get:t,set:e,key:"livestreamsByMintId",next:{...t().livestreamsByMintId,[n]:r},equals:(e,t)=>!!g(e[n]??null,t[n]??null)&&Object.keys(e).length===Object.keys(t).length})},clearLivestream:t=>e(e=>{let{[t]:n,...r}=e.livestreamsByMintId;return{livestreamsByMintId:r}})}))},275762,e=>{"use strict";e.s(["useLivestream",()=>a]);var t=e.i(281675),n=e.i(182251),r=e.i(202565);let a=e=>{let a=(0,n.useLivestreamDataStore)(t=>t.livestreamsByMintId[e]??null),i=(0,t.useRef)(a);return(0,r.isLivestreamEqual)(i.current,a)||(i.current=a),i.current}},470049,631625,212761,508045,928785,264552,26454,565813,912585,751973,380075,298180,600963,550118,18671,571054,e=>{"use strict";var t,n,r,a,i=e.i(649785),o=e.i(113427),s=e.i(54567);let l=(e,t)=>{let n={style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,...t,minimumFractionDigits:0,maximumFractionDigits:0};try{return new Intl.NumberFormat("en-US",n).format(e)}catch(t){return e?.toString()??"0"}};e.s(["formatNumberAsUsd",0,l],631625),e.s(["useLivestreamCoinInfo",0,e=>{let t,n,r,a=(0,i.c)(17),{mintId:c,enabled:u,onSuccess:d}=e,m=u&&!!c;a[0]!==c||a[1]!==d||a[2]!==m?(t={mintId:c,enabled:m,onSuccess:d},a[0]=c,a[1]=d,a[2]=m,a[3]=t):t=a[3];let{data:f}=(0,o.useGetCoin)(t);e:{let e,t;if(!f){n=void 0;break e}s.logger.debug("[useLivestreamCoinInfo] Recalculating coinInfo",{mintId:c,hasCoinQueryData:!!f});let r=f.name||"",i=f.symbol||"",o=f.usd_market_cap||0;a[4]!==o?(e=l(o),a[4]=o,a[5]=e):e=a[5];let u=!!f.king_of_the_hill_timestamp;a[6]!==f.creator||a[7]!==f.profile_image||a[8]!==f.usd_market_cap||a[9]!==f.username||a[10]!==r||a[11]!==i||a[12]!==e||a[13]!==u?(t={coinName:r,coinSymbol:i,marketCap:e,usdMarketCap:f.usd_market_cap,creatorAddress:f.creator,creatorUsername:f.username,creatorAvatar:f.profile_image,isKingOfTheHill:u},a[6]=f.creator,a[7]=f.profile_image,a[8]=f.usd_market_cap,a[9]=f.username,a[10]=r,a[11]=i,a[12]=e,a[13]=u,a[14]=t):t=a[14],n=t}let h=n;return a[15]!==h?(r={coinInfo:h},a[15]=h,a[16]=r):r=a[16],r}],470049),e.s(["useLivestreamData",()=>h],508045);var c=e.i(182251),u=e.i(690877),d=e.i(936736);let m="get-livestream",f=({mintId:e,enabled:t,onSuccess:n,refetchInterval:r,refetchIntervalInBackground:a,refetchOnWindowFocus:i})=>(0,u.useQuery)({queryKey:[m,e],queryFn:async()=>{s.logger.debug("[useGetLivestream] Attempting to fetch livestream data",{mintId:e});let t=new URLSearchParams;t.set("mintId",e);try{let e=await d.api.get(`livestream?${t.toString()}`).json();return n?.(e),e}catch(n){let t=n instanceof Error?n.message:String(n);throw s.logger.error("[useGetLivestream] Fetch failed",{mintId:e,error:t}),n}},enabled:t,refetchOnWindowFocus:i??!1,refetchInterval:r,refetchIntervalInBackground:a});e.s(["GET_LIVESTREAM_QUERY_KEY",0,m,"useGetLivestream",0,f],212761);let h=e=>{let t,n,r,a,o=(0,i.c)(17),{mintId:l,enabled:u,refetchInterval:d,refetchIntervalInBackground:m,refetchOnWindowFocus:h}=e,v=void 0===u||u,{getLivestream:g,setLivestream:y}=(0,c.useLivestreamDataStore)();o[0]!==g||o[1]!==l?(t=g(l),o[0]=g,o[1]=l,o[2]=t):t=o[2];let b=t;o[3]!==l||o[4]!==y?(n=e=>{let t=!e||e?.isLive===!1,n=e?.isLive===!0;t?y(l,null):n&&y(l,e),s.logger.debug("[useLivestreamData] Query response",{mintId:l,action:t?"clear":n?"update":"keep",isLive:e?.isLive})},o[3]=l,o[4]=y,o[5]=n):n=o[5],o[6]!==v||o[7]!==l||o[8]!==d||o[9]!==m||o[10]!==h||o[11]!==n?(r={mintId:l,enabled:v,refetchInterval:d,refetchIntervalInBackground:m,refetchOnWindowFocus:h,onSuccess:n},o[6]=v,o[7]=l,o[8]=d,o[9]=m,o[10]=h,o[11]=n,o[12]=r):r=o[12];let{isLoading:_,error:T}=f(r);return o[13]!==T||o[14]!==_||o[15]!==b?(a={livestream:b,isLoading:_,error:T},o[13]=T,o[14]=_,o[15]=b,o[16]=a):a=o[16],a};e.s(["BLOCK_REASON_MESSAGES",0,{rate_limit:"message moderated",too_many_identical_10s:"message moderated",too_many_identical_lastN:"message moderated",too_many_consecutive:"message moderated"},"BUILD_HISTORY_LIMIT",0,200,"LAST_N_MESSAGES_COUNT",0,10,"MAX_CONSECUTIVE_IDENTICAL",0,3,"MAX_IDENTICAL_IN_10S",0,2,"MAX_IDENTICAL_IN_LAST_N",0,4,"MIN_TEXT_LENGTH_FOR_DUPLICATE_CHECK",0,4,"ONE_SECOND_MS",0,1e3,"PER_USER_RATE_LIMIT_PER_SEC",0,2,"TEN_SECONDS_MS",0,1e4],928785);let v="get-banned-users";e.s(["GET_BANNED_USERS_QUERY_KEY",0,v,"useGetBannedUsers",0,(e,t)=>{let n,r,a,o,l=(0,i.c)(9);l[0]!==t?(n=void 0===t?{}:t,l[0]=t,l[1]=n):n=l[1];let{enabled:c}=n;l[2]!==e?(r=[v,e],a=async()=>{if(!e)return s.logger.debug("[useGetBannedUsers] Skipping fetch: roomId is missing"),[];s.logger.debug(`[useGetBannedUsers] Fetching banned users for room: ${e}`);try{let t=await d.livechatApi.get(`chat/moderation/rooms/${e}/bans`).json();return s.logger.debug(`[useGetBannedUsers] Fetched ${t.length} banned users for room: ${e}`),t}catch(n){let t=n instanceof Error?n.message:String(n);throw s.logger.error(`[useGetBannedUsers] Failed to fetch banned users for room: ${e}`,{error:t}),n}},l[2]=e,l[3]=r,l[4]=a):(r=l[3],a=l[4]);let m=!!e&&(void 0===c||c);return l[5]!==r||l[6]!==a||l[7]!==m?(o={queryKey:r,queryFn:a,enabled:m,staleTime:6e4},l[5]=r,l[6]=a,l[7]=m,l[8]=o):o=l[8],(0,u.useQuery)(o)}],264552);var g=e.i(78436);let y=(0,g.create)((e,t)=>({roomModeratorsByRoom:{},setModerators:(t,n)=>e(e=>({roomModeratorsByRoom:{...e.roomModeratorsByRoom,[t]:new Set(n.map(e=>e.toLowerCase()))}})),addModerator:(t,n)=>e(e=>{let r=new Set(e.roomModeratorsByRoom[t]||new Set);return r.add(n.toLowerCase()),{roomModeratorsByRoom:{...e.roomModeratorsByRoom,[t]:r}}}),removeModerator:(t,n)=>e(e=>{let r=new Set(e.roomModeratorsByRoom[t]||new Set);return r.delete(n.toLowerCase()),{roomModeratorsByRoom:{...e.roomModeratorsByRoom,[t]:r}}}),isRoomModerator:(e,n)=>{let r=t().roomModeratorsByRoom[e];return!!r&&r.has(n.toLowerCase())},clearModerators:t=>e(e=>{if(t){let{[t]:n,...r}=e.roomModeratorsByRoom;return{roomModeratorsByRoom:r}}return{roomModeratorsByRoom:{}}})}));e.s(["selectIsRoomModerator",0,(e,t)=>n=>{if(!t)return!1;let r=n.roomModeratorsByRoom[e];return!!(r&&r.has(t.toLowerCase()))},"useRoomModeratorsStore",0,y],26454);let b="get-room-moderators";function _(e){return e.userAddress}e.s(["GET_ROOM_MODERATORS_QUERY_KEY",0,b,"useGetRoomModerators",0,(e,t)=>{let n,r,a,o,l=(0,i.c)(9);l[0]!==t?(n=void 0===t?{}:t,l[0]=t,l[1]=n):n=l[1];let{enabled:c}=n;l[2]!==e?(r=[b,e],a=async()=>{if(!e)return s.logger.debug("[useGetRoomModerators] Skipping fetch: roomId is missing"),[];s.logger.debug(`[useGetRoomModerators] Fetching room moderators for room: ${e}`);try{let t=await d.livechatApi.get(`chat/moderation/rooms/${e}/moderators`).json();return s.logger.debug(`[useGetRoomModerators] Fetched ${t.length} room moderators for room: ${e}`),(0,y.getState().setModerators)(e,t.map(_)),t}catch(n){let t=n instanceof Error?n.message:String(n);throw s.logger.error(`[useGetRoomModerators] Failed to fetch room moderators for room: ${e}`,{error:t}),n}},l[2]=e,l[3]=r,l[4]=a):(r=l[3],a=l[4]);let m=!!e&&(void 0===c||c);return l[5]!==r||l[6]!==a||l[7]!==m?(o={queryKey:r,queryFn:a,enabled:m,staleTime:6e4},l[5]=r,l[6]=a,l[7]=m,l[8]=o):o=l[8],(0,u.useQuery)(o)}],565813),e.s(["MAX_HISTORY_PAGES",0,3,"MAX_MESSAGES_IN_MEMORY",0,150,"MESSAGE_PAGE_SIZE",0,50],912585);e.s(["LIVECHAT_MESSAGE_CHAR_LIMIT",0,420,"LIVECHAT_REACTIONS_DISPLAY_LIMIT",0,3,"LIVECHAT_REACTIONS_STORAGE_LIMIT",0,4],751973);var T=((t={}).Add="add",t.Remove="remove",t);e.s(["LivechatReactionAction",()=>T],380075),(n={}).Thumbsup=":thumbsup:",n.Heart=":heart:",n.Joy=":joy:",n.Fire=":fire:",n.Poop=":poop:",n.Thumbsdown=":thumbsdown:";let k="https://pump.mypinata.cloud/ipfs/QmeSzchzEPqCU1jwTnsipwcBAeH7S4bmVvFGfF65iA1BY1";e.s(["DEFAULT_REACTION_AVATAR_URL",0,k,"EMOJI_OPTIONS",0,[{key:":thumbsup:",char:"",label:"thumbs up"},{key:":heart:",char:"",label:"heart"},{key:":joy:",char:"",label:"joy"},{key:":fire:",char:"",label:"fire"},{key:":poop:",char:"",label:"poop"},{key:":thumbsdown:",char:"",label:"thumbs down"}],"REACTION_AVATAR_LIMIT",0,3],298180);let E=(e,t)=>`${e}|${t}`,S=(e,t)=>{let n=t.toLowerCase();for(let[t,r]of e)if(t.toLowerCase()===n)return r};e.s(["buildAddressToAvatarMap",0,e=>{let t=new Map;for(let n of e)n.userAddress&&n.profile_image&&t.set(n.userAddress,n.profile_image);return t},"buildAvatars",0,(e,t,n)=>{let r=[];for(let a of e){if(r.length>=n)break;let e=S(t,a)??k;r.push(e)}return r},"buildReactionKey",0,E,"includesAddressCaseInsensitive",0,(e,t)=>{let n=t.toLowerCase();return e.some(e=>e.toLowerCase()===n)},"selectRecentAddresses",0,e=>{let{recentMap:t,serverRecent:n,emojiKey:r}=e,a=t?.[r];return void 0!==a?a:n?.[r]??[]}],600963);let w=({state:e,args:t,action:n,currentUserAddress:r})=>{let{messageId:a,emojiKey:i,userAddress:o,serverRecent:s,serverRecentAvatarUrls:l,avatarUrl:c}=t,u=e.byMessageId[a]??{counts:{},...C({serverRecent:s,serverRecentAvatarUrls:l})},d=E(a,i),m=x(u.counts,i,n),f=I({recentAddresses:u.recentAddresses,recentAvatarUrls:u.recentAvatarUrls,emojiKey:i,userAddress:o,avatarUrl:c,action:n}),h=A(r,o),v=e.myReactions,g=e.mySelectedByMessage;if(h){let t=L({state:e,key:d,messageId:a,emojiKey:i,action:n});v=t.myReactions,g=t.mySelectedByMessage}let y=0===Object.keys(m).length&&Object.values(f.recentAddresses).every(e=>0===e.length),b=R(m,f.recentAddresses)?N(e.byMessageId,a):P(e.byMessageId,a,m,f.recentAddresses,f.recentAvatarUrls);if(y){if(g[a]){let{[a]:e,...t}=g;g=t}v=O(v,a)}return{byMessageId:b,myReactions:v,mySelectedByMessage:g}},x=(e,t,n)=>{let r=e[t]??0,a=n===T.Add?r+1:Math.max(0,r-1),i={...e};return a>0?i[t]=a:delete i[t],i},C=({serverRecent:e,serverRecentAvatarUrls:t})=>{if(!e)return{recentAddresses:{},recentAvatarUrls:{}};let n=e?Object.entries(e).reduce((e,[t,n])=>{if(!n||0===n.length)return e;let r=n.slice(-4);return r.length>0&&(e[t]=r),e},{}):{},r=(({sanitizedAddresses:e,serverRecentAvatarUrls:t})=>t?Object.entries(e).reduce((e,[n,r])=>{if(!r||0===r.length)return e;let a=t[n]??[];if(!a||0===a.length)return e;let i=Math.max(a.length-r.length,0),o=r.reduce((e,t,n)=>{let r=a[i+n];return t&&r&&(e[t]=r),e},{});return Object.keys(o).length>0&&(e[n]=o),e},{}):{})({sanitizedAddresses:n,serverRecentAvatarUrls:t});return{recentAddresses:n,recentAvatarUrls:r}},I=({recentAddresses:e,recentAvatarUrls:t,emojiKey:n,userAddress:r,avatarUrl:a,action:i})=>{let o=r.toLowerCase(),s=(e[n]??[]).filter(e=>e.toLowerCase()!==o),l=i===T.Add?[...s,r].slice(-4):s.slice(-4),c={...e};c[n]=l;let u=new Set(l.map(e=>e.toLowerCase())),d=t[n]??{},m=Object.entries(d).find(([e])=>e.toLowerCase()===o)?.[1],f={};for(let[e,t]of Object.entries(d))u.has(e.toLowerCase())&&e.toLowerCase()!==o&&(f[e]=t);if(i===T.Add){let e=a??m;e&&(f[r]=e)}if(l.length>0){let e=new Set(l);Object.keys(f).forEach(t=>{e.has(t)||delete f[t]})}let h={...t};return Object.keys(f).length>0?h[n]=f:delete h[n],{recentAddresses:c,recentAvatarUrls:h}},R=(e,t)=>0===Object.keys(e).length&&0===Object.keys(t).length,P=(e,t,n,r,a)=>({...e,[t]:{counts:n,recentAddresses:r,recentAvatarUrls:a}}),N=(e,t)=>{if(!(t in e))return e;let{[t]:n,...r}=e;return r},A=(e,t)=>!!(e&&t&&e.toLowerCase()===t.toLowerCase()),L=({state:e,key:t,messageId:n,emojiKey:r,action:a})=>{var i;let o,s,l=(i=e.myReactions,s=new Set(i),a===T.Add?s.add(t):s.delete(t),s),c=new Set(e.mySelectedByMessage[n]??[]);if(a===T.Add?c.add(r):c.delete(r),0===c.size){let{[n]:t,...r}=e.mySelectedByMessage;o=r}else o={...e.mySelectedByMessage,[n]:c};return{myReactions:l,mySelectedByMessage:o}},O=(e,t)=>{if(0===e.size)return e;let n=new Set,r=`${t}|`;return e.forEach(e=>{e.startsWith(r)||n.add(e)}),n},M=(0,g.create)()((e,t)=>({byMessageId:{},myReactions:new Set,mySelectedByMessage:{},addReaction:(t,n)=>{t.messageId&&t.emojiKey&&t.userAddress&&e(e=>w({state:e,args:t,action:T.Add,currentUserAddress:n}))},removeReaction:(t,n)=>{t.messageId&&t.emojiKey&&t.userAddress&&e(e=>w({state:e,args:t,action:T.Remove,currentUserAddress:n}))},getCounts:e=>t().byMessageId[e]?.counts??{},getRecentAddresses:(e,n)=>(t().byMessageId[e]?.recentAddresses?.[n]??[]).slice(-3),isMyReaction:(e,n)=>t().myReactions.has(E(e,n)),clearRoom:()=>e({byMessageId:{},myReactions:new Set,mySelectedByMessage:{}})}));e.s(["useLivechatReactionsStore",0,M],550118);var D=((r={}).REGULAR="regular",r.SYSTEM="system",r.NOTIFICATION="notification",r),j=((a={}).TOXIC="TOXIC",a.SPAM="SPAM",a.USER_BANNED="USER_BANNED",a);function U(e){let{rawMsg:t,currentUserUsername:n,currentUserAddress:r}=e;return r&&t.userAddress?t.userAddress.toLowerCase()===r.toLowerCase():!!n&&t.username===n}e.s(["DeleteMessageReasonEnum",()=>j,"MessageType",()=>D],18671),e.s(["isOwnChatMessage",()=>U],571054)},325320,480530,721361,66866,942219,408289,643630,619416,596904,985436,958507,474877,750115,855645,689740,e=>{"use strict";e.s(["LivestreamProvider",()=>eU,"useLivekitConnectionContext",()=>ej,"useLivestreamContext",()=>eF],325320);var t,n=e.i(942765),r=e.i(8264),a=e.i(655703),i=e.i(606933),o=e.i(281675),s=e.i(787774),l=e.i(113427),c=e.i(921753),u=e.i(275762),d=e.i(470049),m=e.i(508045);e.s(["LivechatProvider",()=>eN,"useLivechat",()=>eA],855645);var f=e.i(649785),h=e.i(41461),v=e.i(928785),g=e.i(264552),y=e.i(565813),b=e.i(912585),_=e.i(550118),T=e.i(380075),k=e.i(54567),E=e.i(761459),S=e.i(18671),w=e.i(571054),x=e.i(396693);let C=({rawMsg:e,currentUserUsername:t,currentUserAddress:n})=>{let r="string"==typeof e.username&&""!==e.username.trim()?e.username.trim():"Unknown User",a=(0,w.isOwnChatMessage)({rawMsg:e,currentUserUsername:t,currentUserAddress:n}),i=e.timestamp&&!isNaN(new Date(e.timestamp).getTime())?new Date(e.timestamp):new Date,o="",s=e.message;"string"==typeof s?o=s:Array.isArray(s)?(k.logger.warn("[mapRawMessageToChatMessage] Message received as array",{messageId:e.id,roomId:e.roomId,username:e.username,messageArray:s}),s.length>0&&(o=String(s[0]||""))):null!=s&&(k.logger.warn("[mapRawMessageToChatMessage] Message received as unexpected type",{messageId:e.id,roomId:e.roomId,username:e.username,messageType:typeof s,messageValue:s}),o=String(s));let l={id:e.id||`fallback-${i.getTime()}-${Math.random()}`,roomId:e.roomId,username:r,message:o,userAddress:e.userAddress||"",profile_image:e.profile_image||x.PEPE_PLACEHOLDER,timestamp:i,messageType:S.MessageType.REGULAR,isOwnMessage:a,isPending:!1,replyToId:e.replyToId,replyPreview:e.replyPreview};e&&e.reactionRecentAddresses&&(l.reactionRecentAddresses=e.reactionRecentAddresses,k.logger.debug("[mapRawMessageToChatMessage] Preserved reactionRecentAddresses",{messageId:l.id,emojis:Object.keys(e.reactionRecentAddresses||{})})),e&&e.reactionRecentAvatarUrls&&(l.reactionRecentAvatarUrls=e.reactionRecentAvatarUrls,k.logger.debug("[mapRawMessageToChatMessage] Preserved reactionRecentAvatarUrls",{messageId:l.id,emojis:Object.keys(e.reactionRecentAvatarUrls||{})}));try{let e=_.useLivechatReactionsStore.getState().byMessageId[l.id??""];if(e&&e.recentAddresses){let t=l.reactionRecentAddresses||{},n={...t};for(let[r,a]of Object.entries(e.recentAddresses)){let e=t[r];Array.isArray(e)&&e.length>0||(n[r]=a)}l.reactionRecentAddresses=n}}catch{}return l},I=e=>[...e].sort((e,t)=>e.timestamp.getTime()-t.timestamp.getTime()),R=e=>e&&0!==e.length?e[0].timestamp.getTime():null;e.s(["getOldestTimestamp",0,R,"getUserColor",0,e=>{let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);let n=(0x7fffffff&t)%360;return`hsl(${n}, 70%, 60%)`},"isChatMessage",0,e=>"object"==typeof e&&null!==e&&"userAddress"in e&&"profile_image"in e,"mapRawMessageToChatMessage",0,C,"sortChatMessagesByTimestamp",0,I],480530);var P=e.i(834171);let N=P.z.object({success:P.z.boolean()}),A=P.z.object({success:P.z.boolean(),sessionId:P.z.string().optional()});e.s(["ackSchema",0,N,"viewerHeartbeatAckSchema",0,A],721361);var L=((t=L||{}).JOIN_ROOM="joinRoom",t.LEAVE_ROOM="leaveRoom",t.SEND_MESSAGE="sendMessage",t.SEND_MESSAGE_2="sendMessage2",t.GET_MESSAGE_HISTORY="getMessageHistory",t.PIN_MESSAGE="pinMessage",t.UNPIN_MESSAGE="unpinMessage",t.VIEWER_HEARTBEAT="viewerHeartbeat",t.ADD_REACTION="addReaction",t.REMOVE_REACTION="removeReaction",t);let O=e=>{let t,n,r,a,i,o,s,l,c,u,d=(0,f.c)(28),{socket:m}=e;d[0]!==m?(t=(e,t,n)=>{m&&(k.logger.debug("[useLivechatSocketEmitters] Emitting joinRoom",{roomId:e,username:t}),m.emit("joinRoom",{roomId:e,username:t},e=>{n(e,m.id||"")}))},d[0]=m,d[1]=t):t=d[1];let h=t;d[2]!==m?(n=(e,t)=>{m&&(k.logger.debug("[useLivechatSocketEmitters] Emitting leaveRoom",{roomId:e,username:t}),m.emit("leaveRoom",{roomId:e,username:t}))},d[2]=m,d[3]=n):n=d[3];let v=n;d[4]!==m?(r=(e,t,n,r,a,i,o)=>{if(!m)return;k.logger.debug("[useLivechatSocketEmitters] Emitting sendMessage",{roomId:e,username:t,messageText:n,replyToId:r,replyPreview:a});let s={roomId:e,message:n,username:t,replyToId:r,replyPreview:a};i?m.emit("sendMessage2",s,o):m.emit("sendMessage",s,o)},d[4]=m,d[5]=r):r=d[5];let g=r;d[6]!==m?(a=(e,t,n,r)=>{m&&(k.logger.debug("[useLivechatSocketEmitters] Emitting getMessageHistory",{roomId:e,beforeTimestamp:t,limit:n}),m.emit("getMessageHistory",{roomId:e,before:t,limit:n},r))},d[6]=m,d[7]=a):a=d[7];let y=a;d[8]!==m?(i=(e,t)=>{m&&(k.logger.debug("[useLivechatSocketEmitters] Emitting pinMessage",{roomId:e,messageId:t}),m.emit("pinMessage",{roomId:e,messageId:t}))},d[8]=m,d[9]=i):i=d[9];let b=i;d[10]!==m?(o=e=>{m&&(k.logger.debug("[useLivechatSocketEmitters] Emitting unpinMessage",{roomId:e}),m.emit("unpinMessage",{roomId:e}))},d[10]=m,d[11]=o):o=d[11];let _=o;d[12]!==m?(s=e=>{if(!m)throw Error("Socket is not connected");return k.logger.debug("[useLivechatSocketEmitters] Emitting viewerHeartbeat",{roomId:e}),new Promise((t,n)=>{m.emit("viewerHeartbeat",{roomId:e},r=>{let a=A.safeParse(r);if(!a.success||!a.data.sessionId)return k.logger.error("[useLivechatSocketEmitters] Failed to parse viewer heartbeat response",{roomId:e,data:r,parsed:a}),n(Error("Failed to parse viewer heartbeat response"));t(a.data)})})},d[12]=m,d[13]=s):s=d[13];let T=s;d[14]!==m?(l=(e,t,n,r)=>{m&&(k.logger.debug("[useLivechatSocketEmitters] Emitting addReaction",{roomId:e,messageId:t,emojiKey:n}),m.emit("addReaction",{roomId:e,messageId:t,emojiKey:n,avatarUrl:r}))},d[14]=m,d[15]=l):l=d[15];let E=l;d[16]!==m?(c=(e,t,n)=>{m&&(k.logger.debug("[useLivechatSocketEmitters] Emitting removeReaction",{roomId:e,messageId:t,emojiKey:n}),m.emit("removeReaction",{roomId:e,messageId:t,emojiKey:n}))},d[16]=m,d[17]=c):c=d[17];let S=c;return d[18]!==E||d[19]!==y||d[20]!==h||d[21]!==v||d[22]!==b||d[23]!==S||d[24]!==g||d[25]!==_||d[26]!==T?(u={emitJoinRoom:h,emitLeaveRoom:v,emitSendMessage:g,emitGetMessageHistory:y,emitPinMessage:b,emitUnpinMessage:_,emitViewerHeartbeat:T,emitAddReaction:E,emitRemoveReaction:S},d[18]=E,d[19]=y,d[20]=h,d[21]=v,d[22]=b,d[23]=S,d[24]=g,d[25]=_,d[26]=T,d[27]=u):u=d[27],u};e.s(["useLivechatSocketEmitters",0,O],66866);let M=async(e,t,n,r,a)=>(k.logger.debug("[useMessagesQuery] Fetching message history",{roomId:t,beforeTimestamp:a}),new Promise(i=>{e(t,a,b.MESSAGE_PAGE_SIZE,e=>{if(!e)return k.logger.warn("[useMessagesQuery] No response received for getMessageHistory",{roomId:t,beforeTimestamp:a}),i({messages:[],nextCursor:null});let o=Array.isArray(e)?e:e?.messages;if(o&&o.length>0){let e=I(o.filter(e=>"string"==typeof e.username&&""!==e.username.trim()).map(e=>C({rawMsg:e,currentUserUsername:n,currentUserAddress:r}))),a=R(e),s=o.length>=b.MESSAGE_PAGE_SIZE;k.logger.debug("[useMessagesQuery] History fetch successful",{roomId:t,count:e.length,hasMore:s,oldestTs:a}),i({messages:e.filter(Boolean),nextCursor:s?a:null})}else k.logger.debug("[useMessagesQuery] History fetch returned no messages",{roomId:t,beforeTimestamp:a}),i({messages:[],nextCursor:null})})})),D=e=>{let t,n,r,a,i,o=(0,f.c)(16),{socket:s,roomId:l,currentUser:c,isEnabled:u}=e;o[0]!==s?(t={socket:s},o[0]=s,o[1]=t):t=o[1];let{emitGetMessageHistory:d}=O(t);o[2]!==l?(n=j(l),o[2]=l,o[3]=n):n=o[3],o[4]!==c?.userAddress||o[5]!==c?.username||o[6]!==d||o[7]!==l?(r=e=>{let{pageParam:t}=e;return l?M(d,l,c?.username,c?.userAddress,t):(k.logger.warn("[useMessagesQuery] Query function skipped, no roomId"),Promise.resolve({messages:[],nextCursor:null}))},o[4]=c?.userAddress,o[5]=c?.username,o[6]=d,o[7]=l,o[8]=r):r=o[8],o[9]!==l?(a=(e,t)=>t.length>=b.MAX_HISTORY_PAGES?void k.logger.debug("[useMessagesQuery] Max history pages reached",{roomId:l,pageCount:t.length,maxPages:b.MAX_HISTORY_PAGES}):e.nextCursor,o[9]=l,o[10]=a):a=o[10];let m=u&&!!l&&!!s;return o[11]!==n||o[12]!==r||o[13]!==a||o[14]!==m?(i={queryKey:n,queryFn:r,initialPageParam:null,getNextPageParam:a,getPreviousPageParam:U,enabled:m,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,maxPages:b.MAX_HISTORY_PAGES},o[11]=n,o[12]=r,o[13]=a,o[14]=m,o[15]=i):i=o[15],(0,E.useInfiniteQuery)(i)},j=e=>["livechat",e,"messages"];function U(){}function F(e){return e.addReaction}function H(e){return e.removeReaction}function B(e){return e.messages}e.s(["getMessagesQueryKey",0,j,"useMessagesQuery",0,D],942219);var V=e.i(10785),q=e.i(203350);let G=(e,{chatId:t,chatType:n,messageId:r,mint:a,context:i})=>{(0,q.recordUserEvent)((0,V.createInteractPinMessage)({chatId:t,chatType:n,messageId:r,actionType:e,mint:a}),i)},z=({mintId:e,status:t,context:n})=>{let r={interactionType:V.InteractionType.VIEWED,chatId:e,chatType:V.ChatType.LIVECHAT,source:V.JoinChatSource.LIVESTREAM,mint:e,status:t};(0,q.recordUserEvent)((0,V.createInteractJoinChat)(r),n)},$=({mintId:e,status:t,context:n})=>{let r={interactionType:V.InteractionType.CLICK,chatId:e,chatType:V.ChatType.LIVECHAT,mint:e,status:t};(0,q.recordUserEvent)((0,V.createInteractLeaveChat)(r),n)},W=({mintId:e,status:t,messageId:n,isReply:r,errorReason:a,context:i})=>{let o={interactionType:V.InteractionType.CLICK,chatId:e,chatType:V.ChatType.LIVECHAT,contentType:V.MessageContentType.TEXT,status:t,messageId:n,mint:e,isReply:r,errorReason:a};(0,q.recordUserEvent)((0,V.createInteractSendMessage)(o),i)};e.s(["trackJoinChat",0,z,"trackLeaveChat",0,$,"trackMessagePin",0,e=>G(V.PinActionType.PIN,e),"trackMessageUnpin",0,e=>G(V.PinActionType.UNPIN,e),"trackSendMessage",0,W],408289);var K=e.i(967388),Q=e.i(78436);let Y=(0,Q.create)(e=>({roomModerators:{},bannedUsers:{},activeModerationRoomId:null,isModerationViewActive:!1,setRoomModerators:(t,n)=>e(e=>({roomModerators:{...e.roomModerators,[t]:n}})),addRoomModerator:(t,n)=>e(e=>{let r=e.roomModerators[t]||[];return r.some(e=>e.userAddress===n.userAddress)?e:{roomModerators:{...e.roomModerators,[t]:[...r,n]}}}),removeRoomModerator:(t,n)=>e(e=>({roomModerators:{...e.roomModerators,[t]:(e.roomModerators[t]||[]).filter(e=>e.userAddress!==n)}})),setBannedUsers:(t,n)=>e(e=>({bannedUsers:{...e.bannedUsers,[t]:n}})),addBannedUser:(t,n)=>e(e=>{let r=e.bannedUsers[t]||[];return r.some(e=>e.userAddress===n.userAddress)?e:{bannedUsers:{...e.bannedUsers,[t]:[...r,n]}}}),removeBannedUser:(t,n)=>e(e=>({bannedUsers:{...e.bannedUsers,[t]:(e.bannedUsers[t]||[]).filter(e=>e.userAddress!==n)}})),openModerationView:t=>e({activeModerationRoomId:t,isModerationViewActive:!0}),closeModerationView:()=>e({activeModerationRoomId:null,isModerationViewActive:!1}),clearRoomModerationState:t=>e(e=>({roomModerators:{...e.roomModerators,[t]:[]},bannedUsers:{...e.bannedUsers,[t]:[]}})),resetAllModerationState:()=>e({roomModerators:{},bannedUsers:{},activeModerationRoomId:null,isModerationViewActive:!1})}));e.s(["useChatModerationStore",0,Y],643630);let X=(0,Q.create)((e,t)=>({participantsByRoom:{},bannedUsersByRoom:{},banUser:(t,n)=>e(e=>{let r=new Set(e.bannedUsersByRoom[n]||new Set);return r.add(t),{bannedUsersByRoom:{...e.bannedUsersByRoom,[n]:r}}}),unbanUser:(t,n)=>e(e=>{let r=new Set(e.bannedUsersByRoom[n]||new Set);return r.delete(t),{bannedUsersByRoom:{...e.bannedUsersByRoom,[n]:r}}}),isUserBanned:(e,n)=>{let r=t().bannedUsersByRoom[n];return!!r&&r.has(e)},clearBannedUsers:t=>e(e=>{if(!t)return{bannedUsersByRoom:{}};{let{[t]:n,...r}=e.bannedUsersByRoom;return{bannedUsersByRoom:r}}}),setParticipants:(t,n)=>e(e=>({participantsByRoom:{...e.participantsByRoom,[t]:n}})),addParticipant:(t,n)=>e(e=>{let r=e.participantsByRoom[t]||[];return r.some(e=>e.userAddress===n.userAddress)?e:{participantsByRoom:{...e.participantsByRoom,[t]:[...r,n]}}}),removeParticipant:(t,n)=>e(e=>{let r=e.participantsByRoom[t]||[];return{participantsByRoom:{...e.participantsByRoom,[t]:r.filter(e=>e.userAddress!==n)}}})}));e.s(["useChatParticipantsStore",0,X],619416);var J=e.i(952544);let Z=(e,t)=>e&&e.trim().length>0?e:t&&t.trim().length>0?t:null,ee=e=>{if("string"!=typeof e)return"";let t=e;return(t=(t=(t=(t=(t=t.replace(/\b((https?:\/\/)?[\w-]+(\.[\w-]+)+(\/[\w\-._~:/?#[\]@!$&'()*+,;=%]*)?)\b/gi," ")).replace(/[\p{Extended_Pictographic}\p{Emoji}]/gu," ")).replace(/[^\p{L}\p{N}\s]/gu," ")).toLowerCase()).replace(/\s+/g," ")).trim()};function et(e){return e.messageType===S.MessageType.REGULAR}function en(e){return ee(e.message||"")}var er=e.i(132838),ea=e.i(622493),ei=e.i(429914);let eo="auth_token",es=()=>{if("undefined"==typeof document)return null;for(let e of document.cookie.split(";")){let[t,n]=e.trim().split("=");if(t===eo&&n)return n}return null},el=()=>{"undefined"!=typeof document&&(document.cookie=`${eo}=; Path=/; Max-Age=0; SameSite=Lax${"https:"===window.location.protocol?"; Secure":""}`)},ec=()=>{let e=es();return!(!e||0===e.length||3!==e.split(".").length||ed(e))},eu=e=>{try{let t=e.split(".");if(3!==t.length)return null;let n=t[1],r=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(r)}catch(e){return null}},ed=e=>{let t=eu(e);if(!t||!t.exp)return!0;let n=Math.floor(Date.now()/1e3);return t.exp<n};e.s(["AUTH_TOKEN_COOKIE_NAME",0,eo,"decodeJwtPayload",0,eu,"getAuthTokenFromCookies",0,es,"getUserAddressFromToken",0,e=>{let t=eu(e);return t?.address||null},"hasValidAuthToken",0,ec,"isTokenExpired",0,ed,"removeAuthTokenCookie",0,el,"setAuthTokenCookie",0,(e,t=86400)=>{if("undefined"==typeof document)return;let n=`${eo}=${e}; Path=/; Max-Age=${t}; SameSite=Lax${"https:"===window.location.protocol?"; Secure":""}`;document.cookie=n}],596904);let em=(0,o.createContext)(void 0),ep=()=>{let e=(0,o.useContext)(em);if(void 0===e)throw Error("useLivechatConnection must be used within a LivechatConnectionProvider");return e},ef=()=>{let{socket:e}=ep();return e},eh=e=>{let t,r,a=(0,f.c)(5),{children:i,isEnabled:s}=e,l=void 0===s||s;a[0]!==l?(t={isEnabled:l},a[0]=l,a[1]=t):t=a[1];let c=(e=>{let t,n,r,a,i=(0,f.c)(16),{isEnabled:s}=e,l=void 0===s||s,c=J.environment.livechatUrl,{socket:u,isConnected:d,isConnecting:m,connectionError:h,retryCount:v,connect:g,disconnect:y,forceReconnect:b}=(()=>{let[e,t]=(0,o.useState)(null),[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(!1),[s,l]=(0,o.useState)(null),[c,u]=(0,o.useState)(0),d=(0,o.useRef)(null),m=(0,o.useRef)(void 0),f=(0,o.useRef)(""),h=(0,o.useRef)(""),v=(0,o.useRef)(5),g=(0,o.useRef)(null),y=(0,o.useCallback)(()=>{g.current&&(clearTimeout(g.current),g.current=null)},[]),b=(0,o.useCallback)(e=>Math.min(1e3*Math.pow(2,e),3e4)+1e3*Math.random(),[]),_=(0,o.useCallback)(()=>{if(c>=v.current){k.logger.error("[useSocketConnection] Max retry attempts reached",{retryCount:c,maxRetries:v.current}),l("Max retry attempts reached. Please refresh the page."),i(!1);return}let e=b(c);ea.metrics.increment("socket.reconnect_scheduled",1,{retryCount:c+1}),y(),g.current=setTimeout(()=>{f.current&&h.current&&(u(e=>e+1),T(f.current,h.current,m.current))},e)},[c,b,y]),T=(0,o.useCallback)((e,n,a)=>{if(f.current=e,h.current=n,m.current=a,d.current)return void k.logger.warn("[useSocketConnection] Connect skipped (already have socket)",{url:e,socketId:d.current.id});ea.metrics.increment("socket.connect_attempt",1,{hasNamespace:!!a,retryCount:c,hasAuthToken:ec(),authTokenInPayload:!!es()}),i(!0),l(null),r(!1);let o={path:"/socket.io/",reconnection:!1,timeout:3e4,autoConnect:!0,transports:["websocket"],upgrade:!0,forceNew:!0,auth:{origin:n,timestamp:Date.now(),token:es()},withCredentials:!0};try{let n=(0,ei.io)(e,o);d.current=n,t(n),ea.metrics.increment("socket.instance_created",1)}catch(n){let e=n instanceof Error?n.message:"Socket initialization failed";ea.metrics.increment("socket.connect_error",1,{retryCount:c}),k.logger.error("[useSocketConnection] Socket initialization error",{error:e,retryCount:c}),l(e),i(!1),d.current=null,t(null),_()}},[c,_]),E=(0,o.useCallback)(()=>{y(),u(0),d.current&&d.current.disconnect(),d.current=null,t(null),r(!1),i(!1),l(null)},[y]),S=(0,o.useCallback)(()=>{ea.metrics.increment("socket.force_reconnect_requested"),u(0),E(),setTimeout(()=>{f.current&&h.current&&T(f.current,h.current,m.current)},1e3)},[E,T]);return(0,o.useEffect)(()=>{if(!e)return;let n=()=>{d.current===e&&(ea.metrics.increment("socket.connected",1,{retryCount:c}),r(!0),i(!1),l(null),u(0),y())},a=n=>{if(d.current===e){let e;ea.metrics.increment("socket.disconnected",1,{reason:n,retryCount:c}),r(!1),i(!1);let a=!1;switch(n){case"io client disconnect":e=void 0;break;case"transport close":case"transport error":e="Connection lost. Reconnecting...",a=!0;break;case"io server disconnect":e="Disconnected by server. This may be due to authentication issues.",a=!0;break;default:e=`Disconnected: ${n}`,a=!0}e&&l(e),d.current=null,t(null),a&&_()}},o=n=>{if(d.current===e){let a=n.message||"Connection failed";ea.metrics.increment("socket.connection_error",1,{retryCount:c}),k.logger.error("[useSocketConnection] Connection error",{id:e?.id??"N/A",error:a,retryCount:c}),r(!1),i(!1);l(a.includes("401")||a.includes("403")?"Authentication failed. Please log in again.":a.includes("timeout")?"Connection timeout. Retrying...":"Connection failed. Retrying..."),d.current=null,t(null),_()}};return e.on("connect",n),e.on("disconnect",a),e.on("connect_error",o),()=>{e.off("connect",n),e.off("disconnect",a),e.off("connect_error",o)}},[e,c,_,y]),(0,o.useEffect)(()=>()=>{y()},[y]),{socket:e,isConnected:n,isConnecting:a,connectionError:s,retryCount:c,connect:T,disconnect:E,forceReconnect:S}})();i[0]!==g||i[1]!==l?(t=()=>{c&&l&&g(c,window.location.origin)},i[0]=g,i[1]=l,i[2]=t):t=i[2];let _=t;i[3]!==y?(n=()=>{y()},i[3]=y,i[4]=n):n=i[4];let T=n;i[5]!==b?(r=()=>{b()},i[5]=b,i[6]=r):r=i[6];let E=r;return i[7]!==_||i[8]!==h||i[9]!==T||i[10]!==E||i[11]!==d||i[12]!==m||i[13]!==v||i[14]!==u?(a={socket:u,isConnected:d,isConnecting:m,connectionError:h,retryCount:v,connect:_,disconnect:T,forceReconnect:E},i[7]=_,i[8]=h,i[9]=T,i[10]=E,i[11]=d,i[12]=m,i[13]=v,i[14]=u,i[15]=a):a=i[15],a})(t);return a[2]!==i||a[3]!==c?(r=(0,n.jsx)(em.Provider,{value:c,children:i}),a[2]=i,a[3]=c,a[4]=r):r=a[4],r};e.s(["LivechatConnectionProvider",0,eh,"useLivechatConnectionContext",0,ep,"useLivechatSocket",0,ef],985436),e.s(["RoomModerationProvider",()=>eS,"useRoomModerationContext",()=>ew],474877);var ev=e.i(86868);let eg=()=>!!(0,ev.useModeratorStore)(ey);function ey(e){return e.moderator}e.s(["useIsModerator",0,eg],958507);var eb=e.i(690877),e_=e.i(812768),eT=e.i(936736),ek=e.i(26454);let eE=(0,o.createContext)(void 0),eS=e=>{var t;let r,i,s,l,u,d,m,h,v,g=(0,f.c)(27),{children:b,isEnabled:_}=e,T=void 0===_||_,E=eg(),{mintId:S}=eF(),{effectiveAddress:w}=(0,a.useProfile)(),x=T&&!!w;g[0]!==x?(r={enabled:x},g[0]=x,g[1]=r):r=g[1];let{refetch:C}=(t=r,v=(0,ev.useModeratorStore)(e=>e.setModerator),(0,eb.useQuery)({queryKey:["is-moderator"],queryFn:async()=>{k.logger.debug("[useIsModeratorQuery] Attempting to fetch moderator details");try{let e=await eT.api.get("human-moderation/is-moderator").json();return k.logger.debug("[useIsModeratorQuery] Fetch successful",{isModerator:e?.isModerator,moderator:e?.moderator}),v(e?.isModerator?e.moderator:null),e}catch(t){if(t instanceof e_.HTTPError&&401===t.response.status)return v(null),null;let e=t instanceof Error?t.message:String(t);throw k.logger.error("[useIsModeratorQuery] Fetch failed",{error:e}),v(null),t}},...t})),I=S??"",R=T&&!!S&&!!w;g[2]!==I||g[3]!==R?(i={mintId:I,enabled:R},g[2]=I,g[3]=R,g[4]=i):i=g[4];let{data:P,refetch:N}=(0,c.useIsApprovedCreator)(i),A=void 0!==P&&P,L=T&&!!S&&!!w;g[5]!==L?(s={enabled:L},g[5]=L,g[6]=s):s=g[6];let{refetch:O}=(0,y.useGetRoomModerators)(S??"",s);g[7]!==w||g[8]!==S?(l=e=>!!w&&!!S&&e.isRoomModerator(S,w),g[7]=w,g[8]=S,g[9]=l):l=g[9];let M=(0,ek.useRoomModeratorsStore)(l),D=!!w&&A,j=E||D,U=j||M;g[10]!==w||g[11]!==T||g[12]!==S||g[13]!==C||g[14]!==N||g[15]!==O?(u=()=>{if(T){if(!w){ev.useModeratorStore.getState().setModerator(null),S&&ek.useRoomModeratorsStore.getState().clearModerators(S);return}C(),S&&(N(),O())}},d=[T,w,S,C,N,O],g[10]=w,g[11]=T,g[12]=S,g[13]=C,g[14]=N,g[15]=O,g[16]=u,g[17]=d):(u=g[16],d=g[17]),(0,o.useEffect)(u,d),g[18]!==j||g[19]!==U||g[20]!==A||g[21]!==E||g[22]!==M?(m={canModerateRoom:U,canManageRoomModerators:j,isRoomModerator:M,isCreator:A,isGlobalModerator:E},g[18]=j,g[19]=U,g[20]=A,g[21]=E,g[22]=M,g[23]=m):m=g[23];let F=m;return g[24]!==b||g[25]!==F?(h=(0,n.jsx)(eE.Provider,{value:F,children:b}),g[24]=b,g[25]=F,g[26]=h):h=g[26],h},ew=()=>{let e=(0,o.useContext)(eE);if(void 0===e)throw Error("useRoomModerationContext must be used within a RoomModerationProvider");return e};var ex=e.i(254667);let eC=(0,o.createContext)({sessionId:void 0}),eI=e=>{let t,r,a,i,s=(0,f.c)(10),{children:l,roomId:c}=e,u=ef(),[d,m]=(0,o.useState)(void 0),h=!!c;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{m(e?.sessionId)},s[0]=t):t=s[0],s[1]!==c||s[2]!==u||s[3]!==h?(r={enabled:h,roomId:c,socket:u,onSuccess:t},s[1]=c,s[2]=u,s[3]=h,s[4]=r):r=s[4],(e=>{let t,n,r,a,i,s,l,c,u,d,m=(0,f.c)(20);m[0]!==e?({roomId:r,socket:a,onSuccess:t,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=r,m[4]=a):(t=m[1],n=m[2],r=m[3],a=m[4]),m[5]!==a?(i={socket:a},m[5]=a,m[6]=i):i=m[6];let{emitViewerHeartbeat:h}=O(i);m[7]!==r?(s=["livestream-viewer-heartbeat",r],m[7]=r,m[8]=s):s=m[8],m[9]!==h||m[10]!==t||m[11]!==r?(l=async()=>{let e=await h(r);return t(e),e},m[9]=h,m[10]=t,m[11]=r,m[12]=l):l=m[12],m[13]!==n||m[14]!==s||m[15]!==l?(c={queryKey:s,queryFn:l,refetchInterval:6e4,refetchOnWindowFocus:!0,refetchIntervalInBackground:!0,...n},m[13]=n,m[14]=s,m[15]=l,m[16]=c):c=m[16];let v=(0,eb.useQuery)(c);return m[17]!==v.error?(u=()=>{v.error&&ex.logger.error("Failed to send heartbeat",{error:v.error})},d=[v.error],m[17]=v.error,m[18]=u,m[19]=d):(u=m[18],d=m[19]),(0,o.useEffect)(u,d)})(r),s[5]!==d?(a={sessionId:d},s[5]=d,s[6]=a):a=s[6];let v=a;return s[7]!==l||s[8]!==v?(i=(0,n.jsx)(eC.Provider,{value:v,children:l}),s[7]=l,s[8]=v,s[9]=i):i=s[9],i};e.s(["ViewerSessionProvider",0,eI,"useViewerSessionContext",0,()=>(0,o.useContext)(eC)],750115);let eR=(0,o.createContext)(void 0),eP=({children:e,readOnly:t=!1,onTrackEvent:r,asyncSendMessageEnabled:l})=>{let{socket:c,isConnected:u,isConnecting:d,connectionError:m,retryCount:E,connect:w,disconnect:I,forceReconnect:R}=ep(),{emitJoinRoom:P,emitLeaveRoom:N}=O({socket:c}),A=(0,i.useQueryClient)(),{isCreator:L,isRoomModerator:M}=ew(),U=(0,_.useLivechatReactionsStore)(e=>e.clearRoom),{isJoined:q,isJoining:G,isLeaving:Q,currentUser:ei,currentRoomId:eo,joinRoom:es,leaveRoom:ec,resetRoomState:eu,setCurrentUser:ed}=(e=>{let t,n,r,a,i,s=(0,f.c)(26),{isConnected:l,emitJoinRoom:c,emitLeaveRoom:u,onJoinSuccess:d,onAuthUpdated:m}=e,[h,v]=(0,o.useState)(!1),[g,y]=(0,o.useState)(!1),[b,_]=(0,o.useState)(!1),[T,E]=(0,o.useState)(null),[S,w]=(0,o.useState)(null),I=(0,o.useRef)(null);s[0]!==m||s[1]!==d?(t=(e,t,n,r)=>{I.current=r,k.logger.info("[useLivechatRoom] Received auth status from backend",{roomId:e,authenticated:n.authenticated,userAddress:n.userAddress,isCreator:n.isCreator,isRoomModerator:n.isRoomModerator}),z({mintId:e,status:V.Status.SUCCESS,context:K.LIVECHAT_SOURCE_CONTEXTS.CHAT}),m?.({isAuthenticated:!!n.authenticated,userAddress:n.userAddress||"",isCreator:n.isCreator??!1,isRoomModerator:n.isRoomModerator??!1,pinnedMessageId:n.pinnedMessageId}),E({id:r,username:t.username||"",profile_image:t.profile_image||x.PEPE_PLACEHOLDER,userAddress:n.userAddress||""}),w(e),y(!1),v(!0),d?.(e,n.pinnedMessageId)},s[0]=m,s[1]=d,s[2]=t):t=s[2];let R=t;s[3]!==c||s[4]!==R||s[5]!==l||s[6]!==g||s[7]!==b?(n=(e,t)=>{!l||g||b||(y(!0),c(e,t.username||"",(n,r)=>{if(Array.isArray(n)){let a=n.map(e=>C({rawMsg:e,currentUserUsername:t.username}));R(e,t,{authenticated:!1,messages:a},r)}else R(e,t,n,r)}))},s[3]=c,s[4]=R,s[5]=l,s[6]=g,s[7]=b,s[8]=n):n=s[8];let P=n;s[9]!==S||s[10]!==T?.username||s[11]!==u||s[12]!==b||s[13]!==m?(r=()=>{if(b||!S)return;k.logger.info("[useLivechatRoom] Attempting to leave room",{currentRoomId:S}),_(!0);let e=T?.username||"";$({mintId:S,status:V.Status.SUCCESS,context:K.LIVECHAT_SOURCE_CONTEXTS.CHAT}),w(null),E(null),v(!1),_(!1),m?.({isAuthenticated:!1,userAddress:void 0}),u(S,e),k.logger.info("[useLivechatRoom] Left room",{roomId:S})},s[9]=S,s[10]=T?.username,s[11]=u,s[12]=b,s[13]=m,s[14]=r):r=s[14];let N=r;s[15]!==m?(a=()=>{k.logger.debug("[useLivechatRoom] Resetting room state"),v(!1),y(!1),_(!1),E(null),w(null),m?.({isAuthenticated:!1,userAddress:void 0})},s[15]=m,s[16]=a):a=s[16];let A=a;return s[17]!==S||s[18]!==T||s[19]!==h||s[20]!==g||s[21]!==b||s[22]!==P||s[23]!==N||s[24]!==A?(i={isJoined:h,isJoining:g,isLeaving:b,currentUser:T,currentRoomId:S,joinRoom:P,leaveRoom:N,resetRoomState:A,setCurrentUser:E},s[17]=S,s[18]=T,s[19]=h,s[20]=g,s[21]=b,s[22]=P,s[23]=N,s[24]=A,s[25]=i):i=s[25],i})({isConnected:u,emitJoinRoom:P,emitLeaveRoom:N,onJoinSuccess:(0,o.useCallback)((e,t)=>{A.invalidateQueries({queryKey:j(e)}),eq(t||null)},[A])}),em=q&&!!ei?.userAddress,ef=(0,o.useRef)(null);(0,o.useEffect)(()=>{ef.current!==eo&&((ef.current||eo)&&U(),ef.current=eo??null)},[U,eo]);let[eh,ev]=(0,o.useState)([]),eg=(0,o.useCallback)(e=>{let t={id:`sys-${Date.now()}`,roomId:eo||"system",message:e,timestamp:new Date,messageType:S.MessageType.SYSTEM};ev(e=>[...e,t])},[eo]),{data:ey,fetchNextPage:eb,hasNextPage:e_,isFetchingNextPage:eT}=D({socket:c,roomId:eo,currentUser:ei,isEnabled:u&&q}),{canSend:eE,recordOwnSend:eS}=(e=>{let t,n,r,a,i,s,l,c=(0,f.c)(19),{messages:u,currentUserAddress:d,currentUsername:m}=e,h=J.featureFlags[J.FeatureFlags.SPAM_CHECK_ENABLED];c[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],c[0]=t):t=c[0];let g=(0,o.useRef)(t);if(c[1]!==u){let e=u.filter(et).slice(-v.BUILD_HISTORY_LIMIT);n=e.slice(-v.LAST_N_MESSAGES_COUNT).map(en),r=new Map;for(let t=Math.max(0,e.length-v.BUILD_HISTORY_LIMIT);t<e.length;t++){let n=e[t],a=ee(n.message||"");if(!a)continue;let i=n.timestamp.getTime();r.has(a)||r.set(a,[]),r.get(a).push(i)}c[1]=u,c[2]=n,c[3]=r}else n=c[2],r=c[3];c[4]!==n||c[5]!==r?(a={lastNNormalized:n,perTextTimestamps:r},c[4]=n,c[5]=r,c[6]=a):a=c[6];let{lastNNormalized:y,perTextTimestamps:b}=a;c[7]!==d||c[8]!==m||c[9]!==y||c[10]!==u||c[11]!==b?(i=(e,t)=>{let n=void 0===t?Date.now():t;if(!h)return{allow:!0};if(Z(d,m)){let e=n-v.ONE_SECOND_MS,t=g.current;for(;t.length>0&&t[0]<e;)t.shift();if(t.length>=v.PER_USER_RATE_LIMIT_PER_SEC)return{allow:!1,reason:"rate_limit"}}let r=ee(e||"");if(r.length<=v.MIN_TEXT_LENGTH_FOR_DUPLICATE_CHECK)return{allow:!0};let a=b.get(r)||[],i=n-v.TEN_SECONDS_MS,o=0;for(let e=a.length-1;e>=0&&!(a[e]<i);e--)if(++o>=v.MAX_IDENTICAL_IN_10S)return{allow:!1,reason:"too_many_identical_10s"};let s=0;for(let e=0;e<y.length;e++)if(y[e]===r&&s++,s>=v.MAX_IDENTICAL_IN_LAST_N)return{allow:!1,reason:"too_many_identical_lastN"};let l=0;for(let e=u.length-1;e>=0;e--){let t=u[e];if(t.messageType!==S.MessageType.REGULAR)continue;let n=ee(t.message||"");if(n)if(n===r){if(++l>=v.MAX_CONSECUTIVE_IDENTICAL)return{allow:!1,reason:"too_many_consecutive"}}else break}return{allow:!0}},c[7]=d,c[8]=m,c[9]=y,c[10]=u,c[11]=b,c[12]=i):i=c[12];let _=i;c[13]!==d||c[14]!==m?(s=e=>{let t=void 0===e?Date.now():e;if(!h||!Z(d,m))return;let n=g.current,r=t-v.ONE_SECOND_MS;for(;n.length>0&&n[0]<r;)n.shift();n.push(t)},c[13]=d,c[14]=m,c[15]=s):s=c[15];let T=s;return c[16]!==_||c[17]!==T?(l={canSend:_,recordOwnSend:T},c[16]=_,c[17]=T,c[18]=l):l=c[18],l})({messages:(0,o.useMemo)(()=>ey?.pages?ey.pages.flatMap(e=>e.messages):[],[ey]),currentUserAddress:ei?.userAddress,currentUsername:ei?.username}),{mutate:ex,isPending:eC}=(e=>{let t,n,r,a,o,s,l=(0,f.c)(24),{socket:c,roomId:u,currentUser:d,asyncSendMessageEnabled:m,addSystemMessage:h}=e,v=(0,i.useQueryClient)();l[0]!==c?(t={socket:c},l[0]=c,l[1]=t):t=l[1];let{emitSendMessage:g}=O(t);return l[2]!==m||l[3]!==d||l[4]!==g||l[5]!==u||l[6]!==c?(n=e=>{let{messageText:t,replyToId:n,replyPreview:r}=e,a=Date.now();return new Promise((e,i)=>{if(!c||!u||!d)return k.logger.error("[useSendMessageMutation] Mutation failed pre-check",{hasSocket:!!c,roomId:u,hasCurrentUser:!!d}),ea.metrics.increment("livechat.send.precheck_failed",1),i(Error("Chat not ready to send message."));g(u,d.username,t,n,r,m,t=>{t?.error?(k.logger.error("[useSendMessageMutation] Server returned error on send message ack",{error:t.error,roomId:u,username:d.username}),ea.metrics.increment("livechat.send.ack_error",1),i(Error(t.error))):(ea.metrics.timing("livechat.send.ack_ms",Date.now()-a,{hasId:!!t?.id}),e(t))})})},l[2]=m,l[3]=d,l[4]=g,l[5]=u,l[6]=c,l[7]=n):n=l[7],l[8]!==d||l[9]!==v||l[10]!==u?(r=async e=>{let{messageText:t,replyToId:n,replyPreview:r}=e;if(!u||!d)return;let a=j(u);ea.metrics.increment("livechat.send.on_mutate"),await v.cancelQueries({queryKey:a});let i=v.getQueryData(a),o=`pending-${Date.now()}-${Math.random()}`;return ea.metrics.increment("livechat.send.optimistic_added"),v.setQueryData(a,e=>{if(!e)return{pages:[{messages:[],nextCursor:null}],pageParams:[null]};let a={id:o,roomId:u,username:d.username,message:t,userAddress:d.userAddress||"",profile_image:d.profile_image,timestamp:new Date,messageType:S.MessageType.REGULAR,isOwnMessage:!0,isPending:!0,replyToId:n,replyPreview:r},i=e.pages.map((t,n)=>n===e.pages.length-1?{...t,messages:[...t.messages,a]}:t);return{...e,pages:i}}),{previousMessages:i,tempId:o}},l[8]=d,l[9]=v,l[10]=u,l[11]=r):r=l[11],l[12]!==h||l[13]!==v||l[14]!==u?(a=(e,t,n)=>{if(!u||!n?.tempId)return;W({mintId:u,status:V.Status.ERROR,isReply:!!t.replyToId,errorReason:V.MessageErrorReason.UNKNOWN,context:K.LIVECHAT_SOURCE_CONTEXTS.CHAT_INPUT});let r=j(u);k.logger.error("[useSendMessageMutation] onError triggered",{error:e.message,variables:t,tempId:n.tempId,queryKey:r}),ea.metrics.increment("livechat.send.on_error",1),n?.previousMessages?v.setQueryData(r,n.previousMessages):v.setQueryData(r,e=>{if(!e)return e;let t=e.pages.map(e=>({...e,messages:e.messages.filter(e=>e.id!==n.tempId)}));return{...e,pages:t}}),h(`Failed to send message: ${e.message}`)},l[12]=h,l[13]=v,l[14]=u,l[15]=a):a=l[15],l[16]!==v||l[17]!==u?(o=(e,t,n)=>{if(!u||!n?.tempId)return;W({mintId:u,status:V.Status.SUCCESS,messageId:e?.id,isReply:!!t.replyToId,context:K.LIVECHAT_SOURCE_CONTEXTS.CHAT_INPUT});let r=j(u),a=e?.id;ea.metrics.increment("livechat.send.on_success",1,{hadId:!!a}),v.setQueryData(r,e=>{if(!e)return e;let t=e.pages.map(e=>({...e,messages:e.messages.map(e=>e.id===n.tempId?{...e,id:a||e.id,isPending:!1}:e)}));return{...e,pages:t}})},l[16]=v,l[17]=u,l[18]=o):o=l[18],l[19]!==n||l[20]!==r||l[21]!==a||l[22]!==o?(s={mutationFn:n,onMutate:r,onError:a,onSuccess:o},l[19]=n,l[20]=r,l[21]=a,l[22]=o,l[23]=s):s=l[23],(0,er.useMutation)(s)})({socket:c,roomId:eo,currentUser:ei,addSystemMessage:eg,asyncSendMessageEnabled:l}),eP=(0,o.useCallback)(e=>{if(t||!em||!e.messageText.trim())return;let n=eE(e.messageText);if(!n.allow){h.datadogRum.addAction("sendMessage:blocked",{reason:n.reason,roomId:eo,userAddress:ei?.userAddress});let t=v.BLOCK_REASON_MESSAGES[n.reason]||"blocked by client moderation",r=ee(e.messageText);k.logger.info("[LivechatProvider] Client-side send blocked",{reason:n.reason,roomId:eo,userAddress:ei?.userAddress,username:ei?.username,messageLength:e.messageText.length,normalizedLength:r.length,asyncSendMessageEnabled:l,isAuthenticated:em,message:e.messageText}),eg(`Failed to send message: ${t}`);return}eS(),ex(e)},[ex,t,em,eE,eS,eg,l,eo,ei?.userAddress,ei?.username]),eN=(0,o.useCallback)(e=>{if("string"==typeof e.username&&""!==e.username.trim()&&q&&e.roomId===eo){let n=C({rawMsg:e,currentUserUsername:ei?.username,currentUserAddress:ei?.userAddress});if(!t&&em&&ei&&n.isOwnMessage){let e=j(eo),t=A.getQueryData(e);if(t?.pages.flatMap(e=>e.messages).some(e=>e.isPending&&e.isOwnMessage&&e.message===n.message))return}let r=j(eo);A.setQueryData(r,e=>{if(!e||e.pages.some(e=>e.messages.some(e=>e.id===n.id&&n.id)))return e;let t=e.pages.map((t,r)=>r===e.pages.length-1?{...t,messages:[...t.messages,n]}:t);return{...e,pages:t}})}},[q,eo,ei,A,t,em]),eA=(0,o.useCallback)(e=>{eo&&(ek.useRoomModeratorsStore.getState().addModerator(eo,e.userAddress),A.invalidateQueries({queryKey:[y.GET_ROOM_MODERATORS_QUERY_KEY,eo]}))},[eo,A]),eL=(0,o.useCallback)(e=>{eo&&(ek.useRoomModeratorsStore.getState().removeModerator(eo,e.userAddress),A.invalidateQueries({queryKey:[y.GET_ROOM_MODERATORS_QUERY_KEY,eo]}))},[eo,A]),eO=(0,o.useCallback)(e=>{if(k.logger.debug("[LivechatProvider] Received messageDeleted event",{messageId:e,roomId:eo}),!eo)return void k.logger.warn("[LivechatProvider] No current room ID for message deletion",{messageId:e});let t=j(eo);A.setQueryData(t,t=>{if(!t)return k.logger.debug("[LivechatProvider] No existing data to update for message deletion",{messageId:e,roomId:eo}),t;let n=t.pages.map(t=>({...t,messages:t.messages.filter(t=>t.id!==e)})),r={...t,pages:n};return k.logger.debug("[LivechatProvider] Message removed from cache",{messageId:e,roomId:eo}),r}),A.invalidateQueries({queryKey:t,exact:!0})},[eo,A]),eM=(0,o.useCallback)(e=>{if(k.logger.debug("[LivechatProvider] Received userMessagesWiped event",{userAddress:e.userAddress,roomId:eo}),!eo)return;let t=j(eo);A.setQueryData(t,t=>{if(!t)return t;let n=t.pages.map(t=>({...t,messages:t.messages.filter(t=>t.userAddress!==e.userAddress)}));return{...t,pages:n}}),A.invalidateQueries({queryKey:t,exact:!0})},[eo,A]),eD=(0,o.useCallback)(e=>{eq(e.messageId)},[]),ej=(0,o.useCallback)(()=>{eq(null)},[]),eU=X(e=>e.banUser),eF=X(e=>e.unbanUser);(0,o.useEffect)(()=>{if(!c||!eo)return;let e=e=>{k.logger.debug("[LivechatProvider] Received userBannedInRoom event",{roomId:eo,userAddress:e.userAddress}),eU(e.userAddress,eo),A.invalidateQueries({queryKey:[g.GET_BANNED_USERS_QUERY_KEY,eo]})},t=e=>{k.logger.debug("[LivechatProvider] Received userUnbannedInRoom event",{roomId:eo,userAddress:e.userAddress}),eF(e.userAddress,eo),A.invalidateQueries({queryKey:[g.GET_BANNED_USERS_QUERY_KEY,eo]})};return c.on("userBannedInRoom",e),c.on("userUnbannedInRoom",t),()=>{c.off("userBannedInRoom",e),c.off("userUnbannedInRoom",t)}},[c,eo,A,eU,eF]),(({socket:e,roomId:t,onNewMessage:n,onMessageDeleted:r,onUserMessagesWiped:a,onModeratorAssigned:i,onModeratorUnassigned:s,onMessagePinned:l,onMessageUnpinned:c})=>{let{addBannedUser:u,removeBannedUser:d}=Y(),m=X(e=>e.addParticipant),f=X(e=>e.removeParticipant);(0,o.useEffect)(()=>{if(!e)return;let t=t=>{k.logger.debug("[useLivechatSocketEvents] Received newMessage event",{id:t?.id,roomId:t?.roomId});try{n?.(t)}catch(e){k.logger.error("[useLivechatSocketEvents] Error processing newMessage",{id:t?.id,error:e instanceof Error?e.message:String(e)})}t&&t.id&&(k.logger.debug("[useLivechatSocketEvents] Emitting messageReceived ack",{messageId:t.id}),e.emit("messageReceived",{messageId:t.id}))};n&&e.on("newMessage",t);let o=e=>{r?.(e.messageId)},u=e=>{l?.(e)},d=()=>{c?.()};return r&&e.on("messageDeleted",o),l&&e.on("messagePinned",u),c&&e.on("messageUnpinned",d),e.on("userMessagesWiped",a),e.on("roomModeratorAssigned",i),e.on("roomModeratorUnassigned",s),()=>{n&&e.off("newMessage",t),r&&e.off("messageDeleted",o),l&&e.off("messagePinned",u),c&&e.off("messageUnpinned",d),e.off("userMessagesWiped",a),e.off("roomModeratorAssigned",i),e.off("roomModeratorUnassigned",s)}},[e,n,t,r,a,u,d,m,f,i,s,l,c]),(0,o.useEffect)(()=>{if(!e)return;let r=()=>{k.logger.info("[useLivechatSocketEvents] connect/reconnect event triggered",{roomId:t}),t&&(k.logger.debug("[useLivechatSocketEvents] Emitting getMissedMessages",{roomId:t}),e.emit("getMissedMessages",{roomId:t},e=>{k.logger.debug("[useLivechatSocketEvents] Received response for getMissedMessages",{count:e?.length??0,roomId:t}),e&&e.length>0&&e.forEach(e=>{try{n&&n(e)}catch(t){k.logger.error("[useLivechatSocketEvents] Error processing missed message",{id:e?.id,error:t instanceof Error?t.message:String(t)})}})}))};return e.on("connect",r),()=>{e.off("connect",r)}},[e,n,t]),(0,o.useEffect)(()=>{if(!e)return;let t=e=>{try{let{name:t,value:n,maxAge:r}=e;k.logger.debug("[useLivechatSocketEvents] Received setCookie event",{name:t,value:n}),document.cookie=`${t}=${n}; Path=/; Max-Age=${r}; SameSite=Lax`}catch(e){k.logger.error("[useLivechatSocketEvents] Error processing setCookie event",{error:e instanceof Error?e.message:String(e)})}};return e.on("setCookie",t),()=>{e.off("setCookie",t)}},[e])})({socket:c,roomId:eo,onNewMessage:eN,onMessageDeleted:eO,onUserMessagesWiped:eM,onModeratorAssigned:eA,onModeratorUnassigned:eL,onMessagePinned:eD,onMessageUnpinned:ej}),(e=>{let t,n,r=(0,f.c)(8),{socket:a,currentRoomId:s,currentUserAddress:l}=e,c=(0,i.useQueryClient)(),u=(0,_.useLivechatReactionsStore)(F),d=(0,_.useLivechatReactionsStore)(H);r[0]!==u||r[1]!==s||r[2]!==l||r[3]!==c||r[4]!==d||r[5]!==a?(t=()=>{if(!a||!s)return;let e=e=>{let t,n;k.logger.debug("[useLivechatReactionsSync] handleMessageReactionUpdated",e);let r=j(s),a=c.getQueryData(r),i=a?.pages.flatMap(B).find(t=>t.id===e.messageId);s&&(t=i?.reactionRecentAddresses,n=i?.reactionRecentAvatarUrls);let o={messageId:e.messageId,emojiKey:e.emojiKey,userAddress:e.userAddress,serverRecent:t,serverRecentAvatarUrls:n,avatarUrl:e.avatarUrl};e.action===T.LivechatReactionAction.Add?u(o,l):d(o,l)};return a.on("messageReactionUpdated",e),()=>{a.off("messageReactionUpdated",e)}},n=[u,s,l,c,d,a],r[0]=u,r[1]=s,r[2]=l,r[3]=c,r[4]=d,r[5]=a,r[6]=t,r[7]=n):(t=r[6],n=r[7]),(0,o.useEffect)(t,n)})({socket:c,currentRoomId:eo,currentUserAddress:ei?.userAddress});let[eH,eB]=(0,o.useState)(!1),[eV,eq]=(0,o.useState)(null),{effectiveAddress:eG,authReady:ez}=(0,a.useProfile)();(0,o.useEffect)(()=>(w(),()=>{I()}),[w,I]);let e$=(0,o.useCallback)((e,t)=>{ev([]),es(e,t)},[es]),eW=(0,o.useCallback)(()=>{ec(),ev([]),eo&&A.invalidateQueries({queryKey:j(eo)})},[ec,eo,A]),eK=(0,o.useCallback)(e=>{G&&eu(),q&&eW(),e||el(),u&&R()},[G,eu,q,eW,u,R]),eQ=(0,o.useCallback)(()=>{eB(e=>!e)},[]),eY=(0,o.useMemo)(()=>{let e=[...ey?.pages?ey.pages.flatMap(e=>e.messages):[],...eh].sort((e,t)=>e.timestamp.getTime()-t.timestamp.getTime());if(e.length>b.MAX_MESSAGES_IN_MEMORY){let t=e.length-b.MAX_MESSAGES_IN_MEMORY;return k.logger.debug("[LivechatProvider] Truncating old messages from memory",{totalMessages:e.length,truncatedCount:t,keptMessages:b.MAX_MESSAGES_IN_MEMORY}),e.slice(-b.MAX_MESSAGES_IN_MEMORY)}return e},[ey,eh]),eX=(0,o.useMemo)(()=>({socket:c,isConnected:u,isConnecting:d,connectionError:m,retryCount:E,forceReconnect:R,isJoined:q,isJoining:G,isLeaving:Q,messages:eY,currentUser:ei,currentRoomId:eo,hasMoreHistory:!!e_,isLoadingHistory:eT,loadOlderMessages:eb,isCollapsed:eH,toggleCollapse:eQ,pinnedMessageId:eV,joinRoom:e$,leaveRoom:eW,sendMessage:eP,isSendingMessage:eC,readOnly:t||!em,setCurrentUser:ed,onTrackEvent:r,isAuthenticated:em,userAddress:ei?.userAddress,isCreator:L,isRoomModerator:M}),[c,u,d,m,E,R,q,G,Q,eY,ei,eo,e_,eT,eH,e$,eW,eP,eb,eQ,eV,eC,t,ed,r,em,L,M]),eJ=(0,o.useRef)(void 0),eZ=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{if(!ez)return;let e=eJ.current;if(!eZ.current){eZ.current=!0,eJ.current=eG;return}eG!==e&&(eJ.current=eG,eK(eG))},[ez,eG,eK]),(0,n.jsx)(s.AnalyticsProvider,{onTrackEvent:r,children:(0,n.jsx)(eI,{roomId:eo,children:(0,n.jsx)(eR.Provider,{value:eX,children:e})})})},eN=e=>{let t,r,a,i,o,s,l=(0,f.c)(12);l[0]!==e?({isModeratorCheckEnabled:r,isEnabled:a,...t}=e,l[0]=e,l[1]=t,l[2]=r,l[3]=a):(t=l[1],r=l[2],a=l[3]);let c=void 0===r||r,u=void 0===a||a;return l[4]!==t?(i=(0,n.jsx)(eP,{...t}),l[4]=t,l[5]=i):i=l[5],l[6]!==c||l[7]!==i?(o=(0,n.jsx)(eS,{isEnabled:c,children:i}),l[6]=c,l[7]=i,l[8]=o):o=l[8],l[9]!==u||l[10]!==o?(s=(0,n.jsx)(eh,{isEnabled:u,children:o}),l[9]=u,l[10]=o,l[11]=s):s=l[11],s},eA=()=>{let e=(0,o.useContext)(eR);if(void 0===e)throw Error("useLivechat must be used within a LivechatProvider");return e};var eL=e.i(182251);let eO=(0,Q.create)(()=>({showTitle:!1}));e.s(["useLivestreamViewingPropsStore",0,eO],689740);let eM=(0,o.createContext)(void 0),eD=(0,o.createContext)(void 0),ej=()=>{let e=(0,o.useContext)(eD);if(!e)throw Error("useLivekitConnectionContext must be used within a LivekitConnectionContext.Provider");return e},eU=({children:e,mint:t,showControls:f=!0,showParticipants:h=!0,showParticipantName:v=!0,isMobile:g,onTrackEvent:y,onBuyReaction:b,livechatUser:_,livechatReadOnly:T=!1,showTitle:E=!1,viewMode:S="default",asyncSendMessageEnabled:w=!1,initialLivestream:x,initialBanExpiry:C,isModeratorCheckEnabled:I=!0,isLive:R=!0,shouldGetCoinInfo:P=!0,shouldGetLivestreamData:N=!0,isLivechatEnabled:A=!0})=>{let[L,O]=(0,o.useState)(null),[M,D]=(0,o.useState)(!1),[j,U]=(0,o.useState)(!1),[F,H]=(0,o.useState)(!1),[B,V]=(0,o.useState)(!1),q=(0,o.useRef)(null),G=void 0!==g?g:B,z=(0,i.useQueryClient)(),{setLivestream:$,clearLivestream:W}=(0,eL.useLivestreamDataStore)();(0,o.useEffect)(()=>{x&&$(t,x)},[x,$,t]),(0,o.useEffect)(()=>{H(!!(C&&C>Date.now()))},[C,H]),(0,o.useEffect)(()=>{eO.setState({showTitle:E})},[E]);let K="recording"!==S&&f,Q=(0,o.useRef)(_??null),Y=(0,o.useRef)(`${_?.address??""}|${_?.username??""}|${_?.profile_image??""}`),X=`${_?.address??""}|${_?.username??""}|${_?.profile_image??""}`;X!==Y.current&&(Q.current=_??null,Y.current=X);let J=Q.current,Z=(0,u.useLivestream)(t);(0,m.useLivestreamData)({mintId:t,refetchInterval:!!j&&5e3,refetchIntervalInBackground:!1,refetchOnWindowFocus:!0,enabled:R&&(j||!x)&&N}),(0,o.useEffect)(()=>{if(void 0!==g)return;let e=()=>V(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[g]),(0,d.useLivestreamCoinInfo)({mintId:t,onSuccess:e=>{let n=Date.now(),r=e?.livestream_ban_expiry,a=!!r&&r>n;k.logger.debug("[LivestreamProvider] useLivestreamCoinInfo onSuccess",{mintId:t,dataExists:!!e,calculatedIsBanned:a}),H(a)},enabled:R&&void 0===C&&P}),(0,o.useEffect)(()=>{j&&Z&&U(!1)},[j,Z,U]);let ee=(0,o.useCallback)((e={})=>{k.logger.info("[LivestreamProvider] resetContext called.",{mintId:t}),O(null),D(!1),U(e?.isDisconnected??!1),e?.isDisconnected&&W(t),z.invalidateQueries({queryKey:[l.GET_COIN_QUERY_KEY,t]}),z.invalidateQueries({queryKey:[c.IS_CREATOR_QUERY_KEY,t]})},[t,z,W]),{address:et,authReady:en}=(0,a.useProfile)(),er=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(!en)return;let e=er.current;e===et||(er.current=et??null,null!==e&&ee({isDisconnected:!et}))},[en,et,ee]);let ea=(0,o.useMemo)(()=>(k.logger.debug("[LivestreamProvider] Recalculating LivestreamContext value.",{mintId:t}),{mintId:t,token:L,setToken:O,showBackstage:M,setShowBackstage:D,isDisconnected:j,setIsDisconnected:U,resetContext:ee,isBanned:F,showControls:K,showParticipants:h,showParticipantName:v,isMobile:G,roomRef:q,onBuyReaction:b,livechatUser:J,viewMode:S}),[t,L,M,j,U,ee,F,K,h,v,G,b,J,S]),ei=(0,o.useMemo)(()=>({mintId:t,token:L,isMobile:G,roomRef:q,setIsDisconnected:U,resetContext:ee}),[t,L,G,q,U,ee]);return(0,n.jsx)(s.AnalyticsProvider,{onTrackEvent:y,children:(0,n.jsx)(eM.Provider,{value:ea,children:(0,n.jsx)(eD.Provider,{value:ei,children:(0,n.jsx)(eN,{isEnabled:A,readOnly:T||!_,onTrackEvent:y,asyncSendMessageEnabled:w,isModeratorCheckEnabled:R&&I,children:(0,n.jsx)(r.Provider,{children:e})})})})})};function eF(){let e=(0,o.useContext)(eM);if(void 0===e)throw Error("useLivestreamContext must be used within a LivestreamProvider");return e}},675898,e=>{"use strict";let t=(0,e.i(376530).default)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);e.s(["Loader",()=>t],675898)},162786,e=>{"use strict";var t=e.i(649785),n=e.i(281675);function r(e){let r,a,i,o,s=(0,t.c)(7),[l,c]=(0,n.useState)(void 0!==e&&e);s[0]!==l?(r=()=>c(!l),s[0]=l,s[1]=r):r=s[1];let u=r;s[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>c(!0),s[2]=a):a=s[2];let d=a;s[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>c(!1),s[3]=i):i=s[3];let m=i;return s[4]!==u||s[5]!==l?(o={value:l,setValue:c,toggleValue:u,setTrue:d,setFalse:m},s[4]=u,s[5]=l,s[6]=o):o=s[6],o}e.s(["useBoolean",()=>r])},230902,921127,954259,234867,669352,622984,44318,55311,116431,966625,e=>{"use strict";var t=e.i(238153),n=e.i(492421),r=e.i(870429),a=e.i(516467);function i(e,t){let n=(0,a.toDate)(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}e.s(["startOfYear",()=>i],921127);var o=e.i(511518);function s(e,t){let r=(0,n.getDefaultOptions)(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=(0,a.toDate)(e,t?.in),s=o.getDay();return o.setDate(o.getDate()-(7*(s<i)+s-i)),o.setHours(0,0,0,0),o}function l(e,t){return s(e,{...t,weekStartsOn:1})}e.s(["startOfWeek",()=>s],954259),e.s(["startOfISOWeek",()=>l],234867);var c=e.i(487122);function u(e,t){let n=(0,a.toDate)(e,t?.in),r=n.getFullYear(),i=(0,c.constructFrom)(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);let o=l(i),s=(0,c.constructFrom)(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);let u=l(s);return n.getTime()>=o.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function d(e,t){let n,r,i=(0,a.toDate)(e,t?.in);return Math.round((l(i)-(n=u(i,void 0),(r=(0,c.constructFrom)(i,0)).setFullYear(n,0,4),r.setHours(0,0,0,0),l(r)))/o.millisecondsInWeek)+1}function m(e,t){let r=(0,a.toDate)(e,t?.in),i=r.getFullYear(),o=(0,n.getDefaultOptions)(),l=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,u=(0,c.constructFrom)(t?.in||e,0);u.setFullYear(i+1,0,l),u.setHours(0,0,0,0);let d=s(u,t),m=(0,c.constructFrom)(t?.in||e,0);m.setFullYear(i,0,l),m.setHours(0,0,0,0);let f=s(m,t);return+r>=+d?i+1:+r>=+f?i:i-1}function f(e,t){let r,i,l,u,d=(0,a.toDate)(e,t?.in);return Math.round((s(d,t)-(r=(0,n.getDefaultOptions)(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=m(d,t),(u=(0,c.constructFrom)(t?.in||d,0)).setFullYear(l,0,i),u.setHours(0,0,0,0),s(u,t)))/o.millisecondsInWeek)+1}function h(e,t){let n=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+n}e.s(["getISOWeek",()=>d],669352),e.s(["getWeekYear",()=>m],622984),e.s(["getWeek",()=>f],44318);let v={y(e,t){let n=e.getFullYear(),r=n>0?n:1-n;return h("yy"===t?r%100:r,t.length)},M(e,t){let n=e.getMonth();return"M"===t?String(n+1):h(n+1,2)},d:(e,t)=>h(e.getDate(),t.length),a(e,t){let n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>h(e.getHours()%12||12,t.length),H:(e,t)=>h(e.getHours(),t.length),m:(e,t)=>h(e.getMinutes(),t.length),s:(e,t)=>h(e.getSeconds(),t.length),S(e,t){let n=t.length;return h(Math.trunc(e.getMilliseconds()*Math.pow(10,n-3)),t.length)}},g={G:function(e,t,n){let r=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){let t=e.getFullYear();return n.ordinalNumber(t>0?t:1-t,{unit:"year"})}return v.y(e,t)},Y:function(e,t,n,r){let a=m(e,r),i=a>0?a:1-a;return"YY"===t?h(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):h(i,t.length)},R:function(e,t){return h(u(e),t.length)},u:function(e,t){return h(e.getFullYear(),t.length)},Q:function(e,t,n){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return h(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return h(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){let r=e.getMonth();switch(t){case"M":case"MM":return v.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){let r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return h(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){let a=f(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):h(a,t.length)},I:function(e,t,n){let r=d(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):h(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):v.d(e,t)},D:function(e,t,n){let o,s=(o=(0,a.toDate)(e,void 0),(0,r.differenceInCalendarDays)(o,i(o))+1);return"Do"===t?n.ordinalNumber(s,{unit:"dayOfYear"}):h(s,t.length)},E:function(e,t,n){let r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){let a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return h(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){let a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return h(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){let r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return h(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){let r,a=e.getHours();switch(r=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){let r,a=e.getHours();switch(r=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return v.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):v.H(e,t)},K:function(e,t,n){let r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):h(r,t.length)},k:function(e,t,n){let r=e.getHours();return(0===r&&(r=24),"ko"===t)?n.ordinalNumber(r,{unit:"hour"}):h(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):v.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):v.s(e,t)},S:function(e,t){return v.S(e,t)},X:function(e,t,n){let r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return b(r);case"XXXX":case"XX":return _(r);default:return _(r,":")}},x:function(e,t,n){let r=e.getTimezoneOffset();switch(t){case"x":return b(r);case"xxxx":case"xx":return _(r);default:return _(r,":")}},O:function(e,t,n){let r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+y(r,":");default:return"GMT"+_(r,":")}},z:function(e,t,n){let r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+y(r,":");default:return"GMT"+_(r,":")}},t:function(e,t,n){return h(Math.trunc(e/1e3),t.length)},T:function(e,t,n){return h(+e,t.length)}};function y(e,t=""){let n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return 0===i?n+String(a):n+String(a)+t+h(i,2)}function b(e,t){return e%60==0?(e>0?"-":"+")+h(Math.abs(e)/60,2):_(e,t)}function _(e,t=""){let n=Math.abs(e);return(e>0?"-":"+")+h(Math.trunc(n/60),2)+t+h(n%60,2)}let T=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},k=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},E={p:k,P:(e,t)=>{let n,r=e.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return T(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",T(a,t)).replace("{{time}}",k(i,t))}};e.s(["longFormatters",0,E],55311);let S=/^D+$/,w=/^Y+$/,x=["D","DD","YY","YYYY"];function C(e){return S.test(e)}function I(e){return w.test(e)}function R(e,t,n){var r,a,i;let o,s=(r=e,a=t,i=n,o="Y"===r[0]?"years":"days of the month",`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${a}\`) for formatting ${o} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(s),x.includes(e))throw RangeError(s)}function P(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}e.s(["isProtectedDayOfYearToken",()=>C,"isProtectedWeekYearToken",()=>I,"warnOrThrowProtectedError",()=>R],116431),e.s(["isDate",()=>P],966625);let N=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,A=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,L=/^'([^]*?)'?$/,O=/''/g,M=/[a-zA-Z]/;function D(e,r,i){let o=(0,n.getDefaultOptions)(),s=i?.locale??o.locale??t.defaultLocale,l=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,c=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,u=(0,a.toDate)(e,i?.in);if(!P(u)&&"number"!=typeof u||isNaN(+(0,a.toDate)(u)))throw RangeError("Invalid time value");let d=r.match(A).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,E[t])(e,s.formatLong):e}).join("").match(N).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t){var n;let t;return{isToken:!1,value:(t=(n=e).match(L))?t[1].replace(O,"'"):n}}if(g[t])return{isToken:!0,value:e};if(t.match(M))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});s.localize.preprocessor&&(d=s.localize.preprocessor(u,d));let m={firstWeekContainsDate:l,weekStartsOn:c,locale:s};return d.map(t=>{if(!t.isToken)return t.value;let n=t.value;return(!i?.useAdditionalWeekYearTokens&&I(n)||!i?.useAdditionalDayOfYearTokens&&C(n))&&R(n,r,String(e)),(0,g[n[0]])(u,n,s.localize,m)}).join("")}e.s(["format",()=>D],230902)},29054,e=>{"use strict";var t,n=e.i(230902),r=e.i(511518),a=e.i(487122),i=e.i(516467);let o=/[T ]/,s=/[Z ]/i,l=/([Z+-].*)$/,c=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){return e?parseInt(e):1}function f(e){return e&&parseFloat(e.replace(",","."))||0}let h=[31,null,31,30,31,30,31,31,30,31,30,31];function v(e){return e%400==0||e%4==0&&e%100!=0}var g=((t={}).DEFAULT="P p",t.COMPACT="dd/MM/yyyy, HH:mm",t.TIME_ONLY="HH:mm",t);let y=(e,t="P p")=>{try{let g;if("string"==typeof e)g=function(e,t){let n,g,y=()=>(0,a.constructFrom)(void 0,NaN),b=function(e){let t,n={},r=e.split(o);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],s.test(n.date)&&(n.date=e.split(s)[0],t=e.substr(n.date.length,e.length))),t){let e=l.exec(t);e?(n.time=t.replace(e[1],""),n.timezone=e[1]):n.time=t}return n}(e);if(b.date){let e=function(e,t){let n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};let a=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:null===i?a:100*i,restDateString:e.slice((r[1]||r[2]).length)}}(b.date,(void 0)??2);n=function(e,t){var n,r,a,i,o,s,l,u,d,f,g;if(null===t)return new Date(NaN);let y=e.match(c);if(!y)return new Date(NaN);let b=!!y[4],_=m(y[1]),T=m(y[2])-1,k=m(y[3]),E=m(y[4]),S=m(y[5])-1;if(b){let e,l;return(n=0,r=E,a=S,r>=1&&r<=53&&a>=0&&a<=6)?(i=t,o=E,s=S,(e=new Date(0)).setUTCFullYear(i,0,4),l=e.getUTCDay()||7,e.setUTCDate(e.getUTCDate()+((o-1)*7+s+1-l)),e):new Date(NaN)}{let e=new Date(0);return(l=t,u=T,d=k,u>=0&&u<=11&&d>=1&&d<=(h[u]||(v(l)?29:28))&&(f=t,(g=_)>=1&&g<=(v(f)?366:365)))?(e.setUTCFullYear(t,T,Math.max(_,k)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!n||isNaN(+n))return y();let _=+n,T=0;if(b.time&&isNaN(T=function(e){var t,n,a;let i=e.match(u);if(!i)return NaN;let o=f(i[1]),s=f(i[2]),l=f(i[3]);return(t=o,n=s,a=l,24===t?0===n&&0===a:a>=0&&a<60&&n>=0&&n<60&&t>=0&&t<25)?o*r.millisecondsInHour+s*r.millisecondsInMinute+1e3*l:NaN}(b.time)))return y();if(b.timezone){if(isNaN(g=function(e){var t,n;if("Z"===e)return 0;let a=e.match(d);if(!a)return 0;let i="+"===a[1]?-1:1,o=parseInt(a[2]),s=a[3]&&parseInt(a[3])||0;return(t=0,(n=s)>=0&&n<=59)?i*(o*r.millisecondsInHour+s*r.millisecondsInMinute):NaN}(b.timezone)))return y()}else{let e=new Date(_+T),t=(0,i.toDate)(0,void 0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return(0,i.toDate)(_+T+g,void 0)}(e);else if("number"==typeof e)g=new Date(e);else{if(!(e instanceof Date))return"Invalid Input Type";g=e}if(isNaN(g.getTime()))return"Invalid Date";return(0,n.format)(g,t)}catch(e){return"Invalid Date"}};e.s(["DateFormat",()=>g,"formatClock",0,(e,t=!1)=>{if(!Number.isFinite(e)||e<0)return"0:00";let n=Math.floor(e),r=Math.floor(n/3600),a=Math.floor(n%3600/60),i=n%60;return t||0!==r?`${String(r)}:${String(a).padStart(2,"0")}:${String(i).padStart(2,"0")}`:`${a}:${String(i).padStart(2,"0")}`},"formatDate",0,y,"formatRelativeDate",0,e=>{let t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";let n=Math.floor((new Date().getTime()-t.getTime())/864e5);if(0===n)return"today";if(1===n)return"1d ago";if(n<7)return`${n}d ago`;let r=Math.floor(n/7);if(1===r)return"1w ago";if(r<4)return`${r}w ago`;let a=Math.floor(n/30);if(1===a)return"1mo ago";if(a>1&&a<12)return`${a}mo ago`;if(0===a)return`${r}w ago`;let i=Math.floor(n/365);return 1===i?"1y ago":`${i}y ago`},"formatTime",0,e=>y(e,"HH:mm"),"getAgoTime",0,e=>{let t=new Date(e),n=(new Date().getTime()-t.getTime())/6e4;if(isNaN(n))return"Invalid Date";if(n<1)return"<1m";if(n<60)return`${Math.floor(n)}m`;if(n<1440)return`${Math.floor(n/60)}h`;if(n<10080)return`${Math.floor(n/1440)}d`;if(n<43200)return`${Math.floor(n/10080)}w`;else if(n<525600)return`${Math.floor(n/43200)}m`;else return`${Math.floor(n/525600)}y`},"normalizeToEpochSeconds",0,e=>Number.isFinite(e)?e>=1e12?Math.floor(e/1e3):Math.floor(e):0],29054)},574953,518742,e=>{"use strict";let t=(e,t)=>e.length<=t?e:e.slice(0,t)+"...";e.s(["truncateText",0,t],518742);let n=e=>e?e.length>12?e.slice(0,6):e:"";e.s(["getDisplayAddress",0,e=>t(e,6),"getDisplayUser",0,(e,r)=>e?.username?n(e.username):e?.address?t(e.address,6):r?t(r,6):"","getDisplayUsername",0,n],574953)},180075,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(734127),a=e.i(395360);e.s(["CopyIcon",0,e=>{let i,o,s=(0,n.c)(5),{className:l,copied:c}=e;return s[0]!==c?(i=c?(0,t.jsx)(r.Check,{size:16}):(0,t.jsx)(a.Copy,{size:16}),s[0]=c,s[1]=i):i=s[1],s[2]!==l||s[3]!==i?(o=(0,t.jsx)("div",{className:l,children:i}),s[2]=l,s[3]=i,s[4]=o):o=s[4],o}])},38816,e=>{"use strict";var t=e.i(738045),n=e.i(128296),r=e.i(454616);e.s(["buildCenterAlignedTranslateX",0,(e=0)=>`translateX(calc(-50% + ${e}px))`,"clampPercent",0,e=>Number.isNaN(e)?0:Math.max(0,Math.min(100,e)),"getArchivedVideosFilterLabels",0,(e,t)=>t?r.ArchivedVideosFilterLabelsCreator[e]:r.ArchivedVideosFilterLabelsViewer[e],"getClipTitle",0,e=>{if(e.title)return e.title;let t=new Date(e.startTime).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});return t?e.clipType===n.ClipType.Highlight?`Clipped on ${t}`:`Stream on ${t}`:"Untitled"},"getHalfGripWidthPx",0,(e=t.DEFAULT_GRIP_WIDTH_PX)=>Math.round(e/2)])},323888,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(8264),a=e.i(264458);let i={primary:"bg-livestream-green",secondary:"bg-red-500",dark:"bg-bg-secondary"},o={filled:{primary:"text-black",secondary:"text-white",dark:"text-gray-200"},outline:{primary:"text-livestream-green",secondary:"text-white",dark:"text-gray-200"}},s={large:"px-[76px]",medium:"px-[14px]",small:"px-2"},l={large:"py-3",medium:"py-1",small:"py-0"};e.s(["PumpButton",0,e=>{let c,u,d,m,f,h,v,g=(0,n.c)(30),{onClick:y,label:b,icon:_,className:T,style:k,disabled:E,variant:S,appearance:w,size:x,tooltip:C}=e,I=void 0===S?"primary":S,R=void 0===w?"filled":w,P=void 0===x?"large":x,N=!!_,A=!N&&"secondary"===I,L=E?void 0:y,O=l[P],M="filled"===R&&i[I],D="outline"===R&&"bg-transparent",j=o[R][I],U=N?"gap-2 px-2":s[P],F=E&&"cursor-not-allowed opacity-50",H=!E&&"hover:opacity-70";g[0]!==T||g[1]!==F||g[2]!==H||g[3]!==O||g[4]!==M||g[5]!==D||g[6]!==j||g[7]!==U?(c=(0,a.default)("flex items-center justify-center",O,"font-bold","rounded-[6px] text-[14px] leading-[18px]",M,D,j,U,F,H,T),g[0]=T,g[1]=F,g[2]=H,g[3]=O,g[4]=M,g[5]=D,g[6]=j,g[7]=U,g[8]=c):c=g[8];let B="small"!==P&&"lowercase first-letter:uppercase";g[9]!==B?(u=(0,a.default)(B),g[9]=B,g[10]=u):u=g[10];let V=A&&"[",q=A&&"]";g[11]!==b||g[12]!==u||g[13]!==V||g[14]!==q?(d=(0,t.jsxs)("span",{className:u,children:[V,b,q]}),g[11]=b,g[12]=u,g[13]=V,g[14]=q,g[15]=d):d=g[15],g[16]!==E||g[17]!==_||g[18]!==k||g[19]!==c||g[20]!==d||g[21]!==L?(m=(0,t.jsxs)("button",{onClick:L,disabled:E,style:k,className:c,children:[_,d]}),g[16]=E,g[17]=_,g[18]=k,g[19]=c,g[20]=d,g[21]=L,g[22]=m):m=g[22];let G=m;return C?(g[23]!==G?(f=(0,t.jsx)(r.Trigger,{asChild:!0,children:G}),g[23]=G,g[24]=f):f=g[24],g[25]!==C?(h=(0,t.jsx)(r.Content,{className:"mb-[10px] max-w-[200px] rounded-md bg-gray-900 p-2 text-xs font-semibold text-white",children:C}),g[25]=C,g[26]=h):h=g[26],g[27]!==f||g[28]!==h?(v=(0,t.jsxs)(r.Root,{delayDuration:0,children:[f,h]}),g[27]=f,g[28]=h,g[29]=v):v=g[29],v):G}])},166037,e=>{"use strict";e.s(["Z_INDEXES",0,{ModerationDialog:{content:120,overlay:110},ModerationQueueMedia:{bottomOverlay:20,topOverlay:20,content:10},BlurDialog:{content:30,title:10,footer:10},LiveKitRoom:{noControlsLiveIndicator:10,reactionsViewer:10},MiniView:{content:21,rnd:21},Controls:{bottom:19,top:19},ReactionsPopover:{content:25},Selector:{content:120},ParticipantsDialog:{content:50},AudioInteractionOverlay:{content:40},ParticipantVideoTile:{gradientOverlay:10},MainVideoView:{screenshareVideoTile:10},Tooltip:{content:50},ClipTimelineSlider:{track:10,range:11,slider:12,thumb:13,playbackHandle:14},ClipPreview:{playPauseOverlay:20}}])},446152,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(867013),a=e.i(166037);function i(e){e.stopPropagation()}e.s(["Dialog",0,e=>{let o,s,l,c,u,d,m,f,h,v=(0,n.c)(23),{children:g,open:y,onOpenChange:b,title:_,description:T,trigger:k,disableClose:E}=e,S=void 0!==E&&E;v[0]!==S||v[1]!==b?(o=e=>{(!S||e)&&b?.(e)},v[0]=S,v[1]=b,v[2]=o):o=v[2];let w=o;return v[3]!==k?(s=k&&(0,t.jsx)(r.Trigger,{asChild:!0,children:k}),v[3]=k,v[4]=s):s=v[4],v[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)(r.Overlay,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",style:{zIndex:a.Z_INDEXES.ModerationDialog.overlay}}),v[5]=l):l=v[5],v[6]===Symbol.for("react.memo_cache_sentinel")?(c={zIndex:a.Z_INDEXES.ModerationDialog.content},v[6]=c):c=v[6],v[7]!==_?(u=_&&(0,t.jsx)(r.Title,{className:"mb-2 text-lg font-semibold text-white",children:_}),v[7]=_,v[8]=u):u=v[8],v[9]!==T?(d=T&&(0,t.jsx)(r.Description,{className:"mb-4 text-white",children:T}),v[9]=T,v[10]=d):d=v[10],v[11]!==S?(m=!S&&(0,t.jsxs)(r.Close,{className:"absolute right-4 top-4 rounded-full p-1 hover:opacity-50",onClick:i,children:[(0,t.jsx)("span",{className:"sr-only",children:"Close"}),(0,t.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",children:(0,t.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"white"})})]}),v[11]=S,v[12]=m):m=v[12],v[13]!==g||v[14]!==u||v[15]!==d||v[16]!==m?(f=(0,t.jsxs)(r.Portal,{children:[l,(0,t.jsxs)(r.Content,{className:"fixed left-1/2 top-1/2 w-full max-w-md -translate-x-1/2 -translate-y-1/2 rounded-lg bg-bg-secondary p-6 shadow-lg",style:c,children:[u,d,g,m]})]}),v[13]=g,v[14]=u,v[15]=d,v[16]=m,v[17]=f):f=v[17],v[18]!==w||v[19]!==y||v[20]!==s||v[21]!==f?(h=(0,t.jsxs)(r.Root,{open:y,onOpenChange:w,children:[s,f]}),v[18]=w,v[19]=y,v[20]=s,v[21]=f,v[22]=h):h=v[22],h}])},517770,e=>{"use strict";var t=e.i(281675),n=e.i(607079),r=e.i(77962),a=e.i(834649);function i(){return(0,n.useReactContext)(r.mediaContext)}let o=(0,n.createReactComponent)(r.AirPlayButtonInstance,{domEventsRegex:/^onMedia/});t.forwardRef(({children:e,...a},i)=>t.createElement(o,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e))).displayName="AirPlayButton";let s=(0,n.createReactComponent)(r.PlayButtonInstance,{domEventsRegex:/^onMedia/}),l=t.forwardRef(({children:e,...a},i)=>t.createElement(s,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));l.displayName="PlayButton";let c=(0,n.createReactComponent)(r.CaptionButtonInstance,{domEventsRegex:/^onMedia/});t.forwardRef(({children:e,...a},i)=>t.createElement(c,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e))).displayName="CaptionButton";let u=(0,n.createReactComponent)(r.FullscreenButtonInstance,{domEventsRegex:/^onMedia/}),d=t.forwardRef(({children:e,...a},i)=>t.createElement(u,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));d.displayName="FullscreenButton";let m=(0,n.createReactComponent)(r.MuteButtonInstance,{domEventsRegex:/^onMedia/}),f=t.forwardRef(({children:e,...a},i)=>t.createElement(m,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));f.displayName="MuteButton";let h=(0,n.createReactComponent)(r.PIPButtonInstance,{domEventsRegex:/^onMedia/}),v=t.forwardRef(({children:e,...a},i)=>t.createElement(h,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));v.displayName="PIPButton";let g=(0,n.createReactComponent)(r.SeekButtonInstance,{domEventsRegex:/^onMedia/});t.forwardRef(({children:e,...a},i)=>t.createElement(g,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e))).displayName="SeekButton";let y=(0,n.createReactComponent)(r.LiveButtonInstance,{domEventsRegex:/^onMedia/});t.forwardRef(({children:e,...a},i)=>t.createElement(y,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e))).displayName="LiveButton";let b=["onDragStart","onDragEnd","onDragValueChange","onValueChange","onPointerValueChange"],_=(0,n.createReactComponent)(r.SliderValueInstance),T=(0,n.createReactComponent)(r.SliderInstance,{events:b});t.forwardRef(({children:e,...n},a)=>t.createElement(T,{...n,ref:a},n=>t.createElement(r.Primitive.div,{...n},e))).displayName="Slider";let k=t.forwardRef((e,n)=>t.createElement(r.Primitive.div,{...e,ref:n}));k.displayName="SliderThumb";let E=t.forwardRef((e,n)=>t.createElement(r.Primitive.div,{...e,ref:n}));E.displayName="SliderTrack";let S=t.forwardRef((e,n)=>t.createElement(r.Primitive.div,{...e,ref:n}));S.displayName="SliderTrackFill";let w=(0,n.createReactComponent)(r.SliderPreviewInstance),x=t.forwardRef(({children:e,...a},i)=>t.createElement(w,{...a},a=>t.createElement(r.Primitive.div,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));x.displayName="SliderPreview";let C=t.forwardRef(({children:e,...a},i)=>t.createElement(_,{...a},(a,o)=>{let s=(0,n.useSignal)(()=>o.getValueText(),o);return t.createElement(r.Primitive.div,{...a,ref:i},s,e)}));C.displayName="SliderValue";let I=t.forwardRef(({children:e,...n},a)=>{let i=(0,r.useSliderState)("min"),o=(0,r.useSliderState)("max"),s=(0,r.useSliderState)("step");return t.createElement(r.Primitive.div,{...n,ref:a},Array.from({length:Math.floor((o-i)/s)+1}).map((t,n)=>e(n)))});I.displayName="SliderSteps";let R=(0,n.createReactComponent)(r.VolumeSliderInstance,{events:b,domEventsRegex:/^onMedia/}),P=t.forwardRef(({children:e,...n},a)=>t.createElement(R,{...n,ref:a},n=>t.createElement(r.Primitive.div,{...n},e)));P.displayName="VolumeSlider";var N=Object.freeze({__proto__:null,Preview:x,Root:P,Steps:I,Thumb:k,Track:E,TrackFill:S,Value:C});let A=(0,n.createReactComponent)(r.ThumbnailInstance);t.forwardRef(({children:e,...a},i)=>t.createElement(A,{...a},a=>t.createElement(r.Primitive.div,{...a,ref:(0,n.composeRefs)(a.ref,i)},e))).displayName="Thumbnail";let L=t.forwardRef(({children:e,...a},i)=>{let{src:o,img:s,crossOrigin:l}=(0,n.useStateContext)(r.ThumbnailInstance.state),c=(0,n.useSignal)(o),u=(0,n.useSignal)(l);return t.createElement(r.Primitive.img,{crossOrigin:u,...a,src:c||void 0,ref:(0,n.composeRefs)(s.set,i)},e)});L.displayName="ThumbnailImg";let O=t.createContext({$chapters:(0,n.signal)(null)});O.displayName="TimeSliderContext";let M=(0,n.createReactComponent)(r.TimeSliderInstance,{events:b,domEventsRegex:/^onMedia/}),D=t.forwardRef(({children:e,...a},i)=>{let o=t.useMemo(()=>(0,n.signal)(null),[]);return t.createElement(O.Provider,{value:{$chapters:o}},t.createElement(M,{...a,ref:i},n=>t.createElement(r.Primitive.div,{...n},e)))});D.displayName="TimeSlider";let j=(0,n.createReactComponent)(r.SliderChaptersInstance),U=t.forwardRef(({children:e,...a},i)=>t.createElement(j,{...a},(a,o)=>t.createElement(r.Primitive.div,{...a,ref:(0,n.composeRefs)(a.ref,i)},t.createElement(F,{instance:o},e))));function F({instance:e,children:a}){let i=(0,n.useSignal)(()=>e.cues,e),o=t.useRef([]),s=t.useRef(null),{$chapters:l}=t.useContext(O);return s.current||(s.current=function(e=0,t=0,a=""){return r.IS_SERVER?{startTime:e,endTime:t,text:a,addEventListener:n.noop,removeEventListener:n.noop,dispatchEvent:n.noop}:new window.VTTCue(e,t,a)}()),t.useEffect(()=>(l.set(e),()=>void l.set(null)),[e]),t.useEffect(()=>{e.setRefs(o.current)},[i]),a(i.length?i:[s.current],e=>{if(!e){o.current.length=0;return}o.current.push(e)})}U.displayName="SliderChapters",F.displayName="SliderChapterTracks";let H=t.forwardRef(({children:e,...a},i)=>{let{$chapters:o}=t.useContext(O),[s,l]=t.useState();return t.useEffect(()=>(0,n.effect)(()=>{let e=o(),t=e?.activePointerCue||e?.activeCue;l(t?.text||"")}),[]),t.createElement(r.Primitive.div,{...a,ref:i},s,e)});H.displayName="SliderChapterTitle";let B=t.forwardRef((e,n)=>t.createElement(r.Primitive.div,{...e,ref:n}));B.displayName="SliderProgress";let V=(0,n.createReactComponent)(r.SliderThumbnailInstance),q=t.forwardRef(({children:e,...a},i)=>t.createElement(V,{...a},a=>t.createElement(r.Primitive.div,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));q.displayName="SliderThumbnail";let G=(0,n.createReactComponent)(r.SliderVideoInstance,{events:["onCanPlay","onError"]}),z=t.forwardRef(({children:e,...r},a)=>t.createElement(G,{...r},(r,i)=>t.createElement($,{...r,instance:i,ref:(0,n.composeRefs)(r.ref,a)},e)));z.displayName="SliderVideo";let $=t.forwardRef(({instance:e,children:a,...i},o)=>{let{canLoad:s}=(0,n.useStateContext)(r.mediaState),{src:l,video:c,crossOrigin:u}=e.$state,d=(0,n.useSignal)(l),m=(0,n.useSignal)(s),f=(0,n.useSignal)(u);return t.createElement(r.Primitive.video,{style:{maxWidth:"unset"},...i,src:d||void 0,muted:!0,playsInline:!0,preload:m?"auto":"none",crossOrigin:f||void 0,ref:(0,n.composeRefs)(c.set,o)},a)});$.displayName="SliderVideoProvider";var W=Object.freeze({__proto__:null,ChapterTitle:H,Chapters:U,Preview:x,Progress:B,Root:D,Steps:I,Thumb:k,Thumbnail:{Root:q,Img:L},Track:E,TrackFill:S,Value:C,Video:z});let K=(0,n.createReactComponent)(r.RadioGroupInstance,{events:["onChange"]}),Q=t.forwardRef(({children:e,...n},a)=>t.createElement(K,{...n,ref:a},n=>t.createElement(r.Primitive.div,{...n},e)));Q.displayName="RadioGroup";let Y=(0,n.createReactComponent)(r.RadioInstance,{events:["onChange","onSelect"]}),X=t.forwardRef(({children:e,...a},i)=>t.createElement(Y,{...a},a=>t.createElement(r.Primitive.div,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));X.displayName="RadioItem";var J=Object.freeze({__proto__:null,Item:X,Root:Q});let Z=(0,n.createReactComponent)(r.MenuInstance,{events:["onOpen","onClose"],domEventsRegex:/^onMedia/}),ee=t.forwardRef(({children:e,...n},a)=>t.createElement(Z,{...n,ref:a},(n,a)=>t.createElement(r.Primitive.div,{...n,style:{display:a.isSubmenu?void 0:"contents",...n.style}},e)));ee.displayName="Menu";let et=(0,n.createReactComponent)(r.MenuButtonInstance,{events:["onSelect"]}),en=t.forwardRef(({children:e,...a},i)=>t.createElement(et,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));en.displayName="MenuButton";let er=t.forwardRef(({container:e=null,disabled:i=!1,children:o,...s},l)=>{let c=(0,r.useMediaState)("fullscreen"),u=t.useMemo(()=>r.IS_SERVER?null:((0,n.isString)(e)?document.querySelector(e):e)??document.body,[e]);return!u||("fullscreen"===i?c:i)?o:(0,a.createPortal)(t.createElement(r.Primitive.div,{...s,style:{display:"contents",...s.style},ref:l},o),u)});er.displayName="MenuPortal";let ea=(0,n.createReactComponent)(r.MenuItemsInstance),ei=t.forwardRef(({children:e,...a},i)=>t.createElement(ea,{...a},a=>t.createElement(r.Primitive.div,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));ei.displayName="MenuItems";let eo=(0,n.createReactComponent)(r.MenuItemInstance),es=t.forwardRef(({children:e,...a},i)=>t.createElement(eo,{...a},a=>t.createElement(r.Primitive.div,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));es.displayName="MenuItem";var el=Object.freeze({__proto__:null,Button:en,Content:ei,Item:es,Items:ei,Portal:er,Radio:X,RadioGroup:Q,Root:ee});let ec=(0,n.createReactComponent)(r.GestureInstance,{events:["onWillTrigger","onTrigger"]}),eu=t.forwardRef(({children:e,...n},a)=>t.createElement(ec,{...n,ref:a},n=>t.createElement(r.Primitive.div,{...n},e)));eu.displayName="Gesture";let ed=(0,n.createReactComponent)(r.TimeInstance),em=t.forwardRef(({children:e,...r},a)=>t.createElement(ed,{...r},(r,i)=>t.createElement(ep,{...r,instance:i,ref:(0,n.composeRefs)(r.ref,a)},e)));em.displayName="Time";let ep=t.forwardRef(({instance:e,children:a,...i},o)=>{let{timeText:s}=e.$state,l=(0,n.useSignal)(s);return t.createElement(r.Primitive.div,{...i,ref:o},l,a)});ep.displayName="TimeText",e.s(["FullscreenButton",()=>d,"Gesture",()=>eu,"MuteButton",()=>f,"PIPButton",()=>v,"PlayButton",()=>l,"Preview",()=>x,"Steps",()=>I,"Thumb",()=>k,"Time",()=>em,"Track",()=>E,"TrackFill",()=>S,"Value",()=>C,"menu",()=>el,"radioGroup",()=>J,"sliderCallbacks",()=>b,"timeSlider",()=>W,"useMediaContext",()=>i,"volumeSlider",()=>N])},812423,e=>{"use strict";e.s(["ICON_SIZE",0,20])},403096,e=>{"use strict";var t=e.i(281675),n=e.i(607079),r=e.i(77962),a=e.i(517770);let i=(0,n.createReactComponent)(r.MediaAnnouncerInstance,{events:["onChange"]});t.forwardRef(({style:e,children:a,...o},s)=>t.createElement(i,{...o},i=>t.createElement(r.Primitive.div,{...i,style:{display:"contents",...e},ref:(0,n.composeRefs)(i.ref,s)},a))).displayName="MediaAnnouncer";let o=(0,n.createReactComponent)(r.ControlsInstance),s=t.forwardRef(({children:e,...a},i)=>t.createElement(o,{...a},a=>t.createElement(r.Primitive.div,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));s.displayName="Controls";let l=(0,n.createReactComponent)(r.ControlsGroupInstance),c=t.forwardRef(({children:e,...a},i)=>t.createElement(l,{...a},a=>t.createElement(r.Primitive.div,{...a,ref:(0,n.composeRefs)(a.ref,i)},e)));c.displayName="ControlsGroup";var u=Object.freeze({__proto__:null,Group:c,Root:s});(0,n.createReactComponent)(r.TooltipInstance);let d=(0,n.createReactComponent)(r.TooltipTriggerInstance);t.forwardRef(({children:e,...a},i)=>t.createElement(d,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e))).displayName="TooltipTrigger";let m=(0,n.createReactComponent)(r.TooltipContentInstance);t.forwardRef(({children:e,...a},i)=>t.createElement(m,{...a},a=>t.createElement(r.Primitive.div,{...a,ref:(0,n.composeRefs)(a.ref,i)},e))).displayName="TooltipContent";let f=(0,n.createReactComponent)(r.GoogleCastButtonInstance,{domEventsRegex:/^onMedia/});t.forwardRef(({children:e,...a},i)=>t.createElement(f,{...a},a=>t.createElement(r.Primitive.button,{...a,ref:(0,n.composeRefs)(a.ref,i)},e))).displayName="GoogleCastButton";let h=(0,n.createReactComponent)(r.QualitySliderInstance,{events:a.sliderCallbacks,domEventsRegex:/^onMedia/});t.forwardRef(({children:e,...n},a)=>t.createElement(h,{...n,ref:a},n=>t.createElement(r.Primitive.div,{...n},e))).displayName="QualitySlider",a.Preview,a.Steps,a.Thumb,a.Track,a.TrackFill,a.Value;let v=(0,n.createReactComponent)(r.AudioGainSliderInstance,{events:a.sliderCallbacks,domEventsRegex:/^onMedia/});t.forwardRef(({children:e,...n},a)=>t.createElement(v,{...n,ref:a},n=>t.createElement(r.Primitive.div,{...n},e))).displayName="AudioGainSlider",a.Preview,a.Steps,a.Thumb,a.Track,a.TrackFill,a.Value;let g=(0,n.createReactComponent)(r.SpeedSliderInstance,{events:a.sliderCallbacks,domEventsRegex:/^onMedia/});t.forwardRef(({children:e,...n},a)=>t.createElement(g,{...n,ref:a},n=>t.createElement(r.Primitive.div,{...n},e))).displayName="SpeedSlider",a.Preview,a.Steps,a.Thumb,a.Track,a.TrackFill,a.Value,t.forwardRef(({children:e,...n},a)=>{let i=(0,r.useMediaState)("title");return t.createElement(r.Primitive.span,{...n,ref:a},i,e)}).displayName="Title",t.forwardRef(({defaultText:e="",children:i,...o},s)=>{let l,c=(l=function(e){let[r,a]=t.useState([]);return t.useEffect(()=>{if(!e)return void a([]);function t(){e&&a(e.activeCues)}return t(),(0,n.listenEvent)(e,"cue-change",t)},[e]),r}(function(e){let n=(0,a.useMediaContext)(),[i,o]=t.useState(null);return t.useEffect(()=>(0,r.watchActiveTextTrack)(n.textTracks,e,o),[e]),i}("chapters")),l[0]?.text||"");return t.createElement(r.Primitive.span,{...o,ref:s},c||e,i)}).displayName="ChapterTitle";let y=(0,n.createReactComponent)(r.CaptionsInstance);function b(e,r=[]){let a=(0,n.useReactScope)();return t.useMemo(()=>(0,n.scoped)(()=>(0,n.signal)(e),a),[a,...r])}function _(e){let r=(0,n.useReactScope)();return t.useMemo(()=>(0,n.scoped)(e,r),[r])}t.forwardRef(({children:e,...n},a)=>t.createElement(y,{...n,ref:a},n=>t.createElement(r.Primitive.div,{...n},e))).displayName="Captions",t.forwardRef(({size:e=96,children:n,...r},a)=>t.createElement("svg",{width:e,height:e,fill:"none",viewBox:"0 0 120 120","aria-hidden":"true","data-part":"root",...r,ref:a},n)),t.forwardRef(({width:e=8,children:n,...r},a)=>t.createElement("circle",{cx:"60",cy:"60",r:"54",stroke:"currentColor",strokeWidth:e,"data-part":"track",...r,ref:a},n)),t.forwardRef(({width:e=8,fillPercent:n=50,children:r,...a},i)=>t.createElement("circle",{cx:"60",cy:"60",r:"54",stroke:"currentColor",pathLength:"100",strokeWidth:e,strokeDasharray:100,strokeDashoffset:100-n,"data-part":"track-fill",...a,ref:i},r)),e.s(["controls",()=>u,"createSignal",()=>b,"useScoped",()=>_])},430257,e=>{"use strict";var t=e.i(403096);e.s(["Controls",()=>t.controls])},789022,e=>{"use strict";var t=e.i(77962),n=e.i(281675),r=e.i(607079);e.i(403096);var a=e.i(517770);let i=n.forwardRef((e,t)=>{let{width:r,height:a,size:i=null,paths:o,...s}=e;return n.createElement("svg",{viewBox:"0 0 32 32",...s,width:r??i,height:a??i,fill:"none","aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",ref:t,dangerouslySetInnerHTML:{__html:o}})});i.displayName="VidstackIcon",e.i(834649);let o=Symbol(0);class s{constructor(e,t,n,r,a){this.logger=e,this.level=t,this.title=n,this.root=r,this.parent=a}[o]=!0;logs=[];log(...e){return this.logs.push({data:e}),this}labelledLog(e,...t){return this.logs.push({label:e,data:t}),this}groupStart(e){return new s(this.logger,this.level,e,this.root??this,this)}groupEnd(){return this.parent?.logs.push(this),this.parent??this}dispatch(){return this.logger.dispatch(this.level,this.root??this)}}let l=[1,1.25,1.5,1.75,2,2.5,3,4];class c extends r.Component{static props={normalLabel:"Disabled",gains:l};#e;#t;#n;get value(){return this.#n.value}get disabled(){let{gains:e}=this.$props,{canSetAudioGain:t}=this.#e.$state;return!t()||0===e().length}constructor(){super(),this.#n=new t.RadioGroupController,this.#n.onValueChange=this.#r.bind(this)}onSetup(){this.#e=(0,t.useMediaContext)(),(0,r.hasProvidedContext)(t.menuContext)&&(this.#t=(0,r.useContext)(t.menuContext))}onConnect(e){(0,r.effect)(this.#a.bind(this)),(0,r.effect)(this.#i.bind(this)),(0,r.effect)(this.#o.bind(this))}getOptions(){let{gains:e,normalLabel:t}=this.$props;return e().map(e=>({label:1===e||null===e?t:String(100*e)+"%",value:e.toString()}))}#a(){this.#n.value=this.#s()}#i(){let{normalLabel:e}=this.$props,{audioGain:t}=this.#e.$state,n=t();this.#t?.hint.set(1===n||null==n?e():String(100*n)+"%")}#o(){this.#t?.disable(this.disabled)}#s(){let{audioGain:e}=this.#e.$state;return e()?.toString()??"1"}#r(e,t){if(this.disabled)return;let n=+e;this.#e.remote.changeAudioGain(n,t),this.dispatch("change",{detail:n,trigger:t})}}let u=c.prototype;(0,r.prop)(u,"value"),(0,r.prop)(u,"disabled"),(0,r.method)(u,"getOptions");let d=(0,r.createReactComponent)(t.MediaPlayerInstance,{events:["onAbort","onAudioTrackChange","onAudioTracksChange","onAutoPlay","onAutoPlayChange","onAutoPlayFail","onCanLoad","onCanPlay","onCanPlayThrough","onControlsChange","onDestroy","onDurationChange","onEmptied","onEnd","onEnded","onError","onFindMediaPlayer","onFullscreenChange","onFullscreenError","onLiveChange","onLiveEdgeChange","onLoadedData","onLoadedMetadata","onLoadStart","onLoopChange","onOrientationChange","onPause","onPictureInPictureChange","onPictureInPictureError","onPlay","onPlayFail","onPlaying","onPlaysInlineChange","onPosterChange","onProgress","onProviderChange","onProviderLoaderChange","onProviderSetup","onQualitiesChange","onQualityChange","onRateChange","onReplay","onSeeked","onSeeking","onSourceChange","onSourceChange","onStalled","onStarted","onStreamTypeChange","onSuspend","onTextTrackChange","onTextTracksChange","onTimeUpdate","onTitleChange","onVdsLog","onVideoPresentationChange","onVolumeChange","onWaiting"],eventsRegex:/^onHls/,domEventsRegex:/^onMedia/}),m=n.forwardRef(({aspectRatio:e,children:r,...a},i)=>n.createElement(d,{...a,src:a.src,ref:i,style:{aspectRatio:e,...a.style}},e=>n.createElement(t.Primitive.div,{...e},r)));m.displayName="MediaPlayer";let f=(0,r.createReactComponent)(t.MediaProviderInstance),h=n.forwardRef(({loaders:e=[],children:t,iframeProps:r,mediaProps:a,...i},o)=>{let s=n.useMemo(()=>e.map(e=>new e),e);return n.createElement(f,{...i,loaders:s,ref:o},(e,i)=>n.createElement("div",{...e},n.createElement(v,{provider:i,mediaProps:a,iframeProps:r}),t))});function v({provider:o,mediaProps:s,iframeProps:l}){let{sources:c,crossOrigin:u,poster:d,remotePlaybackInfo:m,nativeControls:f,viewType:h}=(0,r.useStateContext)(t.mediaState),{loader:v}=o.$state,{$provider:g,$providerSetup:y}=(0,a.useMediaContext)(),b=(0,r.useSignal)(c),_=(0,r.useSignal)(f),T=(0,r.useSignal)(u),k=(0,r.useSignal)(d),E=(0,r.useSignal)(v),S=(0,r.useSignal)(g),w=(0,r.useSignal)(y),x=(0,r.useSignal)(m),C=E?.mediaType(),I=(0,r.useSignal)(h),R=E?.name==="youtube",P=E?.name==="vimeo",N=E?.name==="remotion",A=E?.name==="google-cast",[L,O]=n.useState(""),[M,D]=n.useState(!1);return(n.useEffect(()=>{A&&!L&&e.A(859592).then(function(e){return e.chromecast}).then(e=>{O(e.default)})},[A]),n.useEffect(()=>{D(!0)},[]),A)?n.createElement("div",{className:"vds-google-cast",ref:e=>{o.load(e)}},n.createElement(i,{paths:L}),x?.deviceName?n.createElement("span",{className:"vds-google-cast-info"},"Google Cast on"," ",n.createElement("span",{className:"vds-google-cast-device-name"},x.deviceName)):null):N?n.createElement("div",{"data-remotion-canvas":!0},n.createElement("div",{"data-remotion-container":!0,ref:e=>{o.load(e)}},(0,t.isRemotionProvider)(S)&&w?n.createElement(S.render):null)):R||P?n.createElement(n.Fragment,null,n.createElement("iframe",{...l,className:(l?.className?`${l.className} `:"")+R?"vds-youtube":"vds-vimeo",suppressHydrationWarning:!0,tabIndex:_?void 0:-1,"aria-hidden":"true","data-no-controls":_?void 0:"",ref(e){o.load(e)}}),_||"audio"===I?null:n.createElement("div",{className:"vds-blocker"})):C?n.createElement("audio"===C?"audio":"video",{...s,controls:!!_||null,crossOrigin:"boolean"==typeof T?"":T,poster:"video"===C&&_&&k?k:null,suppressHydrationWarning:!0,children:M?null:b.map(({src:e,type:t})=>(0,r.isString)(e)?n.createElement("source",{src:e,type:"?"!==t?t:void 0,key:e}):null),ref(e){o.load(e)}}):null}h.displayName="MediaProvider",v.displayName="MediaOutlet";let g=(0,r.createReactComponent)(t.ToggleButtonInstance);n.forwardRef(({children:e,...a},i)=>n.createElement(g,{...a},a=>n.createElement(t.Primitive.button,{...a,ref:(0,r.composeRefs)(a.ref,i)},e))).displayName="ToggleButton";let y=(0,r.createReactComponent)(t.PosterInstance);n.forwardRef(({children:e,...t},a)=>n.createElement(y,{src:t.asChild&&n.isValidElement(e)?e.props.src:void 0,...t},(t,i)=>n.createElement(b,{...t,instance:i,ref:(0,r.composeRefs)(t.ref,a)},e))).displayName="Poster";let b=n.forwardRef(({instance:e,children:a,...i},o)=>{let{src:s,img:l,alt:c,crossOrigin:u,hidden:d}=e.$state,m=(0,r.useSignal)(s),f=(0,r.useSignal)(c),h=(0,r.useSignal)(u),v=(0,r.useSignal)(d);return n.createElement(t.Primitive.img,{...i,src:m||void 0,alt:f||void 0,crossOrigin:h||void 0,ref:(0,r.composeRefs)(l.set,o),style:{display:v?"none":void 0}},a)});b.displayName="PosterImg",n.forwardRef(({children:e,...r},a)=>n.createElement(t.Primitive.div,{translate:"yes","aria-live":"off","aria-atomic":"true",...r,ref:a},e)).displayName="Caption",n.forwardRef((e,r)=>{let a=(0,t.useMediaState)("textTrack"),[i,o]=n.useState();return n.useEffect(()=>{if(a)return a.addEventListener("cue-change",e),()=>{a.removeEventListener("cue-change",e),o(void 0)};function e(){o(a?.activeCues[0])}},[a]),n.createElement(t.Primitive.span,{...e,"data-part":"cue",dangerouslySetInnerHTML:{__html:i?.text||""},ref:r})}).displayName="CaptionText",e.s(["MediaPlayer",()=>m,"MediaProvider",()=>h],789022)},419157,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(65259);let a=e=>{let r,a,i,o,s,l,c,u=(0,n.c)(10),{className:d,size:m}=e,f=void 0===m?100:m;return u[0]!==f?(r={width:f,height:f},u[0]=f,u[1]=r):r=u[1],u[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("rect",{width:"421",height:"208",x:"12.012",y:"320.665",fill:"#fff",stroke:"#1D3934",strokeWidth:"17",rx:"104",transform:"rotate(-47.15 12.012 320.665)"}),i=(0,t.jsx)("path",{fill:"#5FCB88",fillRule:"evenodd",d:"M76.508 238.638c-42.254 45.551-39.581 116.732 5.97 158.987 45.552 42.254 116.733 39.581 158.987-5.97l77.189-83.212-164.957-153.017-77.189 83.212Zm41.81 43.876a4 4 0 0 0-6.214-5.039l-4.734 5.839a4 4 0 1 0 6.214 5.038l4.734-5.838Zm-11.699 22.743a4 4 0 1 0-7.864-1.468c-2.181 11.687-1.381 23.307 2.031 33.748a4 4 0 0 0 7.604-2.485c-2.984-9.132-3.713-19.39-1.771-29.795Zm9.669 46.672a4 4 0 0 0-5.742 5.571l6.625 6.827a4 4 0 0 0 5.742-5.571l-6.625-6.827Z",clipRule:"evenodd"}),o=(0,t.jsx)("path",{fill:"#629393",fillOpacity:".4",fillRule:"evenodd",d:"M46.613 309.777c5.149 16.929 14.712 32.762 28.62 45.663 41.908 38.875 107.395 36.416 146.269-5.492L348.676 212.85c38.874-41.907 36.415-107.393-5.493-146.268-9.286-8.614-19.73-15.198-30.786-19.774 24.491 1.852 48.549 11.7 67.955 29.7 45.551 42.255 48.224 113.436 5.97 158.987l-144.857 156.16c-42.254 45.551-113.435 48.224-158.987 5.97-25.305-23.474-37.377-55.874-35.865-87.848Z",clipRule:"evenodd"}),s=(0,t.jsx)("path",{stroke:"#1D3934",strokeWidth:"17",d:"m380.09 229.715-71.408 76.98-152.494-141.456 71.408-76.98c39.062-42.11 104.865-44.58 146.975-5.519 42.11 39.062 44.581 104.865 5.519 146.975Z"}),u[2]=a,u[3]=i,u[4]=o,u[5]=s):(a=u[2],i=u[3],o=u[4],s=u[5]),u[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 463 475",fill:"none",children:[a,i,o,s,(0,t.jsx)("mask",{id:"a",fill:"#fff",children:(0,t.jsx)("path",{d:"M82.478 397.625c-45.551-42.255-48.224-113.436-5.97-158.987l67.668-72.948 164.957 153.017-67.668 72.948c-42.254 45.551-113.435 48.224-158.987 5.97Z"})}),(0,t.jsx)("path",{fill:"#1D3934",d:"M70.917 410.088c-52.435-48.639-55.511-130.577-6.872-183.012l67.668-72.947 24.926 23.122-67.667 72.948c-35.87 38.668-33.6 99.093 5.068 134.962l-23.123 24.927Zm250.679-79.82-67.667 72.948c-48.64 52.435-130.577 55.512-183.012 6.872l23.123-24.927c38.668 35.87 99.093 33.601 134.962-5.068l67.668-72.947 24.926 23.122Zm-67.667 72.948c-48.64 52.435-130.577 55.512-183.012 6.872-52.435-48.639-55.511-130.577-6.872-183.012l24.927 23.123c-35.87 38.668-33.6 99.093 5.068 134.962 38.668 35.87 99.093 33.601 134.962-5.068l24.927 23.123ZM144.176 165.69l164.957 153.017L144.176 165.69Z",mask:"url(#a)"})]}),u[6]=l):l=u[6],u[7]!==d||u[8]!==r?(c=(0,t.jsx)("div",{className:d,style:r,children:l}),u[7]=d,u[8]=r,u[9]=c):c=u[9],c};e.s(["PumpPillLoader",0,e=>{let i,o,s,l,c,u,d=(0,n.c)(12),{logoSize:m,glowSize:f}=e,h=void 0===m?60:m,v=void 0===f?80:f,g=`${v}px`,y=`${v}px`;return d[0]!==g||d[1]!==y?(i={height:g,width:y},d[0]=g,d[1]=y,d[2]=i):i=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(o={scale:[1,1.2,1],opacity:[.15,.25,.15]},s={duration:2,repeat:1/0,ease:"easeInOut"},d[3]=o,d[4]=s):(o=d[3],s=d[4]),d[5]!==i?(l=(0,t.jsx)(r.motion.div,{className:"absolute rounded-full bg-green-400 opacity-20 blur-lg",style:i,animate:o,transition:s}),d[5]=i,d[6]=l):l=d[6],d[7]!==h?(c=(0,t.jsx)("div",{className:"z-10 animate-spin [animation-duration:1.5s]",children:(0,t.jsx)(a,{size:h})}),d[7]=h,d[8]=c):c=d[8],d[9]!==l||d[10]!==c?(u=(0,t.jsxs)("div",{className:"relative flex items-center justify-center",children:[l,c]}),d[9]=l,d[10]=c,d[11]=u):u=d[11],u}],419157)},480085,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(419157);e.s(["PlayerLoader",0,e=>{let a,i=(0,n.c)(2),{loaderType:o}=e;if("progress-bar"===(void 0===o?"spinner":o)){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-10 h-1 w-full overflow-hidden bg-bg-accent/50 transition-opacity",children:(0,t.jsx)("div",{className:"h-full w-full origin-left animate-indeterminate-progress-bar bg-bg-accent"})}),i[0]=e):e=i[0],e}return i[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("div",{className:"absolute inset-0 z-20 flex aspect-video h-full items-center justify-center bg-black/50",children:(0,t.jsx)(r.PumpPillLoader,{logoSize:32,glowSize:48})}),i[1]=a):a=i[1],a}])},884614,e=>{"use strict";var t=e.i(281675),n=e.i(77962),r=e.i(517770),a=e.i(607079);let i=[.25,.5,.75,1,1.25,1.5,1.75,2];class o extends a.Component{static props={normalLabel:"Normal",rates:i};#e;#t;#n;get value(){return this.#n.value}get disabled(){let{rates:e}=this.$props,{canSetPlaybackRate:t}=this.#e.$state;return!t()||0===e().length}constructor(){super(),this.#n=new n.RadioGroupController,this.#n.onValueChange=this.#r.bind(this)}onSetup(){this.#e=(0,n.useMediaContext)(),(0,a.hasProvidedContext)(n.menuContext)&&(this.#t=(0,a.useContext)(n.menuContext))}onConnect(e){(0,a.effect)(this.#a.bind(this)),(0,a.effect)(this.#i.bind(this)),(0,a.effect)(this.#o.bind(this))}getOptions(){let{rates:e,normalLabel:t}=this.$props;return e().map(e=>({label:1===e?t:e+"",value:e.toString()}))}#a(){this.#n.value=this.#s()}#i(){let{normalLabel:e}=this.$props,{playbackRate:t}=this.#e.$state,n=t();this.#t?.hint.set(1===n?e():n+"")}#o(){this.#t?.disable(this.disabled)}#s(){let{playbackRate:e}=this.#e.$state;return e().toString()}#r(e,t){if(this.disabled)return;let n=+e;this.#e.remote.changePlaybackRate(n,t),this.dispatch("change",{detail:n,trigger:t})}}let s=o.prototype;function l(e){let a=(0,r.useMediaContext)(),i=t.useRef(null);return i.current||(i.current=new n.MediaRemoteControl),t.useEffect(()=>{let t=e&&"current"in e?e.current:e,r=t instanceof n.MediaPlayerInstance?t:a?.player;i.current.setPlayer(r??null),i.current.setTarget(t??null)},[a,e&&"current"in e?e.current:e]),i.current}(0,a.prop)(s,"value"),(0,a.prop)(s,"disabled"),(0,a.method)(s,"getOptions"),e.s(["useMediaRemote",()=>l])},305088,374930,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(430257),a=e.i(517770),i=e.i(789022),o=e.i(264458),s=e.i(281675),l=e.i(480085),c=e.i(322315),u=e.i(782471),d=e.i(884614),m=e.i(77962);let f=(e,t)=>{let r,a,i=(0,n.c)(4),[o,l]=(0,s.useState)(!1);return i[0]!==t||i[1]!==e?(r=()=>{if(!e.current)return;let n=new IntersectionObserver(e=>{let[t]=e;l(t.isIntersecting)},t),r=e.current;return r&&n.observe(r),()=>{r&&n.unobserve(r)}},a=[e,t],i[0]=t,i[1]=e,i[2]=r,i[3]=a):(r=i[2],a=i[3]),(0,s.useEffect)(r,a),o};e.s(["useIsVisible",0,f],374930);let h=e=>((e=>{let t,r,a,i,o,l,h,v,g=(0,n.c)(11),{containerRef:y,threshold:b}=e,_=void 0===b?0:b,T=(0,u.useLaunchDarklyFlag)(c.LaunchDarklyFlag.LIVESTREAM_PIP_PLAYER);g[0]!==_?(t={threshold:_},g[0]=_,g[1]=t):t=g[1];let k=f(y,t),E=(0,d.useMediaRemote)(),S=(0,m.useMediaState)("pictureInPicture"),w=(0,m.useMediaState)("canPictureInPicture"),x=(0,s.useRef)(!1),{hasGestureRef:C,resetGesture:I}=(h=(0,n.c)(3),v=(0,s.useRef)(!1),h[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{let e=()=>{v.current=!0},t=["click","keydown","touchend","pointerup"];return t.forEach(t=>document.addEventListener(t,e)),()=>{t.forEach(t=>document.removeEventListener(t,e))}},o=[],h[0]=i,h[1]=o):(i=h[0],o=h[1]),(0,s.useEffect)(i,o),h[2]===Symbol.for("react.memo_cache_sentinel")?(l={hasGestureRef:v,resetGesture:()=>{v.current=!1}},h[2]=l):l=h[2],l);return g[2]!==w||g[3]!==C||g[4]!==S||g[5]!==T||g[6]!==k||g[7]!==E||g[8]!==I?(r=()=>{if(w&&T){if(!k&&!S&&C.current){x.current=!0,E.enterPictureInPicture();return}if(k&&S&&x.current){x.current=!1,E.exitPictureInPicture(),I();return}if(!S){x.current=!1;return}}},a=[k,S,w,E,C,I,T],g[2]=w,g[3]=C,g[4]=S,g[5]=T,g[6]=k,g[7]=E,g[8]=I,g[9]=r,g[10]=a):(r=g[9],a=g[10]),(0,s.useEffect)(r,a)})(e),null);var v=e.i(157633);let g=e=>{let r,a,i,o=(0,n.c)(4),{onClick:s}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(v.IconVolumeFull,{size:32,className:"text-white"}),a=(0,t.jsx)("span",{className:"text-lg font-semibold text-white",children:"Click to unmute"}),o[0]=r,o[1]=a):(r=o[0],a=o[1]),o[2]!==s?(i=(0,t.jsxs)("div",{onClick:s,className:"pointer-events-auto absolute inset-0 z-20 flex cursor-pointer flex-col items-center justify-center gap-3 bg-black/30 transition-opacity hover:bg-black/10",children:[r,a]}),o[2]=s,o[3]=i):i=o[3],i};var y=Object.create,b=Object.defineProperty,_=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,k=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,S=function(e,t){return function(){return e&&(t=e(e=0)),t}},w=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},x=function(e,t,n,r){if(t&&"object"==typeof t||"function"==typeof t)for(var a,i=T(t),o=0,s=i.length;o<s;o++)a=i[o],E.call(e,a)||a===n||b(e,a,{get:(function(e){return t[e]}).bind(null,a),enumerable:!(r=_(t,a))||r.enumerable});return e},C=function(e,t,n){return n=null!=e?y(k(e)):{},x(!t&&e&&e.__esModule?n:b(n,"default",{value:e,enumerable:!0}),e)},I=w(function(t,n){n.exports="undefined"!=typeof window?window:e.g});function R(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):R(e,t)}var P=S(function(){P()});function N(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var A=S(function(){}),L=w(function(e,t){var n=Array.prototype.slice;t.exports=function(e,t){for(("length"in e)||(e=[e]),e=n.call(e);e.length;){var r=e.shift(),a=t(r);if(a)return a;r.childNodes&&r.childNodes.length&&(e=n.call(r.childNodes).concat(e))}}}),O=w(function(e,t){function n(e,t){if(!R(this,n))return new n(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}P(),t.exports=n,n.prototype.nodeType=8,n.prototype.nodeName="#comment",n.prototype.toString=function(){return"[object Comment]"}}),M=w(function(e,t){function n(e,t){if(!R(this,n))return new n(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}P(),t.exports=n,n.prototype.type="DOMTextNode",n.prototype.nodeType=3,n.prototype.nodeName="#text",n.prototype.toString=function(){return this.data},n.prototype.replaceData=function(e,t,n){var r=this.data,a=r.substring(0,e),i=r.substring(e+t,r.length);this.data=a+n+i,this.length=this.data.length}}),D=w(function(e,t){t.exports=function(e){var t=this,n=e.type;e.target||(e.target=t),t.listeners||(t.listeners={});var r=t.listeners[n];if(r)return r.forEach(function(n){e.currentTarget=t,"function"==typeof n?n(e):n.handleEvent(e)});t.parentNode&&t.parentNode.dispatchEvent(e)}}),j=w(function(e,t){t.exports=function(e,t){this.listeners||(this.listeners={}),this.listeners[e]||(this.listeners[e]=[]),-1===this.listeners[e].indexOf(t)&&this.listeners[e].push(t)}}),U=w(function(e,t){t.exports=function(e,t){if(this.listeners&&this.listeners[e]){var n=this.listeners[e],r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}),F=w(function(e,t){A(),t.exports=function e(t){switch(t.nodeType){case 3:return a(t.data);case 8:return"<!--"+t.data+"-->";default:var i,o,s;return o=[],s=(i=t).tagName,"http://www.w3.org/1999/xhtml"===i.namespaceURI&&(s=s.toLowerCase()),o.push("<"+s+function(e){var t=[];for(var n in e)(function(e,t){var n=N(e[t]);return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===n||"boolean"===n||"number"===n)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t})(e,n)&&t.push({name:n,value:e[n]});for(var a in e._attributes)for(var i in e._attributes[a]){var o=e._attributes[a][i],s=(o.prefix?o.prefix+":":"")+i;t.push({name:s,value:o.value})}return e.className&&t.push({name:"class",value:e.className}),t.length?r(t):""}(i)+function(e){var t=e.dataset,n=[];for(var a in t)n.push({name:"data-"+a,value:t[a]});return n.length?r(n):""}(i)),n.indexOf(s)>-1?o.push(" />"):(o.push(">"),i.childNodes.length?o.push.apply(o,i.childNodes.map(e)):i.textContent||i.innerText?o.push(a(i.textContent||i.innerText)):i.innerHTML&&o.push(i.innerHTML),o.push("</"+s+">")),o.join("")}};var n=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function r(e){var t=[];return e.forEach(function(e){var n=e.name,r=e.value;"style"===n&&(r=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach(function(n){var r=e[n];n=n.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),t+=n+":"+r+";"}),t}(r)),t.push(n+'="'+a(r).replace(/"/g,"&quot;")+'"')}),t.length?" "+t.join(" "):""}function a(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}),H=w(function(e,t){P();var n=L(),r=D(),a=j(),i=U(),o=F(),s="http://www.w3.org/1999/xhtml";function l(e,t,n){if(!R(this,l))return new l(e);var r=void 0===n?s:n||null;this.tagName=r===s?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=r,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}t.exports=l,l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},l.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[n]=e,e.parentNode=this,t},l.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},l.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=null==t?-1:this.childNodes.indexOf(t);return n>-1?this.childNodes.splice(n,0,e):this.childNodes.push(e),e.parentNode=this,e},l.prototype.setAttributeNS=function(e,t,n){var r=null,a=t,i=t.indexOf(":");(i>-1&&(r=t.substr(0,i),a=t.substr(i+1)),"INPUT"===this.tagName&&"type"===t)?this.type=n:(this._attributes[e]||(this._attributes[e]={}))[a]={value:n,prefix:r}},l.prototype.getAttributeNS=function(e,t){var n=this._attributes[e],r=n&&n[t]&&n[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof r?null:r},l.prototype.removeAttributeNS=function(e,t){var n=this._attributes[e];n&&delete n[t]},l.prototype.hasAttributeNS=function(e,t){var n=this._attributes[e];return!!n&&t in n},l.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},l.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},l.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},l.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},l.prototype.removeEventListener=i,l.prototype.addEventListener=a,l.prototype.dispatchEvent=r,l.prototype.focus=function(){},l.prototype.toString=function(){return o(this)},l.prototype.getElementsByClassName=function(e){var t=e.split(" "),r=[];return n(this,function(e){if(1===e.nodeType){var n=(e.className||"").split(" ");t.every(function(e){return -1!==n.indexOf(e)})&&r.push(e)}}),r},l.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return n(this.childNodes,function(n){1===n.nodeType&&("*"===e||n.tagName.toLowerCase()===e)&&t.push(n)}),t},l.prototype.contains=function(e){return n(this,function(t){return e===t})||!1}}),B=w(function(e,t){P();var n=H();function r(e){if(!R(this,r))return new r;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}t.exports=r,r.prototype.type="DocumentFragment",r.prototype.nodeType=11,r.prototype.nodeName="#document-fragment",r.prototype.appendChild=n.prototype.appendChild,r.prototype.replaceChild=n.prototype.replaceChild,r.prototype.removeChild=n.prototype.removeChild,r.prototype.toString=function(){return this.childNodes.map(function(e){return String(e)}).join("")}}),V=w(function(e,t){function n(e){}t.exports=n,n.prototype.initEvent=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},n.prototype.preventDefault=function(){}}),q=w(function(e,t){P();var n=L(),r=O(),a=M(),i=H(),o=B(),s=V(),l=D(),c=j(),u=U();function d(){if(!R(this,d))return new d;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}t.exports=d;var m=d.prototype;m.createTextNode=function(e){return new a(e,this)},m.createElementNS=function(e,t){return new i(t,this,null===e?null:String(e))},m.createElement=function(e){return new i(e,this)},m.createDocumentFragment=function(){return new o(this)},m.createEvent=function(e){return new s(e)},m.createComment=function(e){return new r(e,this)},m.getElementById=function(e){return e=String(e),n(this.childNodes,function(t){if(String(t.id)===e)return t})||null},m.getElementsByClassName=i.prototype.getElementsByClassName,m.getElementsByTagName=i.prototype.getElementsByTagName,m.contains=i.prototype.contains,m.removeEventListener=u,m.addEventListener=c,m.dispatchEvent=l}),G=w(function(e,t){t.exports=new(q())}),z=w(function(t,n){var r,a=e.g,i=G();"undefined"!=typeof document?r=document:(r=a["__GLOBAL_DOCUMENT_CACHE@4"])||(r=a["__GLOBAL_DOCUMENT_CACHE@4"]=i),n.exports=r});function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!(t&&i.length===t));o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||W(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q=C(I()),Y=C(I()),X=C(I()),J=function(){var e=X.default.performance,t=e&&e.timing,n=t&&t.navigationStart;return Math.round("number"==typeof n&&"function"==typeof e.now?n+e.now():Date.now())},Z=function(){if("function"==typeof(null==(e=Y.default.crypto)?void 0:e.getRandomValues)){n=new Uint8Array(32),Y.default.crypto.getRandomValues(n);for(var e,t,n,r=0;r<32;r++)n[r]=n[r]%16}else{n=[];for(var a=0;a<32;a++)n[a]=16*Math.random()|0}var i=0;t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t="x"===e?n[i]:3&n[i]|8;return i++,t.toString(16)});var o=J(),s=null==o?void 0:o.toString(16).substring(3);return s?t.substring(0,28)+s:t},ee=function(){return("000000"+(0x81bf1000*Math.random()|0).toString(36)).slice(-6)},et=function(e){var t;if(e&&void 0!==e.nodeName)return e.muxId||(e.muxId=ee()),e.muxId;try{t=document.querySelector(e)}catch(e){}return t&&!t.muxId&&(t.muxId=e),(null==t?void 0:t.muxId)||e},en=function(e){e&&void 0!==e.nodeName?e=et(t=e):t=document.querySelector(e);var t,n=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,n]};function er(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ea=function(e){var t,n,r,a,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=e?[console,e]:[console],l=(t=console.trace).bind.apply(t,er(s)),c=(n=console.info).bind.apply(n,er(s)),u=(r=console.debug).bind.apply(r,er(s)),d=(a=console.warn).bind.apply(a,er(s)),m=(i=console.error).bind.apply(i,er(s)),f=o;return{trace:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(f>0))return l.apply(void 0,er(t))},debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(f>1))return u.apply(void 0,er(t))},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(f>2))return c.apply(void 0,er(t))},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(f>3))return d.apply(void 0,er(t))},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(f>4))return m.apply(void 0,er(t))},get level(){return f},set level(p){p!==this.level&&(f=null!=p?p:o)}}}("[mux]"),ei=C(I());function eo(){return"1"===(ei.default.doNotTrack||ei.default.navigator&&ei.default.navigator.doNotTrack)}function es(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function el(e,t){if(!R(e,t))throw TypeError("Cannot call a class as a function")}function ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eu(e,t,n){return t&&ec(e.prototype,t),n&&ec(e,n),e}function ed(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function em(e){return(em=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ep(e,t,n){return(ep="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=em(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n||e):a.value}})(e,t,n||e)}function ef(e,t){return(ef=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}P(),A();var eh=function(e){return ev(e)[0]},ev=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,n=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return n&&(t=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,t]},eg=C(I()),ey=function(){var e=eg.default.performance;return void 0!==(e&&e.timing)},eb=function(){var e=eg.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},e_=function(){var e=eg.default.performance,t=e&&e.timing;return t&&t.navigationStart};function eT(e,t,n){n=void 0===n?1:n,e[t]=e[t]||0,e[t]+=n}function ek(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ed(e,t,n[t])})}return e}function eE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var eS=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],ew=["x-cdn","content-type"].concat(eS);function ex(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach(function(e){if(e){var n=e.split(": "),r=n.shift();r&&(ew.indexOf(r.toLowerCase())>=0||0===r.toLowerCase().indexOf("x-litix-"))&&(t[r]=n.join(": "))}}),t}function eC(e){if(e){var t=eS.find(function(t){return void 0!==e[t]});return t?e[t]:void 0}}var eI=function(e){var t={};for(var n in e){var r=e[n];-1!==r["DATA-ID"].search("io.litix.data.")&&(t[r["DATA-ID"].replace("io.litix.data.","")]=r.VALUE)}return t},eR=function(e){if(!e)return{};var t=e_(),n=e.loading,r=n?n.start:e.trequest,a=n?n.first:e.tfirst,i=n?n.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+r),responseStart:Math.round(t+a),responseEnd:Math.round(t+i)}},eP=function(e){if(!(!e||"function"!=typeof e.getAllResponseHeaders))return ex(e.getAllResponseHeaders())},eN=function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=arguments.length>4?arguments[4]:void 0,a=e.log,i=e.utils.secondsToMs,o=function(e){var t,n=parseInt(r.version);return 1===n&&null!==e.programDateTime&&(t=e.programDateTime),0===n&&null!==e.pdt&&(t=e.pdt),t};if(!ey())return void a.warn("performance timing not supported. Not tracking HLS.js.");var s=function(n,r){return e.emit(t,n,r)},l=function(e,t){var n=t.levels,r=t.audioTracks,a=t.url,i=t.stats,o=t.networkDetails,l=t.sessionData,c={},u={};n.forEach(function(e,t){c[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}}),r.forEach(function(e,t){u[t]={name:e.name,language:e.lang,bitrate:e.bitrate}});var d=eR(i),m=d.bytesLoaded,f=d.requestStart,h=d.responseStart,v=d.responseEnd;s("requestcompleted",eE(ek({},eI(l)),{request_event_type:e,request_bytes_loaded:m,request_start:f,request_response_start:h,request_response_end:v,request_type:"manifest",request_hostname:eh(a),request_response_headers:eP(o),request_rendition_lists:{media:c,audio:u,video:{}}}))};n.on(r.Events.MANIFEST_LOADED,l);var c=function(e,t){var n=t.details,r=t.level,a=t.networkDetails,l=eR(t.stats),c=l.bytesLoaded,u=l.requestStart,d=l.responseStart,m=l.responseEnd,f=n.fragments[n.fragments.length-1],h=o(f)+i(f.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:c,request_start:u,request_response_start:d,request_response_end:m,request_current_level:r,request_type:"manifest",request_hostname:eh(n.url),request_response_headers:eP(a),video_holdback:n.holdBack&&i(n.holdBack),video_part_holdback:n.partHoldBack&&i(n.partHoldBack),video_part_target_duration:n.partTarget&&i(n.partTarget),video_target_duration:n.targetduration&&i(n.targetduration),video_source_is_live:n.live,player_manifest_newest_program_time:isNaN(h)?void 0:h})};n.on(r.Events.LEVEL_LOADED,c);var u=function(e,t){var n=t.details,r=t.networkDetails,a=eR(t.stats);s("requestcompleted",{request_event_type:e,request_bytes_loaded:a.bytesLoaded,request_start:a.requestStart,request_response_start:a.responseStart,request_response_end:a.responseEnd,request_type:"manifest",request_hostname:eh(n.url),request_response_headers:eP(r)})};n.on(r.Events.AUDIO_TRACK_LOADED,u);var d=function(e,t){var r=t.stats,a=t.networkDetails,i=t.frag,o=eR(r=r||i.stats),l=o.bytesLoaded,c=o.requestStart,u=o.responseStart,d=o.responseEnd,m=a?eP(a):void 0,f={request_event_type:e,request_bytes_loaded:l,request_start:c,request_response_start:u,request_response_end:d,request_hostname:a?eh(a.responseURL):void 0,request_id:m?eC(m):void 0,request_response_headers:m,request_media_duration:i.duration,request_url:null==a?void 0:a.responseURL};"main"===i.type?(f.request_type="media",f.request_current_level=i.level,f.request_video_width=(n.levels[i.level]||{}).width,f.request_video_height=(n.levels[i.level]||{}).height,f.request_labeled_bitrate=(n.levels[i.level]||{}).bitrate):f.request_type=i.type,s("requestcompleted",f)};n.on(r.Events.FRAG_LOADED,d);var m=function(e,t){var n=t.frag,r=n.start;s("fragmentchange",{currentFragmentPDT:o(n),currentFragmentStart:i(r)})};n.on(r.Events.FRAG_CHANGED,m);var f=function(e,t){var n,a=t.type,i=t.details,o=t.response,l=t.fatal,c=t.frag,u=t.networkDetails,d=(null==c?void 0:c.url)||t.url||"",m=u?eP(u):void 0;(i===r.ErrorDetails.MANIFEST_LOAD_ERROR||i===r.ErrorDetails.MANIFEST_LOAD_TIMEOUT||i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT||i===r.ErrorDetails.LEVEL_LOAD_ERROR||i===r.ErrorDetails.LEVEL_LOAD_TIMEOUT||i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT)&&s("requestfailed",{request_error:i,request_url:d,request_hostname:eh(d),request_id:m?eC(m):void 0,request_type:i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==o?void 0:o.code,request_error_text:null==o?void 0:o.text}),l&&s("error",{player_error_code:a,player_error_message:i,player_error_context:"".concat(d?"url: ".concat(d,"\n"):"")+"".concat(o&&(o.code||o.text)?"response: ".concat(o.code,", ").concat(o.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null==(n=t.err)?void 0:n.message,"\n"):"")})};n.on(r.Events.ERROR,f);var h=function(e,t){var n=t.frag,r=n&&n._url||"";s("requestcanceled",{request_event_type:e,request_url:r,request_type:"media",request_hostname:eh(r)})};n.on(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,h);var v=function(e,t){var r=t.level,i=n.levels[r];if(i&&i.attrs&&i.attrs.BANDWIDTH){var o,l=i.attrs.BANDWIDTH,c=parseFloat(i.attrs["FRAME-RATE"]);isNaN(c)||(o=c),l?s("renditionchange",{video_source_fps:o,video_source_bitrate:l,video_source_width:i.width,video_source_height:i.height,video_source_rendition_name:i.name,video_source_codec:null==i?void 0:i.videoCodec}):a.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};n.on(r.Events.LEVEL_SWITCHED,v),n._stopMuxMonitor=function(){n.off(r.Events.MANIFEST_LOADED,l),n.off(r.Events.LEVEL_LOADED,c),n.off(r.Events.AUDIO_TRACK_LOADED,u),n.off(r.Events.FRAG_LOADED,d),n.off(r.Events.FRAG_CHANGED,m),n.off(r.Events.ERROR,f),n.off(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,h),n.off(r.Events.LEVEL_SWITCHED,v),n.off(r.Events.DESTROYING,n._stopMuxMonitor),delete n._stopMuxMonitor},n.on(r.Events.DESTROYING,n._stopMuxMonitor)},eA=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()},eL=function(e,t){if(!e||!e.requestEndDate)return{};var n,r=eh(e.url),a=e.url,i=e.bytesLoaded,o=new Date(e.requestStartDate).getTime(),s=new Date(e.firstByteDate).getTime(),l=new Date(e.requestEndDate).getTime(),c=isNaN(e.duration)?0:e.duration,u="function"==typeof t.getMetricsFor?t.getMetricsFor(e.mediaType).HttpList:t.getDashMetrics().getHttpRequests(e.mediaType);u.length>0&&(n=ex(u[u.length-1]._responseHeaders||""));var d=n?eC(n):void 0;return{requestStart:o,requestResponseStart:s,requestResponseEnd:l,requestBytesLoaded:i,requestResponseHeaders:n,requestMediaDuration:c,requestHostname:r,requestUrl:a,requestId:d}},eO=function(e,t){var n=t.getQualityFor(e),r=t.getCurrentTrackFor(e).bitrateList;return r?{currentLevel:n,renditionWidth:r[n].width||null,renditionHeight:r[n].height||null,renditionBitrate:r[n].bandwidth}:{}},eM=function(e){var t;return null==(t=e.match(/.*codecs\*?="(.*)"/))?void 0:t[1]},eD=function(e){try{var t,n;return null==(n=e.getVersion)||null==(t=n.call(e))?void 0:t.split(".").map(function(e){return parseInt(e)})[0]}catch(e){return!1}},ej=function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=e.log;if(!n||!n.on)return void r.warn("Invalid dash.js player reference. Monitoring blocked.");var a=eD(n),i=function(n,r){return e.emit(t,n,r)},o=function(e){var t=e.type,n=(e.data||{}).url;i("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:eh(n),request_url:n})};n.on("manifestLoaded",o);var s={},l=function(e){if("function"!=typeof e.getRequests)return null;var t=e.getRequests({state:"executed"});return 0===t.length?null:t[t.length-1]},c=function(e){var t=e.type,r=e.chunk,a=e.request,o=(r||{}).mediaInfo||{},l=o.type,c=o.bitrateList,u={};(c=c||[]).forEach(function(e,t){u[t]={},u[t].width=e.width,u[t].height=e.height,u[t].bitrate=e.bandwidth,u[t].attrs={}}),"video"===l?s.video=u:"audio"===l?s.audio=u:s.media=u;var d=eL(a,n),m=d.requestStart,f=d.requestResponseStart,h=d.requestResponseEnd,v=d.requestResponseHeaders,g=d.requestMediaDuration,y=d.requestHostname,b=d.requestUrl;i("requestcompleted",{request_event_type:t,request_start:m,request_response_start:f,request_response_end:h,request_bytes_loaded:-1,request_type:l+"_init",request_response_headers:v,request_hostname:y,request_id:d.requestId,request_url:b,request_media_duration:g,request_rendition_lists:s})};a>=4?n.on("initFragmentLoaded",c):n.on("initFragmentLoaded",function(e){var t=e.type,n=e.fragmentModel,r=e.chunk;c({type:t,request:l(n),chunk:r})});var u=function(e){var t=e.type,r=e.chunk,a=e.request,o=r||{},s=o.mediaInfo,l=o.start,c=(s||{}).type,u=eL(a,n),d=u.requestStart,m=u.requestResponseStart,f=u.requestResponseEnd,h=u.requestBytesLoaded,v=u.requestResponseHeaders,g=u.requestMediaDuration,y=u.requestHostname,b=u.requestUrl,_=u.requestId,T=eO(c,n),k=T.currentLevel,E=T.renditionWidth,S=T.renditionHeight;i("requestcompleted",{request_event_type:t,request_start:d,request_response_start:m,request_response_end:f,request_bytes_loaded:h,request_type:c,request_response_headers:v,request_hostname:y,request_id:_,request_url:b,request_media_start_time:l,request_media_duration:g,request_current_level:k,request_labeled_bitrate:T.renditionBitrate,request_video_width:E,request_video_height:S})};a>=4?n.on("mediaFragmentLoaded",u):n.on("mediaFragmentLoaded",function(e){var t=e.type,n=e.fragmentModel,r=e.chunk;u({type:t,request:l(n),chunk:r})});var d={video:void 0,audio:void 0,totalBitrate:void 0},m=function(){if(d.video&&"number"==typeof d.video.bitrate){if(!(d.video.width&&d.video.height))return void r.warn("have bitrate info for video but missing width/height");var e=d.video.bitrate;if(d.audio&&"number"==typeof d.audio.bitrate&&(e+=d.audio.bitrate),e!==d.totalBitrate)return d.totalBitrate=e,{video_source_bitrate:e,video_source_height:d.video.height,video_source_width:d.video.width,video_source_codec:eM(d.video.codec)}}},f=function(e,t,a){if("number"!=typeof e.newQuality)return void r.warn("missing evt.newQuality in qualityChangeRendered event",e);var o=e.mediaType;if("audio"===o||"video"===o){var s=n.getBitrateInfoListFor(o).find(function(t){return t.qualityIndex===e.newQuality});if(!(s&&"number"==typeof s.bitrate))return void r.warn("missing bitrate info for ".concat(o));d[o]=eE(ek({},s),{codec:n.getCurrentTrackFor(o).codec});var l=m();l&&i("renditionchange",l)}};n.on("qualityChangeRendered",f);var h=function(e){var t=e.request,n=e.mediaType;i("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:n,request_hostname:eh(t.url)})};n.on("fragmentLoadingAbandoned",h);var v=function(e){var t,n,r=e.error,a=(null==r||null==(t=r.data)?void 0:t.request)||{},o=(null==r||null==(n=r.data)?void 0:n.response)||{};(null==r?void 0:r.code)===27&&i("requestfailed",{request_error:a.type+"_"+a.action,request_url:a.url,request_hostname:eh(a.url),request_type:a.mediaType,request_error_code:o.status,request_error_text:o.statusText});var s="".concat(null!=a&&a.url?"url: ".concat(a.url,"\n"):"")+"".concat(null!=o&&o.status||null!=o&&o.statusText?"response: ".concat(null==o?void 0:o.status,", ").concat(null==o?void 0:o.statusText,"\n"):"");i("error",{player_error_code:null==r?void 0:r.code,player_error_message:null==r?void 0:r.message,player_error_context:s})};n.on("error",v),n._stopMuxMonitor=function(){n.off("manifestLoaded",o),n.off("initFragmentLoaded",c),n.off("mediaFragmentLoaded",u),n.off("qualityChangeRendered",f),n.off("error",v),n.off("fragmentLoadingAbandoned",h),delete n._stopMuxMonitor}},eU=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()},eF=0,eH=function(){function e(){el(this,e),ed(this,"_listeners",void 0)}return eu(e,[{key:"on",value:function(e,t,n){return t._eventEmitterGuid=t._eventEmitterGuid||++eF,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(t=t.bind(n)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var n=this._listeners&&this._listeners[e];n&&n.forEach(function(e,r){e._eventEmitterGuid===t._eventEmitterGuid&&n.splice(r,1)})}},{key:"one",value:function(e,t,n){var r=this;t._eventEmitterGuid=t._eventEmitterGuid||++eF;var a=function(){r.off(e,a),t.apply(n||this,arguments)};a._eventEmitterGuid=t._eventEmitterGuid,this.on(e,a)}},{key:"emit",value:function(e,t){var n=this;if(this._listeners){t=t||{};var r=this._listeners["before"+e]||[],a=this._listeners["before*"]||[],i=this._listeners[e]||[],o=this._listeners["after"+e]||[],s=function(t,r){(t=t.slice()).forEach(function(t){t.call(n,{type:e},r)})};s(r,t),s(a,t),s(i,t),s(o,t)}}}]),e}(),eB=C(I()),eV=function(){function e(t){var n=this;el(this,e),ed(this,"_playbackHeartbeatInterval",void 0),ed(this,"_playheadShouldBeProgressing",void 0),ed(this,"pm",void 0),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",function(){n._playheadShouldBeProgressing=!0}),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",function(){t.data.player_is_paused?n._stopPlaybackHeartbeatInterval():n._startPlaybackHeartbeatInterval()}),t.on("timeupdate",function(){null!==n._playbackHeartbeatInterval&&t.emit("playbackheartbeat")}),t.on("devicesleep",function(e,r){null!==n._playbackHeartbeatInterval&&(eB.default.clearInterval(n._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:r.viewer_time}),n._playbackHeartbeatInterval=null)})}return eu(e,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=eB.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(eB.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e}(),eq=function e(t){var n=this;el(this,e),ed(this,"viewErrored",void 0),t.on("viewinit",function(){n.viewErrored=!1}),t.on("error",function(e,r){try{var a=t.errorTranslator({player_error_code:r.player_error_code,player_error_message:r.player_error_message,player_error_context:r.player_error_context,player_error_severity:r.player_error_severity,player_error_business_exception:r.player_error_business_exception});a&&(t.data.player_error_code=a.player_error_code||r.player_error_code,t.data.player_error_message=a.player_error_message||r.player_error_message,t.data.player_error_context=a.player_error_context||r.player_error_context,t.data.player_error_severity=a.player_error_severity||r.player_error_severity,t.data.player_error_business_exception=a.player_error_business_exception||r.player_error_business_exception,n.viewErrored=!0)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),n.viewErrored=!0}}),t.on("aftererror",function(){var e,n,r,a,i;null==(e=t.data)||delete e.player_error_code,null==(n=t.data)||delete n.player_error_message,null==(r=t.data)||delete r.player_error_context,null==(a=t.data)||delete a.player_error_severity,null==(i=t.data)||delete i.player_error_business_exception})},eG=function(){function e(t){el(this,e),ed(this,"_watchTimeTrackerLastCheckedTime",void 0),ed(this,"pm",void 0),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return eu(e,[{key:"_updateWatchTime",value:function(e,t){var n=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=n),eT(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e}(),ez=function(){function e(t){var n=this;el(this,e),ed(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),ed(this,"_lastTime",void 0),ed(this,"_isAdPlaying",void 0),ed(this,"_callbackUpdatePlaybackTime",void 0),ed(this,"pm",void 0),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=J(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null,t.on("viewinit",function(){n.pm.data.view_playing_time_ms_cumulative=0});var r=this._startPlaybackTimeTracking.bind(this);t.on("playing",r),t.on("adplaying",r),t.on("seeked",r),t.on("rebufferend",r);var a=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",a),t.on("seeking",a),t.on("rebufferstart",a),t.on("adplaying",function(){n._isAdPlaying=!0}),t.on("adended",function(){n._isAdPlaying=!1}),t.on("adpause",function(){n._isAdPlaying=!1}),t.on("adbreakstart",function(){n._isAdPlaying=!1}),t.on("adbreakend",function(){n._isAdPlaying=!1}),t.on("adplay",function(){n._isAdPlaying=!1}),t.on("viewinit",function(){n._playbackTimeTrackerLastPlayheadPosition=-1,n._lastTime=J(),n._isAdPlaying=!1,n._callbackUpdatePlaybackTime=null})}return eu(e,[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this._lastTime=J(),this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time||0,t=J(),n=t-this._lastTime,r=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?r=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(r=n),r>0&&r<=1e3&&eT(this.pm.data,"view_content_playback_time",r),null!==this._callbackUpdatePlaybackTime&&n>0&&n<=1e3&&(this._isAdPlaying&&eT(this.pm.data,"ad_playing_time_ms_cumulative",n),eT(this.pm.data,"view_playing_time_ms_cumulative",n)),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),e}(),e$=function(){function e(t){el(this,e),ed(this,"pm",void 0),this.pm=t;var n=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",n),t.on("playbackheartbeatend",n),t.on("timeupdate",n),t.on("destroy",function(){t.off("timeupdate",n)})}return eu(e,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var n=this,r=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,r(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var a=this.pm.getPlayheadTime();void 0!==a&&(this.pm.data.player_playhead_time=a,r(),this._updateMaxPlayheadPosition())}}}]),e}(),eW=function e(t){if(el(this,e),!t.disableRebufferTracking){var n,r=function(e,t){a(t),n=void 0},a=function(e){if(n){var r=e.viewer_time-n;eT(t.data,"view_rebuffer_duration",r),n=e.viewer_time,t.data.view_rebuffer_duration>3e5&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(3e5,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",function(e,t){return a(t)}),t.on("rebufferstart",function(e,a){n||(eT(t.data,"view_rebuffer_count",1),n=a.viewer_time,t.one("rebufferend",r))}),t.on("viewinit",function(){n=void 0,t.off("rebufferend",r)})}},eK=function(){function e(t){var n=this;el(this,e),ed(this,"_lastCheckedTime",void 0),ed(this,"_lastPlayheadTime",void 0),ed(this,"_lastPlayheadTimeUpdatedTime",void 0),ed(this,"_rebuffering",void 0),ed(this,"pm",void 0),this.pm=t,t.disableRebufferTracking||t.disablePlayheadRebufferTracking||(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",function(){n._cleanupRebufferTracker(null,{viewer_time:J()})}))}return eu(e,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)return void this._cleanupRebufferTracker(e,t);if(null===this._lastCheckedTime)return void this._prepareRebufferTrackerState(t.viewer_time);if(this._lastPlayheadTime!==this.pm.data.player_playhead_time)return void this._cleanupRebufferTracker(e,t,!0);var n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var r=this.pm.data.player_playhead_time-this._lastPlayheadTime,a=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&r>0&&a-r>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+a-r}))}n?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e}(),eQ=function(){function e(t){var n=this;el(this,e),ed(this,"pm",void 0),this.pm=t,t.on("viewinit",function(){var e=t.data,r=e.view_id;if(!e.view_program_changed){var a=function(e,a){var i=a.viewer_time;"playing"===e.type&&void 0===t.data.view_time_to_first_frame?n.calculateTimeToFirstFrame(i||J(),r):"adplaying"===e.type&&(void 0===t.data.view_time_to_first_frame||n._inPrerollPosition())&&n.calculateTimeToFirstFrame(i||J(),r)};t.one("playing",a),t.one("adplaying",a),t.one("viewend",function(){t.off("playing",a),t.off("adplaying",a)})}})}return eu(e,[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.pm.pageLoadInitTime&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.pm.pageLoadInitTime))}}]),e}(),eY=function e(t){var n=this;el(this,e),ed(this,"_lastPlayerHeight",void 0),ed(this,"_lastPlayerWidth",void 0),ed(this,"_lastPlayheadPosition",void 0),ed(this,"_lastSourceHeight",void 0),ed(this,"_lastSourceWidth",void 0),t.on("viewinit",function(){n._lastPlayheadPosition=-1}),["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend","playbackmodechange"].forEach(function(e){t.on(e,function(){if(n._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&n._lastPlayerWidth>=0&&n._lastSourceWidth>0&&n._lastPlayerHeight>=0&&n._lastSourceHeight>0){var e=t.data.player_playhead_time-n._lastPlayheadPosition;if(e<0){n._lastPlayheadPosition=-1;return}var r=Math.min(n._lastPlayerWidth/n._lastSourceWidth,n._lastPlayerHeight/n._lastSourceHeight),a=Math.max(0,r-1),i=Math.max(0,1-r);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,a),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,i),eT(t.data,"view_total_content_playback_time",e),eT(t.data,"view_total_upscaling",a*e),eT(t.data,"view_total_downscaling",i*e)}n._lastPlayheadPosition=-1})}),["playing","hb","renditionchange","orientationchange","playbackmodechange"].forEach(function(e){t.on(e,function(){n._lastPlayheadPosition=t.data.player_playhead_time,n._lastPlayerWidth=t.data.player_width,n._lastPlayerHeight=t.data.player_height,n._lastSourceWidth=t.data.video_source_width,n._lastSourceHeight=t.data.video_source_height})})},eX=function e(t){var n=this;el(this,e),ed(this,"isSeeking",void 0),this.isSeeking=!1;var r=-1,a=function(){var e=J(),a=(t.data.viewer_time||e)-(r||e);eT(t.data,"view_seek_duration",a),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,a),n.isSeeking=!1,r=-1};t.on("seeking",function(e,i){if(Object.assign(t.data,i),n.isSeeking&&i.viewer_time-r<=2e3){r=i.viewer_time;return}n.isSeeking&&a(),n.isSeeking=!0,r=i.viewer_time,eT(t.data,"view_seek_count",1),t.send("seeking")}),t.on("seeked",function(){a()}),t.on("viewend",function(){n.isSeeking&&(a(),t.send("seeked")),n.isSeeking=!1,r=-1})},eJ=function(e,t){e.push(t),e.sort(function(e,t){return e.viewer_time-t.viewer_time})},eZ=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],e0=function(){function e(t){var n=this;el(this,e),ed(this,"_adHasPlayed",void 0),ed(this,"_adRequests",void 0),ed(this,"_adResponses",void 0),ed(this,"_currentAdRequestNumber",void 0),ed(this,"_currentAdResponseNumber",void 0),ed(this,"_prerollPlayTime",void 0),ed(this,"_wouldBeNewAdPlay",void 0),ed(this,"isAdBreak",void 0),ed(this,"pm",void 0),this.pm=t,t.on("viewinit",function(){n.isAdBreak=!1,n._currentAdRequestNumber=0,n._currentAdResponseNumber=0,n._adRequests=[],n._adResponses=[],n._adHasPlayed=!1,n._wouldBeNewAdPlay=!0,n._prerollPlayTime=void 0}),eZ.forEach(function(e){return t.on(e,n._updateAdData.bind(n))});var r=function(){n.isAdBreak=!1};t.on("adbreakstart",function(){n.isAdBreak=!0}),t.on("play",r),t.on("playing",r),t.on("viewend",r),t.on("adrequest",function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdRequestNumber++},r),eJ(n._adRequests,r),eT(t.data,"view_ad_request_count"),n.inPrerollPosition()&&(t.data.view_preroll_requested=!0,n._adHasPlayed||eT(t.data,"view_preroll_request_count"))}),t.on("adresponse",function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdResponseNumber++},r),eJ(n._adResponses,r);var a=n.findAdRequest(r.ad_request_id);a&&eT(t.data,"view_ad_request_time",Math.max(0,r.viewer_time-a.viewer_time))}),t.on("adplay",function(e,r){n._adHasPlayed=!0,n._wouldBeNewAdPlay&&(n._wouldBeNewAdPlay=!1,eT(t.data,"view_ad_played_count")),n.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,n._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,r.viewer_time-n._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,r.viewer_time-t.data.view_start)),n._prerollPlayTime=r.viewer_time)}),t.on("adplaying",function(e,r){n.inPrerollPosition()&&void 0===t.data.view_preroll_load_time&&void 0!==n._prerollPlayTime&&(t.data.view_preroll_load_time=r.viewer_time-n._prerollPlayTime,t.data.view_startup_preroll_load_time=r.viewer_time-n._prerollPlayTime)}),t.on("adclicked",function(e,r){n._wouldBeNewAdPlay||eT(t.data,"view_ad_clicked_count")}),t.on("adskipped",function(e,r){n._wouldBeNewAdPlay||eT(t.data,"view_ad_skipped_count")}),t.on("adended",function(){n._wouldBeNewAdPlay=!0}),t.on("aderror",function(){n._wouldBeNewAdPlay=!0})}return eu(e,[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var n=K(ev(t.ad_tag_url),2),r=n[0],a=n[1];this.pm.data.view_preroll_ad_tag_domain=a,this.pm.data.view_preroll_ad_tag_hostname=r}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var i=K(ev(t.ad_asset_url),2),o=i[0],s=i[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=o}this.pm.data.ad_type="preroll"}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id,null!=t&&t.ad_type&&(this.pm.data.ad_type=null==t?void 0:t.ad_type)}}]),e}(),e1=function e(t){var n=this;el(this,e),ed(this,"lastWallClockTime",void 0);var r=function(){n.lastWallClockTime=J(),t.on("before*",a)},a=function(e){var r=J(),a=n.lastWallClockTime;n.lastWallClockTime=r,r-a>3e4&&(t.emit("devicesleep",{viewer_time:a}),Object.assign(t.data,{viewer_time:a}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicewake"))};t.one("playbackheartbeat",r),t.on("playbackheartbeatend",function(){t.off("before*",a),t.one("playbackheartbeat",r)})},e2=C(I()),e5=(tR=function(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t},function e(t){function n(e,r,a){var i;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=tR({path:"/"},n.defaults,a)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*a.expires),a.expires=o}try{i=JSON.stringify(r),/^[\{\[]/.test(i)&&(r=i)}catch(e){}return r=t.write?t.write(r,e):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=e+"="+r+(a.expires?"; expires="+a.expires.toUTCString():"")+(a.path?"; path="+a.path:"")+(a.domain?"; domain="+a.domain:"")+(a.secure?"; secure":"")}e||(i={});for(var s=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,c=0;c<s.length;c++){var u=s[c].split("="),d=u.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{var m=u[0].replace(l,decodeURIComponent);if(d=t.read?t.read(d,m):t(d,m)||d.replace(l,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(e===m){i=d;break}e||(i[m]=d)}catch(e){}}return i}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,t){n(e,"",tR(t,{expires:-1}))},n.withConverter=e,n}(function(){})),e3="muxData",e4=function(){var e;try{e=(e5.get(e3)||"").split("&").reduce(function(e,t){var n=K(t.split("="),2),r=n[0],a=n[1],i=+a;return e[r]=a&&i==a?i:a,e},{})}catch(t){e={}}return e},e6=function(e){try{e5.set(e3,Object.entries(e).map(function(e){var t=K(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)}).join("&"),{expires:365})}catch(e){}},e9=function(){var e=e4();return e.mux_viewer_id=e.mux_viewer_id||Z(),e.msn=e.msn||Math.random(),e6(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},e7=function(){var e=e4(),t=J();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=Z(),e.sst=t),e.sex=t+15e5,e6(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}},e8=C(I()),te=function(){var e;switch(tt()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},tt=function(){var e=e8.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};te.getConnectionFromAPI=tt;var tn=ta({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),tr=ta({ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cm:"cmcd",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cv:"cumulative",cx:"connection",cz:"context",da:"data",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mp:"mode",ms:"ms",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",pv:"previous",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function ta(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function ti(e){var t={},n={};return Object.keys(e).forEach(function(r){var a=!1;if(e.hasOwnProperty(r)&&void 0!==e[r]){var i=r.split("_"),o=i[0],s=tn[o];s||(ea.info("Data key word `"+i[0]+"` not expected in "+r),s=o+"_"),i.splice(1).forEach(function(e){"url"===e&&(a=!0),tr[e]?s+=tr[e]:Number.isInteger(Number(e))?s+=e:(ea.info("Data key word `"+e+"` not expected in "+r),s+="_"+e+"_")}),a?n[s]=e[r]:t[s]=e[r]}}),Object.assign(t,n)}var to=C(I()),ts=C(z()),tl={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},tc=["hb","requestcompleted","requestfailed","requestcanceled"],tu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},tl,t)};tu.prototype.queueEvent=function(e,t){var n=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(n),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},tu.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},tu.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),to.default.clearTimeout(this._sendTimeout)},tu.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],ti({mux_view_message:"event queue truncated"}));var n=this._createPayload(t);tm(this._beaconUrl,n,!0,function(){})},tu.prototype._sendBeaconQueue=function(){var e=this;if(this._postInFlight){this._resendAfterPost=!0;return}var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var n=this._createPayload(t),r=J();tm(this._beaconUrl,n,!1,function(n,a){a?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,ea.info("Error sending beacon: "+a)):e._failureCount=0,e._roundTripTime=J()-r,e._postInFlight=!1,e._resendAfterPost&&(e._resendAfterPost=!1,e._eventQueue.length>0&&e._sendBeaconQueue())})},tu.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},tu.prototype._startBeaconSending=function(){var e=this;to.default.clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=to.default.setTimeout(function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()},this._getNextBeaconTime()))},tu.prototype._createPayload=function(e){var t=this,n={transmission_timestamp:Math.round(J())};this._roundTripTime&&(n.rtt_ms=Math.round(this._roundTripTime));var r,a,i,o=function(){i=(r=JSON.stringify({metadata:n,events:a||e})).length/1024},s=function(){return i<=t._options.maxPayloadKBSize};return o(),s()||(ea.info("Payload size is too big ("+i+" kb). Removing unnecessary events."),a=e.filter(function(e){return -1===tc.indexOf(e.e)}),o()),s()||(ea.info("Payload size still too big ("+i+" kb). Cropping fields.."),a.forEach(function(e){for(var t in e){var n=e[t];"string"==typeof n&&n.length>51200&&(e[t]=n.substring(0,51200))}}),o()),r};var td="function"==typeof ts.default.exitPictureInPicture?function(e){return e.length<=57344}:function(e){return!1},tm=function(e,t,n,r){if(n&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))return void r();if(to.default.fetch)return void to.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:td(t)}).then(function(e){return r(null,e.ok?null:"Error")}).catch(function(e){return r(null,e)});if(to.default.XMLHttpRequest){var a=new to.default.XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState)return r(null,200!==a.status?"error":void 0)},a.open("POST",e),a.setRequestHeader("Content-Type","text/plain"),a.send(t);return}r()},tp=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception","view_playing_time_ms_cumulative","ad_playing_time_ms_cumulative"],tf=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],th=["ad_id","ad_creative_id","ad_universal_id"],tv=["viewstart","error","ended","viewend"],tg=function(){function e(t,n){var r,a,i,o,s,l,c,u,d,m,f,h,v,g,y,b,_,T,k,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};el(this,e),ed(this,"mux",void 0),ed(this,"envKey",void 0),ed(this,"options",void 0),ed(this,"eventQueue",void 0),ed(this,"sampleRate",void 0),ed(this,"disableCookies",void 0),ed(this,"respectDoNotTrack",void 0),ed(this,"previousBeaconData",void 0),ed(this,"lastEventTime",void 0),ed(this,"rateLimited",void 0),ed(this,"pageLevelData",void 0),ed(this,"viewerData",void 0),this.mux=t,this.envKey=n,this.options=E,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new tu((r=this.envKey,i=(a=this.options).beaconCollectionDomain,o=a.beaconDomain,i?"https://"+i:(r=r||"inferred").match(/^[a-z0-9]+$/)?"https://"+r+"."+(o||"litix.io"):"https://img.litix.io/a.gif")),this.sampleRate=null!=(_=this.options.sampleRate)?_:1,this.disableCookies=null!=(T=this.options.disableCookies)&&T,this.respectDoNotTrack=null!=(k=this.options.respectDoNotTrack)&&k,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null==(s=this.options.platform)?void 0:s.name,viewer_application_version:null==(l=this.options.platform)?void 0:l.version,viewer_application_engine:null==(c=this.options.platform)?void 0:c.layout,viewer_device_name:null==(u=this.options.platform)?void 0:u.product,viewer_device_category:"",viewer_device_manufacturer:null==(d=this.options.platform)?void 0:d.manufacturer,viewer_os_family:null==(f=this.options.platform)||null==(m=f.os)?void 0:m.family,viewer_os_architecture:null==(v=this.options.platform)||null==(h=v.os)?void 0:h.architecture,viewer_os_version:null==(y=this.options.platform)||null==(g=y.os)?void 0:g.version,viewer_connection_type:te(),page_url:null===e2.default||void 0===e2.default||null==(b=e2.default.location)?void 0:b.href},this.viewerData=this.disableCookies?{}:e9()}return eu(e,[{key:"send",value:function(e,t){if(!(!e||!(null!=t&&t.view_id))){if(this.respectDoNotTrack&&eo())return ea.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!=typeof t)return ea.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:e7(),r=eE(ek({},this.pageLevelData,t,n,this.viewerData),{event:e,env_key:this.envKey});r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var a,i=(null!=(a=r.mux_sample_number)?a:0)>=this.sampleRate,o=ti(this._deduplicateBeaconData(e,r));if(this.lastEventTime=this.mux.utils.now(),i)return ea.info("Not sending event due to sample rate restriction",e,r,o);if(this.envKey||ea.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,r,o),!this.rateLimited)if(ea.info("Sending event",e,r,o),this.rateLimited=!this.eventQueue.queueEvent(e,o),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else{if(this.mux.WINDOW_HIDDEN&&"hb"===e)this.eventQueue.flushEvents(!0);else if(tv.indexOf(e)>=0){if("error"===e&&"warning"===t.player_error_severity)return;this.eventQueue.flushEvents()}if(this.rateLimited)return r.event="eventrateexceeded",o=ti(r),this.eventQueue.queueEvent(r.event,o),ea.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var n=this,r={},a=t.view_id;if("-1"===a||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)r=ek({},t),a&&(this.previousBeaconData=r),a&&"viewend"===e&&(this.previousBeaconData=null);else{var i=0===e.indexOf("request");Object.entries(t).forEach(function(t){var a=K(t,2),o=a[0],s=a[1];n.previousBeaconData&&(s!==n.previousBeaconData[o]||tp.indexOf(o)>-1||n.objectHasChanged(i,o,s,n.previousBeaconData[o])||n.eventRequiresKey(e,o))&&(r[o]=s,n.previousBeaconData[o]=s)})}return r}},{key:"objectHasChanged",value:function(e,t,n,r){return!!e&&0===t.indexOf("request_")&&("request_response_headers"===t||"object"!=typeof n||"object"!=typeof r||Object.keys(n||{}).length!==Object.keys(r||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return!!("renditionchange"===e&&0===t.indexOf("video_source_")||th.includes(t)&&tf.includes(e))}}]),e}(),ty=function e(t){el(this,e);var n=0,r=0,a=0,i=0,o=0,s=0,l=0;t.on("requestcompleted",function(e,s){var l,c,u=s.request_start,d=s.request_response_start,m=s.request_response_end,f=s.request_bytes_loaded;if(i++,d?(l=d-(null!=u?u:0),c=(null!=m?m:0)-d):c=(null!=m?m:0)-(null!=u?u:0),c>0&&f&&f>0){var h=f/c*8e3;o++,r+=f,a+=c,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,h),t.data.view_average_request_throughput=r/a*8e3,t.data.view_request_count=i,l>0&&(n+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=n/o)}}),t.on("requestfailed",function(e,n){i++,s++,t.data.view_request_count=i,t.data.view_request_failed_count=s}),t.on("requestcanceled",function(e,n){i++,l++,t.data.view_request_count=i,t.data.view_request_canceled_count=l})},tb=function e(t){var n=this;el(this,e),ed(this,"_lastEventTime",void 0),t.on("before*",function(e,r){var a=r.viewer_time,i=J(),o=n._lastEventTime;if(n._lastEventTime=i,o&&i-o>36e5){var s=Object.keys(t.data).reduce(function(e,n){return 0===n.indexOf("video_")?Object.assign(e,ed({},n,t.data[n])):e},{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view");var l=t.playbackHeartbeat._playheadShouldBeProgressing;t._resetView(Object.assign({viewer_time:a},s)),t.playbackHeartbeat._playheadShouldBeProgressing=l,t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:a}),"playing"!==e.type&&t.emit("playing",{viewer_time:a}))}})};function t_(e,t){return(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase())}var tT=function e(t){el(this,e);var n=function(e){var n,r,a,s=null!=(n=e)&&n.request_type&&("media"===n.request_type||"video"===n.request_type)&&null!=(r=n.request_response_headers)&&r["x-cdn"]?n.request_response_headers["x-cdn"]:null!=n&&n.video_cdn?n.video_cdn:null,l=null!=(a=e)&&a.request_start?a.request_start:null!=a&&a.viewer_time?a.viewer_time:Date.now();null!=s&&!t_(s,i)&&o<=l&&(i=s,o=l,t.emit("cdnchange",{video_cdn:s}))},r=null,a=null,i=null,o=0;t.on("viewinit",function(){r=null,a=null,i=null,o=0}),t.on("beforecdnchange",function(e,t){var n=null==t?void 0:t.video_cdn;n&&(void 0===t.video_previous_cdn||null===t.video_previous_cdn)&&(t_(n,a)?t.video_previous_cdn=null!=r?r:void 0:(t.video_previous_cdn=null!=a?a:void 0,r=a,a=n))}),t.on("requestcompleted",function(e,t){n(t)})},tk=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},tE=function e(t){var n=this;el(this,e),ed(this,"_emittingAutomaticEvent",!1),ed(this,"_hasInitialized",!1),ed(this,"_currentMode","standard"),t.on("viewstart",function(){n._hasInitialized||(n._hasInitialized=!0,n._emittingAutomaticEvent=!0,t.emit("playbackmodechange",{player_playback_mode:n._currentMode,player_playback_mode_data:"{}"}),n._emittingAutomaticEvent=!1)}),t.on("viewend",function(){n._hasInitialized=!1}),t.on("playbackmodechange",function(e,r){n._emittingAutomaticEvent||(r.player_playback_mode_data?tk(r.player_playback_mode_data)||(t.mux.log.warn("Invalid JSON string for player_playback_mode_data"),r.player_playback_mode_data="{}"):r.player_playback_mode_data="{}",t.data.player_playback_mode_data=r.player_playback_mode_data,t.data.player_playback_mode=r.player_playback_mode,n._currentMode=r.player_playback_mode)})},tS=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange","cdnchange","playbackmodechange"],tw=new Set(["requestcompleted","requestfailed","requestcanceled"]),tx=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&ef(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=em(r);return e=t?Reflect.construct(n,arguments,em(this).constructor):n.apply(this,arguments),e&&("object"===N(e)||"function"==typeof e)?e:es(this)});function r(e,t,a){el(this,r),ed(es(i=n.call(this)),"pageLoadEndTime",void 0),ed(es(i),"pageLoadInitTime",void 0),ed(es(i),"_destroyed",void 0),ed(es(i),"_heartBeatTimeout",void 0),ed(es(i),"adTracker",void 0),ed(es(i),"dashjs",void 0),ed(es(i),"data",void 0),ed(es(i),"disablePlayheadRebufferTracking",void 0),ed(es(i),"disableRebufferTracking",void 0),ed(es(i),"errorTracker",void 0),ed(es(i),"errorTranslator",void 0),ed(es(i),"emitTranslator",void 0),ed(es(i),"getAdData",void 0),ed(es(i),"getPlayheadTime",void 0),ed(es(i),"getStateData",void 0),ed(es(i),"stateDataTranslator",void 0),ed(es(i),"hlsjs",void 0),ed(es(i),"id",void 0),ed(es(i),"longResumeTracker",void 0),ed(es(i),"minimumRebufferDuration",void 0),ed(es(i),"mux",void 0),ed(es(i),"playbackEventDispatcher",void 0),ed(es(i),"playbackHeartbeat",void 0),ed(es(i),"playbackHeartbeatTime",void 0),ed(es(i),"playheadTime",void 0),ed(es(i),"seekingTracker",void 0),ed(es(i),"sustainedRebufferThreshold",void 0),ed(es(i),"watchTimeTracker",void 0),ed(es(i),"currentFragmentPDT",void 0),ed(es(i),"currentFragmentStart",void 0),i.pageLoadInitTime=e_(),i.pageLoadEndTime=eb(),i.mux=e,i.id=t,null!=a&&a.beaconDomain&&i.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),(a=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e},emitTranslator:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},stateDataTranslator:function(e){return e}},a)).data=a.data||{},a.data.property_key&&(a.data.env_key=a.data.property_key,delete a.data.property_key),ea.level=a.debug?1:3,i.getPlayheadTime=a.getPlayheadTime,i.getStateData=a.getStateData||function(){return{}},i.getAdData=a.getAdData||function(){},i.minimumRebufferDuration=a.minimumRebufferDuration,i.sustainedRebufferThreshold=a.sustainedRebufferThreshold,i.playbackHeartbeatTime=a.playbackHeartbeatTime,i.disableRebufferTracking=a.disableRebufferTracking,i.disableRebufferTracking&&i.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),i.disablePlayheadRebufferTracking=a.disablePlayheadRebufferTracking,i.errorTranslator=a.errorTranslator,i.emitTranslator=a.emitTranslator,i.stateDataTranslator=a.stateDataTranslator,i.playbackEventDispatcher=new tg(e,a.data.env_key,a),i.data={player_instance_id:Z(),mux_sample_rate:a.sampleRate,beacon_domain:a.beaconCollectionDomain||a.beaconDomain},i.data.view_sequence_number=1,i.data.player_sequence_number=1;var i,o=(function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"),this.emit("renditionchange"))}).bind(es(i));if(i.on("viewinit",function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",o),this.one("adbreakstart",o)}),i.on("videochange",function(e,t){this._resetView(t)}),i.on("programchange",function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(t,{view_program_changed:!0})),o(),this.emit("play"),this.emit("playing")}),i.on("fragmentchange",function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart}),i.on("destroy",i.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var s=function(){var e=void 0!==i.data.view_start;i.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&i.mux.WINDOW_HIDDEN&&(i.data.player_is_paused||i.emit("hb"))};window.addEventListener("visibilitychange",s,!1);var l=function(e){e.persisted||i.destroy()};window.addEventListener("pagehide",l,!1),i.on("destroy",function(){window.removeEventListener("visibilitychange",s),window.removeEventListener("pagehide",l)})}return i.on("playerready",function(e,t){Object.assign(this.data,t)}),tS.forEach(function(e){i.on(e,function(t,n){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,n),this._sanitizeData()}),i.on("after"+e,function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)})}),i.on("viewend",function(e,t){Object.assign(i.data,t)}),i.one("playerready",function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),this.pageLoadInitTime=this.data.page_load_init_time||this.pageLoadInitTime,this.pageLoadEndTime=this.data.page_load_end_time||this.pageLoadEndTime,!this.mux.PLAYER_TRACKED&&this.pageLoadInitTime&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.pageLoadEndTime)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.pageLoadEndTime||1/0)-this.pageLoadInitTime)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time}),i.longResumeTracker=new tb(es(i)),i.errorTracker=new eq(es(i)),new e1(es(i)),i.seekingTracker=new eX(es(i)),i.playheadTime=new e$(es(i)),i.playbackHeartbeat=new eV(es(i)),new eY(es(i)),i.watchTimeTracker=new eG(es(i)),new ez(es(i)),i.adTracker=new e0(es(i)),new eK(es(i)),new eW(es(i)),new eQ(es(i)),new ty(es(i)),new tT(es(i)),new tE(es(i)),a.hlsjs&&i.addHLSJS(a),a.dashjs&&i.addDashJS(a),i.emit("viewinit",a.data),i}return eu(r,[{key:"emit",value:function(e,t){var n,a=Object.assign({viewer_time:this.mux.utils.now()},t),i=[e,a];if(this.emitTranslator)try{i=this.emitTranslator(e,a)}catch(e){this.mux.log.warn("Exception in emit translator callback.",e)}null!=i&&i.length&&(n=ep(em(r.prototype),"emit",this)).call.apply(n,[this].concat(er(i)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach(function(e){t[e]=void 0}),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var n=K(ev(t.video_source_url),2),r=n[0];t.video_source_domain=n[1],t.video_source_hostname=r}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,tw.has(e)||this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_resetView",value:function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}},{key:"_updateStateData",value:function(){var e,t=this.getStateData();if("function"==typeof this.stateDataTranslator)try{t=this.stateDataTranslator(t)}catch(e){this.mux.log.warn("Exception in stateDataTranslator translator callback.",e)}null!=(e=this.data)&&e.video_cdn&&null!=t&&t.video_cdn&&(t.video_cdn,t=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,["video_cdn"])),Object.assign(this.data,t),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach(function(t){var n=parseInt(e.data[t],10);e.data[t]=isNaN(n)?void 0:n}),["player_source_url","video_source_url"].forEach(function(t){if(e.data[t]){var n=e.data[t].toLowerCase();(0===n.indexOf("data:")||0===n.indexOf("blob:"))&&(e.data[t]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("video_")&&delete e.data[t]})}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("view_")&&delete e.data[t]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=Z(),n=function(){t===e.data.view_id&&eT(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){e.data.player_is_paused||e.emit("hb")},1e4)}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,eN(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){this.hlsjs&&(eA(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,ej(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){this.dashjs&&(eU(this.dashjs),this.dashjs=void 0)}}]),r}(eH),tC=C(z());function tI(){return tC.default&&!!(tC.default.fullscreenElement||tC.default.webkitFullscreenElement||tC.default.mozFullScreenElement||tC.default.msFullscreenElement)}var tR,tP,tN=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],tA={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},tL=C(I());tL.default&&tL.default.WeakMap&&(tP=new WeakMap);var tO=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};tO.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},tO.prototype.processLine=function(e){var t=e.indexOf(":"),n=tB(e,t),r=n[0],a=2===n.length?tj(n[1]):void 0;if("#"!==r[0])this.currentUri.uri=r,this.manifest.segments.push(this.currentUri),!this.manifest.targetDuration||"duration"in this.currentUri||(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(r){case"#EXT-X-TARGETDURATION":if(!isFinite(a)||a<0)return;this.manifest.targetDuration=a,this.setHoldBack();break;case"#EXT-X-PART-INF":tM(this.manifest,n),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case"#EXT-X-SERVER-CONTROL":tM(this.manifest,n),this.setHoldBack();break;case"#EXTINF":0===a?this.currentUri.duration=.01:a>0&&(this.currentUri.duration=a);break;case"#EXT-X-PROGRAM-DATE-TIME":var i=new Date(a);this.manifest.dateTimeString||(this.manifest.dateTimeString=a,this.manifest.dateTimeObject=i),this.currentUri.dateTimeString=a,this.currentUri.dateTimeObject=i;break;case"#EXT-X-VERSION":tM(this.manifest,n);break;case"#EXT-X-SESSION-DATA":var o=eI(tV(n[1]));Object.assign(this.manifest.sessionData,o)}},tO.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,n=e.targetDuration,r=e.partTargetDuration;if(t){var a="holdBack",i="partHoldBack",o=n&&3*n,s=r&&2*r;n&&!t.hasOwnProperty(a)&&(t[a]=o),o&&t[a]<o&&(t[a]=o),r&&!t.hasOwnProperty(i)&&(t[i]=3*r),r&&t[i]<s&&(t[i]=s)}};var tM=function(e,t){var n,r=tD(t[0].replace("#EXT-X-",""));tH(t[1])?(n={},n=Object.assign(tF(t[1]),n)):n=tj(t[1]),e[r]=n},tD=function(e){return e.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},tj=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},tU=function(e){var t={},n=e.split("=");return n.length>1&&(t[tD(n[0])]=tj(n[1])),t},tF=function(e){for(var t=e.split(","),n={},r=0;t.length>r;r++)n=Object.assign(tU(t[r]),n);return n},tH=function(e){return e.indexOf("=")>-1},tB=function(e,t){return -1===t?[e]:[e.substring(0,t),e.substring(t+1)]},tV=function(e){var t={};if(e){var n=e.search(",");return[e.slice(0,n),e.slice(n+1)].forEach(function(e,n){for(var r=e.replace(/['"]+/g,"").split("="),a=0;a<r.length;a++)"DATA-ID"===r[a]&&(t["DATA-ID"]=r[1-a]),"VALUE"===r[a]&&(t.VALUE=r[1-a])}),{data:t}}},tq={safeCall:function(e,t,n,r){var a=r;if(e&&"function"==typeof e[t])try{a=e[t].apply(e,n)}catch(e){ea.info("safeCall error",e)}return a},safeIncrement:eT,getComputedStyle:function(e,t){var n;return e&&t&&tL.default&&"function"==typeof tL.default.getComputedStyle?(tP&&tP.has(e)&&(n=tP.get(e)),n||(n=tL.default.getComputedStyle(e,null),tP&&tP.set(e,n)),n.getPropertyValue(t)):""},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:ex,cdnHeadersToRequestId:eC,extractHostnameAndDomain:ev,extractHostname:eh,manifestParser:tO,generateShortID:ee,generateUUID:Z,now:J,findMediaElement:en},tG={},tz=function(e){var t=arguments;"string"==typeof e?tz.hasOwnProperty(e)?Q.default.setTimeout(function(){t=Array.prototype.splice.call(t,1),tz[e].apply(null,t)},0):ea.warn("`"+e+"` is an unknown task"):"function"==typeof e?Q.default.setTimeout(function(){e(tz)},0):ea.warn("`"+e+"` is invalid.")},t$={loaded:J(),NAME:"mux-embed",VERSION:"5.15.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,n){var r=K(en(t),3),a=r[0],i=r[1],o=r[2],s=e.log,l=e.utils.getComputedStyle,c=e.utils.secondsToMs;if(!a)return s.error("No element was found with the `"+i+"` query selector.");if("video"!==o&&"audio"!==o)return s.error("The element of `"+i+"` was not a media element.");a.mux&&(a.mux.destroy(),delete a.mux,s.warn("Already monitoring this video element, replacing existing event listeners")),(n=Object.assign({automaticErrorTracking:!0},n,{getPlayheadTime:function(){return c(a.currentTime)},getStateData:function(){var e,t,n=(null==(e=this.getPlayheadTime)?void 0:e.call(this))||c(a.currentTime),r=this.hlsjs&&this.hlsjs.url,i=this.dashjs&&"function"==typeof this.dashjs.getSource&&this.dashjs.getSource(),o={player_is_paused:a.paused,player_width:parseInt(l(a,"width")),player_height:parseInt(l(a,"height")),player_autoplay_on:a.autoplay,player_preload_on:a.preload,player_language_code:a.lang,player_is_fullscreen:tI(),video_poster_url:a.poster,video_source_url:r||i||a.currentSrc,video_source_duration:c(a.duration),video_source_height:a.videoHeight,video_source_width:a.videoWidth,view_dropped_frame_count:null==a||null==(t=a.getVideoPlaybackQuality)?void 0:t.call(a).droppedVideoFrames};if(a.getStartDate&&n>0){var s=a.getStartDate();if(s&&"function"==typeof s.getTime&&s.getTime()){var u=s.getTime();o.player_program_time=u+n,a.seekable.length>0&&(o.player_live_edge_program_time=u+a.seekable.end(a.seekable.length-1))}}return o}})).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},n.data),a.mux=a.mux||{},a.mux.deleted=!1,a.mux.emit=function(t,n){e.emit(i,t,n)},a.mux.updateData=function(e){a.mux.emit("hb",e)};var u=function(){s.error("The monitor for this video element has already been destroyed.")};a.mux.destroy=function(){Object.keys(a.mux.listeners).forEach(function(e){a.removeEventListener(e,a.mux.listeners[e],!1)}),delete a.mux.listeners,a.mux.fullscreenChangeListener&&(document.removeEventListener("fullscreenchange",a.mux.fullscreenChangeListener,!1),delete a.mux.fullscreenChangeListener),a.mux.destroy=u,a.mux.swapElement=u,a.mux.emit=u,a.mux.addHLSJS=u,a.mux.addDashJS=u,a.mux.removeHLSJS=u,a.mux.removeDashJS=u,a.mux.updateData=u,a.mux.setEmitTranslator=u,a.mux.setStateDataTranslator=u,a.mux.setGetPlayheadTime=u,a.mux.deleted=!0,e.emit(i,"destroy")},a.mux.swapElement=function(t){var n=K(en(t),3),r=n[0],i=n[1],o=n[2];return r?"video"!==o&&"audio"!==o?e.log.error("The element of `"+i+"` was not a media element."):void(r.muxId=a.muxId,delete a.muxId,r.mux=r.mux||{},r.mux.listeners=Object.assign({},a.mux.listeners),delete a.mux.listeners,Object.keys(r.mux.listeners).forEach(function(e){a.removeEventListener(e,r.mux.listeners[e],!1),r.addEventListener(e,r.mux.listeners[e],!1)}),r.mux.fullscreenChangeListener=a.mux.fullscreenChangeListener,delete a.mux.fullscreenChangeListener,r.mux.swapElement=a.mux.swapElement,r.mux.destroy=a.mux.destroy,delete a.mux,a=r):e.log.error("No element was found with the `"+i+"` query selector.")},a.mux.addHLSJS=function(t){e.addHLSJS(i,t)},a.mux.addDashJS=function(t){e.addDashJS(i,t)},a.mux.removeHLSJS=function(){e.removeHLSJS(i)},a.mux.removeDashJS=function(){e.removeDashJS(i)},a.mux.setEmitTranslator=function(t){e.setEmitTranslator(i,t)},a.mux.setStateDataTranslator=function(t){e.setStateDataTranslator(i,t)},a.mux.setGetPlayheadTime=function(t){t||(t=n.getPlayheadTime),e.setGetPlayheadTime(i,t)},e.init(i,n),e.emit(i,"playerready"),a.paused||(e.emit(i,"play"),a.readyState>2&&e.emit(i,"playing")),a.mux.listeners={},tN.forEach(function(t){("error"!==t||n.automaticErrorTracking)&&(a.mux.listeners[t]=function(){var n={};if("error"===t){if(!a.error||1===a.error.code)return;n.player_error_code=a.error.code,n.player_error_message=tA[a.error.code]||a.error.message}e.emit(i,t,n)},a.addEventListener(t,a.mux.listeners[t],!1))}),a.mux.listeners.enterpictureinpicture=function(){e.emit(i,"playbackmodechange",{player_playback_mode:"pip",player_playback_mode_data:"{}"})},a.mux.listeners.leavepictureinpicture=function(){var t=tI()?"fullscreen":"standard";e.emit(i,"playbackmodechange",{player_playback_mode:t,player_playback_mode_data:"{}"})},a.addEventListener("enterpictureinpicture",a.mux.listeners.enterpictureinpicture,!1),a.addEventListener("leavepictureinpicture",a.mux.listeners.leavepictureinpicture,!1),a.mux.fullscreenChangeListener=function(){var t=tI(),n=document.fullscreenElement;if(t&&(n===a||null!=n&&n.contains(a)))e.emit(i,"playbackmodechange",{player_playback_mode:"fullscreen",player_playback_mode_data:"{}"});else if(!t){var r=document.pictureInPictureElement===a;e.emit(i,"playbackmodechange",{player_playback_mode:r?"pip":"standard",player_playback_mode_data:"{}"})}},document.addEventListener("fullscreenchange",a.mux.fullscreenChangeListener,!1)}(tz,e,t)},destroyMonitor:function(e){var t=K(en(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():ea.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var n=et(e);tG[n]?tG[n].addHLSJS(t):ea.error("A monitor for `"+n+"` has not been initialized.")},addDashJS:function(e,t){var n=et(e);tG[n]?tG[n].addDashJS(t):ea.error("A monitor for `"+n+"` has not been initialized.")},removeHLSJS:function(e){var t=et(e);tG[t]?tG[t].removeHLSJS():ea.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=et(e);tG[t]?tG[t].removeDashJS():ea.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){eo()&&t&&t.respectDoNotTrack&&ea.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var n=et(e);tG[n]=new tx(tz,n,t)},emit:function(e,t,n){var r=et(e);tG[r]?(tG[r].emit(t,n),"destroy"===t&&delete tG[r]):ea.error("A monitor for `"+r+"` has not been initialized.")},updateData:function(e,t){var n=et(e);tG[n]?tG[n].emit("hb",t):ea.error("A monitor for `"+n+"` has not been initialized.")},setEmitTranslator:function(e,t){var n=et(e);tG[n]?tG[n].emitTranslator=t:ea.error("A monitor for `"+n+"` has not been initialized.")},setStateDataTranslator:function(e,t){var n=et(e);tG[n]?tG[n].stateDataTranslator=t:ea.error("A monitor for `"+n+"` has not been initialized.")},setGetPlayheadTime:function(e,t){var n=et(e);tG[n]?tG[n].getPlayheadTime=t:ea.error("A monitor for `"+n+"` has not been initialized.")},checkDoNotTrack:eo,log:ea,utils:tq,events:{PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",PLAYBACK_MODE_CHANGE:"playbackmodechange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(tz,t$),void 0!==Q.default&&"function"==typeof Q.default.addEventListener&&Q.default.addEventListener("pagehide",function(e){e.persisted||(tz.WINDOW_UNLOADING=!0)},!1);var tW=e.i(952544),tK=e.i(54567);e.s(["Player",0,e=>{let c,u,d,f,v,y,b,_,T,k,E,S,w,x,C,I,R,P,N,A,L,O,M,D,j,U,F,H,B,V,q,G,z,$,W=(0,n.c)(61);W[0]!==e?({autoPlay:S,playsInline:w,aspectRatio:x,Top:u,Bottom:c,className:d,muted:y,onAutoPlayFail:b,isLoading:f,loaderType:v,videoType:P,videoId:I,roomId:E,videoTitle:R,playerName:T,onProviderSetup:_,hasAutoPip:C,...k}=e,W[0]=e,W[1]=c,W[2]=u,W[3]=d,W[4]=f,W[5]=v,W[6]=y,W[7]=b,W[8]=_,W[9]=T,W[10]=k,W[11]=E,W[12]=S,W[13]=w,W[14]=x,W[15]=C,W[16]=I,W[17]=R,W[18]=P):(c=W[1],u=W[2],d=W[3],f=W[4],v=W[5],y=W[6],b=W[7],_=W[8],T=W[9],k=W[10],E=W[11],S=W[12],w=W[13],x=W[14],C=W[15],I=W[16],R=W[17],P=W[18]);let K=void 0===S||S,Q=void 0===w||w,Y=void 0===x?"16/9":x,X=void 0!==C&&C,J=(0,s.useRef)(null),Z=(0,s.useRef)(null);W[19]!==T||W[20]!==E||W[21]!==I||W[22]!==R||W[23]!==P?(N={videoType:P,videoId:I,videoTitle:R,roomId:E,playerName:T},W[19]=T,W[20]=E,W[21]=I,W[22]=R,W[23]=P,W[24]=N):N=W[24];let ee=(e=>{let t,r,a,i=(0,n.c)(8),{videoType:o,videoId:l,videoTitle:c,roomId:u,playerName:d}=e,f=(0,s.useRef)(null);i[0]!==d||i[1]!==u||i[2]!==l||i[3]!==c||i[4]!==o?(t=(e,t)=>{if(f.current&&(tz.destroyMonitor(f.current),f.current=null),(0,m.isVideoProvider)(e)||(0,m.isHLSProvider)(e)){let t=e.video;f.current=t;let n="livestream"===o,r="vod"===o,a=n?"live":"on-demand",i=n?"event":r?"episode":"clip";tK.logger.debug("[VodPlayer] Setting up Mux tracking",{roomId:u,videoTitle:c,videoStreamType:a,videoContentType:i}),tz.monitor(t,{debug:!1,data:{env_key:tW.environment.muxDataEnvKey,player_name:d,player_init_time:Date.now(),video_title:c||"Untitled",video_id:l,video_stream_type:a,video_producer:u,video_cdn:"pump",page_type:`Web${d}`,video_content_type:i,viewer_user_id:(()=>{let e=localStorage.getItem("decoded-jwt");if(e)try{return JSON.parse(e).address||void 0}catch{return}})(),view_client_application_name:"pump-web"}})}},i[0]=d,i[1]=u,i[2]=l,i[3]=c,i[4]=o,i[5]=t):t=i[5];let h=t;return i[6]===Symbol.for("react.memo_cache_sentinel")?(r=()=>()=>{f.current&&(tK.logger.debug("[VodPlayer] Cleaning up Mux tracking"),tz.destroyMonitor(f.current),f.current=null)},a=[],i[6]=r,i[7]=a):(r=i[6],a=i[7]),(0,s.useEffect)(r,a),h})(N),{showUnmuteOverlay:et,autoPlayFailed:en,unmute:er}=(e=>{let t,r,a,i=(0,n.c)(8),[o,l]=(0,s.useState)(!1);i[0]!==e?(t=()=>{e.current&&(e.current.muted=!0,e.current.play()),l(!0)},i[0]=e,i[1]=t):t=i[1];let c=t;i[2]!==e?(r=()=>{e.current&&(e.current.muted=!1,e.current.play(),l(!1))},i[2]=e,i[3]=r):r=i[3];let u=r;return i[4]!==c||i[5]!==o||i[6]!==u?(a={showUnmuteOverlay:o,autoPlayFailed:c,unmute:u},i[4]=c,i[5]=o,i[6]=u,i[7]=a):a=i[7],a})(J),ea=(q=(0,m.useMediaState)("waiting",J),G=(0,m.useMediaState)("canPlay",J),z=(0,m.useMediaState)("playing",J),$=(0,m.useMediaState)("paused",J),q||!G||G&&!z&&!$||f);W[25]!==d?(A=(0,o.default)(["m-0 block aspect-video w-full p-0",d]),W[25]=d,W[26]=A):A=W[26];let ei=b||en;return W[27]!==ee||W[28]!==_?(L=(...e)=>{_?.(...e),ee(...e)},W[27]=ee,W[28]=_,W[29]=L):L=W[29],W[30]===Symbol.for("react.memo_cache_sentinel")?(M=(0,t.jsx)(i.MediaProvider,{}),O=(0,t.jsx)(a.Gesture,{}),W[30]=O,W[31]=M):(O=W[30],M=W[31]),W[32]!==X?(D=X&&(0,t.jsx)(h,{containerRef:Z}),W[32]=X,W[33]=D):D=W[33],W[34]!==u?(j=(0,t.jsx)(r.Controls.Group,{className:"pointer-events-auto flex w-full items-center",children:u}),W[34]=u,W[35]=j):j=W[35],W[36]!==c?(U=(0,t.jsx)(r.Controls.Group,{className:"pointer-events-auto flex w-full items-center",children:c}),W[36]=c,W[37]=U):U=W[37],W[38]!==j||W[39]!==U?(F=(0,t.jsxs)(r.Controls.Root,{className:"pointer-events-none absolute inset-0 z-10 flex h-full w-full flex-col justify-between opacity-0 transition-opacity duration-300 data-[visible]:opacity-100",children:[j,U]}),W[38]=j,W[39]=U,W[40]=F):F=W[40],W[41]!==ea||W[42]!==et||W[43]!==er?(H=!ea&&et&&(0,t.jsx)(g,{onClick:er}),W[41]=ea,W[42]=et,W[43]=er,W[44]=H):H=W[44],W[45]!==ea||W[46]!==v?(B=ea&&(0,t.jsx)(l.PlayerLoader,{loaderType:v}),W[45]=ea,W[46]=v,W[47]=B):B=W[47],W[48]!==Y||W[49]!==K||W[50]!==y||W[51]!==Q||W[52]!==k||W[53]!==D||W[54]!==F||W[55]!==H||W[56]!==B||W[57]!==A||W[58]!==ei||W[59]!==L?(V=(0,t.jsx)("div",{ref:Z,className:"relative overflow-hidden rounded-md",children:(0,t.jsxs)(i.MediaPlayer,{ref:J,playsInline:Q,autoPlay:K,muted:y,aspectRatio:Y,className:A,onAutoPlayFail:ei,onProviderSetup:L,...k,children:[M,O,D,F,H,B]})}),W[48]=Y,W[49]=K,W[50]=y,W[51]=Q,W[52]=k,W[53]=D,W[54]=F,W[55]=H,W[56]=B,W[57]=A,W[58]=ei,W[59]=L,W[60]=V):V=W[60],V}],305088)},226302,e=>{"use strict";e.s(["download",0,(e,t="clip.mp4")=>{let n=document.createElement("a");n.href=e,n.download=t,n.target="_blank",n.rel="noopener",document.body.appendChild(n),n.click(),document.body.removeChild(n)}])},529326,e=>{"use strict";var t,n=e.i(942765),r=e.i(649785),a=e.i(281675),i=e.i(690877),o=e.i(606933),s=e.i(54567),l=e.i(834171),c=((t=c||{}).PARTICIPANT_INTERACTIONS="participantInteractions",t.PARTICIPANT_INTERACTIONS_UPDATED="participantInteractionsUpdated",t);let u=l.z.object({address:l.z.string(),username:l.z.string().optional(),profileImage:l.z.string(),timestamp:l.z.number()}),d=l.z.object({address:l.z.string(),expiresAt:l.z.number()}),m=l.z.object({raisedHands:l.z.array(u),pendingInvites:l.z.array(u),acceptedCohosts:l.z.array(d)}),f=e=>{let t,n,a,i=(0,r.c)(7);i[0]!==e?(t=t=>{if(!e)throw s.logger.error("[useLivechatSocketParticipantInteractionsStateEmitters] getParticipantInteractions: Socket is not connected",{roomId:t}),Error("Socket is not connected");return s.logger.debug("[useLivechatSocketParticipantInteractionsStateEmitters] Emitting getParticipantInteractions",{roomId:t}),new Promise((n,r)=>{e.emit("participantInteractions",{roomId:t},e=>{let a=m.safeParse(e);if(!a.success)return s.logger.error("[useLivechatSocketParticipantInteractionsStateEmitters] getParticipantInteractions: Failed to parse data",{roomId:t,data:e,parsedData:a}),r(Error("Failed to parse data"));n(a.data)})})},i[0]=e,i[1]=t):t=i[1];let o=t;i[2]!==e?(n=t=>{if(!e)throw s.logger.error("[useLivechatSocketParticipantInteractionsStateEmitters] subscribeToParticipantInteractionsUpdated: Socket is not connected"),Error("Socket is not connected");let n=e=>{let n=m.safeParse(e);n.success?t(n.data):s.logger.error("Invalid participant interactions state update received",{data:e,error:n.error})};return e.on("participantInteractionsUpdated",n),()=>{e.off("participantInteractionsUpdated",n)}},i[2]=e,i[3]=n):n=i[3];let l=n;return i[4]!==o||i[5]!==l?(a={getParticipantInteractions:o,subscribeToParticipantInteractionsUpdated:l},i[4]=o,i[5]=l,i[6]=a):a=i[6],a};var h=e.i(985436);let v=(0,a.createContext)({state:{raisedHands:[],pendingInvites:[],acceptedCohosts:[]},isParticipantHandRaised:()=>!1,isParticipantInvited:()=>!1,isParticipantAcceptedCohost:()=>!1});function g(e,t){return e[t.address]=t,e}function y(e,t){return e[t.address]=t,e}function b(e,t){return e[t.address]=t,e}e.s(["ParticipantInteractionsStateProvider",0,e=>{let t,l,c,u,d,m,_,T,k,E=(0,r.c)(24),{roomId:S,currentUserAddress:w,children:x}=e,C=(0,h.useLivechatSocket)();E[0]!==w||E[1]!==S||E[2]!==C?(t={roomId:S,socket:C,currentUserAddress:w},E[0]=w,E[1]=S,E[2]=C,E[3]=t):t=E[3];let{data:I}=(e=>{let t,n,l,c,u,d,m,h,v,g,y,b,_,T=(0,r.c)(29);T[0]!==e?({socket:u,roomId:c,currentUserAddress:t,enabled:n,refetchInterval:d,...l}=e,T[0]=e,T[1]=t,T[2]=n,T[3]=l,T[4]=c,T[5]=u,T[6]=d):(t=T[1],n=T[2],l=T[3],c=T[4],u=T[5],d=T[6]);let k=void 0===d?3e4:d,{getParticipantInteractions:E}=f(u);T[7]!==c?(m=["participant-interactions-state",c],T[7]=c,T[8]=m):m=T[8];let S=m,w=!!(n??(u&&c));T[9]!==E||T[10]!==c?(h=async()=>{s.logger.debug("[useParticipantInteractionsState] Fetching state",{roomId:c});let e=await E(c);return s.logger.debug("[useParticipantInteractionsState] Received state",{roomId:c,raisedHandsCount:e?.raisedHands.length}),e},T[9]=E,T[10]=c,T[11]=h):h=T[11],T[12]===Symbol.for("react.memo_cache_sentinel")?(v={raisedHands:[],pendingInvites:[],acceptedCohosts:[]},T[12]=v):v=T[12],T[13]!==w||T[14]!==l||T[15]!==S||T[16]!==k||T[17]!==h?(g={queryKey:S,queryFn:h,refetchInterval:k,enabled:w,initialData:v,...l},T[13]=w,T[14]=l,T[15]=S,T[16]=k,T[17]=h,T[18]=g):g=T[18];let x=(0,i.useQuery)(g);T[19]!==w||T[20]!==S||T[21]!==u?(y={socket:u,queryKey:S,enabled:w},T[19]=w,T[20]=S,T[21]=u,T[22]=y):y=T[22],(e=>{let t,n,i=(0,r.c)(7),{socket:l,queryKey:c,enabled:u}=e,d=(0,o.useQueryClient)(),{subscribeToParticipantInteractionsUpdated:m}=f(l);return i[0]!==u||i[1]!==d||i[2]!==c||i[3]!==l||i[4]!==m?(t=()=>{if(l&&u)return m(e=>{s.logger.debug("[useParticipantInteractionsStateUpdated] Received state update",{queryKey:c,raisedHandsCount:e?.raisedHands.length}),d.setQueryData(c,e)})},n=[l,u,m,d,c],i[0]=u,i[1]=d,i[2]=c,i[3]=l,i[4]=m,i[5]=t,i[6]=n):(t=i[5],n=i[6]),(0,a.useEffect)(t,n)})(y),x.data?.raisedHands;e:{let e;if(!t||!x.data?.raisedHands){b=!1;break e}T[23]!==t||T[24]!==x.data?.raisedHands?(e=x.data?.raisedHands.some(e=>e.address===t),T[23]=t,T[24]=x.data?.raisedHands,T[25]=e):e=T[25],b=e}let C=b;return T[26]!==C||T[27]!==x?(_={...x,isCurrentUserHandRaised:C},T[26]=C,T[27]=x,T[28]=_):_=T[28],_})(t);E[4]!==I.raisedHands?(l=I.raisedHands.reduce(g,{}),E[4]=I.raisedHands,E[5]=l):l=E[5];let R=l;E[6]!==I.pendingInvites?(c=I.pendingInvites.reduce(y,{}),E[6]=I.pendingInvites,E[7]=c):c=E[7];let P=c;E[8]!==I.acceptedCohosts?(u=I.acceptedCohosts.reduce(b,{}),E[8]=I.acceptedCohosts,E[9]=u):u=E[9];let N=u;E[10]!==R?(d=e=>void 0!==R[e],E[10]=R,E[11]=d):d=E[11];let A=d;E[12]!==P?(m=e=>void 0!==P[e],E[12]=P,E[13]=m):m=E[13];let L=m;E[14]!==N?(_=e=>void 0!==N[e],E[14]=N,E[15]=_):_=E[15];let O=_;E[16]!==O||E[17]!==A||E[18]!==L||E[19]!==I?(T={state:I,isParticipantHandRaised:A,isParticipantInvited:L,isParticipantAcceptedCohost:O},E[16]=O,E[17]=A,E[18]=L,E[19]=I,E[20]=T):T=E[20];let M=T;return E[21]!==x||E[22]!==M?(k=(0,n.jsx)(v.Provider,{value:M,children:x}),E[21]=x,E[22]=M,E[23]=k):k=E[23],k},"useParticipantInteractionsStateContext",0,()=>(0,a.useContext)(v)],529326)},641768,e=>{"use strict";var t=e.i(10785),n=e.i(203350);e.s(["trackLivestreamEnd",0,({mint:e,livestreamId:r,context:a})=>{(0,n.recordUserEvent)((0,t.createInteractLivestreamEnd)({mint:e,livestreamId:r}),a)},"trackLivestreamSetup",0,({mint:e,context:r})=>{(0,n.recordUserEvent)((0,t.createInteractLivestreamSetup)({mint:e}),r)},"trackLivestreamStart",0,({mint:e,livestreamId:r,title:a,context:i})=>{(0,n.recordUserEvent)((0,t.createInteractLivestreamStart)({mint:e,livestreamId:r,title:a}),i)},"trackLivestreamViewed",0,({mint:e,livestreamId:r,isHostOrCohost:a,creator:i,didClip:o,viewDurationSeconds:s,hlsUrl:l,context:c})=>{(0,n.recordUserEvent)((0,t.createCodeLivestreamViewed)({mint:e,livestreamId:r,viewDuration:"0",isHostOrCohost:a,creator:i,didClip:o,viewDurationSeconds:s,hlsUrl:l}),c)},"trackRtmpFetch",0,({mint:e,context:r})=>{let a={mint:e,actionType:t.RtmpActionType.FETCH};(0,n.recordUserEvent)((0,t.createCodeRtmpFetched)(a),r)},"trackRtmpRefresh",0,({mint:e,context:r})=>{let a={mint:e,actionType:t.RtmpActionType.REFRESH};(0,n.recordUserEvent)((0,t.createCodeRtmpFetched)(a),r)}])},692433,e=>{"use strict";var t=e.i(281675),n=e.i(325320),r=e.i(596904),a=e.i(54567),i=e.i(649785),o=e.i(132838),s=e.i(641768),l=e.i(967388),c=e.i(89085),u=e.i(936736),d=e.i(275762);e.s(["useAutoJoinLivestream",0,({mintId:e,viewer:m,onSuccess:f,hidden:h,enabled:v=!0,recorder:g,joinAsCohost:y})=>{var b;let _,T,k,E,S,w,x,{token:C,setToken:I,isDisconnected:R}=(0,n.useLivestreamContext)(),P=(0,d.useLivestream)(e),{mutate:N,isPending:A}=(b={mintId:e,onSuccess:f,onError:()=>{I(null)},viewer:m,hidden:h,recorder:g},w=(0,i.c)(16),x=(0,d.useLivestream)(b.mintId),w[0]!==b.hidden||w[1]!==b.mintId||w[2]!==b.viewer?(_=()=>{a.logger.debug("[useJoinLivestream] Attempting to join livestream via API",{mintId:b.mintId,viewer:b.viewer,hidden:b.hidden})},w[0]=b.hidden,w[1]=b.mintId,w[2]=b.viewer,w[3]=_):_=w[3],w[4]!==b?(T=async e=>{let{joinAsCohost:t}=e;return u.api.post("livestream/join",{json:{...b,joinAsCohost:t}}).json()},w[4]=b,w[5]=T):T=w[5],w[6]!==x||w[7]!==b?(k=e=>{let t=e.role!==c.LivekitRole.VIEWER;(0,s.trackLivestreamViewed)({mint:b.mintId,livestreamId:x?.id?String(x.id):void 0,isHostOrCohost:t,creator:x?.creatorAddress??"",didClip:!1,viewDurationSeconds:0,context:l.LIFECYCLE_SOURCE_CONTEXTS.JOIN}),a.logger.debug("[useJoinLivestream] Successfully joined, invalidating query",{mintId:b.mintId,role:e.role}),b.onSuccess(e)},w[6]=x,w[7]=b,w[8]=k):k=w[8],w[9]!==b?(E=e=>{a.logger.error("[useJoinLivestream] Failed to join livestream",{mintId:b.mintId,error:e.message||"Unknown error during join livestream"}),b.onError?.()},w[9]=b,w[10]=E):E=w[10],w[11]!==_||w[12]!==T||w[13]!==k||w[14]!==E?(S={onMutate:_,mutationFn:T,onSuccess:k,onError:E},w[11]=_,w[12]=T,w[13]=k,w[14]=E,w[15]=S):S=w[15],(0,o.useMutation)(S)),L=(0,t.useRef)(!1),O=(0,r.getAuthTokenFromCookies)();return(0,t.useEffect)(()=>{!v||!P||C?.token||R||A?(!v||C?.token||R)&&(L.current=!1):L.current||(a.logger.info("[useAutoJoinLivestream] Conditions met (enabled), attempting auto-join",{mintId:e,hasLivestream:!!P,hasToken:!!C?.token,isDisconnected:R,isJoining:A,enabled:v}),N({joinAsCohost:y}),L.current=!0)},[v,P,C?.token,R,A,N,e,y]),(0,t.useEffect)(()=>{I(null)},[y]),(0,t.useEffect)(()=>{L.current=!1},[e]),(0,t.useEffect)(()=>{L.current=!1},[O]),{isJoining:A}}],692433)},790290,e=>{"use strict";var t=e.i(10785),n=e.i(203350);let r=({mint:e,livestreamId:r,mediaType:a,isEnabled:i,role:o,context:s})=>{(0,n.recordUserEvent)((0,t.createInteractMediaToggle)({mint:e,livestreamId:r,mediaType:a,isEnabled:i,role:o}),s)},a=({mint:e,livestreamId:r,mediaType:a,sourceName:i,role:o,context:s})=>{(0,n.recordUserEvent)((0,t.createInteractDeviceSource)({mint:e,livestreamId:r,mediaType:a,sourceName:i,role:o}),s)};e.s(["trackHostAudioDeviceSource",0,({mint:e,livestreamId:n,sourceName:r,role:i,context:o})=>a({mint:e,livestreamId:n,mediaType:t.MediaType.AUDIO,sourceName:r,role:i,context:o}),"trackHostAudioToggle",0,({mint:e,livestreamId:n,isEnabled:a,role:i,context:o})=>r({mint:e,livestreamId:n,mediaType:t.MediaType.AUDIO,isEnabled:a,role:i,context:o}),"trackHostScreenShareToggle",0,({mint:e,livestreamId:n,isEnabled:a,role:i,context:o})=>r({mint:e,livestreamId:n,mediaType:t.MediaType.SCREENSHARE,isEnabled:a,role:i,context:o}),"trackHostVideoDeviceSource",0,({mint:e,livestreamId:n,sourceName:r,role:i,context:o})=>a({mint:e,livestreamId:n,mediaType:t.MediaType.VIDEO,sourceName:r,role:i,context:o}),"trackHostVideoToggle",0,({mint:e,livestreamId:n,isEnabled:a,role:i,context:o})=>r({mint:e,livestreamId:n,mediaType:t.MediaType.VIDEO,isEnabled:a,role:i,context:o}),"trackTokenGating",0,({mint:e,livestreamId:r,gateValue:a,context:i})=>{(0,n.recordUserEvent)((0,t.createInteractTokenGating)({mint:e,livestreamId:r,gateValue:a}),i)}])},955526,e=>{"use strict";var t=e.i(649785),n=e.i(132838),r=e.i(690877),a=e.i(606933),i=e.i(654747),o=e.i(790290),s=e.i(967388),l=e.i(275762),c=e.i(325320),u=e.i(936736),d=e.i(54567);e.s(["useTokenGateConfig",0,()=>{let e,m,f,h,v,g,y,b,_,T,k=(0,t.c)(32),{mintId:E}=(0,c.useLivestreamContext)(),S=(0,l.useLivestream)(E),w=(0,a.useQueryClient)();k[0]!==E?(e=["tokenGateConfig",E],m=async()=>{d.logger.info("[useTokenGateConfig] Fetching token gate config",{mintId:E});try{let e=await u.livechatApi.get(`rooms/${E}/config/chat`).json();return d.logger.info("[useTokenGateConfig] Token gate config fetched",{mintId:E,config:e}),e}catch(e){throw d.logger.error("[useTokenGateConfig] Failed to fetch token gate config",{mintId:E,error:e instanceof Error?e.message:String(e)}),e}},k[0]=E,k[1]=e,k[2]=m):(e=k[1],m=k[2]);let x=!!E;k[3]!==e||k[4]!==m||k[5]!==x?(f={queryKey:e,queryFn:m,enabled:x,retry:1},k[3]=e,k[4]=m,k[5]=x,k[6]=f):f=k[6];let{data:C,isLoading:I,isError:R}=(0,r.useQuery)(f),P=!!(C&&C.tokenGateEnabled&&C.tokenGateMinAmount&&C.tokenGateMinAmount>0);k[7]!==E?(h=async e=>{let t=+!!e;d.logger.info("[useTokenGateConfig] Updating token gate config",{mintId:E,tokenGateMinAmount:t,tokenGateEnabled:e});let n=await u.livechatApi.post(`rooms/${E}/config/chat`,{json:{tokenGateMinAmount:t,tokenGateEnabled:e}}).json();return d.logger.info("[useTokenGateConfig] Token gate config updated",{mintId:E,response:n}),n},k[7]=E,k[8]=h):h=k[8],k[9]!==S||k[10]!==E||k[11]!==w?(v=(e,t)=>{w.setQueryData(["tokenGateConfig",E],e),(0,o.trackTokenGating)({mint:E??"",livestreamId:S?.id?String(S.id):void 0,gateValue:+!!t,context:s.HOST_CONTROL_SOURCE_CONTEXTS.TOKEN_GATE_TOGGLE})},k[9]=S,k[10]=E,k[11]=w,k[12]=v):v=k[12],k[13]!==E?(g=e=>{d.logger.error("[useTokenGateConfig] Failed to update token gate config",{mintId:E,error:e instanceof Error?e.message:String(e)}),i.default.error("Failed to update chat settings")},k[13]=E,k[14]=g):g=k[14],k[15]!==h||k[16]!==v||k[17]!==g?(y={mutationFn:h,onSuccess:v,onError:g},k[15]=h,k[16]=v,k[17]=g,k[18]=y):y=k[18];let{mutateAsync:N,isPending:A}=(0,n.useMutation)(y);k[19]!==P||k[20]!==N?(b=async()=>{await N(!P)},k[19]=P,k[20]=N,k[21]=b):b=k[21];let L=b;k[22]!==N?(_=async e=>{await N(e)},k[22]=N,k[23]=_):_=k[23];let O=_;return k[24]!==R||k[25]!==I||k[26]!==A||k[27]!==P||k[28]!==O||k[29]!==L||k[30]!==C?(T={tokenGateConfig:C,isLoading:I,isError:R,isTokenGateOn:P,toggleTokenGate:L,setTokenGate:O,isToggling:A},k[24]=R,k[25]=I,k[26]=A,k[27]=P,k[28]=O,k[29]=L,k[30]=C,k[31]=T):T=k[31],T}])},247889,e=>{"use strict";var t=e.i(249437);e.s(["usePersistentUserChoices",()=>t.x])},44470,484869,e=>{"use strict";var t=e.i(305288);e.s(["useMaybeRoomContext",()=>t.w],44470);var n=e.i(249437);e.s(["useMediaDeviceSelect",()=>n.e],484869)},914485,e=>{"use strict";var t=e.i(649785),n=e.i(484869),r=e.i(247889),a=e.i(852687),i=e.i(281675),o=e.i(54567);function s(e){return""!==e.deviceId}function l(e){return""!==e.deviceId}e.s(["useDeviceManagement",0,e=>{let c,u,d,m,f,h,v,g,y,b=(0,t.c)(32),{room:_,canPublishHint:T}=e;e:{let e=_?.localParticipant?.permissions;if(e){let t,n,r,i=!!e.canPublish;b[0]!==e.canPublishSources?(t=e.canPublishSources??[],b[0]=e.canPublishSources,b[1]=t):t=b[1];let o=t;b[2]!==o?(n=o.includes(a.TrackSource.CAMERA),b[2]=o,b[3]=n):n=b[3];let s=n;b[4]!==o?(r=o.includes(a.TrackSource.MICROPHONE),b[4]=o,b[5]=r):r=b[5];let l=r;c=i||s||l;break e}c=!!T}let k=c,E=k?_??void 0:void 0;b[6]!==k||b[7]!==E?(u={kind:"audioinput",requestPermissions:k,room:E},b[6]=k,b[7]=E,b[8]=u):u=b[8];let S=(0,n.useMediaDeviceSelect)(u),w=k?_??void 0:void 0;b[9]!==k||b[10]!==w?(d={kind:"videoinput",requestPermissions:k,room:w},b[9]=k,b[10]=w,b[11]=d):d=b[11];let x=(0,n.useMediaDeviceSelect)(d),C=(0,r.usePersistentUserChoices)();b[12]!==S.devices?(m=S.devices.filter(s),b[12]=S.devices,b[13]=m):m=b[13];let I=m;b[14]!==x.devices?(f=x.devices.filter(l),b[14]=x.devices,b[15]=f):f=b[15];let R=f,P=S.activeDeviceId&&""!==S.activeDeviceId?S.activeDeviceId:"default",N=x.activeDeviceId&&""!==x.activeDeviceId?x.activeDeviceId:"default";b[16]===Symbol.for("react.memo_cache_sentinel")?(h={audio:!1,video:!1},b[16]=h):h=b[16];let A=(0,i.useRef)(h);return b[17]!==S||b[18]!==C||b[19]!==k||b[20]!==x?(g=()=>{if(k){if(!A.current.audio&&S.devices.length>0){let e=C.userChoices.audioDeviceId;o.logger.debug("Attempting to restore audio device",{savedId:e}),e&&"default"!==e&&e!==S.activeDeviceId&&S.devices.some(t=>t.deviceId===e)&&S.setActiveMediaDevice(e).then(()=>{C.saveAudioInputDeviceId(e),o.logger.info("Successfully restored audio device",{deviceId:e})}).catch(t=>o.logger.error("Error restoring audio device",{error:t,deviceId:e})),A.current.audio=!0}if(!A.current.video&&x.devices.length>0){let e=C.userChoices.videoDeviceId;o.logger.debug("Attempting to restore video device",{savedId:e}),e&&"default"!==e&&e!==x.activeDeviceId&&x.devices.some(t=>t.deviceId===e)&&x.setActiveMediaDevice(e).then(()=>{C.saveVideoInputDeviceId(e),o.logger.info("Successfully restored video device",{deviceId:e})}).catch(t=>o.logger.error("Error restoring video device",{error:t,deviceId:e})),A.current.video=!0}}},v=[S.devices,x.devices,S.activeDeviceId,x.activeDeviceId,C.userChoices.audioDeviceId,C.userChoices.videoDeviceId,S.setActiveMediaDevice,x.setActiveMediaDevice,C.saveAudioInputDeviceId,C.saveVideoInputDeviceId,S,C,x,k],b[17]=S,b[18]=C,b[19]=k,b[20]=x,b[21]=v,b[22]=g):(v=b[21],g=b[22]),(0,i.useEffect)(g,v),b[23]!==P||b[24]!==S.setActiveMediaDevice||b[25]!==I||b[26]!==C.saveAudioInputDeviceId||b[27]!==C.saveVideoInputDeviceId||b[28]!==N||b[29]!==x.setActiveMediaDevice||b[30]!==R?(y={audioInputDevices:I,videoInputDevices:R,audioDeviceId:P,videoDeviceId:N,audioSetActiveMediaDevice:S.setActiveMediaDevice,videoSetActiveMediaDevice:x.setActiveMediaDevice,saveAudioInputDeviceId:C.saveAudioInputDeviceId,saveVideoInputDeviceId:C.saveVideoInputDeviceId},b[23]=P,b[24]=S.setActiveMediaDevice,b[25]=I,b[26]=C.saveAudioInputDeviceId,b[27]=C.saveVideoInputDeviceId,b[28]=N,b[29]=x.setActiveMediaDevice,b[30]=R,b[31]=y):y=b[31],y}])},302636,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(44470),a=e.i(281675),i=e.i(914485),o=e.i(10785),s=e.i(484169),l=e.i(790290),c=e.i(967388),u=e.i(325320),d=e.i(89085),m=e.i(54567),f=e.i(275762);let h=(0,a.createContext)(void 0);e.s(["DeviceSelectionProvider",0,e=>{let a,v,g,y,b=(0,n.c)(19),{children:_,canPublishHint:T}=e,k=(0,r.useMaybeRoomContext)();b[0]!==T||b[1]!==k?(a={room:k,canPublishHint:T},b[0]=T,b[1]=k,b[2]=a):a=b[2];let{audioInputDevices:E,videoInputDevices:S,audioDeviceId:w,videoDeviceId:x,audioSetActiveMediaDevice:C,videoSetActiveMediaDevice:I,saveAudioInputDeviceId:R,saveVideoInputDeviceId:P}=(0,i.useDeviceManagement)(a);b[3]!==C||b[4]!==k||b[5]!==R||b[6]!==P||b[7]!==I?(v={room:k,audioSetActiveMediaDevice:C,videoSetActiveMediaDevice:I,saveAudioInputDeviceId:R,saveVideoInputDeviceId:P},b[3]=C,b[4]=k,b[5]=R,b[6]=P,b[7]=I,b[8]=v):v=b[8];let{handleSetAudioDevice:N,handleSetVideoDevice:A}=(({room:e,audioSetActiveMediaDevice:t,videoSetActiveMediaDevice:n,saveAudioInputDeviceId:r,saveVideoInputDeviceId:a})=>{let{mintId:i,token:h}=(0,u.useLivestreamContext)(),v=(0,f.useLivestream)(i),g=e&&h?.role!==d.LivekitRole.HOST?o.StreamerRole.COHOST:o.StreamerRole.HOST;return{handleSetAudioDevice:async(n,a)=>{try{if(e?.state===s.ConnectionState.Connected)try{m.logger.debug("[useDeviceSelectionHandlers] Attempting audio switch via room.switchActiveDevice",{deviceId:n}),await e.switchActiveDevice("audioinput",n),(0,l.trackHostAudioDeviceSource)({mint:i??"",livestreamId:v?.id?String(v.id):void 0,sourceName:a??n,role:g,context:c.HOST_CONTROL_SOURCE_CONTEXTS.DEVICE_SELECTOR})}catch(t){let e=t instanceof Error?t.message:String(t);m.logger.error("[useDeviceSelectionHandlers] In-Stream: Failed to switch audio device",{deviceId:n,error:e})}else m.logger.debug("[useDeviceSelectionHandlers] Attempting audio switch via audioSetActiveMediaDevice (not connected)",{deviceId:n}),await t(n),(0,l.trackHostAudioDeviceSource)({mint:i??"",livestreamId:v?.id?String(v.id):void 0,sourceName:a??n,role:g,context:c.HOST_CONTROL_SOURCE_CONTEXTS.DEVICE_SELECTOR});r(n)}catch(t){let e=t instanceof Error?t.message:String(t);m.logger.error("[useDeviceSelectionHandlers] Error setting audio device",{deviceId:n,error:e})}},handleSetVideoDevice:async(t,r)=>{try{if(e?.state===s.ConnectionState.Connected)try{m.logger.debug("[useDeviceSelectionHandlers] Attempting video switch via room.switchActiveDevice",{deviceId:t}),await e.switchActiveDevice("videoinput",t),(0,l.trackHostVideoDeviceSource)({mint:i??"",livestreamId:v?.id?String(v.id):void 0,sourceName:r??t,role:g,context:c.HOST_CONTROL_SOURCE_CONTEXTS.DEVICE_SELECTOR})}catch(n){let e=n instanceof Error?n.message:String(n);m.logger.error("[useDeviceSelectionHandlers] In-Stream: Failed to switch video device",{deviceId:t,error:e})}else m.logger.debug("[useDeviceSelectionHandlers] Attempting video switch via videoSetActiveMediaDevice (not in room)",{deviceId:t}),await n(t),(0,l.trackHostVideoDeviceSource)({mint:i??"",livestreamId:v?.id?String(v.id):void 0,sourceName:r??t,role:g,context:c.HOST_CONTROL_SOURCE_CONTEXTS.DEVICE_SELECTOR});a(t)}catch(n){let e=n instanceof Error?n.message:String(n);m.logger.error("[useDeviceSelectionHandlers] Error setting video device",{deviceId:t,error:e})}}}})(v);b[9]!==w||b[10]!==E||b[11]!==N||b[12]!==A||b[13]!==x||b[14]!==S?(g={audioInputDevices:E,videoInputDevices:S,audioDeviceId:w,videoDeviceId:x,handleSetAudioDevice:N,handleSetVideoDevice:A},b[9]=w,b[10]=E,b[11]=N,b[12]=A,b[13]=x,b[14]=S,b[15]=g):g=b[15];let L=g;return b[16]!==_||b[17]!==L?(y=(0,t.jsx)(h.Provider,{value:L,children:_}),b[16]=_,b[17]=L,b[18]=y):y=b[18],y},"useDeviceSelectionContext",0,()=>{let e=(0,a.useContext)(h);if(void 0===e)throw Error("useDeviceSelectionContext must be used within a DeviceSelectionProvider");return e}],302636)},43373,e=>{"use strict";var t,n=e.i(78436),r=((t={}).EndStream="end-stream",t.ReportLivestream="report-livestream",t.Participants="participants",t.HostTakeoverScreenShare="host-takeover-screenshare",t.GetRTMPKeys="get-rtmp-keys",t.UpdateLivestreamTitle="update-livestream-title",t);let a={isOpen:!1,dialogType:void 0,payload:void 0},i=(0,n.create)(e=>({...a,openDialog:(t,...n)=>{e({isOpen:!0,dialogType:t,payload:n[0]})},closeDialog:()=>{e({isOpen:!1,dialogType:void 0,payload:void 0})},reset:()=>{e(a)}}));e.s(["DialogType",()=>r,"useLivestreamDialogStore",0,i])},731190,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(264458);e.s(["LiveIndicator",0,e=>{let a,i,o=(0,n.c)(6),{live:s,className:l}=e,c=s?"bg-livestream-green":"bg-[#E77975]";o[0]!==l||o[1]!==c?(a=(0,r.default)(l,"w-fit rounded-[4px] px-[6px] py-[2px]","text-[12px] font-bold uppercase leading-[16px] text-black",c),o[0]=l,o[1]=c,o[2]=a):a=o[2];let u=s?"Live":"Not live";return o[3]!==a||o[4]!==u?(i=(0,t.jsx)("div",{className:a,id:"live-indicator",children:u}),o[3]=a,o[4]=u,o[5]=i):i=o[5],i}])},591224,936830,e=>{"use strict";var t=e.i(10785),n=e.i(203350);e.s(["trackPaidReactionChangeAmount",0,({mint:e,livestreamId:r,amountSol:a,context:i})=>{let o={mint:e,livestreamId:r,actionType:t.PaidReactionActionType.CHANGE_AMOUNT,amountSol:a};(0,n.recordUserEvent)((0,t.createInteractPaidReaction)(o),i)},"trackPaidReactionClosePicker",0,({mint:e,livestreamId:r,emojiId:a,emoji:i,amountSol:o,context:s})=>{let l={mint:e,livestreamId:r,actionType:t.PaidReactionActionType.CLOSE_PICKER,emojiId:a,emoji:i,amountSol:o};(0,n.recordUserEvent)((0,t.createInteractPaidReaction)(l),s)},"trackPaidReactionOpenPicker",0,({mint:e,livestreamId:r,emojiId:a,emoji:i,context:o})=>{let s={mint:e,livestreamId:r,actionType:t.PaidReactionActionType.OPEN_PICKER,emojiId:a,emoji:i};(0,n.recordUserEvent)((0,t.createInteractPaidReaction)(s),o)},"trackPaidReactionSelectEmoji",0,({mint:e,livestreamId:r,emojiId:a,emoji:i,context:o})=>{let s={mint:e,livestreamId:r,actionType:t.PaidReactionActionType.SELECT_EMOJI,emojiId:a,emoji:i};(0,n.recordUserEvent)((0,t.createInteractPaidReaction)(s),o)},"trackPurchaseError",0,({mint:e,livestreamId:r,emojiId:a,emoji:i,amountSol:o,errorType:s,context:l})=>{let c={mint:e,livestreamId:r,status:t.Status.ERROR,emojiId:a,emoji:i,amountSol:o,errorType:s};(0,n.recordUserEvent)((0,t.createCodeReactionPurchased)(c),l)},"trackPurchaseSuccess",0,({mint:e,livestreamId:r,emojiId:a,emoji:i,amountSol:o,context:s})=>{let l={mint:e,livestreamId:r,status:t.Status.SUCCESS,emojiId:a,emoji:i,amountSol:o};(0,n.recordUserEvent)((0,t.createCodeReactionPurchased)(l),s)}],591224);var r=e.i(649785),a=e.i(281675);e.s(["useRateLimit",0,e=>{let t,n,i=(0,r.c)(4),{delayMs:o}=e,s=(0,a.useRef)(0);i[0]!==o?(t=()=>{let e=Date.now();return e-s.current>=o&&(s.current=e,!0)},i[0]=o,i[1]=t):t=i[1];let l=t;return i[2]!==l?(n={canPerformAction:l},i[2]=l,i[3]=n):n=i[3],n}],936830)},491769,e=>{"use strict";let t=new class{handlers=[];emit(e){[...this.handlers].forEach(t=>t(e))}subscribe(e){return this.handlers.push(e),()=>{this.handlers=this.handlers.filter(t=>t!==e)}}clearHandlers(){this.handlers=[]}};e.s(["reactionEvents",0,t])},762230,e=>{"use strict";var t=e.i(649785),n=e.i(93336),r=e.i(936830),a=e.i(54567),i=e.i(491769);e.s(["useSendReaction",0,()=>{let e,o,s,l=(0,t.c)(6),{localParticipant:c}=(0,n.useLocalParticipant)();l[0]===Symbol.for("react.memo_cache_sentinel")?(e={delayMs:500},l[0]=e):e=l[0];let{canPerformAction:u}=(0,r.useRateLimit)(e);l[1]!==u||l[2]!==c?(o=(e,t,n)=>{if(!u())return void a.logger.debug("[useSendReaction] Network reaction rate-limited.",{emojiId:e});let r={type:"reaction",emojiId:e,message:t,senderIdentity:c.identity,purchase:n,initialXSeed:Math.random()};i.reactionEvents.emit(r);try{let i=new TextEncoder().encode(JSON.stringify(r));c.publishData(i,{topic:"reactions-v1",reliable:!0}),a.logger.debug("[useSendReaction] Sent reaction data to network",{emojiId:e,message:t,purchase:n})}catch(r){a.logger.error("[useSendReaction] Failed to send reaction data to network",{emojiId:e,message:t,purchase:n,error:r instanceof Error?r.message:String(r)})}},l[1]=u,l[2]=c,l[3]=o):o=l[3];let d=o;return l[4]!==d?(s={sendReaction:d},l[4]=d,l[5]=s):s=l[5],s}])},992349,e=>{"use strict";var t,n=((t={}).THUMBS_UP="thumbs-up",t.ROCKET="rocket",t.TADA="tada",t.PARTY_FACE="party-face",t.HEART_EYES="heart-eyes",t.SOB="sob",t.JOY="joy",t.GRIN="grin",t);e.s(["ReactionEmojiDetails",0,{"thumbs-up":{assetFilename:"thumbs-up.json",staticCharacter:""},rocket:{assetFilename:"rocket.json",staticCharacter:""},tada:{assetFilename:"tada.json",staticCharacter:""},"party-face":{assetFilename:"party-face.json",staticCharacter:""},"heart-eyes":{assetFilename:"heart-eyes.json",staticCharacter:""},sob:{assetFilename:"sob.json",staticCharacter:""},joy:{assetFilename:"joy.json",staticCharacter:""},grin:{assetFilename:"grin.json",staticCharacter:""}},"ReactionEmojiId",()=>n])},795079,e=>{"use strict";var t=e.i(78436),n=e.i(992349);let r=(0,t.create)(e=>({lastSelectedEmoji:n.ReactionEmojiId.PARTY_FACE,setLastSelectedEmoji:t=>e({lastSelectedEmoji:t})}));e.s(["useReactionsStore",0,r])},511121,e=>{"use strict";let t=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t};e.s(["nanoid",()=>t],511121)},434480,e=>{"use strict";var t=e.i(511121),n=e.i(992349);e.s(["generateReactionItemId",0,e=>`${e}-${(0,t.nanoid)()}`,"getEmojiCharacterForPalette",0,e=>n.ReactionEmojiDetails[e].staticCharacter,"getReactionAssetPath",0,e=>{let t=n.ReactionEmojiDetails[e];return t.assetFilename?`/livestreams/reactions/${t.assetFilename}`:""}])},768710,e=>{"use strict";e.s(["BLUR_BUTTON_CLASS",0,"bg-[#1B1D27]/60 backdrop-blur-[12px]","BLUR_DIALOG_CLASS",0,"rounded-[8px] backdrop-blur-[20px]"])},169617,98076,e=>{"use strict";var t=e.i(942765),n=e.i(281675),r=e.i(591224),a=e.i(967388),i=e.i(275762),o=e.i(762230),s=e.i(325320),l=e.i(795079),c=e.i(54567),u=e.i(434480),d=e.i(649785),m=e.i(157633),f=e.i(968717),h=e.i(264458),v=e.i(812423),g=e.i(166037),y=e.i(768710);let b=e=>{let n,r,a=(0,d.c)(3),{className:i}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M13.3333 4L5.99996 11.3333L2.66663 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),a[0]=n):n=a[0],a[1]!==i?(r=(0,t.jsx)("div",{className:i,children:n}),a[1]=i,a[2]=r):r=a[2],r};var _=e.i(518742);let T=e=>{let n,r,a,i,o,s,l,c=(0,d.c)(16),{value:u,label:m,selected:v,className:g}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,h.default)("flex h-8 cursor-pointer items-center rounded-md px-4 py-3 text-xs outline-none hover:bg-white/20","data-[state=checked]:text-livestream-green"),c[0]=n):n=c[0],c[1]!==g?(r=(0,h.default)("flex items-center gap-2 lowercase first-letter:uppercase",g),c[1]=g,c[2]=r):r=c[2],c[3]!==v?(a=(0,t.jsx)("div",{children:v?(0,t.jsx)(b,{}):(0,t.jsx)("div",{className:"w-4"})}),c[3]=v,c[4]=a):a=c[4],c[5]!==m?(i=(0,_.truncateText)(m,25),c[5]=m,c[6]=i):i=c[6],c[7]!==i?(o=(0,t.jsx)(f.ItemText,{className:"truncate",children:i}),c[7]=i,c[8]=o):o=c[8],c[9]!==r||c[10]!==a||c[11]!==o?(s=(0,t.jsxs)("div",{className:r,children:[a,o]}),c[9]=r,c[10]=a,c[11]=o,c[12]=s):s=c[12],c[13]!==s||c[14]!==u?(l=(0,t.jsx)(f.Item,{value:u,className:n,children:s}),c[13]=s,c[14]=u,c[15]=l):l=c[15],l},k=(0,n.forwardRef)(({selectedValue:e,isOpen:r,onOpenChange:a,onValueChange:i,options:o,renderInPortal:s=!1,showSelectedValue:l,openDirection:c="bottom",openOffset:u=15,icon:d,title:b,footer:_,triggerClassName:k,...E},S)=>{let w=(0,n.useMemo)(()=>o.find(t=>t.value===e),[o,e]),x=(0,n.useCallback)(e=>{a?.(e)},[a]),C=(0,n.useMemo)(()=>r?"top"===c?"down":"up":"top"===c?"up":"down",[r,c]),I=(0,n.useRef)(null),R=b||"Open selector";return(0,t.jsxs)(f.Root,{value:e,onValueChange:i,onOpenChange:x,open:r,children:[(0,t.jsxs)(f.Trigger,{ref:S,"aria-label":R,className:(0,h.default)("flex items-center","bg-transparent text-white focus:outline-none",k),onClick:()=>x(!r),...E,children:[l?.show&&w&&(0,t.jsx)("div",{className:"flex items-center overflow-hidden",children:(0,t.jsx)("p",{className:(0,h.default)("truncate text-[14px] leading-[18px]",l?.className),children:w?.label})}),(0,t.jsx)(f.Icon,{children:d?(0,t.jsx)(d,{isOpen:r}):(0,t.jsx)(m.IconChevronDownSmall,{size:v.ICON_SIZE,className:(0,h.default)("transition-transform duration-200 ease-in-out","up"===C&&"rotate-180")})})]}),s?(0,t.jsx)("div",{ref:I,children:(0,t.jsx)(f.Portal,{container:I.current,children:(0,t.jsxs)(f.Content,{side:"top"===c?"top":"bottom",position:"popper",sideOffset:u,className:(0,h.default)("-translate-x-2 overflow-hidden rounded-xl p-2 text-white shadow-lg","bg-bg-secondary/80",y.BLUR_BUTTON_CLASS),style:{zIndex:g.Z_INDEXES.Selector.content},children:[b&&(0,t.jsx)("p",{className:"p-1 text-xs lowercase text-white first-letter:uppercase",children:b}),o.map((n,r)=>(0,t.jsx)(T,{value:n.value,label:n.label,selected:e===n.value,className:"text-xs"},r)),_]})})}):(0,t.jsx)(f.Portal,{children:(0,t.jsxs)(f.Content,{side:"top"===c?"top":"bottom",position:"popper",sideOffset:u,className:(0,h.default)("-translate-x-2 overflow-hidden rounded-xl p-2 text-white shadow-lg",y.BLUR_BUTTON_CLASS),style:{zIndex:g.Z_INDEXES.Selector.content},children:[b&&(0,t.jsx)("p",{className:"p-1 text-xs lowercase text-white first-letter:uppercase",children:b}),o.map((n,r)=>(0,t.jsx)(T,{value:n.value,label:n.label,selected:e===n.value},r)),_]})})]})});k.displayName="Selector",e.s(["Selector",0,k],98076);let E=e=>{let n,r,a,i=(0,d.c)(5),{className:o}=e;return i[0]!==o?(n=(0,h.default)(o),i[0]=o,i[1]=n):n=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:"M5.33333 6.00065L8 3.33398L10.6667 6.00065M5.33333 10.0007L8 12.6673L10.6667 10.0007",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"square"})})}),i[2]=r):r=i[2],i[3]!==n?(a=(0,t.jsx)("div",{className:n,children:r}),i[3]=n,i[4]=a):a=i[4],a},S=[{label:"0.01",value:"0.01"},{label:"0.1",value:"0.1"},{label:"1",value:"1"}],w=e=>{let o,l,c,u,m,f,h,v,g=(0,d.c)(18),{amount:y,setAmount:b,onBuy:_,setForceShowControls:T}=e,{mintId:E}=(0,s.useLivestreamContext)(),w=(0,i.useLivestream)(E),C=w?.id?String(w.id):"",[I,R]=(0,n.useState)(!1);g[0]!==I||g[1]!==T?(o=()=>{T(I)},l=[I,T],g[0]=I,g[1]=T,g[2]=o,g[3]=l):(o=g[2],l=g[3]),(0,n.useEffect)(o,l),g[4]!==C||g[5]!==E||g[6]!==b?(c=e=>{b(e),(0,r.trackPaidReactionChangeAmount)({mint:E,livestreamId:C,amountSol:parseFloat(e),context:a.PAID_REACTION_SOURCE_CONTEXTS.REACTION_PICKER})},g[4]=C,g[5]=E,g[6]=b,g[7]=c):c=g[7];let P=c;return g[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)("span",{children:"buy"}),g[8]=u):u=g[8],g[9]===Symbol.for("react.memo_cache_sentinel")?(m={show:!0,className:"text-black"},g[9]=m):m=g[9],g[10]!==y||g[11]!==P||g[12]!==I?(f=(0,t.jsx)(k,{isOpen:I,options:S,selectedValue:y,onValueChange:P,onOpenChange:R,showSelectedValue:m,openDirection:"top",icon:x}),g[10]=y,g[11]=P,g[12]=I,g[13]=f):f=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)("span",{children:"SOL"}),g[14]=h):h=g[14],g[15]!==_||g[16]!==f?(v=(0,t.jsxs)("div",{onClick:_,className:"flex h-full w-32 cursor-pointer select-none items-center justify-center gap-1 rounded-lg bg-livestream-green-dark px-4 py-2 text-[14px] text-black",children:[u,f,h]}),g[15]=_,g[16]=f,g[17]=v):v=g[17],v};function x(){return(0,t.jsx)(E,{className:"text-black opacity-50"})}var C=e.i(670169);let I=(0,n.forwardRef)(({icon:e,label:n,className:r,disabled:a,...i},o)=>(0,t.jsx)("button",{ref:o,"aria-label":n,disabled:a,className:(0,h.default)("flex items-center justify-center rounded-lg p-1","text-white transition-colors duration-150",a&&"cursor-not-allowed opacity-50",!a&&"hover:bg-white/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",r),type:"button",...i,children:e}));I.displayName="IconButton";var R=e.i(162786);let P=e=>{let n,r,a,i=(0,d.c)(8),{className:o,direction:s}=e,l=void 0===s?"down":s,c="up"===l&&"rotate-180",u="left"===l&&"rotate-90",m="right"===l&&"-rotate-90";return i[0]!==o||i[1]!==c||i[2]!==u||i[3]!==m?(n=(0,h.default)(o,c,u,m),i[0]=o,i[1]=c,i[2]=u,i[3]=m,i[4]=n):n=i[4],i[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.23571 8.15497C8.10553 8.28515 7.89448 8.28515 7.7643 8.15497L5.80474 6.19541C5.54439 5.93506 5.12228 5.93506 4.86193 6.19541C4.60158 6.45576 4.60158 6.87787 4.86193 7.13822L6.82149 9.09778C7.47237 9.74866 8.52764 9.74865 9.17852 9.09778L11.1381 7.13822C11.3984 6.87787 11.3984 6.45576 11.1381 6.19541C10.8777 5.93506 10.4556 5.93506 10.1953 6.19541L8.23571 8.15497Z",fill:"currentColor"})}),i[5]=r):r=i[5],i[6]!==n?(a=(0,t.jsx)("div",{className:n,children:r}),i[6]=n,i[7]=a):a=i[7],a};var N=e.i(992349);let A=e=>{let n,r,a,i,o,s,c=(0,d.c)(14),{onSelect:m,message:f,setMessage:h}=e,v=(0,l.useReactionsStore)(L);c[0]!==m||c[1]!==v?(n=e=>{v(e),m(e)},c[0]=m,c[1]=v,c[2]=n):n=c[2];let g=n;return c[3]!==g?(r=(0,t.jsx)("div",{className:"custom-scrollbar flex w-[300px] gap-2 overflow-x-auto pb-2",children:Object.values(N.ReactionEmojiId).map(e=>(0,t.jsx)("button",{onClick:()=>g(e),className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full text-2xl hover:bg-white/10",children:(0,u.getEmojiCharacterForPalette)(e)},e))}),c[3]=g,c[4]=r):r=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("label",{className:"mb-2 text-sm font-medium text-white",htmlFor:"reaction-message-input",children:"Message (optional)"}),c[5]=a):a=c[5],c[6]!==h?(i=e=>h(e.target.value),c[6]=h,c[7]=i):i=c[7],c[8]!==f||c[9]!==i?(o=(0,t.jsx)("input",{id:"reaction-message-input",type:"text",placeholder:"Enter...",className:"w-[300px] rounded-md border border-gray-600 bg-gray-700 px-4 py-2 text-white placeholder:text-gray-400",value:f,onChange:i}),c[8]=f,c[9]=i,c[10]=o):o=c[10],c[11]!==r||c[12]!==o?(s=(0,t.jsxs)("div",{className:"flex flex-col gap-3 p-4",children:[r,a,o]}),c[11]=r,c[12]=o,c[13]=s):s=c[13],s};function L(e){return e.setLastSelectedEmoji}let O=e=>{let n,r,a,i,o=(0,d.c)(9),{isPopoverOpen:s}=e,c=(0,l.useReactionsStore)(D),m=s?"up":"down";return o[0]!==m?(n=(0,t.jsx)(P,{direction:m,className:"h-4 w-4 text-white"}),o[0]=m,o[1]=n):n=o[1],o[2]!==c?(r=c?(0,u.getEmojiCharacterForPalette)(c):"",o[2]=c,o[3]=r):r=o[3],o[4]!==r?(a=(0,t.jsx)("span",{className:"text-2xl",children:r}),o[4]=r,o[5]=a):a=o[5],o[6]!==n||o[7]!==a?(i=(0,t.jsxs)("div",{className:"flex items-center gap-1 px-1",children:[n,a]}),o[6]=n,o[7]=a,o[8]=i):i=o[8],i},M=e=>{let n,o,c,m,f,h,v,y,b=(0,d.c)(26),{message:_,setMessage:T,setForceShowControls:k,currentAmount:E}=e,{mintId:S}=(0,s.useLivestreamContext)(),w=(0,i.useLivestream)(S),x=w?.id?String(w.id):"",{value:P,setValue:N,setFalse:L}=(0,R.useBoolean)(!1),{lastSelectedEmoji:M}=(0,l.useReactionsStore)();b[0]!==E||b[1]!==M||b[2]!==x||b[3]!==S||b[4]!==k||b[5]!==N?(n=e=>{e?(0,r.trackPaidReactionOpenPicker)({mint:S,livestreamId:x,emojiId:M??void 0,emoji:M?(0,u.getEmojiCharacterForPalette)(M):void 0,context:a.PAID_REACTION_SOURCE_CONTEXTS.REACTION_BUTTON}):(0,r.trackPaidReactionClosePicker)({mint:S,livestreamId:x,emojiId:M??void 0,emoji:M?(0,u.getEmojiCharacterForPalette)(M):void 0,amountSol:parseFloat(E),context:a.PAID_REACTION_SOURCE_CONTEXTS.REACTION_PICKER}),N(e),k(e)},b[0]=E,b[1]=M,b[2]=x,b[3]=S,b[4]=k,b[5]=N,b[6]=n):n=b[6];let D=n;b[7]!==L||b[8]!==x||b[9]!==S?(o=e=>{(0,r.trackPaidReactionSelectEmoji)({mint:S,livestreamId:x,emojiId:e,emoji:(0,u.getEmojiCharacterForPalette)(e),context:a.PAID_REACTION_SOURCE_CONTEXTS.REACTION_PICKER}),L()},b[7]=L,b[8]=x,b[9]=S,b[10]=o):o=b[10];let j=o;return b[11]!==P?(c=(0,t.jsx)(C.Trigger,{asChild:!0,children:(0,t.jsx)(I,{icon:(0,t.jsx)(O,{isPopoverOpen:P}),label:"Select Reaction",className:"bg-transparent p-0 hover:bg-transparent"})}),b[11]=P,b[12]=c):c=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(m={zIndex:g.Z_INDEXES.ReactionsPopover.content},b[13]=m):m=b[13],b[14]!==j||b[15]!==_||b[16]!==T?(f=(0,t.jsx)(A,{message:_,setMessage:T,onSelect:j}),b[14]=j,b[15]=_,b[16]=T,b[17]=f):f=b[17],b[18]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)(C.Arrow,{className:"fill-[#1B1D27]/80"}),b[18]=h):h=b[18],b[19]!==f?(v=(0,t.jsx)(C.Portal,{children:(0,t.jsxs)(C.Content,{sideOffset:10,side:"top",align:"center",className:"rounded-lg bg-bg-secondary/80 shadow-lg backdrop-blur-sm",style:m,children:[f,h]})}),b[19]=f,b[20]=v):v=b[20],b[21]!==D||b[22]!==P||b[23]!==c||b[24]!==v?(y=(0,t.jsxs)(C.Root,{open:P,onOpenChange:D,children:[c,v]}),b[21]=D,b[22]=P,b[23]=c,b[24]=v,b[25]=y):y=b[25],y};function D(e){return e.lastSelectedEmoji}e.s(["SendReactionControl",0,({setForceShowControls:e})=>{let{onBuyReaction:d,mintId:m}=(0,s.useLivestreamContext)(),f=(0,i.useLivestream)(m),h=f?.id?String(f.id):"",{lastSelectedEmoji:v}=(0,l.useReactionsStore)(),{sendReaction:g}=(0,o.useSendReaction)(),[y,b]=(0,n.useState)(S[0].value),[_,T]=(0,n.useState)(""),k=async()=>{if(!v)return;let e=parseFloat(y);try{await d?.(y,_),g(v,_,{amount:y,currency:"SOL"}),(0,r.trackPurchaseSuccess)({mint:m,livestreamId:h,emojiId:v,emoji:(0,u.getEmojiCharacterForPalette)(v),amountSol:e,context:a.PAID_REACTION_SOURCE_CONTEXTS.REACTION_BUTTON}),T("")}catch(n){let t=n instanceof Error?n.message:"Unknown error";c.logger.error("Buy transaction failed:",{error:n}),(0,r.trackPurchaseError)({mint:m,livestreamId:h,emojiId:v,emoji:(0,u.getEmojiCharacterForPalette)(v),amountSol:e,errorType:t,context:a.PAID_REACTION_SOURCE_CONTEXTS.REACTION_BUTTON})}};return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(M,{message:_,setMessage:T,setForceShowControls:e,currentAmount:y}),(0,t.jsx)(w,{amount:y,setAmount:b,onBuy:k,setForceShowControls:e})]})}],169617)},797948,e=>{"use strict";var t=e.i(10785),n=e.i(203350);let r=(e,{mint:r,livestreamId:a,targetParticipant:i,context:o})=>{let s={mint:r,livestreamId:a??"",targetParticipant:i,actionType:e,scope:t.PinScopeType.LOCAL};(0,n.recordUserEvent)((0,t.createInteractPinParticipant)(s),o)};e.s(["trackChangeVideoQuality",0,({fromQuality:e,toQuality:r,mint:a,livestreamId:i,contentType:o,context:s})=>{(0,n.recordUserEvent)((0,t.createChangeVideoQuality)({fromQuality:e,toQuality:r,mint:a,livestreamId:i,contentType:o}),s)},"trackChangeVideoView",0,({fromView:e,toView:r,mint:a,livestreamId:i,contentType:o,context:s})=>{(0,n.recordUserEvent)((0,t.createChangeVideoView)({fromView:e,toView:r,mint:a,livestreamId:i??"",contentType:o}),s)},"trackMuteVideo",0,({mint:e,livestreamId:r,isMuted:a,contentType:i,context:o})=>{(0,n.recordUserEvent)((0,t.createInteractMuteVideo)({mint:e,livestreamId:r??"",isMuted:a,contentType:i}),o)},"trackViewerLocalPin",0,e=>r(t.PinActionType.PIN,e),"trackViewerLocalUnpin",0,e=>r(t.PinActionType.UNPIN,e)])},932874,816896,e=>{"use strict";var t=e.i(305288);e.s(["isTrackReference",()=>t.a1],932874);var n=e.i(10785),r=e.i(203350);let a=(e,{mint:t,livestreamId:a,context:i})=>{(0,r.recordUserEvent)((0,n.createInteractStageViewer)({mint:t,livestreamId:a,actionType:e}),i)},i=(e,{mint:t,livestreamId:a,targetUser:i,context:o})=>{(0,r.recordUserEvent)((0,n.createInteractStageHost)({mint:t,livestreamId:a,actionType:e,targetUser:i}),o)},o=(e,{mint:t,livestreamId:a,targetParticipant:i,context:o})=>{let s={mint:t,livestreamId:a??"",targetParticipant:i,actionType:e,scope:n.PinScopeType.GLOBAL};(0,r.recordUserEvent)((0,n.createInteractPinParticipant)(s),o)};e.s(["trackHostAcceptRaisedHand",0,e=>i(n.StageHostActionType.ACCEPT_RAISED_HAND,e),"trackHostApproveScreenShare",0,e=>i(n.StageHostActionType.APPROVE_SCREEN_SHARE,e),"trackHostDenyScreenShare",0,e=>i(n.StageHostActionType.DENY_SCREEN_SHARE,e),"trackHostGlobalPin",0,e=>o(n.PinActionType.PIN,e),"trackHostGlobalUnpin",0,e=>o(n.PinActionType.UNPIN,e),"trackHostInvite",0,e=>i(n.StageHostActionType.INVITE,e),"trackHostRejectRaisedHand",0,e=>i(n.StageHostActionType.REJECT_RAISED_HAND,e),"trackHostRemove",0,e=>i(n.StageHostActionType.REMOVE,e),"trackViewerAcceptInvite",0,e=>a(n.StageViewerActionType.ACCEPT_INVITE,e),"trackViewerDeclineInvite",0,e=>a(n.StageViewerActionType.DECLINE_INVITE,e),"trackViewerLeaveStage",0,e=>a(n.StageViewerActionType.LEAVE,e),"trackViewerLowerHand",0,e=>a(n.StageViewerActionType.LOWER_HAND,e),"trackViewerRaiseHand",0,e=>a(n.StageViewerActionType.RAISE_HAND,e),"trackViewerRequestScreenShare",0,e=>a(n.StageViewerActionType.REQUEST_SCREEN_SHARE,e)],816896)},905944,(e,t,n)=>{!function(r,a){"use strict";if("function"==typeof define&&define.amd){let r;void 0!==(r=a(e.r,n,t))&&e.v(r)}else t.exports?t.exports=a():r.log=a()}(e.e,function(){"use strict";var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],a={},i=null;function o(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var n=this.getLevel(),a=0;a<r.length;a++){var i=r[a];this[i]=a<n?e:this.methodFactory(i,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function u(r,a,i){var l;return"debug"===(l=r)&&(l="log"),typeof console!==t&&("trace"===l&&n?s:void 0!==console[l]?o(console,l):void 0!==console.log?o(console,"log"):e)||c.apply(this,arguments)}function d(e,n){var o,s,c,d=this,m="loglevel";function f(){var e;if(typeof window!==t&&m){try{e=window.localStorage[m]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(m),a=n.indexOf(r+"=");-1!==a&&(e=/^([^;]+)/.exec(n.slice(a+r.length+1))[1])}catch(e){}return void 0===d.levels[e]&&(e=void 0),e}}function h(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?m+=":"+e:"symbol"==typeof e&&(m=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||u,d.getLevel=function(){return null!=c?c:null!=s?s:o},d.setLevel=function(e,n){return c=h(e),!1!==n&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&m){try{window.localStorage[m]=n;return}catch(e){}try{window.document.cookie=encodeURIComponent(m)+"="+n+";"}catch(e){}}}(c),l.call(d)},d.setDefaultLevel=function(e){s=h(e),f()||d.setLevel(e,!1)},d.resetLevel=function(){if(c=null,typeof window!==t&&m){try{window.localStorage.removeItem(m)}catch(e){}try{window.document.cookie=encodeURIComponent(m)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}l.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(i!==d&&(o=h(i.getLevel())),l.call(d),i===d)for(var e in a)a[e].rebuild()},o=h(i?i.getLevel():"WARN");var v=f();null!=v&&(c=h(v)),l.call(d)}(i=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=a[e];return t||(t=a[e]=new d(e,i.methodFactory)),t};var m=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=m),i},i.getLoggers=function(){return a},i.default=i,i})},414948,198584,498497,685812,e=>{"use strict";var t,n,r=e.i(942765),a=e.i(649785),i=e.i(281675),o=e.i(162786),s=e.i(932874),l=e.i(967388),c=e.i(816896),u=e.i(797948),d=e.i(132838),m=e.i(936736),f=e.i(54567),h=e.i(484169);let v=e=>({...e,source:(e=>{switch(e){case h.Track.Source.Camera:return 1;case h.Track.Source.Microphone:return 2;case h.Track.Source.ScreenShare:return 3;case h.Track.Source.ScreenShareAudio:return 4;default:return 0}})(e.source)});async function g(e){let{mintId:t,pins:n}=e;f.logger.debug("[useUpdatePins] Sending updated pins to backend",{mintId:t,count:n.length});let r=n.map(v);return m.api.post("livestream/metadata",{json:{mintId:t,pins:r}})}function y(e,t){let{mintId:n,pins:r}=t;f.logger.debug("[useUpdatePins] Successfully updated pins",{mintId:n,pinCount:r.length})}function b(e,t){let{mintId:n}=t,r=e instanceof Error?e.message:String(e);f.logger.error("[useUpdatePins] Failed to update pins",{mintId:n,error:r})}var _=e.i(325320),T=e.i(305288);e.s(["useRoomContext",()=>T.f],198584);var T=T;e.i(422957);var k=e.i(905944);e.i(852687);var E=e.i(824627);function S(e){return"function"==typeof e}function w(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var x=w(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function C(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var I=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,n,r,a,i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var o=(0,E.__values)(i),s=o.next();!s.done;s=o.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else i.remove(this);var l=this.initialTeardown;if(S(l))try{l()}catch(e){a=e instanceof x?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=(0,E.__values)(c),d=u.next();!d.done;d=u.next()){var m=d.value;try{N(m)}catch(e){a=null!=a?a:[],e instanceof x?a=(0,E.__spreadArray)((0,E.__spreadArray)([],(0,E.__read)(a)),(0,E.__read)(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(a)throw new x(a)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)N(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(n=this._finalizers)?n:[]).push(e)}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&C(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&C(n,e),e instanceof t&&e._removeParent(this)},(e=new t).closed=!0,t.EMPTY=e,t}(),R=I.EMPTY;function P(e){return e instanceof I||e&&"closed"in e&&S(e.remove)&&S(e.add)&&S(e.unsubscribe)}function N(e){S(e)?e():e.unsubscribe()}var A=void 0,L={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=L.delegate;return(null==a?void 0:a.setTimeout)?a.setTimeout.apply(a,(0,E.__spreadArray)([e,t],(0,E.__read)(n))):setTimeout.apply(void 0,(0,E.__spreadArray)([e,t],(0,E.__read)(n)))},clearTimeout:function(e){var t=L.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function O(e){L.setTimeout(function(){!1;throw e})}function M(){}var D=j("C",void 0,void 0);function j(e,t,n){return{kind:e,value:t,error:n}}var U=null;function F(e){var t,n,r,a;1;e()}var H=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,P(t)&&t.add(n)):n.destination=W,n}return(0,E.__extends)(t,e),t.create=function(e,t,n){return new G(e,t,n)},t.prototype.next=function(e){this.isStopped?$(j("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?$(j("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?$(D,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(I),B=Function.prototype.bind;function V(e,t){return B.call(e,t)}var q=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){z(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){z(e)}else z(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){z(e)}},e}(),G=function(e){function t(t,n,r){var a,i,o=e.call(this)||this;return S(t)||!t?a={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a=t,o.destination=new q(a),o}return(0,E.__extends)(t,e),t}(H);function z(e){1;O(e)}function $(e,t){}var W={closed:!0,next:M,error:function(e){throw e},complete:M},K="function"==typeof Symbol&&Symbol.observable||"@@observable";function Q(e){return e}var Y=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this,a=!function(e){return e&&e instanceof H||e&&S(e.next)&&S(e.error)&&S(e.complete)&&P(e)}(e)?new G(e,t,n):e;return F(function(){var e=r.operator,t=r.source;a.add(e?e.call(a,t):t?r._subscribe(a):r._trySubscribe(a))}),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=X(t))(function(t,r){var a=new G({next:function(t){try{e(t)}catch(e){r(e),a.unsubscribe()}},error:r,complete:t});n.subscribe(a)})},e.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},e.prototype[K]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?Q:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=X(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function X(e){var t;return null!=(t=null!=e?e:A)?t:Promise}var J=w(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Z=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,E.__extends)(t,e),t.prototype.lift=function(e){var t=new ee(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new J},t.prototype.next=function(e){var t=this;F(function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var a=(0,E.__values)(t.currentObservers),i=a.next();!i.done;i=a.next())i.value.next(e)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}})},t.prototype.error=function(e){var t=this;F(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}})},t.prototype.complete=function(){var e=this;F(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,a=this.observers;return n||r?R:(this.currentObservers=null,a.push(e),new I(function(){t.currentObservers=null,C(a,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new Y;return e.source=this,e},t.create=function(e,t){return new ee(e,t)},t}(Y),ee=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,E.__extends)(t,e),t.prototype.next=function(e){var t,n;null==(n=null==(t=this.destination)?void 0:t.next)||n.call(t,e)},t.prototype.error=function(e){var t,n;null==(n=null==(t=this.destination)?void 0:t.error)||n.call(t,e)},t.prototype.complete=function(){var e,t;null==(t=null==(e=this.destination)?void 0:e.complete)||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!=(n=null==(t=this.source)?void 0:t.subscribe(e))?n:R},t}(Z);function et(e){return function(t){if(S(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function en(e,t,n,r,a){return new er(e,t,n,r,a)}var er=function(e){function t(t,n,r,a,i,o){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=o,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return(0,E.__extends)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null==(t=this.onFinalize)||t.call(this)}},t}(H),ea=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ei(e){return S(null==e?void 0:e.then)}function eo(e){return Symbol.asyncIterator&&S(null==e?void 0:e[Symbol.asyncIterator])}function es(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var el="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ec(e){return S(null==e?void 0:e[el])}function eu(e){return(0,E.__asyncGenerator)(this,arguments,function(){var t,n,r;return(0,E.__generator)(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,(0,E.__await)(t.read())];case 3:if(r=(n=a.sent()).value,!n.done)return[3,5];return[4,(0,E.__await)(void 0)];case 4:return[2,a.sent()];case 5:return[4,(0,E.__await)(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function ed(e){return S(null==e?void 0:e.getReader)}function em(e){if(e instanceof Y)return e;if(null!=e){var t,n,r,a;if(S(e[K])){return t=e,new Y(function(e){var n=t[K]();if(S(n.subscribe))return n.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if(ea(e)){return n=e,new Y(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}if(ei(e)){return r=e,new Y(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,O)})}if(eo(e))return ep(e);if(ec(e)){return a=e,new Y(function(e){var t,n;try{for(var r=(0,E.__values)(a),i=r.next();!i.done;i=r.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.complete()})}if(ed(e))return ep(eu(e))}throw es(e)}function ep(e){return new Y(function(t){(function(e,t){var n,r,a,i;return(0,E.__awaiter)(this,void 0,void 0,function(){var o;return(0,E.__generator)(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=(0,E.__asyncValues)(e),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a={error:s.sent()},[3,11];case 6:if(s.trys.push([6,,9,10]),!(r&&!r.done&&(i=n.return)))return[3,8];return[4,i.call(n)];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}function ef(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=!1);var i=t.schedule(function(){n(),a?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!a)return i}function eh(e){var t;return(t=e[e.length-1])&&S(t.schedule)?e.pop():void 0}function ev(e,t){return void 0===t&&(t=0),et(function(n,r){n.subscribe(en(r,function(n){return ef(r,e,function(){return r.next(n)},t)},function(){return ef(r,e,function(){return r.complete()},t)},function(n){return ef(r,e,function(){return r.error(n)},t)}))})}function eg(e,t){return void 0===t&&(t=0),et(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function ey(e,t){if(!e)throw Error("Iterable cannot be null");return new Y(function(n){ef(n,t,function(){var r=e[Symbol.asyncIterator]();ef(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function eb(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(function e(t,n,r){return(void 0===r&&(r=1/0),S(n))?e(function(e,r){var a;return(a=function(t,a){return n(e,t,r,a)},et(function(e,t){var n=0;e.subscribe(en(t,function(e){t.next(a.call(void 0,e,n++))}))}))(em(t(e,r)))},r):("number"==typeof n&&(r=n),et(function(e,n){var a,i,o,s,l,c,u,d;return a=r,i=[],o=0,s=0,l=!1,c=function(){!l||i.length||o||n.complete()},u=function(e){return o<a?d(e):i.push(e)},d=function(e){o++;var r=!1;em(t(e,s++)).subscribe(en(n,function(e){n.next(e)},function(){r=!0},void 0,function(){if(r)try{for(o--;i.length&&o<a;)!function(){var e=i.shift();d(e)}();c()}catch(e){n.error(e)}}))},e.subscribe(en(n,u,function(){l=!0,c()})),function(){}}))})(Q,1)((e=eh(t))?function(e,t){if(null!=e){if(S(e[K]))return em(e).pipe(eg(t),ev(t));if(ea(e))return new Y(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})});if(ei(e))return em(e).pipe(eg(t),ev(t));if(eo(e))return ey(e,t);if(ec(e))return new Y(function(n){var r;return ef(n,t,function(){r=e[el](),ef(n,t,function(){var e,t,a;try{t=(e=r.next()).value,a=e.done}catch(e){n.error(e);return}a?n.complete():n.next(t)},0,!0)}),function(){return S(null==r?void 0:r.return)&&r.return()}});if(ed(e))return ey(eu(e),t)}throw es(e)}(t,e):em(t))}function e_(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=eh(e);return et(function(t,r){(n?eb(e,t,n):eb(e,t)).subscribe(r)})}function eT(e){var t=Z.call(this)||this;return t._value=e,t}(0,E.__extends)(eT,Z),Object.defineProperty(eT.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),eT.prototype._subscribe=function(e){var t=Z.prototype._subscribe.call(this,e);return t.closed||e.next(this._value),t},eT.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,n=this._value;if(e)throw t;return this._throwIfClosed(),n},eT.prototype.next=function(e){Z.prototype.next.call(this,this._value=e)};var ek=function(e){function t(t,n){return e.call(this)||this}return(0,E.__extends)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(I),eE={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=eE.delegate;return(null==a?void 0:a.setInterval)?a.setInterval.apply(a,(0,E.__spreadArray)([e,t],(0,E.__read)(n))):setInterval.apply(void 0,(0,E.__spreadArray)([e,t],(0,E.__read)(n)))},clearInterval:function(e){var t=eE.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},eS=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return(0,E.__extends)(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n,r=this.id,a=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(a,r,t)),this.pending=!0,this.delay=t,this.id=null!=(n=this.id)?n:this.requestAsyncId(a,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),eE.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&eE.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,C(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(ek),ew={now:function(){return(ew.delegate||Date).now()},delegate:void 0},ex=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=ew.now,e}();function eC(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0===t)return void e();if(!1!==t){var a=new G({next:function(){a.unsubscribe(),e()}});return em(t.apply(void 0,(0,E.__spreadArray)([],(0,E.__read)(n)))).subscribe(a)}}new(function(e){function t(t,n){void 0===n&&(n=ex.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return(0,E.__extends)(t,e),t.prototype.flush=function(e){var t,n=this.actions;if(this._active)return void n.push(e);this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=n.shift())if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}},t}(ex))(eS),w(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}),Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,h.RoomEvent.ConnectionStateChanged,h.RoomEvent.RoomMetadataChanged,h.RoomEvent.ActiveSpeakersChanged,h.RoomEvent.ConnectionQualityChanged,h.RoomEvent.ParticipantConnected,h.RoomEvent.ParticipantDisconnected,h.RoomEvent.ParticipantPermissionsChanged,h.RoomEvent.ParticipantMetadataChanged,h.RoomEvent.ParticipantNameChanged,h.RoomEvent.ParticipantAttributesChanged,h.RoomEvent.TrackMuted,h.RoomEvent.TrackUnmuted,h.RoomEvent.TrackPublished,h.RoomEvent.TrackUnpublished,h.RoomEvent.TrackStreamStateChanged,h.RoomEvent.TrackSubscriptionFailed,h.RoomEvent.TrackSubscriptionPermissionChanged,h.RoomEvent.TrackSubscriptionStatusChanged,h.RoomEvent.LocalTrackPublished,h.RoomEvent.LocalTrackUnpublished,h.ParticipantEvent.TrackPublished,h.ParticipantEvent.TrackUnpublished,h.ParticipantEvent.TrackMuted,h.ParticipantEvent.TrackUnmuted,h.ParticipantEvent.TrackStreamStateChanged,h.ParticipantEvent.TrackSubscribed,h.ParticipantEvent.TrackUnsubscribed,h.ParticipantEvent.TrackSubscriptionPermissionChanged,h.ParticipantEvent.TrackSubscriptionFailed,h.ParticipantEvent.LocalTrackPublished,h.ParticipantEvent.LocalTrackUnpublished,h.ParticipantEvent.ConnectionQualityChanged,h.ParticipantEvent.IsSpeakingChanged,h.ParticipantEvent.ParticipantMetadataChanged,h.ParticipantEvent.ParticipantPermissionsChanged,h.ParticipantEvent.TrackMuted,h.ParticipantEvent.TrackUnmuted,h.ParticipantEvent.TrackPublished,h.ParticipantEvent.TrackUnpublished,h.ParticipantEvent.TrackStreamStateChanged,h.ParticipantEvent.TrackSubscriptionFailed,h.ParticipantEvent.TrackSubscriptionPermissionChanged,h.ParticipantEvent.TrackSubscriptionStatusChanged,h.ParticipantEvent.LocalTrackPublished,h.ParticipantEvent.LocalTrackUnpublished;var eI=k.default.getLogger("lk-components-js");eI.setDefaultLevel("WARN");var eR=((t=eR||{}).AgentState="lk.agent.state",t.PublishOnBehalf="lk.publish_on_behalf",t.TranscriptionFinal="lk.transcription_final",t.TranscriptionSegmentId="lk.segment_id",t.TranscribedTrackId="lk.transcribed_track_id",t);function eP(e,...t){return new Y(n=>{let r=()=>{n.next(e)};return t.forEach(t=>{e.on(t,r)}),()=>{t.forEach(t=>{e.off(t,r)})}}).pipe(e_(e))}var{load:eN,save:eA}=(n="lk-user-choices",{load:()=>(function(e){if("undefined"==typeof localStorage)return void eI.error("Local storage is not available.");try{let t=localStorage.getItem(e);if(!t)return void eI.warn(`Item with key ${e} does not exist in local storage.`);return JSON.parse(t)}catch(e){eI.error(`Error getting item from local storage: ${e}`);return}})(n),save:e=>(function(e,t){if("undefined"==typeof localStorage)return void eI.error("Local storage is not available.");try{if(t){let n=Object.fromEntries(Object.entries(t).filter(([,e])=>""!==e));localStorage.setItem(e,JSON.stringify(n))}}catch(e){eI.error(`Error setting item to local storage: ${e}`)}})(n,e)}),eL=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=ew);var a=e.call(this)||this;return a._bufferSize=t,a._windowTime=n,a._timestampProvider=r,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=n===1/0,a._bufferSize=Math.max(1,t),a._windowTime=Math.max(1,n),a}return(0,E.__extends)(t,e),t.prototype.next=function(t){var n=this.isStopped,r=this._buffer,a=this._infiniteTimeWindow,i=this._timestampProvider,o=this._windowTime;!n&&(r.push(t),a||r.push(i.now()+o)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),a=0;a<r.length&&!e.closed;a+=n?1:2)e.next(r[a]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,n=this._buffer,r=this._infiniteTimeWindow,a=(r?1:2)*e;if(e<1/0&&a<n.length&&n.splice(0,n.length-a),!r){for(var i=t.now(),o=0,s=1;s<n.length&&n[s]<=i;s+=2)o=s;o&&n.splice(0,o+1)}},t}(Z);function eO(e,t,n){var r,a,i,o,s,l,c,u,d,m,f,h,v,g=!1;return e&&"object"==typeof e?(v=void 0===(m=e.bufferSize)?1/0:m,t=void 0===(f=e.windowTime)?1/0:f,g=void 0!==(h=e.refCount)&&h,n=e.scheduler):v=null!=e?e:1/0,i=void 0===(a=(r={connector:function(){return new eL(v,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:g}).connector)?function(){return new Z}:a,s=void 0===(o=r.resetOnError)||o,c=void 0===(l=r.resetOnComplete)||l,d=void 0===(u=r.resetOnRefCountZero)||u,function(e){var t,n,r,a=0,o=!1,l=!1,u=function(){null==n||n.unsubscribe(),n=void 0},m=function(){u(),t=r=void 0,o=l=!1},f=function(){var e=t;m(),null==e||e.unsubscribe()};return et(function(e,h){a++,l||o||u();var v=r=null!=r?r:i();h.add(function(){0!=--a||l||o||(n=eC(f,d))}),v.subscribe(h),!t&&a>0&&(t=new G({next:function(e){return v.next(e)},error:function(e){l=!0,u(),n=eC(m,s,e),v.error(e)},complete:function(){o=!0,u(),n=eC(m,c),v.complete()}}),em(e).subscribe(t))})(e)}}let eM={pins:[],recordingActive:!1,mode:"interactive"},eD=new WeakMap,ej=()=>{let e,t,n,r=(0,a.c)(6),o=(0,T.f)(),[s,l]=(0,i.useState)(void 0),[c,u]=(0,i.useState)(!0);return r[0]!==o?(e=()=>{if(!o)return;let e=(function(e){if(!e)throw Error("getRoomMetadataObservable: room is undefined");let t=eD.get(e);!t&&(t=new Y(t=>{let n=eP(e,h.RoomEvent.Connected,h.RoomEvent.Reconnected,h.RoomEvent.RoomMetadataChanged).subscribe(()=>{t.next(e.metadata??JSON.stringify(eM))});return()=>n?.unsubscribe()}).pipe(e_(e.metadata??JSON.stringify(eM)),eO({bufferSize:1,refCount:!0})),eD.set(e,t));return t})(o).subscribe({next:e=>{try{let t=JSON.parse(e);l(t),u(!1)}catch(t){f.logger.error("[useRoomMetadata] Failed to parse room metadata",{error:t instanceof Error?t.message:String(t),metadata:e}),l(void 0),u(!1)}},error:e=>{f.logger.error("[useRoomMetadata] Error in metadata observable",{error:e instanceof Error?e.message:String(e)}),l(void 0),u(!1)}});return()=>e.unsubscribe()},t=[o],r[0]=o,r[1]=e,r[2]=t):(e=r[1],t=r[2]),(0,i.useEffect)(e,t),r[3]!==c||r[4]!==s?(n={metadata:s,isLoading:c},r[3]=c,r[4]=s,r[5]=n):n=r[5],n};e.s(["useRoomMetadata",0,ej],498497);var eU=e.i(275762),T=T,eF=e.i(202565);function eH(e){return[e.localParticipant,...Array.from(e.remoteParticipants.values())].filter(Boolean).filter(eF.isHostOrCoHost)}let eB=new WeakMap;function eV(){let e,t,n,r,o,s,l,c=(0,a.c)(15),u=(0,T.f)();c[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],c[0]=e):e=c[0];let[d,m]=(0,i.useState)(e);c[1]!==d?(t=d.filter(ez),c[1]=d,c[2]=t):t=c[2];let v=t;c[3]!==d?(n=d.filter(eG),c[3]=d,c[4]=n):n=c[4];let g=n;c[5]!==d?(r=d.filter(eq),c[5]=d,c[6]=r):r=c[6];let y=r;return c[7]!==u?(o=()=>{if(!u)return;let e=(function(e){if(!e)throw Error("getHostCoHostObservable: room is undefined");let t=eB.get(e);if(!t){let n;t=new Y(t=>(t.next(eH(e)),n=eP(e,h.RoomEvent.TrackPublished,h.RoomEvent.TrackUnpublished,h.RoomEvent.LocalTrackPublished,h.RoomEvent.LocalTrackUnpublished,h.RoomEvent.TrackSubscribed,h.RoomEvent.TrackUnsubscribed,h.RoomEvent.TrackMuted,h.RoomEvent.TrackUnmuted,h.RoomEvent.ParticipantMetadataChanged).subscribe(()=>{t.next(eH(e))}),()=>n?.unsubscribe())).pipe(eO({bufferSize:1,refCount:!0})),eB.set(e,t)}return t})(u).subscribe(e=>{try{let t=[];e.forEach(e=>{e.getTrackPublications().forEach(n=>{t.push({participant:e,publication:n,source:n.source,isMuted:n.isMuted})})}),m(t)}catch(e){f.logger.error("useObserveTracks: failed to build track list",{error:e instanceof Error?e.message:String(e)})}});return()=>e.unsubscribe()},s=[u],c[7]=u,c[8]=o,c[9]=s):(o=c[8],s=c[9]),(0,i.useEffect)(o,s),c[10]!==d||c[11]!==v||c[12]!==g||c[13]!==y?(l={allTracks:d,cameraTracks:v,microphoneTracks:g,screenShareTracks:y},c[10]=d,c[11]=v,c[12]=g,c[13]=y,c[14]=l):l=c[14],l}function eq(e){return e.source===h.Track.Source.ScreenShare}function eG(e){return e.source===h.Track.Source.Microphone}function ez(e){return e.source===h.Track.Source.Camera}e.s(["useObserveTracks",()=>eV],685812);var e$=e.i(692948);function eW(e){return void 0!==e}function eK(e){return e.trackSid}function eQ(e){return void 0!==e}let eY=(0,i.createContext)(void 0);function eX(){let e=(0,i.useContext)(eY);if(void 0===e)throw Error("useLivestreamFeaturesContext must be used within a LivestreamFeaturesProvider");return e}e.s(["LivestreamFeaturesProvider",0,e=>{let t,n,m,h=(0,a.c)(32),{children:v,showHostCameraOverlay:T,showParticipantRow:k,showMainNameOverlay:E,allowParticipantControls:S,showViewerParticipationControls:w,showHostRaiseHandIndicator:x}=e,C=void 0===k||k,I=void 0===E||E,R=void 0===S||S,P=void 0===w||w,N=void 0===x||x,{viewMode:A}=(0,_.useLivestreamContext)();h[0]!==R||h[1]!==N||h[2]!==C||h[3]!==P||h[4]!==A?(t=(({viewMode:e,allowParticipantControlsProp:t,showViewerParticipationControlsProp:n,showHostRaiseHandIndicatorProp:r,showParticipantRowProp:a})=>{let i="recording"===e;return{allowParticipantControls:!i&&t,showViewerParticipationControls:!i&&n,showHostRaiseHandIndicator:!i&&r,showParticipantRow:a}})({viewMode:A,allowParticipantControlsProp:R,showViewerParticipationControlsProp:P,showHostRaiseHandIndicatorProp:N,showParticipantRowProp:C}),h[0]=R,h[1]=N,h[2]=C,h[3]=P,h[4]=A,h[5]=t):t=h[5];let{allowParticipantControls:L,showViewerParticipationControls:O,showHostRaiseHandIndicator:M,showParticipantRow:D}=t,{globalPins:j,effectivePins:U,addGlobalPin:F,removeGlobalPin:H,localPins:B,globalPinsToRemove:V,addLocalPin:q,removeLocalPin:G,locallyHideGlobalPin:z,locallyShowGlobalPin:$}=(()=>{let e,t,n,r,o,m,h,v,T,k,E=(0,a.c)(56),{isHost:S}=(0,e$.useLivekitRole)(),{allTracks:w}=eV(),{mintId:x}=(0,_.useLivestreamContext)(),C=(0,eU.useLivestream)(x),{pins:I,sendPins:R,isUpdatingPins:P}=(()=>{let e,t,n,r,i,o=(0,a.c)(9),{mintId:s}=(0,_.useLivestreamContext)(),{metadata:l}=ej(),{mutate:c,isPending:u}=((i=(0,a.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(r={mutationFn:g,onSuccess:y,onError:b},i[0]=r):r=i[0],(0,d.useMutation)(r));o[0]!==l?.pins?(e=l?.pins??[],o[0]=l?.pins,o[1]=e):e=o[1];let m=e;o[2]!==s||o[3]!==c?(t=e=>{c({mintId:s,pins:e})},o[2]=s,o[3]=c,o[4]=t):t=o[4];let f=t;return o[5]!==u||o[6]!==m||o[7]!==f?(n={pins:m,sendPins:f,isUpdatingPins:u},o[5]=u,o[6]=m,o[7]=f,o[8]=n):n=o[8],n})();E[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],E[0]=e):e=E[0];let[N,A]=(0,i.useState)(e);E[1]===Symbol.for("react.memo_cache_sentinel")?(t=[],E[1]=t):t=E[1];let[L,O]=(0,i.useState)(t),M=String(C?.id??0);E[2]!==I||E[3]!==S||E[4]!==M||E[5]!==x||E[6]!==R?(n=e=>{if(S)if((0,s.isTrackReference)(e)){let t=e.publication?{trackSid:e.publication.trackSid,participantIdentity:e.participant.identity,source:e.source}:null;if(!t||I.some(e=>e.trackSid===t.trackSid))return;R([...I,t]),(0,c.trackHostGlobalPin)({mint:x,livestreamId:M,targetParticipant:e.participant.identity,context:l.LIVESTREAM_SOURCE_CONTEXTS.CONTROLS})}else f.logger.warn("[useMultiPinState] addGlobalPin skipped: TrackReference is a placeholder or has no publication",{trackRef:e})},E[2]=I,E[3]=S,E[4]=M,E[5]=x,E[6]=R,E[7]=n):n=E[7];let D=n;E[8]!==I||E[9]!==S||E[10]!==M||E[11]!==x||E[12]!==R?(r=e=>{if(!S)return;let t=I.find(t=>t.trackSid===e),n=I.filter(t=>t.trackSid!==e);n.length!==I.length&&(R(n),(0,c.trackHostGlobalUnpin)({mint:x,livestreamId:M,targetParticipant:t?.participantIdentity??e,context:l.LIVESTREAM_SOURCE_CONTEXTS.CONTROLS}))},E[8]=I,E[9]=S,E[10]=M,E[11]=x,E[12]=R,E[13]=r):r=E[13];let j=r;E[14]!==M||E[15]!==x?(o=e=>{if((0,s.isTrackReference)(e)&&e.publication){let t={trackSid:e.publication.trackSid,participantIdentity:e.participant.identity,source:e.source};(0,u.trackViewerLocalPin)({mint:x,livestreamId:M,targetParticipant:e.participant.identity,context:l.LIVESTREAM_SOURCE_CONTEXTS.CONTROLS}),A(e=>e.find(e=>e.trackSid===t.trackSid)?e:[...e,t]),O(e=>e.filter(e=>e!==t.trackSid))}else f.logger.warn("[useMultiPinState] addLocalPin skipped: Invalid trackRef")},E[14]=M,E[15]=x,E[16]=o):o=E[16];let U=o;E[17]!==M||E[18]!==N||E[19]!==x?(m=e=>{let t=N.find(t=>t.trackSid===e);A(t=>t.filter(t=>t.trackSid!==e)),(0,u.trackViewerLocalUnpin)({mint:x,livestreamId:M,targetParticipant:t?.participantIdentity??e,context:l.LIVESTREAM_SOURCE_CONTEXTS.CONTROLS})},E[17]=M,E[18]=N,E[19]=x,E[20]=m):m=E[20];let F=m;E[21]!==I||E[22]!==M||E[23]!==x?(h=e=>{let t=I.find(t=>t.trackSid===e);O(t=>t.includes(e)?t:[...t,e]),A(t=>t.filter(t=>t.trackSid!==e)),(0,u.trackViewerLocalUnpin)({mint:x,livestreamId:M,targetParticipant:t?.participantIdentity??e,context:l.LIVESTREAM_SOURCE_CONTEXTS.CONTROLS}),f.logger.debug("[useMultiPinState] locallyHideGlobalPin",{trackSid:e,mintId:x})},E[21]=I,E[22]=M,E[23]=x,E[24]=h):h=E[24];let H=h;E[25]!==I||E[26]!==M||E[27]!==x?(v=e=>{let t=I.find(t=>t.trackSid===e);O(t=>t.filter(t=>t!==e)),(0,u.trackViewerLocalPin)({mint:x,livestreamId:M,targetParticipant:t?.participantIdentity??e,context:l.LIVESTREAM_SOURCE_CONTEXTS.CONTROLS}),f.logger.debug("[useMultiPinState] locallyShowGlobalPin",{trackSid:e,mintId:x})},E[25]=I,E[26]=M,E[27]=x,E[28]=v):v=E[28];let B=v;if(E[29]!==w||E[30]!==I||E[31]!==L||E[32]!==N){let e,t,n,r,a;E[34]!==w?(e=e=>w.find(t=>t.publication?.trackSid===e.trackSid),E[34]=w,E[35]=e):e=E[35];let i=I.map(e).filter(eW);E[36]!==L?(t=e=>!L.includes(e.publication.trackSid),E[36]=L,E[37]=t):t=E[37];let o=i.filter(t);E[38]!==N?(n=new Set(N.map(eK)),E[38]=N,E[39]=n):n=E[39];let s=n;E[40]!==s?(r=e=>!s.has(e.publication.trackSid),E[40]=s,E[41]=r):r=E[41];let l=o.filter(r);E[42]!==w?(a=e=>w.find(t=>t.publication?.trackSid===e.trackSid),E[42]=w,E[43]=a):a=E[43];let c=N.map(a).filter(eQ);f.logger.debug("[useMultiPinState] Recalculated effectivePins",{globalPinsCount:I.length,localPinsCount:N.length,globalPinsToRemoveCount:L.length,allTracksCount:w.length,resolvedEffectivePinsCount:l.length+c.length}),T=[...l,...c],E[29]=w,E[30]=I,E[31]=L,E[32]=N,E[33]=T}else T=E[33];let V=T;return E[44]!==D||E[45]!==U||E[46]!==V||E[47]!==I||E[48]!==L||E[49]!==P||E[50]!==N||E[51]!==H||E[52]!==B||E[53]!==j||E[54]!==F?(k={globalPins:I,localPins:N,globalPinsToRemove:L,effectivePins:V,isUpdatingPins:P,addGlobalPin:D,removeGlobalPin:j,addLocalPin:U,removeLocalPin:F,locallyHideGlobalPin:H,locallyShowGlobalPin:B},E[44]=D,E[45]=U,E[46]=V,E[47]=I,E[48]=L,E[49]=P,E[50]=N,E[51]=H,E[52]=B,E[53]=j,E[54]=F,E[55]=k):k=E[55],k})(),[W,K]=(0,i.useState)(!1),[Q,Y]=(0,i.useState)(null),[X,J]=(0,i.useState)(1),{value:Z,toggleValue:ee,setFalse:et}=(0,o.useBoolean)(!1);h[6]!==F||h[7]!==q||h[8]!==L||h[9]!==Z||h[10]!==U||h[11]!==W||h[12]!==j||h[13]!==V||h[14]!==B||h[15]!==z||h[16]!==$||h[17]!==H||h[18]!==G||h[19]!==Q||h[20]!==T||h[21]!==M||h[22]!==I||h[23]!==D||h[24]!==O||h[25]!==ee||h[26]!==et||h[27]!==X?(n={globalPins:j,effectivePins:U,addGlobalPin:F,removeGlobalPin:H,localPins:B,globalPinsToRemove:V,addLocalPin:q,removeLocalPin:G,locallyHideGlobalPin:z,locallyShowGlobalPin:$,fullScreen:W,setFullScreen:K,audioMuted:Z,unmuteAudio:et,toggleMute:ee,rtmpCredentials:Q,setRtmpCredentials:Y,showParticipantRow:D,showMainNameOverlay:I,allowParticipantControls:L,showViewerParticipationControls:O,showHostRaiseHandIndicator:M,showHostCameraOverlay:T,volume:X,setVolume:J},h[6]=F,h[7]=q,h[8]=L,h[9]=Z,h[10]=U,h[11]=W,h[12]=j,h[13]=V,h[14]=B,h[15]=z,h[16]=$,h[17]=H,h[18]=G,h[19]=Q,h[20]=T,h[21]=M,h[22]=I,h[23]=D,h[24]=O,h[25]=ee,h[26]=et,h[27]=X,h[28]=n):n=h[28];let en=n;return h[29]!==v||h[30]!==en?(m=(0,r.jsx)(eY.Provider,{value:en,children:v}),h[29]=v,h[30]=en,h[31]=m):m=h[31],m},"useLivestreamFeaturesContext",()=>eX],414948)},92551,e=>{"use strict";var t=e.i(649785),n=e.i(10785),r=e.i(281675),a=e.i(967388),i=e.i(797948),o=e.i(275762),s=e.i(325320),l=e.i(414948);e.s(["useVideoControlEvents",0,()=>{let e,c,u,d,m=(0,t.c)(14),{mintId:f}=(0,s.useLivestreamContext)(),h=(0,o.useLivestream)(f),{audioMuted:v,toggleMute:g,fullScreen:y,setFullScreen:b}=(0,l.useLivestreamFeaturesContext)(),_=h?.id?String(h.id):void 0;m[0]!==v||m[1]!==_||m[2]!==f||m[3]!==g?(e=()=>{(0,i.trackMuteVideo)({mint:f,livestreamId:_,isMuted:!v,contentType:n.VideoContentType.LIVESTREAM,context:a.LIVESTREAM_SOURCE_CONTEXTS.CONTROLS}),g()},m[0]=v,m[1]=_,m[2]=f,m[3]=g,m[4]=e):e=m[4];let T=e;return m[5]!==y||m[6]!==h||m[7]!==_||m[8]!==f||m[9]!==b?(c=()=>{if(!h)return;let e=()=>{let e=!!document.fullscreenElement;e!==y&&((0,i.trackChangeVideoView)({mint:f,livestreamId:_,fromView:e?n.VideoDisplayMode.DEFAULT:n.VideoDisplayMode.FULLSCREEN,toView:e?n.VideoDisplayMode.FULLSCREEN:n.VideoDisplayMode.DEFAULT,contentType:n.VideoContentType.LIVESTREAM,context:a.LIVESTREAM_SOURCE_CONTEXTS.CONTROLS}),b(e))};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},u=[y,h,_,f,b],m[5]=y,m[6]=h,m[7]=_,m[8]=f,m[9]=b,m[10]=c,m[11]=u):(c=m[10],u=m[11]),(0,r.useEffect)(c,u),m[12]!==T?(d={onToggleMute:T},m[12]=T,m[13]=d):d=m[13],d}])},47606,e=>{"use strict";var t=e.i(10785),n=e.i(203350);e.s(["trackLivestreamEvent",0,e=>{switch(e.type){case"INTERACT_CLIP_LIVESTREAM":(0,n.recordUserEvent)((0,t.createInteractClipLivestream)({livestreamId:e.livestreamId,mint:e.mint,clipFlow:e.clipFlow,timeToLoadMs:e.timeToLoadMs}),e.context);break;case"FOCUS_CLIP_TITLE":(0,n.recordUserEvent)((0,t.createFocusClipTitle)({livestreamId:e.livestreamId,mint:e.mint}),e.context);break;case"CHANGE_CLIP_TITLE":(0,n.recordUserEvent)((0,t.createChangeClipTitle)({livestreamId:e.livestreamId,mint:e.mint,newTitle:e.newTitle}),e.context);break;case"CHANGE_CLIP_LENGTH":(0,n.recordUserEvent)((0,t.createChangeClipLength)({livestreamId:e.livestreamId,mint:e.mint,target:e.target,newStartSeconds:e.newStartSeconds,newEndSeconds:e.newEndSeconds,newLengthSeconds:e.newLengthSeconds}),e.context);break;case"INTERACT_SAVE_CLIP":(0,n.recordUserEvent)((0,t.createInteractSaveClip)({livestreamId:e.livestreamId,mint:e.mint,clipId:e.clipId,title:e.title,clipLengthSeconds:e.clipLengthSeconds,success:e.success,errorMessage:e.errorMessage}),e.context);break;case"INTERACT_CLOSE_CLIP_CREATION":(0,n.recordUserEvent)((0,t.createInteractCloseClipCreation)({livestreamId:e.livestreamId,mint:e.mint,title:e.title,clipLengthSeconds:e.clipLengthSeconds}),e.context);break;case"INTERACT_EDIT_CLIP":(0,n.recordUserEvent)((0,t.createInteractEditClip)({livestreamId:e.livestreamId,clipId:e.clipId,mint:e.mint}),e.context);break;case"CODE_CLIP_VIEWED":(0,n.recordUserEvent)((0,t.createCodeClipViewed)({clipId:e.clipId,mint:e.mint,creator:e.creator,clipCreator:e.clipCreator,viewDuration:e.viewDurationSeconds,viewDurationSeconds:e.viewDurationSeconds}),e.context);break;case"INTERACT_SHARE_CLIP":(0,n.recordUserEvent)((0,t.createInteractShare)({interactionType:t.InteractionType.CLICK,mint:e.mint,shareMethod:e.shareMethod,shareType:t.ShareType.LIVESTREAM_CLIP,shareUrl:e.shareUrl,pnlUsd:void 0,pnlPct:void 0,wrappedWalletAddresses:[]}),e.context);break;default:return}}])},383777,e=>{"use strict";var t=e.i(649785),n=e.i(10785),r=e.i(511518),a=e.i(281675),i=e.i(738045),o=e.i(967388),s=e.i(47606),l=e.i(132838),c=e.i(606933),u=e.i(936736),d=e.i(54567),m=e.i(852655);let f=["clip","preview","create"];var h=e.i(325320);let v=2*r.millisecondsInSecond;function g(){return Date.now()}function y(){}function b(){}e.s(["useClipPopover",0,e=>{let _,T,k,E,S,w,x,C,I,R,P,N,A,L,O,M,D=(0,t.c)(24),{onOpenChange:j,getTimestamp:U,audioControls:F}=e,H=void 0===U?g:U,{mintId:B}=(0,h.useLivestreamContext)(),V=(0,a.useRef)(null),q=(0,a.useRef)(null),G=(0,a.useRef)(""),z=(0,a.useRef)(!1),$=(0,a.useRef)(!1),W=(0,a.useRef)(0),K=F?.audioMuted??!1,Q=F?.toggleMute??y,Y=F?.unmuteAudio??b,[X,J]=(0,a.useState)(null),{mutate:Z,isPending:ee,data:et}=(N=(0,t.c)(9),A=(0,c.useQueryClient)(),L=(0,a.useRef)(null),N[0]===Symbol.for("react.memo_cache_sentinel")?(w=async e=>{let{roomName:t,startTimestamp:n,durationSeconds:r}=e;L.current=new AbortController,d.logger.debug("[useGetLivePreviewClip] Requesting preview clip",{roomName:t,startTimestamp:n,durationSeconds:r});let a=await u.api.post("clips/generate-highlight",{json:{roomName:t,startTimestamp:n,durationSeconds:r},signal:L.current.signal}).json();return d.logger.debug("[useGetLivePreviewClip] Preview clip success",{roomName:t,clipId:a.clipId}),a},N[0]=w):w=N[0],N[1]!==A?(x=(e,t)=>{A.invalidateQueries({queryKey:[m.GET_CLIPS_FOR_ROOM_QUERY_KEY,t.roomName]}),L.current=null},N[1]=A,N[2]=x):x=N[2],N[3]===Symbol.for("react.memo_cache_sentinel")?(C=(e,t)=>{d.logger.error("[useGetLivePreviewClip] Preview clip error",{roomName:t.roomName,startTimestamp:t.startTimestamp,durationSeconds:t.durationSeconds,errorMessage:e.message,error:e}),L.current=null},N[3]=C):C=N[3],N[4]!==x?(I={mutationKey:f,mutationFn:w,onSuccess:x,onError:C},N[4]=x,N[5]=I):I=N[5],O=(0,l.useMutation)(I),N[6]===Symbol.for("react.memo_cache_sentinel")?(R=e=>{L.current&&(L.current.abort(e),L.current=null)},N[6]=R):R=N[6],M=R,N[7]!==O?(P={...O,abort:M},N[7]=O,N[8]=P):P=N[8],P);D[0]!==K||D[1]!==Z||D[2]!==H||D[3]!==ee||D[4]!==B||D[5]!==Q?(_=e=>{if(ee)return;if(H()-W.current<v){!z.current||$.current||K||Q();return}let t=e??Math.floor((H()-i.PREVIEW_CLIP_DURATION_SECONDS*r.millisecondsInSecond)/r.millisecondsInSecond);q.current=H(),Z({roomName:B,startTimestamp:t,durationSeconds:i.PREVIEW_CLIP_DURATION_SECONDS},{onSuccess:()=>{let e=null!==q.current?H()-q.current:void 0;(0,s.trackLivestreamEvent)({type:"INTERACT_CLIP_LIVESTREAM",livestreamId:B,mint:B,clipFlow:n.ClipFlowType.CREATION,timeToLoadMs:e,context:o.CLIP_SOURCE_CONTEXTS.CLIP_BUTTON}),!z.current||$.current||K||Q()}})},D[0]=K,D[1]=Z,D[2]=H,D[3]=ee,D[4]=B,D[5]=Q,D[6]=_):_=D[6];let en=_;D[7]!==K||D[8]!==H||D[9]!==et?.duration||D[10]!==B||D[11]!==j||D[12]!==en||D[13]!==Y?(T=e=>{if(j(e),z.current=e,e){$.current=K;let e=Math.floor((H()-i.PREVIEW_CLIP_DURATION_SECONDS*r.millisecondsInSecond)/r.millisecondsInSecond);V.current=e,en(e);return}W.current=H(),(0,s.trackLivestreamEvent)({type:"INTERACT_CLOSE_CLIP_CREATION",livestreamId:B,mint:B,title:G.current||void 0,clipLengthSeconds:et?.duration,context:o.CLIP_SOURCE_CONTEXTS.CLIP_POPOVER}),J(null),V.current=null,$.current||Y()},D[7]=K,D[8]=H,D[9]=et?.duration,D[10]=B,D[11]=j,D[12]=en,D[13]=Y,D[14]=T):T=D[14];let er=T;D[15]!==en?(k=()=>{en(V.current)},D[15]=en,D[16]=k):k=D[16];let ea=k;D[17]===Symbol.for("react.memo_cache_sentinel")?(E=e=>{G.current=e},D[17]=E):E=D[17];let ei=E;return D[18]!==X||D[19]!==er||D[20]!==ee||D[21]!==et||D[22]!==ea?(S={handleOpenChange:er,isCreatingClip:ee,latestClip:et,retry:ea,setClipTitle:ei,createdClip:X,setCreatedClip:J},D[18]=X,D[19]=er,D[20]=ee,D[21]=et,D[22]=ea,D[23]=S):S=D[23],S}],383777)},447911,e=>{"use strict";var t=e.i(281675),n=e.i(162786);let r=()=>{if("undefined"==typeof document)return;let e=document,t=e.fullscreenElement??e.webkitFullscreenElement;if(t instanceof HTMLElement)return t};e.s(["usePortalContainer",0,()=>{let e=(0,t.useRef)(null);if(!e.current&&"undefined"!=typeof document){let t=document.createElement("div");t.className="fixed left-0 top-0 h-0 w-0",e.current=t}let a=e.current??void 0,{value:i,setValue:o}=(0,n.useBoolean)(!!r());return(0,t.useEffect)(()=>{if("undefined"==typeof document||!a)return;let e=()=>{let e=r();o(!!e);let t=e??document.body;a.parentElement!==t&&t.appendChild(a)};return e(),document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),a.remove()}},[a,o]),{container:a,isFullscreen:i}}])},735445,e=>{"use strict";var t=e.i(649785),n=e.i(10785),r=e.i(281675),a=e.i(967388),i=e.i(47606),o=e.i(162786),s=e.i(275762);e.s(["useClipPlayback",0,e=>{let l,c,u,d,m,f,h,v,g=(0,t.c)(39),{latestClip:y,playerRef:b,clipRange:_,mintId:T}=e,k=(0,s.useLivestream)(T);g[0]!==_[0]||g[1]!==_[1]||g[2]!==y.duration?(l=()=>Math.max(_[0]/100*y.duration,Math.min(_[1]/100*y.duration,0)),g[0]=_[0],g[1]=_[1],g[2]=y.duration,g[3]=l):l=g[3];let[E,S]=(0,r.useState)(l),w=(0,r.useRef)(!1),{value:x,setTrue:C,setFalse:I}=(0,o.useBoolean)(!1),{value:R,setTrue:P,setFalse:N}=(0,o.useBoolean)(!0),[A,L]=(0,r.useState)(null);g[4]!==_[0]||g[5]!==_[1]||g[6]!==y.duration?(c=()=>({startSeconds:_[0]/100*y.duration,endSeconds:_[1]/100*y.duration}),g[4]=_[0],g[5]=_[1],g[6]=y.duration,g[7]=c):c=g[7];let O=c;g[8]!==O||g[9]!==k||g[10]!==T||g[11]!==I||g[12]!==C?(u=(e,t)=>{let r=void 0===t?null:t;if(w.current=e,e?C():I(),L(r),e)return;let{startSeconds:o,endSeconds:s}=O();(0,i.trackLivestreamEvent)({type:"CHANGE_CLIP_LENGTH",livestreamId:k?.id?String(k.id):"0",mint:T,target:"start"===r?n.ClipLengthChangeTarget.START:"end"===r?n.ClipLengthChangeTarget.END:n.ClipLengthChangeTarget.DRAG,newStartSeconds:o,newEndSeconds:s,newLengthSeconds:s-o,context:a.CLIP_SOURCE_CONTEXTS.CLIP_POPOVER})},g[8]=O,g[9]=k,g[10]=T,g[11]=I,g[12]=C,g[13]=u):u=g[13];let M=u;g[14]!==O||g[15]!==y.duration||g[16]!==b?(d=e=>{if(!b.current)return;let t=Math.max(0,Math.min(100,e))/100*y.duration,{startSeconds:n,endSeconds:r}=O(),a=Math.max(n,Math.min(r,t));S(a),b.current.currentTime=a},g[14]=O,g[15]=y.duration,g[16]=b,g[17]=d):d=g[17];let D=d;g[18]!==O||g[19]!==b?(m=e=>{if(w.current)return;let{startSeconds:t,endSeconds:n}=O(),r=e;if(e<t&&(r=t),e>n&&(r=n),b.current&&r!==e&&(b.current.currentTime=r,r===n)){b.current.currentTime=t,S(t);return}S(r)},g[18]=O,g[19]=b,g[20]=m):m=g[20];let j=m;g[21]!==O||g[22]!==E||g[23]!==b||g[24]!==N?(f=()=>{if(!b.current)return;let{startSeconds:e,endSeconds:t}=O(),n=Math.max(e,Math.min(t,E));n>=t&&(n=e),b.current.currentTime!==n&&(b.current.currentTime=n),b.current.play(),N()},g[21]=O,g[22]=E,g[23]=b,g[24]=N,g[25]=f):f=g[25];let U=f;g[26]!==b||g[27]!==P?(h=()=>{b.current&&P()},g[26]=b,g[27]=P,g[28]=h):h=g[28];let F=h;return g[29]!==A||g[30]!==F||g[31]!==U||g[32]!==D||g[33]!==j||g[34]!==x||g[35]!==R||g[36]!==E||g[37]!==M?(v={playbackPosition:E,setPlaybackPosition:S,handlePlaybackPositionChange:D,setIsDragging:M,isDraggingRef:w,isDragging:x,activeHandle:A,handlePlayerTimeUpdate:j,handlePlayRequested:U,handlePauseRequested:F,isPaused:R},g[29]=A,g[30]=F,g[31]=U,g[32]=D,g[33]=j,g[34]=x,g[35]=R,g[36]=E,g[37]=M,g[38]=v):v=g[38],v}])},689250,141554,380749,699164,e=>{"use strict";var t=e.i(649785),n=e.i(10785),r=e.i(511518),a=e.i(281675),i=e.i(654747),o=e.i(967388),s=e.i(47606),l=e.i(226302);function c(){i.default.error("Failed to copy link")}e.s(["useClipShare",0,e=>{let u,d,m,f,h,v=(0,t.c)(21),{clipUrl:g,clipTitle:y,mint:b}=e,[_,T]=(0,a.useState)(!1);v[0]!==g||v[1]!==b?(u=()=>{navigator.clipboard.writeText(g).then(()=>{(0,s.trackLivestreamEvent)({type:"INTERACT_SHARE_CLIP",mint:b,shareMethod:n.ShareMethod.COPY_LINK,shareUrl:g,context:o.CLIP_SOURCE_CONTEXTS.CLIP_POPOVER}),T(!0),setTimeout(()=>T(!1),2*r.millisecondsInSecond)}).catch(c)},v[0]=g,v[1]=b,v[2]=u):u=v[2];let k=u;v[3]!==y||v[4]!==g||v[5]!==b?(d=()=>{(0,s.trackLivestreamEvent)({type:"INTERACT_SHARE_CLIP",mint:b,shareMethod:n.ShareMethod.DOWNLOAD,shareUrl:g,context:o.CLIP_SOURCE_CONTEXTS.CLIP_POPOVER}),(0,l.download)(g,y?`${y}.mp4`:"clip.mp4"),i.default.success("Download started!")},v[3]=y,v[4]=g,v[5]=b,v[6]=d):d=v[6];let E=d;v[7]!==y||v[8]!==g||v[9]!==b?(m=()=>{(0,s.trackLivestreamEvent)({type:"INTERACT_SHARE_CLIP",mint:b,shareMethod:n.ShareMethod.TWITTER,shareUrl:g,context:o.CLIP_SOURCE_CONTEXTS.CLIP_POPOVER});let e=encodeURIComponent(y),t=encodeURIComponent(g);window.open(`https://twitter.com/intent/tweet?text=${e}&url=${t}`,"_blank")},v[7]=y,v[8]=g,v[9]=b,v[10]=m):m=v[10];let S=m;v[11]!==y||v[12]!==g||v[13]!==b?(f=()=>{(0,s.trackLivestreamEvent)({type:"INTERACT_SHARE_CLIP",mint:b,shareMethod:n.ShareMethod.TELEGRAM,shareUrl:g,context:o.CLIP_SOURCE_CONTEXTS.CLIP_POPOVER});let e=encodeURIComponent(y),t=encodeURIComponent(g);window.open(`https://t.me/share/url?url=${t}&text=${e}`,"_blank")},v[11]=y,v[12]=g,v[13]=b,v[14]=f):f=v[14];let w=f;return v[15]!==k||v[16]!==E||v[17]!==w||v[18]!==S||v[19]!==_?(h={handleCopyLink:k,handleDownload:E,handleShareTelegram:w,handleShareTwitter:S,isCopied:_},v[15]=k,v[16]=E,v[17]=w,v[18]=S,v[19]=_,v[20]=h):h=v[20],h}],689250),e.s(["useClipTitleInput",0,e=>{let n,r,i,l,c=(0,t.c)(14),{mintId:u,onTitleChange:d}=e,[m,f]=(0,a.useState)(""),[h,v]=(0,a.useState)(""),g=(0,a.useRef)(!1);c[0]!==u||c[1]!==m?(n=()=>{g.current||(g.current=!0,(0,s.trackLivestreamEvent)({type:"FOCUS_CLIP_TITLE",livestreamId:u,mint:u,context:o.CLIP_SOURCE_CONTEXTS.CLIP_POPOVER})),v(m)},c[0]=u,c[1]=m,c[2]=n):n=c[2];let y=n;c[3]!==d?(r=e=>{f(e),d?.(e)},c[3]=d,c[4]=r):r=c[4];let b=r;c[5]!==u||c[6]!==m||c[7]!==h?(i=()=>{m!==h&&g.current&&(0,s.trackLivestreamEvent)({type:"CHANGE_CLIP_TITLE",livestreamId:u,mint:u,newTitle:m,context:o.CLIP_SOURCE_CONTEXTS.CLIP_POPOVER})},c[5]=u,c[6]=m,c[7]=h,c[8]=i):i=c[8];let _=i;return c[9]!==_||c[10]!==b||c[11]!==y||c[12]!==m?(l={title:m,handleTitleChange:b,handleTitleFocus:y,handleTitleBlur:_},c[9]=_,c[10]=b,c[11]=y,c[12]=m,c[13]=l):l=c[13],l}],141554);var u=e.i(132838),d=e.i(936736),m=e.i(54567),f=e.i(275762);async function h(e){return await d.api.post("clips/download",{json:e}).json()}e.s(["useDownloadHighlightClip",0,e=>{let n,a,i,c=(0,t.c)(9),{mintId:d,onSuccess:v,onError:g,autoDownload:y}=e,b=void 0!==y&&y,_=(0,f.useLivestream)(d);return c[0]!==b||c[1]!==_||c[2]!==v?(n=(e,t)=>{let n=t.durationMilliseconds/r.millisecondsInSecond;_?.id&&(0,s.trackLivestreamEvent)({type:"INTERACT_SAVE_CLIP",livestreamId:String(_.id),mint:t.roomName,clipId:e.clipId,title:t.title||"",clipLengthSeconds:n,success:!0,context:o.CLIP_SOURCE_CONTEXTS.CLIP_POPOVER}),b&&(0,l.download)(e.mp4Url),v?.(e)},c[0]=b,c[1]=_,c[2]=v,c[3]=n):n=c[3],c[4]!==g?(a=(e,t)=>{m.logger.error("[useDownloadHighlightClip] Clip download request error",{roomName:t.roomName,clipId:t.clipId,error:e.message}),g?.(e)},c[4]=g,c[5]=a):a=c[5],c[6]!==n||c[7]!==a?(i={mutationFn:h,onSuccess:n,onError:a},c[6]=n,c[7]=a,c[8]=i):i=c[8],(0,u.useMutation)(i)}],380749);var v=e.i(942765);e.s(["ShareButton",0,e=>{let n,r,a,i=(0,t.c)(9),{icon:o,label:s,onClick:l,activeLabel:c,isActive:u}=e,d=void 0!==u&&u,m=d&&c?c:s;i[0]!==o?(n=(0,v.jsx)("div",{className:"group-hover:border-primary-green flex h-12 w-12 items-center justify-center rounded-full border border-gray-700 bg-gray-800 transition-colors",children:o}),i[0]=o,i[1]=n):n=i[1];let f=`text-xs transition-colors ${d?"text-primary-green font-semibold":"text-gray-300"}`;return i[2]!==m||i[3]!==f?(r=(0,v.jsx)("span",{className:f,children:m}),i[2]=m,i[3]=f,i[4]=r):r=i[4],i[5]!==l||i[6]!==n||i[7]!==r?(a=(0,v.jsxs)("button",{onClick:l,className:"group flex flex-col items-center gap-2 rounded-xl px-4 py-3 transition-colors hover:bg-gray-800",children:[n,r]}),i[5]=l,i[6]=n,i[7]=r,i[8]=a):a=i[8],a}],699164)},681750,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(264458);e.s(["Input",0,e=>{let a,i,o,s,l,c,u,d,m=(0,n.c)(23);return m[0]!==e.className?(a=(0,r.default)("w-full",e.className),m[0]=e.className,m[1]=a):a=m[1],m[2]!==e.title?(i=e.title&&(0,t.jsx)("p",{className:"mb-2 text-sm text-white",children:e.title}),m[2]=e.title,m[3]=i):i=m[3],m[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.default)("group flex w-full items-center rounded-[12px] border border-[#35353B] bg-[#27272A] px-4 py-3 focus-within:border-[#4A4A4A] hover:border-[#4A4A4A]"),s=(0,r.default)("w-full text-sm","bg-[#27272A] text-white placeholder:text-[#71717A]","focus:outline-none focus:ring-0","cursor-auto"),m[4]=o,m[5]=s):(o=m[4],s=m[5]),m[6]!==e?(l=t=>e.onChange(t.target.value),m[6]=e,m[7]=l):l=m[7],m[8]!==e.disabled||m[9]!==e.maxLength||m[10]!==e.onBlur||m[11]!==e.onFocus||m[12]!==e.placeholder||m[13]!==e.value||m[14]!==l?(c=(0,t.jsx)("input",{className:s,placeholder:e.placeholder,onFocus:e.onFocus,value:e.value,onChange:l,onBlur:e.onBlur,maxLength:e.maxLength,disabled:e.disabled}),m[8]=e.disabled,m[9]=e.maxLength,m[10]=e.onBlur,m[11]=e.onFocus,m[12]=e.placeholder,m[13]=e.value,m[14]=l,m[15]=c):c=m[15],m[16]!==e.icon||m[17]!==c?(u=(0,t.jsxs)("div",{className:o,children:[c,e.icon]}),m[16]=e.icon,m[17]=c,m[18]=u):u=m[18],m[19]!==a||m[20]!==i||m[21]!==u?(d=(0,t.jsxs)("div",{className:a,children:[i,u]}),m[19]=a,m[20]=i,m[21]=u,m[22]=d):d=m[22],d}])},577654,e=>{"use strict";let t=(0,e.i(376530).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],577654)},443815,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(264458),a=e.i(675898);e.s(["Loading",0,e=>{let i,o,s=(0,n.c)(4),{className:l}=e;return s[0]!==l?(i=(0,r.default)("h-[1em] w-[1em] animate-spin duration-100",l),s[0]=l,s[1]=i):i=s[1],s[2]!==i?(o=(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(a.Loader,{strokeWidth:3,className:i})}),s[2]=i,s[3]=o):o=s[3],o}])},392444,828468,324197,879499,980746,881931,186246,e=>{"use strict";let t;var n,r,a,i,o,s,l,c,u,d,m,f,h,v,g,y,b,_,T,k=e.i(942765),E=e.i(649785),S=e.i(577654),w=e.i(323888);let x=e=>{let t,n,r,a=(0,E.c)(7),{title:i,description:o}=e,s=void 0===i?"Create clip":i,l=void 0===o?"Create a clip of the livestream for sharing on socials":o;return a[0]!==s?(t=(0,k.jsx)("h3",{className:"text-lg font-semibold text-white",children:s}),a[0]=s,a[1]=t):t=a[1],a[2]!==l?(n=(0,k.jsx)("p",{className:"text-sm text-gray-300",children:l}),a[2]=l,a[3]=n):n=a[3],a[4]!==t||a[5]!==n?(r=(0,k.jsxs)("div",{children:[t,n]}),a[4]=t,a[5]=n,a[6]=r):r=a[6],r};e.s(["ClipPopoverHeader",0,x],828468),e.s(["ClipPopoverErrorContent",0,e=>{let t,n,r,a,i=(0,E.c)(5),{onRetry:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,k.jsx)(x,{}),i[0]=t):t=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,k.jsx)(S.AlertTriangle,{className:"text-gray-500",size:18}),i[1]=n):n=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 rounded-md bg-white/5 px-3 py-3",children:[n,(0,k.jsx)("div",{className:"max-w-48",children:(0,k.jsx)("p",{className:"text-center text-sm text-gray-500",children:"Couldn't generate clip, please try again."})})]}),i[2]=r):r=i[2],i[3]!==o?(a=(0,k.jsxs)(k.Fragment,{children:[t,(0,k.jsxs)("div",{className:"flex w-full flex-col gap-3 py-4",children:[r,(0,k.jsx)("div",{className:"mt-1 flex w-full items-center justify-end",children:(0,k.jsx)(w.PumpButton,{onClick:o,label:"Try again",size:"medium",className:"px-5 py-2"})})]})]}),i[3]=o,i[4]=a):a=i[4],a}],392444),e.s(["ClipPopoverFooter",0,e=>{let t,n,r,a,i=(0,E.c)(11),{isPending:o,onCancel:s,onCreate:l,isLoading:c,disabled:u,isComplete:d,disabledReason:m}=e;e:{if(c){t="Loading...";break e}if(o){t="Creating...";break e}if(d){t="Done";break e}t="Create clip"}let f=t;i[0]!==o||i[1]!==s?(n=(0,k.jsx)(w.PumpButton,{label:"Cancel",onClick:s,disabled:o,appearance:"filled",variant:"dark",size:"medium"}),i[0]=o,i[1]=s,i[2]=n):n=i[2];let h=d?s:l,v=o||u,g=u?m:void 0;return i[3]!==f||i[4]!==h||i[5]!==v||i[6]!==g?(r=(0,k.jsx)(w.PumpButton,{label:f,onClick:h,disabled:v,variant:"primary",size:"medium",tooltip:g}),i[3]=f,i[4]=h,i[5]=v,i[6]=g,i[7]=r):r=i[7],i[8]!==n||i[9]!==r?(a=(0,k.jsxs)("div",{className:"flex h-10 justify-end gap-2",children:[n,r]}),i[8]=n,i[9]=r,i[10]=a):a=i[10],a}],324197);var C=e.i(281675),I=e.i(834649);let R="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function P(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function N(e){return"nodeType"in e}function A(e){var t,n;return e?P(e)?e:N(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function L(e){let{Document:t}=A(e);return e instanceof t}function O(e){return!P(e)&&e instanceof A(e).HTMLElement}function M(e){return e instanceof A(e).SVGElement}function D(e){return e?P(e)?e.document:N(e)?L(e)?e:O(e)||M(e)?e.ownerDocument:document:document:document}let j=R?C.useLayoutEffect:C.useEffect;function U(e){let t=(0,C.useRef)(e);return j(()=>{t.current=e}),(0,C.useCallback)(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function F(e,t){void 0===t&&(t=[e]);let n=(0,C.useRef)(e);return j(()=>{n.current!==e&&(n.current=e)},t),n}function H(e,t){let n=(0,C.useRef)();return(0,C.useMemo)(()=>{let t=e(n.current);return n.current=t,t},[...t])}function B(e){let t=U(e),n=(0,C.useRef)(null),r=(0,C.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,r]}function V(e){let t=(0,C.useRef)();return(0,C.useEffect)(()=>{t.current=e},[e]),t.current}let q={};function G(e,t){return(0,C.useMemo)(()=>{if(t)return t;let n=null==q[e]?0:q[e]+1;return q[e]=n,e+"-"+n},[e,t])}function z(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((t,n)=>{for(let[r,a]of Object.entries(n)){let n=t[r];null!=n&&(t[r]=n+e*a)}return t},{...t})}}let $=z(1),W=z(-1);function K(e){if(!e)return!1;let{KeyboardEvent:t}=A(e.target);return t&&e instanceof t}function Q(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=A(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let Y=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Y.Translate.toString(e),Y.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),X="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",J={display:"none"};function Z(e){let{id:t,value:n}=e;return C.default.createElement("div",{id:t,style:J},n)}function ee(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return C.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}let et=(0,C.createContext)(null),en={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},er={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ea(e){var t;let n,{announcements:r=er,container:a,hiddenTextDescribedById:i,screenReaderInstructions:o=en}=e,{announce:s,announcement:l}=function(){let[e,t]=(0,C.useState)("");return{announce:(0,C.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),c=G("DndLiveRegion"),[u,d]=(0,C.useState)(!1);if((0,C.useEffect)(()=>{d(!0)},[]),t=(0,C.useMemo)(()=>({onDragStart(e){let{active:t}=e;s(r.onDragStart({active:t}))},onDragMove(e){let{active:t,over:n}=e;r.onDragMove&&s(r.onDragMove({active:t,over:n}))},onDragOver(e){let{active:t,over:n}=e;s(r.onDragOver({active:t,over:n}))},onDragEnd(e){let{active:t,over:n}=e;s(r.onDragEnd({active:t,over:n}))},onDragCancel(e){let{active:t,over:n}=e;s(r.onDragCancel({active:t,over:n}))}}),[s,r]),n=(0,C.useContext)(et),(0,C.useEffect)(()=>{if(!n)throw Error("useDndMonitor must be used within a children of <DndContext>");return n(t)},[t,n]),!u)return null;let m=C.default.createElement(C.default.Fragment,null,C.default.createElement(Z,{id:i,value:o.draggable}),C.default.createElement(ee,{id:c,announcement:l}));return a?(0,I.createPortal)(m,a):m}function ei(){}(n=d||(d={})).DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable";let eo=Object.freeze({x:0,y:0});function es(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}let el=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,a=[];for(let e of r){let{id:r}=e,i=n.get(r);if(i){let n=function(e,t){let n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height);if(r<a&&n<i){let o=t.width*t.height,s=e.width*e.height,l=(a-r)*(i-n);return Number((l/(o+s-l)).toFixed(4))}return 0}(i,t);n>0&&a.push({id:r,data:{droppableContainer:e,value:n}})}}return a.sort(es)};function ec(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:eo}let eu=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})},ed={ignoreTransform:!1};function em(e,t){void 0===t&&(t=ed);let n=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:r}=A(e).getComputedStyle(e);t&&(n=function(e,t,n){let r=function(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!r)return e;let{scaleX:a,scaleY:i,x:o,y:s}=r,l=e.left-o-(1-a)*parseFloat(n),c=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=a?e.width/a:e.width,d=i?e.height/i:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}(n,t,r))}let{top:r,left:a,width:i,height:o,bottom:s,right:l}=n;return{top:r,left:a,width:i,height:o,bottom:s,right:l}}function ep(e){return em(e,{ignoreTransform:!0})}function ef(e,t){let n=[];return e?function r(a){var i,o;let s;if(null!=t&&n.length>=t||!a)return n;if(L(a)&&null!=a.scrollingElement&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!O(a)||M(a)||n.includes(a))return n;let l=A(e).getComputedStyle(a);return(a!==e&&(void 0===(i=l)&&(i=A(a).getComputedStyle(a)),s=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=i[e];return"string"==typeof t&&s.test(t)}))&&n.push(a),void 0===(o=l)&&(o=A(a).getComputedStyle(a)),"fixed"===o.position)?n:r(a.parentNode)}(e):n}function eh(e){let[t]=ef(e,1);return null!=t?t:null}function ev(e){return R&&e?P(e)?e:N(e)?L(e)||e===D(e).scrollingElement?window:O(e)?e:null:null:null}function eg(e){return P(e)?e.scrollX:e.scrollLeft}function ey(e){return P(e)?e.scrollY:e.scrollTop}function eb(e){return{x:eg(e),y:ey(e)}}function e_(e){return!!R&&!!e&&e===document.scrollingElement}function eT(e){let t={x:0,y:0},n=e_(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x;return{isTop:a,isLeft:i,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}(r=m||(m={}))[r.Forward=1]="Forward",r[r.Backward=-1]="Backward";let ek={x:.2,y:.2};function eE(e){return e.reduce((e,t)=>$(e,eb(t)),eo)}let eS=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+eg(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+ey(t),0)}]];class ew{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=ef(t),r=eE(n);for(const[t,a,i]of(this.rect={...e},this.width=e.width,this.height=e.height,eS))for(const e of a)Object.defineProperty(this,e,{get:()=>{let a=i(n),o=r[t]-a;return this.rect[e]+o},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ex{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function eC(e,t){let n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}function eI(e){e.preventDefault()}function eR(e){e.stopPropagation()}(a=f||(f={})).Click="click",a.DragStart="dragstart",a.Keydown="keydown",a.ContextMenu="contextmenu",a.Resize="resize",a.SelectionChange="selectionchange",a.VisibilityChange="visibilitychange",(i=h||(h={})).Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab";let eP={start:[h.Space,h.Enter],cancel:[h.Esc],end:[h.Space,h.Enter,h.Tab]},eN=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case h.Right:return{...n,x:n.x+25};case h.Left:return{...n,x:n.x-25};case h.Down:return{...n,y:n.y+25};case h.Up:return{...n,y:n.y-25}}};class eA{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new ex(D(t)),this.windowListeners=new ex(A(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(f.Resize,this.handleCancel),this.windowListeners.add(f.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(f.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function(e,t){if(void 0===t&&(t=em),!e)return;let{top:n,left:r,bottom:a,right:i}=t(e);eh(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(eo)}handleKeyDown(e){if(K(e)){let{active:t,context:n,options:r}=this.props,{keyboardCodes:a=eP,coordinateGetter:i=eN,scrollBehavior:o="smooth"}=r,{code:s}=e;if(a.end.includes(s))return void this.handleEnd(e);if(a.cancel.includes(s))return void this.handleCancel(e);let{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:eo;this.referenceCoordinates||(this.referenceCoordinates=c);let u=i(e,{active:t,context:n.current,currentCoordinates:c});if(u){let t=W(u,c),r={x:0,y:0},{scrollableAncestors:a}=n.current;for(let n of a){let a=e.code,{isTop:i,isRight:s,isLeft:l,isBottom:c,maxScroll:d,minScroll:m}=eT(n),f=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}(n),v={x:Math.min(a===h.Right?f.right-f.width/2:f.right,Math.max(a===h.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(a===h.Down?f.bottom-f.height/2:f.bottom,Math.max(a===h.Down?f.top:f.top+f.height/2,u.y))},g=a===h.Right&&!s||a===h.Left&&!l,y=a===h.Down&&!c||a===h.Up&&!i;if(g&&v.x!==u.x){let e=n.scrollLeft+t.x,i=a===h.Right&&e<=d.x||a===h.Left&&e>=m.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:o});i?r.x=n.scrollLeft-e:r.x=a===h.Right?n.scrollLeft-d.x:n.scrollLeft-m.x,r.x&&n.scrollBy({left:-r.x,behavior:o});break}if(y&&v.y!==u.y){let e=n.scrollTop+t.y,i=a===h.Down&&e<=d.y||a===h.Up&&e>=m.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:o});i?r.y=n.scrollTop-e:r.y=a===h.Down?n.scrollTop-d.y:n.scrollTop-m.y,r.y&&n.scrollBy({top:-r.y,behavior:o});break}}this.handleMove(e,$(W(u,this.referenceCoordinates),r))}}}handleMove(e,t){let{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eL(e){return!!(e&&"distance"in e)}function eO(e){return!!(e&&"delay"in e)}eA.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=eP,onActivation:a}=t,{active:i}=n,{code:o}=e.nativeEvent;if(r.start.includes(o)){let t=i.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class eM{constructor(e,t,n){var r;void 0===n&&(n=function(e){let{EventTarget:t}=A(e);return e instanceof t?e:D(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:i}=a;this.props=e,this.events=t,this.document=D(i),this.documentListeners=new ex(this.document),this.listeners=new ex(n),this.windowListeners=new ex(A(i)),this.initialCoordinates=null!=(r=Q(a))?r:eo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(f.Resize,this.handleCancel),this.windowListeners.add(f.DragStart,eI),this.windowListeners.add(f.VisibilityChange,this.handleCancel),this.windowListeners.add(f.ContextMenu,eI),this.documentListeners.add(f.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eO(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eL(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(f.Click,eR,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(f.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:n,initialCoordinates:r,props:a}=this,{onMove:i,options:{activationConstraint:o}}=a;if(!r)return;let s=null!=(t=Q(e))?t:eo,l=W(r,s);if(!n&&o){if(eL(o)){if(null!=o.tolerance&&eC(l,o.tolerance))return this.handleCancel();if(eC(l,o.distance))return this.handleStart()}return eO(o)&&eC(l,o.tolerance)?this.handleCancel():void this.handlePending(o,l)}e.cancelable&&e.preventDefault(),i(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===h.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let eD={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ej extends eM{constructor(e){const{event:t}=e;super(e,eD,D(t.target))}}ej.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!!n.isPrimary&&0===n.button&&(null==r||r({event:n}),!0)}}];(o=v||(v={}))[o.RightClick=2]="RightClick";(s=g||(g={}))[s.Pointer=0]="Pointer",s[s.DraggableRect=1]="DraggableRect",(l=y||(y={}))[l.TreeOrder=0]="TreeOrder",l[l.ReversedTreeOrder=1]="ReversedTreeOrder";let eU={x:{[m.Backward]:!1,[m.Forward]:!1},y:{[m.Backward]:!1,[m.Forward]:!1}};(c=b||(b={}))[c.Always=0]="Always",c[c.BeforeDragging=1]="BeforeDragging",c[c.WhileDragging=2]="WhileDragging",(_||(_={})).Optimized="optimized";let eF=new Map;function eH(e,t){return H(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function eB(e){let{callback:t,disabled:n}=e,r=U(t),a=(0,C.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(r)},[n]);return(0,C.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function eV(e){return new ew(em(e),e)}function eq(e,t,n){void 0===t&&(t=eV);let[r,a]=(0,C.useState)(null);function i(){a(r=>{if(!e)return null;if(!1===e.isConnected){var a;return null!=(a=null!=r?r:n)?a:null}let i=t(e);return JSON.stringify(r)===JSON.stringify(i)?r:i})}let o=function(e){let{callback:t,disabled:n}=e,r=U(t),a=(0,C.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(r)},[r,n]);return(0,C.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(let n of t){let{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){i();break}}}}),s=eB({callback:i});return j(()=>{i(),e?(null==s||s.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==o||o.disconnect())},[e]),r}let eG=[];function ez(e,t){void 0===t&&(t=[]);let n=(0,C.useRef)(null);return(0,C.useEffect)(()=>{n.current=null},t),(0,C.useEffect)(()=>{let t=e!==eo;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?W(e,n.current):eo}function e$(e){return(0,C.useMemo)(()=>{let t,n;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:n=e.innerHeight,width:t,height:n}):null},[e])}let eW=[],eK=[{sensor:ej,options:{}},{sensor:eA,options:{}}],eQ={current:{}},eY={draggable:{measure:ep},droppable:{measure:ep,strategy:b.WhileDragging,frequency:_.Optimized},dragOverlay:{measure:em}};class eX extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}let eJ={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new eX,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ei},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:eY,measureDroppableContainers:ei,windowRect:null,measuringScheduled:!1},eZ={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ei,draggableNodes:new Map,over:null,measureDroppableContainers:ei},e0=(0,C.createContext)(eZ),e1=(0,C.createContext)(eJ);function e2(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new eX}}}function e5(e,t){switch(t.type){case d.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case d.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case d.DragEnd:case d.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case d.RegisterDroppable:{let{element:n}=t,{id:r}=n,a=new eX(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case d.SetDroppableDisabled:{let{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;let o=new eX(e.droppable.containers);return o.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case d.UnregisterDroppable:{let{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;let i=new eX(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function e3(e){let{disabled:t}=e,{active:n,activatorEvent:r,draggableNodes:a}=(0,C.useContext)(e0),i=V(r),o=V(null==n?void 0:n.id);return(0,C.useEffect)(()=>{if(!t&&!r&&i&&null!=o){if(!K(i)||document.activeElement===i.target)return;let e=a.get(o);if(!e)return;let{activatorNode:t,node:n}=e;(t.current||n.current)&&requestAnimationFrame(()=>{for(let e of[t.current,n.current]){if(!e)continue;let t=e.matches(X)?e:e.querySelector(X);if(t){t.focus();break}}})}},[r,t,a,o,i]),null}let e4=(0,C.createContext)({...eo,scaleX:1,scaleY:1});(u=T||(T={}))[u.Uninitialized=0]="Uninitialized",u[u.Initializing=1]="Initializing",u[u.Initialized=2]="Initialized";let e6=(0,C.memo)(function(e){var t,n,r,a,i,o,s,l;let c,u,f,h,v,_,k,E,{id:S,accessibility:w,autoScroll:x=!0,children:P,sensors:N=eK,collisionDetection:L=el,measuring:M,modifiers:D,...U}=e,[q,z]=(0,C.useReducer)(e5,void 0,e2),[W,K]=function(){let[e]=(0,C.useState)(()=>new Set),t=(0,C.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,C.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[Y,X]=(0,C.useState)(T.Uninitialized),J=Y===T.Initialized,{draggable:{active:Z,nodes:ee,translate:en},droppable:{containers:er}}=q,ei=null!=Z?ee.get(Z):null,es=(0,C.useRef)({initial:null,translated:null}),ed=(0,C.useMemo)(()=>{var e;return null!=Z?{id:Z,data:null!=(e=null==ei?void 0:ei.data)?e:eQ,rect:es}:null},[Z,ei]),ep=(0,C.useRef)(null),[eg,ey]=(0,C.useState)(null),[eS,ex]=(0,C.useState)(null),eC=F(U,Object.values(U)),eI=G("DndDescribedBy",S),eR=(0,C.useMemo)(()=>er.getEnabled(),[er]),eP=(0,C.useMemo)(()=>({draggable:{...eY.draggable,...null==M?void 0:M.draggable},droppable:{...eY.droppable,...null==M?void 0:M.droppable},dragOverlay:{...eY.dragOverlay,...null==M?void 0:M.dragOverlay}}),[null==M?void 0:M.draggable,null==M?void 0:M.droppable,null==M?void 0:M.dragOverlay]),{droppableRects:eN,measureDroppableContainers:eA,measuringScheduled:eL}=function(e,t){let{dragging:n,dependencies:r,config:a}=t,[i,o]=(0,C.useState)(null),{frequency:s,measure:l,strategy:c}=a,u=(0,C.useRef)(e),d=function(){switch(c){case b.Always:return!1;case b.BeforeDragging:return n;default:return!n}}(),m=F(d),f=(0,C.useCallback)(function(e){void 0===e&&(e=[]),m.current||o(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[m]),h=(0,C.useRef)(null),v=H(t=>{if(d&&!n)return eF;if(!t||t===eF||u.current!==e||null!=i){let t=new Map;for(let n of e){if(!n)continue;if(i&&i.length>0&&!i.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}let e=n.node.current,r=e?new ew(l(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,i,n,d,l]);return(0,C.useEffect)(()=>{u.current=e},[e]),(0,C.useEffect)(()=>{d||f()},[n,d]),(0,C.useEffect)(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),(0,C.useEffect)(()=>{d||"number"!=typeof s||null!==h.current||(h.current=setTimeout(()=>{f(),h.current=null},s))},[s,d,f,...r]),{droppableRects:v,measureDroppableContainers:f,measuringScheduled:null!=i}}(eR,{dragging:J,dependencies:[en.x,en.y],config:eP.droppable}),eO=H(e=>{var t;return null==Z?null:null!=(t=null!=v?v:e)?t:null},[v=(h=null!=Z?ee.get(Z):void 0)?h.node.current:null,Z]),eM=(0,C.useMemo)(()=>eS?Q(eS):null,[eS]),eD=(c=(null==eg?void 0:eg.autoScrollEnabled)===!1,u="object"==typeof x?!1===x.enabled:!1===x,f=J&&!c&&!u,"object"==typeof x?{...x,enabled:f}:{enabled:f}),ej=eH(eO,eP.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e,i=(0,C.useRef)(!1),{x:o,y:s}="boolean"==typeof a?{x:a,y:a}:a;j(()=>{if(!o&&!s||!t){i.current=!1;return}if(i.current||!r)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let a=ec(n(e),r);if(o||(a.x=0),s||(a.y=0),i.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){let t=eh(e);t&&t.scrollBy({top:a.y,left:a.x})}},[t,o,s,r,n])}({activeNode:null!=Z?ee.get(Z):null,config:eD.layoutShiftCompensation,initialRect:ej,measure:eP.draggable.measure});let eV=eq(eO,eP.draggable.measure,ej),eX=eq(eO?eO.parentElement:null),eJ=(0,C.useRef)({activatorEvent:null,active:null,activeNode:eO,collisionRect:null,collisions:null,droppableRects:eN,draggableNodes:ee,draggingNode:null,draggingNodeRect:null,droppableContainers:er,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eZ=er.getNodeFor(null==(t=eJ.current.over)?void 0:t.id),e6=function(e){let{measure:t}=e,[n,r]=(0,C.useState)(null),a=eB({callback:(0,C.useCallback)(e=>{for(let{target:n}of e)if(O(n)){r(e=>{let r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),[i,o]=B((0,C.useCallback)(e=>{let n=function(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return O(t)?t:e}(e);null==a||a.disconnect(),n&&(null==a||a.observe(n)),r(n?t(n):null)},[t,a]));return(0,C.useMemo)(()=>({nodeRef:i,rect:n,setRef:o}),[n,i,o])}({measure:eP.dragOverlay.measure}),e9=null!=(n=e6.nodeRef.current)?n:eO,e7=J?null!=(r=e6.rect)?r:eV:null,e8=!!(e6.nodeRef.current&&e6.rect),te=(_=eH(i=e8?null:eV),ec(i,_)),tt=e$(e9?A(e9):null),tn=(o=J?null!=eZ?eZ:eO:null,k=(0,C.useRef)(o),E=H(e=>o?e&&e!==eG&&o&&k.current&&o.parentNode===k.current.parentNode?e:ef(o):eG,[o]),(0,C.useEffect)(()=>{k.current=o},[o]),E),tr=function(e,t){void 0===t&&(t=em);let[n]=e,r=e$(n?A(n):null),[a,i]=(0,C.useState)(eW);function o(){i(()=>e.length?e.map(e=>e_(e)?r:new ew(t(e),e)):eW)}let s=eB({callback:o});return j(()=>{null==s||s.disconnect(),o(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),a}(tn),ta=function(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}(D,{transform:{x:en.x-te.x,y:en.y-te.y,scaleX:1,scaleY:1},activatorEvent:eS,active:ed,activeNodeRect:eV,containerNodeRect:eX,draggingNodeRect:e7,over:eJ.current.over,overlayNodeRect:e6.rect,scrollableAncestors:tn,scrollableAncestorRects:tr,windowRect:tt}),ti=eM?$(eM,en):null,to=function(e){let[t,n]=(0,C.useState)(null),r=(0,C.useRef)(e),a=(0,C.useCallback)(e=>{let t=ev(e.target);t&&n(e=>e?(e.set(t,eb(t)),new Map(e)):null)},[]);return(0,C.useEffect)(()=>{let t=r.current;if(e!==t){i(t);let o=e.map(e=>{let t=ev(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,eb(t)]):null}).filter(e=>null!=e);n(o.length?new Map(o):null),r.current=e}return()=>{i(e),i(t)};function i(e){e.forEach(e=>{let t=ev(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),(0,C.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>$(e,t),eo):eE(e):eo,[e,t])}(tn),ts=ez(to),tl=ez(to,[eV]),tc=$(ta,ts),tu=e7?eu(e7,ta):null,td=ed&&tu?L({active:ed,collisionRect:tu,droppableRects:eN,droppableContainers:eR,pointerCoordinates:ti}):null,tm=function(e,t){if(!e||0===e.length)return null;let[n]=e;return n.id}(td,0),[tp,tf]=(0,C.useState)(null),th=(s=e8?ta:$(ta,tl),l=null!=(a=null==tp?void 0:tp.rect)?a:null,{...s,scaleX:l&&eV?l.width/eV.width:1,scaleY:l&&eV?l.height/eV.height:1}),tv=(0,C.useRef)(null),tg=(0,C.useCallback)((e,t)=>{let{sensor:n,options:r}=t;if(null==ep.current)return;let a=ee.get(ep.current);if(!a)return;let i=e.nativeEvent,o=new n({active:ep.current,activeNode:a,event:i,options:r,context:eJ,onAbort(e){if(!ee.get(e))return;let{onDragAbort:t}=eC.current,n={id:e};null==t||t(n),W({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!ee.get(e))return;let{onDragPending:a}=eC.current,i={id:e,constraint:t,initialCoordinates:n,offset:r};null==a||a(i),W({type:"onDragPending",event:i})},onStart(e){let t=ep.current;if(null==t)return;let n=ee.get(t);if(!n)return;let{onDragStart:r}=eC.current,a={activatorEvent:i,active:{id:t,data:n.data,rect:es}};(0,I.unstable_batchedUpdates)(()=>{null==r||r(a),X(T.Initializing),z({type:d.DragStart,initialCoordinates:e,active:t}),W({type:"onDragStart",event:a}),ey(tv.current),ex(i)})},onMove(e){z({type:d.DragMove,coordinates:e})},onEnd:s(d.DragEnd),onCancel:s(d.DragCancel)});function s(e){return async function(){let{active:t,collisions:n,over:r,scrollAdjustedTranslate:a}=eJ.current,o=null;if(t&&a){let{cancelDrop:s}=eC.current;o={activatorEvent:i,active:t,collisions:n,delta:a,over:r},e===d.DragEnd&&"function"==typeof s&&await Promise.resolve(s(o))&&(e=d.DragCancel)}ep.current=null,(0,I.unstable_batchedUpdates)(()=>{z({type:e}),X(T.Uninitialized),tf(null),ey(null),ex(null),tv.current=null;let t=e===d.DragEnd?"onDragEnd":"onDragCancel";if(o){let e=eC.current[t];null==e||e(o),W({type:t,event:o})}})}}tv.current=o},[ee]),ty=(0,C.useCallback)((e,t)=>(n,r)=>{let a=n.nativeEvent,i=ee.get(r);null!==ep.current||!i||a.dndKit||a.defaultPrevented||!0===e(n,t.options,{active:i})&&(a.dndKit={capturedBy:t.sensor},ep.current=r,tg(n,t))},[ee,tg]),tb=(0,C.useMemo)(()=>N.reduce((e,t)=>{let{sensor:n}=t;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:ty(e.handler,t)}))]},[]),[N,ty]);(0,C.useEffect)(()=>{if(!R)return;let e=N.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},N.map(e=>{let{sensor:t}=e;return t})),j(()=>{eV&&Y===T.Initializing&&X(T.Initialized)},[eV,Y]),(0,C.useEffect)(()=>{let{onDragMove:e}=eC.current,{active:t,activatorEvent:n,collisions:r,over:a}=eJ.current;if(!t||!n)return;let i={active:t,activatorEvent:n,collisions:r,delta:{x:tc.x,y:tc.y},over:a};(0,I.unstable_batchedUpdates)(()=>{null==e||e(i),W({type:"onDragMove",event:i})})},[tc.x,tc.y]),(0,C.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:a}=eJ.current;if(!e||null==ep.current||!t||!a)return;let{onDragOver:i}=eC.current,o=r.get(tm),s=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:a.x,y:a.y},over:s};(0,I.unstable_batchedUpdates)(()=>{tf(s),null==i||i(l),W({type:"onDragOver",event:l})})},[tm]),j(()=>{eJ.current={activatorEvent:eS,active:ed,activeNode:eO,collisionRect:tu,collisions:td,droppableRects:eN,draggableNodes:ee,draggingNode:e9,draggingNodeRect:e7,droppableContainers:er,over:tp,scrollableAncestors:tn,scrollAdjustedTranslate:tc},es.current={initial:e7,translated:tu}},[ed,eO,td,tu,ee,e9,e7,eN,er,tp,tn,tc]),function(e){let t,{acceleration:n,activator:r=g.Pointer,canScroll:a,draggingRect:i,enabled:o,interval:s=5,order:l=y.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:h}=e,v=function(e){let{delta:t,disabled:n}=e,r=V(t);return H(e=>{if(n||!r||!e)return eU;let a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[m.Backward]:e.x[m.Backward]||-1===a.x,[m.Forward]:e.x[m.Forward]||1===a.x},y:{[m.Backward]:e.y[m.Backward]||-1===a.y,[m.Forward]:e.y[m.Forward]||1===a.y}}},[n,t,r])}({delta:f,disabled:!o}),[b,_]=(t=(0,C.useRef)(null),[(0,C.useCallback)((e,n)=>{t.current=setInterval(e,n)},[]),(0,C.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),T=(0,C.useRef)({x:0,y:0}),k=(0,C.useRef)({x:0,y:0}),E=(0,C.useMemo)(()=>{switch(r){case g.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case g.DraggableRect:return i}},[r,i,c]),S=(0,C.useRef)(null),w=(0,C.useCallback)(()=>{let e=S.current;if(!e)return;let t=T.current.x*k.current.x,n=T.current.y*k.current.y;e.scrollBy(t,n)},[]),x=(0,C.useMemo)(()=>l===y.TreeOrder?[...u].reverse():u,[l,u]);(0,C.useEffect)(()=>{if(!o||!u.length||!E)return void _();for(let e of x){if((null==a?void 0:a(e))===!1)continue;let t=d[u.indexOf(e)];if(!t)continue;let{direction:r,speed:i}=function(e,t,n,r,a){let{top:i,left:o,right:s,bottom:l}=n;void 0===r&&(r=10),void 0===a&&(a=ek);let{isTop:c,isBottom:u,isLeft:d,isRight:f}=eT(e),h={x:0,y:0},v={x:0,y:0},g={height:t.height*a.y,width:t.width*a.x};return!c&&i<=t.top+g.height?(h.y=m.Backward,v.y=r*Math.abs((t.top+g.height-i)/g.height)):!u&&l>=t.bottom-g.height&&(h.y=m.Forward,v.y=r*Math.abs((t.bottom-g.height-l)/g.height)),!f&&s>=t.right-g.width?(h.x=m.Forward,v.x=r*Math.abs((t.right-g.width-s)/g.width)):!d&&o<=t.left+g.width&&(h.x=m.Backward,v.x=r*Math.abs((t.left+g.width-o)/g.width)),{direction:h,speed:v}}(e,t,E,n,h);for(let e of["x","y"])v[e][r[e]]||(i[e]=0,r[e]=0);if(i.x>0||i.y>0){_(),S.current=e,b(w,s),T.current=i,k.current=r;return}}T.current={x:0,y:0},k.current={x:0,y:0},_()},[n,w,a,_,o,s,JSON.stringify(E),JSON.stringify(v),b,u,x,d,JSON.stringify(h)])}({...eD,delta:en,draggingRect:tu,pointerCoordinates:ti,scrollableAncestors:tn,scrollableAncestorRects:tr});let t_=(0,C.useMemo)(()=>({active:ed,activeNode:eO,activeNodeRect:eV,activatorEvent:eS,collisions:td,containerNodeRect:eX,dragOverlay:e6,draggableNodes:ee,droppableContainers:er,droppableRects:eN,over:tp,measureDroppableContainers:eA,scrollableAncestors:tn,scrollableAncestorRects:tr,measuringConfiguration:eP,measuringScheduled:eL,windowRect:tt}),[ed,eO,eV,eS,td,eX,e6,ee,er,eN,tp,eA,tn,tr,eP,eL,tt]),tT=(0,C.useMemo)(()=>({activatorEvent:eS,activators:tb,active:ed,activeNodeRect:eV,ariaDescribedById:{draggable:eI},dispatch:z,draggableNodes:ee,over:tp,measureDroppableContainers:eA}),[eS,tb,ed,eV,z,eI,ee,tp,eA]);return C.default.createElement(et.Provider,{value:K},C.default.createElement(e0.Provider,{value:tT},C.default.createElement(e1.Provider,{value:t_},C.default.createElement(e4.Provider,{value:th},P)),C.default.createElement(e3,{disabled:(null==w?void 0:w.restoreFocus)===!1})),C.default.createElement(ea,{...w,hiddenTextDescribedById:eI}))}),e9=(0,C.createContext)(null),e7="button";function e8(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e,i=G("Draggable"),{activators:o,activatorEvent:s,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:m}=(0,C.useContext)(e0),{role:f=e7,roleDescription:h="draggable",tabIndex:v=0}=null!=a?a:{},g=(null==l?void 0:l.id)===t,y=(0,C.useContext)(g?e4:e9),[b,_]=B(),[T,k]=B(),E=(0,C.useMemo)(()=>o.reduce((e,n)=>{let{eventName:r,handler:a}=n;return e[r]=e=>{a(e,t)},e},{}),[o,t]),S=F(n);return j(()=>(d.set(t,{id:t,key:i,node:b,activatorNode:T,data:S}),()=>{let e=d.get(t);e&&e.key===i&&d.delete(t)}),[d,t]),{active:l,activatorEvent:s,activeNodeRect:c,attributes:(0,C.useMemo)(()=>({role:f,tabIndex:v,"aria-disabled":r,"aria-pressed":!!g&&f===e7||void 0,"aria-roledescription":h,"aria-describedby":u.draggable}),[r,f,v,g,h,u.draggable]),isDragging:g,listeners:r?void 0:E,node:b,over:m,setNodeRef:_,setActivatorNodeRef:k,transform:y}}let te={position:"fixed",touchAction:"none"},tt=e=>K(e)?"transform 250ms ease":void 0;t={styles:{active:{opacity:"0"}}},e.s(["DndContext",()=>e6,"useDraggable",()=>e8],879499);e.s(["useClipTimelineDnd",0,({value:e,playbackPosition:t,onChange:n,onPlaybackPositionChange:r,containerRef:a,onDragStateChange:i})=>{let o=C.default.useRef(null),[s,l]=C.default.useState(null);return{handleDragStart:n=>{l(String(n.active.id)),o.current={clipRange:e,playbackPosition:t},i(!0,String(n.active.id));let a=String(n.active.id);"start"===a?r(e[0]):"end"===a&&r(e[1])},handleDragMove:e=>{if(!a.current||!o.current)return;let i=a.current.offsetWidth;if(0===i)return;let{clipRange:s,playbackPosition:l}=o.current,c=((e,t,n,r)=>{let{active:a,delta:i}=e,o=a.id,s=i.x/t*100;switch(o){case"start":let l,c;return c=(l=Math.max(0,Math.min(l=n[0]+s,n[1])))-n[0],{type:"clipRange",value:[l,n[1]],translatePlaybackBy:c};case"end":let u,d;return d=(u=Math.min(100,Math.max(u=n[1]+s,n[0])))-n[1],{type:"clipRange",value:[n[0],u],translatePlaybackBy:d};case"playback":let m;return m=r+s,{type:"playbackPosition",value:m=Math.max(n[0],Math.min(m,n[1]))};case"range":let f,h,v,g;return f=n[1]-n[0],v=(h=Math.max(0,Math.min(h=n[0]+s,100-f)))+f,g=h-n[0],{type:"clipRange",value:[h,v],translatePlaybackBy:g};default:return null}})(e,i,s,l);if(c)if("clipRange"===c.type){n(c.value);let[a,i]=c.value,o=String(e.active.id);"start"===o?r(a):"end"===o?r(i):((e,t,n,r,a)=>{switch(e){case"range":default:r<t?a(t):r>n&&a(n);return;case"start":r<t&&a(t);return;case"end":r>=n&&a(n);return}})(o,a,i,t,r)}else"playbackPosition"===c.type&&r(c.value)},handleDragEnd:()=>{l(null),o.current=null,i(!1,null);let[n,a]=e;r(Math.max(n,Math.min(a,t)))},activeHandle:s}}],980746);var tn=e.i(670169),tr=e.i(166037),ta=e.i(29054);e.s(["ClipDurationPopover",0,e=>{let t,n,r,a,i,o,s,l,c,u,d=(0,E.c)(22),{startPercent:m,endPercent:f,clipDurationSeconds:h,isVisible:v}=e,g=m/100*h,y=f/100*h,b=Math.max(0,y-g),_=`${(m+f)/2}%`;return d[0]!==_?(t=(0,k.jsx)(tn.Anchor,{className:"absolute left-1/2 top-0 h-0 -translate-x-1/2",style:{left:_}}),d[0]=_,d[1]=t):t=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(n={zIndex:tr.Z_INDEXES.Selector.content},d[2]=n):n=d[2],d[3]!==b?(r=Math.round(b),d[3]=b,d[4]=r):r=d[4],d[5]!==r?(a=(0,k.jsxs)("div",{className:"text-sm font-semibold",children:["duration: ",r,"s"]}),d[5]=r,d[6]=a):a=d[6],d[7]!==g?(i=(0,ta.formatClock)(g),d[7]=g,d[8]=i):i=d[8],d[9]!==y?(o=(0,ta.formatClock)(y),d[9]=y,d[10]=o):o=d[10],d[11]!==i||d[12]!==o?(s=(0,k.jsxs)("div",{className:"text-sm opacity-80",children:[i," - ",o]}),d[11]=i,d[12]=o,d[13]=s):s=d[13],d[14]===Symbol.for("react.memo_cache_sentinel")?(l=(0,k.jsx)(tn.Arrow,{className:"fill-[#15161b]"}),d[14]=l):l=d[14],d[15]!==a||d[16]!==s?(c=(0,k.jsxs)(tn.Content,{side:"top",align:"center",sideOffset:12,avoidCollisions:!0,collisionPadding:12,updatePositionStrategy:"always",className:"pointer-events-none select-none rounded-lg bg-[#15161b] px-3 py-2 text-center text-white opacity-0 shadow-lg transition-opacity duration-150 data-[state=open]:opacity-100",style:n,children:[a,s,l]}),d[15]=a,d[16]=s,d[17]=c):c=d[17],d[18]!==v||d[19]!==c||d[20]!==t?(u=(0,k.jsxs)(tn.Root,{open:v,children:[t,c]}),d[18]=v,d[19]=c,d[20]=t,d[21]=u):u=d[21],u}],881931),e.s(["Draggable",0,e=>{let t,n,r=(0,E.c)(8),{id:a,children:i,className:o}=e;r[0]!==a?(t={id:a},r[0]=a,r[1]=t):t=r[1];let{attributes:s,listeners:l,setNodeRef:c}=e8(t);return r[2]!==s||r[3]!==i||r[4]!==o||r[5]!==l||r[6]!==c?(n=(0,k.jsx)("div",{ref:c,...l,...s,className:o,children:i}),r[2]=s,r[3]=i,r[4]=o,r[5]=l,r[6]=c,r[7]=n):n=r[7],n}],186246)},447635,453527,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(738045),a=e.i(443815),i=e.i(681750),o=e.i(324197),s=e.i(828468),l=e.i(879499),c=e.i(281675),u=e.i(980746),d=e.i(881931),m=e.i(264458),f=e.i(186246),h=e.i(38816);let v=e=>{let r,a,i,o=(0,n.c)(9),{left:s,zIndex:l,children:c,translateXPx:u}=e,d=void 0===u?0:u;return o[0]!==d?(r=(0,h.buildCenterAlignedTranslateX)(d),o[0]=d,o[1]=r):r=o[1],o[2]!==s||o[3]!==r||o[4]!==l?(a={left:s,zIndex:l,transform:r},o[2]=s,o[3]=r,o[4]=l,o[5]=a):a=o[5],o[6]!==c||o[7]!==a?(i=(0,t.jsx)("div",{className:"absolute",style:a,children:c}),o[6]=c,o[7]=a,o[8]=i):i=o[8],i};var g=e.i(166037);let y=e=>{let r,a,i,o,s=(0,n.c)(9),{playbackPosition:l,activeHandle:c}=e;s[0]!==l?(r=(0,h.clampPercent)(l),s[0]=l,s[1]=r):r=s[1];let u=`${r}%`,d="playback"===c;return s[2]!==d?(a=(0,m.default)("relative h-10 w-1 cursor-ew-resize rounded-full bg-white transition-transform duration-200",{"scale-y-110":d}),s[2]=d,s[3]=a):a=s[3],s[4]!==a?(i=(0,t.jsx)(f.Draggable,{id:"playback",children:(0,t.jsx)("div",{className:a})}),s[4]=a,s[5]=i):i=s[5],s[6]!==u||s[7]!==i?(o=(0,t.jsx)(v,{left:u,zIndex:g.Z_INDEXES.ClipTimelineSlider.playbackHandle,children:i}),s[6]=u,s[7]=i,s[8]=o):o=s[8],o};var b=e.i(476738);let _=e=>{let r,a,i,o=(0,n.c)(8),{active:s,type:l,isRangeActive:c}=e,u="start"===l,d="end"===l;return o[0]!==s||o[1]!==c||o[2]!==u||o[3]!==d?(r=(0,m.default)("relative flex h-9 w-4 cursor-ew-resize items-center justify-center bg-livestream-green transition-transform duration-200",{"rounded-l-md":u,"rounded-r-md":d,"scale-y-110 bg-livestream-green-dark":c,"shadow-lg bg-livestream-green-dark":s}),o[0]=s,o[1]=c,o[2]=u,o[3]=d,o[4]=r):r=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(b.GripVertical,{color:"black",size:20}),o[5]=a):a=o[5],o[6]!==r?(i=(0,t.jsx)("div",{className:r,children:a}),o[6]=r,o[7]=i):i=o[7],i},T=e=>{let r,a,i,o,s=(0,n.c)(12),{position:l,activeHandle:c,type:u}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,h.getHalfGripWidthPx)(),s[0]=r):r=s[0];let d=r,m="start"===u?-d:d,y=`${l}%`,b=c===u,T="range"===c;return s[1]!==b||s[2]!==T||s[3]!==u?(a=(0,t.jsx)(_,{active:b,type:u,isRangeActive:T}),s[1]=b,s[2]=T,s[3]=u,s[4]=a):a=s[4],s[5]!==a||s[6]!==u?(i=(0,t.jsx)(f.Draggable,{id:u,children:a}),s[5]=a,s[6]=u,s[7]=i):i=s[7],s[8]!==y||s[9]!==i||s[10]!==m?(o=(0,t.jsx)(v,{left:y,zIndex:g.Z_INDEXES.ClipTimelineSlider.thumb,translateXPx:m,children:i}),s[8]=y,s[9]=i,s[10]=m,s[11]=o):o=s[11],o},k=e=>{let r,a,i,o,s,l,c,u,d=(0,n.c)(19),{numberOfLines:h,value:v,activeHandle:y}=e;d[0]!==h?(r=Array.from({length:h}),d[0]=h,d[1]=r):r=d[1],d[2]!==h||d[3]!==r?(a=r.map((e,n)=>(0,t.jsx)("div",{className:"absolute h-full w-px bg-gray-600",style:{left:`${(n+1)*100/(h+1)}%`}},n)),d[2]=h,d[3]=r,d[4]=a):a=d[4];let b=a;d[5]===Symbol.for("react.memo_cache_sentinel")?(i={zIndex:g.Z_INDEXES.ClipTimelineSlider.track},d[5]=i):i=d[5];let _=`${v[0]}%`,T=`${v[1]-v[0]}%`;d[6]!==_||d[7]!==T?(o={left:_,width:T,zIndex:g.Z_INDEXES.ClipTimelineSlider.range},d[6]=_,d[7]=T,d[8]=o):o=d[8];let k="range"===y;return d[9]!==k?(s=(0,m.default)("h-full w-full cursor-grab border-y-2 border-livestream-green bg-livestream-green/30 transition-transform duration-200",{"scale-y-110 cursor-grabbing shadow-lg border-livestream-green-dark":k}),d[9]=k,d[10]=s):s=d[10],d[11]!==s?(l=(0,t.jsx)(f.Draggable,{id:"range",className:s}),d[11]=s,d[12]=l):l=d[12],d[13]!==o||d[14]!==l?(c=(0,t.jsx)("div",{className:"absolute h-9",style:o,children:l}),d[13]=o,d[14]=l,d[15]=c):c=d[15],d[16]!==b||d[17]!==c?(u=(0,t.jsxs)("div",{className:"absolute h-9 w-full rounded-md bg-bg-secondary",style:i,children:[b,c]}),d[16]=b,d[17]=c,d[18]=u):u=d[18],u},E=e=>{let r,a,i,o,s,m,f,h,v=(0,n.c)(35),{value:g,onChange:b,numberOfLines:_,playbackPosition:E,onPlaybackPositionChange:S,onDragStateChange:w,clipDurationSeconds:x,forceDurationPopoverVisible:C}=e,I=void 0===_?32:_,R=c.default.useRef(null);v[0]!==b||v[1]!==w||v[2]!==S||v[3]!==E||v[4]!==g?(r={value:g,playbackPosition:E,onChange:b,onPlaybackPositionChange:S,containerRef:R,onDragStateChange:w},v[0]=b,v[1]=w,v[2]=S,v[3]=E,v[4]=g,v[5]=r):r=v[5];let{handleDragStart:P,handleDragMove:N,handleDragEnd:A,activeHandle:L}=(0,u.useClipTimelineDnd)(r),O=C??null!==L;return v[6]!==x||v[7]!==O||v[8]!==g[0]||v[9]!==g[1]?(a=(0,t.jsx)(d.ClipDurationPopover,{startPercent:g[0],endPercent:g[1],clipDurationSeconds:x,isVisible:O}),v[6]=x,v[7]=O,v[8]=g[0],v[9]=g[1],v[10]=a):a=v[10],v[11]!==L||v[12]!==I||v[13]!==g?(i=(0,t.jsx)(k,{numberOfLines:I,value:g,activeHandle:L}),v[11]=L,v[12]=I,v[13]=g,v[14]=i):i=v[14],v[15]!==L||v[16]!==g[0]?(o=(0,t.jsx)(T,{position:g[0],activeHandle:L,type:"start"}),v[15]=L,v[16]=g[0],v[17]=o):o=v[17],v[18]!==L||v[19]!==g[1]?(s=(0,t.jsx)(T,{position:g[1],activeHandle:L,type:"end"}),v[18]=L,v[19]=g[1],v[20]=s):s=v[20],v[21]!==L||v[22]!==E?(m=(0,t.jsx)(y,{playbackPosition:E,activeHandle:L}),v[21]=L,v[22]=E,v[23]=m):m=v[23],v[24]!==a||v[25]!==i||v[26]!==o||v[27]!==s||v[28]!==m?(f=(0,t.jsxs)("div",{ref:R,className:"relative mx-auto flex h-10 w-[90%] items-center",children:[a,i,o,s,m]}),v[24]=a,v[25]=i,v[26]=o,v[27]=s,v[28]=m,v[29]=f):f=v[29],v[30]!==A||v[31]!==N||v[32]!==P||v[33]!==f?(h=(0,t.jsx)(l.DndContext,{onDragStart:P,onDragMove:N,onDragEnd:A,children:f}),v[30]=A,v[31]=N,v[32]=P,v[33]=f,v[34]=h):h=v[34],h};function S(){}function w(){}function x(){}function C(){}function I(){}function R(){}function P(){}e.s(["ClipTimelineSlider",0,E],453527),e.s(["ClipPopoverSkeleton",0,e=>{let l,c,u,d,m,f,h,v=(0,n.c)(9),{thumbnailUrl:g}=e;return v[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)(s.ClipPopoverHeader,{}),v[0]=l):l=v[0],v[1]===Symbol.for("react.memo_cache_sentinel")?(c={aspectRatio:"16/9"},v[1]=c):c=v[1],v[2]!==g?(u=(0,t.jsx)("div",{className:"relative w-full overflow-hidden rounded-md",style:c,children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:g,alt:"Loading clip preview",className:"absolute inset-0 h-full w-full scale-110 object-cover blur-sm"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("p",{className:"opacity-70",children:"Generating clip preview"}),(0,t.jsx)(a.Loading,{})]})})]}):(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-white/10",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("p",{className:"opacity-70",children:"Generating clip preview"}),(0,t.jsx)(a.Loading,{})]})})}),v[2]=g,v[3]=u):u=v[3],v[4]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)(E,{value:[0,40],onChange:S,playbackPosition:0,onPlaybackPositionChange:w,onDragStateChange:x,clipDurationSeconds:r.PREVIEW_CLIP_DURATION_SECONDS}),m=(0,t.jsx)(i.Input,{placeholder:"Enter a title for your clip",value:"",onChange:C,onFocus:I,maxLength:100,title:"Title *",disabled:!0}),f=(0,t.jsx)(o.ClipPopoverFooter,{isPending:!0,onCancel:R,onCreate:P,isLoading:!0}),v[4]=d,v[5]=m,v[6]=f):(d=v[4],m=v[5],f=v[6]),v[7]!==u?(h=(0,t.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[l,u,d,m,f]}),v[7]=u,v[8]=h):h=v[8],h}],447635)},104896,826734,824255,947409,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(203296),a=e.i(166037),i=e.i(383777),o=e.i(447911),s=e.i(157633),l=e.i(10785),c=e.i(511518),u=e.i(281675),d=e.i(654747),m=e.i(967388),f=e.i(797948),h=e.i(735445),v=e.i(689250),g=e.i(141554),y=e.i(380749),b=e.i(162786),_=e.i(275762),T=e.i(325320),k=e.i(699164),E=e.i(681750),S=e.i(392444),w=e.i(324197),x=e.i(828468),C=e.i(447635),I=e.i(789022),R=e.i(517770);let P=e=>{let r=(0,n.c)(3),{currentTime:a,clipDuration:i}=e,o=N;if(void 0!==a&&void 0!==i){let e,n=o(a),s=o(i);return r[0]!==n||r[1]!==s?(e=(0,t.jsx)("div",{className:"absolute bottom-2 left-2 rounded bg-black/60 px-2 py-1",children:(0,t.jsxs)("p",{className:"text-xs text-white",children:[n," / ",s]})}),r[0]=n,r[1]=s,r[2]=e):e=r[2],e}return null};function N(e){let t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n.toString().padStart(2,"0")}`}var A=e.i(264458);let L=e=>{let r,a,i,o=(0,n.c)(6),{className:s,size:l}=e,c=void 0===l?24:l;return o[0]!==c?(r={width:c,height:c},o[0]=c,o[1]=r):r=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M12 21V19.5M5.01434 15C6.14683 16.7451 8.32179 19 12 19C13.9581 19 15.4902 18.361 16.6658 17.5M9.51896 3.86222C10.2008 3.32235 11.0628 3 12 3C14.2092 3 16 4.79086 16 7V10.3433M3 3L21 21M8 8.75L8.00001 11C8.00001 13.2091 9.79087 15 12 15C12.638 15 13.2411 14.8506 13.7762 14.585",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"square"})}),o[2]=a):a=o[2],o[3]!==s||o[4]!==r?(i=(0,t.jsx)("div",{className:s,style:r,children:a}),o[3]=s,o[4]=r,o[5]=i):i=o[5],i};e.s(["MicOffIcon",0,L],826734);let O=e=>{let r,a,i,o=(0,n.c)(6),{className:s,size:l}=e,c=void 0===l?24:l;return o[0]!==c?(r={width:c,height:c},o[0]=c,o[1]=r):r=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M12.0001 19V21M12.0001 19C8.32185 19 6.14689 16.7451 5.0144 15M12.0001 19C15.6783 19 17.8533 16.7451 18.9857 15M16.0001 7V11C16.0001 13.2091 14.2092 15 12.0001 15C9.79093 15 8.00007 13.2091 8.00007 11V7C8.00007 4.79086 9.79093 3 12.0001 3C14.2092 3 16.0001 4.79086 16.0001 7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"square"})}),o[2]=a):a=o[2],o[3]!==s||o[4]!==r?(i=(0,t.jsx)("div",{className:s,style:r,children:a}),o[3]=s,o[4]=r,o[5]=i):i=o[5],i};e.s(["MicOnIcon",0,O],824255);let M=e=>{let r,i,o,s,l=(0,n.c)(9),{isMuted:c,className:u,onToggleMute:d}=e;return l[0]!==u?(r=(0,A.default)("absolute right-2 top-2 flex h-8 w-8 items-center justify-center rounded-full bg-black/60 text-white",u),l[0]=u,l[1]=r):r=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(i={zIndex:a.Z_INDEXES.ClipPreview.playPauseOverlay},l[2]=i):i=l[2],l[3]!==c?(o=c?(0,t.jsx)(L,{className:"h-4 w-4",size:16}):(0,t.jsx)(O,{className:"h-4 w-4",size:16}),l[3]=c,l[4]=o):o=l[4],l[5]!==d||l[6]!==r||l[7]!==o?(s=(0,t.jsx)("div",{className:r,style:i,onClick:d,children:o}),l[5]=d,l[6]=r,l[7]=o,l[8]=s):s=l[8],s};var D=e.i(343734);e.s(["Pause",()=>D.default],947409);var D=D,j=e.i(695904),j=j;let U=e=>{let r,i,o,s,l=(0,n.c)(8),{isPaused:c,className:u}=e;return l[0]!==u?(r=(0,A.default)("pointer-events-none absolute left-2 top-2 flex h-8 w-8 items-center justify-center rounded-full bg-black/60 text-white",u),l[0]=u,l[1]=r):r=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(i={zIndex:a.Z_INDEXES.ClipPreview.playPauseOverlay},l[2]=i):i=l[2],l[3]!==c?(o=c?(0,t.jsx)(j.default,{size:16}):(0,t.jsx)(D.default,{size:16}),l[3]=c,l[4]=o):o=l[4],l[5]!==r||l[6]!==o?(s=(0,t.jsx)("div",{className:r,style:i,children:o}),l[5]=r,l[6]=o,l[7]=s):s=l[7],s},F=(0,u.forwardRef)(({clip:e,onTimeUpdate:n,onPlayRequested:r,onPauseRequested:a,isPaused:i,muted:o,onToggleMute:s,currentTime:l,clipDuration:c},u)=>e?(0,t.jsx)("div",{className:"group relative aspect-video w-full overflow-hidden rounded-md",children:(0,t.jsxs)(I.MediaPlayer,{ref:u,src:e.playlistUrl,onTimeUpdate:e=>{n(e.currentTime)},autoPlay:!0,muted:o,onPlay:r,onPause:()=>{a()},aspectRatio:"16/9",children:[(0,t.jsx)(I.MediaProvider,{}),(0,t.jsx)(U,{isPaused:i}),(0,t.jsx)(M,{isMuted:o,onToggleMute:s}),(0,t.jsx)(P,{currentTime:l,clipDuration:c}),(0,t.jsx)(R.PlayButton,{asChild:!0,children:(0,t.jsx)("div",{className:"absolute inset-0 h-full w-full bg-transparent","aria-label":"Play/Pause"})})]})}):(0,t.jsx)("div",{className:"flex aspect-video w-full items-center justify-center rounded-md bg-black",children:(0,t.jsx)("p",{className:"text-white",children:"Loading latest clip..."})}));F.displayName="ClipPreview";var H=e.i(453527);let B=e=>{let r,a=(0,n.c)(10),{latestClip:i,onOpenChange:o,isError:s,onRetry:l,setClipTitle:c,isLoading:d,onClipCreated:m,createdClip:f}=e,h=(0,u.useRef)(null),{mintId:v}=(0,T.useLivestreamContext)(),g=(0,_.useLivestream)(v);if(d){let e,n=g?.thumbnail;return a[0]!==n?(e=(0,t.jsx)(C.ClipPopoverSkeleton,{thumbnailUrl:n}),a[0]=n,a[1]=e):e=a[1],e}if(void 0!==s&&s||!i){let e;return a[2]!==l?(e=(0,t.jsx)(S.ClipPopoverErrorContent,{onRetry:l}),a[2]=l,a[3]=e):e=a[3],e}return a[4]!==f||a[5]!==i||a[6]!==m||a[7]!==o||a[8]!==c?(r=(0,t.jsx)(V,{latestClip:i,onOpenChange:o,playerRef:h,setClipTitle:c,onClipCreated:m,createdClip:f}),a[4]=f,a[5]=i,a[6]=m,a[7]=o,a[8]=c,a[9]=r):r=a[9],r},V=({latestClip:e,onOpenChange:n,playerRef:r,setClipTitle:a,onClipCreated:i,createdClip:o})=>{let{mintId:S}=(0,T.useLivestreamContext)(),C=(0,_.useLivestream)(S),[I,R]=(0,u.useState)([0,40]),{playbackPosition:P,handlePlaybackPositionChange:N,setIsDragging:A,handlePlayerTimeUpdate:L,handlePlayRequested:O,handlePauseRequested:M,isPaused:D}=(0,h.useClipPlayback)({latestClip:e,playerRef:r,clipRange:[I[0],I[1]],mintId:S}),{mutate:j,isPending:U}=(0,y.useDownloadHighlightClip)({mintId:S}),{value:B,toggleValue:V}=(0,b.useBoolean)(!0),{title:q,handleTitleChange:G,handleTitleFocus:z,handleTitleBlur:$}=(0,g.useClipTitleInput)({mintId:S,onTitleChange:a}),{handleCopyLink:W,handleDownload:K,handleShareTelegram:Q,handleShareTwitter:Y,isCopied:X}=(0,v.useClipShare)({clipUrl:o?.mp4Url??"",clipTitle:q,mint:S}),J=(I[1]-I[0])/100*e.duration,Z=Math.max(0,P-I[0]/100*e.duration),ee=(0,u.useCallback)(()=>{(0,f.trackMuteVideo)({mint:S,isMuted:!B,livestreamId:C?.id?String(C.id):void 0,contentType:l.VideoContentType.CLIP,context:m.CLIP_SOURCE_CONTEXTS.CLIP_PREVIEW}),V()},[V,B,S,C?.id]);return(0,t.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,t.jsx)(x.ClipPopoverHeader,{title:o?`Share "${q}"`:"Create clip",description:o?"Share the clip with on your socials":"Create a clip of the livestream for sharing on socials"}),(0,t.jsx)(F,{ref:r,clip:e,onTimeUpdate:L,onPlayRequested:O,onPauseRequested:M,isPaused:D,muted:B,onToggleMute:ee,currentTime:Z,clipDuration:J}),o?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-1",children:[(0,t.jsx)(k.ShareButton,{icon:(0,t.jsx)(s.IconChainLink1,{}),label:"Copy",onClick:W,activeLabel:"Copied!",isActive:X}),(0,t.jsx)(k.ShareButton,{icon:(0,t.jsx)(s.IconFileDownload,{}),label:"Download",onClick:K}),(0,t.jsx)(k.ShareButton,{icon:(0,t.jsx)(s.IconTwitter,{}),label:"X",onClick:Y}),(0,t.jsx)(k.ShareButton,{icon:(0,t.jsx)(s.IconTelegram,{}),label:"Telegram",onClick:Q})]}):(0,t.jsxs)(u.Fragment,{children:[(0,t.jsx)(H.ClipTimelineSlider,{value:I,onChange:R,playbackPosition:P/e.duration*100,onPlaybackPositionChange:N,onDragStateChange:A,clipDurationSeconds:e.duration}),(0,t.jsx)(E.Input,{value:q,onChange:e=>G("string"==typeof e?e:""),onFocus:z,onBlur:$,disabled:U,placeholder:"Enter a title for your clip",maxLength:100,title:"Title *"})]}),(0,t.jsx)(w.ClipPopoverFooter,{isPending:U,onCancel:()=>n(!1),onCreate:()=>{let t=I[0]/100*e.duration,r=(I[1]-I[0])/100*e.duration,a=Math.round(t*c.millisecondsInSecond),o=Math.round(r*c.millisecondsInSecond);j({clipId:e.clipId,roomName:S,startTimestamp:a,durationMilliseconds:o,title:q.trim()||void 0},{onSuccess:e=>{i?i(e):n(!1)},onError:e=>d.default.error(`Failed to create clip: ${e.message}`)})},disabled:q.trim().length<2,disabledReason:"title is required",isComplete:!!o})]})};function q(e){e.target instanceof HTMLElement&&e.target.closest("[data-radix-toast-announce]")&&e.preventDefault()}function G(e){e.preventDefault()}e.s(["ClipPopover",0,e=>{let s,l,c,u,d,m,f,h,v,g,y=(0,n.c)(37),{trigger:b,isOpen:_,onOpenChange:T,setForceShowControls:k,getTimestamp:E,audioControls:S}=e,{container:w,isFullscreen:x}=(0,o.usePortalContainer)();y[0]!==S||y[1]!==E||y[2]!==T?(s={onOpenChange:T,getTimestamp:E,audioControls:S},y[0]=S,y[1]=E,y[2]=T,y[3]=s):s=y[3];let{handleOpenChange:C,isCreatingClip:I,latestClip:R,retry:P,setClipTitle:N,createdClip:A,setCreatedClip:L}=(0,i.useClipPopover)(s);y[4]!==k?(l=()=>{k?.(!0)},y[4]=k,y[5]=l):l=y[5];let O=l;y[6]!==_||y[7]!==k?(c=()=>{_||k?.(!1)},y[6]=_,y[7]=k,y[8]=c):c=y[8];let M=c;y[9]!==b?(u=(0,t.jsx)(r.Trigger,{asChild:!0,children:b}),y[9]=b,y[10]=u):u=y[10],y[11]===Symbol.for("react.memo_cache_sentinel")?(d={zIndex:a.Z_INDEXES.Selector.content,backgroundColor:"#15161b"},y[11]=d):d=y[11],y[12]!==x?(m=e=>{x&&e.preventDefault()},y[12]=x,y[13]=m):m=y[13];let D=R?.playlistUrl??"empty",j=!R;return y[14]!==A||y[15]!==C||y[16]!==I||y[17]!==R||y[18]!==P||y[19]!==N||y[20]!==L||y[21]!==D||y[22]!==j?(f=(0,t.jsx)(B,{latestClip:R,onOpenChange:C,isError:j,onRetry:P,setClipTitle:N,isLoading:I,onClipCreated:L,createdClip:A},D),y[14]=A,y[15]=C,y[16]=I,y[17]=R,y[18]=P,y[19]=N,y[20]=L,y[21]=D,y[22]=j,y[23]=f):f=y[23],y[24]!==O||y[25]!==M||y[26]!==m||y[27]!==f?(h=(0,t.jsx)(r.Content,{side:"top",align:"end",sideOffset:15,className:"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-bottom-2 data-[state=open]:slide-in-from-bottom-2 flex w-96 flex-col gap-4 rounded-lg p-4 shadow-lg data-[state=closed]:duration-150 data-[state=open]:duration-200",style:d,onFocusOutside:m,onMouseEnter:O,onMouseLeave:M,onInteractOutside:q,onCloseAutoFocus:G,children:f}),y[24]=O,y[25]=M,y[26]=m,y[27]=f,y[28]=h):h=y[28],y[29]!==w||y[30]!==h?(v=(0,t.jsx)(r.Portal,{container:w,children:h}),y[29]=w,y[30]=h,y[31]=v):v=y[31],y[32]!==C||y[33]!==_||y[34]!==v||y[35]!==u?(g=(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(r.Root,{open:_,onOpenChange:C,modal:!1,children:[u,v]})}),y[32]=C,y[33]=_,y[34]=v,y[35]=u,y[36]=g):g=y[36],g}],104896)},389562,e=>{"use strict";e.s(["DEFAULT_TOOLTIP_PROPS",0,{side:"top",align:"center",sideOffset:4,delayDuration:0}])},485374,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(8264),a=e.i(264458),i=e.i(389562),o=e.i(166037),s=e.i(447911);function l(e){e.target instanceof Element&&e.target.closest("[data-radix-collection-item]")&&e.preventDefault()}e.s(["Tooltip",0,e=>{let c,u,d,m,f,h,v,g=(0,n.c)(19),{children:y,content:b,side:_,align:T,sideOffset:k,delayDuration:E,className:S}=e,w=void 0===_?i.DEFAULT_TOOLTIP_PROPS.side:_,x=void 0===T?i.DEFAULT_TOOLTIP_PROPS.align:T,C=void 0===k?i.DEFAULT_TOOLTIP_PROPS.sideOffset:k,I=void 0===E?i.DEFAULT_TOOLTIP_PROPS.delayDuration:E,{container:R}=(0,s.usePortalContainer)(),P=Array.isArray(y)?y[0]:y;return b?(g[0]!==P?(c=(0,t.jsx)(r.Trigger,{asChild:!0,children:P}),g[0]=P,g[1]=c):c=g[1],g[2]!==S?(u=(0,a.default)(S,"rounded bg-gray-900 px-2.5 py-1.5 text-xs font-semibold text-white shadow-md","will-change-[transform,opacity]"),g[2]=S,g[3]=u):u=g[3],g[4]===Symbol.for("react.memo_cache_sentinel")?(d={zIndex:o.Z_INDEXES.Tooltip.content},g[4]=d):d=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)(r.Arrow,{className:"fill-gray-900"}),g[5]=m):m=g[5],g[6]!==x||g[7]!==b||g[8]!==w||g[9]!==C||g[10]!==u?(f=(0,t.jsxs)(r.Content,{side:w,align:x,sideOffset:C,className:u,style:d,onPointerDownOutside:l,children:[b,m]}),g[6]=x,g[7]=b,g[8]=w,g[9]=C,g[10]=u,g[11]=f):f=g[11],g[12]!==R||g[13]!==f?(h=(0,t.jsx)(r.Portal,{container:R,children:f}),g[12]=R,g[13]=f,g[14]=h):h=g[14],g[15]!==I||g[16]!==h||g[17]!==c?(v=(0,t.jsxs)(r.Root,{delayDuration:I,children:[c,h]}),g[15]=I,g[16]=h,g[17]=c,g[18]=v):v=g[18],v):P}])},695453,941562,837996,925032,811164,472530,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(104896),a=e.i(264458),i=e.i(281675),o=e.i(485374);let s=(0,i.forwardRef)(({tooltipContent:e,text:n,icon:r,className:i,disabled:s,...l},c)=>{let u=(0,t.jsxs)("button",{ref:c,"aria-label":"string"==typeof e?e:"Icon button",disabled:s,className:(0,a.default)("flex items-center justify-center gap-1 rounded-lg p-1","text-white transition-colors duration-150",s&&"cursor-not-allowed opacity-50",!s&&"hover:bg-white/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",n&&"pr-2",i),type:"button",...l,children:[r,n&&(0,t.jsx)("span",{className:"whitespace-nowrap text-xs text-white",children:n})]});return e?s?(0,t.jsx)(o.Tooltip,{content:e,children:(0,t.jsx)("span",{"aria-disabled":"true",className:"inline-flex",children:u})}):(0,t.jsx)(o.Tooltip,{content:e,children:u}):u});s.displayName="TooltipIconButton",e.s(["TooltipIconButton",0,s],941562);var l=e.i(10785),c=e.i(967388),u=e.i(47606),d=e.i(162786),m=e.i(882234),f=e.i(325320),h=e.i(29054),v=e.i(498497),g=e.i(275762);let y=e=>{let t,r,a=(0,n.c)(6);a[0]!==e?(t=void 0===e?{}:e,a[0]=e,a[1]=t):t=a[1];let{setForceShowControls:i}=t,o=(0,m.useIsLocalParticipantLoggedIn)(),s=(()=>{let e,t=(0,n.c)(2),{mintId:r,viewMode:a}=(0,f.useLivestreamContext)(),i=(0,g.useLivestream)(r),{metadata:o}=(0,v.useRoomMetadata)(),s=i?.streamStartTimestamp;t[0]!==s?(e=((e,t=120)=>{if(!e||e<=0)return!1;let n=(0,h.normalizeToEpochSeconds)(e);return Math.floor(Date.now()/1e3)-n>=t})(s),t[0]=s,t[1]=e):e=t[1];let l=e;return o?.recordingActive===!0||"recording"===a||l})();return a[2]!==o||a[3]!==s||a[4]!==i?(r={setForceShowControls:i,isLoggedIn:o,isRecordingActive:s},a[2]=o,a[3]=s,a[4]=i,a[5]=r):r=a[5],b(r)},b=e=>{let t,r,a,i,o=(0,n.c)(20),{setForceShowControls:s,isLoggedIn:m,isRecordingActive:h}=e,{value:v,setValue:y}=(0,d.useBoolean)(!1),{mintId:b}=(0,f.useLivestreamContext)(),_=(0,g.useLivestream)(b),T=!m||!h||v;o[0]!==T||o[1]!==m||o[2]!==h?(t=function(e){return e.isDisabled?e.isLoggedIn?e.isRecordingActive?void 0:"Waiting for clipping to start":"Login to create a clip":"Create clip"}({isDisabled:T,isLoggedIn:m,isRecordingActive:h}),o[0]=T,o[1]=m,o[2]=h,o[3]=t):t=o[3];let k=t;o[4]!==T||o[5]!==s||o[6]!==y?(r=e=>{if(!e){y(!1),s?.(!1);return}T||(y(!0),s?.(!0))},o[4]=T,o[5]=s,o[6]=y,o[7]=r):r=o[7];let E=r;o[8]!==T||o[9]!==_||o[10]!==b||o[11]!==s||o[12]!==y?(a=()=>{(0,u.trackLivestreamEvent)({type:"INTERACT_CLIP_LIVESTREAM",livestreamId:_?.id?String(_.id):"0",mint:b,clipFlow:l.ClipFlowType.CREATION,context:c.CLIP_SOURCE_CONTEXTS.CLIP_BUTTON}),T||(y(!0),s?.(!0))},o[8]=T,o[9]=_,o[10]=b,o[11]=s,o[12]=y,o[13]=a):a=o[13];let S=a;return o[14]!==T||o[15]!==v||o[16]!==E||o[17]!==S||o[18]!==k?(i={isDisabled:T,tooltipContent:k,isOpen:v,onOpenChange:E,onTriggerPress:S},o[14]=T,o[15]=v,o[16]=E,o[17]=S,o[18]=k,o[19]=i):i=o[19],i};e.s(["useClipControl",0,y,"useClipControlBase",0,b],837996);let _=e=>{let r,a,i=(0,n.c)(3),{className:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 22 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M1.75 6.25H20.25M1.75 6.25V13.75C1.75 14.8546 2.64543 15.75 3.75 15.75H18.25C19.3546 15.75 20.25 14.8546 20.25 13.75V6.25M1.75 6.25V3.25C1.75 2.14543 2.64543 1.25 3.75 1.25H18.25C19.3546 1.25 20.25 2.14543 20.25 3.25V6.25M11.45 1.5L10.55 6M16.1875 1.5L15.0625 6M6.95 1.5L6.05 6",stroke:"white",strokeWidth:"1.71377",strokeLinecap:"round",strokeLinejoin:"round"})}),i[0]=r):r=i[0],i[1]!==o?(a=(0,t.jsx)("div",{className:o,children:r}),i[1]=o,i[2]=a):a=i[2],a};e.s(["ClipIcon",0,_],925032);var T=e.i(414948);e.s(["ClipControl",0,e=>{let a,i,o,l,c,u=(0,n.c)(18),{className:d,setForceShowControls:m}=e;u[0]!==m?(a={setForceShowControls:m},u[0]=m,u[1]=a):a=u[1];let{isDisabled:f,tooltipContent:h,isOpen:v,onOpenChange:g,onTriggerPress:b}=y(a),{audioMuted:k,toggleMute:E,unmuteAudio:S}=(0,T.useLivestreamFeaturesContext)();u[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(_,{}),u[2]=i):i=u[2],u[3]!==d||u[4]!==f||u[5]!==b||u[6]!==h?(o=(0,t.jsx)(s,{tooltipContent:h,icon:i,className:d,disabled:f,onClick:b,text:"Clip"}),u[3]=d,u[4]=f,u[5]=b,u[6]=h,u[7]=o):o=u[7];let w=o;return u[8]!==k||u[9]!==E||u[10]!==S?(l={audioMuted:k,toggleMute:E,unmuteAudio:S},u[8]=k,u[9]=E,u[10]=S,u[11]=l):l=u[11],u[12]!==v||u[13]!==g||u[14]!==m||u[15]!==l||u[16]!==w?(c=(0,t.jsx)(r.ClipPopover,{trigger:w,isOpen:v,onOpenChange:g,setForceShowControls:m,audioControls:l}),u[12]=v,u[13]=g,u[14]=m,u[15]=l,u[16]=w,u[17]=c):c=u[17],c}],695453);var k=e.i(157633),E=e.i(812423);e.s(["FullScreenButton",0,e=>{let r,a,i,o=(0,n.c)(9),{className:l}=e,{roomRef:c}=(0,f.useLivestreamContext)(),{fullScreen:u}=(0,T.useLivestreamFeaturesContext)(),d=u?"Exit fullscreen":"Enter fullscreen";o[0]!==c?(r=()=>{document.fullscreenElement?document.exitFullscreen():c.current?.requestFullscreen()},o[0]=c,o[1]=r):r=o[1];let m=r;return o[2]!==u?(a=u?(0,t.jsx)(k.IconMinimize,{size:E.ICON_SIZE}):(0,t.jsx)(k.IconFullScreen1,{size:E.ICON_SIZE}),o[2]=u,o[3]=a):a=o[3],o[4]!==l||o[5]!==m||o[6]!==d||o[7]!==a?(i=(0,t.jsx)(s,{tooltipContent:d,icon:a,onClick:m,className:l}),o[4]=l,o[5]=m,o[6]=d,o[7]=a,o[8]=i):i=o[8],i}],811164),e.s(["VolumeButton",0,e=>{let r,a,i=(0,n.c)(7),{audioMuted:o,toggleMute:l,className:c}=e,u=o?"Unmute":"Mute";return i[0]!==o?(r=o?(0,t.jsx)(k.IconMute,{size:E.ICON_SIZE}):(0,t.jsx)(k.IconVolumeFull,{size:E.ICON_SIZE}),i[0]=o,i[1]=r):r=i[1],i[2]!==c||i[3]!==u||i[4]!==r||i[5]!==l?(a=(0,t.jsx)(s,{tooltipContent:u,icon:r,onClick:l,className:c}),i[2]=c,i[3]=u,i[4]=r,i[5]=l,i[6]=a):a=i[6],a}],472530)},210496,e=>{"use strict";var t=e.i(93336),n=e.i(249437),n=n,r=e.i(852687),a=e.i(281675),i=e.i(89085),o=e.i(188014);e.s(["useLivestreamParticipants",0,({includeLocalParticipant:e=!0}={})=>{let s=(0,n.K)(),{localParticipant:l}=(0,t.useLocalParticipant)();return(0,a.useMemo)(()=>{let t,n,a=[],c=[],u=[];return s.forEach(s=>{if(!e&&s.identity===l?.identity)return;let d=(0,o.buildEnrichedParticipant)({participant:s,localParticipant:l});if(s.kind===r.ParticipantInfo_Kind.AGENT)return void u.push(d);if(s.kind===r.ParticipantInfo_Kind.INGRESS){n=d;return}switch(d.role){case i.LivekitRole.HOST:t=d;break;case i.LivekitRole.CO_HOST:a.push(d);break;case i.LivekitRole.VIEWER:default:c.push(d)}}),a.sort((e,t)=>e.participant.identity.localeCompare(t.participant.identity)),c.sort((e,t)=>{let n=e.isHandRaised??!1;return n!==(t.isHandRaised??!1)?n?-1:1:e.participant.identity.localeCompare(t.participant.identity)}),{host:t,ingress:n,coHosts:a,viewers:c,aiModerators:u}},[s,l,e])}],210496)},20596,e=>{"use strict";var t=e.i(579759),n=e.i(649785),r=e.i(93336),a=e.i(198584),i=e.i(484169),o=e.i(281675),s=e.i(89085),l=e.i(54567),c=e.i(210496);e.s(["useHostCommandListener",0,()=>{let e,u,d=(0,n.c)(5),m=(0,a.useRoomContext)(),{localParticipant:f}=(0,r.useLocalParticipant)(),{host:h}=(0,c.useLivestreamParticipants)();d[0]!==h||d[1]!==f||d[2]!==m?(e=()=>{if(!m||!h||!f)return;let e=(e,n)=>{if(n?.identity===h.participant.identity)try{let n=JSON.parse(t.Buffer.from(e).toString("utf-8"));if(l.logger.debug("[useHostCommandListener] Data received from host",{hostIdentity:h.participant.identity,message:n}),n.messageType!==s.DataMessageType.HOST_COMMAND)return;let r=n.payload;if(!r)return;r.type===s.LIVEKIT_COMMANDS.STOP_YOUR_SCREENSHARE?(l.logger.debug("[useHostCommandListener] Received host command: stopping local screen share",{commandType:s.LIVEKIT_COMMANDS.STOP_YOUR_SCREENSHARE,hostIdentity:h.participant.identity}),f.setScreenShareEnabled(!1)):l.logger.warn("[useHostCommandListener] Received unknown host command type",{type:r.type,hostIdentity:h.participant.identity})}catch(e){l.logger.error("[useHostCommandListener] Failed to parse host command message:",{error:e instanceof Error?e.message:String(e)})}};return m.on(i.RoomEvent.DataReceived,e),()=>{m.off(i.RoomEvent.DataReceived,e)}},u=[m,h,f],d[0]=h,d[1]=f,d[2]=m,d[3]=e,d[4]=u):(e=d[3],u=d[4]),(0,o.useEffect)(e,u)}])},647063,e=>{"use strict";var t=e.i(249437);e.s(["useRemoteParticipants",()=>t.M])},403692,e=>{"use strict";var t=e.i(649785),n=e.i(93336),r=e.i(249437),r=r,a=e.i(852687),i=e.i(188014);e.s(["useIngressParticipant",0,()=>{let e,o,s=(0,t.c)(4),{localParticipant:l}=(0,n.useLocalParticipant)();s[0]===Symbol.for("react.memo_cache_sentinel")?(e={kind:a.ParticipantInfo_Kind.INGRESS},s[0]=e):e=s[0];let c=(0,r.L)(e);e:{let e;if(!c){o=null;break e}s[1]!==c||s[2]!==l?(e=(0,i.buildEnrichedParticipant)({participant:c,localParticipant:l}),s[1]=c,s[2]=l,s[3]=e):e=s[3],o=e}return o},"useIsIngressActive",0,()=>{let e,n=(0,t.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={kind:a.ParticipantInfo_Kind.INGRESS},n[0]=e):e=n[0],!!(0,r.L)(e)}],403692)},558078,836684,282386,e=>{"use strict";var t=e.i(649785),n=e.i(93336),r=e.i(247889),a=e.i(647063),i=e.i(198584),o=e.i(852687),s=e.i(10785),l=e.i(484169),c=e.i(281675),u=e.i(790290),d=e.i(967388),m=e.i(325320),f=e.i(54567),h=e.i(403692),v=e.i(692948),g=e.i(275762);function y(e){return e.isScreenShareEnabled}e.s(["useHostControls",0,()=>{let e,b,_,T,k,E,S,w,x,C=(0,t.c)(37),{isHost:I,isCoHost:R}=(0,v.useLivekitRole)(),P=(0,i.useRoomContext)(),N=(0,h.useIsIngressActive)(),{userChoices:A}=(0,r.usePersistentUserChoices)(),{localParticipant:L}=(0,n.useLocalParticipant)(),O=(0,a.useRemoteParticipants)(),{mintId:M}=(0,m.useLivestreamContext)(),D=(0,g.useLivestream)(M);C[0]!==I||C[1]!==L?.permissions?.canPublishSources?(e=I||(L?.permissions?.canPublishSources?.includes(o.TrackSource.SCREEN_SHARE)??!1),C[0]=I,C[1]=L?.permissions?.canPublishSources,C[2]=e):e=C[2];let j=e,[U,F]=(0,c.useState)(A.audioEnabled),[H,B]=(0,c.useState)(A.videoEnabled),V=I?s.StreamerRole.HOST:s.StreamerRole.COHOST;C[3]!==R||C[4]!==I||C[5]!==D||C[6]!==M||C[7]!==V?(b=e=>{F(e),(I||R)&&(0,u.trackHostAudioToggle)({mint:M??"",livestreamId:D?.id?String(D.id):void 0,isEnabled:e,role:V,context:d.HOST_CONTROL_SOURCE_CONTEXTS.MEDIA_TOGGLE})},C[3]=R,C[4]=I,C[5]=D,C[6]=M,C[7]=V,C[8]=b):b=C[8];let q=b;C[9]!==R||C[10]!==I||C[11]!==D||C[12]!==M||C[13]!==V?(_=async e=>{B(e),(I||R)&&(0,u.trackHostVideoToggle)({mint:M??"",livestreamId:D?.id?String(D.id):void 0,isEnabled:e,role:V,context:d.HOST_CONTROL_SOURCE_CONTEXTS.MEDIA_TOGGLE})},C[9]=R,C[10]=I,C[11]=D,C[12]=M,C[13]=V,C[14]=_):_=C[14];let G=_,z=I&&N;C[15]!==U||C[16]!==z||C[17]!==P.localParticipant||C[18]!==P.state||C[19]!==H?(T=()=>{(async()=>{P.state===l.ConnectionState.Connected&&(f.logger.debug("[useHostControls] Setting local media state",{videoEnabled:H,audioEnabled:U,roomState:P.state}),await P.localParticipant.setCameraEnabled(!z&&H),await P.localParticipant.setMicrophoneEnabled(!z&&U))})()},k=[U,P.localParticipant,P.state,H,z],C[15]=U,C[16]=z,C[17]=P.localParticipant,C[18]=P.state,C[19]=H,C[20]=T,C[21]=k):(T=C[20],k=C[21]),(0,c.useEffect)(T,k),C[22]!==O?(E=O.find(y),C[22]=O,C[23]=E):E=C[23];let $=E;return C[24]!==z||C[25]!==P.localParticipant?(S=()=>{z&&(async()=>{f.logger.info("[useHostControls] Disabling device controls and media due to ingress active",{disableDeviceControls:z}),F(!1),B(!1),await P.localParticipant.setCameraEnabled(!1),await P.localParticipant.setMicrophoneEnabled(!1)})()},w=[z,P.localParticipant],C[24]=z,C[25]=P.localParticipant,C[26]=S,C[27]=w):(S=C[26],w=C[27]),(0,c.useEffect)(S,w),C[28]!==$||C[29]!==U||C[30]!==j||C[31]!==z||C[32]!==L||C[33]!==q||C[34]!==G||C[35]!==H?(x={localParticipant:L,activeScreenSharer:$,canPublishScreenShare:j,audioEnabled:U,videoEnabled:H,toggleAudio:q,toggleVideo:G,disableDeviceControls:z},C[28]=$,C[29]=U,C[30]=j,C[31]=z,C[32]=L,C[33]=q,C[34]=G,C[35]=H,C[36]=x):x=C[36],x}],558078);var b=e.i(942765),_=e.i(264458);let T=e=>{let n,r,a=(0,t.c)(3),{className:i}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,b.jsxs)("svg",{viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"9.5",stroke:"currentColor",strokeWidth:"3",fill:"none"}),(0,b.jsx)("rect",{x:"9",y:"9",width:"6",height:"6",fill:"currentColor"})]}),a[0]=n):n=a[0],a[1]!==i?(r=(0,b.jsx)("div",{className:i,children:n}),a[1]=i,a[2]=r):r=a[2],r};var k=e.i(43373);e.s(["EndStreamButton",0,()=>{let e,n,r,a,i=(0,t.c)(6),{openDialog:o}=(0,k.useLivestreamDialogStore)();return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,_.default)("cursor-pointer rounded-xl p-1 hover:bg-white/20"),i[0]=e):e=i[0],i[1]!==o?(n=()=>o(k.DialogType.EndStream),i[1]=o,i[2]=n):n=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,b.jsx)(T,{className:"text-[#E77975]"}),i[3]=r):r=i[3],i[4]!==n?(a=(0,b.jsx)("div",{className:e,onClick:n,children:r}),i[4]=n,i[5]=a):a=i[5],a}],836684);let E=(0,e.i(376530).default)("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",()=>E],282386)},953038,e=>{"use strict";var t,n=e.i(649785),r=e.i(132838),a=e.i(816896),i=e.i(721361),o=e.i(54567),s=((t=s||{}).REMOVE_FROM_STAGE="removeFromStage",t),l=e.i(936736),c=e.i(188014);e.s(["useRemoveFromStage",0,e=>{let t,s,u,d,m,f,h,v=(0,n.c)(22),{socket:g,livestreamId:y,roomId:b,context:_,onSuccess:T,onError:k,onSettled:E,isRemovingSelf:S}=e,w=((h=(0,n.c)(2))[0]!==g?(f=(e,t)=>{if(!g)throw o.logger.error("[useLivechatSocketRemoveFromStageEmitters] removeFromStage: Socket is not connected",{roomId:e,address:t}),Error("Socket is not connected");return o.logger.debug("[useLivechatSocketRemoveFromStageEmitters] Emitting removeFromStage",{roomId:e,address:t}),new Promise((n,r)=>{g.emit("removeFromStage",{roomId:e,address:t},t=>{let a=i.ackSchema.safeParse(t);if(!a.success)return o.logger.error("[useLivechatSocketRemoveFromStageEmitters] removeFromStage: Failed to parse data",{roomId:e,data:t,parsed:a}),r(Error("Failed to parse data"));n(a.data)})})},h[0]=g,h[1]=f):f=h[1],f);return v[0]!==y||v[1]!==b?(t=e=>{o.logger.debug("[useRemoveFromStage] Attempting to remove from stage via API",{livestreamId:y,roomId:b,identity:e})},v[0]=y,v[1]=b,v[2]=t):t=v[2],v[3]!==w||v[4]!==y||v[5]!==b?(s=async e=>{let[t,n]=await Promise.all([l.api.post("livestream/participant/remove-from-stage",{json:{livestreamId:y,mintId:b,identity:e}}).json(),w(b,(0,c.getParticipantAddress)(e))]);return{success:t.success&&n.success,message:t.message}},v[3]=w,v[4]=y,v[5]=b,v[6]=s):s=v[6],v[7]!==_||v[8]!==S||v[9]!==y||v[10]!==T||v[11]!==b?(u=(e,t)=>{S?(0,a.trackViewerLeaveStage)({mint:b,livestreamId:String(y),context:_}):(0,a.trackHostRemove)({mint:b,livestreamId:String(y),targetUser:t,context:_}),o.logger.debug("[useRemoveFromStage] Successfully removed from stage",{livestreamId:y,identity:t}),T?.(e)},v[7]=_,v[8]=S,v[9]=y,v[10]=T,v[11]=b,v[12]=u):u=v[12],v[13]!==y||v[14]!==k?(d=(e,t)=>{o.logger.error("[useRemoveFromStage] Failed to remove from stage",{livestreamId:y,identity:t,error:e.message}),k?.(e)},v[13]=y,v[14]=k,v[15]=d):d=v[15],v[16]!==E||v[17]!==t||v[18]!==s||v[19]!==u||v[20]!==d?(m={onMutate:t,mutationFn:s,onSuccess:u,onError:d,onSettled:E},v[16]=E,v[17]=t,v[18]=s,v[19]=u,v[20]=d,v[21]=m):m=v[21],(0,r.useMutation)(m)}],953038)},453861,639301,268759,139854,733052,630419,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(264458),a=e.i(282386),i=e.i(967388),o=e.i(275762),s=e.i(953038),l=e.i(985436),c=e.i(325320);e.s(["LeaveStageButton",0,e=>{let u,d,m,f,h,v=(0,n.c)(13),{identity:g}=e,{mintId:y}=(0,c.useLivestreamContext)(),b=(0,o.useLivestream)(y),_=(0,l.useLivechatSocket)(),T=b?.id??0,k=b?.mintId??"";v[0]!==_||v[1]!==T||v[2]!==k?(u={socket:_,livestreamId:T,roomId:k,context:i.STAGE_SOURCE_CONTEXTS.HOST_CONTROLS,isRemovingSelf:!0},v[0]=_,v[1]=T,v[2]=k,v[3]=u):u=v[3];let{mutate:E,isPending:S}=(0,s.useRemoveFromStage)(u);v[4]!==g||v[5]!==S||v[6]!==E?(d=()=>{S||E(g)},v[4]=g,v[5]=S,v[6]=E,v[7]=d):d=v[7];let w=d;return v[8]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.default)("cursor-pointer rounded-xl p-1 text-white hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 disabled:opacity-50"),v[8]=m):m=v[8],v[9]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(a.LogOut,{className:"h-6 w-6"}),v[9]=f):f=v[9],v[10]!==w||v[11]!==S?(h=(0,t.jsx)("button",{onClick:w,disabled:S,className:m,title:"leave stage",children:f}),v[10]=w,v[11]=S,v[12]=h):h=v[12],h}],453861);var u=e.i(249437);e.s(["useTrackToggle",()=>u.h],639301);var u=u,d=e.i(157633),m=e.i(484169),f=e.i(485374),h=e.i(302636),v=e.i(281675),g=e.i(98076),y=e.i(414948);let b=e=>{let r,a,i,o,s=(0,n.c)(11),{activeDeviceId:l,setActiveMediaDevice:c,devices:u}=e,[d,m]=(0,v.useState)(!1);s[0]!==u||s[1]!==c?(r=e=>{let t=u.find(t=>t.deviceId===e);c(e,t?.label)},s[0]=u,s[1]=c,s[2]=r):r=s[2];let f=r;return s[3]!==u?(a=u.map(T),s[3]=u,s[4]=a):a=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(i={show:!0,className:"!max-w-[200px] mr-2"},s[5]=i):i=s[5],s[6]!==l||s[7]!==f||s[8]!==d||s[9]!==a?(o=(0,t.jsx)(g.Selector,{isOpen:d,selectedValue:l,onValueChange:f,onOpenChange:m,options:a,showSelectedValue:i,openDirection:"bottom",openOffset:5}),s[6]=l,s[7]=f,s[8]=d,s[9]=a,s[10]=o):o=s[10],o},_=e=>{let r,a,i,o,s=(0,n.c)(14),{activeDeviceId:l,setActiveMediaDevice:c,devices:u,onOpenChange:d}=e,{fullScreen:m}=(0,y.useLivestreamFeaturesContext)();s[0]!==u?(r=u.map(k),s[0]=u,s[1]=r):r=s[1];let f=r,[h,b]=(0,v.useState)(!1);s[2]!==u||s[3]!==c?(a=e=>{let t=u.find(t=>t.deviceId===e);c(e,t?.label)},s[2]=u,s[3]=c,s[4]=a):a=s[4];let _=a;return s[5]!==d?(i=e=>{d?.(e),b(e)},s[5]=d,s[6]=i):i=s[6],s[7]!==l||s[8]!==m||s[9]!==_||s[10]!==h||s[11]!==f||s[12]!==i?(o=(0,t.jsx)(g.Selector,{isOpen:h,selectedValue:l,onValueChange:_,options:f,onOpenChange:i,openDirection:"top",renderInPortal:m}),s[7]=l,s[8]=m,s[9]=_,s[10]=h,s[11]=f,s[12]=i,s[13]=o):o=s[13],o};function T(e){return{label:e.label,value:e.deviceId}}function k(e){return{label:e.label,value:e.deviceId}}e.s(["DeviceSelector",0,_,"DeviceSelectorBackstage",0,b],268759);let E=e=>{let r,a=(0,n.c)(9),{isBackstage:i,onOpenChange:o}=e,{audioInputDevices:s,audioDeviceId:l,handleSetAudioDevice:c}=(0,h.useDeviceSelectionContext)();if(void 0!==i&&i){let e;return a[0]!==l||a[1]!==s||a[2]!==c?(e=(0,t.jsx)(b,{activeDeviceId:l,setActiveMediaDevice:c,devices:s}),a[0]=l,a[1]=s,a[2]=c,a[3]=e):e=a[3],e}return a[4]!==l||a[5]!==s||a[6]!==c||a[7]!==o?(r=(0,t.jsx)(_,{activeDeviceId:l,setActiveMediaDevice:c,devices:s,onOpenChange:o}),a[4]=l,a[5]=s,a[6]=c,a[7]=o,a[8]=r):r=a[8],r};e.s(["SelectAudioDevice",0,E],139854);var S=e.i(812423),w=e.i(93336),x=e.i(54567);let C=e=>{let t,r,a=(0,n.c)(4),{localParticipant:i}=(0,w.useLocalParticipant)(),o=(0,v.useRef)(null),s=(0,v.useRef)(null);a[0]!==i||a[1]!==e?(t=()=>{if(!i)return;let t=i.getTrackPublication(e);t&&R(t,s,o);let n=t=>{t.source===e&&t instanceof m.LocalTrackPublication&&R(t,s,o)};return i.on(m.ParticipantEvent.TrackPublished,n),()=>{s.current&&o.current&&s.current.off(m.TrackEvent.Muted,o.current),i.off(m.ParticipantEvent.TrackPublished,n),s.current=null,o.current=null}},r=[i,e],a[0]=i,a[1]=e,a[2]=t,a[3]=r):(t=a[2],r=a[3]),(0,v.useEffect)(t,r)},I=e=>{e?.track&&(x.logger.debug("[useMediaTrackMute] Track muted, stopping underlying MediaStreamTrack",{source:e.source,trackSid:e.trackSid,trackName:e.trackName}),e.track.stop())},R=(e,t,n)=>{x.logger.debug("[useMediaTrackMute:setupNewListener] Setting up mute listener",{source:e.source,trackSid:e.trackSid,initialIsMuted:e.isMuted});let r=()=>I(e);t.current&&n.current&&(x.logger.debug("[useMediaTrackMute:setupNewListener] Removing old listener",{oldTrackSid:t.current.trackSid}),t.current.off(m.TrackEvent.Muted,n.current)),e.on(m.TrackEvent.Muted,r),t.current=e,n.current=r,e.isMuted&&(x.logger.debug("[useMediaTrackMute:setupNewListener] Track initially muted, calling handleMuted",{trackSid:e.trackSid}),I(e))};e.s(["useMediaTrackMute",0,C],733052);let P=e=>{let r,a,i,o=(0,n.c)(8),{audioEnabled:s,setAudioEnabled:l}=e;o[0]!==s||o[1]!==l?(r=()=>{l&&l(!s)},o[0]=s,o[1]=l,o[2]=r):r=o[2];let c=r;return o[3]!==s?(a=s?(0,t.jsx)(d.IconMicrophone,{size:S.ICON_SIZE}):(0,t.jsx)(d.IconMicrophoneOff,{size:S.ICON_SIZE}),o[3]=s,o[4]=a):a=o[4],o[5]!==a||o[6]!==c?(i=(0,t.jsx)("div",{className:"cursor-pointer",onClick:c,children:a}),o[5]=a,o[6]=c,o[7]=i):i=o[7],i};e.s(["MicToggleButton",0,P,"MicToggleButtonLivekit",0,e=>{let a,i,o,s,l,c,d,h=(0,n.c)(19),{audioEnabled:v,setAudioEnabled:g,setForceShowControls:y,disabled:b,disabledTooltip:_}=e;C(m.Track.Source.Microphone),h[0]!==v||h[1]!==g?(a={source:m.Track.Source.Microphone,onChange:g,initialState:v},h[0]=v,h[1]=g,h[2]=a):a=h[2];let{buttonProps:T}=(0,u.h)(a),k=b?_:void 0,S=b&&"pointer-events-none cursor-not-allowed opacity-70";return h[3]!==S?(i=(0,r.default)("flex items-center overflow-hidden rounded-xl border border-white/20 text-white",S),h[3]=S,h[4]=i):i=h[4],h[5]!==v?(o=(0,t.jsx)(P,{audioEnabled:v}),h[5]=v,h[6]=o):o=h[6],h[7]!==T||h[8]!==o?(s=(0,t.jsx)("button",{...T,className:"p-2 hover:!bg-white/20",children:o}),h[7]=T,h[8]=o,h[9]=s):s=h[9],h[10]!==y?(l=(0,t.jsx)("div",{className:"border-l border-white/20 p-2 hover:bg-white/20",children:(0,t.jsx)(E,{onOpenChange:y})}),h[10]=y,h[11]=l):l=h[11],h[12]!==i||h[13]!==s||h[14]!==l?(c=(0,t.jsxs)("div",{className:i,children:[s,l]}),h[12]=i,h[13]=s,h[14]=l,h[15]=c):c=h[15],h[16]!==k||h[17]!==c?(d=(0,t.jsx)(f.Tooltip,{content:k,children:c}),h[16]=k,h[17]=c,h[18]=d):d=h[18],d}],630419)},404171,e=>{"use strict";var t=e.i(484169);let n=new t.VideoPreset(2560,1440,12e6,60),r={videoSimulcastLayers:[t.VideoPresets.h720,t.VideoPresets.h360],screenShareEncoding:n.encoding,screenShareSimulcastLayers:[t.VideoPresets.h720,t.VideoPresets.h360],videoCodec:"h264",videoEncoding:n.encoding},a={facingMode:"user",resolution:n.resolution},i={resolution:n.resolution,contentHint:"motion"};e.s(["defaultScreenShareOptions",0,i,"defaultScreenShareTrackPublishOptions",0,{degradationPreference:"maintain-framerate"},"defaultTrackPublishOptions",0,r,"defaultVideoCaptureOptions",0,a])},140447,588174,755574,758319,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(692948),a=e.i(20596),i=e.i(558078),o=e.i(836684),s=e.i(453861),l=e.i(630419),c=e.i(157633),u=e.i(745018),d=e.i(264458),m=e.i(485374),f=e.i(812423),h=e.i(10785),v=e.i(404171),g=e.i(790290),y=e.i(967388),b=e.i(325320),_=e.i(43373),T=e.i(54567),k=e.i(339269),E=e.i(275762),S=e.i(132838),w=e.i(816896),x=e.i(936736);function C(){}let I=e=>{let a,i,o,s=(0,n.c)(13),{isSharing:l,isDisabled:I,tooltipContent:R,handleClick:P,isRequestingPermission:N,isRequestPending:A}=(e=>{let t,a,i,o,s=(0,n.c)(25),{localParticipant:l,activeScreenSharer:c,canShare:u}=e,{isHost:d,isCoHost:m}=(0,r.useLivekitRole)(),{openDialog:f}=(0,_.useLivestreamDialogStore)(),{mintId:I}=(0,b.useLivestreamContext)(),R=(0,E.useLivestream)(I),{isScreenShareRequested:P}=(0,k.useLocalParticipantMetadata)(),N=R?.id??0;s[0]!==l.identity||s[1]!==I||s[2]!==N?(t={livestreamId:N,mintId:I,identity:l.identity,onError:C},s[0]=l.identity,s[1]=I,s[2]=N,s[3]=t):t=s[3];let{mutate:A,isPending:L}=(e=>{let t,r,a,i,o,s=(0,n.c)(20),{livestreamId:l,mintId:c,identity:u,onSuccess:d,onError:m,onSettled:f}=e;return s[0]!==u||s[1]!==l||s[2]!==c?(t=()=>{T.logger.debug("[useRequestScreenSharePermission] Attempting to request screen share permission via API",{livestreamId:l,mintId:c,identity:u})},r=async()=>x.api.post("livestream/participant/request-screen-share-permission",{json:{livestreamId:l,mintId:c,identity:u}}).json(),s[0]=u,s[1]=l,s[2]=c,s[3]=t,s[4]=r):(t=s[3],r=s[4]),s[5]!==u||s[6]!==l||s[7]!==c||s[8]!==d?(a=e=>{(0,w.trackViewerRequestScreenShare)({mint:c,livestreamId:String(l),context:y.STAGE_SOURCE_CONTEXTS.VIEWER_CONTROLS}),T.logger.debug("[useRequestScreenSharePermission] Successfully requested screen share permission",{livestreamId:l,identity:u}),d?.(e)},s[5]=u,s[6]=l,s[7]=c,s[8]=d,s[9]=a):a=s[9],s[10]!==u||s[11]!==l||s[12]!==m?(i=e=>{T.logger.error("[useRequestScreenSharePermission] Failed to request screen share permission",{livestreamId:l,identity:u,error:e.message}),m?.(e)},s[10]=u,s[11]=l,s[12]=m,s[13]=i):i=s[13],s[14]!==f||s[15]!==t||s[16]!==r||s[17]!==a||s[18]!==i?(o={onMutate:t,mutationFn:r,onSuccess:a,onError:i,onSettled:f},s[14]=f,s[15]=t,s[16]=r,s[17]=a,s[18]=i,s[19]=o):o=s[19],(0,S.useMutation)(o)})(t),O=l.isScreenShareEnabled,M=P&&!u,D=!u&&!d&&!M,j=d&&!!c&&!O,U=u&&(O||!c||d),F=!R?.id||L||M||!D&&!j&&!U;e:{if(M){a="Waiting for host approval";break e}if(D){a="Ask host for permission to share screen";break e}if(!d&&c&&!O){a="Only one person can share their screen at a time.";break e}a=null}let H=a;s[4]!==c||s[5]!==j||s[6]!==D||s[7]!==U||s[8]!==m||s[9]!==d||s[10]!==O||s[11]!==R||s[12]!==l||s[13]!==u||s[14]!==I||s[15]!==f||s[16]!==A?(i=()=>{if(D)return void A();if(j){T.logger.debug("[useScreenShareToggle] Host opening takeover dialog for screen share",{activeScreenSharerId:c.identity}),f(_.DialogType.HostTakeoverScreenShare,{participantToStop:c});return}if(U){let e=!O;l.setScreenShareEnabled(e,v.defaultScreenShareOptions,v.defaultScreenShareTrackPublishOptions),(d||m)&&(0,g.trackHostScreenShareToggle)({mint:I??"",livestreamId:R?.id?String(R.id):void 0,isEnabled:e,role:d?h.StreamerRole.HOST:h.StreamerRole.COHOST,context:y.HOST_CONTROL_SOURCE_CONTEXTS.MEDIA_TOGGLE})}else T.logger.warn("[useScreenShareToggle] Screen share toggle blocked",{isHost:d,isSharing:O,canShare:u,hasActiveSharer:!!c})},s[4]=c,s[5]=j,s[6]=D,s[7]=U,s[8]=m,s[9]=d,s[10]=O,s[11]=R,s[12]=l,s[13]=u,s[14]=I,s[15]=f,s[16]=A,s[17]=i):i=s[17];let B=i;return s[18]!==B||s[19]!==M||s[20]!==L||s[21]!==F||s[22]!==O||s[23]!==H?(o={isSharing:O,isDisabled:F,tooltipContent:H,handleClick:B,isRequestingPermission:L,isRequestPending:M},s[18]=B,s[19]=M,s[20]=L,s[21]=F,s[22]=O,s[23]=H,s[24]=o):o=s[24],o})(e);s[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,d.default)("cursor-pointer rounded-xl p-1 text-white hover:bg-white/20 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"),s[0]=a):a=s[0];let L=l?"Stop sharing screen":"Start sharing screen";s[1]!==A||s[2]!==N||s[3]!==l?(i=N||A?(0,t.jsx)(c.IconHourglass,{size:f.ICON_SIZE}):l?(0,t.jsx)(u.IconShareScreen,{size:f.ICON_SIZE}):(0,t.jsx)(c.IconShareScreen,{size:f.ICON_SIZE}),s[1]=A,s[2]=N,s[3]=l,s[4]=i):i=s[4],s[5]!==P||s[6]!==I||s[7]!==L||s[8]!==i?(o=(0,t.jsx)("button",{type:"button",onClick:P,disabled:I,className:a,"aria-label":L,children:i}),s[5]=P,s[6]=I,s[7]=L,s[8]=i,s[9]=o):o=s[9];let O=o;if(R){let e;return s[10]!==O||s[11]!==R?(e=(0,t.jsx)(m.Tooltip,{content:R,children:O}),s[10]=O,s[11]=R,s[12]=e):e=s[12],e}return O};var R=e.i(639301),P=e.i(484169),N=e.i(733052),A=e.i(302636),L=e.i(268759);let O=e=>{let r,a=(0,n.c)(9),{isBackstage:i,onOpenChange:o}=e,{videoInputDevices:s,videoDeviceId:l,handleSetVideoDevice:c}=(0,A.useDeviceSelectionContext)();if(void 0!==i&&i){let e;return a[0]!==c||a[1]!==l||a[2]!==s?(e=(0,t.jsx)(L.DeviceSelectorBackstage,{activeDeviceId:l,setActiveMediaDevice:c,devices:s}),a[0]=c,a[1]=l,a[2]=s,a[3]=e):e=a[3],e}return a[4]!==c||a[5]!==o||a[6]!==l||a[7]!==s?(r=(0,t.jsx)(L.DeviceSelector,{activeDeviceId:l,setActiveMediaDevice:c,devices:s,onOpenChange:o}),a[4]=c,a[5]=o,a[6]=l,a[7]=s,a[8]=r):r=a[8],r};e.s(["SelectVideoDevice",0,O],588174);let M=e=>{let r,a,i,o,s,l,c,u=(0,n.c)(19),{videoEnabled:f,setVideoEnabled:h,setForceShowControls:v,disabled:g,disabledTooltip:y}=e;(0,N.useMediaTrackMute)(P.Track.Source.Camera),u[0]!==h||u[1]!==f?(r={source:P.Track.Source.Camera,onChange:h,initialState:f},u[0]=h,u[1]=f,u[2]=r):r=u[2];let{buttonProps:b}=(0,R.useTrackToggle)(r),_=g?y:void 0,T=g&&"pointer-events-none cursor-not-allowed opacity-70";return u[3]!==T?(a=(0,d.default)("flex items-center overflow-hidden rounded-xl border border-white/20 text-white",T),u[3]=T,u[4]=a):a=u[4],u[5]!==f?(i=(0,t.jsx)(D,{videoEnabled:f}),u[5]=f,u[6]=i):i=u[6],u[7]!==b||u[8]!==i?(o=(0,t.jsx)("button",{...b,className:"p-2 hover:!bg-white/20",children:i}),u[7]=b,u[8]=i,u[9]=o):o=u[9],u[10]!==v?(s=(0,t.jsx)("div",{className:"border-l border-white/20 p-2 hover:bg-white/20",children:(0,t.jsx)(O,{onOpenChange:v})}),u[10]=v,u[11]=s):s=u[11],u[12]!==a||u[13]!==o||u[14]!==s?(l=(0,t.jsxs)("div",{className:a,children:[o,s]}),u[12]=a,u[13]=o,u[14]=s,u[15]=l):l=u[15],u[16]!==_||u[17]!==l?(c=(0,t.jsx)(m.Tooltip,{content:_,children:l}),u[16]=_,u[17]=l,u[18]=c):c=u[18],c},D=e=>{let r,a,i,o=(0,n.c)(8),{videoEnabled:s,setVideoEnabled:l}=e;o[0]!==l||o[1]!==s?(r=()=>{l&&l(!s)},o[0]=l,o[1]=s,o[2]=r):r=o[2];let u=r;return o[3]!==s?(a=s?(0,t.jsx)(c.IconVideo,{size:f.ICON_SIZE}):(0,t.jsx)(c.IconVideoOff,{size:f.ICON_SIZE}),o[3]=s,o[4]=a):a=o[4],o[5]!==a||o[6]!==u?(i=(0,t.jsx)("div",{className:"cursor-pointer",onClick:u,children:a}),o[5]=a,o[6]=u,o[7]=i):i=o[7],i};e.s(["VideoToggleButton",0,D,"VideoToggleButtonLivekit",0,M],755574),e.s(["HostControls",0,e=>{let c,u,d,m,f,h,v=(0,n.c)(26),{setForceShowControls:g}=e,{isHost:y,isCoHost:b}=(0,r.useLivekitRole)(),{localParticipant:_,activeScreenSharer:T,canPublishScreenShare:k,audioEnabled:E,videoEnabled:S,toggleAudio:w,toggleVideo:x,disableDeviceControls:C}=(0,i.useHostControls)();return(0,a.useHostCommandListener)(),v[0]!==y?(c=y&&(0,t.jsx)(o.EndStreamButton,{}),v[0]=y,v[1]=c):c=v[1],v[2]!==b||v[3]!==_?(u=b&&_&&(0,t.jsx)(s.LeaveStageButton,{identity:_.identity}),v[2]=b,v[3]=_,v[4]=u):u=v[4],v[5]!==E||v[6]!==C||v[7]!==g||v[8]!==w?(d=(0,t.jsx)(l.MicToggleButtonLivekit,{disabled:C,disabledTooltip:"Manage your audio from your streaming software",setForceShowControls:g,audioEnabled:E,setAudioEnabled:w}),v[5]=E,v[6]=C,v[7]=g,v[8]=w,v[9]=d):d=v[9],v[10]!==C||v[11]!==g||v[12]!==x||v[13]!==S?(m=(0,t.jsx)(M,{disabled:C,disabledTooltip:"Manage your video from your streaming software",setForceShowControls:g,videoEnabled:S,setVideoEnabled:x}),v[10]=C,v[11]=g,v[12]=x,v[13]=S,v[14]=m):m=v[14],v[15]!==T||v[16]!==k||v[17]!==y||v[18]!==_?(f=(0,t.jsx)(I,{isHost:y,localParticipant:_,activeScreenSharer:T,canShare:k}),v[15]=T,v[16]=k,v[17]=y,v[18]=_,v[19]=f):f=v[19],v[20]!==c||v[21]!==u||v[22]!==d||v[23]!==m||v[24]!==f?(h=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[c,u,d,m,f]}),v[20]=c,v[21]=u,v[22]=d,v[23]=m,v[24]=f,v[25]=h):h=v[25],h}],140447);var j=e.i(389562),U=e.i(98076);e.s(["TooltipSelector",0,e=>{let r,a,i,o,s,l,c=(0,n.c)(12);c[0]!==e?({tooltipContent:o,tooltipProps:i,isOpen:r,...a}=e,c[0]=e,c[1]=r,c[2]=a,c[3]=i,c[4]=o):(r=c[1],a=c[2],i=c[3],o=c[4]);let u=void 0===i?j.DEFAULT_TOOLTIP_PROPS:i,d=r?null:o;return c[5]!==r||c[6]!==a?(s=(0,t.jsx)(U.Selector,{isOpen:r,...a}),c[5]=r,c[6]=a,c[7]=s):s=c[7],c[8]!==d||c[9]!==s||c[10]!==u?(l=(0,t.jsx)(m.Tooltip,{content:d,...u,children:s}),c[8]=d,c[9]=s,c[10]=u,c[11]=l):l=c[11],l}],758319)},387819,e=>{"use strict";var t=e.i(305288);e.s(["useEnsureRoom",()=>t.u])},851746,e=>{"use strict";var t,n=((t={}).AUTO="auto",t.HIGH="high (1440p)",t.MEDIUM="medium (720p)",t.LOW="low (360p)",t);e.s(["StreamQuality",()=>n])},812176,756506,e=>{"use strict";var t=e.i(649785),n=e.i(387819),r=e.i(10785),a=e.i(484169),i=e.i(281675),o=e.i(851746);let s=e=>{switch(e){case o.StreamQuality.HIGH:return a.VideoQuality.HIGH;case o.StreamQuality.MEDIUM:return a.VideoQuality.MEDIUM;case o.StreamQuality.LOW:return a.VideoQuality.LOW}},l=e=>{switch(e){case o.StreamQuality.AUTO:return r.StreamQuality.AUTO;case o.StreamQuality.HIGH:return r.StreamQuality.HIGH;case o.StreamQuality.MEDIUM:return r.StreamQuality.MEDIUM;case o.StreamQuality.LOW:return r.StreamQuality.LOW}};e.s(["pixelHeightToSdkStreamQuality",0,(e,t)=>t||null==e?r.StreamQuality.AUTO:e>=1080?r.StreamQuality.HIGH:e>=720?r.StreamQuality.MEDIUM:r.StreamQuality.LOW,"toSdkStreamQuality",0,l,"toVideoQuality",0,s],756506);var c=e.i(967388),u=e.i(797948),d=e.i(325320),m=e.i(182251),f=e.i(54567);function h(e){return{label:e,value:e}}e.s(["useConnectionQuality",0,()=>{let e,v,g,y=(0,t.c)(9),b=(0,n.useEnsureRoom)(),{mintId:_}=(0,d.useLivestreamContext)(),{getLivestream:T}=(0,m.useLivestreamDataStore)(),[k,E]=(0,i.useState)(o.StreamQuality.AUTO);y[0]!==T||y[1]!==_||y[2]!==k||y[3]!==b.remoteParticipants?(e=e=>{if(b.remoteParticipants.forEach(t=>{t.trackPublications.forEach(n=>{if(n.kind===a.Track.Kind.Video&&n.isSubscribed&&n.track)if(f.logger.debug("[useConnectionQuality] Applying quality to publication",{participantIdentity:t.identity,publicationSid:n.trackSid,requestedQuality:e}),e===o.StreamQuality.AUTO)n.setVideoQuality(a.VideoQuality.HIGH);else{let t=s(e);n.setVideoQuality(t)}})}),k!==e){let t=T(_);(0,u.trackChangeVideoQuality)({fromQuality:l(k),toQuality:l(e),mint:_,livestreamId:t?.id?String(t.id):void 0,contentType:r.VideoContentType.LIVESTREAM,context:c.LIVESTREAM_SOURCE_CONTEXTS.CONTROLS})}E(e)},y[0]=T,y[1]=_,y[2]=k,y[3]=b.remoteParticipants,y[4]=e):e=y[4];let S=e;y[5]===Symbol.for("react.memo_cache_sentinel")?(v=Object.values(o.StreamQuality).map(h),y[5]=v):v=y[5];let w=v;return y[6]!==S||y[7]!==k?(g={quality:k,setQuality:S,selectorOptions:w},y[6]=S,y[7]=k,y[8]=g):g=y[8],g}],812176)},292702,717375,e=>{"use strict";var t=e.i(649785),n=e.i(132838),r=e.i(641768),a=e.i(967388),i=e.i(936736),o=e.i(54567);e.s(["useCreateRtmpCredentials",0,e=>{let s,l,c,u,d,m,f,h,v,g=(0,t.c)(20);return g[0]!==e?({mintId:s,onSuccess:c,onError:l,...u}=e,g[0]=e,g[1]=s,g[2]=l,g[3]=c,g[4]=u):(s=g[1],l=g[2],c=g[3],u=g[4]),g[5]!==s?(d=()=>{o.logger.debug("[useCreateRtmpCredentials] Attempting to create RTMP credentials via API",{mintId:s})},m=async()=>i.api.post("livestream/livekit/create-rtmp-credentials",{json:{mintId:s}}).json(),g[5]=s,g[6]=d,g[7]=m):(d=g[6],m=g[7]),g[8]!==s||g[9]!==c?(f=(e,...t)=>{(0,r.trackRtmpFetch)({mint:s,context:a.LIFECYCLE_SOURCE_CONTEXTS.RTMP_SETTINGS}),o.logger.debug("[useCreateRtmpCredentials] Successfully created RTMP credentials",{mintId:s,hasCredentials:!!e}),c?.(e,...t)},g[8]=s,g[9]=c,g[10]=f):f=g[10],g[11]!==s||g[12]!==l?(h=(e,...t)=>{o.logger.error("[useCreateRtmpCredentials] Failed to create RTMP credentials",{mintId:s,error:e.message}),l?.(e,...t)},g[11]=s,g[12]=l,g[13]=h):h=g[13],g[14]!==u||g[15]!==d||g[16]!==m||g[17]!==f||g[18]!==h?(v={onMutate:d,mutationFn:m,onSuccess:f,onError:h,...u},g[14]=u,g[15]=d,g[16]=m,g[17]=f,g[18]=h,g[19]=v):v=g[19],(0,n.useMutation)(v)}],292702);var s=e.i(942765);e.s(["SettingsFooterButton",0,e=>{let n,r=(0,t.c)(4),{onClick:a,Icon:i,label:o}=e;return r[0]!==i||r[1]!==o||r[2]!==a?(n=(0,s.jsxs)("div",{className:"flex cursor-pointer items-center justify-start gap-2 rounded-md px-2 py-2 text-xs hover:bg-white/20",onClick:a,children:[i,o]}),r[0]=i,r[1]=o,r[2]=a,r[3]=n):n=r[3],n}],717375)},132622,313799,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(264458),a=e.i(169617),i=e.i(166037),o=e.i(882234),s=e.i(692948),l=e.i(275762),c=e.i(92551),u=e.i(325320),d=e.i(414948),m=e.i(952544),f=e.i(43373),h=e.i(695453),v=e.i(811164),g=e.i(472530),y=e.i(140447),b=e.i(157633),_=e.i(281675),T=e.i(758319),k=e.i(812423),E=e.i(389562),S=e.i(812176),w=e.i(292702),x=e.i(182251),C=e.i(54567),I=e.i(675898),R=e.i(717375),P=e.i(955526);let N=()=>{let e,r,a=(0,n.c)(7),{isTokenGateOn:i,isLoading:o,toggleTokenGate:s,isToggling:l}=(0,P.useTokenGateConfig)();return a[0]!==o||a[1]!==l||a[2]!==i?(e=o||l?(0,t.jsx)(I.Loader,{className:"h-3 w-3 animate-spin text-white/60"}):i?(0,t.jsx)(b.IconCheckmark2,{size:12,className:"text-livestream-green"}):(0,t.jsx)(b.IconCrossLarge,{size:12,className:"text-red-500"}),a[0]=o,a[1]=l,a[2]=i,a[3]=e):e=a[3],a[4]!==e||a[5]!==s?(r=(0,t.jsx)(R.SettingsFooterButton,{onClick:s,Icon:e,label:"Holders-only chat"}),a[4]=e,a[5]=s,a[6]=r):r=a[6],r};var A=e.i(259948),L=e.i(768710);let O=e=>{let a,i,o,s,l,c,u,d,m,f,h,v=(0,n.c)(29),{value:g,onChange:y,max:b,step:_,disabled:T,className:k}=e,E=void 0===b?1:b,S=void 0===_?.01:_,w=Math.min(Math.max(g,0),E);v[0]!==k?(a=(0,r.default)("w-full",L.BLUR_BUTTON_CLASS,k),v[0]=k,v[1]=a):a=v[1],v[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.default)("relative flex h-1 w-full touch-none select-none items-center"),v[2]=i):i=v[2],v[3]!==w?(o=[w],v[3]=w,v[4]=o):o=v[4],v[5]!==y?(s=e=>{y(e[0])},v[5]=y,v[6]=s):s=v[6];let x=T?"bg-livestream-muted":"bg-livestream-green";v[7]!==x?(l=(0,r.default)("absolute h-full rounded-full",x),v[7]=x,v[8]=l):l=v[8];let C=`${g/E*100}%`;v[9]!==C?(c={width:C},v[9]=C,v[10]=c):c=v[10],v[11]!==c||v[12]!==l?(u=(0,t.jsx)(A.Track,{className:"relative h-1 w-full grow rounded-full bg-livestream-muted/20",children:(0,t.jsx)(A.Range,{className:l,style:c})}),v[11]=c,v[12]=l,v[13]=u):u=v[13];let I=T?"cursor-not-allowed bg-livestream-muted":"cursor-pointer bg-livestream-green";return v[14]!==I?(d=(0,r.default)("relative block h-4 w-4 rounded-full",I),v[14]=I,v[15]=d):d=v[15],v[16]!==d?(m=(0,t.jsx)(A.Thumb,{className:d}),v[16]=d,v[17]=m):m=v[17],v[18]!==T||v[19]!==E||v[20]!==S||v[21]!==u||v[22]!==m||v[23]!==o||v[24]!==s?(f=(0,t.jsxs)(A.Root,{className:i,value:o,max:E,step:S,onValueChange:s,disabled:T,children:[u,m]}),v[18]=T,v[19]=E,v[20]=S,v[21]=u,v[22]=m,v[23]=o,v[24]=s,v[25]=f):f=v[25],v[26]!==f||v[27]!==a?(h=(0,t.jsx)("div",{className:a,children:f}),v[26]=f,v[27]=a,v[28]=h):h=v[28],h},M=()=>{let e,r=(0,n.c)(4),{volume:a,setVolume:i,audioMuted:o}=(0,d.useLivestreamFeaturesContext)();return r[0]!==o||r[1]!==i||r[2]!==a?(e=(0,t.jsx)(O,{value:a,onChange:i,disabled:o}),r[0]=o,r[1]=i,r[2]=a,r[3]=e):e=r[3],e};var D=e.i(745018),j=e.i(434092),U=e.i(89085);let F=e=>{let r,a,i,o,s,l=(0,n.c)(16),{onLoaded:c}=e,{mintId:m,token:h}=(0,u.useLivestreamContext)(),{setRtmpCredentials:v,rtmpCredentials:g}=(0,d.useLivestreamFeaturesContext)(),{openDialog:y}=(0,f.useLivestreamDialogStore)();l[0]!==y||l[1]!==v?(r=e=>{v(e),y(f.DialogType.GetRTMPKeys)},l[0]=y,l[1]=v,l[2]=r):r=l[2],l[3]!==m||l[4]!==r?(a={mintId:m,onSuccess:r},l[3]=m,l[4]=r,l[5]=a):a=l[5];let{mutateAsync:b,isPending:_}=(0,w.useCreateRtmpCredentials)(a);l[6]!==b||l[7]!==c||l[8]!==y||l[9]!==g?(i=async()=>{if(g){y(f.DialogType.GetRTMPKeys),c();return}await b(),c()},l[6]=b,l[7]=c,l[8]=y,l[9]=g,l[10]=i):i=l[10];let T=i;return h?.role!==U.LivekitRole.HOST?null:(l[11]!==_?(o=_?(0,t.jsx)(j.Loader2,{className:"animate-spin text-livestream-muted",size:10}):(0,t.jsx)(D.IconLock,{size:10}),l[11]=_,l[12]=o):o=l[12],l[13]!==T||l[14]!==o?(s=(0,t.jsx)(R.SettingsFooterButton,{onClick:T,Icon:o,label:"RTMP key and url"}),l[13]=T,l[14]=o,l[15]=s):s=l[15],s)},H=e=>{let r,a,i,o=(0,n.c)(6),{onClick:s}=e,{token:l}=(0,u.useLivestreamContext)(),{openDialog:c}=(0,f.useLivestreamDialogStore)();o[0]!==s||o[1]!==c?(r=async()=>{s(),c(f.DialogType.UpdateLivestreamTitle)},o[0]=s,o[1]=c,o[2]=r):r=o[2];let d=r;return l?.role!==U.LivekitRole.HOST?null:(o[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(D.IconPencil,{size:10}),o[3]=a):a=o[3],o[4]!==d?(i=(0,t.jsx)(R.SettingsFooterButton,{onClick:d,Icon:a,label:"Update stream title"}),o[4]=d,o[5]=i):i=o[5],i)},B=e=>{let r,a,i,o,l,c,h,v,g,y,b,k=(0,n.c)(40),{onOpenChange:I}=e,{quality:R,setQuality:P,selectorOptions:A}=(0,S.useConnectionQuality)(),{mintId:L}=(0,u.useLivestreamContext)(),{fullScreen:O,rtmpCredentials:D,setRtmpCredentials:j}=(0,d.useLivestreamFeaturesContext)(),{isHost:U}=(0,s.useLivekitRole)(),{openDialog:B}=(0,f.useLivestreamDialogStore)(),{getLivestream:q}=(0,x.useLivestreamDataStore)();k[0]!==B||k[1]!==j?(r=e=>{j(e),B(f.DialogType.GetRTMPKeys)},k[0]=B,k[1]=j,k[2]=r):r=k[2],k[3]!==L||k[4]!==r?(a={mintId:L,onSuccess:r},k[3]=L,k[4]=r,k[5]=a):a=k[5];let{mutateAsync:G}=(0,w.useCreateRtmpCredentials)(a);k[6]!==q||k[7]!==L?(i=q(L),k[6]=q,k[7]=L,k[8]=i):i=k[8];let z=i,[$,W]=(0,_.useState)(!1),[K,Q]=(0,_.useState)(z?.mode==="view-only");k[9]!==G||k[10]!==U||k[11]!==z?.mode||k[12]!==D||k[13]!==K?(o=()=>{K&&z?.mode==="view-only"&&!D&&U&&G().then(()=>{Q(!1)}).catch(e=>{C.logger.error("[SettingsButton] Error creating RTMP keys",{error:e}),Q(!1)})},k[9]=G,k[10]=U,k[11]=z?.mode,k[12]=D,k[13]=K,k[14]=o):o=k[14];let Y=z?.mode;k[15]!==G||k[16]!==U||k[17]!==B||k[18]!==D||k[19]!==K||k[20]!==Y?(l=[K,B,Y,D,G,U],k[15]=G,k[16]=U,k[17]=B,k[18]=D,k[19]=K,k[20]=Y,k[21]=l):l=k[21],(0,_.useEffect)(o,l);let X=m.featureFlags[m.FeatureFlags.TOKEN_GATING_ENABLED]&&U;k[22]!==I?(c=e=>{W(e),I(e)},k[22]=I,k[23]=c):c=k[23];let J=c,Z=String(R);return k[24]===Symbol.for("react.memo_cache_sentinel")?(h={...E.DEFAULT_TOOLTIP_PROPS},k[24]=h):h=k[24],k[25]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("p",{className:"text-xs",children:"Volume"}),(0,t.jsx)(M,{})]}),k[25]=v):v=k[25],k[26]!==U||k[27]!==J||k[28]!==X?(g=(U||X)&&(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-xs",children:"Settings"}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(F,{onLoaded:()=>J(!1)}),(0,t.jsx)(H,{onClick:()=>J(!1)}),X&&(0,t.jsx)(N,{})]})]}),k[26]=U,k[27]=J,k[28]=X,k[29]=g):g=k[29],k[30]!==g?(y=(0,t.jsxs)("div",{className:"flex flex-col gap-4 pl-1 pt-2",children:[v,g]}),k[30]=g,k[31]=y):y=k[31],k[32]!==O||k[33]!==$||k[34]!==J||k[35]!==A||k[36]!==P||k[37]!==y||k[38]!==Z?(b=(0,t.jsx)(T.TooltipSelector,{title:"Video quality",tooltipContent:"Stream settings",selectedValue:Z,options:A,onValueChange:P,tooltipProps:h,openDirection:"top",footer:y,isOpen:$,onOpenChange:J,icon:V,triggerClassName:"rounded-lg p-1 hover:bg-white/20",renderInPortal:O}),k[32]=O,k[33]=$,k[34]=J,k[35]=A,k[36]=P,k[37]=y,k[38]=Z,k[39]=b):b=k[39],b};function V(e){let{isOpen:n}=e;return(0,t.jsx)(b.IconSettingsGear1,{size:k.ICON_SIZE,className:(0,r.default)("transition-transform duration-200 ease-out",n&&"rotate-90")})}var q=e.i(941562);let G=e=>{let r,a,i=(0,n.c)(3),{onClick:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(D.IconFlag2,{size:k.ICON_SIZE}),i[0]=r):r=i[0],i[1]!==o?(a=(0,t.jsx)(q.TooltipIconButton,{tooltipContent:"Report issue",icon:r,onClick:o}),i[1]=o,i[2]=a):a=i[2],a};e.s(["ReportButton",0,G],313799),e.s(["BottomControls",0,e=>{let b,_,T,k,E,S,w,x,C,I,R,P,N,A,L,O,M,D=(0,n.c)(43),{setForceShowControls:j,isVisible:U,className:F}=e,{isHost:H,isCoHost:V}=(0,s.useLivekitRole)(),{mintId:q,showControls:z,isMobile:$}=(0,u.useLivestreamContext)(),{audioMuted:W}=(0,d.useLivestreamFeaturesContext)(),{onToggleMute:K}=(0,c.useVideoControlEvents)(),Q=(0,l.useLivestream)(q),{openDialog:Y}=(0,f.useLivestreamDialogStore)(),X=(0,o.useIsLocalParticipantLoggedIn)();if(!z||!Q)return null;let J=H||V,Z=U?"translate-y-0 opacity-100":"pointer-events-none translate-y-full opacity-0";return D[0]!==F||D[1]!==Z?(b=(0,r.default)("absolute bottom-0 flex h-12 w-full items-center sm:h-16","transition-[transform,opacity] duration-300 ease-out","bg-gradient-to-t from-black/90 to-transparent",Z,F),D[0]=F,D[1]=Z,D[2]=b):b=D[2],D[3]===Symbol.for("react.memo_cache_sentinel")?(_={zIndex:i.Z_INDEXES.Controls.bottom},D[3]=_):_=D[3],D[4]!==J||D[5]!==j?(T=J&&(0,t.jsx)(y.HostControls,{setForceShowControls:j}),D[4]=J,D[5]=j,D[6]=T):T=D[6],D[7]!==T?(k=(0,t.jsx)("div",{className:"flex items-center gap-1 sm:gap-2",children:T}),D[7]=T,D[8]=k):k=D[8],D[9]!==j?(E=m.featureFlags[m.FeatureFlags.REACTIONS_ENABLED]&&(0,t.jsx)(a.SendReactionControl,{setForceShowControls:j}),D[9]=j,D[10]=E):E=D[10],D[11]!==E?(S=(0,t.jsx)("div",{className:"absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center gap-2",children:E}),D[11]=E,D[12]=S):S=D[12],D[13]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.default)("flex items-center gap-1 rounded-xl p-1"),D[13]=w):w=D[13],D[14]!==j?(x=(0,t.jsx)("div",{className:w,children:(0,t.jsx)(h.ClipControl,{setForceShowControls:j})}),D[14]=j,D[15]=x):x=D[15],D[16]===Symbol.for("react.memo_cache_sentinel")?(C=(0,r.default)("flex items-center gap-1 rounded-xl p-1"),D[16]=C):C=D[16],D[17]!==j?(I=(0,t.jsx)(B,{onOpenChange:j}),D[17]=j,D[18]=I):I=D[18],D[19]!==W||D[20]!==K?(R=(0,t.jsx)(g.VolumeButton,{audioMuted:W,toggleMute:K}),D[19]=W,D[20]=K,D[21]=R):R=D[21],D[22]!==J||D[23]!==X||D[24]!==Y?(P=!J&&X&&(0,t.jsx)(G,{onClick:()=>{Y(f.DialogType.ReportLivestream)}}),D[22]=J,D[23]=X,D[24]=Y,D[25]=P):P=D[25],D[26]!==$?(N=!$&&(0,t.jsx)(v.FullScreenButton,{}),D[26]=$,D[27]=N):N=D[27],D[28]!==I||D[29]!==R||D[30]!==P||D[31]!==N?(A=(0,t.jsxs)("div",{className:C,children:[I,R,P,N]}),D[28]=I,D[29]=R,D[30]=P,D[31]=N,D[32]=A):A=D[32],D[33]!==A||D[34]!==x?(L=(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[x,A]}),D[33]=A,D[34]=x,D[35]=L):L=D[35],D[36]!==L||D[37]!==k||D[38]!==S?(O=(0,t.jsxs)("div",{className:"relative flex w-full items-center justify-between p-1 sm:p-3",children:[k,S,L]}),D[36]=L,D[37]=k,D[38]=S,D[39]=O):O=D[39],D[40]!==O||D[41]!==b?(M=(0,t.jsx)("div",{className:b,style:_,children:O}),D[40]=O,D[41]=b,D[42]=M):M=D[42],M}],132622)},653201,66656,213174,405549,331065,262830,e=>{"use strict";var t,n,r=e.i(942765),a=e.i(649785),i=e.i(198584);e.s(["livestreamViewersCountQueryKey",()=>w,"useLivestreamViewersCount",()=>x],405549);var o=e.i(690877),s=e.i(281675),l=e.i(606933),c=e.i(834171);let u=c.z.object({count:c.z.number()});var d=e.i(54567),m=((t=m||{}).VIEWER_COUNT="viewerCount",t),f=e.i(761459),h=e.i(89085),v=((n={}).VIEWER="VIEWER",n.HOST="HOST",n.CO_HOST="CO_HOST",n.ROOM_MODERATOR="ROOM_MODERATOR",n);let g=c.z.nativeEnum(v),y=c.z.object({viewerId:c.z.string(),sessionId:c.z.string(),username:c.z.string().optional(),profileImage:c.z.string(),type:g}),b=c.z.object({roomId:c.z.string(),viewers:c.z.array(y),count:c.z.number(),nextToken:c.z.string().nullish()});h.LivekitRole.VIEWER,h.LivekitRole.HOST,h.LivekitRole.CO_HOST,e.s(["ViewerType",()=>v,"viewersListSchema",0,b],66656);var _=e.i(936736);let T=e=>["livestream-viewers-list",e];function k(e){return e.nextToken??void 0}function E(e){return e.viewers}function S(e,t){return e[t.type].push({...t,identity:t.viewerId}),e}e.s(["livestreamViewersListQueryKey",0,T,"useLivestreamViewersList",0,e=>{let t,n,r,i,o,l,c,u,m=(0,a.c)(19),{roomId:h,limit:g,enabled:y}=e,w=void 0===g?50:g;m[0]!==h?(t=T(h),m[0]=h,m[1]=t):t=m[1],m[2]!==w||m[3]!==h?(n=async e=>{let{pageParam:t}=e,n=new URLSearchParams;n.set("limit",String(w)),t&&n.set("nextToken",t);let r=await _.livechatApi.get(`viewers/${h}/list?${n.toString()}`).json();return b.parse(r)},m[2]=w,m[3]=h,m[4]=n):n=m[4];let x=!!h&&(void 0===y||y);m[5]!==t||m[6]!==n||m[7]!==x?(r={queryKey:t,queryFn:n,getNextPageParam:k,initialPageParam:void 0,enabled:x},m[5]=t,m[6]=n,m[7]=x,m[8]=r):r=m[8];let C=(0,f.useInfiniteQuery)(r);m[9]!==C.data?.pages?(i=C.data?.pages.flatMap(E)??[],m[9]=C.data?.pages,m[10]=i):i=m[10];let I=i;if(m[11]!==I){let e={[v.HOST]:[],[v.CO_HOST]:[],[v.VIEWER]:[],[v.ROOM_MODERATOR]:[]};o=I.reduce(S,e),m[11]=I,m[12]=o}else o=m[12];let R=o;return m[13]!==C.error?(c=()=>{C.error&&d.logger.error("Failed to fetch viewers list",C.error)},l=[C.error],m[13]=C.error,m[14]=l,m[15]=c):(l=m[14],c=m[15]),(0,s.useEffect)(c,l),m[16]!==C||m[17]!==R?(u={...C,viewerTypeBuckets:R,hasNextPage:C.hasNextPage,fetchNextPage:C.fetchNextPage,isFetchingNextPage:C.isFetchingNextPage},m[16]=C,m[17]=R,m[18]=u):u=m[18],u}],213174);let w=e=>["livestream-viewers-count",e],x=e=>{let t,n,r,i,c,m,f,h,v,g,y=(0,a.c)(21);y[0]!==e?({socket:i,roomId:r,refetchInterval:n,...t}=e,y[0]=e,y[1]=t,y[2]=n,y[3]=r,y[4]=i):(t=y[1],n=y[2],r=y[3],i=y[4]),y[5]!==r?(c=w(r),y[5]=r,y[6]=c):c=y[6];let b=c;y[7]!==r?(m=async()=>{let e=await _.livechatApi.get(`viewers/${r}/count`).json();return u.parse(e)},y[7]=r,y[8]=m):m=y[8];let k=n??1e4;y[9]!==t||y[10]!==b||y[11]!==m||y[12]!==k?(f={queryKey:b,queryFn:m,refetchInterval:k,...t},y[9]=t,y[10]=b,y[11]=m,y[12]=k,y[13]=f):f=y[13];let E=(0,o.useQuery)(f);return y[14]!==E.error?(h=()=>{E.error&&d.logger.error("Failed to fetch viewers count",E.error)},v=[E.error],y[14]=E.error,y[15]=h,y[16]=v):(h=y[15],v=y[16]),(0,s.useEffect)(h,v),y[17]!==E.isSuccess||y[18]!==r||y[19]!==i?(g={socket:i,roomId:r,enabled:E.isSuccess},y[17]=E.isSuccess,y[18]=r,y[19]=i,y[20]=g):g=y[20],(e=>{let t,n,r,i,o,c,m=(0,a.c)(10),{socket:f,roomId:h,enabled:v}=e,g=(0,l.useQueryClient)(),y=((c=(0,a.c)(2))[0]!==f?(o=e=>{if(!f)throw d.logger.error("[useLivechatSocketViewersCountEmitters] subscribeToViewerCountUpdated: Socket is not connected"),Error("Socket is not connected");let t=t=>{let n=u.safeParse(t);n.success?e(n.data):d.logger.error("Invalid viewers count update received",{data:t,error:n.error})};return f.on("viewerCount",t),()=>{f.off("viewerCount",t)}},c[0]=f,c[1]=o):o=c[1],o),b=(0,s.useRef)(0);m[0]!==v||m[1]!==g||m[2]!==h||m[3]!==f||m[4]!==y?(t=()=>{if(f&&v)return y(e=>{if(d.logger.debug("[useLivestreamViewersCountSubscriber] Received viewers count update",{roomId:h,state:e}),e.count){let t=Date.now();t-b.current>=1e4&&(b.current=t,g.invalidateQueries({queryKey:T(h)})),g.setQueryData(w(h),e)}})},n=[f,v,y,g,h],m[0]=v,m[1]=g,m[2]=h,m[3]=f,m[4]=y,m[5]=t,m[6]=n):(t=m[5],n=m[6]),(0,s.useEffect)(t,n),m[7]===Symbol.for("react.memo_cache_sentinel")?(r=()=>()=>{b.current=0},m[7]=r):r=m[7],m[8]!==h?(i=[h],m[8]=h,m[9]=i):i=m[9],(0,s.useEffect)(r,i)})(g),E};var C=e.i(985436),I=e.i(325320),R=e.i(182251),P=e.i(157633),N=e.i(264458),A=r,L=e.i(745018),O=e.i(419157);let M=({error:e,isLoading:t,children:n,LoadingIcon:r=(0,A.jsx)(O.PumpPillLoader,{logoSize:16})})=>t?(0,A.jsx)("div",{className:"flex items-center justify-center",children:r}):e?(0,A.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,A.jsx)(L.IconTriangleExclamation,{className:"h-4 w-4 text-text-error"}),"string"==typeof e&&(0,A.jsx)("p",{className:"text-sm text-text-error-muted",children:e})]}):n;e.s(["LoadingErrorState",0,M],331065);let D=e=>{let t,n,i=(0,a.c)(3),{className:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M8.00033 1.33325C6.34347 1.33325 5.00033 2.6764 5.00033 4.33325C5.00033 5.99011 6.34347 7.33325 8.00033 7.33325C9.65718 7.33325 11.0003 5.99011 11.0003 4.33325C11.0003 2.6764 9.65718 1.33325 8.00033 1.33325Z",fill:"#F8FAFC"}),(0,r.jsx)("path",{d:"M8.0004 7.99992C5.76191 7.99992 3.97541 9.17731 3.03545 10.9256C2.61597 11.7058 2.77408 12.5157 3.23911 13.0942C3.68798 13.6526 4.41616 13.9999 5.19723 13.9999H10.8036C11.5846 13.9999 12.3128 13.6526 12.7617 13.0942C13.2267 12.5157 13.3848 11.7058 12.9653 10.9256C12.0254 9.17731 10.2389 7.99992 8.0004 7.99992Z",fill:"#F8FAFC"})]}),i[0]=t):t=i[0],i[1]!==o?(n=(0,r.jsx)("div",{className:o,children:t}),i[1]=o,i[2]=n):n=i[2],n},j=e=>{let t,n,i,o,s,l,c=(0,a.c)(12),{isLoading:u,isError:d,onClick:m,numParticipants:f}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,N.default)("flex cursor-pointer items-center gap-[2px]"),c[0]=t):t=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(D,{}),c[1]=n):n=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(P.IconLoader,{className:"h-4 w-4 animate-spin text-text-primary"}),c[2]=i):i=c[2],c[3]!==f?(o=f&&(0,r.jsx)("span",{className:"text-[14px] leading-[18px] text-text-primary",children:f}),c[3]=f,c[4]=o):o=c[4],c[5]!==d||c[6]!==u||c[7]!==o?(s=(0,r.jsxs)("div",{className:"flex items-center rounded-[4px] bg-black/50 p-[2px]",children:[n,(0,r.jsx)(M,{isLoading:u,error:d,LoadingIcon:i,children:o})]}),c[5]=d,c[6]=u,c[7]=o,c[8]=s):s=c[8],c[9]!==m||c[10]!==s?(l=(0,r.jsx)("div",{className:t,onClick:m,children:s}),c[9]=m,c[10]=s,c[11]=l):l=c[11],l};e.s(["ParticipantsCount",0,j],262830),e.s(["LiveKitParticipantsCount",0,e=>{let t,n,o,s=(0,a.c)(11),{onClick:l}=e,c=(0,i.useRoomContext)(),{mintId:u}=(0,I.useLivestreamContext)(),{getLivestream:d}=(0,R.useLivestreamDataStore)();s[0]!==d||s[1]!==u?(t=d(u),s[0]=d,s[1]=u,s[2]=t):t=s[2];let m=t,f=(0,C.useLivechatSocket)();s[3]!==u||s[4]!==f?(n={roomId:u,socket:f},s[3]=u,s[4]=f,s[5]=n):n=s[5];let{data:h,isLoading:v,isError:g}=x(n),y=h?.count||c.numParticipants||m?.numParticipants,b=g&&!y,_=y??0;return s[6]!==v||s[7]!==l||s[8]!==b||s[9]!==_?(o=(0,r.jsx)(j,{isLoading:v,isError:b,onClick:l,numParticipants:_}),s[6]=v,s[7]=l,s[8]=b,s[9]=_,s[10]=o):o=s[10],o}],653201)},532002,e=>{"use strict";var t=e.i(325320);e.s(["useIsRecording",0,()=>{let{viewMode:e}=(0,t.useLivestreamContext)();return"recording"===e}])},733633,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(281675),a=e.i(166037),i=e.i(325320),o=e.i(43373),s=e.i(731190),l=e.i(132622),c=e.i(264458),u=e.i(653201),d=e.i(532002);let m=e=>{let r,l,m,f,h,v,g=(0,n.c)(14),{isVisible:y}=e,{openDialog:b}=(0,o.useLivestreamDialogStore)(),{showControls:_,isMobile:T}=(0,i.useLivestreamContext)(),k=(0,d.useIsRecording)();g[0]!==b||g[1]!==_?(r=()=>{_&&b(o.DialogType.Participants)},g[0]=b,g[1]=_,g[2]=r):r=g[2];let E=r,S=y?"translate-y-0 opacity-100":"-translate-y-full opacity-0",w=!T&&"rounded-t-[8px]",x=k&&"hidden";return g[3]!==S||g[4]!==w||g[5]!==x?(l=(0,c.default)("pointer-events-none","bg-gradient-to-b from-[#11121580] to-black/0","absolute top-0 h-[84px] w-full","transition-[transform,opacity] duration-300 ease-out",S,w,x),g[3]=S,g[4]=w,g[5]=x,g[6]=l):l=g[6],g[7]===Symbol.for("react.memo_cache_sentinel")?(m={zIndex:a.Z_INDEXES.Controls.top},g[7]=m):m=g[7],g[8]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(s.LiveIndicator,{live:!0}),g[8]=f):f=g[8],g[9]!==E?(h=(0,t.jsx)("div",{className:"flex w-full justify-end p-[12px]",children:(0,t.jsxs)("div",{className:"pointer-events-auto flex items-center gap-2",children:[f,(0,t.jsx)(u.LiveKitParticipantsCount,{onClick:E})]})}),g[9]=E,g[10]=h):h=g[10],g[11]!==l||g[12]!==h?(v=(0,t.jsx)("div",{className:l,style:m,children:h}),g[11]=l,g[12]=h,g[13]=v):v=g[13],v};function f(e){return e.stopPropagation()}e.s(["ParticipantControls",0,e=>{let c,u,d,h,v=(0,n.c)(13),{isBackstage:g,isHovering:y,onForceShowControlsChange:b}=e,_=void 0!==g&&g,{isOpen:T}=(0,o.useLivestreamDialogStore)(),[k,E]=(0,r.useState)(!1),{isDisconnected:S,isMobile:w}=(0,i.useLivestreamContext)();v[0]!==b?(c=e=>{E(e),b?.(e)},v[0]=b,v[1]=c):c=v[1];let x=c;if(S)return null;let C=w||void 0!==y&&y||k||T||_,I=w?f:void 0;return v[2]!==_||v[3]!==C?(u=_?(0,t.jsx)("div",{className:"absolute top-0 h-[84px] w-full",style:{zIndex:a.Z_INDEXES.Controls.top},children:(0,t.jsx)("div",{className:"flex w-full justify-end p-[12px]",children:(0,t.jsx)(s.LiveIndicator,{live:!1})})}):(0,t.jsx)(m,{isVisible:C}),v[2]=_,v[3]=C,v[4]=u):u=v[4],v[5]!==x||v[6]!==_||v[7]!==C?(d=!_&&(0,t.jsx)(l.BottomControls,{setForceShowControls:x,isVisible:C}),v[5]=x,v[6]=_,v[7]=C,v[8]=d):d=v[8],v[9]!==I||v[10]!==u||v[11]!==d?(h=(0,t.jsxs)("div",{className:"absolute right-0 top-0 h-full w-full",onClick:I,children:[u,d]}),v[9]=I,v[10]=u,v[11]=d,v[12]=h):h=v[12],h}],733633)},618832,e=>{"use strict";var t,n,r=e.i(281675),a=e.i(249437),i=e.i(525665),o=e.i(484169),s=e.i(305288);let l=r.forwardRef(function(e,t){let{mergedProps:n}=(0,a.b)({props:e});return r.createElement("button",{ref:t,...n},e.children)}),c=r.forwardRef(function(e,t){let{buttonProps:n}=(0,a.c)(e);return r.createElement("button",{ref:t,...n},e.children)}),u=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},r.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),r.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),d=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},r.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),m=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),f=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...e},r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),h=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),v=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},r.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),g=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),y=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),b=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),_=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},r.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),r.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),T=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},r.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),r.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),k=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),E=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("g",{opacity:.25},r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),S=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("g",{opacity:.25},r.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),w=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},r.createElement("g",{opacity:.25},r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),x=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),C=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},r.createElement("g",{fill:"currentColor"},r.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),r.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),I=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),R=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},r.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),P=r.forwardRef(function({trackRef:e,...t},n){let i=(0,s.ae)(),{mergedProps:o,inFocus:l}=(0,a.d)({trackRef:e??i,props:t});return r.createElement(s.af.Consumer,null,e=>void 0!==e&&r.createElement("button",{ref:n,...o},t.children?t.children:l?r.createElement(R,null):r.createElement(v,null)))}),N=r.forwardRef(function({kind:e,initialSelection:t,onActiveDeviceChange:n,onDeviceListChange:l,onDeviceSelectError:c,exactMatch:u,track:d,requestPermissions:m,onError:f,...h},v){let g=(0,s.w)(),y=r.useRef("default"),b=r.useCallback(e=>{g&&g.emit(o.RoomEvent.MediaDevicesError,e),null==f||f(e)},[g,f]),{devices:_,activeDeviceId:T,setActiveMediaDevice:k,className:E}=(0,a.e)({kind:e,room:g,track:d,requestPermissions:m,onError:b});r.useEffect(()=>{void 0!==t&&k(t)},[k]),r.useEffect(()=>{"function"==typeof l&&l(_)},[l,_]),r.useEffect(()=>{T!==y.current&&(null==n||n(T)),y.current=T},[T]);let S=async e=>{try{await k(e,{exact:u??!0})}catch(e){if(e instanceof Error)null==c||c(e);else throw e}},w=r.useMemo(()=>(0,i.a)(h,{className:E},{className:"lk-list"}),[E,h]),x=!!_.find(e=>e.label.toLowerCase().startsWith("default"));function C(e,t,n){return e===t||!x&&0===n&&"default"===t}return r.createElement("ul",{ref:v,...w},_.map((e,t)=>r.createElement("li",{key:e.deviceId,id:e.deviceId,"data-lk-active":C(e.deviceId,T,t),"aria-selected":C(e.deviceId,T,t),role:"option"},r.createElement("button",{className:"lk-button",onClick:()=>S(e.deviceId)},e.label))))}),A=r.forwardRef(function({label:e,...t},n){let i=(0,s.f)(),{mergedProps:o,canPlayAudio:l}=(0,a.f)({room:i,props:t}),{mergedProps:c,canPlayVideo:u}=(0,a.g)({room:i,props:o}),{style:d,...m}=c;return d.display=l&&u?"none":"block",r.createElement("button",{ref:n,style:d,...m},e??`Start ${l?"Video":"Audio"}`)});function L(e,t){switch(e){case o.Track.Source.Microphone:return t?r.createElement(T,null):r.createElement(_,null);case o.Track.Source.Camera:return t?r.createElement(d,null):r.createElement(u,null);case o.Track.Source.ScreenShare:return t?r.createElement(C,null):r.createElement(x,null);default:return}}let O=r.forwardRef(function({showIcon:e,...t},n){let{buttonProps:i,enabled:o}=(0,a.h)(t),[s,l]=r.useState(!1);return r.useEffect(()=>{l(!0)},[]),s&&r.createElement("button",{ref:n,...i},(e??!0)&&L(t.source,o),t.children)}),M=r.forwardRef(function(e,t){let{className:n,quality:s}=(0,a.i)(e),l=r.useMemo(()=>({...(0,i.a)(e,{className:n}),"data-lk-quality":s}),[s,e,n]);return r.createElement("div",{ref:t,...l},e.children??function(e){switch(e){case o.ConnectionQuality.Excellent:return r.createElement(k,null);case o.ConnectionQuality.Good:return r.createElement(E,null);case o.ConnectionQuality.Poor:return r.createElement(S,null);default:return r.createElement(w,null)}}(s))}),D=r.forwardRef(function({participant:e,...t},n){let o=(0,s.c)(e),{className:l,infoObserver:c}=r.useMemo(()=>(0,s.ag)(o),[o]),{identity:u,name:d}=(0,a.j)(c,{name:o.name,identity:o.identity,metadata:o.metadata}),m=r.useMemo(()=>(0,i.a)(t,{className:l,"data-lk-participant-name":d}),[t,l,d]);return r.createElement("span",{ref:n,...m},""!==d?d:u,t.children)}),j=r.forwardRef(function({trackRef:e,show:t="always",...n},o){let{className:s,isMuted:l}=(0,a.k)(e),c="always"===t||"muted"===t&&l||"unmuted"===t&&!l,u=r.useMemo(()=>(0,i.a)(n,{className:s}),[s,n]);return c?r.createElement("div",{ref:o,...u,"data-lk-muted":l},n.children??L(e.source,!l)):null}),U=e=>r.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),r.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function F(e,t={}){let[n,a]=r.useState((0,s.X)(e)),[o,l]=r.useState(null==n?void 0:n.isMuted),[c,u]=r.useState(null==n?void 0:n.isSubscribed),[d,m]=r.useState(null==n?void 0:n.track),[f,h]=r.useState("landscape"),v=r.useRef(),{className:g,trackObserver:y}=r.useMemo(()=>(0,s.Y)(e),[e.participant.sid??e.participant.identity,e.source,(0,s.a1)(e)&&e.publication.trackSid]);return r.useEffect(()=>{let e=y.subscribe(e=>{s.l.debug("update track",e),a(e),l(null==e?void 0:e.isMuted),u(null==e?void 0:e.isSubscribed),m(null==e?void 0:e.track)});return()=>null==e?void 0:e.unsubscribe()},[y]),r.useEffect(()=>{var n,r;return d&&(v.current&&d.detach(v.current),null!=(n=t.element)&&n.current&&!(e.participant.isLocal&&(null==d?void 0:d.kind)==="audio")&&d.attach(t.element.current)),v.current=null==(r=t.element)?void 0:r.current,()=>{v.current&&(null==d||d.detach(v.current))}},[d,t.element]),r.useEffect(()=>{var e,t;"number"==typeof(null==(e=null==n?void 0:n.dimensions)?void 0:e.width)&&"number"==typeof(null==(t=null==n?void 0:n.dimensions)?void 0:t.height)&&h(n.dimensions.width>n.dimensions.height?"landscape":"portrait")},[n]),{publication:n,isMuted:o,isSubscribed:c,track:d,elementProps:(0,i.a)(t.props,{className:g,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":null==n?void 0:n.source,...(null==n?void 0:n.kind)==="video"&&{"data-lk-orientation":f}})}}var H=function(){if(n)return t;n=1;var e=NaN,r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof s.ah&&s.ah&&s.ah.Object===Object&&s.ah,u="object"==typeof self&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),m=Object.prototype.toString,f=Math.max,h=Math.min,v=function(){return d.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(t){if("number"==typeof t)return t;if("symbol"==typeof(n=t)||n&&"object"==typeof n&&"[object Symbol]"==m.call(n))return e;if(g(t)){var n,s="function"==typeof t.valueOf?t.valueOf():t;t=g(s)?s+"":s}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var c=i.test(t);return c||o.test(t)?l(t.slice(2),c?2:8):a.test(t)?e:+t}return t=function(e,t,n){var r,a,i,o,s,l,c=0,u=!1,d=!1,m=!0;if("function"!=typeof e)throw TypeError("Expected a function");function b(t){var n=r,i=a;return r=a=void 0,c=t,o=e.apply(i,n)}function _(e){var n=e-l,r=e-c;return void 0===l||n>=t||n<0||d&&r>=i}function T(){var e,n,r,a=v();if(_(a))return k(a);s=setTimeout(T,(e=a-l,n=a-c,r=t-e,d?h(r,i-n):r))}function k(e){return s=void 0,m&&r?b(e):(r=a=void 0,o)}function E(){var e,n=v(),i=_(n);if(r=arguments,a=this,l=n,i){if(void 0===s)return c=e=l,s=setTimeout(T,t),u?b(e):o;if(d)return s=setTimeout(T,t),b(l)}return void 0===s&&(s=setTimeout(T,t)),o}return t=y(t)||0,g(n)&&(u=!!n.leading,i=(d="maxWait"in n)?f(y(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m),E.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=a=s=void 0},E.flush=function(){return void 0===s?o:k(v())},E}}();let B=(0,s.ai)(H),V=r.forwardRef(function({onTrackClick:e,onClick:t,onSubscriptionStatusChanged:n,trackRef:a,manageSubscription:i,...l},c){let u=(0,s.i)(a),d=r.useRef(null);r.useImperativeHandle(c,()=>d.current);let m=function({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:a=!1,initialIsIntersecting:i=!1,onChange:o}={}){var s;let[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(()=>({isIntersecting:i,entry:void 0})),m=(0,r.useRef)();m.current=o;let f=(null==(s=u.entry)?void 0:s.isIntersecting)&&a;(0,r.useEffect)(()=>{if(!l||!("IntersectionObserver"in window)||f)return;let r=new IntersectionObserver(e=>{let t=Array.isArray(r.thresholds)?r.thresholds:[r.thresholds];e.forEach(e=>{let n=e.isIntersecting&&t.some(t=>e.intersectionRatio>=t);d({isIntersecting:n,entry:e}),m.current&&m.current(n,e)})},{threshold:e,root:t,rootMargin:n});return r.observe(l),()=>{r.disconnect()}},[l,JSON.stringify(e),t,n,f,a]);let h=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;l||null==(e=u.entry)||!e.target||a||f||h.current===u.entry.target||(h.current=u.entry.target,d({isIntersecting:i,entry:void 0}))},[l,u.entry,a,f,i]);let v=[c,!!u.isIntersecting,u.entry];return v.ref=v[0],v.isIntersecting=v[1],v.entry=v[2],v}({root:d.current}),[f]=function(e,t,n){let a=e instanceof Function?e():e,[i,o]=(0,r.useState)(a),s=(0,r.useRef)(a),l=function(e,t=500,n){var a;let i,o=(0,r.useRef)();a=()=>{o.current&&o.current.cancel()},(i=(0,r.useRef)(a)).current=a,(0,r.useEffect)(()=>()=>{i.current()},[]);let s=(0,r.useMemo)(()=>{let r=B(e,t,n),a=(...e)=>r(...e);return a.cancel=()=>{r.cancel()},a.isPending=()=>!!o.current,a.flush=()=>r.flush(),a},[e,t,n]);return(0,r.useEffect)(()=>{o.current=B(e,t,n)},[e,t,n]),s}(o,3e3,void 0);return s.current===a||(l(a),s.current=a),[i,l]}(m,0);r.useEffect(()=>{i&&u.publication instanceof o.RemoteTrackPublication&&(null==f?void 0:f.isIntersecting)===!1&&(null==m?void 0:m.isIntersecting)===!1&&u.publication.setSubscribed(!1)},[f,u,i]),r.useEffect(()=>{i&&u.publication instanceof o.RemoteTrackPublication&&(null==m?void 0:m.isIntersecting)===!0&&u.publication.setSubscribed(!0)},[m,u,i]);let{elementProps:h,publication:v,isSubscribed:g}=F(u,{element:d,props:l});return r.useEffect(()=>{null==n||n(!!g)},[g,n]),r.createElement("video",{ref:d,...h,muted:!0,onClick:n=>{null==t||t(n),null==e||e({participant:null==u?void 0:u.participant,track:v})}})}),q=r.forwardRef(function({trackRef:e,onSubscriptionStatusChanged:t,volume:n,...a},i){let l=(0,s.i)(e),c=r.useRef(null);r.useImperativeHandle(i,()=>c.current);let{elementProps:u,isSubscribed:d,track:m,publication:f}=F(l,{element:c,props:a});return r.useEffect(()=>{null==t||t(!!d)},[d,t]),r.useEffect(()=>{void 0===m||void 0===n||(m instanceof o.RemoteAudioTrack?m.setVolume(n):s.l.warn("Volume can only be set on remote audio tracks."))},[n,m]),r.useEffect(()=>{void 0===f||void 0===a.muted||(f instanceof o.RemoteTrackPublication?f.setEnabled(!a.muted):s.l.warn("Can only call setEnabled on remote track publications."))},[a.muted,f,m]),r.createElement("audio",{ref:c,...u})});function G(e){let t=!!(0,s.B)();return e.participant&&!t?r.createElement(s.aj.Provider,{value:e.participant},e.children):r.createElement(r.Fragment,null,e.children)}function z(e){let t=!!(0,s.ae)();return e.trackRef&&!t?r.createElement(s.ak.Provider,{value:e.trackRef},e.children):r.createElement(r.Fragment,null,e.children)}let $=r.forwardRef(function({trackRef:e,children:t,onParticipantClick:n,disableSpeakingIndicator:i,...l},c){var u,d;let m=(0,s.i)(e),{elementProps:f}=(0,a.l)({htmlProps:l,disableSpeakingIndicator:i,onParticipantClick:n,trackRef:m}),h=(0,a.m)(m.participant),v=(0,s.j)(),g=null==(u=(0,s.al)())?void 0:u.autoSubscription,y=r.useCallback(e=>{m.source&&!e&&v&&v.pin.dispatch&&(0,s.m)(m,v.pin.state)&&v.pin.dispatch({msg:"clear_pin"})},[m,v]);return r.createElement("div",{ref:c,style:{position:"relative"},...f},r.createElement(z,{trackRef:m},r.createElement(G,{participant:m.participant},t??r.createElement(r.Fragment,null,(0,s.a1)(m)&&((null==(d=m.publication)?void 0:d.kind)==="video"||m.source===o.Track.Source.Camera||m.source===o.Track.Source.ScreenShare)?r.createElement(V,{trackRef:m,onSubscriptionStatusChanged:y,manageSubscription:g}):(0,s.a1)(m)&&r.createElement(q,{trackRef:m,onSubscriptionStatusChanged:y}),r.createElement("div",{className:"lk-participant-placeholder"},r.createElement(U,null)),r.createElement("div",{className:"lk-participant-metadata"},r.createElement("div",{className:"lk-participant-metadata-item"},m.source===o.Track.Source.Camera?r.createElement(r.Fragment,null,h&&r.createElement(b,{style:{marginRight:"0.25rem"}}),r.createElement(j,{trackRef:{participant:m.participant,source:o.Track.Source.Microphone},show:"muted"}),r.createElement(D,null)):r.createElement(r.Fragment,null,r.createElement(x,{style:{marginRight:"0.25rem"}}),r.createElement(D,null,"'s screen"))),r.createElement(M,{className:"lk-participant-metadata-item"}))),r.createElement(P,{trackRef:m}))))});function W(e){let t=(0,i.a)(e,{className:"lk-focus-layout"});return r.createElement("div",{...t},e.children)}function K({trackRef:e,...t}){return r.createElement($,{trackRef:e,...t})}function Q({tracks:e,...t}){return r.createElement(r.Fragment,null,e.map(e=>r.createElement(s.ak.Provider,{value:e,key:(0,s.p)(e)},(0,i.c)(t.children))))}function Y({totalPageCount:e,nextPage:t,prevPage:n,currentPage:a,pagesContainer:i}){let[o,l]=r.useState(!1);return r.useEffect(()=>{let e;return i&&(e=(0,s.am)(i.current,2e3).subscribe(l)),()=>{e&&e.unsubscribe()}},[i]),r.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":o},r.createElement("button",{className:"lk-button",onClick:n},r.createElement(h,null)),r.createElement("span",{className:"lk-pagination-count"},`${a} of ${e}`),r.createElement("button",{className:"lk-button",onClick:t},r.createElement(h,null)))}let X=r.forwardRef(function({totalPageCount:e,currentPage:t},n){let a=Array(e).fill("").map((e,n)=>n+1===t?r.createElement("span",{"data-lk-active":!0,key:n}):r.createElement("span",{key:n}));return r.createElement("div",{ref:n,className:"lk-pagination-indicator"},a)});function J({tracks:e,...t}){let n=r.createRef(),o=r.useMemo(()=>(0,i.a)(t,{className:"lk-grid-layout"}),[t]),{layout:s}=(0,a.n)(n,e.length),l=(0,a.o)(s.maxTiles,e);return(0,a.p)(n,{onLeftSwipe:l.nextPage,onRightSwipe:l.prevPage}),r.createElement("div",{ref:n,"data-lk-pagination":l.totalPageCount>1,...o},r.createElement(Q,{tracks:l.tracks},t.children),e.length>s.maxTiles&&r.createElement(r.Fragment,null,r.createElement(X,{totalPageCount:l.totalPageCount,currentPage:l.currentPage}),r.createElement(Y,{pagesContainer:n,...l})))}let Z=-(-.6000000000000001*1);function ee({tracks:e,orientation:t,...n}){let i=r.useRef(null),[o,l]=r.useState(0),{width:c,height:u}=(0,a.q)(i),d=t||(u>=c?"vertical":"horizontal"),m="vertical"===d?Math.max(c*Z,130):Math.max(1.6*u,140),f=(0,s.an)(),h=Math.max("vertical"===d?(u-f)/m:(c-f)/m,1),v=Math.round(h);.5>Math.abs(h-o)?v=Math.round(o):o!==h&&l(h);let g=(0,a.r)(e,v);return r.useLayoutEffect(()=>{i.current&&(i.current.dataset.lkOrientation=d,i.current.style.setProperty("--lk-max-visible-tiles",v.toString()))},[v,d]),r.createElement("aside",{key:d,className:"lk-carousel",ref:i,...n},r.createElement(Q,{tracks:g},n.children))}function et({value:e,onPinChange:t,onWidgetChange:n,children:a}){let i=(0,s.ao)(e);return r.useEffect(()=>{s.l.debug("PinState Updated",{state:i.pin.state}),t&&i.pin.state&&t(i.pin.state)},[i.pin.state,t]),r.useEffect(()=>{s.l.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),r.createElement(s.af.Provider,{value:i},a)}function en({room:e,volume:t,muted:n}){let i=(0,a.t)([o.Track.Source.Microphone,o.Track.Source.ScreenShareAudio,o.Track.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0,room:e}).filter(e=>!e.participant.isLocal&&e.publication.kind===o.Track.Kind.Audio);return r.createElement("div",{style:{display:"none"}},i.map(e=>r.createElement(q,{key:(0,s.p)(e),trackRef:e,volume:t,muted:n})))}function er(e){let t=r.useMemo(()=>(0,i.a)(e,{className:"lk-toast"}),[e]);return r.createElement("div",{...t},e.children)}let ea=e=>[[Math.floor(e/2)],[-1]],ei=new Map([["connecting",2e3],["initializing",2e3],["listening",500],["thinking",150]]),eo=r.forwardRef(function({state:e,options:t,barCount:n=15,trackRef:o,track:l,children:c,...u},d){let m=(0,i.a)(u,{className:"lk-audio-bar-visualizer"}),f=(0,s.ae)();(o||l)&&(f=o||l);let h=(0,a.s)(f,{bands:n,loPass:100,hiPass:200}),v=(null==t?void 0:t.minHeight)??20,g=(null==t?void 0:t.maxHeight)??100,y=((e,t,n)=>{let[a,i]=(0,r.useState)(0),[o,s]=(0,r.useState)([[]]);(0,r.useEffect)(()=>{"thinking"===e?s(ea(t)):"connecting"===e||"initializing"===e?s([...(e=>{let t=[];for(let n=0;n<e;n++)t.push([n,e-1-n]);return t})(t)]):s("listening"===e?ea(t):void 0===e||"speaking"===e?[Array(t).fill(0).map((e,t)=>t)]:[[]]),i(0)},[e,t]);let l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=performance.now(),t=r=>{r-e>=n&&(i(e=>e+1),e=r),l.current=requestAnimationFrame(t)};return l.current=requestAnimationFrame(t),()=>{null!==l.current&&cancelAnimationFrame(l.current)}},[n,t,e,o.length]),o[a%o.length]})(e,n,((e,t)=>{if(void 0===e)return 1e3;let n=ei.get(e);return n&&"connecting"===e&&(n/=t),n})(e,n)??100);return r.createElement("div",{ref:d,...m,"data-lk-va-state":e},h.map((e,t)=>c?(0,i.c)(c,{"data-lk-highlighted":y.includes(t),"data-lk-bar-index":t,className:"lk-audio-bar",style:{height:`${Math.min(g,Math.max(v,100*e+5))}%`}}):r.createElement("span",{key:t,"data-lk-highlighted":y.includes(t),"data-lk-bar-index":t,className:`lk-audio-bar ${y.includes(t)&&"lk-highlighted"}`,style:{height:`${Math.min(g,Math.max(v,100*e+5))}%`}})))}),es=r.forwardRef(function({children:e,disableSpeakingIndicator:t,onParticipantClick:n,trackRef:i,...o},l){let c=(0,s.i)(i),{elementProps:u}=(0,a.l)({trackRef:c,htmlProps:o,disableSpeakingIndicator:t,onParticipantClick:n});return r.createElement("div",{ref:l,style:{position:"relative",minHeight:"160px"},...u},r.createElement(s.ak.Provider,{value:c},e??r.createElement(r.Fragment,null,(0,s.a1)(c)&&r.createElement(q,{trackRef:c}),r.createElement(eo,{barCount:7,options:{minHeight:8}}),r.createElement("div",{className:"lk-participant-metadata"},r.createElement("div",{className:"lk-participant-metadata-item"},r.createElement(j,{trackRef:c}),r.createElement(D,null)),r.createElement(M,{className:"lk-participant-metadata-item"})))))});function el(e){let[t,n]=r.useState(void 0),i=(0,a.a)(e.room);return r.useEffect(()=>{switch(i){case o.ConnectionState.Reconnecting:n(r.createElement(r.Fragment,null,r.createElement(I,{className:"lk-spinner"})," Reconnecting"));break;case o.ConnectionState.Connecting:n(r.createElement(r.Fragment,null,r.createElement(I,{className:"lk-spinner"})," Connecting"));break;case o.ConnectionState.Disconnected:n(r.createElement(r.Fragment,null,"Disconnected"));break;default:n(void 0)}},[i]),t?r.createElement(er,{className:"lk-toast-connection-state"},t):r.createElement(r.Fragment,null)}let ec=r.forwardRef(function({entry:e,hideName:t=!1,hideTimestamp:n=!1,messageFormatter:a,...i},o){var s,l,c,u;let d=r.useMemo(()=>a?a(e.message):e.message,[e.message,a]),m=!!e.editTimestamp,f=new Date(e.timestamp),h="u">typeof navigator?navigator.language:"en-US",v=(null==(s=e.from)?void 0:s.name)??(null==(l=e.from)?void 0:l.identity);return r.createElement("li",{ref:o,className:"lk-chat-entry",title:f.toLocaleTimeString(h,{timeStyle:"full"}),"data-lk-message-origin":null!=(c=e.from)&&c.isLocal?"local":"remote",...i},(!n||!t||m)&&r.createElement("span",{className:"lk-meta-data"},!t&&r.createElement("strong",{className:"lk-participant-name"},v),(!n||m)&&r.createElement("span",{className:"lk-timestamp"},m&&"edited ",f.toLocaleTimeString(h,{timeStyle:"short"}))),r.createElement("span",{className:"lk-message-body"},d),r.createElement("span",{className:"lk-message-attachements"},null==(u=e.attachedFiles)?void 0:u.map(e=>e.type.startsWith("image/")&&r.createElement("img",{style:{maxWidth:"300px",maxHeight:"300px"},key:e.name,src:URL.createObjectURL(e),alt:e.name}))))});e.s(["B",()=>eo,"C",()=>l,"D",()=>c,"F",()=>W,"G",()=>J,"L",()=>et,"M",()=>N,"P",()=>$,"R",()=>en,"S",()=>m,"T",()=>O,"a",()=>ec,"b",()=>U,"c",()=>f,"d",()=>g,"e",()=>y,"f",()=>A,"g",()=>ee,"h",()=>K,"i",()=>el,"j",()=>Q,"k",()=>es])},895581,e=>{"use strict";var t=e.i(942765),n=e.i(649785);e.s(["ParticipantPlaceholderIcon",0,e=>{let r,a,i,o,s,l=(0,n.c)(8);l[0]!==e?({width:a,...r}=e,l[0]=e,l[1]=r,l[2]=a):(r=l[1],a=l[2]);let c=void 0===a?32:a;return l[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"currentColor",fillOpacity:.25}),o=(0,t.jsx)("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"currentColor",fillOpacity:.25}),l[3]=i,l[4]=o):(i=l[3],o=l[4]),l[5]!==r||l[6]!==c?(s=(0,t.jsxs)("svg",{width:c,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:[i,o]}),l[5]=r,l[6]=c,l[7]=s):s=l[7],s}])},308842,e=>{"use strict";var t=e.i(942765),n=e.i(649785);e.s(["CloseIcon",0,e=>{let r,a,i=(0,n.c)(3),{className:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M12.4998 7.49999L7.49984 12.5M12.4998 12.5L7.49984 7.49999M17.7082 9.99999C17.7082 14.2572 14.257 17.7083 9.99984 17.7083C5.74264 17.7083 2.2915 14.2572 2.2915 9.99999C2.2915 5.74279 5.74264 2.29166 9.99984 2.29166C14.257 2.29166 17.7082 5.74279 17.7082 9.99999Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})}),i[0]=r):r=i[0],i[1]!==o?(a=(0,t.jsx)("div",{className:o,children:r}),i[1]=o,i[2]=a):a=i[2],a}])},695857,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(264458),a=e.i(166037),i=e.i(308842),o=e.i(768710);let s=e=>{let a,i,o=(0,n.c)(7),{label:s,className:l,children:c,style:u}=e;return o[0]!==l?(a=(0,r.default)("font-bold lowercase leading-[20px] text-white first-letter:uppercase",l),o[0]=l,o[1]=a):a=o[1],o[2]!==c||o[3]!==s||o[4]!==u||o[5]!==a?(i=(0,t.jsxs)("p",{className:a,style:u,children:[s,c]}),o[2]=c,o[3]=s,o[4]=u,o[5]=a,o[6]=i):i=o[6],i};function l(e){e.stopPropagation(),e.preventDefault()}function c(e){e.stopPropagation()}function u(e){return e.stopPropagation()}e.s(["LivestreamBlurDialog",0,e=>{let d,m,f,h,v,g,y,b,_,T,k=(0,n.c)(24),{title:E,open:S,closeDialog:w,closeProps:x,children:C,footer:I,onScroll:R,className:P}=e;if(!S)return null;let N=x?.disableCloseOutside?void 0:w;return k[0]!==P?(d=(0,r.default)(P,"absolute left-[50%] top-[50%] w-[344px] translate-x-[-50%] translate-y-[-50%]","flex flex-col","max-h-full overflow-hidden sm:max-h-[calc(min(95%,480px))]","bg-transparent","text-white",o.BLUR_DIALOG_CLASS),k[0]=P,k[1]=d):d=k[1],k[2]===Symbol.for("react.memo_cache_sentinel")?(m={scrollbarWidth:"none",msOverflowStyle:"none",zIndex:a.Z_INDEXES.BlurDialog.content},k[2]=m):m=k[2],k[3]===Symbol.for("react.memo_cache_sentinel")?(f={zIndex:a.Z_INDEXES.BlurDialog.title},k[3]=f):f=k[3],k[4]!==w||k[5]!==x?.showCloseButton?(h=x?.showCloseButton&&(0,t.jsx)("button",{className:"absolute right-[15px] top-[13px] cursor-pointer",onClick:w,children:(0,t.jsx)(i.CloseIcon,{className:"cursor-pointer"})}),k[4]=w,k[5]=x?.showCloseButton,k[6]=h):h=k[6],k[7]!==h||k[8]!==E?(v=(0,t.jsx)(s,{label:E,className:"sticky top-0 bg-bg-secondary/80 px-[25px] pb-[12px] pt-[27px] lowercase first-letter:uppercase",style:f,children:h}),k[7]=h,k[8]=E,k[9]=v):v=k[9],k[10]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.default)("flex-1 bg-bg-secondary/80 px-[25px]","custom-scrollbar overflow-y-auto"),k[10]=g):g=k[10],k[11]!==C||k[12]!==R?(y=(0,t.jsx)("div",{className:g,onScroll:R,children:C}),k[11]=C,k[12]=R,k[13]=y):y=k[13],k[14]!==I?(b=I?.element&&(0,t.jsx)("div",{className:(0,r.default)("px-[25px]",I.sticky&&"sticky bottom-0 bg-bg-secondary/80 pb-[27px] pt-[12px] shadow-lg"),style:{zIndex:a.Z_INDEXES.BlurDialog.footer},children:I.element}),k[14]=I,k[15]=b):b=k[15],k[16]!==d||k[17]!==v||k[18]!==y||k[19]!==b?(_=(0,t.jsxs)("div",{onClick:u,className:d,style:m,children:[v,y,b]}),k[16]=d,k[17]=v,k[18]=y,k[19]=b,k[20]=_):_=k[20],k[21]!==N||k[22]!==_?(T=(0,t.jsx)("div",{id:"blur-dialog",className:"absolute inset-0 bg-transparent",onClick:N,onScroll:l,onWheel:c,children:_}),k[21]=N,k[22]=_,k[23]=T):T=k[23],T}],695857)},553104,e=>{"use strict";var t=e.i(10785),n=e.i(203350);e.s(["trackComplianceCloseModal",0,({mint:e,livestreamId:r,context:a})=>{let i={mint:e,livestreamId:r,actionType:t.ModalActionType.CLOSE};(0,n.recordUserEvent)((0,t.createInteractLivestreamModal)(i),a)},"trackComplianceOpenModal",0,({mint:e,livestreamId:r,context:a})=>{let i={mint:e,livestreamId:r,actionType:t.ModalActionType.OPEN};(0,n.recordUserEvent)((0,t.createInteractLivestreamModal)(i),a)},"trackReportLivestream",0,({mint:e,livestreamId:r,reasonType:a,context:i})=>{(0,n.recordUserEvent)((0,t.createInteractReportLivestream)({mint:e,livestreamId:r,reasonType:a}),i)},"trackTermsAgreed",0,({mint:e,context:r})=>{let a={mint:e,actionType:t.TermsActionType.AGREED};(0,n.recordUserEvent)((0,t.createInteractLivestreamTerms)(a),r)},"trackTermsShown",0,({mint:e,context:r})=>{let a={mint:e,actionType:t.TermsActionType.SHOWN};(0,n.recordUserEvent)((0,t.createInteractLivestreamTerms)(a),r)}])},435135,e=>{"use strict";e.s(["LIVESTREAM_REPORT_DETAILS_MAX_LENGTH",0,150,"LIVESTREAM_TITLE_MAX_LENGTH",0,150,"LIVESTREAM_TITLE_MIN_LENGTH",0,3])},702164,e=>{"use strict";var t=e.i(525665);e.s(["LiveKitRoom",()=>t.L])},326964,e=>{"use strict";var t=e.i(618832);e.s(["RoomAudioRenderer",()=>t.R])},977757,e=>{"use strict";var t=e.i(649785),n=e.i(281675);e.s(["useDimensions",0,e=>{let r,a,i,o=(0,t.c)(6),[s,l]=(0,n.useState)(0),[c,u]=(0,n.useState)(0);return o[0]!==e?(r=()=>{let t=e.current;if(!t){l(0),u(0);return}l(t.offsetWidth),u(t.offsetHeight);let n=new ResizeObserver(e=>{e[0]?.contentRect&&(l(e[0].contentRect.width),u(e[0].contentRect.height))});return n.observe(t),()=>{n.unobserve(t),n.disconnect()}},a=[e],o[0]=e,o[1]=r,o[2]=a):(r=o[1],a=o[2]),(0,n.useEffect)(r,a),o[3]!==c||o[4]!==s?(i={width:s,height:c},o[3]=c,o[4]=s,o[5]=i):i=o[5],i}])},114224,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(264458),a=e.i(281675),i=e.i(396693);e.s(["default",0,e=>{let o,s,l,c,u,d=(0,n.c)(22),[m,f]=(0,a.useState)(!1),h=e.src;d[0]!==h?(o=(0,i.cleanImageUri)(h,i.IPFS_PREFIX),d[0]=h,d[1]=o):o=d[1];let v=o,g=()=>{k(v),T===v&&f(!0)},y=`${v}?img-width=${e.width}&img-dpr=2&img-onerror=redirect`,[b,_]=(0,a.useState)(y),T=b,k=_;if(d[2]!==k||d[3]!==y?(s=()=>{k(y)},d[2]=k,d[3]=y,d[4]=s):s=d[4],d[5]!==y?(l=[y],d[5]=y,d[6]=l):l=d[6],(0,a.useEffect)(s,l),m){let n,a;d[7]!==e.className?(n=(0,r.default)(e.className,"bg-bg-secondary"),d[7]=e.className,d[8]=n):n=d[8];let o=e.alt||"placeholder";return d[9]!==e||d[10]!==n||d[11]!==o?(a=(0,t.jsx)("img",{...e,src:i.PEPE_PLACEHOLDER,className:n,alt:o}),d[9]=e,d[10]=n,d[11]=o,d[12]=a):a=d[12],a}let E=v===i.PEPE_PLACEHOLDER&&"bg-bg-secondary";d[13]!==e.className||d[14]!==E?(c=(0,r.default)(e.className,E),d[13]=e.className,d[14]=E,d[15]=c):c=d[15];let S=e.alt||"";return d[16]!==g||d[17]!==T||d[18]!==e||d[19]!==c||d[20]!==S?(u=(0,t.jsx)("img",{...e,className:c,src:T,onError:g,alt:S}),d[16]=g,d[17]=T,d[18]=e,d[19]=c,d[20]=S,d[21]=u):u=d[21],u}])},89623,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(264458),a=e.i(114224),i=e.i(396693);e.s(["Avatar",0,e=>{let o,s,l=(0,n.c)(7),{src:c,alt:u,size:d,className:m}=e,f=void 0===c?i.PEPE_PLACEHOLDER:c,h=void 0===u?"avatar":u,v=void 0===d?32:d;return l[0]!==m?(o=(0,r.default)("rounded-full","object-cover",m),l[0]=m,l[1]=o):o=l[1],l[2]!==h||l[3]!==v||l[4]!==f||l[5]!==o?(s=(0,t.jsx)(a.default,{src:f,alt:h,width:v,height:v,className:o}),l[2]=h,l[3]=v,l[4]=f,l[5]=o,l[6]=s):s=l[6],s}])},608249,e=>{"use strict";var t=e.i(249437);e.s(["useTracks",()=>t.t])},126143,524102,e=>{"use strict";var t=e.i(649785),n=e.i(414948),r=e.i(403692),a=e.i(210496);e.s(["getRowViewParticipantKey",()=>h,"sortRowViewTracks",()=>v,"useStageLayout",()=>g],524102);var i=e.i(608249),o=e.i(484169),s=e.i(249437),s=s,l=e.i(281675);let c=(e,t)=>!!t&&e.participant?.identity===t&&e.source===o.Track.Source.Camera&&e.publication?.isMuted===!1,u=(e,t)=>!!t&&!!e&&!!e.participant&&e.participant.identity===t,d=(e,t,n,r)=>{if(!u(e,n)||!e)return null;if(!e||!e.participant)return null;let a=e.participant.identity;if(a===n&&r){let e=t.find(e=>c(e,r));if(e)return e}return t.find(e=>c(e,a))||null},m=({enrichedParticipant:e,track:t,source:n,currentAddedEntryKeys:r})=>{let a,i=e.participant.identity;return(a=t&&t.publication?.trackSid?`${i}_${t.publication.trackSid}`:n?`${i}_null_${n}`:`${i}_null_participant`,r.has(a))?{shouldAdd:!1}:{shouldAdd:!0,entryKey:a,rowViewParticipant:{participant:e.participant,trackRefForRow:t,source:t?.source??n}}},f=(e,t,n,r,a,i)=>{let s=[];return(({participant:e,isHost:t,mainStageTracks:n,participantTracks:r,isHostCameraDesignatedOverlay:a})=>{let i,s,l=e.participant.identity,u=!1,d=!1;for(let e of n)if(e.participant.identity===l&&(e.source===o.Track.Source.Camera?u=!0:e.source===o.Track.Source.ScreenShare&&(d=!0)),u&&d)break;let m=[];if(!u&&(!t||!a)){let e=r.camera&&c(r.camera,l)?r.camera:void 0;e&&m.push({track:e})}if(!d){let e=r.screenshare;e&&m.push({track:e})}return i=u,s=d,0!==m.length||i||s||m.push({track:null,source:o.Track.Source.Camera}),m})({participant:e,isHost:t,mainStageTracks:n,participantTracks:r.get(e.participant.identity)??{},isHostCameraDesignatedOverlay:a}).forEach(t=>{let n=m({enrichedParticipant:e,track:t.track,source:t.source,currentAddedEntryKeys:i});n.shouldAdd&&n.entryKey&&n.rowViewParticipant&&(s.push(n.rowViewParticipant),i.add(n.entryKey))}),s},h=e=>`${e.participant.identity}-${e.source??"placeholder"}`,v=(e,t)=>{let n=[...e];if(t){let e=n.findIndex(e=>e.participant.identity===t.identity);if(e>0){let[t]=n.splice(e,1);n.unshift(t)}}return n},g=e=>{let a,g,_,T,k,E,S,w,x=(0,t.c)(20),{host:C,coHosts:I}=e,R=(0,r.useIngressParticipant)();x[0]===Symbol.for("react.memo_cache_sentinel")?(a=[{source:o.Track.Source.Camera,withPlaceholder:!1},{source:o.Track.Source.ScreenShare,withPlaceholder:!1}],g={updateOnlyOn:[o.RoomEvent.ActiveSpeakersChanged,o.RoomEvent.TrackMuted,o.RoomEvent.TrackUnmuted,o.RoomEvent.TrackPublished,o.RoomEvent.TrackUnpublished,o.RoomEvent.LocalTrackPublished,o.RoomEvent.LocalTrackUnpublished,o.RoomEvent.ParticipantMetadataChanged,o.RoomEvent.ParticipantDisconnected],onlySubscribed:!0},x[0]=a,x[1]=g):(a=x[0],g=x[1]);let P=(0,i.useTracks)(a,g),{effectivePins:N}=(0,n.useLivestreamFeaturesContext)(),A=(w=(0,s.O)()).length>0?w[0]:null;x[2]!==P?(_=P.filter(y),x[2]=P,x[3]=_):_=x[3];let L=_;x[4]!==P?(T=P.filter(b),x[4]=P,x[5]=T):T=x[5];let O=T;x[6]!==L||x[7]!==O||x[8]!==I||x[9]!==N||x[10]!==C||x[11]!==R?(k=(e=>{var t,n;let r,a,i,{allCameraTracks:s,allScreenshareTracks:l,effectivePins:h,host:v,ingress:g,coHosts:y}=e,b=[...s,...l].reduce((e,t)=>{let n=t.participant.identity,r=e.get(n)??{},a=t.source===o.Track.Source.Camera?{...r,camera:t}:{...r,screenshare:t};return e.set(n,a)},new Map),_=v?.participant.identity,T=g?.participant.identity,k=(t=new Set(y.map(e=>e.participant.identity)),(r=l.find(e=>!!_&&e.participant?.identity===_&&e.source===o.Track.Source.ScreenShare))||l.find(e=>t.has(e.participant?.identity||"")&&e.source===o.Track.Source.ScreenShare)||null),E=!!k,{mainStageTracks:S,shouldShowOverlay:w,overlayTrack:x}=(({effectivePins:e,allCameraTracks:t,host:n,ingressIdentity:r,activeScreenshareTrack:a,isScreensharingActive:i})=>{var s,l;let m=[],f=!1,h=null,v=n?.participant.identity;if(e.length>0)s=m=e,a&&u(a,v)&&1===s.length&&s[0].publication?.trackSid===a.publication?.trackSid&&(h=d(a,t,v,r))&&(f=!0);else{let e=t.find(e=>c(e,r));if(e)m=[e];else if(i&&a)m=[a],u(a,v)&&(h=d(a,t,v,r))&&(f=!0);else{let e,r=(l=void 0,((e=t.find(e=>c(e,l)))||t.find(e=>c(e,v))||null)??(n?{participant:n.participant,source:o.Track.Source.Camera}:null));r&&(m=[r])}}return{mainStageTracks:m,shouldShowOverlay:f,overlayTrack:h}})({effectivePins:h,allCameraTracks:s,host:v,ingressIdentity:T,activeScreenshareTrack:k,isScreensharingActive:E}),C=new Set(S.map(e=>e.participant?.identity).filter(e=>!!e)),I=!!w&&!!x&&!!v&&x.participant.identity===v.participant.identity&&x.source===o.Track.Source.Camera&&!x.publication?.isMuted,R=((e,t,n,r,a,i,o)=>{if(!n&&0===a.length&&!r)return[];let s=new Set,l=[],u=a.flatMap(t=>f(t,!1,e,i,o,s));if(l.push(...u),n){let t=f(n,!0,e,i,o,s);if(r){let e=t.filter(e=>null!==e.trackRefForRow);l.push(...e)}else l.push(...t)}if(r){let e=r.participant.identity;if(!t.has(e)){let t=i.get(e)?.camera??void 0;if(t&&c(t,e)){let e=m({enrichedParticipant:r,track:t,currentAddedEntryKeys:s});e.shouldAdd&&e.entryKey&&e.rowViewParticipant&&(l.push(e.rowViewParticipant),s.add(e.entryKey))}}}return l.sort((e,t)=>e.participant.identity.localeCompare(t.participant.identity)),l})(S,C,v,g,y,b,I);return{mainStageTracks:S,rowViewTracks:R,...(a=(n={shouldShowHostCameraOverlay:w,cameraTrackForScreenshareOverlay:x}).shouldShowHostCameraOverlay,(i=n.cameraTrackForScreenshareOverlay)&&i.publication?.isMuted&&(a=!1,i=null),!i&&(a=!1),{shouldShowHostCameraOverlay:a,cameraTrackForScreenshareOverlay:i}),activeScreenshareTrack:k,isScreensharingActive:E}})({allCameraTracks:L,allScreenshareTracks:O,effectivePins:N,host:C,ingress:R,coHosts:I}),x[6]=L,x[7]=O,x[8]=I,x[9]=N,x[10]=C,x[11]=R,x[12]=k):k=x[12];let M=k;x[13]!==A||x[14]!==M.rowViewTracks?(E={unorderedTracks:M.rowViewTracks,activeSpeaker:A},x[13]=A,x[14]=M.rowViewTracks,x[15]=E):E=x[15];let D=(({unorderedTracks:e,activeSpeaker:t})=>{let n,r=(0,l.useRef)(null),a=(0,l.useRef)([]);if(t&&t.identity!==r.current)n=v(a.current.length>0?a.current:e,t);else{let t=new Map(e.map(e=>[h(e),e])),r=a.current.map(e=>t.get(h(e))).filter(e=>void 0!==e),i=new Set(r.map(e=>h(e)));e.forEach(e=>{i.has(h(e))||r.push(e)}),n=r}return a.current=n,r.current=t?.identity??null,n})(E),j=N.length>0?N:M.mainStageTracks;return x[16]!==D||x[17]!==j||x[18]!==M?(S={...M,mainStageTracks:j,rowViewTracks:D},x[16]=D,x[17]=j,x[18]=M,x[19]=S):S=x[19],S};function y(e){return e.source===o.Track.Source.Camera}function b(e){return e.source===o.Track.Source.ScreenShare}e.s(["useLivestreamRoomState",0,()=>{let e,i,o,s=(0,t.c)(14),{showHostCameraOverlay:l}=(0,n.useLivestreamFeaturesContext)(),{host:c,coHosts:u}=(0,a.useLivestreamParticipants)(),d=(0,r.useIsIngressActive)(),m=c??null;s[0]!==u||s[1]!==m?(e={host:m,coHosts:u},s[0]=u,s[1]=m,s[2]=e):e=s[2];let{mainStageTracks:f,rowViewTracks:h,cameraTrackForScreenshareOverlay:v,activeScreenshareTrack:y,isScreensharingActive:b,shouldShowHostCameraOverlay:_}=g(e),T=void 0!==l?l:_,k=!!c||d;return s[3]!==k||s[4]!==f?(i=k?f:[],s[3]=k,s[4]=f,s[5]=i):i=s[5],s[6]!==y||s[7]!==v||s[8]!==T||s[9]!==k||s[10]!==b||s[11]!==h||s[12]!==i?(o={isMainPublisherInRoom:k,mainStageTracks:i,rowViewTracks:h,cameraTrackForScreenshareOverlay:v,activeScreenshareTrack:y,isScreensharingActive:b,shouldShowHostCameraOverlay:T},s[6]=y,s[7]=v,s[8]=T,s[9]=k,s[10]=b,s[11]=h,s[12]=i,s[13]=o):o=s[13],o}],126143)},167949,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(281675),a=e.i(977757);let i=(0,r.createContext)({width:0,height:0});e.s(["DraggableBoundary",0,e=>{let o,s,l,c,u,d=(0,n.c)(11);d[0]!==e?({children:o,className:s,...l}=e,d[0]=e,d[1]=o,d[2]=s,d[3]=l):(o=d[1],s=d[2],l=d[3]);let m=(0,r.useRef)(null),f=(0,a.useDimensions)(m);return d[4]!==o||d[5]!==f?(c=(0,t.jsx)(i.Provider,{value:f,children:o}),d[4]=o,d[5]=f,d[6]=c):c=d[6],d[7]!==s||d[8]!==l||d[9]!==c?(u=(0,t.jsx)("div",{ref:m,className:s,...l,children:c}),d[7]=s,d[8]=l,d[9]=c,d[10]=u):u=d[10],u}])},914811,e=>{"use strict";e.s(["getRaisedHandMessage",0,(e,t)=>t&&1===e?`${t} wants to join`:`${e} ${1===e?"hand":"hands"} raised`])},272868,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(264458),a=e.i(43373);e.s(["HostActionRequestIndicator",0,e=>{let i,o,s,l,c,u=(0,n.c)(13),{onHide:d,icon:m,message:f,quickActions:h}=e,{openDialog:v}=(0,a.useLivestreamDialogStore)();u[0]!==d||u[1]!==v?(i=()=>{v(a.DialogType.Participants),d()},u[0]=d,u[1]=v,u[2]=i):i=u[2];let g=i;return u[3]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.default)("bg-black/50 px-3 py-1.5 text-xs text-white shadow-lg","flex items-center gap-2 rounded-full"),u[3]=o):o=u[3],u[4]!==f?(s=(0,t.jsx)("span",{children:f}),u[4]=f,u[5]=s):s=u[5],u[6]!==m||u[7]!==g||u[8]!==s?(l=(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:g,children:[m,s]}),u[6]=m,u[7]=g,u[8]=s,u[9]=l):l=u[9],u[10]!==h||u[11]!==l?(c=(0,t.jsxs)("div",{className:o,"aria-live":"polite",children:[l,h]}),u[10]=h,u[11]=l,u[12]=c):c=u[12],c}])},533710,358838,781628,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(157633),a=e.i(914811),i=e.i(272868),o=e.i(434092),s=e.i(323888);let l=e=>{let r,a,i=(0,n.c)(7),{onClick:l,disabled:c,loading:u,tooltip:d}=e;return i[0]!==u?(r=u?(0,t.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):void 0,i[0]=u,i[1]=r):r=i[1],i[2]!==c||i[3]!==l||i[4]!==r||i[5]!==d?(a=(0,t.jsx)(s.PumpButton,{onClick:l,disabled:c,label:"yes",size:"small",icon:r,tooltip:d}),i[2]=c,i[3]=l,i[4]=r,i[5]=d,i[6]=a):a=i[6],a};e.s(["AcceptButton",0,l],358838);let c=e=>{let r,a,i=(0,n.c)(7),{onClick:l,disabled:c,loading:u,tooltip:d}=e;return i[0]!==u?(r=u?(0,t.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):void 0,i[0]=u,i[1]=r):r=i[1],i[2]!==c||i[3]!==l||i[4]!==r||i[5]!==d?(a=(0,t.jsx)(s.PumpButton,{onClick:l,disabled:c,icon:r,label:"no",size:"small",className:"!bg-[#E77975]",tooltip:d}),i[2]=c,i[3]=l,i[4]=r,i[5]=d,i[6]=a):a=i[6],a};e.s(["RejectButton",0,c],781628);let u=e=>{let r,a,i,o=(0,n.c)(9),{onAddToStage:s,onLowerHand:u,isAddingToStage:d,isLoweringHand:m}=e;return o[0]!==d||o[1]!==s?(r=(0,t.jsx)(l,{onClick:s,loading:d}),o[0]=d,o[1]=s,o[2]=r):r=o[2],o[3]!==m||o[4]!==u?(a=(0,t.jsx)(c,{onClick:u,loading:m}),o[3]=m,o[4]=u,o[5]=a):a=o[5],o[6]!==r||o[7]!==a?(i=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[r,a]}),o[6]=r,o[7]=a,o[8]=i):i=o[8],i};e.s(["HostRaiseHandIndicatorBase",0,e=>{let o,s,l,c,d=(0,n.c)(16),{showIndicator:m,onHide:f,raisedHandCount:h,raisedHandParticipant:v,isAddingToStage:g,onAddToStage:y,isLoweringHand:b,onLowerHand:_}=e;if(!m)return null;d[0]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)(r.IconHand5Finger,{size:16,className:"text-livestream-green"}),d[0]=o):o=d[0];let T=v?.displayName;return d[1]!==h||d[2]!==T?(s=(0,a.getRaisedHandMessage)(h,T),d[1]=h,d[2]=T,d[3]=s):s=d[3],d[4]!==g||d[5]!==b||d[6]!==y||d[7]!==f||d[8]!==_||d[9]!==h||d[10]!==v?(l=v&&1===h&&(0,t.jsx)(u,{onAddToStage:()=>{f(),y(v.identity)},onLowerHand:()=>{f(),_(v.identity)},isAddingToStage:g,isLoweringHand:b}),d[4]=g,d[5]=b,d[6]=y,d[7]=f,d[8]=_,d[9]=h,d[10]=v,d[11]=l):l=d[11],d[12]!==f||d[13]!==s||d[14]!==l?(c=(0,t.jsx)(i.HostActionRequestIndicator,{onHide:f,icon:o,message:s,quickActions:l}),d[12]=f,d[13]=s,d[14]=l,d[15]=c):c=d[15],c}],533710)},939079,877340,392002,e=>{"use strict";var t,n=e.i(942765),r=e.i(649785),a=e.i(281675),i=e.i(533710),o=e.i(529326),s=e.i(967388),l=e.i(132838),c=e.i(754219),u=e.i(816896),d=e.i(721361),m=e.i(54567),f=((t=f||{}).RAISE_HAND="raiseHand",t.LOWER_HAND="lowerHand",t.RESPOND_TO_RAISE_HAND="respondToRaiseHand",t);let h=e=>{let t,n,a,i,o=(0,r.c)(10);o[0]!==e?(t=t=>{if(!e)throw m.logger.error("[useLivechatSocketRaiseHandEmitters] raiseHand: Socket is not connected",{roomId:t}),Error("Socket is not connected");return m.logger.debug("[useLivechatSocketRaiseHandEmitters] Emitting raiseHand",{roomId:t}),new Promise((n,r)=>{e.emit("raiseHand",{roomId:t},e=>{let a=d.ackSchema.safeParse(e);if(!a.success)return m.logger.error("[useLivechatSocketRaiseHandEmitters] raiseHand: Failed to parse data",{roomId:t,data:e,parsed:a}),r(Error("Failed to parse data"));n(a.data)})})},o[0]=e,o[1]=t):t=o[1];let s=t;o[2]!==e?(n=t=>{if(!e)throw m.logger.error("[useLivechatSocketRaiseHandEmitters] lowerHand: Socket is not connected",{roomId:t}),Error("Socket is not connected");return m.logger.debug("[useLivechatSocketRaiseHandEmitters]  Emitting lowerHand",{roomId:t}),new Promise((n,r)=>{e.emit("lowerHand",{roomId:t},e=>{let a=d.ackSchema.safeParse(e);if(!a.success)return m.logger.error("[useLivechatSocketRaiseHandEmitters] lowerHand: Failed to parse data",{roomId:t,data:e,parsed:a}),r(Error("Failed to parse data"));n(a.data)})})},o[2]=e,o[3]=n):n=o[3];let l=n;o[4]!==e?(a=(t,n,r)=>{if(!e)throw m.logger.error("[useLivechatSocketRaiseHandEmitters] respondToRaiseHand: Socket is not connected",{roomId:t,address:n,approved:r}),Error("Socket is not connected");return m.logger.debug("[useLivechatSocketRaiseHandEmitters] Emitting respondToRaiseHand",{roomId:t,address:n,approved:r}),new Promise((a,i)=>{e.emit("respondToRaiseHand",{roomId:t,address:n,approved:r},e=>{let n=d.ackSchema.safeParse(e);if(!n.success)return m.logger.error("[useLivechatSocketRaiseHandEmitters] respondToRaiseHand: Failed to parse data",{roomId:t,data:e,parsed:n}),i(Error("Failed to parse data"));a(n.data)})})},o[4]=e,o[5]=a):a=o[5];let c=a;return o[6]!==l||o[7]!==s||o[8]!==c?(i={raiseHand:s,lowerHand:l,respondToRaiseHand:c},o[6]=l,o[7]=s,o[8]=c,o[9]=i):i=o[9],i};e.s(["useLivechatSocketRaiseHandEmitters",0,h],877340);let v=e=>{let t,n,a,i,o,s,d,f,v,g,y,b,_,T,k,E=(0,r.c)(38);E[0]!==e?({socket:s,roomId:o,livestreamId:n,context:t,onError:a,...i}=e,E[0]=e,E[1]=t,E[2]=n,E[3]=a,E[4]=i,E[5]=o,E[6]=s):(t=E[1],n=E[2],a=E[3],i=E[4],o=E[5],s=E[6]);let{respondToRaiseHand:S}=h(s);E[7]!==S||E[8]!==o?(d=async e=>{m.logger.debug("[useRespondToRaiseHand] Responding to raise hand",{roomId:o,address:e,isApproved:!1});let t=await S(o,e,!1);return m.logger.debug("[useRespondToRaiseHand] Received ack",{roomId:o,address:e,isApproved:!1,ack:t}),t},E[7]=S,E[8]=o,E[9]=d):d=E[9],E[10]!==t||E[11]!==n||E[12]!==o?(f=(e,r)=>{(0,u.trackHostRejectRaisedHand)({mint:o,livestreamId:String(n),targetUser:r,context:t}),m.logger.debug("[useRespondToRaiseHand] Successfully rejected raised hand",{roomId:o,address:r})},E[10]=t,E[11]=n,E[12]=o,E[13]=f):f=E[13],E[14]!==a?(v=(...e)=>{a?.(...e),c.toast.error("Failed to lower hand. Try again or contact support.")},E[14]=a,E[15]=v):v=E[15],E[16]!==i||E[17]!==d||E[18]!==f||E[19]!==v?(g={mutationFn:d,onSuccess:f,onError:v,...i},E[16]=i,E[17]=d,E[18]=f,E[19]=v,E[20]=g):g=E[20];let w=(0,l.useMutation)(g);E[21]!==S||E[22]!==o?(y=async e=>{m.logger.debug("[useRespondToRaiseHand] Responding to raise hand",{roomId:o,address:e,isApproved:!0});let t=await S(o,e,!0);return m.logger.debug("[useRespondToRaiseHand] Received ack",{roomId:o,address:e,isApproved:!0,ack:t}),t},E[21]=S,E[22]=o,E[23]=y):y=E[23],E[24]!==t||E[25]!==n||E[26]!==o?(b=(e,r)=>{(0,u.trackHostAcceptRaisedHand)({mint:o,livestreamId:String(n),targetUser:r,context:t})},E[24]=t,E[25]=n,E[26]=o,E[27]=b):b=E[27],E[28]!==a?(_=(...e)=>{a?.(...e),c.toast.error("Failed to add to stage. Try again or contact support.")},E[28]=a,E[29]=_):_=E[29],E[30]!==i||E[31]!==y||E[32]!==b||E[33]!==_?(T={mutationFn:y,onSuccess:b,onError:_,...i},E[30]=i,E[31]=y,E[32]=b,E[33]=_,E[34]=T):T=E[34];let x=(0,l.useMutation)(T);return E[35]!==x||E[36]!==w?(k={lowerHand:w,addToStage:x},E[35]=x,E[36]=w,E[37]=k):k=E[37],k};e.s(["useRespondToRaiseHand",0,v],392002);var g=e.i(985436),y=e.i(574953);e.s(["HostRaiseHandIndicator",0,e=>{let t,l,c,u,d,m,f=(0,r.c)(25),{roomId:h,livestreamId:b}=e,_=(0,g.useLivechatSocket)();f[0]!==b||f[1]!==h||f[2]!==_?(t={socket:_,roomId:h,livestreamId:b,context:s.STAGE_SOURCE_CONTEXTS.HOST_CONTROLS},f[0]=b,f[1]=h,f[2]=_,f[3]=t):t=f[3];let{lowerHand:T,addToStage:k}=v(t),[E,S]=(0,a.useState)(!1),{state:w}=(0,o.useParticipantInteractionsStateContext)(),x=w.raisedHands.length,C=w.raisedHands.length>0;f[4]!==C?(l=()=>{S(C)},f[4]=C,f[5]=l):l=f[5],f[6]!==k.isError||f[7]!==C||f[8]!==T.isError?(c=[C,T.isError,k.isError],f[6]=k.isError,f[7]=C,f[8]=T.isError,f[9]=c):c=f[9],(0,a.useEffect)(l,c),f[10]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{S(!1)},f[10]=u):u=f[10];let I=u;e:{let e,t;if(0===w.raisedHands.length){d=null;break e}let n=w.raisedHands[0];f[11]!==n.address||f[12]!==n.username?(e=n.username?(0,y.getDisplayUsername)(n.username):(0,y.getDisplayAddress)(n.address),f[11]=n.address,f[12]=n.username,f[13]=e):e=f[13],f[14]!==n.address||f[15]!==e?(t={identity:n.address,displayName:e},f[14]=n.address,f[15]=e,f[16]=t):t=f[16],d=t}let R=d;return f[17]!==k.isPending||f[18]!==k.mutate||f[19]!==T.isPending||f[20]!==T.mutate||f[21]!==R||f[22]!==x||f[23]!==E?(m=(0,n.jsx)(i.HostRaiseHandIndicatorBase,{showIndicator:E,onHide:I,raisedHandCount:x,raisedHandParticipant:R,isAddingToStage:k.isPending,onAddToStage:k.mutate,isLoweringHand:T.isPending,onLowerHand:T.mutate}),f[17]=k.isPending,f[18]=k.mutate,f[19]=T.isPending,f[20]=T.mutate,f[21]=R,f[22]=x,f[23]=E,f[24]=m):m=f[24],m}],939079)},271818,e=>{"use strict";var t=e.i(281675);e.i(834649);var n=e.i(144977),r=e.i(942765),a=Symbol.for("react.lazy"),i=t[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===a&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var s=Symbol("radix.slottable");function l(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===s}var c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{var s,c;let u,d,m,f=(c=s=`Primitive.${a}`,(u=t.forwardRef((e,r)=>{let{children:a,...s}=e;if(o(a)&&"function"==typeof i&&(a=i(a._payload)),t.isValidElement(a)){var l;let e,i,o=(l=a,(i=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(i=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),c=function(e,t){let n={...t};for(let r in t){let a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...e)=>{let t=i(...e);return a(...e),t}:a&&(n[r]=a):"style"===r?n[r]={...a,...i}:"className"===r&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}(s,a.props);return a.type!==t.Fragment&&(c.ref=r?(0,n.composeRefs)(r,o):o),t.cloneElement(a,c)}return t.Children.count(a)>1?t.Children.only(null):null})).displayName=`${c}.SlotClone`,d=u,(m=t.forwardRef((e,n)=>{let{children:a,...s}=e;o(a)&&"function"==typeof i&&(a=i(a._payload));let c=t.Children.toArray(a),u=c.find(l);if(u){let e=u.props.children,a=c.map(n=>n!==u?n:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,r.jsx)(d,{...s,ref:n,children:t.isValidElement(e)?t.cloneElement(e,void 0,a):null})}return(0,r.jsx)(d,{...s,ref:n,children:a})})).displayName=`${s}.Slot`,m),h=t.forwardRef((e,t)=>{let{asChild:n,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(n?f:a,{...i,ref:t})});return h.displayName=`Primitive.${a}`,{...e,[a]:h}},{});e.s(["Primitive",()=>c],271818)},936090,958464,713098,126024,381609,474782,e=>{"use strict";var t,n=e.i(942765),r=e.i(649785),a=e.i(867013),i=e.i(281675),o=e.i(271818),s=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),l=i.forwardRef((e,t)=>(0,n.jsx)(o.Primitive.span,{...e,ref:t,style:{...s,...e.style}}));l.displayName="VisuallyHidden";var c=e.i(264458),u=e.i(434092);function d({isLoading:e,hasMore:t,next:r,threshold:a=1,root:o=null,rootMargin:s="0px",reverse:l,children:c}){let u=i.useRef(null),d=i.useCallback(n=>{let i=Math.max(0,Math.min(1,a));u.current&&u.current.disconnect(),!e&&n&&(u.current=new IntersectionObserver(e=>{e[0].isIntersecting&&t&&r()},{threshold:i,root:o,rootMargin:s}),u.current.observe(n))},[t,e,r,a,o,s]),m=i.useMemo(()=>i.Children.toArray(c),[c]);return(0,n.jsx)(n.Fragment,{children:m.map((e,t)=>{let n=l?0===t:t===m.length-1;return i.cloneElement(e,{ref:n?d:null})})})}var m=e.i(331065),f=e.i(166037);let h=e=>{let t,a,i,o,s=(0,r.c)(12),{title:l,participants:c,ListItem:u}=e;if(s[0]!==l?(t=(0,n.jsx)("div",{className:"ml-1 text-xs font-bold lowercase text-livestream-muted first-letter:uppercase",children:l}),s[0]=l,s[1]=t):t=s[1],s[2]!==u||s[3]!==c){let e;s[5]!==u?(e=e=>(0,n.jsx)(u,{participant:e},e.identity),s[5]=u,s[6]=e):e=s[6],a=c.map(e),s[2]=u,s[3]=c,s[4]=a}else a=s[4];return s[7]!==a?(i=(0,n.jsx)("div",{className:"flex flex-col gap-2",children:a}),s[7]=a,s[8]=i):i=s[8],s[9]!==t||s[10]!==i?(o=(0,n.jsxs)("div",{className:"flex max-w-xs flex-col gap-2",children:[t,i]}),s[9]=t,s[10]=i,s[11]=o):o=s[11],o};function v(){}e.s(["ParticipantsDialog",0,e=>{let t,o,s,g,y,b,_,T,k,E,S,w,x,C,I,R,P,N=(0,r.c)(45),{isOpen:A,isError:L,isLoading:O,onClose:M,host:D,coHosts:j,viewers:U,moderators:F,ListItem:H,hasNextPage:B,isFetchingNextPage:V,fetchNextPage:q}=e,[G,z]=(0,i.useState)(!1),[$,W]=(0,i.useState)(null);N[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{W(e)},N[0]=t):t=N[0];let K=t;N[1]!==A?(o=()=>{A&&z(!0)},s=[A],N[1]=A,N[2]=o,N[3]=s):(o=N[2],s=N[3]),(0,i.useEffect)(o,s),N[4]!==M?(g=e=>{z(e),e||setTimeout(()=>{M()},150)},N[4]=M,N[5]=g):g=N[5];let Q=g;N[6]===Symbol.for("react.memo_cache_sentinel")?(y=(0,c.default)("absolute right-[12px] top-[36px]","h-[calc(100%-92px)] max-h-[400px] !min-w-[300px] max-w-full  bg-bg-secondary/80 px-3 pb-[33px] text-white","rounded-[8px] backdrop-blur-[20px]","custom-scrollbar overflow-y-auto","z-50","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2","data-[state=closed]:duration-150 data-[state=open]:duration-200"),b={zIndex:`${f.Z_INDEXES.ParticipantsDialog.content} !important`},N[6]=y,N[7]=b):(y=N[6],b=N[7]),N[8]===Symbol.for("react.memo_cache_sentinel")?(_=(0,n.jsx)(l,{asChild:!0,children:(0,n.jsx)(a.DialogTitle,{children:"Participants"})}),T=(0,n.jsx)(a.DialogDescription,{className:"sr-only",children:"A list of active participants in the stage."}),N[8]=_,N[9]=T):(_=N[8],T=N[9]);let Y=L&&"Viewers list is rekt, try again later.",X=!!V,J=!!B,Z=q??v;return N[10]!==H||N[11]!==D?(k=D&&(0,n.jsx)(h,{title:"Host",participants:[D],ListItem:H}),N[10]=H,N[11]=D,N[12]=k):k=N[12],N[13]!==H||N[14]!==j?(E=j.length>0&&(0,n.jsx)(h,{title:j.length>1?"Co-Hosts":"Co-Host",participants:j,ListItem:H}),N[13]=H,N[14]=j,N[15]=E):E=N[15],N[16]!==H||N[17]!==F?(S=F.length>0&&(0,n.jsx)(h,{title:"Moderators",participants:F,ListItem:H}),N[16]=H,N[17]=F,N[18]=S):S=N[18],N[19]!==H||N[20]!==U?(w=U.length>0&&(0,n.jsx)(h,{title:"Active",participants:U,ListItem:H}),N[19]=H,N[20]=U,N[21]=w):w=N[21],N[22]!==B?(x=B&&(0,n.jsx)("div",{className:"flex items-center justify-center py-2",children:(0,n.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin"})}),N[22]=B,N[23]=x):x=N[23],N[24]!==$||N[25]!==X||N[26]!==J||N[27]!==Z||N[28]!==k||N[29]!==E||N[30]!==S||N[31]!==w||N[32]!==x?(C=(0,n.jsxs)(d,{isLoading:X,hasMore:J,next:Z,root:$,rootMargin:"100px",children:[k,E,S,w,x]}),N[24]=$,N[25]=X,N[26]=J,N[27]=Z,N[28]=k,N[29]=E,N[30]=S,N[31]=w,N[32]=x,N[33]=C):C=N[33],N[34]!==V?(I=V&&(0,n.jsx)("div",{className:"flex justify-center py-2",children:(0,n.jsx)("div",{className:"size-4 animate-spin rounded-full border-2 border-white/30 border-t-white"})}),N[34]=V,N[35]=I):I=N[35],N[36]!==O||N[37]!==C||N[38]!==I||N[39]!==Y?(R=(0,n.jsxs)(a.DialogContent,{ref:K,className:y,style:b,children:[_,T,(0,n.jsx)("div",{className:"mt-4 flex flex-col gap-2",children:(0,n.jsxs)(m.LoadingErrorState,{error:Y,isLoading:O,children:[C,I]})})]}),N[36]=O,N[37]=C,N[38]=I,N[39]=Y,N[40]=R):R=N[40],N[41]!==G||N[42]!==Q||N[43]!==R?(P=(0,n.jsx)(a.Dialog,{open:G,onOpenChange:Q,children:R}),N[41]=G,N[42]=Q,N[43]=R,N[44]=P):P=N[44],P}],936090);var g=e.i(157633);let y=(0,e.i(376530).default)("screen-share",[["path",{d:"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3",key:"i8wdob"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m17 8 5-5",key:"fqif7o"}],["path",{d:"M17 3h5v5",key:"1o3tu8"}]]);e.s(["ScreenShare",()=>y],958464);var b=e.i(89623),_=e.i(162786),T=e.i(358838),k=e.i(781628),E=e.i(323888);let S=e=>{let t,a,i=(0,r.c)(6),{onClick:o,disabled:s,loading:l}=e;return i[0]!==l?(t=l?(0,n.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin"}):void 0,i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(a=(0,n.jsx)(E.PumpButton,{onClick:o,disabled:s,label:"invite",size:"small",icon:t}),i[2]=s,i[3]=o,i[4]=t,i[5]=a):a=i[5],a},w=e=>{let t,a,i=(0,r.c)(6),{onClick:o,disabled:s,loading:l}=e;return i[0]!==l?(t=l?(0,n.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin"}):void 0,i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(a=(0,n.jsx)(E.PumpButton,{onClick:o,disabled:s,icon:t,label:"no",size:"small",className:"!bg-[#E77975]"}),i[2]=s,i[3]=o,i[4]=t,i[5]=a):a=i[5],a},x=e=>{let t,a,i,o=(0,r.c)(10),{onClick:s,disabled:l,loading:d,className:m,style:f}=e;return o[0]!==m?(t=(0,c.default)("!bg-[#E77975]",m),o[0]=m,o[1]=t):t=o[1],o[2]!==d?(a=d?(0,n.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin"}):void 0,o[2]=d,o[3]=a):a=o[3],o[4]!==l||o[5]!==s||o[6]!==f||o[7]!==t||o[8]!==a?(i=(0,n.jsx)(E.PumpButton,{onClick:s,disabled:l,label:"remove",size:"small",className:t,icon:a,style:f}),o[4]=l,o[5]=s,o[6]=f,o[7]=t,o[8]=a,o[9]=i):i=o[9],i};e.s(["RemoveFromStageButton",0,x],713098);let C=e=>{let t,a,i,o,s=(0,r.c)(44),{hasScreenShareRequest:l,canAddToStage:c,canLowerHand:u,canRemoveFromStage:d,canInviteToStage:m,addToStage:f,isAddingToStage:h,lowerHand:v,isLoweringHand:g,removeFromStage:y,isRemovingFromStage:b,inviteToStage:_,isInvitingToStage:E,approveScreenShare:C,isApprovingScreenShare:I,denyScreenShare:R,isDenyingScreenShare:P,isHost:N,isRoomModerator:A,isModerator:L}=e,O=h||g||b||E||I||P,M=N||A,D=M||L;if(l&&M){let e,t,r;return s[0]!==C||s[1]!==O||s[2]!==I?(e=(0,n.jsx)(T.AcceptButton,{onClick:C,disabled:O,loading:I,tooltip:"Approve Request"}),s[0]=C,s[1]=O,s[2]=I,s[3]=e):e=s[3],s[4]!==R||s[5]!==O||s[6]!==P?(t=(0,n.jsx)(k.RejectButton,{onClick:R,disabled:O,loading:P,tooltip:"Deny Request"}),s[4]=R,s[5]=O,s[6]=P,s[7]=t):t=s[7],s[8]!==e||s[9]!==t?(r=(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[e,t]}),s[8]=e,s[9]=t,s[10]=r):r=s[10],r}if(c&&M){let e,t,r;return s[11]!==f||s[12]!==O||s[13]!==h?(e=(0,n.jsx)(T.AcceptButton,{onClick:f,disabled:O,loading:h,tooltip:"Add to Stage"}),s[11]=f,s[12]=O,s[13]=h,s[14]=e):e=s[14],s[15]!==O||s[16]!==g||s[17]!==v?(t=(0,n.jsx)(k.RejectButton,{onClick:v,disabled:O,loading:g,tooltip:"Lower Hand"}),s[15]=O,s[16]=g,s[17]=v,s[18]=t):t=s[18],s[19]!==e||s[20]!==t?(r=(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[e,t]}),s[19]=e,s[20]=t,s[21]=r):r=s[21],r}return s[22]!==u||s[23]!==O||s[24]!==M||s[25]!==g||s[26]!==v?(t=u&&M&&(0,n.jsx)(w,{onClick:v,disabled:O,loading:g}),s[22]=u,s[23]=O,s[24]=M,s[25]=g,s[26]=v,s[27]=t):t=s[27],s[28]!==d||s[29]!==O||s[30]!==D||s[31]!==b||s[32]!==y?(a=d&&D&&(0,n.jsx)(x,{onClick:y,disabled:O,loading:b}),s[28]=d,s[29]=O,s[30]=D,s[31]=b,s[32]=y,s[33]=a):a=s[33],s[34]!==m||s[35]!==O||s[36]!==_||s[37]!==M||s[38]!==E?(i=m&&M&&(0,n.jsx)(S,{onClick:_,disabled:O,loading:E}),s[34]=m,s[35]=O,s[36]=_,s[37]=M,s[38]=E,s[39]=i):i=s[39],s[40]!==t||s[41]!==a||s[42]!==i?(o=(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[t,a,i]}),s[40]=t,s[41]=a,s[42]=i,s[43]=o):o=s[43],o};e.s(["ParticipantsListItem",0,e=>{let t,a,i,o,s,l,c,u,d,m,f,h,v,T,k,E,S,w,x,I,R,P,N=(0,r.c)(50);N[0]!==e?({displayName:i,isCurrentUser:s,isHandRaised:l,isInvited:u,isViewerRole:h,isHost:c,isRoomModerator:f,isModerator:m,avatarUrl:a,isLoggedIn:d,hasScreenShareRequest:o,...t}=e,N[0]=e,N[1]=t,N[2]=a,N[3]=i,N[4]=o,N[5]=s,N[6]=l,N[7]=c,N[8]=u,N[9]=d,N[10]=m,N[11]=f,N[12]=h):(t=N[1],a=N[2],i=N[3],o=N[4],s=N[5],l=N[6],c=N[7],u=N[8],d=N[9],m=N[10],f=N[11],h=N[12]);let{value:A,setTrue:L,setFalse:O}=(0,_.useBoolean)(!1),M=(c||f||m)&&!s&&d;return N[13]!==l||N[14]!==d||N[15]!==h?(v=l&&h&&d&&(0,n.jsx)(g.IconHand5Finger,{size:16,className:"text-livestream-green"}),N[13]=l,N[14]=d,N[15]=h,N[16]=v):v=N[16],N[17]!==u?(T=u&&(0,n.jsx)(g.IconCallOutgoing,{size:16,className:"text-livestream-green"}),N[17]=u,N[18]=T):T=N[18],N[19]!==o?(k=o&&(0,n.jsx)(y,{className:"h-4 w-4 text-livestream-green"}),N[19]=o,N[20]=k):k=N[20],N[21]!==a||N[22]!==i?(E=(0,n.jsx)(b.Avatar,{src:a,size:16,alt:i}),N[21]=a,N[22]=i,N[23]=E):E=N[23],N[24]!==i?(S=(0,n.jsx)("p",{className:"truncate whitespace-nowrap text-xs font-bold",children:i}),N[24]=i,N[25]=S):S=N[25],N[26]!==s?(w=s&&(0,n.jsx)("p",{className:"text-xs font-bold",children:"(you)"}),N[26]=s,N[27]=w):w=N[27],N[28]!==v||N[29]!==T||N[30]!==k||N[31]!==E||N[32]!==S||N[33]!==w?(x=(0,n.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[v,T,k,E,S,w]}),N[28]=v,N[29]=T,N[30]=k,N[31]=E,N[32]=S,N[33]=w,N[34]=x):x=N[34],N[35]!==t||N[36]!==M||N[37]!==o||N[38]!==c||N[39]!==A||N[40]!==m||N[41]!==f?(I=M&&(A||o)?(0,n.jsx)(C,{hasScreenShareRequest:o,isHost:c,isRoomModerator:f,isModerator:m,...t}):null,N[35]=t,N[36]=M,N[37]=o,N[38]=c,N[39]=A,N[40]=m,N[41]=f,N[42]=I):I=N[42],N[43]!==I?(R=(0,n.jsx)("div",{className:"flex items-center gap-2",children:I}),N[43]=I,N[44]=R):R=N[44],N[45]!==O||N[46]!==L||N[47]!==x||N[48]!==R?(P=(0,n.jsxs)("div",{className:"flex h-[26px] items-center justify-between gap-2 rounded-lg pl-1 pr-2 hover:bg-white/10",onMouseEnter:L,onMouseLeave:O,children:[x,R]}),N[45]=O,N[46]=L,N[47]=x,N[48]=R,N[49]=P):P=N[49],P}],126024);var I=e.i(529326),R=e.i(132838),P=e.i(816896),N=e.i(721361),A=e.i(54567),L=((t=L||{}).INVITE_TO_STAGE="inviteToStage",t.ACCEPT_INVITE="acceptInvite",t.DECLINE_INVITE="declineInvite",t);let O=e=>{let t,n,a,i,o=(0,r.c)(10);o[0]!==e?(t=(t,n)=>{if(!e)throw A.logger.error("[useLivechatSocketInviteToStageEmitters] inviteToStage: Socket is not connected",{roomId:t,address:n}),Error("Socket is not connected");return A.logger.debug("[useLivechatSocketInviteToStageEmitters] Emitting inviteToStage",{roomId:t,address:n}),new Promise((r,a)=>{e.emit("inviteToStage",{roomId:t,address:n},e=>{let n=N.ackSchema.safeParse(e);if(!n.success)return A.logger.error("[useLivechatSocketInviteToStageEmitters] inviteToStage: Failed to parse data",{roomId:t,data:e,parsed:n}),a(Error("Failed to parse data"));r(n.data)})})},o[0]=e,o[1]=t):t=o[1];let s=t;o[2]!==e?(n=t=>{if(!e)throw A.logger.error("[useLivechatSocketInviteToStageEmitters] acceptInvite: Socket is not connected",{roomId:t}),Error("Socket is not connected");return A.logger.debug("[useLivechatSocketInviteToStageEmitters] Emitting acceptInvite",{roomId:t}),new Promise((n,r)=>{e.emit("acceptInvite",{roomId:t},e=>{let a=N.ackSchema.safeParse(e);if(!a.success)return A.logger.error("[useLivechatSocketInviteToStageEmitters] acceptInvite: Failed to parse data",{roomId:t,data:e,parsed:a}),r(Error("Failed to parse data"));n(a.data)})})},o[2]=e,o[3]=n):n=o[3];let l=n;o[4]!==e?(a=t=>{if(!e)throw A.logger.error("[useLivechatSocketInviteToStageEmitters] declineInvite: Socket is not connected",{roomId:t}),Error("Socket is not connected");return A.logger.debug("[useLivechatSocketInviteToStageEmitters] Emitting declineInvite",{roomId:t}),new Promise((n,r)=>{e.emit("declineInvite",{roomId:t},e=>{let a=N.ackSchema.safeParse(e);if(!a.success)return A.logger.error("[useLivechatSocketInviteToStageEmitters] declineInvite: Failed to parse data",{roomId:t,data:e,parsed:a}),r(Error("Failed to parse data"));n(a.data)})})},o[4]=e,o[5]=a):a=o[5];let c=a;return o[6]!==l||o[7]!==c||o[8]!==s?(i={inviteToStage:s,acceptInvite:l,declineInvite:c},o[6]=l,o[7]=c,o[8]=s,o[9]=i):i=o[9],i};e.s(["useLivechatSocketInviteToStageEmitters",0,O],381609),e.s(["useParticipantListInviteToStage",0,e=>{let t,n,a,i,o,s=(0,r.c)(19),{socket:l,roomId:c,livestreamId:u,context:d,address:m,isViewerRole:f}=e,{isParticipantInvited:h,isParticipantHandRaised:v}=(0,I.useParticipantInteractionsStateContext)();s[0]!==d||s[1]!==u||s[2]!==c||s[3]!==l?(t={socket:l,roomId:c,livestreamId:u,context:d},s[0]=d,s[1]=u,s[2]=c,s[3]=l,s[4]=t):t=s[4];let{mutate:g,isPending:y}=(e=>{let t,n,a,i,o,s,l,c,u=(0,r.c)(18);u[0]!==e?({socket:o,roomId:i,livestreamId:n,context:t,...a}=e,u[0]=e,u[1]=t,u[2]=n,u[3]=a,u[4]=i,u[5]=o):(t=u[1],n=u[2],a=u[3],i=u[4],o=u[5]);let{inviteToStage:d}=O(o);return u[6]!==d||u[7]!==i?(s=async e=>(A.logger.debug("[useInviteToStage] Inviting to stage",{roomId:i,address:e}),d(i,e)),u[6]=d,u[7]=i,u[8]=s):s=u[8],u[9]!==t||u[10]!==n||u[11]!==a||u[12]!==i?(l=(e,r,o)=>{(0,P.trackHostInvite)({mint:i,livestreamId:String(n),targetUser:r,context:t}),A.logger.debug("[useInviteToStage] Successfully invited to stage",{roomId:i,address:r}),a.onSuccess?.(e,r,o)},u[9]=t,u[10]=n,u[11]=a,u[12]=i,u[13]=l):l=u[13],u[14]!==a||u[15]!==s||u[16]!==l?(c={mutationFn:s,onSuccess:l,...a},u[14]=a,u[15]=s,u[16]=l,u[17]=c):c=u[17],(0,R.useMutation)(c)})(t);s[5]!==m||s[6]!==v?(n=m&&v(m),s[5]=m,s[6]=v,s[7]=n):n=s[7];let b=!!n;s[8]!==m||s[9]!==h?(a=m&&h(m),s[8]=m,s[9]=h,s[10]=a):a=s[10];let _=!!a,T=!!(m&&f&&!b&&!_);s[11]!==m||s[12]!==g?(i=()=>{if(!m)throw Error("No address found");g(m)},s[11]=m,s[12]=g,s[13]=i):i=s[13];let k=i;return s[14]!==T||s[15]!==k||s[16]!==_||s[17]!==y?(o={canInviteToStage:T,isInvitingToStage:y,inviteToStage:k,isInvited:_},s[14]=T,s[15]=k,s[16]=_,s[17]=y,s[18]=o):o=s[18],o}],474782)},537813,641759,24840,982462,463180,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(655703),a=e.i(126024),i=e.i(967388),o=e.i(474782),s=e.i(953038);let l=e=>{let t,r,a,o=(0,n.c)(12),{socket:l,roomId:c,address:u,livestreamId:d,isCohostRole:m,isCurrentUser:f}=e;o[0]!==f||o[1]!==d||o[2]!==c||o[3]!==l?(t={livestreamId:d,socket:l,roomId:c,context:i.STAGE_SOURCE_CONTEXTS.PARTICIPANTS_LIST,isRemovingSelf:f},o[0]=f,o[1]=d,o[2]=c,o[3]=l,o[4]=t):t=o[4];let{mutate:h,isPending:v}=(0,s.useRemoveFromStage)(t);o[5]!==u||o[6]!==h?(r=()=>{if(!u)throw Error("No address found");h(u)},o[5]=u,o[6]=h,o[7]=r):r=o[7];let g=r;return o[8]!==m||o[9]!==v||o[10]!==g?(a={canRemoveFromStage:m,isRemovingFromStage:v,removeFromStage:g},o[8]=m,o[9]=v,o[10]=g,o[11]=a):a=o[11],a};e.s(["useParticipantListRemoveFromStage",0,l],641759);var c=e.i(529326),u=e.i(392002);let d=e=>{let t,r,a,o,s,l,d=(0,n.c)(25),{socket:m,roomId:f,livestreamId:h,address:v,isViewerRole:g}=e,{isParticipantHandRaised:y,isParticipantInvited:b}=(0,c.useParticipantInteractionsStateContext)();d[0]!==v||d[1]!==y?(t=v&&y(v),d[0]=v,d[1]=y,d[2]=t):t=d[2];let _=!!t;d[3]!==v||d[4]!==b?(r=v&&b(v),d[3]=v,d[4]=b,d[5]=r):r=d[5];let T=!!r,k=g&&_;d[6]!==h||d[7]!==f||d[8]!==m?(a={socket:m,roomId:f,livestreamId:h,context:i.STAGE_SOURCE_CONTEXTS.PARTICIPANTS_LIST},d[6]=h,d[7]=f,d[8]=m,d[9]=a):a=d[9];let{addToStage:E,lowerHand:S}=(0,u.useRespondToRaiseHand)(a);d[10]!==E||d[11]!==v?(o=()=>{if(!v)throw Error("No address found");E.mutate(v)},d[10]=E,d[11]=v,d[12]=o):o=d[12];let w=o;d[13]!==v||d[14]!==S?(s=()=>{if(!v)throw Error("No address found");S.mutate(v)},d[13]=v,d[14]=S,d[15]=s):s=d[15];let x=s,C=E.isPending,I=S.isPending;return d[16]!==w||d[17]!==k||d[18]!==_||d[19]!==C||d[20]!==_||d[21]!==T||d[22]!==I||d[23]!==x?(l={canAddToStage:k,isHandRaised:_,addToStage:w,isAddingToStage:C,lowerHand:x,isLoweringHand:I,canLowerHand:_,isInvited:T},d[16]=w,d[17]=k,d[18]=_,d[19]=C,d[20]=_,d[21]=T,d[22]=I,d[23]=x,d[24]=l):l=d[24],l};e.s(["useParticipantListRespondToRaiseHand",0,d],24840);var m=e.i(66656),f=e.i(574953);let h="anonymous-",v=e=>{let t,r,a,i,o,s=(0,n.c)(19),{username:l,currentUserAddress:c,currentUserSessionId:u,viewerId:d,sessionId:v,type:g}=e;if(s[0]!==c||s[1]!==u||s[2]!==v||s[3]!==l||s[4]!==d){let e;a=d?.replace(h,""),t=!!c&&c===a||!!u&&u===v,s[9]!==d?(e=d&&!d.startsWith(h),s[9]=d,s[10]=e):e=s[10],r=!!e,i=l?(0,f.getDisplayUsername)(l):a?(0,f.getDisplayAddress)(a):"Anonymous",s[0]=c,s[1]=u,s[2]=v,s[3]=l,s[4]=d,s[5]=t,s[6]=r,s[7]=a,s[8]=i}else t=s[5],r=s[6],a=s[7],i=s[8];let y=i,b=g===m.ViewerType.VIEWER,_=g===m.ViewerType.HOST,T=g===m.ViewerType.CO_HOST;return s[11]!==y||s[12]!==T||s[13]!==t||s[14]!==_||s[15]!==r||s[16]!==b||s[17]!==a?(o={participantAddress:a,isCurrentUser:t,isLoggedIn:r,displayName:y,isViewerRole:b,isHostRole:_,isCohostRole:T},s[11]=y,s[12]=T,s[13]=t,s[14]=_,s[15]=r,s[16]=b,s[17]=a,s[18]=o):o=s[18],o};e.s(["useParticipantListState",0,v],982462);var g=e.i(132838),y=e.i(816896),b=e.i(936736),_=e.i(54567);let T=e=>{let t,r,a,o,s,l=(0,n.c)(20),{livestreamId:c,mintId:u,approved:d,onSuccess:m,onError:f,onSettled:h}=e;return l[0]!==d||l[1]!==c||l[2]!==u?(t=e=>{_.logger.debug("[useRespondToScreenSharePermission] Attempting to respond to screen share permission via API",{livestreamId:c,mintId:u,identity:e,approved:d})},r=async e=>b.api.post("livestream/participant/respond-to-screen-share-permission",{json:{livestreamId:c,mintId:u,identity:e,approved:d}}).json(),l[0]=d,l[1]=c,l[2]=u,l[3]=t,l[4]=r):(t=l[3],r=l[4]),l[5]!==d||l[6]!==c||l[7]!==u||l[8]!==m?(a=(e,t)=>{d?(0,y.trackHostApproveScreenShare)({mint:u,livestreamId:String(c),targetUser:t,context:i.STAGE_SOURCE_CONTEXTS.HOST_CONTROLS}):(0,y.trackHostDenyScreenShare)({mint:u,livestreamId:String(c),targetUser:t,context:i.STAGE_SOURCE_CONTEXTS.HOST_CONTROLS}),_.logger.debug("[useRespondToScreenSharePermission] Successfully responded to screen share permission",{livestreamId:c,identity:t,approved:d}),m?.(e)},l[5]=d,l[6]=c,l[7]=u,l[8]=m,l[9]=a):a=l[9],l[10]!==d||l[11]!==c||l[12]!==f?(o=(e,t)=>{_.logger.error("[useRespondToScreenSharePermission] Failed to respond to screen share permission",{livestreamId:c,identity:t,approved:d,error:e.message}),f?.(e)},l[10]=d,l[11]=c,l[12]=f,l[13]=o):o=l[13],l[14]!==h||l[15]!==t||l[16]!==r||l[17]!==a||l[18]!==o?(s={onMutate:t,mutationFn:r,onSuccess:a,onError:o,onSettled:h},l[14]=h,l[15]=t,l[16]=r,l[17]=a,l[18]=o,l[19]=s):s=l[19],(0,g.useMutation)(s)};var k=e.i(89085);let E=e=>{let t,r,a,i,o=(0,n.c)(21),{socket:l,enrichedParticipant:c,livestreamId:u,mintId:d,context:m,isCurrentUser:f}=e;o[0]!==m||o[1]!==f||o[2]!==u||o[3]!==d||o[4]!==l?(t={socket:l,livestreamId:u,roomId:d,context:m,onError:S,isRemovingSelf:f},o[0]=m,o[1]=f,o[2]=u,o[3]=d,o[4]=l,o[5]=t):t=o[5];let{mutate:h,isPending:v}=(0,s.useRemoveFromStage)(t);o[6]!==u||o[7]!==d?(r={livestreamId:u,mintId:d,approved:!0},o[6]=u,o[7]=d,o[8]=r):r=o[8];let{mutate:g,isPending:y}=T(r);o[9]!==u||o[10]!==d?(a={livestreamId:u,mintId:d,approved:!1},o[9]=u,o[10]=d,o[11]=a):a=o[11];let{mutate:b,isPending:_}=T(a),E=!!c?.isScreenShareRequested,w=c?.role===k.LivekitRole.CO_HOST;return o[12]!==g||o[13]!==w||o[14]!==b||o[15]!==E||o[16]!==y||o[17]!==_||o[18]!==v||o[19]!==h?(i={removeFromStage:h,isRemovingFromStage:v,approveScreenShare:g,isApprovingScreenShare:y,denyScreenShare:b,isDenyingScreenShare:_,hasScreenShareRequest:E,canRemoveFromStage:w},o[12]=g,o[13]=w,o[14]=b,o[15]=E,o[16]=y,o[17]=_,o[18]=v,o[19]=h,o[20]=i):i=o[20],i};function S(e){}e.s(["useHostParticipantActions",0,E],463180);var w=e.i(985436),x=e.i(750115);e.s(["LiveKitParticipantsListItem",0,e=>{let s,c,u=(0,n.c)(36),{livestreamId:m,roomId:f,isHost:h,isRoomModerator:g,isModerator:y,participant:b}=e,{livekit:_,hls:T}=b,S=(0,w.useLivechatSocket)(),{address:C}=(0,r.useProfile)(),{sessionId:I}=(0,x.useViewerSessionContext)();u[0]!==C||u[1]!==m||u[2]!==T||u[3]!==_||u[4]!==f||u[5]!==I||u[6]!==S?(s={livestreamId:m,currentUserAddress:C,currentUserSessionId:I,roomId:f,socket:S,livekit:_,hls:T},u[0]=C,u[1]=m,u[2]=T,u[3]=_,u[4]=f,u[5]=I,u[6]=S,u[7]=s):s=u[7];let{isCurrentUser:R,isLoggedIn:P,displayName:N,isViewerRole:A,avatarUrl:L,isHandRaised:O,isInvited:M,addToStage:D,isAddingToStage:j,canAddToStage:U,canLowerHand:F,isLoweringHand:H,lowerHand:B,removeFromStage:V,isRemovingFromStage:q,canRemoveFromStage:G,inviteToStage:z,isInvitingToStage:$,canInviteToStage:W,approveScreenShare:K,isApprovingScreenShare:Q,denyScreenShare:Y,isDenyingScreenShare:X,hasScreenShareRequest:J}=(e=>{let t,r,a,s,c,u,m,f,h=(0,n.c)(65),{livestreamId:g,socket:y,currentUserAddress:b,currentUserSessionId:_,roomId:T,livekit:S,hls:w}=e,x=w?.viewerId,C=w?.type,I=w?.username,R=w?.sessionId;h[0]!==b||h[1]!==_||h[2]!==x||h[3]!==C||h[4]!==I||h[5]!==R?(t={currentUserAddress:b,currentUserSessionId:_,viewerId:x,type:C,username:I,sessionId:R},h[0]=b,h[1]=_,h[2]=x,h[3]=C,h[4]=I,h[5]=R,h[6]=t):t=h[6];let{participantAddress:P,isCurrentUser:N,isLoggedIn:A,displayName:L,isViewerRole:O}=v(t);h[7]!==N||h[8]!==S||h[9]!==g||h[10]!==T||h[11]!==y?(r={socket:y,livestreamId:g,mintId:T,enrichedParticipant:S,context:i.STAGE_SOURCE_CONTEXTS.PARTICIPANTS_LIST,isCurrentUser:N},h[7]=N,h[8]=S,h[9]=g,h[10]=T,h[11]=y,h[12]=r):r=h[12];let{approveScreenShare:M,isApprovingScreenShare:D,denyScreenShare:j,isDenyingScreenShare:U,hasScreenShareRequest:F}=E(r),H=S?.role===k.LivekitRole.CO_HOST;h[13]!==O||h[14]!==g||h[15]!==P||h[16]!==T||h[17]!==y?(a={socket:y,roomId:T,livestreamId:g,address:P,isViewerRole:O},h[13]=O,h[14]=g,h[15]=P,h[16]=T,h[17]=y,h[18]=a):a=h[18];let{canAddToStage:B,isHandRaised:V,isInvited:q,addToStage:G,lowerHand:z,canLowerHand:$,isAddingToStage:W,isLoweringHand:K}=d(a);h[19]!==O||h[20]!==g||h[21]!==P||h[22]!==T||h[23]!==y?(s={socket:y,roomId:T,livestreamId:g,context:i.STAGE_SOURCE_CONTEXTS.PARTICIPANTS_LIST,address:P,isViewerRole:O},h[19]=O,h[20]=g,h[21]=P,h[22]=T,h[23]=y,h[24]=s):s=h[24];let{canInviteToStage:Q,isInvitingToStage:Y,inviteToStage:X}=(0,o.useParticipantListInviteToStage)(s);h[25]!==H||h[26]!==N||h[27]!==g||h[28]!==P||h[29]!==T||h[30]!==y?(c={socket:y,roomId:T,address:P,isCohostRole:H,livestreamId:g,isCurrentUser:N},h[25]=H,h[26]=N,h[27]=g,h[28]=P,h[29]=T,h[30]=y,h[31]=c):c=h[31];let{canRemoveFromStage:J,isRemovingFromStage:Z,removeFromStage:ee}=l(c);h[32]!==M||h[33]!==F||h[34]!==P?(u=()=>{if(!P)throw Error("No participant address found");if(F)return M(P);throw Error("No approve screen share permission")},h[32]=M,h[33]=F,h[34]=P,h[35]=u):u=h[35];let et=u;h[36]!==j||h[37]!==F||h[38]!==P?(m=()=>{if(!P)throw Error("No participant address found");if(F)return j(P);throw Error("No deny screen share permission")},h[36]=j,h[37]=F,h[38]=P,h[39]=m):m=h[39];let en=m;w?.profileImage;let er=w?.profileImage;return h[40]!==G||h[41]!==et||h[42]!==B||h[43]!==Q||h[44]!==$||h[45]!==J||h[46]!==en||h[47]!==L||h[48]!==F||h[49]!==X||h[50]!==W||h[51]!==D||h[52]!==N||h[53]!==U||h[54]!==V||h[55]!==q||h[56]!==Y||h[57]!==A||h[58]!==K||h[59]!==Z||h[60]!==O||h[61]!==z||h[62]!==ee||h[63]!==er?(f={isCurrentUser:N,isLoggedIn:A,avatarUrl:er,isViewerRole:O,displayName:L,isHandRaised:V,isInvited:q,canAddToStage:B,canLowerHand:$,isAddingToStage:W,isLoweringHand:K,addToStage:G,lowerHand:z,removeFromStage:ee,isRemovingFromStage:Z,canRemoveFromStage:J,inviteToStage:X,isInvitingToStage:Y,canInviteToStage:Q,approveScreenShare:et,isApprovingScreenShare:D,denyScreenShare:en,isDenyingScreenShare:U,hasScreenShareRequest:F},h[40]=G,h[41]=et,h[42]=B,h[43]=Q,h[44]=$,h[45]=J,h[46]=en,h[47]=L,h[48]=F,h[49]=X,h[50]=W,h[51]=D,h[52]=N,h[53]=U,h[54]=V,h[55]=q,h[56]=Y,h[57]=A,h[58]=K,h[59]=Z,h[60]=O,h[61]=z,h[62]=ee,h[63]=er,h[64]=f):f=h[64],f})(s);return u[8]!==D||u[9]!==K||u[10]!==L||u[11]!==U||u[12]!==W||u[13]!==F||u[14]!==G||u[15]!==Y||u[16]!==N||u[17]!==J||u[18]!==z||u[19]!==j||u[20]!==Q||u[21]!==R||u[22]!==X||u[23]!==O||u[24]!==h||u[25]!==M||u[26]!==$||u[27]!==P||u[28]!==H||u[29]!==y||u[30]!==q||u[31]!==g||u[32]!==A||u[33]!==B||u[34]!==V?(c=(0,t.jsx)(a.ParticipantsListItem,{displayName:N,isCurrentUser:R,isHandRaised:O,isInvited:M,isViewerRole:A,isHost:h,isRoomModerator:g,isModerator:y,avatarUrl:L,isLoggedIn:P,hasScreenShareRequest:J,addToStage:D,isAddingToStage:j,canAddToStage:U,lowerHand:B,isLoweringHand:H,canLowerHand:F,removeFromStage:V,isRemovingFromStage:q,canRemoveFromStage:G,inviteToStage:z,isInvitingToStage:$,canInviteToStage:W,approveScreenShare:K,isApprovingScreenShare:Q,denyScreenShare:Y,isDenyingScreenShare:X}),u[8]=D,u[9]=K,u[10]=L,u[11]=U,u[12]=W,u[13]=F,u[14]=G,u[15]=Y,u[16]=N,u[17]=J,u[18]=z,u[19]=j,u[20]=Q,u[21]=R,u[22]=X,u[23]=O,u[24]=h,u[25]=M,u[26]=$,u[27]=P,u[28]=H,u[29]=y,u[30]=q,u[31]=g,u[32]=A,u[33]=B,u[34]=V,u[35]=c):c=u[35],c}],537813)},848562,e=>{"use strict";var t=e.i(942765),n=e.i(655703),r=e.i(281675),a=e.i(936090),i=e.i(537813),o=e.i(553104),s=e.i(967388),l=e.i(649785),c=e.i(213174),u=e.i(210496),d=e.i(66656),m=e.i(188014);function f(e,t){return e[t.viewerId]=t,e}function h(e){return{identity:e.viewerId,livekit:null,hls:e}}function v(e,t){let n=t.reduce(f,{}),r=e.reduce((e,t)=>{let r=(0,m.getParticipantAddress)(t.identity),a=n[r];return delete n[r],e.push({identity:t.identity,livekit:t,hls:a}),e},[]);return r.push(...Object.values(n).map(h)),r}var g=e.i(692948),y=e.i(275762),b=e.i(325320),_=e.i(43373),T=e.i(86868),k=e.i(26454);e.s(["LiveKitParticipantsDialog",0,()=>{let{mintId:e}=(0,b.useLivestreamContext)(),{address:m}=(0,n.useProfile)(),f=(0,y.useLivestream)(e),{isOpen:h,closeDialog:E}=(0,_.useLivestreamDialogStore)(),S=(0,r.useRef)(!1);(0,r.useEffect)(()=>{h&&!S.current?((0,o.trackComplianceOpenModal)({mint:e??"",livestreamId:f?.id?String(f.id):void 0,context:s.LIVESTREAM_MODAL_SOURCE_CONTEXTS.PARTICIPANTS}),S.current=!0):h||(S.current=!1)},[h,e,f?.id]);let w=(0,r.useCallback)(()=>{(0,o.trackComplianceCloseModal)({mint:e??"",livestreamId:f?.id?String(f.id):void 0,context:s.LIVESTREAM_MODAL_SOURCE_CONTEXTS.PARTICIPANTS}),E()},[e,f?.id,E]),{host:x,coHosts:C,viewers:I,moderators:R}=(e=>{let t,n,r,a,i,o,s,m,f=(0,l.c)(25),{roomId:h}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(t={includeLocalParticipant:!1},f[0]=t):t=f[0];let{host:g,coHosts:y,viewers:b,aiModerators:_}=(0,u.useLivestreamParticipants)(t);f[1]!==h?(n={roomId:h},f[1]=h,f[2]=n):n=f[2];let{viewerTypeBuckets:T}=(0,c.useLivestreamViewersList)(n),k=T[d.ViewerType.CO_HOST];f[3]!==y||f[4]!==k?(r=v(y,k),f[3]=y,f[4]=k,f[5]=r):r=f[5];let E=r,S=T[d.ViewerType.VIEWER];f[6]!==S||f[7]!==b?(a=v(b,S),f[6]=S,f[7]=b,f[8]=a):a=f[8];let w=a,x=T[d.ViewerType.ROOM_MODERATOR];f[9]!==_||f[10]!==x?(i=v(_,x),f[9]=_,f[10]=x,f[11]=i):i=f[11];let C=i;f[12]!==g||f[13]!==T?(o=v(g?[g]:[],T[d.ViewerType.HOST]),f[12]=g,f[13]=T,f[14]=o):o=f[14];let I=o[0]??null;f[15]!==E||f[16]!==C||f[17]!==I||f[18]!==w?(s={host:I,coHosts:E,viewers:w,moderators:C},f[15]=E,f[16]=C,f[17]=I,f[18]=w,f[19]=s):s=f[19];let{host:R,coHosts:P,viewers:N,moderators:A}=s;return f[20]!==P||f[21]!==R||f[22]!==A||f[23]!==N?(m={host:R,coHosts:P,viewers:N,moderators:A},f[20]=P,f[21]=R,f[22]=A,f[23]=N,f[24]=m):m=f[24],m})({roomId:e}),{isHost:P}=(0,g.useLivekitRole)(),N=(0,k.useRoomModeratorsStore)((0,k.selectIsRoomModerator)(e,m)),A=(0,T.useModeratorStore)(T.selectIsModerator);return f?(0,t.jsx)(a.ParticipantsDialog,{isOpen:h,isLoading:!1,isError:!1,onClose:w,host:x,coHosts:C,viewers:I,moderators:R,ListItem:n=>(0,t.jsx)(i.LiveKitParticipantsListItem,{livestreamId:f.id,roomId:e,isHost:P,isRoomModerator:N,isModerator:A,...n})}):null}],848562)},147900,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(695857),a=e.i(323888),i=e.i(325320),o=e.i(43373),s=e.i(54567),l=e.i(132838),c=e.i(606933),u=e.i(641768),d=e.i(967388),m=e.i(936736),f=e.i(212761);e.s(["EndStreamDialog",0,()=>{let e,h,v,g,y,b,_,T=(0,n.c)(15),{isOpen:k,closeDialog:E}=(0,o.useLivestreamDialogStore)(),{endStream:S}=(()=>{var e;let t,r,a,h,v,g,y,b,_,T,k=(0,n.c)(9),{mintId:E,resetContext:S}=(0,i.useLivestreamContext)(),{closeDialog:w}=(0,o.useLivestreamDialogStore)();k[0]!==S?(t=()=>{S()},k[0]=S,k[1]=t):t=k[1],k[2]!==E||k[3]!==t?(r={mintId:E,onSuccess:t},k[2]=E,k[3]=t,k[4]=r):r=k[4];let{mutateAsync:x}=(e=r,_=(0,n.c)(13),T=(0,c.useQueryClient)(),_[0]!==e?(h=()=>{s.logger.debug("[useCloseLivestream] Attempting to close livestream via API",{mintId:e.mintId})},v=async()=>m.api.post("livestream/close",{json:e}).json(),_[0]=e,_[1]=h,_[2]=v):(h=_[1],v=_[2]),_[3]!==e||_[4]!==T?(g=t=>{let n=T.getQueryData([f.GET_LIVESTREAM_QUERY_KEY,e.mintId]);n?.id?(0,u.trackLivestreamEnd)({mint:e.mintId,livestreamId:String(n.id),context:d.LIFECYCLE_SOURCE_CONTEXTS.END_STREAM_BUTTON}):s.logger.warn("[useCloseLivestream] Could not track livestream end - no livestream ID in cache",{mintId:e.mintId}),s.logger.debug("[useCloseLivestream] Successfully closed livestream, invalidating query",{mintId:e.mintId}),T.invalidateQueries({queryKey:[f.GET_LIVESTREAM_QUERY_KEY,e.mintId]}),e.onSuccess(t)},_[3]=e,_[4]=T,_[5]=g):g=_[5],_[6]!==e?(y=t=>{s.logger.error("[useCloseLivestream] Failed to close livestream",{mintId:e.mintId,error:t.message})},_[6]=e,_[7]=y):y=_[7],_[8]!==h||_[9]!==v||_[10]!==g||_[11]!==y?(b={onMutate:h,mutationFn:v,onSuccess:g,onError:y},_[8]=h,_[9]=v,_[10]=g,_[11]=y,_[12]=b):b=_[12],(0,l.useMutation)(b));return k[5]!==w||k[6]!==x||k[7]!==E?(a={endStream:async()=>{s.logger.debug("[useEndStream] Attempting to end stream",{mintId:E});try{await x()}catch(e){throw s.logger.error("[useEndStream] closeLivestream mutation failed in useEndStream",{mintId:E,error:e}),e}w()}},k[5]=w,k[6]=x,k[7]=E,k[8]=a):a=k[8],a})();T[0]!==E?(e=(0,t.jsx)(a.PumpButton,{label:"cancel",onClick:E,variant:"secondary",appearance:"outline",size:"medium"}),T[0]=E,T[1]=e):e=T[1],T[2]!==S?(h=(0,t.jsx)(a.PumpButton,{label:"ok",onClick:S,className:"!px-[32px]"}),T[2]=S,T[3]=h):h=T[3],T[4]!==e||T[5]!==h?(v=(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[e,h]}),T[4]=e,T[5]=h,T[6]=v):v=T[6];let w=v;return T[7]!==w?(g={element:w,sticky:!0},T[7]=w,T[8]=g):g=T[8],T[9]===Symbol.for("react.memo_cache_sentinel")?(y={showCloseButton:!0},b=(0,t.jsx)("p",{className:"text-[12px] leading-[16px]",children:"This will end the stream, and all participants will be kicked out. Proceed?"}),T[9]=y,T[10]=b):(y=T[9],b=T[10]),T[11]!==E||T[12]!==k||T[13]!==g?(_=(0,t.jsx)(r.LivestreamBlurDialog,{title:"End Stream",open:k,closeDialog:E,footer:g,closeProps:y,children:b}),T[11]=E,T[12]=k,T[13]=g,T[14]=_):_=T[14],_}],147900)},614053,e=>{"use strict";var t=e.i(649785),n=e.i(281675),r=e.i(54567);e.s(["useCopyText",0,e=>{let a,i,o=(0,t.c)(6),{text:s,resetTimeoutSeconds:l}=e,c=void 0===l?1.5:l,[u,d]=(0,n.useState)(!1);o[0]!==c||o[1]!==s?(a=async()=>{try{await navigator.clipboard.writeText(s),d(!0),setTimeout(()=>d(!1),1e3*c)}catch(e){r.logger.error("[useCopyText] Failed to copy text",{error:e instanceof Error?e.message:String(e)})}},o[0]=c,o[1]=s,o[2]=a):a=o[2];let m=a;return o[3]!==m||o[4]!==u?(i={isCopied:u,copy:m},o[3]=m,o[4]=u,o[5]=i):i=o[5],i}])},352673,539509,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(695857),a=e.i(443815),i=e.i(264458),o=e.i(485374),s=e.i(389562),l=e.i(614053),c=e.i(180075);let u=e=>{let r,a,u,d,m,f,h,v,g,y,b=(0,n.c)(25),{text:_,className:T,icon:k,iconLabel:E}=e;b[0]!==_?(r={text:_},b[0]=_,b[1]=r):r=b[1];let{isCopied:S,copy:w}=(0,l.useCopyText)(r);b[2]!==T?(a=(0,i.default)(T),b[2]=T,b[3]=a):a=b[3];let x=S?"Copied":`Copy ${E}`;b[4]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.default)("cursor-pointer rounded-md","flex items-center"),b[4]=u):u=b[4],b[5]!==k?(d=k&&(0,t.jsx)("div",{className:"mr-4",children:k}),b[5]=k,b[6]=d):d=b[6],b[7]!==_?(m=(0,t.jsx)("p",{className:"mr-2 truncate text-xs text-white",children:_}),b[7]=_,b[8]=m):m=b[8];let C=S?"text-livestream-green":"text-livestream-muted";return b[9]!==C?(f=(0,i.default)(C),b[9]=C,b[10]=f):f=b[10],b[11]!==S||b[12]!==f?(h=(0,t.jsx)(c.CopyIcon,{copied:S,className:f}),b[11]=S,b[12]=f,b[13]=h):h=b[13],b[14]!==w||b[15]!==d||b[16]!==m||b[17]!==h?(v=(0,t.jsxs)("div",{className:u,onClick:w,children:[d,m,h]}),b[14]=w,b[15]=d,b[16]=m,b[17]=h,b[18]=v):v=b[18],b[19]!==v||b[20]!==x?(g=(0,t.jsx)(o.Tooltip,{...s.DEFAULT_TOOLTIP_PROPS,content:x,className:"!bg-gray-200 !text-black",children:v}),b[19]=v,b[20]=x,b[21]=g):g=b[21],b[22]!==g||b[23]!==a?(y=(0,t.jsx)("div",{className:a,children:g}),b[22]=g,b[23]=a,b[24]=y):y=b[24],y},d=(0,e.i(376530).default)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),m=e=>{let r,a,i=(0,n.c)(3),{className:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(d,{}),i[0]=r):r=i[0],i[1]!==o?(a=(0,t.jsx)("div",{className:o,children:r}),i[1]=o,i[2]=a):a=i[2],a},f=e=>{let r,a,i=(0,n.c)(3),{className:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M12 21.25C17.1086 21.25 21.25 17.1086 21.25 12C21.25 6.89137 17.1086 2.75 12 2.75M12 21.25C6.89137 21.25 2.75 17.1086 2.75 12C2.75 6.89137 6.89137 2.75 12 2.75M12 21.25C9.65279 21.25 7.75 17.1086 7.75 12C7.75 6.89137 9.65279 2.75 12 2.75M12 21.25C14.3472 21.25 16.25 17.1086 16.25 12C16.25 6.89137 14.3472 2.75 12 2.75M21 12H3",stroke:"#F8FAFC",strokeWidth:"1.5",strokeLinecap:"square"})}),i[0]=r):r=i[0],i[1]!==o?(a=(0,t.jsx)("div",{className:o,children:r}),i[1]=o,i[2]=a):a=i[2],a};var h=e.i(414948),v=e.i(43373),g=e.i(132838),y=e.i(641768),b=e.i(967388),_=e.i(936736),T=e.i(54567),k=e.i(325320);let E=()=>{var e;let r,a,o,s,l,c,u,d=(0,n.c)(14),{mintId:m}=(0,k.useLivestreamContext)(),{setRtmpCredentials:f}=(0,h.useLivestreamFeaturesContext)();d[0]!==f?(r=e=>{f(e)},d[0]=f,d[1]=r):r=d[1],d[2]!==m||d[3]!==r?(a={mintId:m,onSuccess:r},d[2]=m,d[3]=r,d[4]=a):a=d[4];let{mutate:v,isPending:E}=(e=a,(u=(0,n.c)(2))[0]!==e?(c={onMutate:()=>{T.logger.debug("[useUpdateRtmpCredentials] Attempting to update RTMP credentials via API",{mintId:e.mintId})},mutationFn:async()=>_.api.put("livestream/update-rtmp-credentials",{json:e}).json(),onSuccess:t=>{(0,y.trackRtmpRefresh)({mint:e.mintId,context:b.LIFECYCLE_SOURCE_CONTEXTS.RTMP_SETTINGS}),T.logger.debug("[useUpdateRtmpCredentials] Successfully updated RTMP credentials",{mintId:e.mintId,hasCredentials:!!t}),e.onSuccess?.(t)},onError:t=>{T.logger.error("[useUpdateRtmpCredentials] Failed to update RTMP credentials",{mintId:e.mintId,error:t.message})}},u[0]=e,u[1]=c):c=u[1],(0,g.useMutation)(c)),S=E&&"opacity-50";d[5]!==S?(o=(0,i.default)("w-full rounded-md bg-red-500 px-4 py-2 text-sm text-white transition-opacity duration-150 hover:opacity-80",S),d[5]=S,d[6]=o):o=d[6],d[7]!==v?(s=()=>v(),d[7]=v,d[8]=s):s=d[8];let w=E?"Resetting Credentials":"Reset RTMP Credentials";return d[9]!==E||d[10]!==o||d[11]!==s||d[12]!==w?(l=(0,t.jsx)("div",{children:(0,t.jsx)("button",{className:o,onClick:s,disabled:E,children:w})}),d[9]=E,d[10]=o,d[11]=s,d[12]=w,d[13]=l):l=d[13],l};e.s(["GetRtmpKeysDialog",0,()=>{let e,i,o,s,l,c,d=(0,n.c)(13),{rtmpCredentials:g}=(0,h.useLivestreamFeaturesContext)(),{isOpen:y,closeDialog:b}=(0,v.useLivestreamDialogStore)();return d[0]===Symbol.for("react.memo_cache_sentinel")?(e={showCloseButton:!0},i=(0,t.jsx)("p",{className:"text-xs text-livestream-muted",children:"add the url and key below to your streaming software to stream directly in there. you will still need to keep this page open"}),d[0]=e,d[1]=i):(e=d[0],i=d[1]),d[2]!==g?(o=!g&&(0,t.jsx)(a.Loading,{}),d[2]=g,d[3]=o):o=d[3],d[4]!==g?(s=g&&(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-2",children:[(0,t.jsx)(u,{text:g.url,icon:(0,t.jsx)(f,{}),iconLabel:"url"}),(0,t.jsx)(u,{text:g.streamKey,icon:(0,t.jsx)(m,{}),iconLabel:"key"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(E,{})})]}),d[4]=g,d[5]=s):s=d[5],d[6]!==o||d[7]!==s?(l=(0,t.jsxs)("div",{className:"flex flex-col gap-2 pb-6 pt-2",children:[o,s]}),d[6]=o,d[7]=s,d[8]=l):l=d[8],d[9]!==b||d[10]!==y||d[11]!==l?(c=(0,t.jsxs)(r.LivestreamBlurDialog,{title:"RTMP stream",open:y,closeDialog:b,closeProps:e,children:[i,l]}),d[9]=b,d[10]=y,d[11]=l,d[12]=c):c=d[12],c}],352673);var S=e.i(579759),w=e.i(93336);e.s(["useHostCommandEmitter",0,()=>{let e,t,r=(0,n.c)(4),{localParticipant:a}=(0,w.useLocalParticipant)();r[0]!==a?(e=async(e,t)=>{if(!a)return void T.logger.error("[useHostCommandEmitter] Cannot send command: LocalParticipant not available.");if(!e)return void T.logger.error("[useHostCommandEmitter] Cannot send command: No target identity provided.");let n=S.Buffer.from(JSON.stringify(t),"utf-8");try{T.logger.info("[useHostCommandEmitter] Sending command to participant",{targetIdentity:e,command:t}),await a.publishData(n,{destinationIdentities:[e],reliable:!0})}catch(r){let n=r instanceof Error?r.message:String(r);T.logger.error("[useHostCommandEmitter] Failed to send command",{error:n,command:t,targetIdentity:e})}},r[0]=a,r[1]=e):e=r[1];let i=e;return r[2]!==i?(t={sendCommandToParticipant:i},r[2]=i,r[3]=t):t=r[3],t}],539509)},499748,791790,53031,951809,413766,818006,899071,e=>{"use strict";var t,n=e.i(942765),r=e.i(649785),a=e.i(93336),i=e.i(695857),o=e.i(323888),s=e.i(539509),l=e.i(43373),c=e.i(89085),u=e.i(404171);e.s(["HostTakeoverScreenShareDialog",0,()=>{let e,t,d,m,f,h,v,g,y,b=(0,r.c)(22),{isOpen:_,closeDialog:T,payload:k}=(0,l.useLivestreamDialogStore)(),{localParticipant:E}=(0,a.useLocalParticipant)(),{sendCommandToParticipant:S}=(0,s.useHostCommandEmitter)();b[0]!==T||b[1]!==E||b[2]!==k||b[3]!==S?(e=async()=>{k?.participantToStop&&await S(k.participantToStop.identity,{messageType:c.DataMessageType.HOST_COMMAND,payload:{type:c.LIVEKIT_COMMANDS.STOP_YOUR_SCREENSHARE}}),E.setScreenShareEnabled(!0,u.defaultScreenShareOptions,u.defaultScreenShareTrackPublishOptions),T()},b[0]=T,b[1]=E,b[2]=k,b[3]=S,b[4]=e):e=b[4];let w=e;b[5]!==T?(t=()=>{T()},b[5]=T,b[6]=t):t=b[6];let x=t;b[7]!==x?(d=(0,n.jsx)(o.PumpButton,{label:"cancel",onClick:x,variant:"secondary",size:"medium",appearance:"outline"}),b[7]=x,b[8]=d):d=b[8],b[9]!==w?(m=(0,n.jsx)(o.PumpButton,{label:"confirm",onClick:w,className:"!px-[32px]"}),b[9]=w,b[10]=m):m=b[10],b[11]!==d||b[12]!==m?(f=(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[d,m]}),b[11]=d,b[12]=m,b[13]=f):f=b[13];let C=f;return b[14]!==C?(h={element:C,sticky:!0},b[14]=C,b[15]=h):h=b[15],b[16]===Symbol.for("react.memo_cache_sentinel")?(v={showCloseButton:!0},g=(0,n.jsx)("p",{className:"text-[12px] leading-[16px]",children:"starting your screen share will stop the current one. continue?"}),b[16]=v,b[17]=g):(v=b[16],g=b[17]),b[18]!==T||b[19]!==_||b[20]!==h?(y=(0,n.jsx)(i.LivestreamBlurDialog,{title:"start screen share?",open:_,closeDialog:T,footer:h,closeProps:v,children:g}),b[18]=T,b[19]=_,b[20]=h,b[21]=y):y=b[21],y}],499748);var d=e.i(281675),m=e.i(178896),f=e.i(474765),h=e.i(904245),v=e.i(125214),g=e.i(815762),y=e.i(479993),b=e.i(391249),_=e.i(989780),T=e.i(135470),k="rovingFocusGroup.onEntryFocus",E={bubbles:!1,cancelable:!0},S="RovingFocusGroup",[w,x,C]=(0,g.createCollection)(S),[I,R]=(0,h.createContextScope)(S,[C]),[P,N]=I(S),A=d.forwardRef((e,t)=>(0,n.jsx)(w.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,n.jsx)(w.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,n.jsx)(L,{...e,ref:t})})}));A.displayName=S;var L=d.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:a,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...g}=e,y=d.useRef(null),S=(0,f.useComposedRefs)(t,y),w=(0,T.useDirection)(o),[C=null,I]=(0,_.useControllableState)({prop:s,defaultProp:l,onChange:c}),[R,N]=d.useState(!1),A=(0,b.useCallbackRef)(u),L=x(r),O=d.useRef(!1),[M,D]=d.useState(0);return d.useEffect(()=>{let e=y.current;if(e)return e.addEventListener(k,A),()=>e.removeEventListener(k,A)},[A]),(0,n.jsx)(P,{scope:r,orientation:a,dir:w,loop:i,currentTabStopId:C,onItemFocus:d.useCallback(e=>I(e),[I]),onItemShiftTab:d.useCallback(()=>N(!0),[]),onFocusableItemAdd:d.useCallback(()=>D(e=>e+1),[]),onFocusableItemRemove:d.useCallback(()=>D(e=>e-1),[]),children:(0,n.jsx)(v.Primitive.div,{tabIndex:R||0===M?-1:0,"data-orientation":a,...g,ref:S,style:{outline:"none",...e.style},onMouseDown:(0,m.composeEventHandlers)(e.onMouseDown,()=>{O.current=!0}),onFocus:(0,m.composeEventHandlers)(e.onFocus,e=>{let t=!O.current;if(e.target===e.currentTarget&&t&&!R){let t=new CustomEvent(k,E);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=L().filter(e=>e.focusable);j([e.find(e=>e.active),e.find(e=>e.id===C),...e].filter(Boolean).map(e=>e.ref.current),h)}}O.current=!1}),onBlur:(0,m.composeEventHandlers)(e.onBlur,()=>N(!1))})})}),O="RovingFocusGroupItem",M=d.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:a=!0,active:i=!1,tabStopId:o,...s}=e,l=(0,y.useId)(),c=o||l,u=N(O,r),f=u.currentTabStopId===c,h=x(r),{onFocusableItemAdd:g,onFocusableItemRemove:b}=u;return d.useEffect(()=>{if(a)return g(),()=>b()},[a,g,b]),(0,n.jsx)(w.ItemSlot,{scope:r,id:c,focusable:a,active:i,children:(0,n.jsx)(v.Primitive.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...s,ref:t,onMouseDown:(0,m.composeEventHandlers)(e.onMouseDown,e=>{a?u.onItemFocus(c):e.preventDefault()}),onFocus:(0,m.composeEventHandlers)(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:(0,m.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,n){var r;let a=(r=e.key,"rtl"!==n?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return D[a]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){var n,r;"prev"===t&&a.reverse();let i=a.indexOf(e.currentTarget);a=u.loop?(n=a,r=i+1,n.map((e,t)=>n[(r+t)%n.length])):a.slice(i+1)}setTimeout(()=>j(a))}})})})});M.displayName=O;var D={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function j(e,t=!1){let n=document.activeElement;for(let r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}var U=e.i(568851),F=e.i(824961),H=e.i(190395),B=e=>{var t;let n,r,{present:a,children:i}=e,o=function(e){var t,n;let[r,a]=d.useState(),i=d.useRef({}),o=d.useRef(e),s=d.useRef("none"),[l,c]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},d.useReducer((e,t)=>n[e][t]??e,t));return d.useEffect(()=>{let e=V(i.current);s.current="mounted"===l?e:"none"},[l]),(0,H.useLayoutEffect)(()=>{let t=i.current,n=o.current;if(n!==e){let r=s.current,a=V(t);e?c("MOUNT"):"none"===a||t?.display==="none"?c("UNMOUNT"):n&&r!==a?c("ANIMATION_OUT"):c("UNMOUNT"),o.current=e}},[e,c]),(0,H.useLayoutEffect)(()=>{if(r){let e,t=r.ownerDocument.defaultView??window,n=n=>{let a=V(i.current).includes(n.animationName);if(n.target===r&&a&&(c("ANIMATION_END"),!o.current)){let n=r.style.animationFillMode;r.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=n)})}},a=e=>{e.target===r&&(s.current=V(i.current))};return r.addEventListener("animationstart",a),r.addEventListener("animationcancel",n),r.addEventListener("animationend",n),()=>{t.clearTimeout(e),r.removeEventListener("animationstart",a),r.removeEventListener("animationcancel",n),r.removeEventListener("animationend",n)}}c("ANIMATION_END")},[r,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(e=>{e&&(i.current=getComputedStyle(e)),a(e)},[])}}(a),s="function"==typeof i?i({present:o.isPresent}):d.Children.only(i),l=(0,f.useComposedRefs)(o.ref,(t=s,(r=(n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in n&&n.isReactWarning)?t.ref:(r=(n=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in n&&n.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof i||o.isPresent?d.cloneElement(s,{ref:l}):null};function V(e){return e?.animationName||"none"}B.displayName="Presence",e.s(["Presence",()=>B],791790);var q="Radio",[G,z]=(0,h.createContextScope)(q),[$,W]=G(q),K=d.forwardRef((e,t)=>{let{__scopeRadio:r,name:a,checked:i=!1,required:o,disabled:s,value:l="on",onCheck:c,form:u,...h}=e,[g,y]=d.useState(null),b=(0,f.useComposedRefs)(t,e=>y(e)),_=d.useRef(!1),T=!g||u||!!g.closest("form");return(0,n.jsxs)($,{scope:r,checked:i,disabled:s,children:[(0,n.jsx)(v.Primitive.button,{type:"button",role:"radio","aria-checked":i,"data-state":J(i),"data-disabled":s?"":void 0,disabled:s,value:l,...h,ref:b,onClick:(0,m.composeEventHandlers)(e.onClick,e=>{i||c?.(),T&&(_.current=e.isPropagationStopped(),_.current||e.stopPropagation())})}),T&&(0,n.jsx)(X,{control:g,bubbles:!_.current,name:a,value:l,checked:i,required:o,disabled:s,form:u,style:{transform:"translateX(-100%)"}})]})});K.displayName=q;var Q="RadioIndicator",Y=d.forwardRef((e,t)=>{let{__scopeRadio:r,forceMount:a,...i}=e,o=W(Q,r);return(0,n.jsx)(B,{present:a||o.checked,children:(0,n.jsx)(v.Primitive.span,{"data-state":J(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t})})});Y.displayName=Q;var X=e=>{let{control:t,checked:r,bubbles:a=!0,...i}=e,o=d.useRef(null),s=(0,F.usePrevious)(r),l=(0,U.useSize)(t);return d.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(s!==r&&t){let n=new Event("click",{bubbles:a});t.call(e,r),e.dispatchEvent(n)}},[s,r,a]),(0,n.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function J(e){return e?"checked":"unchecked"}var Z=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ee="RadioGroup",[et,en]=(0,h.createContextScope)(ee,[R,z]),er=R(),ea=z(),[ei,eo]=et(ee),es=d.forwardRef((e,t)=>{let{__scopeRadioGroup:r,name:a,defaultValue:i,value:o,required:s=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:m,...f}=e,h=er(r),g=(0,T.useDirection)(u),[y,b]=(0,_.useControllableState)({prop:o,defaultProp:i,onChange:m});return(0,n.jsx)(ei,{scope:r,name:a,required:s,disabled:l,value:y,onValueChange:b,children:(0,n.jsx)(A,{asChild:!0,...h,orientation:c,dir:g,loop:d,children:(0,n.jsx)(v.Primitive.div,{role:"radiogroup","aria-required":s,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...f,ref:t})})})});es.displayName=ee;var el="RadioGroupItem",ec=d.forwardRef((e,t)=>{let{__scopeRadioGroup:r,disabled:a,...i}=e,o=eo(el,r),s=o.disabled||a,l=er(r),c=ea(r),u=d.useRef(null),h=(0,f.useComposedRefs)(t,u),v=o.value===i.value,g=d.useRef(!1);return d.useEffect(()=>{let e=e=>{Z.includes(e.key)&&(g.current=!0)},t=()=>g.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,n.jsx)(M,{asChild:!0,...l,focusable:!s,active:v,children:(0,n.jsx)(K,{disabled:s,required:o.required,checked:v,...c,...i,name:o.name,ref:h,onCheck:()=>o.onValueChange(i.value),onKeyDown:(0,m.composeEventHandlers)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,m.composeEventHandlers)(i.onFocus,()=>{g.current&&u.current?.click()})})})});ec.displayName=el,d.forwardRef((e,t)=>{let{__scopeRadioGroup:r,...a}=e,i=ea(r);return(0,n.jsx)(Y,{...i,...a,ref:t})}).displayName="RadioGroupIndicator";var eu=e.i(264458);e.s(["RadioGroup",0,e=>{let t,a,i,o=(0,r.c)(9),s=e.selectedValue,l=e.onChange;return o[0]!==e.className?(t=(0,eu.default)(e.className,"mb-[12px] flex flex-col gap-[12px]"),o[0]=e.className,o[1]=t):t=o[1],o[2]!==e?(a=e.options.map(t=>(0,n.jsxs)("div",{className:"flex cursor-pointer items-center gap-[4px]",onClick:()=>e.onChange(t.value),children:[(0,n.jsx)("div",{className:(0,eu.default)("relative aspect-square h-[17px] rounded-full border-[1.5px] border-white"),children:t.value===e.selectedValue&&(0,n.jsx)("div",{className:"absolute left-1/2 top-1/2 aspect-square h-[7px] -translate-x-1/2 -translate-y-1/2 rounded-full bg-white"})}),(0,n.jsx)(ec,{value:t.value,className:"text-[12px] lowercase text-white first-letter:uppercase",children:t.label})]},t.value)),o[2]=e,o[3]=a):a=o[3],o[4]!==e.onChange||o[5]!==e.selectedValue||o[6]!==t||o[7]!==a?(i=(0,n.jsx)(es,{value:s,onValueChange:l,className:t,children:a}),o[4]=e.onChange,o[5]=e.selectedValue,o[6]=t,o[7]=a,o[8]=i):i=o[8],i}],53031),e.s(["TextArea",0,e=>{let t,a,i,o=(0,r.c)(10);return o[0]!==e.className?(t=(0,eu.default)("w-full rounded-[8px] border border-white p-2 text-[12px] leading-[16px]","bg-transparent text-white placeholder:text-livestream-muted","resize-none focus:outline-none focus:ring-0",e.className),o[0]=e.className,o[1]=t):t=o[1],o[2]!==e?(a=t=>e.onChange(t.target.value),o[2]=e,o[3]=a):a=o[3],o[4]!==e.maxLength||o[5]!==e.placeholder||o[6]!==e.value||o[7]!==t||o[8]!==a?(i=(0,n.jsx)("textarea",{className:t,placeholder:e.placeholder,value:e.value,onChange:a,maxLength:e.maxLength}),o[4]=e.maxLength,o[5]=e.placeholder,o[6]=e.value,o[7]=t,o[8]=a,o[9]=i):i=o[9],i}],951809);var ed=e.i(690877),em=e.i(936736),ep=e.i(54567);let ef="can-report-livestream";e.s(["CAN_REPORT_LIVESTREAM_QUERY_KEY",0,ef,"useCanReportLivestream",0,({mintId:e,enabled:t,onSuccess:n})=>(0,ed.useQuery)({queryKey:[ef,e],queryFn:async()=>{ep.logger.debug("[useCanReportLivestream] Attempting to fetch canReport status",{mintId:e});let t=new URLSearchParams;t.set("mintId",e);try{let e=await em.api.get(`livestream-reports/can-report?${t.toString()}`).json();return n?.(e),e}catch(n){let t=n instanceof Error?n.message:String(n);throw ep.logger.error("[useCanReportLivestream] Fetch failed",{mintId:e,error:t}),n}},refetchInterval:6e5,enabled:t})],413766);var eh=e.i(132838),ev=e.i(606933),eg=e.i(553104),ey=e.i(967388),eb=e.i(182251);e.s(["useReportLivestream",0,e=>{let t,n,a,i,o,s,l=(0,r.c)(14),c=(0,ev.useQueryClient)();return l[0]!==e?(t=()=>{ep.logger.debug("[useReportLivestream] Attempting to report livestream via API",{mintId:e.mintId,reason:e.reason})},n=async()=>em.api.post("livestream-reports/report",{json:e}).json(),a=t=>{let n=eb.useLivestreamDataStore.getState().getLivestream(e.mintId);(0,eg.trackReportLivestream)({mint:e.mintId,livestreamId:String(n?.id??""),reasonType:e.reason,context:ey.LIVESTREAM_MODAL_SOURCE_CONTEXTS.REPORT}),ep.logger.debug("[useReportLivestream] Successfully reported livestream",{mintId:e.mintId,reason:e.reason}),e.onSuccess(t)},i=t=>{let n=t.message||"Unknown error during report livestream";ep.logger.error("[useReportLivestream] Failed to report livestream",{mintId:e.mintId,reason:e.reason,error:n}),e.onError?.(t)},l[0]=e,l[1]=t,l[2]=n,l[3]=a,l[4]=i):(t=l[1],n=l[2],a=l[3],i=l[4]),l[5]!==e||l[6]!==c?(o=()=>{c.invalidateQueries({queryKey:[ef,e.mintId]})},l[5]=e,l[6]=c,l[7]=o):o=l[7],l[8]!==t||l[9]!==n||l[10]!==a||l[11]!==i||l[12]!==o?(s={onMutate:t,mutationFn:n,onSuccess:a,onError:i,onSettled:o},l[8]=t,l[9]=n,l[10]=a,l[11]=i,l[12]=o,l[13]=s):s=l[13],(0,eh.useMutation)(s)}],818006);var e_=((t={}).SPAM="spam",t.ILLEGAL="illegal",t.UNSAFE="unsafe",t.OTHER="other",t);e.s(["LivestreamReportReason",()=>e_],899071)},621878,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(281675),a=e.i(695857),i=e.i(323888),o=e.i(53031),s=e.i(951809),l=e.i(413766),c=e.i(818006),u=e.i(325320),d=e.i(899071),m=e.i(435135);function f(e){return{label:e,value:e}}e.s(["ReportDialog",0,e=>{let h,v,g,y,b,_,T,k,E,S=(0,n.c)(29),{isOpen:w,closeDialog:x}=e,{mintId:C}=(0,u.useLivestreamContext)(),[I,R]=(0,r.useState)(d.LivestreamReportReason.SPAM),[P,N]=(0,r.useState)("");S[0]!==C?(h={mintId:C},S[0]=C,S[1]=h):h=S[1];let{data:A}=(0,l.useCanReportLivestream)(h);S[2]!==x?(v=()=>{x()},S[2]=x,S[3]=v):v=S[3],S[4]!==P||S[5]!==C||S[6]!==I||S[7]!==v?(g={mintId:C,reason:I,description:P,onSuccess:v},S[4]=P,S[5]=C,S[6]=I,S[7]=v,S[8]=g):g=S[8];let{mutate:L,isPending:O}=(0,c.useReportLivestream)(g);S[9]===Symbol.for("react.memo_cache_sentinel")?(y=Object.values(d.LivestreamReportReason).map(f),S[9]=y):y=S[9];let M=y;if(A?.canReport===!1){let e,n,r;return S[10]===Symbol.for("react.memo_cache_sentinel")?(e={showCloseButton:!0},n=(0,t.jsx)("p",{className:"pb-[40px] text-[12px] text-white",children:"Our team is reviewing your previous report.\nThank you for your patience."}),S[10]=e,S[11]=n):(e=S[10],n=S[11]),S[12]!==x||S[13]!==w?(r=(0,t.jsx)(a.LivestreamBlurDialog,{title:"Thank you for your report",open:w,closeDialog:x,closeProps:e,children:n}),S[12]=x,S[13]=w,S[14]=r):r=S[14],r}return S[15]!==O||S[16]!==L?(b={element:(0,t.jsx)(i.PumpButton,{label:"submit",onClick:L,className:"w-full",disabled:O}),sticky:!0},S[15]=O,S[16]=L,S[17]=b):b=S[17],S[18]===Symbol.for("react.memo_cache_sentinel")?(_={showCloseButton:!0,disableCloseOutside:!0},S[18]=_):_=S[18],S[19]!==I?(T=(0,t.jsx)(o.RadioGroup,{options:M,selectedValue:I,onChange:R}),S[19]=I,S[20]=T):T=S[20],S[21]!==P?(k=(0,t.jsx)(s.TextArea,{className:"h-[100px]",placeholder:"share more details if you'd like...",value:P,onChange:N,maxLength:m.LIVESTREAM_REPORT_DETAILS_MAX_LENGTH}),S[21]=P,S[22]=k):k=S[22],S[23]!==x||S[24]!==w||S[25]!==b||S[26]!==T||S[27]!==k?(E=(0,t.jsxs)(a.LivestreamBlurDialog,{title:"Report this stream",open:w,closeDialog:x,footer:b,closeProps:_,children:[T,k]}),S[23]=x,S[24]=w,S[25]=b,S[26]=T,S[27]=k,S[28]=E):E=S[28],E}])},295595,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(848562),a=e.i(43373),i=e.i(147900),o=e.i(352673),s=e.i(499748),l=e.i(621878),c=e.i(281675),u=e.i(695857),d=e.i(323888),m=e.i(681750),f=e.i(275762),h=e.i(132838),v=e.i(606933),g=e.i(936736),y=e.i(54567),b=e.i(212761),_=e.i(325320),T=e.i(435135);let k=()=>{var e;let r,i,o,s,l,k,E,S,w,x,C,I,R,P,N,A,L=(0,n.c)(23),{isOpen:O,closeDialog:M}=(0,a.useLivestreamDialogStore)(),{mintId:D}=(0,_.useLivestreamContext)(),j=(0,f.useLivestream)(D),[U,F]=(0,c.useState)(j?.title),H=j?.id??0;L[0]!==M?(r=()=>{M()},L[0]=M,L[1]=r):r=L[1],L[2]!==D||L[3]!==H||L[4]!==r?(i={livestreamId:H,mintId:D,onSuccess:r},L[2]=D,L[3]=H,L[4]=r,L[5]=i):i=L[5];let{mutateAsync:B,isPending:V}=(e=i,N=(0,n.c)(13),A=(0,v.useQueryClient)(),N[0]!==e?(x=()=>{y.logger.debug("[useUpdateLivestream] Attempting to update livestream via API",{mintId:e.mintId,livestreamId:e.livestreamId})},C=async t=>{let{mintId:n,livestreamId:r}=e;return g.api.post("livestream/update",{json:{mintId:n,livestreamId:r,title:t}}).json()},N[0]=e,N[1]=x,N[2]=C):(x=N[1],C=N[2]),N[3]!==e||N[4]!==A?(I=t=>{y.logger.debug("[useUpdateLivestream] Successfully updated livestream",{mintId:e.mintId,livestream:t,title:t.title}),A.invalidateQueries({queryKey:[b.GET_LIVESTREAM_QUERY_KEY,e.mintId]}),e.onSuccess(t)},N[3]=e,N[4]=A,N[5]=I):I=N[5],N[6]!==e?(R=t=>{y.logger.error("[useUpdateLivestream] Failed to update livestream",{mintId:e.mintId,livestreamId:e.livestreamId,error:t.message||"Unknown error during livestream update"})},N[6]=e,N[7]=R):R=N[7],N[8]!==x||N[9]!==C||N[10]!==I||N[11]!==R?(P={onMutate:x,mutationFn:C,onSuccess:I,onError:R},N[8]=x,N[9]=C,N[10]=I,N[11]=R,N[12]=P):P=N[12],(0,h.useMutation)(P));L[6]!==U||L[7]!==B?(o=async()=>{U&&await B(U)},L[6]=U,L[7]=B,L[8]=o):o=L[8];let q=o;L[9]===Symbol.for("react.memo_cache_sentinel")?(s={showCloseButton:!0},l=(0,t.jsx)("p",{className:"text-xs text-livestream-muted",children:"Update the title for the video - it will show both on the livestream and the recording"}),L[9]=s,L[10]=l):(s=L[9],l=L[10]),L[11]!==U?(k=(0,t.jsx)(m.Input,{placeholder:"Update title",value:U,onChange:F,maxLength:T.LIVESTREAM_TITLE_MAX_LENGTH}),L[11]=U,L[12]=k):k=L[12];let G=V||!U||U===j?.title;return L[13]!==q||L[14]!==G?(E=(0,t.jsx)(d.PumpButton,{label:"Save title",disabled:G,onClick:q}),L[13]=q,L[14]=G,L[15]=E):E=L[15],L[16]!==k||L[17]!==E?(S=(0,t.jsxs)("div",{className:"flex flex-col gap-2 pb-6 pt-2",children:[k,E]}),L[16]=k,L[17]=E,L[18]=S):S=L[18],L[19]!==M||L[20]!==O||L[21]!==S?(w=(0,t.jsxs)(u.LivestreamBlurDialog,{title:"Update title",open:O,closeDialog:M,closeProps:s,children:[l,S]}),L[19]=M,L[20]=O,L[21]=S,L[22]=w):w=L[22],w};e.s(["LivestreamDialog",0,()=>{let e=(0,n.c)(8),{dialogType:c,isOpen:u,closeDialog:d}=(0,a.useLivestreamDialogStore)();if(!u)return null;switch(c){case a.DialogType.EndStream:{let n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(i.EndStreamDialog,{}),e[0]=n):n=e[0],n}case a.DialogType.ReportLivestream:{let n;return e[1]!==d||e[2]!==u?(n=(0,t.jsx)(l.ReportDialog,{isOpen:u,closeDialog:d}),e[1]=d,e[2]=u,e[3]=n):n=e[3],n}case a.DialogType.Participants:{let n;return e[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(r.LiveKitParticipantsDialog,{}),e[4]=n):n=e[4],n}case a.DialogType.HostTakeoverScreenShare:{let n;return e[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(s.HostTakeoverScreenShareDialog,{}),e[5]=n):n=e[5],n}case a.DialogType.GetRTMPKeys:{let n;return e[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(o.GetRtmpKeysDialog,{}),e[6]=n):n=e[6],n}case a.DialogType.UpdateLivestreamTitle:{let n;return e[7]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(k,{}),e[7]=n):n=e[7],n}}}],295595)},486775,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(958464),a=e.i(281675),i=e.i(93336),o=e.i(647063),s=e.i(188014);function l(e){return e.isScreenShareRequested}function c(e){let t=e.isScreenShareRequested;return`${e.participant.identity}:${t}`}var u=e.i(272868),d=e.i(967388),m=e.i(463180),f=e.i(275762),h=e.i(985436),v=e.i(325320),g=e.i(358838),y=e.i(781628);let b=e=>{let r,a,i,o,s,l,c=(0,n.c)(24),{requester:u,onClickAction:b}=e,{mintId:_}=(0,v.useLivestreamContext)(),T=(0,f.useLivestream)(_),k=(0,h.useLivechatSocket)(),E=T?.id??0;c[0]!==_||c[1]!==u||c[2]!==k||c[3]!==E?(r={socket:k,enrichedParticipant:u,livestreamId:E,mintId:_,context:d.STAGE_SOURCE_CONTEXTS.HOST_CONTROLS,isCurrentUser:u.isCurrentUser},c[0]=_,c[1]=u,c[2]=k,c[3]=E,c[4]=r):r=c[4];let{approveScreenShare:S,isApprovingScreenShare:w,denyScreenShare:x,isDenyingScreenShare:C}=(0,m.useHostParticipantActions)(r);c[5]!==S||c[6]!==b||c[7]!==u.participant.identity?(a=()=>{S(u.participant.identity),b()},c[5]=S,c[6]=b,c[7]=u.participant.identity,c[8]=a):a=c[8];let I=a;c[9]!==x||c[10]!==b||c[11]!==u.participant.identity?(i=()=>{x(u.participant.identity),b()},c[9]=x,c[10]=b,c[11]=u.participant.identity,c[12]=i):i=c[12];let R=i;return c[13]!==I||c[14]!==w||c[15]!==C?(o=(0,t.jsx)(g.AcceptButton,{onClick:I,loading:w,disabled:C}),c[13]=I,c[14]=w,c[15]=C,c[16]=o):o=c[16],c[17]!==R||c[18]!==w||c[19]!==C?(s=(0,t.jsx)(y.RejectButton,{onClick:R,loading:C,disabled:w}),c[17]=R,c[18]=w,c[19]=C,c[20]=s):s=c[20],c[21]!==o||c[22]!==s?(l=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[o,s]}),c[21]=o,c[22]=s,c[23]=l):l=c[23],l};e.s(["HostScreenShareRequestIndicator",0,()=>{let e,d,m,f=(0,n.c)(8),{requesterCount:h,firstRequester:v,showIndicator:g,hide:y}=(()=>{let e,t,r,u,d,m=(0,n.c)(17),f=(0,o.useRemoteParticipants)(),{localParticipant:h}=(0,i.useLocalParticipant)(),[v,g]=(0,a.useState)(null);if(m[0]!==h||m[1]!==f){let t;m[3]!==h?(t=e=>(0,s.buildEnrichedParticipant)({participant:e,localParticipant:h}),m[3]=h,m[4]=t):t=m[4],e=f.map(t),m[0]=h,m[1]=f,m[2]=e}else e=m[2];let y=e;m[5]!==y?(t=y.filter(l),m[5]=y,m[6]=t):t=m[6];let b=t,_=b.length,T=_>0?b[0]:void 0;e:{let e;if(0===_){r=null;break e}if(m[7]!==b){let t=b.map(c);t.sort(),e=t.join("|"),m[7]=b,m[8]=e}else e=m[8];r=e}let k=r,E=_>0&&k!==v;m[9]!==k?(u=()=>g(k),m[9]=k,m[10]=u):u=m[10];let S=u;return m[11]!==T||m[12]!==S||m[13]!==_||m[14]!==b||m[15]!==E?(d={requesterCount:_,firstRequester:T,screenShareRequesters:b,showIndicator:E,hide:S},m[11]=T,m[12]=S,m[13]=_,m[14]=b,m[15]=E,m[16]=d):d=m[16],d})();if(0===h||!g)return null;let _=1===h&&v?`${v.displayName} wants to share screen`:`${h} participants want to share screen`;return f[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(r.ScreenShare,{className:"h-4 w-4 text-livestream-green"}),f[0]=e):e=f[0],f[1]!==v||f[2]!==y?(d=v&&(0,t.jsx)(b,{requester:v,onClickAction:y}),f[1]=v,f[2]=y,f[3]=d):d=f[3],f[4]!==y||f[5]!==_||f[6]!==d?(m=(0,t.jsx)(u.HostActionRequestIndicator,{onHide:y,icon:e,message:_,quickActions:d}),f[4]=y,f[5]=_,f[6]=d,f[7]=m):m=f[7],m}],486775)},255080,301019,742386,166078,223331,814048,877767,400280,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(264458),a=e.i(655703),i=e.i(281675),o=e.i(529326),s=e.i(132838),l=e.i(967388),c=e.i(816896),u=e.i(381609),d=e.i(985436),m=e.i(695857),f=e.i(323888);let h=e=>{let r,a,i,o,s,l,c,u,d=(0,n.c)(21),{isOpen:h,closeDialog:v,onAccept:g,onDecline:y,isAccepting:b,isDeclining:_}=e,T=void 0!==b&&b||void 0!==_&&_;d[0]!==v||d[1]!==y?(r=()=>{y(),v()},d[0]=v,d[1]=y,d[2]=r):r=d[2];let k=r;d[3]!==v||d[4]!==g?(a=()=>{g(),v()},d[3]=v,d[4]=g,d[5]=a):a=d[5];let E=a;return d[6]===Symbol.for("react.memo_cache_sentinel")?(i={showCloseButton:!0},o=(0,t.jsx)("p",{className:"text-xs text-livestream-muted",children:"The host has invited you to join the stage as a speaker"}),d[6]=i,d[7]=o):(i=d[6],o=d[7]),d[8]!==E||d[9]!==T?(s=(0,t.jsx)(f.PumpButton,{label:"join",onClick:E,disabled:T}),d[8]=E,d[9]=T,d[10]=s):s=d[10],d[11]!==k||d[12]!==T?(l=(0,t.jsx)(f.PumpButton,{label:"decline",variant:"secondary",size:"medium",appearance:"outline",onClick:k,disabled:T}),d[11]=k,d[12]=T,d[13]=l):l=d[13],d[14]!==s||d[15]!==l?(c=(0,t.jsxs)("div",{className:"flex flex-col gap-3 pb-6 pt-3",children:[s,l]}),d[14]=s,d[15]=l,d[16]=c):c=d[16],d[17]!==k||d[18]!==h||d[19]!==c?(u=(0,t.jsxs)(m.LivestreamBlurDialog,{title:"Request to join",open:h,closeDialog:k,closeProps:i,children:[o,c]}),d[17]=k,d[18]=h,d[19]=c,d[20]=u):u=d[20],u},v=e=>{let r,m,f,v,g,y,b=(0,n.c)(17),{roomId:_,livestreamId:T}=e,{isParticipantInvited:k}=(0,o.useParticipantInteractionsStateContext)(),E=(0,d.useLivechatSocket)(),{address:S}=(0,a.useProfile)(),[w,x]=(0,i.useState)(!1);b[0]!==T||b[1]!==_||b[2]!==E?(r={roomId:_,socket:E,livestreamId:T},b[0]=T,b[1]=_,b[2]=E,b[3]=r):r=b[3];let{acceptInvite:C,declineInvite:I}=(e=>{let t,r,a,i,o,d,m,f,h,v,g,y,b=(0,n.c)(31);b[0]!==e?({roomId:i,socket:o,livestreamId:r,onSuccess:t,...a}=e,b[0]=e,b[1]=t,b[2]=r,b[3]=a,b[4]=i,b[5]=o):(t=b[1],r=b[2],a=b[3],i=b[4],o=b[5]);let{acceptInvite:_,declineInvite:T}=(0,u.useLivechatSocketInviteToStageEmitters)(o);b[6]!==_||b[7]!==i?(d=async()=>_(i),b[6]=_,b[7]=i,b[8]=d):d=b[8],b[9]!==t||b[10]!==r||b[11]!==i?(m=(e,n,a)=>{(0,c.trackViewerAcceptInvite)({mint:i,livestreamId:String(r),context:l.STAGE_SOURCE_CONTEXTS.INVITE_DIALOG}),t?.(e,n,a)},b[9]=t,b[10]=r,b[11]=i,b[12]=m):m=b[12],b[13]!==a||b[14]!==d||b[15]!==m?(f={mutationFn:d,onSuccess:m,...a},b[13]=a,b[14]=d,b[15]=m,b[16]=f):f=b[16];let k=(0,s.useMutation)(f);b[17]!==T||b[18]!==i?(h=async()=>T(i),b[17]=T,b[18]=i,b[19]=h):h=b[19],b[20]!==t||b[21]!==r||b[22]!==i?(v=(e,n,a)=>{(0,c.trackViewerDeclineInvite)({mint:i,livestreamId:String(r),context:l.STAGE_SOURCE_CONTEXTS.INVITE_DIALOG}),t?.(e,n,a)},b[20]=t,b[21]=r,b[22]=i,b[23]=v):v=b[23],b[24]!==a||b[25]!==h||b[26]!==v?(g={mutationFn:h,onSuccess:v,...a},b[24]=a,b[25]=h,b[26]=v,b[27]=g):g=b[27];let E=(0,s.useMutation)(g);return b[28]!==k||b[29]!==E?(y={acceptInvite:k,declineInvite:E},b[28]=k,b[29]=E,b[30]=y):y=b[30],y})(r);b[4]!==S||b[5]!==k?(m=S&&k(S),b[4]=S,b[5]=k,b[6]=m):m=b[6];let R=!!m;return(b[7]!==R?(f=()=>{R&&x(!0)},v=[R],b[7]=R,b[8]=f,b[9]=v):(f=b[8],v=b[9]),(0,i.useEffect)(f,v),R)?(b[10]===Symbol.for("react.memo_cache_sentinel")?(g=()=>x(!1),b[10]=g):g=b[10],b[11]!==C.isPending||b[12]!==C.mutate||b[13]!==I.isPending||b[14]!==I.mutate||b[15]!==w?(y=(0,t.jsx)(h,{isOpen:w,closeDialog:g,onAccept:C.mutate,onDecline:I.mutate,isAccepting:C.isPending,isDeclining:I.isPending}),b[11]=C.isPending,b[12]=C.mutate,b[13]=I.isPending,b[14]=I.mutate,b[15]=w,b[16]=y):y=b[16],y):null};e.s(["AcceptInviteDialog",0,v],301019);var g=e.i(157633),y=e.i(485374),b=e.i(812423),_=e.i(389562);let T=e=>{let a,i,o,s,l,c=(0,n.c)(14),{className:u,onRaiseHand:d,onLowerHand:m,isHandRaised:f,isRaisePending:h,isLowerPending:v,isLoggedIn:T}=e,k=void 0!==h&&h,E=void 0!==v&&v,S=void 0===T||T,w=S?k?"Requesting...":E?"Cancelling...":f?"Cancel request":"Request to join":"Login to request to join",x=f?"text-livestream-green":"text-white";c[0]!==u||c[1]!==x?(a=(0,r.default)("flex cursor-pointer flex-col justify-center gap-1",x,u),c[0]=u,c[1]=x,c[2]=a):a=c[2];let C=!S||k||E?void 0:f?m:d,I=f?"text-livestream-green":"text-white";return c[3]!==I?(i=(0,r.default)(I),c[3]=I,c[4]=i):i=c[4],c[5]!==i?(o=(0,t.jsx)(g.IconHand5Finger,{size:b.ICON_SIZE,className:i}),c[5]=i,c[6]=o):o=c[6],c[7]!==a||c[8]!==C||c[9]!==o?(s=(0,t.jsx)("div",{className:a,onClick:C,children:o}),c[7]=a,c[8]=C,c[9]=o,c[10]=s):s=c[10],c[11]!==s||c[12]!==w?(l=(0,t.jsx)(y.Tooltip,{content:w,..._.DEFAULT_TOOLTIP_PROPS,children:s}),c[11]=s,c[12]=w,c[13]=l):l=c[13],l};var k=e.i(754219),E=e.i(877340),S=e.i(54567);let w=e=>{let r,a,u,m=(0,n.c)(15),{roomId:f,livestreamId:h,currentUserAddress:v,className:g}=e,{isParticipantHandRaised:y}=(0,o.useParticipantInteractionsStateContext)(),b=(0,d.useLivechatSocket)();m[0]!==h||m[1]!==f||m[2]!==b?(r={socket:b,roomId:f,livestreamId:h},m[0]=h,m[1]=f,m[2]=b,m[3]=r):r=m[3];let{raiseHand:_,lowerHand:w}=(e=>{let t,r,a,o,u,d,m,f,h,v,g,y,b,_,T,w,x=(0,n.c)(37);x[0]!==e?({socket:u,roomId:o,livestreamId:r,onSuccess:t,...a}=e,x[0]=e,x[1]=t,x[2]=r,x[3]=a,x[4]=o,x[5]=u):(t=x[1],r=x[2],a=x[3],o=x[4],u=x[5]);let{raiseHand:C,lowerHand:I}=(0,E.useLivechatSocketRaiseHandEmitters)(u);x[6]!==C||x[7]!==o?(d=async()=>{S.logger.debug("[useRaiseHand] Raising hand",{roomId:o});let e=await C(o);return S.logger.debug("[useRaiseHand] Received raise hand ack",{roomId:o,ack:e}),e},x[6]=C,x[7]=o,x[8]=d):d=x[8],x[9]!==t||x[10]!==r||x[11]!==o?(m=(e,n,a)=>{(0,c.trackViewerRaiseHand)({mint:o,livestreamId:String(r),context:l.STAGE_SOURCE_CONTEXTS.VIEWER_CONTROLS}),t?.(e,n,a)},x[9]=t,x[10]=r,x[11]=o,x[12]=m):m=x[12],x[13]!==a||x[14]!==d||x[15]!==m?(f={mutationFn:d,onSuccess:m,...a},x[13]=a,x[14]=d,x[15]=m,x[16]=f):f=x[16];let R=(0,s.useMutation)(f);x[17]!==R.error?(h=()=>{R.error&&k.toast.error("Failed to raise hand")},v=[R.error],x[17]=R.error,x[18]=h,x[19]=v):(h=x[18],v=x[19]),(0,i.useEffect)(h,v),x[20]!==I||x[21]!==o?(g=async()=>{S.logger.debug("[useRaiseHand] Lowering hand",{roomId:o});let e=await I(o);return S.logger.debug("[useRaiseHand] Received lower hand ack",{roomId:o,ack:e}),e},x[20]=I,x[21]=o,x[22]=g):g=x[22],x[23]!==t||x[24]!==r||x[25]!==o?(y=(e,n,a)=>{(0,c.trackViewerLowerHand)({mint:o,livestreamId:String(r),context:l.STAGE_SOURCE_CONTEXTS.VIEWER_CONTROLS}),t?.(e,n,a)},x[23]=t,x[24]=r,x[25]=o,x[26]=y):y=x[26],x[27]!==a||x[28]!==g||x[29]!==y?(b={mutationFn:g,onSuccess:y,...a},x[27]=a,x[28]=g,x[29]=y,x[30]=b):b=x[30];let P=(0,s.useMutation)(b);return x[31]!==P.error?(T=()=>{P.error&&k.toast.error("Failed to lower hand")},_=[P.error],x[31]=P.error,x[32]=_,x[33]=T):(_=x[32],T=x[33]),(0,i.useEffect)(T,_),x[34]!==P||x[35]!==R?(w={raiseHand:R,lowerHand:P},x[34]=P,x[35]=R,x[36]=w):w=x[36],w})(r),x=!!v;m[4]!==v||m[5]!==y?(a=v&&y(v),m[4]=v,m[5]=y,m[6]=a):a=m[6];let C=!!a;return m[7]!==g||m[8]!==C||m[9]!==x||m[10]!==w.isPending||m[11]!==w.mutate||m[12]!==_.isPending||m[13]!==_.mutate?(u=(0,t.jsx)(T,{className:g,onRaiseHand:_.mutate,onLowerHand:w.mutate,isHandRaised:C,isRaisePending:_.isPending,isLowerPending:w.isPending,isLoggedIn:x}),m[7]=g,m[8]=C,m[9]=x,m[10]=w.isPending,m[11]=w.mutate,m[12]=_.isPending,m[13]=_.mutate,m[14]=u):u=m[14],u};e.s(["RaiseHandButton",0,w],742386),e.s(["ViewerParticipationControls",0,e=>{let a,i,o,s,l,c=(0,n.c)(17),{roomId:u,livestreamId:d,currentUserAddress:m,isVisible:f,className:h,style:g}=e,y=void 0===f||f?"opacity-100":"pointer-events-none opacity-0";return c[0]!==h||c[1]!==y?(a=(0,r.default)("transition-opacity duration-300 ease-out",y,h),c[0]=h,c[1]=y,c[2]=a):a=c[2],c[3]!==m||c[4]!==d||c[5]!==u?(i=(0,t.jsx)(w,{roomId:u,livestreamId:d,currentUserAddress:m}),c[3]=m,c[4]=d,c[5]=u,c[6]=i):i=c[6],c[7]!==g||c[8]!==a||c[9]!==i?(o=(0,t.jsx)("div",{className:a,style:g,children:i}),c[7]=g,c[8]=a,c[9]=i,c[10]=o):o=c[10],c[11]!==d||c[12]!==u?(s=(0,t.jsx)(v,{roomId:u,livestreamId:d}),c[11]=d,c[12]=u,c[13]=s):s=c[13],c[14]!==o||c[15]!==s?(l=(0,t.jsxs)(t.Fragment,{children:[o,s]}),c[14]=o,c[15]=s,c[16]=l):l=c[16],l}],255080);var x=e.i(89085),C=e.i(188014);function I(e,t){let n=(0,C.safeParseParticipantMetadata)(e.participant),r=(0,C.safeParseParticipantMetadata)(t.participant);return n?.role===x.LivekitRole.HOST?-1:+(r?.role===x.LivekitRole.HOST)}function R(){return""}function P(e){return 0===e?"col-span-2 row-span-2":""}function N(e){return 0===e?"col-span-2 row-span-2":""}function A(e){return 0===e?"col-span-2 row-span-2":""}function L(e){return 0===e?"col-span-2 row-span-2":""}e.s(["useGridLayout",0,e=>{let t,r,a,i,o=(0,n.c)(11),{tracks:s}=e,l=s.length;o[0]!==s?(t=[...s].sort(I),o[0]=s,o[1]=t):t=o[1];let c=t,u=R;if(1===l)r="grid-cols-1 grid-rows-1";else if(2===l)r="grid-cols-2 grid-rows-1";else if(3===l)r="grid-cols-3 grid-rows-2",u=P;else if(4===l)r="grid-cols-2 grid-rows-2";else if(5===l)r="grid-cols-4 grid-rows-2",u=N;else if(6===l)r="grid-cols-3 grid-rows-2";else if(7===l)r="grid-cols-4 grid-rows-3",u=A;else if(8===l)r="grid-cols-4 grid-rows-3",u=L;else if(9===l)r="grid-cols-3 grid-rows-3";else if(l>9){let e;o[2]!==l?(e=Math.sqrt(l),o[2]=l,o[3]=e):e=o[3];let t=Math.min(4,Math.ceil(e));r=`grid-cols-${t}`,4===t&&l>9&&l<=12?r="grid-cols-4 grid-rows-3":4===t&&l>12&&l<=16&&(r="grid-cols-4 grid-rows-4")}else r="grid-cols-1 grid-rows-1";o[4]!==r||o[5]!==u?(a={classes:r,trackClassFn:u},o[4]=r,o[5]=u,o[6]=a):a=o[6];let d=a;return o[7]!==d.classes||o[8]!==d.trackClassFn||o[9]!==c?(i={sortedTracks:c,gridLayoutClasses:d.classes,trackClassFn:d.trackClassFn},o[7]=d.classes,o[8]=d.trackClassFn,o[9]=c,o[10]=i):i=o[10],i}],166078);var O=e.i(618832);e.s(["ParticipantTile",()=>O.P],223331);var M=e.i(249437);e.s(["useIsSpeaking",()=>M.H],814048);var D=e.i(93336),j=e.i(275762),U=e.i(953038),F=e.i(958507),H=e.i(325320),B=e.i(692948);e.s(["useStageParticipantActions",0,e=>{let t,r,a,i=(0,n.c)(11),{participant:o}=e,{mintId:s}=(0,H.useLivestreamContext)(),c=(0,j.useLivestream)(s),u=(0,F.useIsModerator)(),m=(0,d.useLivechatSocket)(),{isHost:f}=(0,B.useLivekitRole)();i[0]!==o?(t=(0,B.getParticipantRole)(o),i[0]=o,i[1]=t):t=i[1];let h=t,{localParticipant:v}=(0,D.useLocalParticipant)(),g=c?.id??0,y=o.identity===v.identity;i[2]!==s||i[3]!==m||i[4]!==g||i[5]!==y?(r={socket:m,livestreamId:g,roomId:s,context:l.STAGE_SOURCE_CONTEXTS.HOST_CONTROLS,isRemovingSelf:y},i[2]=s,i[3]=m,i[4]=g,i[5]=y,i[6]=r):r=i[6];let{mutate:b,isPending:_}=(0,U.useRemoveFromStage)(r),T=(f||u)&&h===x.LivekitRole.CO_HOST;return i[7]!==T||i[8]!==_||i[9]!==b?(a={removeFromStage:b,isRemoving:_,canRemove:T},i[7]=T,i[8]=_,i[9]=b,i[10]=a):a=i[10],a}],877767),e.s(["ScreenshareStopIcon",0,e=>{let r,a,i=(0,n.c)(4),{className:o,style:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M9 11.25L12 8.25L15 11.25M12 15.75V9.5M4.75 19.25H19.25C20.3546 19.25 21.25 18.3546 21.25 17.25V6.75C21.25 5.64543 20.3546 4.75 19.25 4.75H4.75C3.64543 4.75 2.75 5.64543 2.75 6.75V17.25C2.75 18.3546 3.64543 19.25 4.75 19.25Z",stroke:"#87EFAC",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),i[0]=r):r=i[0],i[1]!==o||i[2]!==s?(a=(0,t.jsx)("div",{className:o,style:s,children:r}),i[1]=o,i[2]=s,i[3]=a):a=i[3],a}],400280)},395963,e=>{"use strict";var t=e.i(942765),n=e.i(264458),r=e.i(281675);let a={info:"bg-blue-500 text-white",warning:"bg-yellow-600 text-white",danger:"bg-red-500 text-white",success:"bg-green-500 text-white",muted:"bg-gray-500 text-white"},i=(0,r.forwardRef)(({label:e,variant:r,className:i,onClick:o,...s},l)=>(0,t.jsx)("button",{ref:l,className:(0,n.default)(a[r||"info"],i,"rounded-[4px] px-[8px] py-[5px]","transition-opacity duration-200 hover:opacity-90"),onClick:o,...s,children:e}));i.displayName="Button",e.s(["Button",0,i])},792425,e=>{"use strict";var t=e.i(942765),n=e.i(483121);let r=(0,e.i(281675).forwardRef)(({className:e,width:r=24,height:a=24},i)=>(0,t.jsx)(n.Pin,{ref:i,className:e,width:r,height:a,strokeWidth:2}));r.displayName="PinIcon",e.s(["PinIcon",0,r])},121449,256786,480858,912128,529107,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(867013),a=e.i(395963),i=e.i(446152),o=e.i(713098);function s(){}e.s(["ConfirmRemoveDialogButton",0,e=>{let l,c,u,d,m,f,h=(0,n.c)(17),{onConfirm:v,disabled:g,loading:y,className:b,style:_}=e;h[0]!==g||h[1]!==y?(l=(0,t.jsx)(o.RemoveFromStageButton,{onClick:s,disabled:g,loading:y}),h[0]=g,h[1]=y,h[2]=l):l=h[2],h[3]!==b||h[4]!==_||h[5]!==l?(c=(0,t.jsx)("div",{className:b,style:_,children:l}),h[3]=b,h[4]=_,h[5]=l,h[6]=c):c=h[6],h[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)("div",{className:"mb-4 text-white",children:"Are you sure you want to remove this participant from stage?"}),h[7]=u):u=h[7];let T=y?"removing...":"confirm remove";return h[8]!==v?(d=e=>{e.stopPropagation(),v()},h[8]=v,h[9]=d):d=h[9],h[10]!==g||h[11]!==T||h[12]!==d?(m=(0,t.jsx)(r.Close,{asChild:!0,children:(0,t.jsx)(a.Button,{label:T,variant:"danger",className:"w-full",onClick:d,disabled:g})}),h[10]=g,h[11]=T,h[12]=d,h[13]=m):m=h[13],h[14]!==c||h[15]!==m?(f=(0,t.jsxs)(i.Dialog,{trigger:c,title:"Remove participant",children:[u,m]}),h[14]=c,h[15]=m,h[16]=f):f=h[16],f}],121449);var l=e.i(264458),c=e.i(281675);e.s(["OrientationVideoContainer",0,e=>{let r,a=(0,n.c)(9),{trackRef:i,className:o,children:s}=e,{isPortrait:u}=(e=>{let t,r,a,i=(0,n.c)(12);i[0]===Symbol.for("react.memo_cache_sentinel")?(t={isPortrait:!1},i[0]=t):t=i[0];let[o,s]=(0,c.useState)(t),l=e?.publication,u=l?.track;i[1]!==u?.elementInfos?.[0]||i[2]!==u?.lastDimensions||i[3]!==u?.prevStats||i[4]!==l?(r=()=>{if(!l)return void s({isPortrait:!1});let e=(()=>{let e=u?.elementInfos?.[0];if(e?._width&&e?._height)return{width:e._width,height:e._height};let t=u?.lastDimensions;if(t?.width&&t?.height)return t;let n=u?.prevStats;if(n?.frameWidth&&n?.frameHeight)return{width:n.frameWidth,height:n.frameHeight};let r=l?.dimensions;if(r?.width&&r?.height)return r})(),t=e?.width,n=e?.height;s({isPortrait:!!n&&!!t&&n>t,width:t,height:n})},i[1]=u?.elementInfos?.[0],i[2]=u?.lastDimensions,i[3]=u?.prevStats,i[4]=l,i[5]=r):r=i[5];let d=l?.dimensions,m=u?.prevStats,f=u?.lastDimensions,h=u?.elementInfos;return i[6]!==l||i[7]!==d||i[8]!==m||i[9]!==f||i[10]!==h?(a=[l,d,m,f,h],i[6]=l,i[7]=d,i[8]=m,i[9]=f,i[10]=h,i[11]=a):a=i[11],(0,c.useEffect)(r,a),o})(i);if(u){let e,n,r;return a[0]!==o?(e=(0,l.default)("flex aspect-video h-full w-full items-center justify-center bg-black",o),a[0]=o,a[1]=e):e=a[1],a[2]!==s?(n=(0,t.jsx)("div",{className:"aspect-[9/16] h-full",children:s}),a[2]=s,a[3]=n):n=a[3],a[4]!==e||a[5]!==n?(r=(0,t.jsx)("div",{className:e,children:n}),a[4]=e,a[5]=n,a[6]=r):r=a[6],r}return a[7]!==s?(r=(0,t.jsx)(t.Fragment,{children:s}),a[7]=s,a[8]=r):r=a[8],r}],256786);var u=e.i(188014),d=e.i(166037),m=e.i(826734),f=e.i(824255);let h=e=>{let r,a,i,o,s=(0,n.c)(8),{isMuted:c,className:u}=e;return s[0]!==u?(r=(0,l.default)("inline-flex shrink-0 items-center",u),s[0]=u,s[1]=r):r=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(a={zIndex:d.Z_INDEXES.ParticipantVideoTile.gradientOverlay+1},s[2]=a):a=s[2],s[3]!==c?(i=c?(0,t.jsx)(m.MicOffIcon,{className:"text-white",size:14}):(0,t.jsx)(f.MicOnIcon,{className:"text-white",size:14}),s[3]=c,s[4]=i):i=s[4],s[5]!==r||s[6]!==i?(o=(0,t.jsx)("div",{className:r,style:a,children:i}),s[5]=r,s[6]=i,s[7]=o):o=s[7],o};e.s(["ParticipantNameOverlay",0,e=>{let r,a,i,o,s=(0,n.c)(12),{participant:c,isScreensharing:d,className:m,style:f}=e,v=void 0!==d&&d,g=!c.isMicrophoneEnabled;s[0]!==v||s[1]!==c?(r=(0,u.getParticipantDisplayName)(c,v),s[0]=v,s[1]=c,s[2]=r):r=s[2];let y=r;return s[3]!==m?(a=(0,l.default)("flex items-center gap-1 truncate px-1 py-0.5 text-xs font-bold text-white",m),s[3]=m,s[4]=a):a=s[4],s[5]!==g?(i=(0,t.jsx)(h,{isMuted:g}),s[5]=g,s[6]=i):i=s[6],s[7]!==y||s[8]!==f||s[9]!==a||s[10]!==i?(o=(0,t.jsxs)("div",{className:a,style:f,children:[i,y]}),s[7]=y,s[8]=f,s[9]=a,s[10]=i,s[11]=o):o=s[11],o}],480858);var v=e.i(485374),g=e.i(389562),y=e.i(932874),b=e.i(414948),_=e.i(54567),T=e.i(692948),k=e.i(792425);let E=(0,e.i(376530).default)("pin-off",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]),S=(0,c.forwardRef)(({className:e,width:n=24,height:r=24},a)=>(0,t.jsx)(E,{ref:a,className:e,width:n,height:r,strokeWidth:2}));S.displayName="PinOffIcon",e.s(["PinControlButton",0,e=>{let r,a,i,o,s,c=(0,n.c)(15),{trackRef:u,className:d,style:m}=e;c[0]!==u?(r={trackRef:u},c[0]=u,c[1]=r):r=c[1];let{canPin:f,isPinned:h,isDisabled:E,tooltipContent:w,handlePinToggle:x}=(e=>{let t,r,a,i,o,s,l,c,u,d=(0,n.c)(43),{trackRef:m}=e,{isHost:f}=(0,T.useLivekitRole)(),{globalPins:h,addGlobalPin:v,removeGlobalPin:g,effectivePins:k,localPins:E,globalPinsToRemove:S,addLocalPin:w,removeLocalPin:x,locallyHideGlobalPin:C,locallyShowGlobalPin:I}=(0,b.useLivestreamFeaturesContext)();d[0]!==m?(t=(0,y.isTrackReference)(m)&&!!m.publication,d[0]=m,d[1]=t):t=d[1];let R=t,P=R?m.publication.trackSid:null;e:{let e;if(!P){r=!1;break e}if(d[2]!==P||d[3]!==h){let t;d[5]!==P?(t=e=>e.trackSid===P,d[5]=P,d[6]=t):t=d[6],e=h.some(t),d[2]=P,d[3]=h,d[4]=e}else e=d[4];r=e}let N=r;t:{let e;if(!P||f){a=!1;break t}if(d[7]!==P||d[8]!==E){let t;d[10]!==P?(t=e=>e.trackSid===P,d[10]=P,d[11]=t):t=d[11],e=E.some(t),d[7]=P,d[8]=E,d[9]=e}else e=d[9];a=e}let A=a;n:{let e;if(!P||f){i=!1;break n}d[12]!==P||d[13]!==S?(e=S.includes(P),d[12]=P,d[13]=S,d[14]=e):e=d[14],i=e}let L=i;r:{if(!R||!P){o=!1;break r}if(f)o=N;else{let e;if(d[15]!==P||d[16]!==k){let t;d[18]!==P?(t=e=>e.publication?.trackSid===P,d[18]=P,d[19]=t):t=d[19],e=k.some(t),d[15]=P,d[16]=k,d[17]=e}else e=d[17];o=e}}let O=o,M=!R;d[20]!==v||d[21]!==w||d[22]!==R||d[23]!==P||d[24]!==M||d[25]!==f||d[26]!==O||d[27]!==N||d[28]!==A||d[29]!==L||d[30]!==C||d[31]!==I||d[32]!==g||d[33]!==x||d[34]!==m?(s=()=>{!M&&P&&R?f?O?g(P):v(m):O?A?x(P):N&&!L&&C(P):(w(m),N&&L&&I(P)):_.logger.debug("[usePinAction] Pin toggle on disabled/unpinnable track",{isDisabled:M,currentTrackSid:P,canPinTrack:R})},d[20]=v,d[21]=w,d[22]=R,d[23]=P,d[24]=M,d[25]=f,d[26]=O,d[27]=N,d[28]=A,d[29]=L,d[30]=C,d[31]=I,d[32]=g,d[33]=x,d[34]=m,d[35]=s):s=d[35];let D=s;a:{if(f){l=O?"Unpin Globally":"Pin Globally";break a}l=O?"Unpin for Me":"Pin for Me"}let j=l;i:{if(!R){c="Cannot pin this item";break i}c=j}let U=c;return d[36]!==j||d[37]!==R||d[38]!==D||d[39]!==M||d[40]!==O||d[41]!==U?(u={canPin:R,isPinned:O,isDisabled:M,buttonLabel:j,tooltipContent:U,handlePinToggle:D},d[36]=j,d[37]=R,d[38]=D,d[39]=M,d[40]=O,d[41]=U,d[42]=u):u=d[42],u})(r);if(!f)return null;let C=E?"cursor-not-allowed opacity-50":"cursor-pointer";c[2]!==d||c[3]!==C?(a=(0,l.default)("text-white",C,d),c[2]=d,c[3]=C,c[4]=a):a=c[4];let I=E?void 0:x;return c[5]!==h?(i=h?(0,t.jsx)(S,{className:"h-4 w-4"}):(0,t.jsx)(k.PinIcon,{className:"h-4 w-4"}),c[5]=h,c[6]=i):i=c[6],c[7]!==m||c[8]!==a||c[9]!==I||c[10]!==i?(o=(0,t.jsx)("div",{className:a,style:m,onClick:I,children:i}),c[7]=m,c[8]=a,c[9]=I,c[10]=i,c[11]=o):o=c[11],c[12]!==o||c[13]!==w?(s=(0,t.jsx)(v.Tooltip,{content:w,...g.DEFAULT_TOOLTIP_PROPS,children:o}),c[12]=o,c[13]=w,c[14]=s):s=c[14],s}],912128),e.s(["SpeakingIndicator",0,()=>{let e,r=(0,n.c)(1);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"absolute bottom-1 right-1",style:{zIndex:d.Z_INDEXES.ParticipantVideoTile.gradientOverlay+1},children:(0,t.jsx)("img",{src:"/livestreams/speaking.gif",className:"w-8",alt:"Speaking indicator"})}),r[0]=e):e=r[0],e}],529107)},725940,273094,e=>{"use strict";var t=e.i(942765),n=e.i(649785),r=e.i(198584),a=e.i(655703),i=e.i(264458),o=e.i(484169),s=e.i(281675),l=e.i(167949),c=e.i(480085),u=e.i(939079),d=e.i(731190),m=e.i(653201),f=e.i(166037),h=e.i(162786),v=e.i(692948),g=e.i(532002),y=e.i(275762),b=e.i(126143),_=e.i(325320),T=e.i(414948),k=e.i(26454),E=e.i(188014),S=e.i(295595),w=e.i(486775),x=e.i(733633),C=e.i(255080),I=e.i(166078),R=e.i(223331),P=e.i(814048),N=e.i(877767),A=e.i(400280),L=e.i(121449),O=e.i(256786),M=e.i(480858),D=e.i(912128),j=e.i(529107),U=e.i(89623),F=e.i(419157),H=e.i(895581),B=e.i(396693);let V=()=>{let e,r=(0,n.c)(1);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(H.ParticipantPlaceholderIcon,{width:60}),r[0]=e):e=r[0],e},q=e=>{let r,a,o,s=(0,n.c)(9),{participant:l,size:c}=e,u="big"===c?70:42,d=(0,E.safeParseParticipantMetadata)(l)?.avatar_image||B.PEPE_PLACEHOLDER,m=(0,P.useIsSpeaking)(l)?"border-livestream-green/70":"border-transparent";return s[0]!==m?(r=(0,i.default)("w-fit rounded-full border-4 p-1 transition-colors duration-300 ease-in-out",m),s[0]=m,s[1]=r):r=s[1],s[2]!==d||s[3]!==u||s[4]!==l.identity?(a=(0,t.jsx)(U.Avatar,{src:d,alt:l.identity,size:u,className:"aspect-square overflow-hidden rounded-full border border-livestream-muted/30 bg-black"}),s[2]=d,s[3]=u,s[4]=l.identity,s[5]=a):a=s[5],s[6]!==r||s[7]!==a?(o=(0,t.jsx)("div",{className:r,children:a}),s[6]=r,s[7]=a,s[8]=o):o=s[8],o},G=e=>{let r,a,o,s,l,c=(0,n.c)(12),{className:u,participant:d,size:m,showSpeakingIndicator:f,isConnectingToRoom:h,isHostReconnecting:v}=e,g=void 0===m?"small":m,y=void 0===f||f,b=h?"Connecting to room":v?"Hang tight! The host will be back shortly":void 0;c[0]!==d||c[1]!==y||c[2]!==g?(r=d?(0,t.jsx)(q,{participant:d,size:g,showSpeakingIndicator:y}):(0,t.jsx)(V,{}),c[0]=d,c[1]=y,c[2]=g,c[3]=r):r=c[3];let _=r;c[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(F.PumpPillLoader,{}),c[4]=a):a=c[4],c[5]!==b?(o=(0,t.jsxs)("div",{className:"flex items-center",children:[a,(0,t.jsx)("p",{className:"ml-3",children:b})]}),c[5]=b,c[6]=o):o=c[6];let T=o;c[7]!==u?(s=(0,i.default)(u,"flex h-full w-full items-center justify-center bg-livestream-dark-gray text-white"),c[7]=u,c[8]=s):s=c[8];let k=b?T:_;return c[9]!==s||c[10]!==k?(l=(0,t.jsx)("div",{className:s,children:k}),c[9]=s,c[10]=k,c[11]=l):l=c[11],l},z=()=>{let e,r=(0,n.c)(1);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"absolute inset-x-0 top-0 h-[33px] bg-gradient-to-b from-black to-transparent opacity-0 transition-opacity duration-300 ease-in-out group-hover/main:opacity-100 group-hover/tile:opacity-100"}),(0,t.jsx)("div",{className:"absolute inset-x-0 bottom-0 h-[33px] bg-gradient-to-t from-black to-transparent opacity-70 transition-opacity duration-300 ease-in-out group-hover/main:opacity-100 group-hover/tile:opacity-100"})]}),r[0]=e):e=r[0],e},$=e=>{let r,a,o,s,l,c,u,d,m,h,v,y,b,_,T,k=(0,n.c)(44),{participant:S,trackRef:w,isCurrentlySharingScreen:x,isHostCameraOverlay:C,showPinButton:I,showGradient:U,isOnMainVideoView:F,showParticipantName:H,className:B,totalTrackCount:V}=e,q=void 0===U||U,$=void 0!==F&&F,W=void 0===H||H,K=(0,P.useIsSpeaking)(S);k[0]!==S?(r={participant:S},k[0]=S,k[1]=r):r=k[1];let{canRemove:Q,isRemoving:Y,removeFromStage:X}=(0,N.useStageParticipantActions)(r);k[2]!==w?(a=(0,E.isTrackActive)(w),k[2]=w,k[3]=a):a=k[3];let J=a,Z=(0,g.useIsRecording)(),ee=w&&!(void 0!==C&&C)&&(void 0===I||I)&&!Z,et=K&&(void 0===V||V>1),en=x&&"border-livestream-green/70";return k[4]!==B||k[5]!==en?(o=(0,i.default)("group/tile relative overflow-hidden rounded-[4px]",en,B),k[4]=B,k[5]=en,k[6]=o):o=k[6],k[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.default)("relative h-full overflow-hidden rounded-[4px] bg-neutral-700","max-h-full max-w-full"),k[7]=s):s=k[7],k[8]!==$||k[9]!==S||k[10]!==J||k[11]!==w?(l=J&&w?(0,t.jsx)(O.OrientationVideoContainer,{trackRef:w,children:(0,t.jsx)(R.ParticipantTile,{trackRef:w,className:(0,i.default)("!h-full !w-full [&_.lk-connection-quality]:hidden [&_.lk-participant-metadata]:hidden","[&_.lk-participant-placeholder]:z-20")})}):(0,t.jsx)(G,{participant:S,size:$?"big":"small"}),k[8]=$,k[9]=S,k[10]=J,k[11]=w,k[12]=l):l=k[12],k[13]===Symbol.for("react.memo_cache_sentinel")?(c={zIndex:f.Z_INDEXES.Controls.top+1},k[13]=c):c=k[13],k[14]!==x?(u=x&&(0,t.jsx)(A.ScreenshareStopIcon,{}),k[14]=x,k[15]=u):u=k[15],k[16]!==ee||k[17]!==w?(d=ee&&(0,t.jsx)(D.PinControlButton,{trackRef:w}),k[16]=ee,k[17]=w,k[18]=d):d=k[18],k[19]!==S||k[20]!==W?(m=W&&(0,t.jsx)(M.ParticipantNameOverlay,{participant:S}),k[19]=S,k[20]=W,k[21]=m):m=k[21],k[22]!==u||k[23]!==d||k[24]!==m?(h=(0,t.jsxs)("div",{className:"absolute left-[6px] top-[6px] hidden flex-row items-center gap-2 group-hover/main:flex group-hover/tile:flex",style:c,children:[u,d,m]}),k[22]=u,k[23]=d,k[24]=m,k[25]=h):h=k[25],k[26]!==Q||k[27]!==Y||k[28]!==S||k[29]!==X?(v=Q&&(0,t.jsx)(L.ConfirmRemoveDialogButton,{onConfirm:()=>X(S.identity),disabled:Y,loading:Y,className:"absolute right-[6px] top-[6px] hidden group-hover/main:block group-hover/tile:block",style:{zIndex:f.Z_INDEXES.Controls.top+1}}),k[26]=Q,k[27]=Y,k[28]=S,k[29]=X,k[30]=v):v=k[30],k[31]!==et?(y=et&&(0,t.jsx)(j.SpeakingIndicator,{}),k[31]=et,k[32]=y):y=k[32],k[33]!==q?(b=q&&(0,t.jsx)(z,{}),k[33]=q,k[34]=b):b=k[34],k[35]!==l||k[36]!==h||k[37]!==v||k[38]!==y||k[39]!==b?(_=(0,t.jsx)("div",{className:s,children:(0,t.jsxs)("div",{className:"absolute inset-0",children:[l,h,v,y,b]})}),k[35]=l,k[36]=h,k[37]=v,k[38]=y,k[39]=b,k[40]=_):_=k[40],k[41]!==_||k[42]!==o?(T=(0,t.jsx)("div",{className:o,children:_}),k[41]=_,k[42]=o,k[43]=T):T=k[43],T};e.s(["ParticipantVideoTile",0,$],273094);let W=e=>{let r,a,s,l,c=(0,n.c)(16),{tracks:u,totalTrackCount:d}=e;c[0]!==u?(r={tracks:u},c[0]=u,c[1]=r):r=c[1];let{gridLayoutClasses:m,trackClassFn:f,sortedTracks:h}=(0,I.useGridLayout)(r);if(0===h.length)return null;let v=d?d>1:h.length>1;if(c[2]!==m?(a=(0,i.default)("grid h-full w-full overflow-hidden","gap-1",m),c[2]=m,c[3]=a):a=c[3],c[4]!==v||c[5]!==h||c[6]!==d||c[7]!==f){let e;c[9]!==v||c[10]!==d||c[11]!==f?(e=(e,n)=>(0,t.jsx)("div",{className:(0,i.default)("flex h-full w-full items-center justify-center",f(n)),children:(0,t.jsx)($,{participant:e.participant,trackRef:e,isCurrentlySharingScreen:e.source===o.Track.Source.ScreenShare,showPinButton:v,showGradient:!1,isOnMainVideoView:!0,className:"h-full w-full",totalTrackCount:d})},e.publication?.trackSid??`${e.participant.identity}-${e.source}`),c[9]=v,c[10]=d,c[11]=f,c[12]=e):e=c[12],s=h.map(e),c[4]=v,c[5]=h,c[6]=d,c[7]=f,c[8]=s}else s=c[8];return c[13]!==a||c[14]!==s?(l=(0,t.jsx)("div",{className:a,children:s}),c[13]=a,c[14]=s,c[15]=l):l=c[15],l};e.s(["MainVideoView",0,e=>{let I,R,P,N,A,L,O,M,D,j,U,F,H,B=(0,n.c)(66),{mainStageTracks:V,cameraOverlayTrack:q,isScreensharingActive:z,shouldShowMainPin:K,onConnectionStateChange:Q,totalTrackCount:Y,loaderType:X}=e,J=void 0===K||K,Z=(0,r.useRoomContext)(),{address:ee}=(0,a.useProfile)(),{isMobile:et,showControls:en,token:er,showParticipants:ea,showParticipantName:ei,mintId:eo}=(0,_.useLivestreamContext)(),{fullScreen:es,allowParticipantControls:el,showViewerParticipationControls:ec,showHostRaiseHandIndicator:eu}=(0,T.useLivestreamFeaturesContext)(),{isHost:ed,isViewer:em}=(0,v.useLivekitRole)(),{shouldShowHostCameraOverlay:ep,isMainPublisherInRoom:ef}=(0,b.useLivestreamRoomState)(),[eh,ev]=(0,s.useState)(!1),{value:eg,setTrue:ey,setFalse:eb}=(0,h.useBoolean)(!1),e_=(0,g.useIsRecording)(),eT=!es&&!et,ek=eg&&!em,eE=V.length>0?V[0]:null;B[0]!==q?(I=(0,E.isTrackActive)(q),B[0]=q,B[1]=I):I=B[1];let eS=I;B[2]!==ee||B[3]!==eo?(R=(0,k.selectIsRoomModerator)(eo,ee),B[2]=ee,B[3]=eo,B[4]=R):R=B[4];let ew=(0,k.useRoomModeratorsStore)(R),ex=(0,y.useLivestream)(eo),eC=ex?.id??0;B[5]!==Q||B[6]!==Z.state?(P=()=>{Q?.(Z.state??o.ConnectionState.Disconnected)},N=[Z.state,Q],B[5]=Q,B[6]=Z.state,B[7]=P,B[8]=N):(P=B[7],N=B[8]),(0,s.useEffect)(P,N);let eI=V.length>1?"bg-black p-1":"bg-livestream-dark-gray",eR=eT&&"rounded-[8px]";return B[9]!==eI||B[10]!==eR?(A=(0,i.default)("group/main relative flex aspect-video w-full justify-center @container",eI,eR),B[9]=eI,B[10]=eR,B[11]=A):A=B[11],B[12]!==ef||B[13]!==eT||B[14]!==z||B[15]!==X||B[16]!==V||B[17]!==eE||B[18]!==Z.state||B[19]!==J||B[20]!==ei||B[21]!==Y?(L=0===V.length?"progress-bar"===X?(0,t.jsx)(c.PlayerLoader,{loaderType:X}):(0,t.jsx)(G,{size:"big",participant:void 0,isConnectingToRoom:Z.state===o.ConnectionState.Connecting||Z.state===o.ConnectionState.Reconnecting,isHostReconnecting:!ef}):1===V.length&&eE?(0,t.jsx)($,{participant:eE.participant,trackRef:eE,isCurrentlySharingScreen:eE.source===o.Track.Source.ScreenShare,showPinButton:J,showGradient:!1,showParticipantName:ei,className:(0,i.default)("h-full w-full",eT&&"rounded-[8px]",z&&eE.source===o.Track.Source.ScreenShare&&"border-2 border-livestream-green"),isOnMainVideoView:!0,totalTrackCount:Y}):V.length>1?(0,t.jsx)(W,{tracks:V,totalTrackCount:Y}):null,B[12]=ef,B[13]=eT,B[14]=z,B[15]=X,B[16]=V,B[17]=eE,B[18]=Z.state,B[19]=J,B[20]=ei,B[21]=Y,B[22]=L):L=B[22],B[23]!==q||B[24]!==es||B[25]!==eS||B[26]!==ep||B[27]!==ek?(O=q&&ep&&eS&&(0,t.jsx)("div",{className:(0,i.default)("absolute left-3","aspect-video h-20 w-auto sm:h-24","overflow-hidden rounded",{"bottom-12 sm:bottom-16":ek||es,"bottom-3":!ek}),style:{zIndex:f.Z_INDEXES.MainVideoView.screenshareVideoTile},children:(0,t.jsx)($,{participant:q.participant,trackRef:q,isCurrentlySharingScreen:!1,isHostCameraOverlay:ep,showPinButton:!1,showGradient:!0,className:"h-full w-full"})}),B[23]=q,B[24]=es,B[25]=eS,B[26]=ep,B[27]=ek,B[28]=O):O=B[28],B[29]!==el||B[30]!==eg||B[31]!==en||B[32]!==er?(M=en&&el&&(0,t.jsx)(x.ParticipantControls,{isBackstage:!er,isHovering:eg,onForceShowControlsChange:ev}),B[29]=el,B[30]=eg,B[31]=en,B[32]=er,B[33]=M):M=B[33],B[34]!==e_||B[35]!==en||B[36]!==ea?(D=!en&&ea&&(0,t.jsxs)("div",{className:"absolute right-[10px] top-[10px]",style:{zIndex:f.Z_INDEXES.LiveKitRoom.noControlsLiveIndicator},children:[(0,t.jsx)(d.LiveIndicator,{live:!0,className:(0,i.default)(e_&&"hidden")}),!e_&&(0,t.jsx)(m.LiveKitParticipantsCount,{})]}),B[34]=e_,B[35]=en,B[36]=ea,B[37]=D):D=B[37],B[38]!==ee||B[39]!==eh||B[40]!==eg||B[41]!==em||B[42]!==eC||B[43]!==eo||B[44]!==ep||B[45]!==ec?(j=em&&ec&&(0,t.jsx)(C.ViewerParticipationControls,{roomId:eo,livestreamId:eC,currentUserAddress:ee,isVisible:eg||eh,style:{zIndex:f.Z_INDEXES.Controls.bottom+1},className:(0,i.default)("absolute left-2",{"bottom-2":!ep,"bottom-28":ep})}),B[38]=ee,B[39]=eh,B[40]=eg,B[41]=em,B[42]=eC,B[43]=eo,B[44]=ep,B[45]=ec,B[46]=j):j=B[46],B[47]!==ed||B[48]!==ew||B[49]!==eC||B[50]!==eo||B[51]!==ep||B[52]!==ek||B[53]!==eu?(U=ed&&(0,t.jsxs)("div",{className:(0,i.default)("absolute left-3 flex flex-col gap-2",{"bottom-4":!ep&&!ek,"bottom-16":!ep&&ek,"bottom-28":ep&&!ek,"bottom-40":ep&&ek}),style:{zIndex:f.Z_INDEXES.Controls.bottom+1},children:[(ew||eu)&&(0,t.jsx)(u.HostRaiseHandIndicator,{livestreamId:eC,roomId:eo}),(0,t.jsx)(w.HostScreenShareRequestIndicator,{})]}),B[47]=ed,B[48]=ew,B[49]=eC,B[50]=eo,B[51]=ep,B[52]=ek,B[53]=eu,B[54]=U):U=B[54],B[55]===Symbol.for("react.memo_cache_sentinel")?(F=(0,t.jsx)(S.LivestreamDialog,{}),B[55]=F):F=B[55],B[56]!==eb||B[57]!==ey||B[58]!==O||B[59]!==M||B[60]!==D||B[61]!==j||B[62]!==U||B[63]!==A||B[64]!==L?(H=(0,t.jsxs)(l.DraggableBoundary,{"data-testid":"main-video-view",className:A,onMouseEnter:ey,onMouseLeave:eb,children:[L,O,M,D,j,U,F]}),B[56]=eb,B[57]=ey,B[58]=O,B[59]=M,B[60]=D,B[61]=j,B[62]=U,B[63]=A,B[64]=L,B[65]=H):H=B[65],H}],725940)}]);