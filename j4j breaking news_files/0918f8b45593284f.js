(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,999856,e=>{"use strict";var t=e.i(790037),i=e.i(95457);function r(){(0,t.c)("[nuqs] Aborting queues"),i.t.abortAll(),i.n.abort().forEach(e=>i.t.queuedQuerySync.emit(e))}var s=e.i(281675),n=e.i(463578);let a=0;function o(){a=0,r()}function c(){--a<=0&&(a=0,queueMicrotask(r))}function l(){return(0,s.useEffect)(()=>(!function(){var e;if(e="next/app","undefined"==typeof history||(history.nuqs?.version&&"2.8.6"!==history.nuqs.version?(console.error((0,t.s)(409),history.nuqs.version,"2.8.6",e),!0):!!history.nuqs?.adapters?.includes(e)))return;let i=history.replaceState,r=history.pushState;history.replaceState=function(e,t,r){return c(),i.call(history,e,t,r)},history.pushState=function(e,t,i){return c(),r.call(history,e,t,i)},history.nuqs=history.nuqs??{version:"2.8.6",adapters:[]},history.nuqs.adapters.push("next/app")}(),window.addEventListener("popstate",o),()=>window.removeEventListener("popstate",o)),[]),null}let h=(0,t.n)(function(){let e=(0,n.useRouter)(),[i,r]=(0,s.useOptimistic)((0,n.useSearchParams)());return{searchParams:i,updateUrl:(0,s.useCallback)((i,n)=>{(0,s.startTransition)(()=>{n.shallow||r(i);let s=function(e){let{origin:i,pathname:r,hash:s}=location;return i+r+(0,t.o)(e)+s}(i);(0,t.c)("[nuqs next/app] Updating url: %s",s);let o="push"===n.history?history.pushState:history.replaceState;a=3,o.call(history,null,"",s),n.scroll&&window.scrollTo(0,0),n.shallow||e.replace(s,{scroll:!1})})},[]),rateLimitFactor:3,autoResetQueueOnUpdate:!1}});function u({children:e,...t}){return(0,s.createElement)(h,{...t,children:[(0,s.createElement)(s.Suspense,{key:"nuqs-adapter-suspense-navspy",children:(0,s.createElement)(l)}),e]})}e.s(["NuqsAdapter",()=>u],999856)},468139,e=>{"use strict";var t=e.i(942765),i=e.i(649785),r=e.i(281675),s=e.i(79472);let n=(0,r.createContext)({});e.s(["JurisdictionProvider",0,e=>{let r,a,o=(0,i.c)(5),{children:c}=e,l=(0,s.useIsAllDisabled)(),h=(0,s.useIsDisabledFeaturesLoading)()?void 0:!l;return o[0]!==h?(r={isAllowed:h},o[0]=h,o[1]=r):r=o[1],o[2]!==c||o[3]!==r?(a=(0,t.jsx)(n.Provider,{value:r,children:c}),o[2]=c,o[3]=r,o[4]=a):a=o[4],a},"useJurisdiction",0,()=>(0,r.useContext)(n)])},997696,e=>{"use strict";let t,i,r,s;var n,a,o,c,l,h,u=e.i(171580),d=e.i(942765),p=e.i(649785),g=e.i(401998),f=e.i(655703),y=e.i(281675),w=e.i(549825),m=e.i(338871),M=e.i(468139);let N=e=>{let t,i,r,s=(0,p.c)(6),{children:n}=e,{toggleChat:a}=(0,m.default)(),o=(0,M.useJurisdiction)();if(void 0===o.isAllowed||o.isAllowed){let e;return s[0]!==n?(e=(0,d.jsx)(d.Fragment,{children:n}),s[0]=n,s[1]=e):e=s[1],e}return s[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("h1",{className:"mb-4 text-2xl font-bold text-white",children:"Restricted jurisdiction"}),(0,d.jsx)("p",{className:"text-gray-400",children:"Our systems have identified that you are in the United Kingdom. In accordance with the laws and regulations of the United Kingdom, this site is currently unavailable to users in the United Kingdom. If you have coins deposited in the privy wallet, please follow this link that will allow you to withdraw your coins."})]}),s[2]=t):t=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,d.jsx)(w.Button,{isFullWidth:!0,onClick:v,size:40,variant:"accent",children:"Access Privy wallet"}),s[3]=i):i=s[3],s[4]!==a?(r=(0,d.jsx)("div",{className:"flex h-screen w-full items-center justify-center overflow-y-hidden",children:(0,d.jsx)("div",{className:"flex h-[300px] items-center justify-center",children:(0,d.jsx)("div",{className:"h-8/12 flex w-8/12 items-center rounded-lg border border-white",children:(0,d.jsxs)("div",{className:"flex max-w-lg flex-col gap-4 px-4 py-8 text-center",children:[t,(0,d.jsxs)("div",{className:"flex flex-col gap-4",children:[i,(0,d.jsx)(w.Button,{isFullWidth:!0,onClick:a,size:40,variant:"ghost",children:"Contact support"})]})]})})})}),s[4]=a,s[5]=r):r=s[5],r};function v(){window.location.href="https://privy-wallet.pump.fun"}var I={scriptHostname:("u">typeof u.default?u.default.env.NEXT_PUBLIC_VERCEL_TOOLBAR_HOST:void 0)??"https://vercel.live",ownerId:"u">typeof u.default?u.default.env.NEXT_PUBLIC_VERCEL_TOOLBAR_OWNER_ID:void 0,projectId:"u">typeof u.default?u.default.env.NEXT_PUBLIC_VERCEL_TOOLBAR_PROJECT_ID:void 0,branch:"u">typeof u.default?u.default.env.NEXT_PUBLIC_VERCEL_TOOLBAR_BRANCH:void 0,deploymentId:"u">typeof u.default?"dpl_F2uRygUHHE1x2UVsHNHAT1V7MWiZ":void 0},b=e.i(432791),E={scriptHostname:("u">typeof u.default?u.default.env.NEXT_PUBLIC_VERCEL_TOOLBAR_HOST:void 0)??"https://vercel.live",ownerId:"u">typeof u.default?u.default.env.NEXT_PUBLIC_VERCEL_TOOLBAR_OWNER_ID:void 0,projectId:"u">typeof u.default?u.default.env.NEXT_PUBLIC_VERCEL_TOOLBAR_PROJECT_ID:void 0,branch:"u">typeof u.default?u.default.env.NEXT_PUBLIC_VERCEL_TOOLBAR_BRANCH:void 0,deploymentId:"u">typeof u.default?"dpl_F2uRygUHHE1x2UVsHNHAT1V7MWiZ":void 0},A=!1;function D({shouldMount:e,nonce:t}){return(0,y.useEffect)(()=>(e&&A&&function(e={}){if(typeof window>"u"||null===document.querySelector("vercel-live-feedback")){Object.assign(E,e);let t=document.createElement("script");for(let[i,r]of(t.src=`${E.scriptHostname}/_next-live/feedback/feedback.js`,t.setAttribute("data-explicit-opt-in","true"),e.nonce&&t.setAttribute("nonce",e.nonce),Object.entries((E.ownerId&&E.projectId?{"data-owner-id":E.ownerId,"data-project-id":E.projectId,"data-branch":h??E.branch}:E.deploymentId?{"data-deployment-id":E.deploymentId}:void 0)??{})))r&&t.setAttribute(i,r);(document.head||document.documentElement).appendChild(t)}}({nonce:t}),A=!0,()=>{(typeof window>"u"?void 0:window.__vercel_toolbar)?.unmount()}),[]),null}function C(e){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(b.default,{strategy:"afterInteractive",...e,...I.ownerId&&I.projectId?{"data-owner-id":I.ownerId,"data-project-id":I.projectId,"data-branch":l??I.branch}:I.deploymentId?{"data-deployment-id":I.deploymentId}:void 0,id:"vercel-toolbar",src:`${I.scriptHostname}/_next-live/feedback/feedback.js`,"data-explicit-opt-in":"true"}),(0,d.jsx)(D,{shouldMount:!0,nonce:e.nonce})]})}["1","true"].includes(u.default.env.NEXT_PUBLIC_VERCEL_TOOLBAR_INJECT_IN_DEVELOPMENT??"");var T=e.i(454120);function j(){let e,t=(0,p.c)(3),{isRole:i}=(0,T.useIsRole)("admin"),{isRole:r}=(0,T.useIsRole)("superadmin"),s=i||r;return t[1]!==s?(e=s?(0,d.jsx)(C,{}):null,t[1]=s,t[2]=e):e=t[2],e}var _=e.i(711774),S=e.i(690877),O=e.i(463578),x=e.i(79472);let z={livestreams:!1,all:!1},L=async()=>{let e=await fetch(`${(0,_.getClientServerUrl)()}/auth/disabled-features`);if(!e.ok)throw Error(`Failed to fetch disabled features: ${e.status}`);return e.json()};var P=e.i(877590),k=e.i(426091);function U(e,t){return function(){return e.apply(t,arguments)}}let{toString:R}=Object.prototype,{getPrototypeOf:Y}=Object,{iterator:Q,toStringTag:B}=Symbol,q=(t=Object.create(null),e=>{let i=R.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())}),W=e=>(e=e.toLowerCase(),t=>q(t)===e),K=e=>t=>typeof t===e,{isArray:H}=Array,$=K("undefined");function V(e){return null!==e&&!$(e)&&null!==e.constructor&&!$(e.constructor)&&Z(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let G=W("ArrayBuffer"),F=K("string"),Z=K("function"),J=K("number"),X=e=>null!==e&&"object"==typeof e,ee=e=>{if("object"!==q(e))return!1;let t=Y(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(B in e)&&!(Q in e)},et=W("Date"),ei=W("File"),er=W("Blob"),es=W("FileList"),en=W("URLSearchParams"),[ea,eo,ec,el]=["ReadableStream","Request","Response","Headers"].map(W);function eh(e,t,{allOwnKeys:i=!1}={}){let r,s;if(null!=e)if("object"!=typeof e&&(e=[e]),H(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{let s;if(V(e))return;let n=i?Object.getOwnPropertyNames(e):Object.keys(e),a=n.length;for(r=0;r<a;r++)s=n[r],t.call(null,e[s],s,e)}}function eu(e,t){let i;if(V(e))return null;t=t.toLowerCase();let r=Object.keys(e),s=r.length;for(;s-- >0;)if(t===(i=r[s]).toLowerCase())return i;return null}let ed="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g,ep=e=>!$(e)&&e!==ed,eg=(i="undefined"!=typeof Uint8Array&&Y(Uint8Array),e=>i&&e instanceof i),ef=W("HTMLFormElement"),ey=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),ew=W("RegExp"),em=(e,t)=>{let i=Object.getOwnPropertyDescriptors(e),r={};eh(i,(i,s)=>{let n;!1!==(n=t(i,s,e))&&(r[s]=n||i)}),Object.defineProperties(e,r)},eM=W("AsyncFunction"),eN=(n="function"==typeof setImmediate,a=Z(ed.postMessage),n?setImmediate:a?(o=`axios@${Math.random()}`,c=[],ed.addEventListener("message",({source:e,data:t})=>{e===ed&&t===o&&c.length&&c.shift()()},!1),e=>{c.push(e),ed.postMessage(o,"*")}):e=>setTimeout(e)),ev="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ed):void 0!==u.default&&u.default.nextTick||eN,eI={isArray:H,isArrayBuffer:G,isBuffer:V,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Z(e.append)&&("formdata"===(t=q(e))||"object"===t&&Z(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&G(e.buffer)},isString:F,isNumber:J,isBoolean:e=>!0===e||!1===e,isObject:X,isPlainObject:ee,isEmptyObject:e=>{if(!X(e)||V(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:ea,isRequest:eo,isResponse:ec,isHeaders:el,isUndefined:$,isDate:et,isFile:ei,isBlob:er,isRegExp:ew,isFunction:Z,isStream:e=>X(e)&&Z(e.pipe),isURLSearchParams:en,isTypedArray:eg,isFileList:es,forEach:eh,merge:function e(){let{caseless:t,skipUndefined:i}=ep(this)&&this||{},r={},s=(s,n)=>{let a=t&&eu(r,n)||n;ee(r[a])&&ee(s)?r[a]=e(r[a],s):ee(s)?r[a]=e({},s):H(s)?r[a]=s.slice():i&&$(s)||(r[a]=s)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&eh(arguments[e],s);return r},extend:(e,t,i,{allOwnKeys:r}={})=>(eh(t,(t,r)=>{i&&Z(t)?e[r]=U(t,i):e[r]=t},{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,r)=>{let s,n,a,o={};if(t=t||{},null==e)return t;do{for(n=(s=Object.getOwnPropertyNames(e)).length;n-- >0;)a=s[n],(!r||r(a,e,t))&&!o[a]&&(t[a]=e[a],o[a]=!0);e=!1!==i&&Y(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype)return t},kindOf:q,kindOfTest:W,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;let r=e.indexOf(t,i);return -1!==r&&r===i},toArray:e=>{if(!e)return null;if(H(e))return e;let t=e.length;if(!J(t))return null;let i=Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{let i,r=(e&&e[Q]).call(e);for(;(i=r.next())&&!i.done;){let r=i.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let i,r=[];for(;null!==(i=e.exec(t));)r.push(i);return r},isHTMLForm:ef,hasOwnProperty:ey,hasOwnProp:ey,reduceDescriptors:em,freezeMethods:e=>{em(e,(t,i)=>{if(Z(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;if(Z(e[i])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},toObjectSet:(e,t)=>{let i={};return(H(e)?e:String(e).split(t)).forEach(e=>{i[e]=!0}),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,i){return t.toUpperCase()+i}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t,findKey:eu,global:ed,isContextDefined:ep,isSpecCompliantForm:function(e){return!!(e&&Z(e.append)&&"FormData"===e[B]&&e[Q])},toJSONObject:e=>{let t=Array(10),i=(e,r)=>{if(X(e)){if(t.indexOf(e)>=0)return;if(V(e))return e;if(!("toJSON"in e)){t[r]=e;let s=H(e)?[]:{};return eh(e,(e,t)=>{let n=i(e,r+1);$(n)||(s[t]=n)}),t[r]=void 0,s}}return e};return i(e,0)},isAsyncFn:eM,isThenable:e=>e&&(X(e)||Z(e))&&Z(e.then)&&Z(e.catch),setImmediate:eN,asap:ev,isIterable:e=>null!=e&&Z(e[Q])};var eb=e.i(579759);function eE(e,t,i,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}eI.inherits(eE,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:eI.toJSONObject(this.config),code:this.code,status:this.status}}});let eA=eE.prototype,eD={};function eC(e){return eI.isPlainObject(e)||eI.isArray(e)}function eT(e){return eI.endsWith(e,"[]")?e.slice(0,-2):e}function ej(e,t,i){return e?e.concat(t).map(function(e,t){return e=eT(e),!i&&t?"["+e+"]":e}).join(i?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{eD[e]={value:e}}),Object.defineProperties(eE,eD),Object.defineProperty(eA,"isAxiosError",{value:!0}),eE.from=(e,t,i,r,s,n)=>{let a=Object.create(eA);eI.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);let o=e&&e.message?e.message:"Error",c=null==t&&e?e.code:t;return eE.call(a,o,c,i,r,s),e&&null==a.cause&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",n&&Object.assign(a,n),a};let e_=eI.toFlatObject(eI,{},null,function(e){return/^is[A-Z]/.test(e)}),eS=function(e,t,i){if(!eI.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let r=(i=eI.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!eI.isUndefined(t[e])})).metaTokens,s=i.visitor||l,n=i.dots,a=i.indexes,o=(i.Blob||"undefined"!=typeof Blob&&Blob)&&eI.isSpecCompliantForm(t);if(!eI.isFunction(s))throw TypeError("visitor must be a function");function c(e){if(null===e)return"";if(eI.isDate(e))return e.toISOString();if(eI.isBoolean(e))return e.toString();if(!o&&eI.isBlob(e))throw new eE("Blob is not supported. Use a Buffer instead.");return eI.isArrayBuffer(e)||eI.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):eb.Buffer.from(e):e}function l(e,i,s){let o=e;if(e&&!s&&"object"==typeof e)if(eI.endsWith(i,"{}"))i=r?i:i.slice(0,-2),e=JSON.stringify(e);else{var l;if(eI.isArray(e)&&(l=e,eI.isArray(l)&&!l.some(eC))||(eI.isFileList(e)||eI.endsWith(i,"[]"))&&(o=eI.toArray(e)))return i=eT(i),o.forEach(function(e,r){eI.isUndefined(e)||null===e||t.append(!0===a?ej([i],r,n):null===a?i:i+"[]",c(e))}),!1}return!!eC(e)||(t.append(ej(s,i,n),c(e)),!1)}let h=[],u=Object.assign(e_,{defaultVisitor:l,convertValue:c,isVisitable:eC});if(!eI.isObject(e))throw TypeError("data must be an object");return!function e(i,r){if(!eI.isUndefined(i)){if(-1!==h.indexOf(i))throw Error("Circular reference detected in "+r.join("."));h.push(i),eI.forEach(i,function(i,n){!0===(!(eI.isUndefined(i)||null===i)&&s.call(t,i,eI.isString(n)?n.trim():n,r,u))&&e(i,r?r.concat(n):[n])}),h.pop()}}(e),t};function eO(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ex(e,t){this._pairs=[],e&&eS(e,this,t)}let ez=ex.prototype;function eL(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function eP(e,t,i){let r;if(!t)return e;let s=i&&i.encode||eL;eI.isFunction(i)&&(i={serialize:i});let n=i&&i.serialize;if(r=n?n(t,i):eI.isURLSearchParams(t)?t.toString():new ex(t,i).toString(s)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}ez.append=function(e,t){this._pairs.push([e,t])},ez.toString=function(e){let t=e?function(t){return e.call(this,t,eO)}:eO;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};let ek=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){eI.forEach(this.handlers,function(t){null!==t&&e(t)})}},eU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eR="undefined"!=typeof URLSearchParams?URLSearchParams:ex,eY="undefined"!=typeof FormData?FormData:null,eQ="undefined"!=typeof Blob?Blob:null,eB="undefined"!=typeof window&&"undefined"!=typeof document,eq="object"==typeof navigator&&navigator||void 0,eW=eB&&(!eq||0>["ReactNative","NativeScript","NS"].indexOf(eq.product)),eK="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,eH=eB&&window.location.href||"http://localhost";e.s(["hasBrowserEnv",()=>eB,"hasStandardBrowserEnv",()=>eW,"hasStandardBrowserWebWorkerEnv",()=>eK,"navigator",()=>eq,"origin",()=>eH],52597);let e$={...e.i(52597),isBrowser:!0,classes:{URLSearchParams:eR,FormData:eY,Blob:eQ},protocols:["http","https","file","blob","url","data"]},eV=function(e){if(eI.isFormData(e)&&eI.isFunction(e.entries)){let t={};return eI.forEachEntry(e,(e,i)=>{!function e(t,i,r,s){let n=t[s++];if("__proto__"===n)return!0;let a=Number.isFinite(+n),o=s>=t.length;return(n=!n&&eI.isArray(r)?r.length:n,o)?eI.hasOwnProp(r,n)?r[n]=[r[n],i]:r[n]=i:(r[n]&&eI.isObject(r[n])||(r[n]=[]),e(t,i,r[n],s)&&eI.isArray(r[n])&&(r[n]=function(e){let t,i,r={},s=Object.keys(e),n=s.length;for(t=0;t<n;t++)r[i=s[t]]=e[i];return r}(r[n]))),!a}(eI.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),i,t,0)}),t}return null},eG={transitional:eU,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let i,r=t.getContentType()||"",s=r.indexOf("application/json")>-1,n=eI.isObject(e);if(n&&eI.isHTMLForm(e)&&(e=new FormData(e)),eI.isFormData(e))return s?JSON.stringify(eV(e)):e;if(eI.isArrayBuffer(e)||eI.isBuffer(e)||eI.isStream(e)||eI.isFile(e)||eI.isBlob(e)||eI.isReadableStream(e))return e;if(eI.isArrayBufferView(e))return e.buffer;if(eI.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1){var a,o;return(a=e,o=this.formSerializer,eS(a,new e$.classes.URLSearchParams,{visitor:function(e,t,i,r){return e$.isNode&&eI.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...o})).toString()}if((i=eI.isFileList(e))||r.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return eS(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}if(n||s){t.setContentType("application/json",!1);var c=e;if(eI.isString(c))try{return(0,JSON.parse)(c),eI.trim(c)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(c)}return e}],transformResponse:[function(e){let t=this.transitional||eG.transitional,i=t&&t.forcedJSONParsing,r="json"===this.responseType;if(eI.isResponse(e)||eI.isReadableStream(e))return e;if(e&&eI.isString(e)&&(i&&!this.responseType||r)){let i=t&&t.silentJSONParsing;try{return JSON.parse(e,this.parseReviver)}catch(e){if(!i&&r){if("SyntaxError"===e.name)throw eE.from(e,eE.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:e$.classes.FormData,Blob:e$.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};eI.forEach(["delete","get","head","post","put","patch"],e=>{eG.headers[e]={}});let eF=eI.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eZ=Symbol("internals");function eJ(e){return e&&String(e).trim().toLowerCase()}function eX(e){return!1===e||null==e?e:eI.isArray(e)?e.map(eX):String(e)}function e0(e,t,i,r,s){if(eI.isFunction(r))return r.call(this,t,i);if(s&&(t=i),eI.isString(t)){if(eI.isString(r))return -1!==t.indexOf(r);if(eI.isRegExp(r))return r.test(t)}}class e1{constructor(e){e&&this.set(e)}set(e,t,i){let r=this;function s(e,t,i){let s=eJ(t);if(!s)throw Error("header name must be a non-empty string");let n=eI.findKey(r,s);n&&void 0!==r[n]&&!0!==i&&(void 0!==i||!1===r[n])||(r[n||t]=eX(e))}let n=(e,t)=>eI.forEach(e,(e,i)=>s(e,i,t));if(eI.isPlainObject(e)||e instanceof this.constructor)n(e,t);else{let r;if(eI.isString(e)&&(e=e.trim())&&(r=e,!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim()))){var a;let i,r,s,o;n((o={},(a=e)&&a.split("\n").forEach(function(e){s=e.indexOf(":"),i=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!i||o[i]&&eF[i]||("set-cookie"===i?o[i]?o[i].push(r):o[i]=[r]:o[i]=o[i]?o[i]+", "+r:r)}),o),t)}else if(eI.isObject(e)&&eI.isIterable(e)){let i={},r,s;for(let t of e){if(!eI.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[s=t[0]]=(r=i[s])?eI.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}n(i,t)}else null!=e&&s(t,e,i)}return this}get(e,t){if(e=eJ(e)){let i=eI.findKey(this,e);if(i){let e=this[i];if(!t)return e;if(!0===t){let t,i=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=r.exec(e);)i[t[1]]=t[2];return i}if(eI.isFunction(t))return t.call(this,e,i);if(eI.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=eJ(e)){let i=eI.findKey(this,e);return!!(i&&void 0!==this[i]&&(!t||e0(this,this[i],i,t)))}return!1}delete(e,t){let i=this,r=!1;function s(e){if(e=eJ(e)){let s=eI.findKey(i,e);s&&(!t||e0(i,i[s],s,t))&&(delete i[s],r=!0)}}return eI.isArray(e)?e.forEach(s):s(e),r}clear(e){let t=Object.keys(this),i=t.length,r=!1;for(;i--;){let s=t[i];(!e||e0(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){let t=this,i={};return eI.forEach(this,(r,s)=>{let n=eI.findKey(i,s);if(n){t[n]=eX(r),delete t[s];return}let a=e?s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i):String(s).trim();a!==s&&delete t[s],t[a]=eX(r),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return eI.forEach(this,(i,r)=>{null!=i&&!1!==i&&(t[r]=e&&eI.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let i=new this(e);return t.forEach(e=>i.set(e)),i}static accessor(e){let t=(this[eZ]=this[eZ]={accessors:{}}).accessors,i=this.prototype;function r(e){let r=eJ(e);if(!t[r]){let s;s=eI.toCamelCase(" "+e),["get","set","has"].forEach(t=>{Object.defineProperty(i,t+s,{value:function(i,r,s){return this[t].call(this,e,i,r,s)},configurable:!0})}),t[r]=!0}}return eI.isArray(e)?e.forEach(r):r(e),this}}function e4(e,t){let i=this||eG,r=t||i,s=e1.from(r.headers),n=r.data;return eI.forEach(e,function(e){n=e.call(i,n,s.normalize(),t?t.status:void 0)}),s.normalize(),n}function e2(e){return!!(e&&e.__CANCEL__)}function e3(e,t,i){eE.call(this,null==e?"canceled":e,eE.ERR_CANCELED,t,i),this.name="CanceledError"}function e5(e,t,i){let r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):t(new eE("Request failed with status code "+i.status,[eE.ERR_BAD_REQUEST,eE.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}e1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),eI.reduceDescriptors(e1.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[i]=e}}}),eI.freezeMethods(e1),eI.inherits(e3,eE,{__CANCEL__:!0});let e8=function(e,t){let i,r=Array(e=e||10),s=Array(e),n=0,a=0;return t=void 0!==t?t:1e3,function(o){let c=Date.now(),l=s[a];i||(i=c),r[n]=o,s[n]=c;let h=a,u=0;for(;h!==n;)u+=r[h++],h%=e;if((n=(n+1)%e)===a&&(a=(a+1)%e),c-i<t)return;let d=l&&c-l;return d?Math.round(1e3*u/d):void 0}},e6=function(e,t){let i,r,s=0,n=1e3/t,a=(t,n=Date.now())=>{s=n,i=null,r&&(clearTimeout(r),r=null),e(...t)};return[(...e)=>{let t=Date.now(),o=t-s;o>=n?a(e,t):(i=e,r||(r=setTimeout(()=>{r=null,a(i)},n-o)))},()=>i&&a(i)]},e9=(e,t,i=3)=>{let r=0,s=e8(50,250);return e6(i=>{let n=i.loaded,a=i.lengthComputable?i.total:void 0,o=n-r,c=s(o);r=n,e({loaded:n,total:a,progress:a?n/a:void 0,bytes:o,rate:c||void 0,estimated:c&&a&&n<=a?(a-n)/c:void 0,event:i,lengthComputable:null!=a,[t?"download":"upload"]:!0})},i)},e7=(e,t)=>{let i=null!=e;return[r=>t[0]({lengthComputable:i,total:e,loaded:r}),t[1]]},te=e=>(...t)=>eI.asap(()=>e(...t)),tt=e$.hasStandardBrowserEnv?(r=new URL(e$.origin),s=e$.navigator&&/(msie|trident)/i.test(e$.navigator.userAgent),e=>(e=new URL(e,e$.origin),r.protocol===e.protocol&&r.host===e.host&&(s||r.port===e.port))):()=>!0,ti=e$.hasStandardBrowserEnv?{write(e,t,i,r,s,n,a){if("undefined"==typeof document)return;let o=[`${e}=${encodeURIComponent(t)}`];eI.isNumber(i)&&o.push(`expires=${new Date(i).toUTCString()}`),eI.isString(r)&&o.push(`path=${r}`),eI.isString(s)&&o.push(`domain=${s}`),!0===n&&o.push("secure"),eI.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(e){if("undefined"==typeof document)return null;let t=document.cookie.match(RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function tr(e,t,i){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||!1==i)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}let ts=e=>e instanceof e1?{...e}:e;function tn(e,t){t=t||{};let i={};function r(e,t,i,r){return eI.isPlainObject(e)&&eI.isPlainObject(t)?eI.merge.call({caseless:r},e,t):eI.isPlainObject(t)?eI.merge({},t):eI.isArray(t)?t.slice():t}function s(e,t,i,s){return eI.isUndefined(t)?eI.isUndefined(e)?void 0:r(void 0,e,i,s):r(e,t,i,s)}function n(e,t){if(!eI.isUndefined(t))return r(void 0,t)}function a(e,t){return eI.isUndefined(t)?eI.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(i,s,n){return n in t?r(i,s):n in e?r(void 0,i):void 0}let c={url:n,method:n,data:n,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,i)=>s(ts(e),ts(t),i,!0)};return eI.forEach(Object.keys({...e,...t}),function(r){let n=c[r]||s,a=n(e[r],t[r],r);eI.isUndefined(a)&&n!==o||(i[r]=a)}),i}let ta=e=>{let t=tn({},e),{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:n,headers:a,auth:o}=t;if(t.headers=a=e1.from(a),t.url=eP(tr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),eI.isFormData(i)){if(e$.hasStandardBrowserEnv||e$.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(eI.isFunction(i.getHeaders)){let e=i.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,i])=>{t.includes(e.toLowerCase())&&a.set(e,i)})}}if(e$.hasStandardBrowserEnv&&(r&&eI.isFunction(r)&&(r=r(t)),r||!1!==r&&tt(t.url))){let e=s&&n&&ti.read(n);e&&a.set(s,e)}return t},to="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,i){var r;let s,n,a,o,c,l,h=ta(e),u=h.data,d=e1.from(h.headers).normalize(),{responseType:p,onUploadProgress:g,onDownloadProgress:f}=h;function y(){o&&o(),c&&c(),h.cancelToken&&h.cancelToken.unsubscribe(s),h.signal&&h.signal.removeEventListener("abort",s)}let w=new XMLHttpRequest;function m(){if(!w)return;let r=e1.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders());e5(function(e){t(e),y()},function(e){i(e),y()},{data:p&&"text"!==p&&"json"!==p?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:r,config:e,request:w}),w=null}w.open(h.method.toUpperCase(),h.url,!0),w.timeout=h.timeout,"onloadend"in w?w.onloadend=m:w.onreadystatechange=function(){!w||4!==w.readyState||(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(m)},w.onabort=function(){w&&(i(new eE("Request aborted",eE.ECONNABORTED,e,w)),w=null)},w.onerror=function(t){let r=new eE(t&&t.message?t.message:"Network Error",eE.ERR_NETWORK,e,w);r.event=t||null,i(r),w=null},w.ontimeout=function(){let t=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",r=h.transitional||eU;h.timeoutErrorMessage&&(t=h.timeoutErrorMessage),i(new eE(t,r.clarifyTimeoutError?eE.ETIMEDOUT:eE.ECONNABORTED,e,w)),w=null},void 0===u&&d.setContentType(null),"setRequestHeader"in w&&eI.forEach(d.toJSON(),function(e,t){w.setRequestHeader(t,e)}),eI.isUndefined(h.withCredentials)||(w.withCredentials=!!h.withCredentials),p&&"json"!==p&&(w.responseType=h.responseType),f&&([a,c]=e9(f,!0),w.addEventListener("progress",a)),g&&w.upload&&([n,o]=e9(g),w.upload.addEventListener("progress",n),w.upload.addEventListener("loadend",o)),(h.cancelToken||h.signal)&&(s=t=>{w&&(i(!t||t.type?new e3(null,e,w):t),w.abort(),w=null)},h.cancelToken&&h.cancelToken.subscribe(s),h.signal&&(h.signal.aborted?s():h.signal.addEventListener("abort",s)));let M=(r=h.url,(l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r))&&l[1]||"");M&&-1===e$.protocols.indexOf(M)?i(new eE("Unsupported protocol "+M+":",eE.ERR_BAD_REQUEST,e)):w.send(u||null)})},tc=function*(e,t){let i,r=e.byteLength;if(!t||r<t)return void(yield e);let s=0;for(;s<r;)i=s+t,yield e.slice(s,i),s=i},tl=async function*(e,t){for await(let i of th(e))yield*tc(i,t)},th=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},tu=(e,t,i,r)=>{let s,n=tl(e,t),a=0,o=e=>{!s&&(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{let{done:t,value:r}=await n.next();if(t){o(),e.close();return}let s=r.byteLength;if(i){let e=a+=s;i(e)}e.enqueue(new Uint8Array(r))}catch(e){throw o(e),e}},cancel:e=>(o(e),n.return())},{highWaterMark:2})},{isFunction:td}=eI,tp=(({Request:e,Response:t})=>({Request:e,Response:t}))(eI.global),{ReadableStream:tg,TextEncoder:tf}=eI.global,ty=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},tw=e=>{let t,{fetch:i,Request:r,Response:s}=e=eI.merge.call({skipUndefined:!0},tp,e),n=i?td(i):"function"==typeof fetch,a=td(r),o=td(s);if(!n)return!1;let c=n&&td(tg),l=n&&("function"==typeof tf?(t=new tf,e=>t.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer())),h=a&&c&&ty(()=>{let e=!1,t=new r(e$.origin,{body:new tg,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=o&&c&&ty(()=>eI.isReadableStream(new s("").body)),d={stream:u&&(e=>e.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{d[e]||(d[e]=(t,i)=>{let r=t&&t[e];if(r)return r.call(t);throw new eE(`Response type '${e}' is not supported`,eE.ERR_NOT_SUPPORT,i)})});let p=async e=>{if(null==e)return 0;if(eI.isBlob(e))return e.size;if(eI.isSpecCompliantForm(e)){let t=new r(e$.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return eI.isArrayBufferView(e)||eI.isArrayBuffer(e)?e.byteLength:(eI.isURLSearchParams(e)&&(e+=""),eI.isString(e))?(await l(e)).byteLength:void 0},g=async(e,t)=>{let i=eI.toFiniteNumber(e.getContentLength());return null==i?p(t):i};return async e=>{let t,{url:n,method:o,data:c,signal:l,cancelToken:p,timeout:f,onDownloadProgress:y,onUploadProgress:w,responseType:m,headers:M,withCredentials:N="same-origin",fetchOptions:v}=ta(e),I=i||fetch;m=m?(m+"").toLowerCase():"text";let b=((e,t)=>{let{length:i}=e=e?e.filter(Boolean):[];if(t||i){let i,r=new AbortController,s=function(e){if(!i){i=!0,a();let t=e instanceof Error?e:this.reason;r.abort(t instanceof eE?t:new e3(t instanceof Error?t.message:t))}},n=t&&setTimeout(()=>{n=null,s(new eE(`timeout ${t} of ms exceeded`,eE.ETIMEDOUT))},t),a=()=>{e&&(n&&clearTimeout(n),n=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));let{signal:o}=r;return o.unsubscribe=()=>eI.asap(a),o}})([l,p&&p.toAbortSignal()],f),E=null,A=b&&b.unsubscribe&&(()=>{b.unsubscribe()});try{if(w&&h&&"get"!==o&&"head"!==o&&0!==(t=await g(M,c))){let e,i=new r(n,{method:"POST",body:c,duplex:"half"});if(eI.isFormData(c)&&(e=i.headers.get("content-type"))&&M.setContentType(e),i.body){let[e,r]=e7(t,e9(te(w)));c=tu(i.body,65536,e,r)}}eI.isString(N)||(N=N?"include":"omit");let i=a&&"credentials"in r.prototype,l={...v,signal:b,method:o.toUpperCase(),headers:M.normalize().toJSON(),body:c,duplex:"half",credentials:i?N:void 0};E=a&&new r(n,l);let p=await (a?I(E,v):I(n,l)),f=u&&("stream"===m||"response"===m);if(u&&(y||f&&A)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=p[t]});let t=eI.toFiniteNumber(p.headers.get("content-length")),[i,r]=y&&e7(t,e9(te(y),!0))||[];p=new s(tu(p.body,65536,i,()=>{r&&r(),A&&A()}),e)}m=m||"text";let D=await d[eI.findKey(d,m)||"text"](p,e);return!f&&A&&A(),await new Promise((t,i)=>{e5(t,i,{data:D,headers:e1.from(p.headers),status:p.status,statusText:p.statusText,config:e,request:E})})}catch(t){if(A&&A(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new eE("Network Error",eE.ERR_NETWORK,e,E),{cause:t.cause||t});throw eE.from(t,t&&t.code,e,E)}}},tm=new Map,tM=e=>{let t=e&&e.env||{},{fetch:i,Request:r,Response:s}=t,n=[r,s,i],a=n.length,o,c,l=tm;for(;a--;)o=n[a],void 0===(c=l.get(o))&&l.set(o,c=a?new Map:tw(t)),l=c;return c};tM();let tN={http:null,xhr:to,fetch:{get:tM}};eI.forEach(tN,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let tv=e=>`- ${e}`,tI=e=>eI.isFunction(e)||null===e||!1===e,tb=function(e,t){let i,r,{length:s}=e=eI.isArray(e)?e:[e],n={};for(let a=0;a<s;a++){let s;if(r=i=e[a],!tI(i)&&void 0===(r=tN[(s=String(i)).toLowerCase()]))throw new eE(`Unknown adapter '${s}'`);if(r&&(eI.isFunction(r)||(r=r.get(t))))break;n[s||"#"+a]=r}if(!r){let e=Object.entries(n).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new eE("There is no suitable adapter to dispatch the request "+(s?e.length>1?"since :\n"+e.map(tv).join("\n"):" "+tv(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function tE(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new e3(null,e)}function tA(e){return tE(e),e.headers=e1.from(e.headers),e.data=e4.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),tb(e.adapter||eG.adapter,e)(e).then(function(t){return tE(e),t.data=e4.call(e,e.transformResponse,t),t.headers=e1.from(t.headers),t},function(t){return!e2(t)&&(tE(e),t&&t.response&&(t.response.data=e4.call(e,e.transformResponse,t.response),t.response.headers=e1.from(t.response.headers))),Promise.reject(t)})}let tD="1.13.2",tC={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{tC[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});let tT={};tC.transitional=function(e,t,i){function r(e,t){return"[Axios v"+tD+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,s,n)=>{if(!1===e)throw new eE(r(s," has been removed"+(t?" in "+t:"")),eE.ERR_DEPRECATED);return t&&!tT[s]&&(tT[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,s,n)}},tC.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};let tj=function(e,t,i){if("object"!=typeof e)throw new eE("options must be an object",eE.ERR_BAD_OPTION_VALUE);let r=Object.keys(e),s=r.length;for(;s-- >0;){let n=r[s],a=t[n];if(a){let t=e[n],i=void 0===t||a(t,n,e);if(!0!==i)throw new eE("option "+n+" must be "+i,eE.ERR_BAD_OPTION_VALUE);continue}if(!0!==i)throw new eE("Unknown option "+n,eE.ERR_BAD_OPTION)}};class t_{constructor(e){this.defaults=e||{},this.interceptors={request:new ek,response:new ek}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let i=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?i&&!String(e.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+i):e.stack=i}catch(e){}}throw e}}_request(e,t){let i,r;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:s,paramsSerializer:n,headers:a}=t=tn(this.defaults,t);void 0!==s&&tj(s,{silentJSONParsing:tC.transitional(tC.boolean),forcedJSONParsing:tC.transitional(tC.boolean),clarifyTimeoutError:tC.transitional(tC.boolean)},!1),null!=n&&(eI.isFunction(n)?t.paramsSerializer={serialize:n}:tj(n,{encode:tC.function,serialize:tC.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),tj(t,{baseUrl:tC.spelling("baseURL"),withXsrfToken:tC.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&eI.merge(a.common,a[t.method]);a&&eI.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=e1.concat(o,a);let c=[],l=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(l=l&&e.synchronous,c.unshift(e.fulfilled,e.rejected))});let h=[];this.interceptors.response.forEach(function(e){h.push(e.fulfilled,e.rejected)});let u=0;if(!l){let e=[tA.bind(this),void 0];for(e.unshift(...c),e.push(...h),r=e.length,i=Promise.resolve(t);u<r;)i=i.then(e[u++],e[u++]);return i}r=c.length;let d=t;for(;u<r;){let e=c[u++],t=c[u++];try{d=e(d)}catch(e){t.call(this,e);break}}try{i=tA.call(this,d)}catch(e){return Promise.reject(e)}for(u=0,r=h.length;u<r;)i=i.then(h[u++],h[u++]);return i}getUri(e){return eP(tr((e=tn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}eI.forEach(["delete","get","head","options"],function(e){t_.prototype[e]=function(t,i){return this.request(tn(i||{},{method:e,url:t,data:(i||{}).data}))}}),eI.forEach(["post","put","patch"],function(e){function t(t){return function(i,r,s){return this.request(tn(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:r}))}}t_.prototype[e]=t(),t_.prototype[e+"Form"]=t(!0)});class tS{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});const i=this;this.promise.then(e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null}),this.promise.then=e=>{let t,r=new Promise(e=>{i.subscribe(e),t=e}).then(e);return r.cancel=function(){i.unsubscribe(t)},r},e(function(e,r,s){i.reason||(i.reason=new e3(e,r,s),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new tS(function(t){e=t}),cancel:e}}}let tO={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(tO).forEach(([e,t])=>{tO[t]=e});let tx=function e(t){let i=new t_(t),r=U(t_.prototype.request,i);return eI.extend(r,t_.prototype,i,{allOwnKeys:!0}),eI.extend(r,i,null,{allOwnKeys:!0}),r.create=function(i){return e(tn(t,i))},r}(eG);tx.Axios=t_,tx.CanceledError=e3,tx.CancelToken=tS,tx.isCancel=e2,tx.VERSION=tD,tx.toFormData=eS,tx.AxiosError=eE,tx.Cancel=tx.CanceledError,tx.all=function(e){return Promise.all(e)},tx.spread=function(e){return function(t){return e.apply(null,t)}},tx.isAxiosError=function(e){return eI.isObject(e)&&!0===e.isAxiosError},tx.mergeConfig=tn,tx.AxiosHeaders=e1,tx.formToJSON=e=>eV(eI.isHTMLForm(e)?new FormData(e):e),tx.getAdapter=tb,tx.HttpStatusCode=tO,tx.default=tx;var tz=e.i(686815);let tL=["email","google_oauth","twitter_oauth"];function tP(e){return tL.includes(e.type)}var tk=e.i(523367);let tU=Object.freeze({GENERAL:"general",UNKNOWN:"unknown-page",PROFILE_PAGE:"profile-page",CHAT_PAGE:"chat-page",HOME_PAGE:"home-page",COIN_PAGE:"coin-page",BOARD_PAGE:"board-page",ADVANCED_PAGE:"advanced-page",ADVANCED_LEGACY_PAGE:"advanced-legacy-page",LINK_PAGE:"link-page",CREATE_PAGE:"create-page",SEARCH_PAGE:"search-page",REPORT_PAGE:"report-page",TERMS_PAGE:"terms-page",PRIVACY_POLICY_PAGE:"privacy-policy-page",FEES_PAGE:"fees-page",MODERATION_MESSAGE_PAGE:"moderation-message-page",DOCS_PAGE:"docs-page"}),tR=e=>e?"/"===e?tU.HOME_PAGE:e.startsWith("/coin/")?tU.COIN_PAGE:e.startsWith("/board")?tU.BOARD_PAGE:e.startsWith("/advanced")?tU.ADVANCED_PAGE:e.startsWith("/advanced-legacy")?tU.ADVANCED_LEGACY_PAGE:e.startsWith("/link/")?tU.LINK_PAGE:"/create"===e?tU.CREATE_PAGE:e.startsWith("/s")?tU.SEARCH_PAGE:e.startsWith("/report/")?tU.REPORT_PAGE:e.startsWith("/profile/")?tU.PROFILE_PAGE:e.startsWith("/chat/")?tU.CHAT_PAGE:"/docs/terms-and-conditions"===e?tU.TERMS_PAGE:"/docs/privacy-policy"===e?tU.PRIVACY_POLICY_PAGE:"/docs/fees"===e?tU.FEES_PAGE:"/docs/moderation-message"===e?tU.MODERATION_MESSAGE_PAGE:e.startsWith("/docs/")?tU.DOCS_PAGE:tU.GENERAL:tU.UNKNOWN,tY=y.default.createContext({hmacToken:null,isLoading:!1,error:null,refetchHmacToken:async()=>{},trackPage:()=>{}}),tQ=e=>{let t,i,r=(0,p.c)(6),{user:s,hmacToken:n,appId:a}=e,o=(0,O.usePathname)();return r[0]!==a||r[1]!==n||r[2]!==o||r[3]!==s?(t=()=>{if(s&&s.userId&&n&&a){let e=tR(o),t={app_id:a,user_id:s.userId,email:s.email,name:s.name,user_hash:n,address:s.address,"Device Type":s["Device Type"],browser:s.browser,"Wallet Type":s["Wallet Type"],currentPage:o,pageName:e,hide_default_launcher:!0};(0,P.boot)(t)}},i=[s,n,o,a],r[0]=a,r[1]=n,r[2]=o,r[3]=s,r[4]=t,r[5]=i):(t=r[4],i=r[5]),(0,y.useEffect)(t,i),null},tB=e=>{let t,i,r,s,n,a,o,c,l,h,u,g,w=(0,p.c)(33),{children:m,appId:M,autoBootEnabled:N}=e,v=void 0!==N&&N,{wallet:I,shouldUsePrivy:b}=(0,f.useProfile)(),{user:E}=(0,tk.useUser)(),A=function(){let e,t=(0,p.c)(2),{user:i}=(0,tz.usePrivy)();i?.linkedAccounts;e:{let r;t[0]!==i?.linkedAccounts?(r=i?.linkedAccounts.find(tP),t[0]=i?.linkedAccounts,t[1]=r):r=t[1];let s=r;if(s?.type==="email"){e=s.address;break e}if(s?.type==="google_oauth"){e=s.email;break e}e=void 0}return e}(),D=(0,O.usePathname)(),[C,T]=(0,y.useState)("desktop"),[j,S]=(0,y.useState)("");w[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{T(window.matchMedia("(max-width: 768px)").matches?"mobile":"desktop"),S(window.navigator.userAgent)},i=[],w[0]=t,w[1]=i):(t=w[0],i=w[1]),(0,y.useEffect)(t,i),w[2]!==j||w[3]!==C||w[4]!==A||w[5]!==b||w[6]!==E?.username||w[7]!==I?(r=I&&I.publicKey?{userId:I.publicKey.toBase58(),email:A,name:E?.username,address:I.publicKey.toBase58(),"Device Type":C,browser:j,"Wallet Type":b?"privy":(0,k.getWalletName)()||"unknown"}:void 0,w[2]=j,w[3]=C,w[4]=A,w[5]=b,w[6]=E?.username,w[7]=I,w[8]=r):r=w[8];let x=r;w[9]!==I?.publicKey?(s=I?.publicKey.toBase58(),w[9]=I?.publicKey,w[10]=s):s=w[10],w[11]!==s?(n={address:s},w[11]=s,w[12]=n):n=w[12];let{hmacToken:z,isLoading:L,error:U,refetch:R}=(({address:e})=>{let[t,i]=(0,y.useState)(null),[r,s]=(0,y.useState)(!1),[n,a]=(0,y.useState)(null),o=(0,y.useCallback)(async()=>{if(!e)return;s(!0),a(null);let t=(0,_.getClientServerUrl)(),r=`${t}/intercom/hmac?platform=web`;try{let e=await tx.get(r,{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});i(e.data.hmac_token)}catch(t){let e=t instanceof Error?t.message:"Unknown error";a(Error(`Failed to fetch HMAC token: ${e}`))}finally{s(!1)}},[e]);return(0,y.useEffect)(()=>{o()},[o]),{hmacToken:t,isLoading:r,error:n,refetch:o}})(n),Y=tq;return w[13]!==D?(a=()=>{D&&Y(D)},o=[D,Y],w[13]=D,w[14]=a,w[15]=o):(a=w[14],o=w[15]),(0,y.useEffect)(a,o),w[16]!==M||w[17]!==v?(l=()=>{M&&v&&(0,P.default)({app_id:M,hide_default_launcher:!0})},c=[M,v],w[16]=M,w[17]=v,w[18]=c,w[19]=l):(c=w[18],l=w[19]),(0,y.useEffect)(l,c),w[20]!==U||w[21]!==z||w[22]!==L||w[23]!==R?(h={hmacToken:z,isLoading:L,error:U,refetchHmacToken:R,trackPage:Y},w[20]=U,w[21]=z,w[22]=L,w[23]=R,w[24]=h):h=w[24],w[25]!==M||w[26]!==z||w[27]!==x?(u=(0,d.jsx)(tQ,{user:x,hmacToken:z,appId:M}),w[25]=M,w[26]=z,w[27]=x,w[28]=u):u=w[28],w[29]!==m||w[30]!==h||w[31]!==u?(g=(0,d.jsxs)(tY.Provider,{value:h,children:[u,m]}),w[29]=m,w[30]=h,w[31]=u,w[32]=g):g=w[32],g};function tq(e,t){let i=t||tR(e);(0,P.update)({currentPage:e,pageName:i,...t&&{supportSource:t}})}var tW=e.i(369091),tK=e.i(569526),tH=e.i(561667),t$=e.i(921999),tV=e.i(456753),tG=e.i(56999);function tF(e){let t,i,r,s=(0,p.c)(6),{children:n}=e,{address:a}=(0,f.useProfile)();return(()=>{let e,t,i,r,s,n,a,o=(0,p.c)(15),c=(0,O.usePathname)();o[0]===Symbol.for("react.memo_cache_sentinel")?(e=/^\/moderation(\/|$)/,o[0]=e):e=o[0],o[1]!==c?(t=e.test(c),o[1]=c,o[2]=t):t=o[2];let l=t,h=l||"true"===u.default.env.NEXT_PUBLIC_SKIP_JURISDICTION_CHECK||!1;o[3]!==l?(i=["disabled-features",l],o[3]=l,o[4]=i):i=o[4],o[5]!==h?(r=()=>h?z:L(),o[5]=h,o[6]=r):r=o[6],o[7]!==i||o[8]!==r?(s={queryKey:i,queryFn:r,staleTime:1/0},o[7]=i,o[8]=r,o[9]=s):s=o[9];let{data:d,isLoading:g,isError:f}=(0,S.useQuery)(s);o[10]!==d||o[11]!==f||o[12]!==g?(n=()=>{let e=x.disabledFeaturesStore.getState();e.setLoading(g),d?e.setDisabledFeatures(d):f&&e.setDisabledFeatures(z)},a=[d,g,f],o[10]=d,o[11]=f,o[12]=g,o[13]=n,o[14]=a):(n=o[13],a=o[14]),(0,y.useEffect)(n,a)})(),s[0]!==n?(t=(0,d.jsx)(tW.IpfsPrefixProvider,{children:(0,d.jsx)(tK.LastClickImpressionProvider,{children:(0,d.jsx)(tV.SeenCoinsObserverProvider,{children:(0,d.jsx)(tH.RecentTradeProvider,{children:(0,d.jsx)(tG.VideoMuteProvider,{children:(0,d.jsx)(tB,{appId:"w7scljv7",autoBootEnabled:!0,children:(0,d.jsx)(N,{children:(0,d.jsx)(y.Suspense,{children:(0,d.jsx)(t$.SearchProvider,{children:n})})})})})})})})}),s[0]=n,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,d.jsx)(j,{}),s[2]=i):i=s[2],s[3]!==a||s[4]!==t?(r=(0,d.jsxs)(g.UserProviders,{address:a,children:[t,i]}),s[3]=a,s[4]=t,s[5]=r):r=s[5],r}e.s(["default",()=>tF],997696)},589856,e=>{"use strict";var t=e.i(942765),i=e.i(649785),r=e.i(782840),s=e.i(655703);e.s(["ProfileProviderWithFlags",0,e=>{let n,a=(0,i.c)(3),{children:o}=e,c=(0,r.useAllFlags)();return a[0]!==o||a[1]!==c?(n=(0,t.jsx)(s.ProfileProvider,{flags:c,children:o}),a[0]=o,a[1]=c,a[2]=n):n=a[2],n}])},930384,e=>{"use strict";e.i(171580);var t=e.i(942765),i=e.i(649785),r=e.i(107186),s=e.i(752246),s=s,n=e.i(690535),a=e.i(549825),o=e.i(463578),c=e.i(281675),l=e.i(536925),h=e.i(702233);function u(){let[e,i]=(0,c.useState)(!1),r=(0,o.usePathname)(),s=(0,l.useIsClient)(),[u,d]=(0,l.useLocalStorage)("consentModeBanner",()=>!r.startsWith("/mobile")),[p,g]=(0,l.useLocalStorage)("consentMode",{ad_storage:"denied",analytics_storage:"granted",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"}),[f,y]=(0,c.useState)({analytics:!0,marketing:!1,necessary:!0,preferences:!0}),w=function(){s&&window&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push(arguments))};function m(e){let t={security_storage:e.necessary?"granted":"denied",functionality_storage:e.necessary?"granted":"denied",personalization_storage:e.preferences?"granted":"denied",ad_storage:e.marketing?"granted":"denied",analytics_storage:e.analytics?"granted":"denied"};w("consent","update",t),g(t),d(!1),i(!1)}function M(){m({necessary:!0,analytics:!0,preferences:!0,marketing:!0})}function N(){m({necessary:!1,analytics:!1,preferences:!1,marketing:!1})}function v(e){let t={[e.target.name]:e.target.checked};y({...f,...t})}return w("consent","default",p),(0,c.useEffect)(()=>{0!==Object.entries(p).length&&y({analytics:"granted"===p.analytics_storage,marketing:"granted"===p.ad_storage,necessary:p?.functionality_storage==="granted",preferences:"granted"===p.personalization_storage})},[p]),(0,t.jsxs)(t.Fragment,{children:[s&&u&&!e&&(0,t.jsxs)("div",{className:"fixed bottom-4 right-4 flex flex-col max-w-[420px] w-full rounded-[12px] border border-solid border-border-secondary z-10 shadow-lg overflow-hidden max-md:bottom-20 max-sm:max-w-none max-sm:left-4 max-sm:w-auto",children:[(0,t.jsxs)("div",{className:"flex flex-col p-4 bg-bg-primary",children:[(0,t.jsx)("p",{className:"text-base font-medium text-text-primary mb-2",children:"We value your privacy"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"This site uses cookies to improve your browsing experience, analyze site traffic, and show personalized content."})]}),(0,t.jsxs)("div",{className:"flex border-t border-solid border-border-secondary px-4 py-3 items-center justify-between bg-bg-secondary gap-x-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(a.Button,{onClick:N,size:32,variant:"secondary",children:"Reject all"}),(0,t.jsx)(a.Button,{size:32,onClick:()=>i(!0),variant:"secondary",children:"Customize"})]}),(0,t.jsx)(a.Button,{onClick:M,size:32,variant:"accent",children:"Accept all"})]})]}),(0,t.jsx)(n.Dialog.Root,{onOpenChange:i,open:e,children:(0,t.jsxs)(h.Dialog,{className:"max-w-[420px]",children:[(0,t.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,t.jsx)("p",{className:"text-lg font-medium mb-2",children:"Privacy Settings"}),(0,t.jsx)("p",{className:"text-base text-text-secondary",children:"Customize your privacy settings here. You can choose which types of cookies and tracking technologies you allow."})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-2 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("input",{checked:f.necessary,disabled:!0,id:"consent-necessary",name:"necessary",onChange:e=>v(e),type:"checkbox"}),(0,t.jsx)(a.Label,{className:"text-sm text-text-secondary",htmlFor:"consent-necessary",children:"Necessary"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("input",{checked:f.analytics,id:"consent-analytics",name:"analytics",onChange:e=>v(e),type:"checkbox"}),(0,t.jsx)(a.Label,{className:"text-sm text-text-secondary",htmlFor:"consent-analytics",children:"Analytics"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("input",{checked:f.preferences,id:"consent-preferences",name:"preferences",onChange:e=>v(e),type:"checkbox"}),(0,t.jsx)(a.Label,{className:"text-sm text-text-secondary",htmlFor:"consent-preferences",children:"Preferences"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-x-2 max-[380px]:flex-col max-[380px]:gap-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2 max-[380px]:flex-col max-[380px]:gap-y-2 max-[380px]:w-full",children:[(0,t.jsx)(a.Button,{className:"max-[380px]:w-full",onClick:N,variant:"secondary",children:"Reject all"}),(0,t.jsx)(a.Button,{className:"max-[380px]:w-full",onClick:M,variant:"secondary",children:"Accept all"})]}),(0,t.jsx)(a.Button,{className:"max-[380px]:w-full",onClick:function(){m(f)},variant:"accent",children:"Save changes"})]})]})})]})}let d={gtmId:"GTM-WPXVCX8X"};function p(e){let n,a,o,c,l=(0,i.c)(5),{children:h}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(n={appearance:{theme:"#1B1D28",accentColor:"#81c784",logo:"/logo.png",walletChainType:"solana-only"},embeddedWallets:{createOnLogin:"users-without-wallets"}},l[0]=n):n=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(u,{}),o=(0,t.jsx)(r.GoogleTagManager,{...d}),l[1]=a,l[2]=o):(a=l[1],o=l[2]),l[3]!==h?(c=(0,t.jsxs)(s.K,{appId:"cm1p2gzot03fzqty5xzgjgthq",clientId:"client-WY5brZnRUhFQnX6ip6yRzypC9WLtB9j8mFnq4cyPBMq8W",config:n,children:[h,a,o]}),l[3]=h,l[4]=c):c=l[4],c}e.s(["default",()=>p],930384)},68514,e=>{"use strict";var t=e.i(942765),i=e.i(649785),r=e.i(213618),s=e.i(894114),n=e.i(241175),a=e.i(51435),o=class extends a.Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,i){let n=t.queryKey,a=t.queryHash??(0,r.hashQueryKeyByOptions)(n,t),o=this.get(a);return o||(o=new s.Query({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){n.notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,r.matchQuery)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,r.matchQuery)(e,t)):t}notify(e){n.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){n.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){n.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},c=e.i(462852),l=a,h=class extends l.Subscribable{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#i=new Map,this.#r=0}#t;#i;#r;build(e,t,i){let r=new c.Mutation({mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:i});return this.add(r),r}add(e){this.#t.add(e);let t=u(e);if("string"==typeof t){let i=this.#i.get(t);i?i.push(e):this.#i.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=u(e);if("string"==typeof t){let i=this.#i.get(t);if(i)if(i.length>1){let t=i.indexOf(e);-1!==t&&i.splice(t,1)}else i[0]===e&&this.#i.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=u(e);if("string"!=typeof t)return!0;{let i=this.#i.get(t),r=i?.find(e=>"pending"===e.state.status);return!r||r===e}}runNext(e){let t=u(e);if("string"!=typeof t)return Promise.resolve();{let i=this.#i.get(t)?.find(t=>t!==e&&t.state.isPaused);return i?.continue()??Promise.resolve()}}clear(){n.notifyManager.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#i.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,r.matchMutation)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,r.matchMutation)(e,t))}notify(e){n.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return n.notifyManager.batch(()=>Promise.all(e.map(e=>e.continue().catch(r.noop))))}};function u(e){return e.options.scope?.id}var d=e.i(982069),p=e.i(523218),g=e.i(119031),f=class{#s;#n;#a;#o;#c;#l;#h;#u;constructor(e={}){this.#s=e.queryCache||new o,this.#n=e.mutationCache||new h,this.#a=e.defaultOptions||{},this.#o=new Map,this.#c=new Map,this.#l=0}mount(){this.#l++,1===this.#l&&(this.#h=d.focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#s.onFocus())}),this.#u=p.onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#s.onOnline())}))}unmount(){this.#l--,0===this.#l&&(this.#h?.(),this.#h=void 0,this.#u?.(),this.#u=void 0)}isFetching(e){return this.#s.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#n.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#s.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),i=this.#s.build(this,t),s=i.state.data;return void 0===s?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime((0,r.resolveStaleTime)(t.staleTime,i))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#s.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,i){let s=this.defaultQueryOptions({queryKey:e}),n=this.#s.get(s.queryHash),a=n?.state.data,o=(0,r.functionalUpdate)(t,a);if(void 0!==o)return this.#s.build(this,s).setData(o,{...i,manual:!0})}setQueriesData(e,t,i){return n.notifyManager.batch(()=>this.#s.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,i)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#s.get(t.queryHash)?.state}removeQueries(e){let t=this.#s;n.notifyManager.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let i=this.#s;return n.notifyManager.batch(()=>(i.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let i={revert:!0,...t};return Promise.all(n.notifyManager.batch(()=>this.#s.findAll(e).map(e=>e.cancel(i)))).then(r.noop).catch(r.noop)}invalidateQueries(e,t={}){return n.notifyManager.batch(()=>(this.#s.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let i={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(n.notifyManager.batch(()=>this.#s.findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,i);return i.throwOnError||(t=t.catch(r.noop)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(r.noop)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let i=this.#s.build(this,t);return i.isStaleByTime((0,r.resolveStaleTime)(t.staleTime,i))?i.fetch(t):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(r.noop).catch(r.noop)}fetchInfiniteQuery(e){return e.behavior=(0,g.infiniteQueryBehavior)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(r.noop).catch(r.noop)}ensureInfiniteQueryData(e){return e.behavior=(0,g.infiniteQueryBehavior)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return p.onlineManager.isOnline()?this.#n.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#s}getMutationCache(){return this.#n}getDefaultOptions(){return this.#a}setDefaultOptions(e){this.#a=e}setQueryDefaults(e,t){this.#o.set((0,r.hashKey)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#o.values()],i={};return t.forEach(t=>{(0,r.partialMatchKey)(e,t.queryKey)&&Object.assign(i,t.defaultOptions)}),i}setMutationDefaults(e,t){this.#c.set((0,r.hashKey)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#c.values()],i={};return t.forEach(t=>{(0,r.partialMatchKey)(e,t.mutationKey)&&Object.assign(i,t.defaultOptions)}),i}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#a.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,r.hashQueryKeyByOptions)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===r.skipToken&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#a.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#s.clear(),this.#n.clear()}},y=e.i(606933),w=e.i(281675);function m(e){let r,s=(0,i.c)(3),{children:n}=e,[a]=(0,w.useState)(M);return s[0]!==n||s[1]!==a?(r=(0,t.jsx)(y.QueryClientProvider,{client:a,children:n}),s[0]=n,s[1]=a,s[2]=r):r=s[2],r}function M(){return new f}e.s(["ReactQueryProvider",()=>m],68514)},726511,(e,t,i)=>{var r,s,n,a="__lodash_hash_undefined__",o="[object Arguments]",c="[object Array]",l="[object Boolean]",h="[object Date]",u="[object Error]",d="[object Function]",p="[object Map]",g="[object Number]",f="[object Object]",y="[object Promise]",w="[object RegExp]",m="[object Set]",M="[object String]",N="[object WeakMap]",v="[object ArrayBuffer]",I="[object DataView]",b=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A[o]=A[c]=A[v]=A[l]=A[I]=A[h]=A[u]=A[d]=A[p]=A[g]=A[f]=A[w]=A[m]=A[M]=A[N]=!1;var D=e.g&&e.g.Object===Object&&e.g,C="object"==typeof self&&self&&self.Object===Object&&self,T=D||C||Function("return this")(),j=i&&!i.nodeType&&i,_=j&&t&&!t.nodeType&&t,S=_&&_.exports===j,O=S&&D.process,x=function(){try{return O&&O.binding&&O.binding("util")}catch(e){}}(),z=x&&x.isTypedArray;function L(e){var t=-1,i=Array(e.size);return e.forEach(function(e,r){i[++t]=[r,e]}),i}function P(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}var k=Array.prototype,U=Function.prototype,R=Object.prototype,Y=T["__core-js_shared__"],Q=U.toString,B=R.hasOwnProperty,q=(r=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",W=R.toString,K=RegExp("^"+Q.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=S?T.Buffer:void 0,$=T.Symbol,V=T.Uint8Array,G=R.propertyIsEnumerable,F=k.splice,Z=$?$.toStringTag:void 0,J=Object.getOwnPropertySymbols,X=H?H.isBuffer:void 0,ee=(s=Object.keys,n=Object,function(e){return s(n(e))}),et=eA(T,"DataView"),ei=eA(T,"Map"),er=eA(T,"Promise"),es=eA(T,"Set"),en=eA(T,"WeakMap"),ea=eA(Object,"create"),eo=eT(et),ec=eT(ei),el=eT(er),eh=eT(es),eu=eT(en),ed=$?$.prototype:void 0,ep=ed?ed.valueOf:void 0;function eg(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function ef(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function ey(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function ew(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new ey;++t<i;)this.add(e[t])}function em(e){var t=this.__data__=new ef(e);this.size=t.size}function eM(e,t){for(var i=e.length;i--;)if(ej(e[i][0],t))return i;return -1}function eN(e){var t;return null==e?void 0===e?"[object Undefined]":"[object Null]":Z&&Z in Object(e)?function(e){var t=B.call(e,Z),i=e[Z];try{e[Z]=void 0;var r=!0}catch(e){}var s=W.call(e);return r&&(t?e[Z]=i:delete e[Z]),s}(e):(t=e,W.call(t))}function ev(e){return eP(e)&&eN(e)==o}function eI(e,t,i,r,s,n){var a=1&i,o=e.length,c=t.length;if(o!=c&&!(a&&c>o))return!1;var l=n.get(e);if(l&&n.get(t))return l==t;var h=-1,u=!0,d=2&i?new ew:void 0;for(n.set(e,t),n.set(t,e);++h<o;){var p=e[h],g=t[h];if(r)var f=a?r(g,p,h,t,e,n):r(p,g,h,e,t,n);if(void 0!==f){if(f)continue;u=!1;break}if(d){if(!function(e,t){for(var i=-1,r=null==e?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}(t,function(e,t){if(!d.has(t)&&(p===e||s(p,e,i,r,n)))return d.push(t)})){u=!1;break}}else if(!(p===g||s(p,g,i,r,n))){u=!1;break}}return n.delete(e),n.delete(t),u}function eb(e){var t;return t=eU(e),eS(e)?t:function(e,t){for(var i=-1,r=t.length,s=e.length;++i<r;)e[s+i]=t[i];return e}(t,eD(e))}function eE(e,t){var i,r,s=e.__data__;return("string"==(r=typeof(i=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?s["string"==typeof t?"string":"hash"]:s.map}function eA(e,t){var i,r=null==e?void 0:e[t];return!(!eL(r)||(i=r,q&&q in i))&&(ex(r)?K:b).test(eT(r))?r:void 0}eg.prototype.clear=function(){this.__data__=ea?ea(null):{},this.size=0},eg.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},eg.prototype.get=function(e){var t=this.__data__;if(ea){var i=t[e];return i===a?void 0:i}return B.call(t,e)?t[e]:void 0},eg.prototype.has=function(e){var t=this.__data__;return ea?void 0!==t[e]:B.call(t,e)},eg.prototype.set=function(e,t){var i=this.__data__;return this.size+=+!this.has(e),i[e]=ea&&void 0===t?a:t,this},ef.prototype.clear=function(){this.__data__=[],this.size=0},ef.prototype.delete=function(e){var t=this.__data__,i=eM(t,e);return!(i<0)&&(i==t.length-1?t.pop():F.call(t,i,1),--this.size,!0)},ef.prototype.get=function(e){var t=this.__data__,i=eM(t,e);return i<0?void 0:t[i][1]},ef.prototype.has=function(e){return eM(this.__data__,e)>-1},ef.prototype.set=function(e,t){var i=this.__data__,r=eM(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this},ey.prototype.clear=function(){this.size=0,this.__data__={hash:new eg,map:new(ei||ef),string:new eg}},ey.prototype.delete=function(e){var t=eE(this,e).delete(e);return this.size-=!!t,t},ey.prototype.get=function(e){return eE(this,e).get(e)},ey.prototype.has=function(e){return eE(this,e).has(e)},ey.prototype.set=function(e,t){var i=eE(this,e),r=i.size;return i.set(e,t),this.size+=+(i.size!=r),this},ew.prototype.add=ew.prototype.push=function(e){return this.__data__.set(e,a),this},ew.prototype.has=function(e){return this.__data__.has(e)},em.prototype.clear=function(){this.__data__=new ef,this.size=0},em.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},em.prototype.get=function(e){return this.__data__.get(e)},em.prototype.has=function(e){return this.__data__.has(e)},em.prototype.set=function(e,t){var i=this.__data__;if(i instanceof ef){var r=i.__data__;if(!ei||r.length<199)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new ey(r)}return i.set(e,t),this.size=i.size,this};var eD=J?function(e){return null==e?[]:function(e,t){for(var i=-1,r=null==e?0:e.length,s=0,n=[];++i<r;){var a=e[i];t(a,i,e)&&(n[s++]=a)}return n}(J(e=Object(e)),function(t){return G.call(e,t)})}:function(){return[]},eC=eN;function eT(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ej(e,t){return e===t||e!=e&&t!=t}(et&&eC(new et(new ArrayBuffer(1)))!=I||ei&&eC(new ei)!=p||er&&eC(er.resolve())!=y||es&&eC(new es)!=m||en&&eC(new en)!=N)&&(eC=function(e){var t=eN(e),i=t==f?e.constructor:void 0,r=i?eT(i):"";if(r)switch(r){case eo:return I;case ec:return p;case el:return y;case eh:return m;case eu:return N}return t});var e_=ev(function(){return arguments}())?ev:function(e){return eP(e)&&B.call(e,"callee")&&!G.call(e,"callee")},eS=Array.isArray,eO=X||function(){return!1};function ex(e){if(!eL(e))return!1;var t=eN(e);return t==d||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ez(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function eL(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eP(e){return null!=e&&"object"==typeof e}var ek=z?function(e){return z(e)}:function(e){return eP(e)&&ez(e.length)&&!!A[eN(e)]};function eU(e){return null!=e&&ez(e.length)&&!ex(e)?function(e,t){var i,r,s=eS(e),n=!s&&e_(e),a=!s&&!n&&eO(e),o=!s&&!n&&!a&&ek(e),c=s||n||a||o,l=c?function(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}(e.length,String):[],h=l.length;for(var u in e){B.call(e,u)&&!(c&&("length"==u||a&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||(i=u,(r=null==(r=h)?0x1fffffffffffff:r)&&("number"==typeof i||E.test(i))&&i>-1&&i%1==0&&i<r)))&&l.push(u)}return l}(e):function(e){if(i=(t=e)&&t.constructor,t!==("function"==typeof i&&i.prototype||R))return ee(e);var t,i,r=[];for(var s in Object(e))B.call(e,s)&&"constructor"!=s&&r.push(s);return r}(e)}t.exports=function(e,t){return function e(t,i,r,s,n){return t===i||(null!=t&&null!=i&&(eP(t)||eP(i))?function(e,t,i,r,s,n){var a=eS(e),d=eS(t),y=a?c:eC(e),N=d?c:eC(t);y=y==o?f:y,N=N==o?f:N;var b=y==f,E=N==f,A=y==N;if(A&&eO(e)){if(!eO(t))return!1;a=!0,b=!1}if(A&&!b)return n||(n=new em),a||ek(e)?eI(e,t,i,r,s,n):function(e,t,i,r,s,n,a){switch(i){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case v:if(e.byteLength!=t.byteLength||!n(new V(e),new V(t)))break;return!0;case l:case h:case g:return ej(+e,+t);case u:return e.name==t.name&&e.message==t.message;case w:case M:return e==t+"";case p:var o=L;case m:var c=1&r;if(o||(o=P),e.size!=t.size&&!c)break;var d=a.get(e);if(d)return d==t;r|=2,a.set(e,t);var f=eI(o(e),o(t),r,s,n,a);return a.delete(e),f;case"[object Symbol]":if(ep)return ep.call(e)==ep.call(t)}return!1}(e,t,y,i,r,s,n);if(!(1&i)){var D=b&&B.call(e,"__wrapped__"),C=E&&B.call(t,"__wrapped__");if(D||C){var T=D?e.value():e,j=C?t.value():t;return n||(n=new em),s(T,j,i,r,n)}}return!!A&&(n||(n=new em),function(e,t,i,r,s,n){var a=1&i,o=eb(e),c=o.length;if(c!=eb(t).length&&!a)return!1;for(var l=c;l--;){var h=o[l];if(!(a?h in t:B.call(t,h)))return!1}var u=n.get(e);if(u&&n.get(t))return u==t;var d=!0;n.set(e,t),n.set(t,e);for(var p=a;++l<c;){var g=e[h=o[l]],f=t[h];if(r)var y=a?r(f,g,h,t,e,n):r(g,f,h,e,t,n);if(!(void 0===y?g===f||s(g,f,i,r,n):y)){d=!1;break}p||(p="constructor"==h)}if(d&&!p){var w=e.constructor,m=t.constructor;w!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof m&&m instanceof m)&&(d=!1)}return n.delete(e),n.delete(t),d}(e,t,i,r,s,n))}(t,i,r,s,e,n):t!=t&&i!=i)}(e,t)}},828443,e=>{"use strict";let t,i,r,s,n,a;var o,c,l,h,u,d,p,g,f,y,w,m,M,N,v,I,b,E,A,D,C,T,j,_,S,O,x,z,L,P,k,U,R,Y,Q,B,q,W,K,H,$,V,G,F,Z,J,X,ee,et,ei,er,es,en,ea,eo,ec,el,eh,eu,ed,ep,eg,ef,ey,ew,em,eM,eN,ev,eI,eb,eE,eA,eD,eC,eT,ej,e_,eS,eO,ex,ez,eL,eP,ek,eU,eR,eY,eQ,eB,eq,eW,eK,eH,e$,eV,eG,eF,eZ,eJ,eX,e0,e1,e4,e2,e3,e5,e8,e6,e9,e7,te,tt,ti,tr,ts,tn,ta,to,tc,tl,th,tu=e.i(171580),td=e.i(942765),tp=e.i(401998),tg=e.i(785373);class tf extends Error{constructor(e,t){super(e),this.error=t}}class ty extends tf{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class tw extends tf{constructor(){super(...arguments),this.name="WalletLoadError"}}class tm extends tf{constructor(){super(...arguments),this.name="WalletConfigError"}}class tM extends tf{constructor(){super(...arguments),this.name="WalletConnectionError"}}class tN extends tf{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class tv extends tf{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class tI extends tf{constructor(){super(...arguments),this.name="WalletAccountError"}}class tb extends tf{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class tE extends tf{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class tA extends tf{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class tD extends tf{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class tC extends tf{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class tT extends tf{constructor(){super(...arguments),this.name="WalletSignInError"}}class tj extends tf{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}(h=L||(L={})).Installed="Installed",h.NotDetected="NotDetected",h.Loadable="Loadable",h.Unsupported="Unsupported";class t_ extends tg.default{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,i={}){let r=this.publicKey;if(!r)throw new tE;return e.feePayer=e.feePayer||r,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:i.preflightCommitment,minContextSlot:i.minContextSlot})).blockhash,e}}function tS(e){if("undefined"==typeof window||"undefined"==typeof document)return;let t=[];function i(){if(e())for(let e of t)e()}let r=setInterval(i,1e3);t.push(()=>clearInterval(r)),"loading"===document.readyState&&(document.addEventListener("DOMContentLoaded",i,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",i))),"complete"!==document.readyState&&(window.addEventListener("load",i,{once:!0}),t.push(()=>window.removeEventListener("load",i))),i()}function tO(){if(!navigator)return!1;let e=navigator.userAgent.toLowerCase(),t=e.includes("iphone")||e.includes("ipad"),i=e.includes("safari");return t&&i}function tx(e){return"version"in e}(u=P||(P={})).Mainnet="mainnet-beta",u.Testnet="testnet",u.Devnet="devnet";class tz extends t_{async sendTransaction(e,t,i={}){let r=!0;try{if(tx(e)){if(!this.supportedTransactionVersions)throw new tA("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new tA(`Sending transaction version ${e.version} isn't supported by this wallet`);try{let r=(e=await this.signTransaction(e)).serialize();return await t.sendRawTransaction(r,i)}catch(e){if(e instanceof tD)throw r=!1,e;throw new tA(e?.message,e)}}try{let{signers:r,...s}=i;e=await this.prepareTransaction(e,t,s),r?.length&&e.partialSign(...r);let n=(e=await this.signTransaction(e)).serialize();return await t.sendRawTransaction(n,s)}catch(e){if(e instanceof tD)throw r=!1,e;throw new tA(e?.message,e)}}catch(e){throw r&&this.emit("error",e),e}}async signAllTransactions(e){for(let t of e)if(tx(t)){if(!this.supportedTransactionVersions)throw new tD("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new tD(`Signing transaction version ${t.version} isn't supported by this wallet`)}let t=[];for(let i of e)t.push(await this.signTransaction(i));return t}}class tL extends tz{}class tP extends tL{}var tk=e.i(235828);let tU="solana:signIn";var tR=e.i(230165),tY=e.i(36697),tQ=e.i(228168);e.i(698870);let tB=`(?:\\nURI: (?<uri>[^\\n]+))?(?:\\nVersion: (?<version>[^\\n]+))?(?:\\nChain ID: (?<chainId>[^\\n]+))?(?:\\nNonce: (?<nonce>[^\\n]+))?(?:\\nIssued At: (?<issuedAt>[^\\n]+))?(?:\\nExpiration Time: (?<expirationTime>[^\\n]+))?(?:\\nNot Before: (?<notBefore>[^\\n]+))?(?:\\nRequest ID: (?<requestId>[^\\n]+))?(?:\\nResources:(?<resources>(?:\\n- [^\\n]+)*))?`;RegExp(`^(?<domain>[^\\n]+?) wants you to sign in with your Solana account:\\n(?<address>[^\\n]+)(?:\\n|$)(?:\\n(?<statement>[\\S\\s]*?)(?:\\n|$))??${tB}\\n*$`);let tq="ERROR_FORBIDDEN_WALLET_BASE_URL";class tW extends Error{constructor(...e){const[t,i,r]=e;super(i),this.code=t,this.data=r,this.name="SolanaMobileWalletAdapterError"}}class tK extends Error{constructor(...e){const[t,i,r,s]=e;super(r),this.code=i,this.data=s,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function tH(e,t,i,r){return new(i||(i=Promise))(function(s,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function o(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(a,o)}c((r=r.apply(e,t||[])).next())})}function t$(e,t){let i=window.btoa(String.fromCharCode.call(null,...e));return t?i.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):i}function tV(e){return new Uint8Array(window.atob(e).split("").map(e=>e.charCodeAt(0)))}function tG(e,t){return tH(this,void 0,void 0,function*(){let i=yield crypto.subtle.exportKey("raw",e),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,i),s=new Uint8Array(i.byteLength+r.byteLength);return s.set(new Uint8Array(i),0),s.set(new Uint8Array(r),i.byteLength),s})}let tF="solana:cloneAuthorization";function tZ(e,i){return tH(this,void 0,void 0,function*(){let r=e.slice(0,4),s=e.slice(4,16),n=e.slice(16),a=yield crypto.subtle.decrypt(tJ(r,s),i,n);return(void 0===t&&(t=new TextDecoder("utf-8")),t).decode(a)})}function tJ(e,t){return{additionalData:e,iv:t,name:"AES-GCM",tagLength:128}}function tX(){return tH(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function t0(e){if(e<49152||e>65535)throw new tW("ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",`Association port number must be between 49152 and 65535. ${e} given.`,{port:e});return e}function t1(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}let t4=null,t2=[150,150,200,500,500,750,750,1e3];function t3(e){return new DataView(e).getUint32(0,!1)}let t5="standard:connect",t8="standard:disconnect",t6="standard:events";var t9=e.i(344048);let t7="solana:mainnet",ie="solana:devnet",it="solana:testnet";function ii(e,t,i,r){return new(i||(i=Promise))(function(s,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function o(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(a,o)}c((r=r.apply(e,t||[])).next())})}function ir(e,t,i,r){if("a"===i&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)}function is(e,t,i,r,s){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,i):s?s.value=i:t.set(e,i),i}let ia=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,io=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,ic=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class il{constructor(){k.add(this),U.set(this,null),R.set(this,{}),Y.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),ir(this,k,"m",B).call(this),ir(this,U,"f")&&(ir(this,U,"f").style.display="flex")},this.close=e=>{var t;console.debug("Modal close"),ir(this,k,"m",q).call(this),ir(this,U,"f")&&(ir(this,U,"f").style.display="none"),null==(t=ir(this,R,"f").close)||t.forEach(t=>t(e))},W.set(this,e=>{"Escape"===e.key&&this.close(e)}),this.init=this.init.bind(this),is(this,U,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f")}init(){return ii(this,void 0,void 0,function*(){console.log("Injecting modal"),ir(this,k,"m",Q).call(this)})}addEventListener(e,t){var i;return(null==(i=ir(this,R,"f")[e])?void 0:i.push(t))||(ir(this,R,"f")[e]=[t]),()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;ir(this,R,"f")[e]=null==(i=ir(this,R,"f")[e])?void 0:i.filter(e=>t!==e)}}function ih(e){return window.btoa(String.fromCharCode.call(null,...e))}function iu(e){return new Uint8Array(window.atob(e).split("").map(e=>e.charCodeAt(0)))}U=new WeakMap,R=new WeakMap,Y=new WeakMap,W=new WeakMap,k=new WeakSet,Q=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){ir(this,U,"f")||is(this,U,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f");return}is(this,U,document.createElement("div"),"f"),ir(this,U,"f").id="mobile-wallet-adapter-embedded-root-ui",ir(this,U,"f").innerHTML=ia,ir(this,U,"f").style.display="none";let e=ir(this,U,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);let t=document.createElement("style");t.id="mobile-wallet-adapter-embedded-modal-styles",t.textContent=io+this.contentStyles;let i=document.createElement("div");i.innerHTML=ic,this.dom=i.attachShadow({mode:"closed"}),this.dom.appendChild(t),this.dom.appendChild(ir(this,U,"f")),document.body.appendChild(i)},B=function(){!ir(this,U,"f")||ir(this,Y,"f")||([...ir(this,U,"f").querySelectorAll("[data-modal-close]")].forEach(e=>null==e?void 0:e.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",ir(this,W,"f")),is(this,Y,!0,"f"))},q=function(){!ir(this,Y,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",ir(this,W,"f")),ir(this,U,"f")&&([...ir(this,U,"f").querySelectorAll("[data-modal-close]")].forEach(e=>null==e?void 0:e.removeEventListener("click",this.close)),is(this,Y,!1,"f")))};let id="Mobile Wallet Adapter",ip=[tY.SolanaSignAndSendTransaction,tQ.SolanaSignTransaction,tR.SolanaSignMessage,tU];class ig{constructor(e){K.add(this),H.set(this,{}),$.set(this,"1.0.0"),V.set(this,id),G.set(this,"https://solanamobile.com/wallets"),F.set(this,"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo="),Z.set(this,void 0),J.set(this,void 0),X.set(this,void 0),ee.set(this,!1),et.set(this,0),ei.set(this,[]),er.set(this,void 0),es.set(this,void 0),en.set(this,void 0),ea.set(this,(e,t)=>{var i;return(null==(i=ir(this,H,"f")[e])?void 0:i.push(t))||(ir(this,H,"f")[e]=[t]),()=>ir(this,K,"m",ec).call(this,e,t)}),el.set(this,({silent:e}={})=>ii(this,void 0,void 0,function*(){if(ir(this,ee,"f")||this.connected)return{accounts:this.accounts};is(this,ee,!0,"f");try{if(e){let e=yield ir(this,X,"f").get();if(!e)return{accounts:this.accounts};yield ir(this,ed,"f").call(this,e.capabilities),yield ir(this,eu,"f").call(this,e)}else yield ir(this,eh,"f").call(this)}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}finally{is(this,ee,!1,"f")}return{accounts:this.accounts}})),eh.set(this,e=>ii(this,void 0,void 0,function*(){try{let t=yield ir(this,X,"f").get();if(t)return ir(this,eu,"f").call(this,t),t;let i=yield ir(this,er,"f").select(ir(this,ei,"f"));return yield ir(this,ef,"f").call(this,t=>ii(this,void 0,void 0,function*(){let[r,s]=yield Promise.all([t.getCapabilities(),t.authorize({chain:i,identity:ir(this,Z,"f"),sign_in_payload:e})]),n=ir(this,ew,"f").call(this,s.accounts),a=Object.assign(Object.assign({},s),{accounts:n,chain:i,capabilities:r});return Promise.all([ir(this,ed,"f").call(this,r),ir(this,X,"f").set(a),ir(this,eu,"f").call(this,a)]),a}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),eu.set(this,e=>ii(this,void 0,void 0,function*(){var t;let i=null==ir(this,J,"f")||(null==(t=ir(this,J,"f"))?void 0:t.accounts.length)!==e.accounts.length||ir(this,J,"f").accounts.some((t,i)=>t.address!==e.accounts[i].address);is(this,J,e,"f"),i&&ir(this,K,"m",eo).call(this,"change",{accounts:this.accounts})})),ed.set(this,e=>ii(this,void 0,void 0,function*(){let t=e.features.includes("solana:signTransactions"),i=e.supports_sign_and_send_transactions,r=tY.SolanaSignAndSendTransaction in this.features!==i||tQ.SolanaSignTransaction in this.features!==t;is(this,es,Object.assign(Object.assign({},(i||!i&&!t)&&{[tY.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ir(this,eN,"f")}}),t&&{[tQ.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ir(this,ev,"f")}}),"f"),r&&ir(this,K,"m",eo).call(this,"change",{features:this.features})})),ep.set(this,(e,t,i)=>ii(this,void 0,void 0,function*(){var r,s;try{let[n,a]=yield Promise.all([null!=(s=null==(r=ir(this,J,"f"))?void 0:r.capabilities)?s:yield e.getCapabilities(),e.authorize({auth_token:t,identity:ir(this,Z,"f"),chain:i})]),o=ir(this,ew,"f").call(this,a.accounts),c=Object.assign(Object.assign({},a),{accounts:o,chain:i,capabilities:n});Promise.all([ir(this,X,"f").set(c),ir(this,eu,"f").call(this,c)])}catch(e){throw ir(this,eg,"f").call(this),Error(e instanceof Error&&e.message||"Unknown error")}})),eg.set(this,()=>ii(this,void 0,void 0,function*(){var e;ir(this,X,"f").clear(),is(this,ee,!1,"f"),is(this,et,(e=ir(this,et,"f"),++e),"f"),is(this,J,void 0,"f"),ir(this,K,"m",eo).call(this,"change",{accounts:this.accounts})})),ef.set(this,e=>ii(this,void 0,void 0,function*(){var t;let i=null==(t=ir(this,J,"f"))?void 0:t.wallet_uri_base,r=ir(this,et,"f");try{return yield function(e,t){return tH(this,void 0,void 0,function*(){let i,r;if("undefined"==typeof window||!0!==window.isSecureContext)throw new tW("ERROR_SECURE_CONTEXT_REQUIRED","The mobile wallet adapter protocol must be used in a secure context (`https`).");let s=yield function(){return tH(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}(),n=yield function(e,t){return tH(this,void 0,void 0,function*(){let i=t0(49152+Math.floor(16384*Math.random())),r=yield function(e,t,i,r=["v1"]){return tH(this,void 0,void 0,function*(){let s=t0(t),n=function(e){let t="",i=new Uint8Array(e),r=i.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(i[e]);return window.btoa(t)}((yield crypto.subtle.exportKey("raw",e))),a=function(e,t){let i=null;if(t){try{i=new URL(t)}catch(e){}if((null==i?void 0:i.protocol)!=="https:")throw new tW(tq,"Base URLs supplied by wallets must be valid `https` URLs")}return i||(i=new URL("solana-wallet:/")),new URL(e.startsWith("/")?e:[...t1(i.pathname),...t1(e)].join("/"),i)}("v1/associate/local",i);return a.searchParams.set("association",n.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])),a.searchParams.set("port",`${s}`),r.forEach(e=>{a.searchParams.set("v",e)}),a})}(e,i,t);return yield function(e){return tH(this,void 0,void 0,function*(){if("https:"===e.protocol)window.location.assign(e);else try{switch(1*(-1===navigator.userAgent.indexOf("Firefox/"))){case 0:null==t4&&((t4=document.createElement("iframe")).style.display="none",document.body.appendChild(t4)),t4.contentWindow.location.href=e.toString();break;case 1:{let t=new Promise((e,t)=>{function i(){clearTimeout(s),window.removeEventListener("blur",r)}function r(){i(),e()}window.addEventListener("blur",r);let s=setTimeout(()=>{i(),t()},3e3)});window.location.assign(e),yield t}}}catch(e){throw new tW("ERROR_WALLET_NOT_FOUND","Found no installed wallet that supports the mobile wallet protocol.")}})}(r),i})}(s.publicKey,null==t?void 0:t.baseUri),a=`ws://localhost:${n}/solana-wallet`,o=(r=[...t2],()=>r.length>1?r.shift():r[0]),c=1,l=0,h={__type:"disconnected"};return new Promise((t,r)=>{let n,u,d,p={},g=()=>tH(this,void 0,void 0,function*(){if("connecting"!==h.__type)return void console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${h.__type}\`.`);n.removeEventListener("open",g);let{associationKeypair:e}=h,t=yield tX();n.send((yield tG(t.publicKey,e.privateKey))),h={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:t.privateKey}}),f=e=>{e.wasClean?h={__type:"disconnected"}:r(new tW("ERROR_SESSION_CLOSED",`The wallet session dropped unexpectedly (${e.code}: ${e.reason}).`,{closeEvent:e})),u()},y=e=>tH(this,void 0,void 0,function*(){u(),Date.now()-i>=3e4?r(new tW("ERROR_SESSION_TIMEOUT",`Failed to connect to the wallet websocket at ${a}.`)):(yield new Promise(e=>{let t=o();d=window.setTimeout(e,t)}),m())}),w=i=>tH(this,void 0,void 0,function*(){let a=yield i.data.arrayBuffer();switch(h.__type){case"connecting":if(0!==a.byteLength)throw Error("Encountered unexpected message while connecting");let o=yield tX();n.send((yield tG(o.publicKey,s.privateKey))),h={__type:"hello_req_sent",associationPublicKey:s.publicKey,ecdhPrivateKey:o.privateKey};break;case"connected":try{let e=a.slice(0,4),t=t3(e);if(t!==l+1)throw Error("Encrypted message has invalid sequence number");l=t;let i=yield function(e,t){return tH(this,void 0,void 0,function*(){let i=JSON.parse((yield tZ(e,t)));if(Object.hasOwnProperty.call(i,"error"))throw new tK(i.id,i.error.code,i.error.message);return i})}(a,h.sharedSecret),r=p[i.id];delete p[i.id],r.resolve(i.result)}catch(e){if(e instanceof tK){let t=p[e.jsonRpcMessageId];delete p[e.jsonRpcMessageId],t.reject(e)}else throw e}break;case"hello_req_sent":{var d,g;if(0===a.byteLength){let e=yield tX();n.send((yield tG(e.publicKey,s.privateKey))),h={__type:"hello_req_sent",associationPublicKey:s.publicKey,ecdhPrivateKey:e.privateKey};break}let i=yield function(e,t,i){return tH(this,void 0,void 0,function*(){let[r,s]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",e.slice(0,65),{name:"ECDH",namedCurve:"P-256"},!1,[])]),n=yield crypto.subtle.deriveBits({name:"ECDH",public:s},i,256),a=yield crypto.subtle.importKey("raw",n,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},a,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}(a,h.associationPublicKey,h.ecdhPrivateKey),o=a.slice(65),f=0!==o.byteLength?yield tH(this,void 0,void 0,function*(){let e=t3(o.slice(0,4));if(e!==l+1)throw Error("Encrypted message has invalid sequence number");return l=e,function(e,t){return tH(this,void 0,void 0,function*(){let i=JSON.parse((yield tZ(e,t))),r="legacy";if(Object.hasOwnProperty.call(i,"v"))switch(i.v){case 1:case"1":case"v1":r="v1";break;case"legacy":r="legacy";break;default:throw new tW("ERROR_INVALID_PROTOCOL_VERSION",`Unknown/unsupported protocol version: ${i.v}`)}return{protocol_version:r}})}(o,i)}):{protocol_version:"legacy"};h={__type:"connected",sharedSecret:i,sessionProperties:f};let y=(d=f.protocol_version,g=(e,t)=>tH(this,void 0,void 0,function*(){let r=c++;return n.send((yield function(e,t){return tH(this,void 0,void 0,function*(){let i=JSON.stringify(e);return function(e,t,i){return tH(this,void 0,void 0,function*(){let r=function(e){if(e>=0x100000000)throw Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!1),new Uint8Array(t)}(t),s=new Uint8Array(12);crypto.getRandomValues(s);let n=yield crypto.subtle.encrypt(tJ(r,s),i,new TextEncoder().encode(e)),a=new Uint8Array(r.byteLength+s.byteLength+n.byteLength);return a.set(new Uint8Array(r),0),a.set(new Uint8Array(s),r.byteLength),a.set(new Uint8Array(n),r.byteLength+s.byteLength),a})}(i,e.id,t)})}({id:r,jsonrpc:"2.0",method:e,params:null!=t?t:{}},i))),new Promise((t,i)=>{p[r]={resolve(r){switch(e){case"authorize":case"reauthorize":{let{wallet_uri_base:e}=r;if(null!=e)try{let t;try{t=new URL(e)}catch(e){throw new tW(tq,"Invalid base URL supplied by wallet")}if("https:"!==t.protocol)throw new tW(tq,"Base URLs supplied by wallets must be valid `https` URLs")}catch(e){i(e);return}}}t(r)},reject:i}})}),new Proxy({},{get:(e,t)=>"then"===t?null:(null==e[t]&&(e[t]=function(e){return tH(this,void 0,void 0,function*(){let{method:i,params:r}=function(e,t,i){let r=t,s=e.toString().replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`).toLowerCase();switch(e){case"authorize":{let{chain:e}=r;if("legacy"===i){switch(e){case"solana:testnet":e="testnet";break;case"solana:devnet":e="devnet";break;case"solana:mainnet":e="mainnet-beta";break;default:e=r.cluster}r.cluster=e}else{switch(e){case"testnet":case"devnet":e=`solana:${e}`;break;case"mainnet-beta":e="solana:mainnet"}r.chain=e}}case"reauthorize":{let{auth_token:e,identity:t}=r;e&&("legacy"===i?(s="reauthorize",r={auth_token:e,identity:t}):s="authorize")}}return{method:s,params:r}}(t,e,d),s=yield g(i,r);return"authorize"===i&&r.sign_in_payload&&!s.sign_in_result&&(s.sign_in_result=yield function(e,t,i){var r;return tH(this,void 0,void 0,function*(){var s,n,a,o;let c=null!=(r=e.domain)?r:window.location.host,l=t.accounts[0].address,h=(o=function(e){let t=`${e.domain} wants you to sign in with your Solana account:
`;t+=`${e.address}`,e.statement&&(t+=`

${e.statement}`);let i=[];if(e.uri&&i.push(`URI: ${e.uri}`),e.version&&i.push(`Version: ${e.version}`),e.chainId&&i.push(`Chain ID: ${e.chainId}`),e.nonce&&i.push(`Nonce: ${e.nonce}`),e.issuedAt&&i.push(`Issued At: ${e.issuedAt}`),e.expirationTime&&i.push(`Expiration Time: ${e.expirationTime}`),e.notBefore&&i.push(`Not Before: ${e.notBefore}`),e.requestId&&i.push(`Request ID: ${e.requestId}`),e.resources)for(let t of(i.push("Resources:"),e.resources))i.push(`- ${t}`);return i.length&&(t+=`

${i.join("\n")}`),t}(Object.assign(Object.assign({},e),{domain:c,address:(s=tV(l),(n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Object.freeze({...a={read(e,t){let i=0===t?e:e.slice(t);if(0===i.length)return["",0];let r=i.findIndex(e=>0!==e);r=-1===r?i.length:r;let s=n[0].repeat(r);return r===i.length?[s,e.length]:[s+function(e,t){let i=BigInt(t.length),r=[];for(;e>0n;)r.unshift(t[Number(e%i)]),e/=i;return r.join("")}(i.slice(r).reduce((e,t)=>256n*e+BigInt(t),0n),n),e.length]}},decode:(e,t=0)=>a.read(e,t)[0]})).decode(s))})),window.btoa(o)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),u=tV((yield i("sign_messages",{addresses:[l],payloads:[h]})).signed_payloads[0]),d=t$(u.slice(0,u.length-64)),p=t$(u.slice(u.length-64));return{address:l,signed_message:0==d.length?h:d,signature:p}})}(r.sign_in_payload,s,g)),function(e,t,i){if("getCapabilities"===e)switch(i){case"legacy":{let e=["solana:signTransactions"];return!0===t.supports_clone_authorization&&e.push(tF),Object.assign(Object.assign({},t),{features:e})}case"v1":return Object.assign(Object.assign({},t),{supports_sign_and_send_transactions:!0,supports_clone_authorization:t.features.includes(tF)})}return t}(t,s,d)})}),e[t]),defineProperty:()=>!1,deleteProperty:()=>!1}));try{t((yield e(y)))}catch(e){r(e)}finally{u(),n.close()}}}}),m=()=>{u&&u(),h={__type:"connecting",associationKeypair:s},void 0===i&&(i=Date.now()),(n=new WebSocket(a,["com.solana.mobilewalletadapter.v1"])).addEventListener("open",g),n.addEventListener("close",f),n.addEventListener("error",y),n.addEventListener("message",w),u=()=>{window.clearTimeout(d),n.removeEventListener("open",g),n.removeEventListener("close",f),n.removeEventListener("error",y),n.removeEventListener("message",w)}};m()})})}(e,i?{baseUri:i}:void 0)}catch(e){throw ir(this,et,"f")!==r&&(yield new Promise(()=>{})),e instanceof Error&&"SolanaMobileWalletAdapterError"===e.name&&"ERROR_WALLET_NOT_FOUND"===e.code&&(yield ir(this,en,"f").call(this,this)),e}})),ey.set(this,()=>{if(!ir(this,J,"f"))throw Error("Wallet not connected");return{authToken:ir(this,J,"f").auth_token,chain:ir(this,J,"f").chain}}),ew.set(this,e=>e.map(e=>{var t,i;let r=iu(e.address);return{address:t9.default.encode(r),publicKey:r,label:e.label,icon:e.icon,chains:null!=(t=e.chains)?t:ir(this,ei,"f"),features:null!=(i=e.features)?i:ip}})),em.set(this,e=>ii(this,void 0,void 0,function*(){let{authToken:t,chain:i}=ir(this,ey,"f").call(this);try{let r=e.map(e=>ih(e));return yield ir(this,ef,"f").call(this,e=>ii(this,void 0,void 0,function*(){return yield ir(this,ep,"f").call(this,e,t,i),(yield e.signTransactions({payloads:r})).signed_payloads.map(iu)}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),eM.set(this,(e,t)=>ii(this,void 0,void 0,function*(){let{authToken:i,chain:r}=ir(this,ey,"f").call(this);try{return yield ir(this,ef,"f").call(this,s=>ii(this,void 0,void 0,function*(){let[n,a]=yield Promise.all([s.getCapabilities(),ir(this,ep,"f").call(this,s,i,r)]);if(n.supports_sign_and_send_transactions){let i=ih(e);return(yield s.signAndSendTransactions(Object.assign(Object.assign({},t),{payloads:[i]}))).signatures.map(iu)[0]}throw Error("connected wallet does not support signAndSendTransaction")}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),eN.set(this,(...e)=>ii(this,void 0,void 0,function*(){let t=[];for(let i of e){let e=yield ir(this,eM,"f").call(this,i.transaction,i.options);t.push({signature:e})}return t})),ev.set(this,(...e)=>ii(this,void 0,void 0,function*(){return(yield ir(this,em,"f").call(this,e.map(({transaction:e})=>e))).map(e=>({signedTransaction:e}))})),eI.set(this,(...e)=>ii(this,void 0,void 0,function*(){let{authToken:t,chain:i}=ir(this,ey,"f").call(this),r=e.map(({account:e})=>ih(e.publicKey)),s=e.map(({message:e})=>ih(e));try{return yield ir(this,ef,"f").call(this,e=>ii(this,void 0,void 0,function*(){return yield ir(this,ep,"f").call(this,e,t,i),(yield e.signMessages({addresses:r,payloads:s})).signed_payloads.map(iu).map(e=>({signedMessage:e,signature:e.slice(-64)}))}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),eb.set(this,(...e)=>ii(this,void 0,void 0,function*(){let t=[];if(!(e.length>1))return[(yield ir(this,eE,"f").call(this,e[0]))];for(let i of e)t.push((yield ir(this,eE,"f").call(this,i)));return t})),eE.set(this,e=>ii(this,void 0,void 0,function*(){var t,i,r;is(this,ee,!0,"f");try{let s=yield ir(this,eh,"f").call(this,Object.assign(Object.assign({},e),{domain:null!=(t=null==e?void 0:e.domain)?t:window.location.host}));if(!s.sign_in_result)throw Error("Sign in failed, no sign in result returned by wallet");let n=s.sign_in_result.address,a=s.accounts.find(e=>e.address==n);return{account:Object.assign(Object.assign({},null!=a?a:{address:t9.default.encode(iu(n))}),{publicKey:iu(n),chains:null!=(i=null==a?void 0:a.chains)?i:ir(this,ei,"f"),features:null!=(r=null==a?void 0:a.features)?r:s.capabilities.features}),signedMessage:iu(s.sign_in_result.signed_message),signature:iu(s.sign_in_result.signature)}}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}finally{is(this,ee,!1,"f")}})),is(this,X,e.authorizationCache,"f"),is(this,Z,e.appIdentity,"f"),is(this,ei,e.chains,"f"),is(this,er,e.chainSelector,"f"),is(this,en,e.onWalletNotFound,"f"),is(this,es,{[tY.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ir(this,eN,"f")},[tQ.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ir(this,ev,"f")}},"f")}get version(){return ir(this,$,"f")}get name(){return ir(this,V,"f")}get url(){return ir(this,G,"f")}get icon(){return ir(this,F,"f")}get chains(){return ir(this,ei,"f")}get features(){return Object.assign({[t5]:{version:"1.0.0",connect:ir(this,el,"f")},[t8]:{version:"1.0.0",disconnect:ir(this,eg,"f")},[t6]:{version:"1.0.0",on:ir(this,ea,"f")},[tR.SolanaSignMessage]:{version:"1.0.0",signMessage:ir(this,eI,"f")},[tU]:{version:"1.0.0",signIn:ir(this,eb,"f")}},ir(this,es,"f"))}get accounts(){var e,t;return null!=(t=null==(e=ir(this,J,"f"))?void 0:e.accounts)?t:[]}get connected(){return!!ir(this,J,"f")}get isAuthorized(){return!!ir(this,J,"f")}get currentAuthorization(){return ir(this,J,"f")}get cachedAuthorizationResult(){return ir(this,X,"f").get()}}H=new WeakMap,$=new WeakMap,V=new WeakMap,G=new WeakMap,F=new WeakMap,Z=new WeakMap,J=new WeakMap,X=new WeakMap,ee=new WeakMap,et=new WeakMap,ei=new WeakMap,er=new WeakMap,es=new WeakMap,en=new WeakMap,ea=new WeakMap,el=new WeakMap,eh=new WeakMap,eu=new WeakMap,ed=new WeakMap,ep=new WeakMap,eg=new WeakMap,ef=new WeakMap,ey=new WeakMap,ew=new WeakMap,em=new WeakMap,eM=new WeakMap,eN=new WeakMap,ev=new WeakMap,eI=new WeakMap,eb=new WeakMap,eE=new WeakMap,K=new WeakSet,eo=function(e,...t){var i;null==(i=ir(this,H,"f")[e])||i.forEach(e=>e.apply(null,t))},ec=function(e,t){var i;ir(this,H,"f")[e]=null==(i=ir(this,H,"f")[e])?void 0:i.filter(e=>t!==e)},new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakSet;Event,new WeakMap;class iy extends il{constructor(){super(...arguments),this.contentStyles=im,this.contentHtml=iw}initWithError(e){super.init(),this.populateError(e)}populateError(e){var t,i;let r=null==(t=this.dom)?void 0:t.getElementById("mobile-wallet-adapter-error-message"),s=null==(i=this.dom)?void 0:i.getElementById("mobile-wallet-adapter-error-action");if(r){if("SolanaMobileWalletAdapterError"===e.name)switch(e.code){case"ERROR_WALLET_NOT_FOUND":r.innerHTML="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",s&&s.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":r.innerHTML="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.",s&&(s.style.display="none");return}r.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}let iw=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,im=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`,iM="SolanaMobileWalletAdapterDefaultAuthorizationCache";function iN(e,t,i,r){return new(i||(i=Promise))(function(s,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function o(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(a,o)}c((r=r.apply(e,t||[])).next())})}function iv(e,t,i,r){if("a"===i&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)}function iI(e,t,i,r,s){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,i):s?s.value=i:t.set(e,i),i}let ib="standard:connect";function iE(e){return window.btoa(String.fromCharCode.call(null,...e))}function iA(e){switch(e){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return e}}class iD extends tP{constructor(e,t){super(),eA.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),eD.set(this,void 0),eC.set(this,!1),eT.set(this,"undefined"!=typeof window&&window.isSecureContext&&"undefined"!=typeof document&&/android/i.test(navigator.userAgent)?L.Loadable:L.Unsupported),ej.set(this,void 0),e_.set(this,void 0),eS.set(this,void 0),eO.set(this,e=>iN(this,void 0,void 0,function*(){if(e.accounts&&e.accounts.length>0){iv(this,eA,"m",ez).call(this);let t=yield iv(this,ej,"f").call(this,e.accounts);t!==iv(this,e_,"f")&&(iI(this,e_,t,"f"),iI(this,eS,void 0,"f"),this.emit("connect",this.publicKey))}})),iI(this,ej,e=>iN(this,void 0,void 0,function*(){var i;let r=yield t.addressSelector.select(e.map(({publicKey:e})=>iE(e)));return null!=(i=e.find(({publicKey:e})=>iE(e)===r))?i:e[0]}),"f"),iI(this,eD,e,"f"),iv(this,eD,"f").features["standard:events"].on("change",iv(this,eO,"f")),this.name=iv(this,eD,"f").name,this.icon=iv(this,eD,"f").icon,this.url=iv(this,eD,"f").url}get publicKey(){var e;if(!iv(this,eS,"f")&&iv(this,e_,"f"))try{iI(this,eS,new tk.PublicKey(iv(this,e_,"f").publicKey),"f")}catch(e){throw new tb(e instanceof Error&&(null==e?void 0:e.message)||"Unknown error",e)}return null!=(e=iv(this,eS,"f"))?e:null}get connected(){return iv(this,eD,"f").connected}get connecting(){return iv(this,eC,"f")}get readyState(){return iv(this,eT,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return iN(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return iN(this,void 0,void 0,function*(){iv(this,eA,"m",ex).call(this,!0)})}connect(){return iN(this,void 0,void 0,function*(){iv(this,eA,"m",ex).call(this)})}performAuthorization(e){return iN(this,void 0,void 0,function*(){try{let t=yield iv(this,eD,"f").cachedAuthorizationResult;if(t)return yield iv(this,eD,"f").features[ib].connect({silent:!0}),t;return e?yield iv(this,eD,"f").features[tU].signIn(e):yield iv(this,eD,"f").features[ib].connect(),yield yield iv(this,eD,"f").cachedAuthorizationResult}catch(e){throw new tM(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return iN(this,void 0,void 0,function*(){return yield iv(this,eA,"m",ek).call(this,()=>iN(this,void 0,void 0,function*(){iI(this,eC,!1,"f"),iI(this,eS,void 0,"f"),iI(this,e_,void 0,"f"),yield iv(this,eD,"f").features["standard:disconnect"].disconnect(),this.emit("disconnect")}))})}signIn(e){return iN(this,void 0,void 0,function*(){return iv(this,eA,"m",ek).call(this,()=>iN(this,void 0,void 0,function*(){var t;if(iv(this,eT,"f")!==L.Installed&&iv(this,eT,"f")!==L.Loadable)throw new ty;iI(this,eC,!0,"f");try{let i=yield iv(this,eD,"f").features[tU].signIn(Object.assign(Object.assign({},e),{domain:null!=(t=null==e?void 0:e.domain)?t:window.location.host}));if(i.length>0)return i[0];throw Error("Sign in failed, no sign in result returned by wallet")}catch(e){throw new tM(e instanceof Error&&e.message||"Unknown error",e)}finally{iI(this,eC,!1,"f")}}))})}signMessage(e){return iN(this,void 0,void 0,function*(){return yield iv(this,eA,"m",ek).call(this,()=>iN(this,void 0,void 0,function*(){let t=iv(this,eA,"m",eL).call(this);try{return(yield iv(this,eD,"f").features[tR.SolanaSignMessage].signMessage({account:t,message:e}))[0].signature}catch(e){throw new tC(null==e?void 0:e.message,e)}}))})}sendTransaction(e,t,i){return iN(this,void 0,void 0,function*(){return yield iv(this,eA,"m",ek).call(this,()=>iN(this,void 0,void 0,function*(){let r=iv(this,eA,"m",eL).call(this);try{if(tY.SolanaSignAndSendTransaction in iv(this,eD,"f").features){let t=iA(iv(this,eD,"f").currentAuthorization.chain),[s]=(yield iv(this,eD,"f").features[tY.SolanaSignAndSendTransaction].signAndSendTransaction({account:r,transaction:e.serialize(),chain:t,options:i?{skipPreflight:i.skipPreflight,maxRetries:i.maxRetries}:void 0})).map(e=>iE(e.signature));return s}{let[r]=yield iv(this,eA,"m",eP).call(this,[e]);if("version"in r)return yield t.sendTransaction(r);{let e=r.serialize();return yield t.sendRawTransaction(e,Object.assign(Object.assign({},i),{preflightCommitment:function(){let e,r;switch(t.commitment){case"confirmed":case"finalized":case"processed":e=t.commitment;break;default:e="finalized"}switch(null==i?void 0:i.preflightCommitment){case"confirmed":case"finalized":case"processed":r=i.preflightCommitment;break;case void 0:r=e;break;default:r="finalized"}let s="finalized"===r?2:+("confirmed"===r),n="finalized"===e?2:+("confirmed"===e);return s<n?r:e}()}))}}}catch(e){throw new tA(null==e?void 0:e.message,e)}}))})}signTransaction(e){return iN(this,void 0,void 0,function*(){return yield iv(this,eA,"m",ek).call(this,()=>iN(this,void 0,void 0,function*(){let[t]=yield iv(this,eA,"m",eP).call(this,[e]);return t}))})}signAllTransactions(e){return iN(this,void 0,void 0,function*(){return yield iv(this,eA,"m",ek).call(this,()=>iN(this,void 0,void 0,function*(){return yield iv(this,eA,"m",eP).call(this,e)}))})}}eD=new WeakMap,eC=new WeakMap,eT=new WeakMap,ej=new WeakMap,e_=new WeakMap,eS=new WeakMap,eO=new WeakMap,eA=new WeakSet,ex=function(e=!1){return iN(this,void 0,void 0,function*(){if(!this.connecting&&!this.connected)return yield iv(this,eA,"m",ek).call(this,()=>iN(this,void 0,void 0,function*(){if(iv(this,eT,"f")!==L.Installed&&iv(this,eT,"f")!==L.Loadable)throw new ty;iI(this,eC,!0,"f");try{yield iv(this,eD,"f").features[ib].connect({silent:e})}catch(e){throw new tM(e instanceof Error&&e.message||"Unknown error",e)}finally{iI(this,eC,!1,"f")}}))})},ez=function(){iv(this,eT,"f")!==L.Installed&&this.emit("readyStateChange",iI(this,eT,L.Installed,"f"))},eL=function(){if(!iv(this,eD,"f").isAuthorized||!iv(this,e_,"f"))throw new tE;return iv(this,e_,"f")},eP=function(e){return iN(this,void 0,void 0,function*(){let t=iv(this,eA,"m",eL).call(this);try{if(tQ.SolanaSignTransaction in iv(this,eD,"f").features)return iv(this,eD,"f").features[tQ.SolanaSignTransaction].signTransaction(...e.map(e=>({account:t,transaction:e.serialize()}))).then(e=>e.map(e=>{let t=e.signedTransaction,i=t[0],r=tk.VersionedMessage.deserializeMessageVersion(t.slice(64*i+1,t.length));return"legacy"===r?tk.Transaction.from(t):tk.VersionedTransaction.deserialize(t)}));throw Error("Connected wallet does not support signing transactions")}catch(e){throw new tD(null==e?void 0:e.message,e)}})},ek=function(e){return iN(this,void 0,void 0,function*(){try{return yield e()}catch(e){throw this.emit("error",e),e}})};class iC extends iD{constructor(e){var t;const i=iA(null!=(t=e.chain)?t:e.cluster);super(new ig({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>iN(this,void 0,void 0,function*(){return yield e.authorizationResultCache.get()}),clear:e.authorizationResultCache.clear},chains:[i],chainSelector:{select(e){return ii(this,void 0,void 0,function*(){return 1===e.length?e[0]:e.includes(t7)?t7:e[0]})}},onWalletNotFound:()=>iN(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:i})}}class iT extends iC{}function ij(e){return iN(this,void 0,void 0,function*(){return function(){return ii(this,void 0,void 0,function*(){if("undefined"!=typeof window){let e=window.navigator.userAgent.toLowerCase(),t=new iy;e.includes("wv")?t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),t.open()}})}()})}let i_=function(e){return t5 in e.features&&t6 in e.features&&(tY.SolanaSignAndSendTransaction in e.features||tQ.SolanaSignTransaction in e.features)};function iS(e){switch(e){case"processed":case"confirmed":case"finalized":case void 0:return e;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap;var iO=function(e,t,i,r){if("a"===i&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},ix=function(e,t,i,r,s){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,i):s?s.value=i:t.set(e,i),i};class iz extends t_{get name(){return iO(this,eK,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return iO(this,eK,"f").icon}get readyState(){return iO(this,eH,"f")}get publicKey(){return iO(this,eY,"f")}get connecting(){return iO(this,eQ,"f")}get supportedTransactionVersions(){return iO(this,eW,"f")}get wallet(){return iO(this,eK,"f")}get standard(){return!0}constructor({wallet:e}){super(),eU.add(this),eR.set(this,void 0),eY.set(this,void 0),eQ.set(this,void 0),eB.set(this,void 0),eq.set(this,void 0),eW.set(this,void 0),eK.set(this,void 0),eH.set(this,"undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.Installed),eZ.set(this,e=>{if("accounts"in e){let e=iO(this,eK,"f").accounts[0];iO(this,eR,"f")&&!iO(this,eB,"f")&&e!==iO(this,eR,"f")&&(e?iO(this,eU,"m",eV).call(this,e):(this.emit("error",new tN),iO(this,eU,"m",eG).call(this)))}"features"in e&&iO(this,eU,"m",eF).call(this)}),ix(this,eK,e,"f"),ix(this,eR,null,"f"),ix(this,eY,null,"f"),ix(this,eQ,!1,"f"),ix(this,eB,!1,"f"),ix(this,eq,iO(this,eK,"f").features[t6].on("change",iO(this,eZ,"f")),"f"),iO(this,eU,"m",eF).call(this)}destroy(){ix(this,eR,null,"f"),ix(this,eY,null,"f"),ix(this,eQ,!1,"f"),ix(this,eB,!1,"f");let e=iO(this,eq,"f");e&&(ix(this,eq,null,"f"),e())}async autoConnect(){return iO(this,eU,"m",e$).call(this,{silent:!0})}async connect(){return iO(this,eU,"m",e$).call(this)}async disconnect(){if(t8 in iO(this,eK,"f").features)try{ix(this,eB,!0,"f"),await iO(this,eK,"f").features[t8].disconnect()}catch(e){this.emit("error",new tv(e?.message,e))}finally{ix(this,eB,!1,"f")}iO(this,eU,"m",eG).call(this)}async sendTransaction(e,t,i={}){try{var r;let s,n=iO(this,eR,"f");if(!n)throw new tE;if(tY.SolanaSignAndSendTransaction in iO(this,eK,"f").features)if(n.features.includes(tY.SolanaSignAndSendTransaction))s=tY.SolanaSignAndSendTransaction;else if(tQ.SolanaSignTransaction in iO(this,eK,"f").features&&n.features.includes(tQ.SolanaSignTransaction))s=tQ.SolanaSignTransaction;else throw new tI;else if(tQ.SolanaSignTransaction in iO(this,eK,"f").features){if(!n.features.includes(tQ.SolanaSignTransaction))throw new tI;s=tQ.SolanaSignTransaction}else throw new tm;let a=(r=t.rpcEndpoint).includes("https://api.mainnet-beta.solana.com")?t7:/\bdevnet\b/i.test(r)?ie:/\btestnet\b/i.test(r)?it:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?"solana:localnet":t7;if(!n.chains.includes(a))throw new tA;try{let r,{signers:o,...c}=i;if(tx(e)?(o?.length&&e.sign(o),r=e.serialize()):(e=await this.prepareTransaction(e,t,c),o?.length&&e.partialSign(...o),r=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===tY.SolanaSignAndSendTransaction){let[e]=await iO(this,eK,"f").features[tY.SolanaSignAndSendTransaction].signAndSendTransaction({account:n,chain:a,transaction:r,options:{preflightCommitment:iS(c.preflightCommitment||t.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return t9.default.encode(e.signature)}{let[e]=await iO(this,eK,"f").features[tQ.SolanaSignTransaction].signTransaction({account:n,chain:a,transaction:r,options:{preflightCommitment:iS(c.preflightCommitment||t.commitment),minContextSlot:c.minContextSlot}});return await t.sendRawTransaction(e.signedTransaction,{...c,preflightCommitment:iS(c.preflightCommitment||t.commitment)})}}catch(e){if(e instanceof tf)throw e;throw new tA(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}eR=new WeakMap,eY=new WeakMap,eQ=new WeakMap,eB=new WeakMap,eq=new WeakMap,eW=new WeakMap,eK=new WeakMap,eH=new WeakMap,eZ=new WeakMap,eU=new WeakSet,e$=async function(e){try{if(this.connected||this.connecting)return;if(iO(this,eH,"f")!==L.Installed)throw new ty;if(ix(this,eQ,!0,"f"),!iO(this,eK,"f").accounts.length)try{await iO(this,eK,"f").features[t5].connect(e)}catch(e){throw new tM(e?.message,e)}let t=iO(this,eK,"f").accounts[0];if(!t)throw new tI;iO(this,eU,"m",eV).call(this,t)}catch(e){throw this.emit("error",e),e}finally{ix(this,eQ,!1,"f")}},eV=function(e){let t;try{t=new tk.PublicKey(e.address)}catch(e){throw new tb(e?.message,e)}ix(this,eR,e,"f"),ix(this,eY,t,"f"),iO(this,eU,"m",eF).call(this),this.emit("connect",t)},eG=function(){ix(this,eR,null,"f"),ix(this,eY,null,"f"),iO(this,eU,"m",eF).call(this),this.emit("disconnect")},eF=function(){let e=tY.SolanaSignAndSendTransaction in iO(this,eK,"f").features?iO(this,eK,"f").features[tY.SolanaSignAndSendTransaction].supportedTransactionVersions:iO(this,eK,"f").features[tQ.SolanaSignTransaction].supportedTransactionVersions;ix(this,eW,!function(e,t){if(e===t)return!0;let i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}(e,["legacy"])?new Set(e):null,"f"),tQ.SolanaSignTransaction in iO(this,eK,"f").features&&iO(this,eR,"f")?.features.includes(tQ.SolanaSignTransaction)?(this.signTransaction=iO(this,eU,"m",eJ),this.signAllTransactions=iO(this,eU,"m",eX)):(delete this.signTransaction,delete this.signAllTransactions),tR.SolanaSignMessage in iO(this,eK,"f").features&&iO(this,eR,"f")?.features.includes(tR.SolanaSignMessage)?this.signMessage=iO(this,eU,"m",e0):delete this.signMessage,tU in iO(this,eK,"f").features?this.signIn=iO(this,eU,"m",e1):delete this.signIn},eJ=async function(e){try{let t=iO(this,eR,"f");if(!t)throw new tE;if(!(tQ.SolanaSignTransaction in iO(this,eK,"f").features))throw new tm;if(!t.features.includes(tQ.SolanaSignTransaction))throw new tI;try{let i=(await iO(this,eK,"f").features[tQ.SolanaSignTransaction].signTransaction({account:t,transaction:tx(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return tx(e)?tk.VersionedTransaction.deserialize(i):tk.Transaction.from(i)}catch(e){if(e instanceof tf)throw e;throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}},eX=async function(e){try{let t=iO(this,eR,"f");if(!t)throw new tE;if(!(tQ.SolanaSignTransaction in iO(this,eK,"f").features))throw new tm;if(!t.features.includes(tQ.SolanaSignTransaction))throw new tI;try{let i=await iO(this,eK,"f").features[tQ.SolanaSignTransaction].signTransaction(...e.map(e=>({account:t,transaction:tx(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((e,t)=>{let r=i[t].signedTransaction;return tx(e)?tk.VersionedTransaction.deserialize(r):tk.Transaction.from(r)})}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}},e0=async function(e){try{let t=iO(this,eR,"f");if(!t)throw new tE;if(!(tR.SolanaSignMessage in iO(this,eK,"f").features))throw new tm;if(!t.features.includes(tR.SolanaSignMessage))throw new tI;try{return(await iO(this,eK,"f").features[tR.SolanaSignMessage].signMessage({account:t,message:e}))[0].signature}catch(e){throw new tC(e?.message,e)}}catch(e){throw this.emit("error",e),e}},e1=async function(e={}){try{let t;if(!(tU in iO(this,eK,"f").features))throw new tm;try{[t]=await iO(this,eK,"f").features[tU].signIn(e)}catch(e){throw new tT(e?.message,e)}if(!t)throw new tT;return iO(this,eU,"m",eV).call(this,t.account),t}catch(e){throw this.emit("error",e),e}};var iL=function(e,t,i,r){if("a"===i&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},iP=function(e,t,i,r,s){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,i):s?s.value=i:t.set(e,i),i};let ik=new Set,iU={};function iR(...e){return(e=e.filter(e=>!ik.has(e))).length?(e.forEach(e=>{i=void 0,ik.add(e)}),iU.register?.forEach(t=>iB(()=>t(...e))),function(){e.forEach(e=>{i=void 0,ik.delete(e)}),iU.unregister?.forEach(t=>iB(()=>t(...e)))}):()=>{}}function iY(){return i||(i=[...ik]),i}function iQ(e,t){return iU[e]?.push(t)||(iU[e]=[t]),function(){iU[e]=iU[e]?.filter(e=>t!==e)}}function iB(e){try{e()}catch(e){console.error(e)}}class iq extends Event{get detail(){return iL(this,e4,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),e4.set(this,void 0),iP(this,e4,e,"f")}preventDefault(){throw Error("preventDefault cannot be called")}stopImmediatePropagation(){throw Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw Error("stopPropagation cannot be called")}}e4=new WeakMap;var iW=e.i(281675);function iK(e){let t=(0,iW.useRef)(void 0);return void 0===t.current&&(t.current={value:e()}),t.current.value}function iH(e){return e.filter(i_).map(e=>new iz({wallet:e}))}(d=e2||(e2={}))[d.DESKTOP_WEB=0]="DESKTOP_WEB",d[d.MOBILE_WEB=1]="MOBILE_WEB";let i$=(0,iW.createContext)({});var iV=e.i(638243);class iG extends tf{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}var iF=e.i(658070);function iZ({children:e,wallets:t,adapter:i,isUnloadingRef:r,onAutoConnectRequest:s,onConnectError:n,onError:a,onSelectWallet:o}){let c=(0,iW.useRef)(!1),[l,h]=(0,iW.useState)(!1),u=(0,iW.useRef)(!1),[d,p]=(0,iW.useState)(!1),[g,f]=(0,iW.useState)(()=>i?.publicKey??null),[y,w]=(0,iW.useState)(()=>i?.connected??!1),m=(0,iW.useRef)(a);(0,iW.useEffect)(()=>(m.current=a,()=>{m.current=void 0}),[a]);let M=(0,iW.useRef)((e,t)=>(!r.current&&(m.current?m.current(e,t):(console.error(e,t),e instanceof ty&&"undefined"!=typeof window&&t&&window.open(t.url,"_blank"))),e)),[N,v]=(0,iW.useState)(()=>t.map(e=>({adapter:e,readyState:e.readyState})).filter(({readyState:e})=>e!==L.Unsupported));(0,iW.useEffect)(()=>{function e(e){v(t=>{let i=t.findIndex(({adapter:e})=>e===this);if(-1===i)return t;let{adapter:r}=t[i];return[...t.slice(0,i),{adapter:r,readyState:e},...t.slice(i+1)].filter(({readyState:e})=>e!==L.Unsupported)})}return v(e=>t.map((t,i)=>{let r=e[i];return r&&r.adapter===t&&r.readyState===t.readyState?r:{adapter:t,readyState:t.readyState}}).filter(({readyState:e})=>e!==L.Unsupported)),t.forEach(t=>t.on("readyStateChange",e,t)),()=>{t.forEach(t=>t.off("readyStateChange",e,t))}},[i,t]);let I=(0,iW.useMemo)(()=>N.find(e=>e.adapter===i)??null,[i,N]);(0,iW.useEffect)(()=>{if(!i)return;let e=e=>{f(e),c.current=!1,h(!1),w(!0),u.current=!1,p(!1)},t=()=>{r.current||(f(null),c.current=!1,h(!1),w(!1),u.current=!1,p(!1))},s=e=>{M.current(e,i)};return i.on("connect",e),i.on("disconnect",t),i.on("error",s),()=>{i.off("connect",e),i.off("disconnect",t),i.off("error",s),t()}},[i,r]);let b=(0,iW.useRef)(!1);(0,iW.useEffect)(()=>()=>{b.current=!1},[i]),(0,iW.useEffect)(()=>{b.current||c.current||y||!s||I?.readyState!==L.Installed&&I?.readyState!==L.Loadable||(c.current=!0,h(!0),b.current=!0,async function(){try{await s()}catch{n()}finally{h(!1),c.current=!1}}())},[y,s,n,I]);let E=(0,iW.useCallback)(async(e,t,r)=>{if(!i)throw M.current(new iG);if(!y)throw M.current(new tE,i);return await i.sendTransaction(e,t,r)},[i,y]),A=(0,iW.useMemo)(()=>i&&"signTransaction"in i?async e=>{if(!y)throw M.current(new tE,i);return await i.signTransaction(e)}:void 0,[i,y]),D=(0,iW.useMemo)(()=>i&&"signAllTransactions"in i?async e=>{if(!y)throw M.current(new tE,i);return await i.signAllTransactions(e)}:void 0,[i,y]),C=(0,iW.useMemo)(()=>i&&"signMessage"in i?async e=>{if(!y)throw M.current(new tE,i);return await i.signMessage(e)}:void 0,[i,y]),T=(0,iW.useMemo)(()=>i&&"signIn"in i?async e=>await i.signIn(e):void 0,[i]),j=(0,iW.useCallback)(async()=>{if(c.current||u.current||I?.adapter.connected)return;if(!I)throw M.current(new iG);let{adapter:e,readyState:t}=I;if(t!==L.Installed&&t!==L.Loadable)throw M.current(new ty,e);c.current=!0,h(!0);try{await e.connect()}catch(e){throw n(),e}finally{h(!1),c.current=!1}},[n,I]),_=(0,iW.useCallback)(async()=>{if(!u.current&&i){u.current=!0,p(!0);try{await i.disconnect()}finally{p(!1),u.current=!1}}},[i]);return iW.default.createElement(iF.WalletContext.Provider,{value:{autoConnect:!!s,wallets:N,wallet:I,publicKey:g,connected:y,connecting:l,disconnecting:d,select:o,connect:j,disconnect:_,sendTransaction:E,signTransaction:A,signAllTransactions:D,signMessage:C,signIn:T}},e)}function iJ(e){return function({adapters:e,userAgentString:t}){return e.some(e=>e.name!==id&&e.readyState===L.Installed)?e2.DESKTOP_WEB:t&&/android/i.test(t)&&!/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)?e2.MOBILE_WEB:e2.DESKTOP_WEB}({adapters:e,userAgentString:(void 0===r&&(r=globalThis.navigator?.userAgent??null),r)})===e2.MOBILE_WEB}function iX({children:e,wallets:t,autoConnect:i,localStorageKey:r="walletName",onError:n}){let{connection:a}=(0,iW.useContext)(i$),o=function(e){var t;let i,r=iK(()=>new Set),{get:n,on:a}=iK(()=>(function(){if(s||(s=function(){if(s||(s=Object.freeze({register:iR,get:iY,on:iQ}),"undefined"==typeof window))return s;let e=Object.freeze({register:iR});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(e))}catch(e){console.error("wallet-standard:register-wallet event listener could not be added\n",e)}try{window.dispatchEvent(new iq(e))}catch(e){console.error("wallet-standard:app-ready event could not be dispatched\n",e)}return s}(),"undefined"==typeof window))return s;let e=window.navigator.wallets||[];if(!Array.isArray(e))return console.error("window.navigator.wallets is not an array"),s;let{register:t}=s,i=(...e)=>e.forEach(e=>iB(()=>e({register:t})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:i})})}catch(e){return console.error("window.navigator.wallets could not be set"),s}return i(...e),s})()),[o,c]=(0,iW.useState)(()=>iH(n()));(0,iW.useEffect)(()=>{let e=[a("register",(...e)=>c(t=>[...t,...iH(e)])),a("unregister",(...e)=>c(t=>t.filter(t=>e.some(e=>e===t.wallet))))];return()=>e.forEach(e=>e())},[a]);let l=(t=o,i=(0,iW.useRef)(void 0),(0,iW.useEffect)(()=>{i.current=t}),i.current);return(0,iW.useEffect)(()=>{if(!l)return;let e=new Set(o);new Set(l.filter(t=>!e.has(t))).forEach(e=>e.destroy())},[l,o]),(0,iW.useEffect)(()=>()=>o.forEach(e=>e.destroy()),[]),(0,iW.useMemo)(()=>[...o,...e.filter(({name:e})=>!o.some(t=>t.name===e)||(r.has(e)||(r.add(e),console.warn(`${e} was registered as a Standard Wallet. The Wallet Adapter for ${e} can be removed from your app.`)),!1))],[o,e,r])}(t),c=(0,iW.useMemo)(()=>{var e;if(!iJ(o))return null;let t=o.find(e=>e.name===id);return t?t:new iT({addressSelector:{select(e){return iN(this,void 0,void 0,function*(){return e[0]})}},appIdentity:{uri:function(){let e=globalThis.location;if(e)return`${e.protocol}//${e.host}`}()},authorizationResultCache:function(){let e;try{e=window.localStorage}catch(e){}return{clear(){return ii(this,void 0,void 0,function*(){if(e)try{e.removeItem(iM)}catch(e){}})},get(){return ii(this,void 0,void 0,function*(){if(e)try{let t=JSON.parse(e.getItem(iM));if(!t||!t.accounts)return t||void 0;{let e=t.accounts.map(e=>Object.assign(Object.assign({},e),{publicKey:"publicKey"in e?new Uint8Array(Object.values(e.publicKey)):t9.default.decode(e.address)}));return Object.assign(Object.assign({},t),{accounts:e})}}catch(e){}})},set(t){return ii(this,void 0,void 0,function*(){if(e)try{e.setItem(iM,JSON.stringify(t))}catch(e){}})}}}(),cluster:(e=a?.rpcEndpoint)?/devnet/i.test(e)?"devnet":/testnet/i.test(e)?"testnet":"mainnet-beta":"mainnet-beta",onWalletNotFound:ij})},[o,a?.rpcEndpoint]),l=(0,iW.useMemo)(()=>null==c||-1!==o.indexOf(c)?o:[c,...o],[o,c]),[h,u]=(0,iV.useLocalStorage)(r,iJ(o)?id:null),d=(0,iW.useMemo)(()=>l.find(e=>e.name===h)??null,[l,h]),p=(0,iW.useCallback)(e=>{h!==e&&(d&&d.name!==id&&d.disconnect(),u(e))},[d,u,h]);(0,iW.useEffect)(()=>{if(d)return d.on("disconnect",e),()=>{d.off("disconnect",e)};function e(){y.current||h===id&&iJ(o)||u(null)}},[d,o,u,h]);let g=(0,iW.useRef)(!1),f=(0,iW.useMemo)(()=>{if(i&&d)return async()=>{(!0===i||await i(d))&&(g.current?await d.connect():await d.autoConnect())}},[i,d]),y=(0,iW.useRef)(!1);(0,iW.useEffect)(()=>{if(h===id&&iJ(o)){y.current=!1;return}function e(){y.current=!0}return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[o,h]);let w=(0,iW.useCallback)(()=>{d&&d.name!==id&&p(null)},[d,p]),m=(0,iW.useCallback)(e=>{g.current=!0,p(e)},[p]);return iW.default.createElement(iZ,{wallets:l,adapter:d,isUnloadingRef:y,onAutoConnectRequest:f,onConnectError:w,onError:n,onSelectWallet:m},e)}class i0 extends tL{constructor(e={}){super(),this.name="Bitget",this.url="https://web3.bitget.com",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSIjMDAxRjI5Ii8+CjxwYXRoIGQ9Ik0yMTkuOTQ4IDk1LjcwMjJDMjAxLjYyMyA5NS42OTI5IDE4My4zMyA5NS42ODM1IDE2NC45NDEgOTUuNzExNkMxNTMuODIyIDk1LjcxMTYgMTQ5LjY1MSAxMDkuNjcxIDE1Ny45MjEgMTE3LjkzOUwyODMuMDk4IDI0My4xMTdDMjg3LjAwNCAyNDYuNjkgMjg5LjQ0MSAyNTAuNTc0IDI4OS41MyAyNTUuNjkzQzI4OS40NDEgMjYwLjgxMiAyODcuMDA0IDI2NC42OTYgMjgzLjA5OCAyNjguMjY5TDE1Ny45MjEgMzkzLjQ0NkMxNDkuNjUxIDQwMS43MTUgMTUzLjgyMiA0MTUuNjc0IDE2NC45NDEgNDE1LjY3NEMxODMuMzMgNDE1LjcwMiAyMDEuNjIzIDQxNS42OTMgMjE5Ljk0OCA0MTUuNjgzQzIyOS4xMjIgNDE1LjY3OSAyMzguMzA1IDQxNS42NzQgMjQ3LjUxMSA0MTUuNjc0QzI1OS41NTUgNDE1LjY3NCAyNjYuNzIgNDA5LjI0IDI3My4xNTQgNDAyLjgwNUwzODYuMDQ3IDI4OS45MTJDMzk1LjA1NyAyODAuOTAyIDQwMy4xMTkgMjY4LjkzOSA0MDMuMDA5IDI1NS42OTNDNDAzLjExOSAyNDIuNDQ3IDM5NS4wNTcgMjMwLjQ4NCAzODYuMDQ3IDIyMS40NzRMMjczLjE1NCAxMDguNThDMjY2LjcyIDEwMi4xNDYgMjU5LjU1NSA5NS43MTE2IDI0Ny41MTEgOTUuNzExNkMyMzguMzA1IDk1LjcxMTYgMjI5LjEyMiA5NS43MDY5IDIxOS45NDggOTUuNzAyMloiIGZpbGw9IiMwMEYwRkYiLz4KPC9zdmc+Cg==",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&tS(()=>!!window.bitkeep?.solana?.isBitKeep&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{let e,t;if(this.connected||this.connecting)return;if(this._readyState!==L.Installed)throw new ty;this._connecting=!0;let i=window.bitkeep.solana;try{e=await i.getAccount()}catch(e){throw new tI(e?.message,e)}try{t=new tk.PublicKey(e)}catch(e){throw new tb(e?.message,e)}this._wallet=i,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(e){this.emit("error",new tv(e?.message,e))}}this.emit("disconnect")}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new tE;try{let{signature:i}=await t.signMessage(e);return i}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}class i1 extends tz{constructor(e={}){super(),this.name="Bitpie",this.url="https://bitpiecn.com",this.icon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjY0IiB2aWV3Qm94PSIwIDAgNjQgNjQiIHdpZHRoPSI2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMxZTNkYTAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMzNzUwZGUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjUyLjU0NTc1JSIgeDI9IjUyLjU0NTc1JSIgeGxpbms6aHJlZj0iI2EiIHkxPSIxMDAlIiB5Mj0iMCUiLz48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSI1MCUiIHgyPSI1MCUiIHkxPSIwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzFkM2JhMyIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMTczNzkzIiBzdG9wLW9wYWNpdHk9Ii42NTI5MzgiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZCIgeDE9IjUwJSIgeDI9IjUwJSIgeGxpbms6aHJlZj0iI2EiIHkxPSIxMDAlIiB5Mj0iMCUiLz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Im0xOCAwaDI4YzkuOTQxMTI1NSAwIDE4IDguMDU4ODc0NSAxOCAxOHYyOGMwIDkuOTQxMTI1NS04LjA1ODg3NDUgMTgtMTggMThoLTI4Yy05Ljk0MTEyNTUgMC0xOC04LjA1ODg3NDUtMTgtMTh2LTI4YzAtOS45NDExMjU1IDguMDU4ODc0NS0xOCAxOC0xOHoiIGZpbGw9InVybCgjYikiLz48Y2lyY2xlIGN4PSIzMi4yODU3MTQiIGN5PSIzMi4yODU3MTQiIGZpbGw9IiNmZmYiIHI9IjI0LjI4NTcxNCIvPjxwYXRoIGQ9Im0zMiAwYzE3LjY3MzExMiAwIDMyIDE0LjMyNjg4OCAzMiAzMnMtMTQuMzI2ODg4IDMyLTMyIDMyLTMyLTE0LjMyNjg4OC0zMi0zMiAxNC4zMjY4ODgtMzIgMzItMzJ6bS0uMTQzNDk3OCA3LjYwNTM4MTE3Yy0xMy40NzI3NzU5IDAtMjQuMzk0NjE4NzkgMTAuOTIxODQyODMtMjQuMzk0NjE4NzkgMjQuMzk0NjE4ODNzMTAuOTIxODQyODkgMjQuMzk0NjE4OCAyNC4zOTQ2MTg3OSAyNC4zOTQ2MTg4YzEzLjQ3Mjc3NiAwIDI0LjM5NDYxODktMTAuOTIxODQyOCAyNC4zOTQ2MTg5LTI0LjM5NDYxODhzLTEwLjkyMTg0MjktMjQuMzk0NjE4ODMtMjQuMzk0NjE4OS0yNC4zOTQ2MTg4M3oiIGZpbGw9InVybCgjYykiLz48cGF0aCBkPSJtMjkuMDkwOTA5MSA0NC4zNjM2MzY0YzAgMi4wMDgzMDgxLTEuNjI4MDU1NSAzLjYzNjM2MzYtMy42MzYzNjM2IDMuNjM2MzYzNi0yLjAwODMwODIgMC0zLjYzNjM2MzctMS42MjgwNTU1LTMuNjM2MzYzNy0zLjYzNjM2MzZsLS4wMDAxODE4LTIuMTgyNjM2NC0yLjE4MTYzNjQuMDAwODE4MmMtMi4wMDgzMDgxIDAtMy42MzYzNjM2LTEuNjI4MDU1NS0zLjYzNjM2MzYtMy42MzYzNjM3IDAtMi4wMDgzMDgxIDEuNjI4MDU1NS0zLjYzNjM2MzYgMy42MzYzNjM2LTMuNjM2MzYzNmwyLjE4MTYzNjQtLjAwMDA5MDl2LTUuODE5bC0yLjE4MTYzNjQuMDAwOTA5MWMtMi4wMDgzMDgxIDAtMy42MzYzNjM2LTEuNjI4MDU1NS0zLjYzNjM2MzYtMy42MzYzNjM2IDAtMi4wMDgzMDgyIDEuNjI4MDU1NS0zLjYzNjM2MzcgMy42MzYzNjM2LTMuNjM2MzYzN2wyLjE4MTYzNjQtLjAwMDE4MTguMDAwMTgxOC0yLjE4MTYzNjRjMC0yLjAwODMwODEgMS42MjgwNTU1LTMuNjM2MzYzNiAzLjYzNjM2MzctMy42MzYzNjM2IDIuMDA4MzA4MSAwIDMuNjM2MzYzNiAxLjYyODA1NTUgMy42MzYzNjM2IDMuNjM2MzYzNmwtLjAwMDkwOTEgMi4xODE2MzY0aDUuODE5bC4wMDAwOTA5LTIuMTgxNjM2NGMwLTIuMDA4MzA4MSAxLjYyODA1NTUtMy42MzYzNjM2IDMuNjM2MzYzNi0zLjYzNjM2MzYgMi4wMDgzMDgyIDAgMy42MzYzNjM3IDEuNjI4MDU1NSAzLjYzNjM2MzcgMy42MzYzNjM2bC0uMDAwODE4MiAyLjE4MTYzNjQgMi4xODI2MzY0LjAwMDE4MThjMi4wMDgzMDgxIDAgMy42MzYzNjM2IDEuNjI4MDU1NSAzLjYzNjM2MzYgMy42MzYzNjM3IDAgMi4wMDgzMDgxLTEuNjI4MDU1NSAzLjYzNjM2MzYtMy42MzYzNjM2IDMuNjM2MzYzNmwtMi4xODI2MzY0LS4wMDA5MDkxdjUuODE5bDIuMTgyNjM2NC4wMDAwOTA5YzIuMDA4MzA4MSAwIDMuNjM2MzYzNiAxLjYyODA1NTUgMy42MzYzNjM2IDMuNjM2MzYzNiAwIDIuMDA4MzA4Mi0xLjYyODA1NTUgMy42MzYzNjM3LTMuNjM2MzYzNiAzLjYzNjM2MzdsLTIuMTgyNjM2NC0uMDAwODE4Mi4wMDA4MTgyIDIuMTgyNjM2NGMwIDIuMDA4MzA4MS0xLjYyODA1NTUgMy42MzYzNjM2LTMuNjM2MzYzNyAzLjYzNjM2MzYtMi4wMDgzMDgxIDAtMy42MzYzNjM2LTEuNjI4MDU1NS0zLjYzNjM2MzYtMy42MzYzNjM2bC0uMDAwMDkwOS0yLjE4MjYzNjRoLTUuODE5em0tLjAwMDkwOTEtOS40NTQ2MzY0aDUuODE5di01LjgxOWgtNS44MTl6IiBmaWxsPSJ1cmwoI2QpIiB0cmFuc2Zvcm09Im1hdHJpeCguODY2MDI1NCAtLjUgLjUgLjg2NjAyNTQgLTExLjcxMjgxMyAyMC4yODcxODcpIi8+PC9nPjwvc3ZnPg==",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&tS(()=>!!window.bitpie&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{let e,t;if(this.connected||this.connecting)return;if(this._readyState!==L.Installed)throw new ty;this._connecting=!0;let i=window.bitpie;try{e=await i.getAccount()}catch(e){throw new tI(e?.message,e)}try{t=new tk.PublicKey(e)}catch(e){throw new tb(e?.message,e)}this._wallet=i,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}class i4 extends tL{constructor(e={}){super(),this.name="Clover",this.url="https://clv.org",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTM2LjQ4IDBIMTEuNTJDNS4xNTc2OCAwIDAgNS4xNTc2OCAwIDExLjUyVjM2LjQ4QzAgNDIuODQyMyA1LjE1NzY4IDQ4IDExLjUyIDQ4SDM2LjQ4QzQyLjg0MjMgNDggNDggNDIuODQyMyA0OCAzNi40OFYxMS41MkM0OCA1LjE1NzY4IDQyLjg0MjMgMCAzNi40OCAwWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzc5MTBfMTYzMzUxKSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI0LjAwMDYgMzkuMzYwNkMzMi40ODM3IDM5LjM2MDYgMzkuMzYwNiAzMi40ODM3IDM5LjM2MDYgMjQuMDAwNkMzOS4zNjA2IDE1LjUxNzUgMzIuNDgzNyA4LjY0MDYyIDI0LjAwMDYgOC42NDA2MkMxNS41MTc1IDguNjQwNjIgOC42NDA2MiAxNS41MTc1IDguNjQwNjIgMjQuMDAwNkM4LjY0MDYyIDMyLjQ4MzcgMTUuNTE3NSAzOS4zNjA2IDI0LjAwMDYgMzkuMzYwNlpNMjEuMjg5OSAxNS44Njg4SDI2LjcxMVYyMS4zNDdIMjEuMjkwNFYyNi42NTRIMjYuNzExVjMyLjEzMjJIMjEuMjg5OVYyNi44MjUySDE1Ljg2OTNWMjEuMzQ3SDIxLjI4OTlWMTUuODY4OFpNMjYuNzEyIDIxLjM0N0gzMi4xMzMxVjI2LjgyNTJIMjYuNzEyVjIxLjM0N1oiIGZpbGw9ImJsYWNrIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfNzkxMF8xNjMzNTEiIHgxPSI0OCIgeTE9Ii0xLjQzMDUxZS0wNiIgeDI9IjEuNDMwNTFlLTA2IiB5Mj0iNDgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0E5RkZFMCIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM4NkQ1RkYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4=",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&tS(()=>!!window.clover_solana?.isCloverWallet&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{let e,t;if(this.connected||this.connecting)return;if(this._readyState!==L.Installed)throw new ty;this._connecting=!0;let i=window.clover_solana;try{e=await i.getAccount()}catch(e){throw new tI(e?.message,e)}try{t=new tk.PublicKey(e)}catch(e){throw new tb(e?.message,e)}this._wallet=i,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new tE;try{let{signature:i}=await t.signMessage(e);return Uint8Array.from(i)}catch(e){throw new tC(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}var i2=e.i(579759);class i3 extends tL{constructor(e={}){super(),this.name="Coin98",this.url="https://coin98.com",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3NiA3NSI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIxMDEuNjgxJSIgeDI9Ii0xLjU1NyUiIHkxPSIxNS4yNjglIiB5Mj0iODQuOTE3JSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGMUQ5NjEiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjQ0RBMTQ2Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPHJlY3Qgd2lkdGg9Ijc1IiBoZWlnaHQ9Ijc1IiBmaWxsPSIjMDAwIiByeD0iMTYiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjYSkiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTYxLjQ0IDBhMTMuNzE0IDEzLjcxNCAwIDAgMSA5LjY4IDQuMDEgMTMuNjYxIDEzLjY2MSAwIDAgMSA0LjAwOCA5LjY2OHY0Ny42NDZhMTMuNjYgMTMuNjYgMCAwIDEtNC4wMDcgOS42NjZBMTMuNzEzIDEzLjcxMyAwIDAgMSA2MS40NCA3NUgxMy42ODZhMTMuNzEzIDEzLjcxMyAwIDAgMS05LjY4LTQuMDFBMTMuNjYgMTMuNjYgMCAwIDEgMCA2MS4zMjRWMTMuNjc4YzAtMy42MjUgMS40NC03LjEwMiA0LjAwNy05LjY2N0ExMy43MTQgMTMuNzE0IDAgMCAxIDEzLjY4NyAwWk0yMC4wNjMgNDYuMjMxaC00LjgyNWExMC4wMzIgMTAuMDMyIDAgMCAwIDIuOTQ2IDcuMDg2IDEwLjA3IDEwLjA3IDAgMCAwIDcuMSAyLjk0MiAxMC4wNjUgMTAuMDY1IDAgMCAwIDcuMTA4LTIuOTM1IDEwLjAzIDEwLjAzIDAgMCAwIDIuOTQ2LTcuMDkzaC00LjgyNGE1LjIwNyA1LjIwNyAwIDAgMS0xLjUzIDMuNjg4IDUuMjI1IDUuMjI1IDAgMCAxLTMuNjk2IDEuNTI4IDUuMjM0IDUuMjM0IDAgMCAxLTMuNjk1LTEuNTI4IDUuMjEzIDUuMjEzIDAgMCAxLTEuNTMtMy42ODhaTTU0LjMzIDMzLjcxNmExMS43NjMgMTEuNzYzIDAgMCAwLTEyLjc5OSAyLjUzOEExMS42OTcgMTEuNjk3IDAgMCAwIDM4Ljk5IDQ5LjAzYTExLjcyMyAxMS43MjMgMCAwIDAgNC4zMjggNS4yNTkgMTEuNzU3IDExLjc1NyAwIDAgMCA2LjUyNiAxLjk3IDExLjc2NiAxMS43NjYgMCAwIDAgOC4yOS0zLjQzNSAxMS43MiAxMS43MiAwIDAgMCAzLjQ0Mi04LjI3NCAxMS43MDIgMTEuNzAyIDAgMCAwLTEuOTc1LTYuNTE0IDExLjczNiAxMS43MzYgMCAwIDAtNS4yNjktNC4zMlptLTQuNDg4IDMuOTJhNi45MzcgNi45MzcgMCAwIDEgNC45IDIuMDI1IDYuOTEgNi45MSAwIDAgMSAyLjAyOCA0Ljg5MiA2Ljg5NyA2Ljg5NyAwIDAgMS0xLjE3IDMuODM0IDYuOTMyIDYuOTMyIDAgMCAxLTEwLjY0MyAxLjA0MiA2LjkwMiA2LjkwMiAwIDAgMS0xLjUtNy41MjIgNi45MDkgNi45MDkgMCAwIDEgMi41NDQtMy4xIDYuOTI4IDYuOTI4IDAgMCAxIDMuODQxLTEuMTY3Wm0uMTcgNC41NTJhMi40MzEgMi40MzEgMCAwIDAtMi4yNDEgMS4xNTQgMi40MTggMi40MTggMCAwIDAtLjM1NiAxLjI1NyAyLjM5NSAyLjM5NSAwIDAgMCAxLjYxOSAyLjI5djEuNzUzaDEuNjE4di0xLjc1NGEyLjQyNyAyLjQyNyAwIDAgMCAxLjU5NC0xLjk1IDIuNDE4IDIuNDE4IDAgMCAwLTEtMi4zMSAyLjQzMSAyLjQzMSAwIDAgMC0xLjIzNC0uNDRabS0yMC4yMi0yMi41NTJhMTEuNzYyIDExLjc2MiAwIDAgMC0xMi43OTYgMi41MzEgMTEuNjk3IDExLjY5NyAwIDAgMC0yLjU1NCAxMi43NjkgMTEuNzIzIDExLjcyMyAwIDAgMCA0LjMyIDUuMjYyIDExLjc1NyAxMS43NTcgMCAwIDAgMTQuODI1LTEuNDQ2IDExLjcxNyAxMS43MTcgMCAwIDAgMy40NDUtOC4yODQgMTEuNzAzIDExLjcwMyAwIDAgMC0xLjk3NC02LjUxMiAxMS43MzYgMTEuNzM2IDAgMCAwLTUuMjY2LTQuMzJabS00LjUxIDMuOTE3YTYuOTQ1IDYuOTQ1IDAgMCAxIDQuODk3IDIuMDI5IDYuOTE4IDYuOTE4IDAgMCAxIDIuMDMyIDQuODg2IDYuOTA2IDYuOTA2IDAgMCAxLTEuMTY4IDMuODQyIDYuOTQgNi45NCAwIDAgMS0xMC42NiAxLjA0OCA2LjkxMSA2LjkxMSAwIDAgMS0xLjUtNy41MzYgNi45MTggNi45MTggMCAwIDEgMi41NS0zLjEwMyA2LjkzNyA2LjkzNyAwIDAgMSAzLjg1LTEuMTY2Wm0yNC41Ni00LjgxYTEwLjA1OSAxMC4wNTkgMCAwIDAtNy4xMDMgMi45NCAxMC4wMiAxMC4wMiAwIDAgMC0yLjk0IDcuMDkgOS45IDkuOSAwIDAgMCAxLjIzIDQuNzk1IDEzLjU3NSAxMy41NzUgMCAwIDEgNC4yMTQtMi4zMjIgNS4wODIgNS4wODIgMCAwIDEtLjYyNS0yLjQ3NyA1LjIwNiA1LjIwNiAwIDAgMSAxLjUwMy0zLjczNiA1LjIyMyA1LjIyMyAwIDAgMSAzLjcyMi0xLjU1NCA1LjIzNCA1LjIzNCAwIDAgMSAzLjcyIDEuNTU0IDUuMjEzIDUuMjEzIDAgMCAxIDEuNTA1IDMuNzM2IDUuMjc5IDUuMjc5IDAgMCAxLS42MjMgMi40NzMgMTMuNTc0IDEzLjU3NCAwIDAgMSA0LjIxMyAyLjMyMiA5LjkwMyA5LjkwMyAwIDAgMCAxLjIzLTQuNzk1IDEwLjAzMiAxMC4wMzIgMCAwIDAtMi45NDYtNy4wODYgMTAuMDcgMTAuMDcgMCAwIDAtNy4xLTIuOTRabS0yMy43NSA3Ljk5aC0xLjYxN3YxLjc1YTIuNDE5IDIuNDE5IDAgMCAwLTEuNTgyIDIuNjg3IDIuNDE0IDIuNDE0IDAgMCAwIDIuMzkgMi4wMDYgMi40NSAyLjQ1IDAgMCAwIDEuNTU1LS41NzQgMi40MTQgMi40MTQgMCAwIDAtLjc0Ni00LjExOXYtMS43NVoiLz4KICA8L2c+Cjwvc3ZnPgo=",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&tS(()=>!!window.coin98?.sol&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected()}get readyState(){return this._readyState}async connect(){try{let e,t;if(this.connected||this.connecting)return;if(this._readyState!==L.Installed)throw new ty;this._connecting=!0;let i=window.coin98.sol;try{e=(await i.connect())[0]}catch(e){throw new tI(e?.message,e)}try{t=new tk.PublicKey(e)}catch(e){throw new tb(e?.message,e)}this._wallet=i,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(e){this.emit("error",new tv(e?.message,e))}}this.emit("disconnect")}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{let i=await t.request({method:"sol_sign",params:[e]}),r=new tk.PublicKey(i.publicKey),s=t9.default.decode(i.signature);return e.addSignature(r,i2.Buffer.from(s)),e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{let i=await t.request({method:"sol_signAllTransactions",params:[e]}),r=new tk.PublicKey(i.publicKey),s=i.signatures;return e.map((e,t)=>{let i=t9.default.decode(s[t]);return e.addSignature(r,i2.Buffer.from(i)),e})}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new tE;try{let i=await t.request({method:"sol_signMessage",params:[e]});return t9.default.decode(i.signature)}catch(e){throw new tC(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}class i5 extends tL{constructor(e={}){super(),this.name="Coinbase Wallet",this.url="https://chrome.google.com/webstore/detail/coinbase-wallet-extension/hnfanknocfeofbddgcijnmhnfnkdnaad",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._disconnected=()=>{let e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new tN),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&tS(()=>!!window?.coinbaseSolana&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{let e;if(this.connected||this.connecting)return;if(this._readyState!==L.Installed)throw new ty;this._connecting=!0;let t=window.coinbaseSolana;try{await t.connect()}catch(e){throw new tM(e?.message,e)}if(!t.publicKey)throw new tI;try{e=new tk.PublicKey(t.publicKey.toBytes())}catch(e){throw new tb(e?.message,e)}t.on("disconnect",this._disconnected),this._wallet=t,this._publicKey=e,this.emit("connect",e)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(e){this.emit("error",new tv(e?.message,e))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{let r=this._wallet;if(!r)throw new tE;try{let{signers:s,...n}=i;tx(e)?s?.length&&e.sign(s):(e=await this.prepareTransaction(e,t,n),s?.length&&e.partialSign(...s)),n.preflightCommitment=n.preflightCommitment||t.commitment;let{signature:a}=await r.signAndSendTransaction(e,n);return a}catch(e){if(e instanceof tf)throw e;throw new tA(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new tE;try{let{signature:i}=await t.signMessage(e);return i}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}class i8 extends tz{constructor(e={}){super(),this.name="Coinhub",this.url="https://coinhub.org",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTAwcHgiIGhlaWdodD0iMTAwcHgiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPuefqeW9ojwvdGl0bGU+CiAgICA8ZyBpZD0i6aG16Z2iLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLkuIvovb3pobVpb3MiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzguMDAwMDAwLCAtOTQuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJDb2luaHViLSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM4LjAwMDAwMCwgOTQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMy4zMzMzMzMsIDMuMzMzMzMzKSIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTcuOTU2MzU0Miw0MC43MDQ2MzE2IEM1Ny45NTYzNTQyLDQwLjcwNDYzMTYgNjIuNzc2ODc1LDU2LjM0NTIxMDUgODEuNjE1OTg5Niw1OC41MTY2ODQyIEM4NC43MzEzNTQyLDU4Ljg3NTUyNjMgODguMjYwNTIwOCw1OS4yNjM4NDIxIDkxLjg2ODQzNzUsNTguMTg4MDUyNiBDOTIuMDIyMjkxNyw1OC4xOTc2MzE2IDkyLjE3MjUsNTguMjQwNzM2OCA5Mi4zMDgxMjUsNTguMzE0MDUyNiBDOTIuNDQ0MTE0Niw1OC4zODczNjg0IDkyLjU2Mjk2ODgsNTguNDg5MDUyNiA5Mi42NTY2NjY3LDU4LjYxMjg0MjEgQzkyLjc1LDU4LjczNjYzMTYgOTIuODE1OTg5Niw1OC44Nzk1Nzg5IDkyLjg1MDI2MDQsNTkuMDMxMzY4NCBDOTIuODg0NTMxMyw1OS4xODMxNTc5IDkyLjg4NTYyNSw1OS4zNDA0NzM3IDkyLjg1NDI3MDgsNTkuNDkzIEM5Mi4zMjM4MDIxLDYzLjE1MTc4OTUgOTEuMTIzNTkzNyw2Ni42Nzg2ODQyIDg5LjMxNTI2MDQsNjkuODkzNTI2MyBDODQuNzQxMTk3OSw3OC4xMTE4OTQ3IDc0LjY5NTQ2ODgsODguOTgwNjg0MiA1Mi4wMTE4MjI5LDkyLjgwNiBDNTAuODA5MDYyNSw5Mi44MDYgNDguNDMzMDcyOSw5MS43NDAxNTc5IDQ3LjMyOTExNDYsOTEuOTI5NTI2MyBDNDcuMzI5MTE0Niw5MS45MDkyNjMyIDE5Ljk3MjUzMTIsNjcuNjUyMDUyNiA1Ny45NTYzNTQyLDQwLjcwNDYzMTYgWiIgaWQ9Iui3r+W+hCIgZmlsbD0iI0NGQkZBMyI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01Mi4wMTE0NTgzLDkyLjgwNiBDNTIuMDExNDU4Myw5Mi44MDYgMzIuMTk2NSw2NC4xNzUyNjMyIDYzLjMwOTE2NjcsNDkuNTExIEw1OS40MzQ3Mzk2LDQ0LjQxMDU3ODkgQzU5LjQzNDczOTYsNDQuNDEwNTc4OSAxOS4xNDQxOTc5LDY1LjE5MTM2ODQgNTIuMDExNDU4Myw5Mi44MDYgWiIgaWQ9Iui3r+W+hCIgZmlsbD0iI0I5QTc5OCI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05Mi44NTQ2MzU0LDU5LjUzMzE1NzkgQzkyLjIzOTU4MzMsNjMuMzYxMDUyNiA5MC45NDAyMDgzLDY3LjA0Mzc4OTUgODkuMDE5OTQ3OSw3MC40MDE1Nzg5IEw4My4yNjI0NDc5LDU4LjY5NjEwNTMgQzg1LjkzMDEwNDIsNTkuMDU0OTQ3NCA4OC42Mzk2ODc1LDU4LjkxNjQyMTEgOTEuMjU3NzYwNCw1OC4yODc4OTQ3IEM5Mi41MDk3Mzk2LDU3Ljk5OTA1MjYgOTMuMDUxODc1LDU4LjQxNzIxMDUgOTIuODU0NjM1NCw1OS41MzMxNTc5IFoiIGlkPSLot6/lvoQiIGZpbGw9IiM4QzY3NDIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTkuNzk5Njg3NSw2Ny41MzIzMTU4IEM2Mi4wMTU2MjUsNjcuNTMyMzE1OCA2My44MTE5MjcxLDY1LjcxNzEwNTMgNjMuODExOTI3MSw2My40Nzc4NDIxIEM2My44MTE5MjcxLDYxLjIzODU3ODkgNjIuMDE1NjI1LDU5LjQyMzM2ODQgNTkuNzk5Njg3NSw1OS40MjMzNjg0IEM1Ny41ODM3NSw1OS40MjMzNjg0IDU1Ljc4NzQ0NzksNjEuMjM4NTc4OSA1NS43ODc0NDc5LDYzLjQ3Nzg0MjEgQzU1Ljc4NzQ0NzksNjUuNzE3MTA1MyA1Ny41ODM3NSw2Ny41MzIzMTU4IDU5Ljc5OTY4NzUsNjcuNTMyMzE1OCBaIiBpZD0i6Lev5b6EIiBmaWxsPSIjMjIyMjIyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYwLjU1OTExNDYsNi44MTQwMjEwNSBMNjMuODkxMDQxNywxLjI3NTEzNDc0IEM1OC4yNzI4MTI1LDIuMjE4NjEzMTYgNTIuNzc3MDgzMywzLjc5NTg0MjExIDQ3LjUwNjY2NjcsNS45NzcxODk0NyBDNDYuMTIzODAyMSw2LjEwODQ5NDc0IDQ0Ljc0ODU5MzcsNi4zMTEzMTA1MyA0My4zODYxNDU4LDYuNTg0ODYzMTYgTDUwLjA2MDIwODMsMy40NjI0NjIyOWUtMTMgQzQzLjQ2MzA3MjksMS42MzEzMDk0NyAzNy40ODkzNzUsNS4xOTM3NDIxMSAzMi44ODcwNTczLDEwLjI0MDkyNjMgQzMyLjIwNjgxNzcsMTAuNTc5NjUyNiAzMS41MzY0NTgzLDEwLjk0ODI1NzkgMzAuOTE1MzkwNiwxMS4zMzY3NTc5IEwzNi4xNTAxMTQ2LDEuNTkzOTI1NzkgQzI5LjA0OTE5NzksNS40NjMyNDIxMSAyMy40ODAzMzMzLDExLjY4MTYzNjggMjAuMzc2OTYzNSwxOS4yMDY3NDc0IEwyMy42MTA0NTMxLDcuODUwMDU3ODkgQzIzLjYxMDQ1MzEsNy44NTAwNTc4OSAxNS40Mzc5ODk2LDE0LjEwNjIxNTggMTMuOTg4ODQzNywyOS41MzczNDc0IEMxMy44MDE1MjA4LDI5LjkxNTkgMTMuNjE0MTk3OSwzMC4yOTQ0NTI2IDEzLjQzNjc1NTIsMzAuNjgyOTUyNiBMMTIuNTQ5NTQxNywxNi44NTU3MDUzIEMxMi41NDk1NDE3LDE2Ljg1NTcwNTMgNC42MDM4MTI1LDI5LjY1Njg2MzIgOS43MTAzNDg5Niw0NC4xMzE2ODQyIEw0LjE2MDE4NzUsMzAuMTg0ODQ3NCBDNC4xNjAxODc1LDMwLjE4NDg0NzQgMC43MTk2NTEwNDIsNDEuMTQzMDUyNiA5LjA4OTI4MTI1LDU1LjM0OSBMLTIuNzYzMjIxNzVlLTE0LDQ0LjcwOTM2ODQgQy0yLjc2MzIyMTc1ZS0xNCw0NC43MDkzNjg0IDAuODc3MzgwNzI5LDYzLjA2OTI2MzIgMTEuMjY3OTU4Myw3My4wMDE1MjYzIEMxMS4yNjc5NTgzLDczLjAwMTUyNjMgMTUuMDA0MjA4Myw3MS44NzYgMTcuMzAxMTkyNyw3NC41NDU1Nzg5IEMyMC45NjAyMjQsNzkuOTIzNDIxMSAyNS44MDI5NDc5LDg0LjM3MSAzMS40NDkxNzcxLDg3LjUzOTQyMTEgQzM3LjA5NTI2MDQsOTAuNzA3NDczNyA0My4zOTE2MTQ2LDkyLjUxMDUyNjMgNDkuODQzMjgxMiw5Mi44MDYgQzUwLjM4NTQxNjcsOTIuODA2IDUxLjQ2OTY4NzUsOTIuODA2IDUxLjQ2OTY4NzUsOTIuODA2IEM1MS40Njk2ODc1LDkyLjgwNiAzMi4xODcwOTM3LDc1Ljk4MDIxMDUgNTAuNzY5Njg3NSw1MS45NjE3MzY4IEM2OS4zNjIzNDM3LDI5Ljg1NjEwNTMgOTMuMzg2OTI3MSw0NS4yMjczNjg0IDkzLjE2MDE1NjIsNDMuMjQ0ODk0NyBDOTIuMDM3NjA0MiwzNC41NDI2Nzg5IDg4LjMxNTU3MjksMjYuMzkzMjA1MyA4Mi40OTA2MjUsMTkuODgzOTc4OSBDNzYuNjY1Njc3MSwxMy4zNzQ3NTI2IDY5LjAxNDg5NTgsOC44MTUzMjEwNSA2MC41NTkxMTQ2LDYuODE0MDIxMDUgTDYwLjU1OTExNDYsNi44MTQwMjEwNSBaIiBpZD0i6Lev5b6EIiBmaWxsPSIjMjJBMDc5Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQzLjM0NjQwNjMsNzguNTgwMTU3OSBDNDMuMzQ2NDA2Myw3OC41ODAxNTc5IDIyLjA2MjQzMjMsODYuMDgxNTc4OSAyLjI4NjgzNDM4LDU3LjAzMjMxNTggQzQuNDA4MTc3MDgsNjQuNjU0MjEwNSA4LjIwNjE1MTA0LDcxLjY5MzI2MzIgMTMuMzk3MDUyMSw3Ny42MjM3MzY4IEMyMC42MjMxMzAyLDg2LjAyMTg5NDcgMzQuOTc2NzM5Niw5My4zMTQwNTI2IDUyLjAxMTgyMjksOTIuNzg2MTA1MyBDNDkuOTUzNzUsOTEuMTc5NDIxMSA0OC4yMzcyOTE3LDg5LjE3MDQyMTEgNDYuOTY0MTY2Nyw4Ni44Nzg0NzM3IEM0NS40OTM4MDIxLDg0LjIzOCA0NC4yODE5MjcxLDgxLjQ1OSA0My4zNDY0MDYzLDc4LjU4MDE1NzkgTDQzLjM0NjQwNjMsNzguNTgwMTU3OSBaIiBpZD0i6Lev5b6EIiBmaWxsPSIjMUI4MDYxIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&tS(()=>!!window.coinhub?.isCoinhubWallet&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{let e,t;if(this.connected||this.connecting)return;if(this._readyState!==L.Installed)throw new ty;this._connecting=!0;let i=window.coinhub;try{e=await i.getAccount()}catch(e){throw new tI(e?.message,e)}try{t=new tk.PublicKey(e)}catch(e){throw new tb(e?.message,e)}this._wallet=i,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}e.i(946269);var i6=e.i(97209);function i9(e){return(0x80000000|e)>>>0}async function i7(e,t){let i=await rt(e,5,0,t);return new tk.PublicKey(i)}async function re(e,t,i){let r=i2.Buffer.alloc(1);r.writeUInt8(1,0);let s=tx(t)?t.message.serialize():t.serializeMessage(),n=i2.Buffer.concat([r,i,s]);return await rt(e,6,1,n)}async function rt(e,t,i,r){let s=0,n=0;if(r.length>255)for(;r.length-n>255;){let a=r.slice(n,n+255);if(2!==(await e.send(224,t,i,2|s,a)).length)throw new i6.TransportStatusError(i6.StatusCodes.INCORRECT_DATA);s|=1,n+=255}let a=r.slice(n),o=await e.send(224,t,i,s,a);return o.slice(0,o.length-2)}class ri extends tz{constructor(e={}){super(),this.name="Ledger",this.url="https://ledger.com",this.icon="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzUgMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0ibTIzLjU4OCAwaC0xNnYyMS41ODNoMjEuNnYtMTZhNS41ODUgNS41ODUgMCAwIDAgLTUuNi01LjU4M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5KSIvPjxwYXRoIGQ9Im04LjM0MiAwaC0yLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCAtNS41ODUgNS41ODV2Mi43NTdoOC4zNDJ6Ii8+PHBhdGggZD0ibTAgNy41OWg4LjM0MnY4LjM0MmgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDUuNzM5KSIvPjxwYXRoIGQ9Im0xNS4xOCAyMy40NTFoMi43NTdhNS41ODUgNS41ODUgMCAwIDAgNS41ODUtNS42di0yLjY3MWgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMS40NzggMTEuNDc4KSIvPjxwYXRoIGQ9Im03LjU5IDE1LjE4aDguMzQydjguMzQyaC04LjM0MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5IDExLjQ3OCkiLz48cGF0aCBkPSJtMCAxNS4xOHYyLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCA1LjU4NSA1LjU4NWgyLjc1N3YtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDExLjQ3OCkiLz48L2c+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator&&navigator.hid?L.Loadable:L.Unsupported,this._disconnected=()=>{let e=this._transport;e&&(e.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null,this.emit("error",new tN),this.emit("disconnect"))},this._derivationPath=e.derivationPath||function(e,t){let i=i2.Buffer.alloc(17),r=i.writeUInt8(4,0);return r=i.writeUInt32BE(i9(44),r),r=i.writeUInt32BE(i9(501),r),r=i.writeUInt32BE(i9(0),r),i.writeUInt32BE(i9(0),r),i}(0,0),this._connecting=!1,this._transport=null,this._publicKey=null}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{let t,i,r;if(this.connected||this.connecting)return;if(this._readyState!==L.Loadable)throw new ty;this._connecting=!0;try{t=(await e.A(615489)).default}catch(e){throw new tw(e?.message,e)}try{i=await t.create()}catch(e){throw new tM(e?.message,e)}try{r=await i7(i,this._derivationPath)}catch(e){throw new tb(e?.message,e)}i.on("disconnect",this._disconnected),this._transport=i,this._publicKey=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._transport;if(e){e.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null;try{await e.close()}catch(e){this.emit("error",new tv(e?.message,e))}}this.emit("disconnect")}async signTransaction(e){try{let t=this._transport,i=this._publicKey;if(!t||!i)throw new tE;try{let r=await re(t,e,this._derivationPath);e.addSignature(i,r)}catch(e){throw new tD(e?.message,e)}return e}catch(e){throw this.emit("error",e),e}}}class rr extends tz{constructor(e={}){super(),this.name="MathWallet",this.url="https://mathwallet.org",this.icon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHdpZHRoPSIxMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJtMCAwaDEyOHYxMjhoLTEyOHoiIG9wYWNpdHk9IjAiLz48cGF0aCBkPSJtOTAuODQ3MDA4NiA1Ny43NjEwMDIzYy0yLjI3NzAzNjMtMi4yNzcwMzYzLTIuMjc3MDM2My01Ljk2ODg0MTYgMC04LjI0NTg3NzggMi4yNzcwMzYyLTIuMjc3MDM2MyA1Ljk2ODg0MTUtMi4yNzcwMzYzIDguMjQ1ODc3OCAwIDIuMjc3MDM2NiAyLjI3NzAzNjIgMi4yNzcwMzY2IDUuOTY4ODQxNSAwIDguMjQ1ODc3OC0yLjI3NzAzNjMgMi4yNzcwMzYyLTUuOTY4ODQxNiAyLjI3NzAzNjItOC4yNDU4Nzc4IDB6bS0xOS41ODM5NTk4IDE5LjU4Mzk1OTdjLTEuNzA3Nzc3Mi0xLjcwNzc3NzItMS43MDc3NzcyLTQuNDc2NjMxMSAwLTYuMTg0NDA4M3M0LjQ3NjYzMTEtMS43MDc3NzcyIDYuMTg0NDA4MyAwIDEuNzA3Nzc3MiA0LjQ3NjYzMTEgMCA2LjE4NDQwODMtNC40NzY2MzExIDEuNzA3Nzc3Mi02LjE4NDQwODMgMHptMzAuOTIyMDQyMi0xMC4zMDczNDcyYy0xLjcwNzc3OC0xLjcwNzc3NzItMS43MDc3NzgtNC40NzY2MzEyIDAtNi4xODQ0MDg0IDEuNzA3Nzc3LTEuNzA3Nzc3MiA0LjQ3NjYzMS0xLjcwNzc3NzIgNi4xODQ0MDggMHMxLjcwNzc3NyA0LjQ3NjYzMTIgMCA2LjE4NDQwODQtNC40NzY2MzEgMS43MDc3NzcyLTYuMTg0NDA4IDB6bS0xMC4zMDczNDc3IDEwLjMwNzM0NzJjLTEuNzA3Nzc3Mi0xLjcwNzc3NzItMS43MDc3NzcyLTQuNDc2NjMxMSAwLTYuMTg0NDA4M3M0LjQ3NjYzMTEtMS43MDc3NzcyIDYuMTg0NDA4MyAwIDEuNzA3Nzc3MiA0LjQ3NjYzMTEgMCA2LjE4NDQwODMtNC40NzY2MzExIDEuNzA3Nzc3Mi02LjE4NDQwODMgMHptMjEuNjQ1NDI4Ny0xLjAzMDczNDdjLTEuMTM4NTE4LTEuMTM4NTE4MS0xLjEzODUxOC0yLjk4NDQyMDggMC00LjEyMjkzODkgMS4xMzg1MTktMS4xMzg1MTgxIDIuOTg0NDIxLTEuMTM4NTE4MSA0LjEyMjkzOSAwIDEuMTM4NTE5IDEuMTM4NTE4MSAxLjEzODUxOSAyLjk4NDQyMDggMCA0LjEyMjkzODktMS4xMzg1MTggMS4xMzg1MTgxLTIuOTg0NDIgMS4xMzg1MTgxLTQuMTIyOTM5IDB6bS0xMC4zMDczNDcgMTAuMzA3MzQ3MmMtMS4xMzg1MTgtMS4xMzg1MTgxLTEuMTM4NTE4LTIuOTg0NDIwNyAwLTQuMTIyOTM4OSAxLjEzODUxOC0xLjEzODUxODEgMi45ODQ0MjEtMS4xMzg1MTgxIDQuMTIyOTM5IDAgMS4xMzg1MTggMS4xMzg1MTgyIDEuMTM4NTE4IDIuOTg0NDIwOCAwIDQuMTIyOTM4OS0xLjEzODUxOCAxLjEzODUxODItMi45ODQ0MjEgMS4xMzg1MTgyLTQuMTIyOTM5IDB6bS0yMi42NzYxNjM3LTE4LjU1MzIyNWMtMi4yNzcwMzYzLTIuMjc3MDM2My0yLjI3NzAzNjMtNS45Njg4NDE1IDAtOC4yNDU4Nzc4czUuOTY4ODQxNS0yLjI3NzAzNjMgOC4yNDU4Nzc4IDAgMi4yNzcwMzYzIDUuOTY4ODQxNSAwIDguMjQ1ODc3OC01Ljk2ODg0MTUgMi4yNzcwMzYzLTguMjQ1ODc3OCAwem0wLTIwLjYxNDY5NDVjLTIuMjc3MDM2My0yLjI3NzAzNjMtMi4yNzcwMzYzLTUuOTY4ODQxNSAwLTguMjQ1ODc3OHM1Ljk2ODg0MTUtMi4yNzcwMzYzIDguMjQ1ODc3OCAwIDIuMjc3MDM2MyA1Ljk2ODg0MTUgMCA4LjI0NTg3NzgtNS45Njg4NDE1IDIuMjc3MDM2My04LjI0NTg3NzggMHptLTEwLjMwNzM0NzIgMTAuMzA3MzQ3M2MtMi4yNzcwMzYzLTIuMjc3MDM2My0yLjI3NzAzNjMtNS45Njg4NDE2IDAtOC4yNDU4Nzc4IDIuMjc3MDM2Mi0yLjI3NzAzNjMgNS45Njg4NDE1LTIuMjc3MDM2MyA4LjI0NTg3NzggMCAyLjI3NzAzNjIgMi4yNzcwMzYyIDIuMjc3MDM2MiA1Ljk2ODg0MTUgMCA4LjI0NTg3NzgtMi4yNzcwMzYzIDIuMjc3MDM2Mi01Ljk2ODg0MTYgMi4yNzcwMzYyLTguMjQ1ODc3OCAwem0tMjAuNzEwNTA2IDBjLTIuMjc3MDM2Mi0yLjI3NzAzNjMtMi4yNzcwMzYyLTUuOTY4ODQxNiAwLTguMjQ1ODc3OCAyLjI3NzAzNjMtMi4yNzcwMzYzIDUuOTY4ODQxNi0yLjI3NzAzNjMgOC4yNDU4Nzc4IDAgMi4yNzcwMzYzIDIuMjc3MDM2MiAyLjI3NzAzNjMgNS45Njg4NDE1IDAgOC4yNDU4Nzc4LTIuMjc3MDM2MiAyLjI3NzAzNjItNS45Njg4NDE1IDIuMjc3MDM2Mi04LjI0NTg3NzggMHptLTE5LjU4Mzk1OTcgMTkuNTgzOTU5N2MtMS43MDc3NzcyLTEuNzA3Nzc3Mi0xLjcwNzc3NzItNC40NzY2MzExIDAtNi4xODQ0MDgzczQuNDc2NjMxMS0xLjcwNzc3NzIgNi4xODQ0MDgzIDAgMS43MDc3NzcyIDQuNDc2NjMxMSAwIDYuMTg0NDA4My00LjQ3NjYzMTEgMS43MDc3NzcyLTYuMTg0NDA4MyAwem0zMC45MjIwNDE3LTEwLjMwNzM0NzJjLTEuNzA3Nzc3Mi0xLjcwNzc3NzItMS43MDc3NzcyLTQuNDc2NjMxMiAwLTYuMTg0NDA4NHM0LjQ3NjYzMTItMS43MDc3NzcyIDYuMTg0NDA4NCAwIDEuNzA3Nzc3MiA0LjQ3NjYzMTIgMCA2LjE4NDQwODQtNC40NzY2MzEyIDEuNzA3Nzc3Mi02LjE4NDQwODQgMHptLTEwLjMwNzM0NzIgMTAuMzA3MzQ3MmMtMS43MDc3NzcyLTEuNzA3Nzc3Mi0xLjcwNzc3NzItNC40NzY2MzExIDAtNi4xODQ0MDgzczQuNDc2NjMxMS0xLjcwNzc3NzIgNi4xODQ0MDgzIDAgMS43MDc3NzcyIDQuNDc2NjMxMSAwIDYuMTg0NDA4My00LjQ3NjYzMTEgMS43MDc3NzcyLTYuMTg0NDA4MyAwem0tNDAuMTk4NjU0My0xLjAzMDczNDdjLTEuMTM4NTE4MTMtMS4xMzg1MTgxLTEuMTM4NTE4MTMtMi45ODQ0MjA4IDAtNC4xMjI5Mzg5IDEuMTM4NTE4MS0xLjEzODUxODEgMi45ODQ0MjA4LTEuMTM4NTE4MSA0LjEyMjkzODkgMHMxLjEzODUxODEgMi45ODQ0MjA4IDAgNC4xMjI5Mzg5LTIuOTg0NDIwOCAxLjEzODUxODEtNC4xMjI5Mzg5IDB6bTEwLjMwNzM0NzMgMTAuMzA3MzQ3MmMtMS4xMzg1MTgyLTEuMTM4NTE4MS0xLjEzODUxODItMi45ODQ0MjA3IDAtNC4xMjI5Mzg5IDEuMTM4NTE4MS0xLjEzODUxODEgMi45ODQ0MjA3LTEuMTM4NTE4MSA0LjEyMjkzODggMCAxLjEzODUxODIgMS4xMzg1MTgyIDEuMTM4NTE4MiAyLjk4NDQyMDggMCA0LjEyMjkzODktMS4xMzg1MTgxIDEuMTM4NTE4Mi0yLjk4NDQyMDcgMS4xMzg1MTgyLTQuMTIyOTM4OCAwem00MS4yMjkzODg5IDBjLTEuMTM4NTE4MS0xLjEzODUxODEtMS4xMzg1MTgxLTIuOTg0NDIwNyAwLTQuMTIyOTM4OSAxLjEzODUxODItMS4xMzg1MTgxIDIuOTg0NDIwOC0xLjEzODUxODEgNC4xMjI5Mzg5IDAgMS4xMzg1MTgyIDEuMTM4NTE4MiAxLjEzODUxODIgMi45ODQ0MjA4IDAgNC4xMjI5Mzg5LTEuMTM4NTE4MSAxLjEzODUxODItMi45ODQ0MjA3IDEuMTM4NTE4Mi00LjEyMjkzODkgMHptLTQyLjI2MDEyMzctMTkuNTgzOTU5N2MtMS43MDc3NzcyLTEuNzA3Nzc3Mi0xLjcwNzc3NzItNC40NzY2MzEyIDAtNi4xODQ0MDg0czQuNDc2NjMxMi0xLjcwNzc3NzIgNi4xODQ0MDg0IDAgMS43MDc3NzcyIDQuNDc2NjMxMiAwIDYuMTg0NDA4NC00LjQ3NjYzMTIgMS43MDc3NzcyLTYuMTg0NDA4NCAwem0xOS41ODM5NTk4IDEuMDMwNzM0N2MtMi4yNzcwMzYzLTIuMjc3MDM2My0yLjI3NzAzNjMtNS45Njg4NDE1IDAtOC4yNDU4Nzc4czUuOTY4ODQxNS0yLjI3NzAzNjMgOC4yNDU4Nzc4IDAgMi4yNzcwMzYzIDUuOTY4ODQxNSAwIDguMjQ1ODc3OC01Ljk2ODg0MTUgMi4yNzcwMzYzLTguMjQ1ODc3OCAwem0wLTIwLjYxNDY5NDVjLTIuMjc3MDM2My0yLjI3NzAzNjMtMi4yNzcwMzYzLTUuOTY4ODQxNSAwLTguMjQ1ODc3OHM1Ljk2ODg0MTUtMi4yNzcwMzYzIDguMjQ1ODc3OCAwIDIuMjc3MDM2MyA1Ljk2ODg0MTUgMCA4LjI0NTg3NzgtNS45Njg4NDE1IDIuMjc3MDM2My04LjI0NTg3NzggMHptLTEwLjMwNzM0NzMgMTAuMzA3MzQ3M2MtMi4yNzcwMzYyLTIuMjc3MDM2My0yLjI3NzAzNjItNS45Njg4NDE2IDAtOC4yNDU4Nzc4IDIuMjc3MDM2My0yLjI3NzAzNjMgNS45Njg4NDE2LTIuMjc3MDM2MyA4LjI0NTg3NzggMCAyLjI3NzAzNjMgMi4yNzcwMzYyIDIuMjc3MDM2MyA1Ljk2ODg0MTUgMCA4LjI0NTg3NzgtMi4yNzcwMzYyIDIuMjc3MDM2Mi01Ljk2ODg0MTUgMi4yNzcwMzYyLTguMjQ1ODc3OCAweiIvPjwvZz48L3N2Zz4=",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._messaged=e=>{let t=e.data;t&&"mathwallet_internal"===t.origin&&"lockStatusChanged"===t.type&&!t.payload&&this._disconnected()},this._disconnected=()=>{this._wallet&&(window.removeEventListener("message",this._messaged),this._wallet=null,this._publicKey=null,this.emit("error",new tN),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&tS(()=>!!window.solana?.isMathWallet&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{let e,t;if(this.connected||this.connecting)return;if(this._readyState!==L.Installed)throw new ty;this._connecting=!0;let i=window.solana;try{e=await i.getAccount()}catch(e){throw new tI(e?.message,e)}try{t=new tk.PublicKey(e)}catch(e){throw new tb(e?.message,e)}window.addEventListener("message",this._messaged),this._wallet=i,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(window.removeEventListener("message",this._messaged),this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}class rs extends tL{constructor(e={}){super(),this.name="Phantom",this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._disconnected=()=>{let e=this._wallet;e&&(e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new tN),this.emit("disconnect"))},this._accountChanged=e=>{let t=this._publicKey;if(t){try{e=new tk.PublicKey(e.toBytes())}catch(e){this.emit("error",new tb(e?.message,e));return}t.equals(e)||(this._publicKey=e,this.emit("connect",e))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&(tO()?(this._readyState=L.Loadable,this.emit("readyStateChange",this._readyState)):tS(()=>!!(window.phantom?.solana?.isPhantom||window.solana?.isPhantom)&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0)))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===L.Installed&&await this.connect()}async connect(){try{let e;if(this.connected||this.connecting)return;if(this.readyState===L.Loadable){let e=encodeURIComponent(window.location.href),t=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${e}?ref=${t}`;return}if(this.readyState!==L.Installed)throw new ty;this._connecting=!0;let t=window.phantom?.solana||window.solana;if(!t.isConnected)try{await t.connect()}catch(e){throw new tM(e?.message,e)}if(!t.publicKey)throw new tI;try{e=new tk.PublicKey(t.publicKey.toBytes())}catch(e){throw new tb(e?.message,e)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=e,this.emit("connect",e)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(e){this.emit("error",new tv(e?.message,e))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{let r=this._wallet;if(!r)throw new tE;try{let{signers:s,...n}=i;tx(e)?s?.length&&e.sign(s):(e=await this.prepareTransaction(e,t,n),s?.length&&e.partialSign(...s)),n.preflightCommitment=n.preflightCommitment||t.commitment;let{signature:a}=await r.signAndSendTransaction(e,n);return a}catch(e){if(e instanceof tf)throw e;throw new tA(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new tE;try{let{signature:i}=await t.signMessage(e);return i}catch(e){throw new tC(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}class rn extends tz{constructor(e={}){super(),this.name="SafePal",this.url="https://safepal.io",this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAP1BMVEUAAABKIe9MIO9LIO9KIe5KIO9KIe9KIO5JIO1KIu1KIO1KIe////+kkPfo4/1hPfFgPfGZgvaOdPWDZvRVL/CpQHckAAAAC3RSTlMA7yC/oDDfgJCQkAOmnXUAAADnSURBVEjHlZbtjoJAEAR7BwTvmvUO9f2f1USNk81MRrp+VxFY9gsvbJ0aC9r0Y3Bs5gHmT3JqPMRy0nyyPQtbeJhmAGYKzIBRwvBLiRUTJSY0SjQw4X7tI//8kAV/l22k04HoE6JPiD4h+oToE8HfWYLwfNZg9EOQvpL7Mag+et+SoBrWWxaUP64nQT01ehLUk6/nwXYLgRdpsIfAiyy4VAuoc8B9D0rcPxbs7sfAB8oJPiH6hOgTok+IPiH4YQH1keudCfJmrG/3KyXO8pGlH4ow4bMX0w/2Z7EIvnY5cez87fqzvvUH/qNgaUlN588AAAAASUVORK5CYII=",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&tS(()=>!!window.safepal?.isSafePalWallet&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{let e,t;if(this.connected||this.connecting)return;if(this._readyState!==L.Installed)throw new ty;this._connecting=!0;let i=window.safepal;try{e=await i.getAccount()}catch(e){throw new tI(e?.message,e)}try{t=new tk.PublicKey(e)}catch(e){throw new tb(e?.message,e)}this._wallet=i,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}var ra=function(e,t,i,r){if("a"===i&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},ro=function(e,t,i,r,s){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,i):s?s.value=i:t.set(e,i),i};class rc extends Event{get detail(){return ra(this,e3,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),e3.set(this,void 0),ro(this,e3,e,"f")}preventDefault(){throw Error("preventDefault cannot be called")}stopImmediatePropagation(){throw Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw Error("stopPropagation cannot be called")}}e3=new WeakMap;var rl=function(e,t,i,r){if("a"===i&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},rh=function(e,t,i,r,s){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,i):s?s.value=i:t.set(e,i),i};class ru{constructor(){e5.add(this),e8.set(this,{}),e6.set(this,"1.0.0"),e9.set(this,"MetaMask"),e7.set(this,"data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4="),te.set(this,null),tt.set(this,(e,t)=>(rl(this,e8,"f")[e]?.push(t)||(rl(this,e8,"f")[e]=[t]),()=>rl(this,e5,"m",tr).call(this,e,t))),ts.set(this,async()=>{if(!rl(this,te,"f")){let t;try{t=(await e.A(151023)).default}catch(e){throw Error("Unable to load Solflare MetaMask SDK")}rh(this,te,new t,"f"),rl(this,te,"f").on("standard_change",e=>rl(this,e5,"m",ti).call(this,"change",e))}return this.accounts.length||await rl(this,te,"f").connect(),{accounts:this.accounts}}),tn.set(this,async()=>{rl(this,te,"f")&&await rl(this,te,"f").disconnect()}),ta.set(this,async(...e)=>{if(!rl(this,te,"f"))throw new tE;return await rl(this,te,"f").standardSignAndSendTransaction(...e)}),to.set(this,async(...e)=>{if(!rl(this,te,"f"))throw new tE;return await rl(this,te,"f").standardSignTransaction(...e)}),tc.set(this,async(...e)=>{if(!rl(this,te,"f"))throw new tE;return await rl(this,te,"f").standardSignMessage(...e)})}get version(){return rl(this,e6,"f")}get name(){return rl(this,e9,"f")}get icon(){return rl(this,e7,"f")}get chains(){return[t7,ie,it]}get features(){return{[t5]:{version:"1.0.0",connect:rl(this,ts,"f")},[t8]:{version:"1.0.0",disconnect:rl(this,tn,"f")},[t6]:{version:"1.0.0",on:rl(this,tt,"f")},[tY.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:rl(this,ta,"f")},[tQ.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:rl(this,to,"f")},[tR.SolanaSignMessage]:{version:"1.0.0",signMessage:rl(this,tc,"f")}}}get accounts(){return rl(this,te,"f")?rl(this,te,"f").standardAccounts:[]}}e8=new WeakMap,e6=new WeakMap,e9=new WeakMap,e7=new WeakMap,te=new WeakMap,tt=new WeakMap,ts=new WeakMap,tn=new WeakMap,ta=new WeakMap,to=new WeakMap,tc=new WeakMap,e5=new WeakSet,ti=function(e,...t){rl(this,e8,"f")[e]?.forEach(e=>e.apply(null,t))},tr=function(e,t){rl(this,e8,"f")[e]=rl(this,e8,"f")[e]?.filter(e=>t!==e)};let rd=!1;async function rp(){let e="solflare-detect-metamask";function t(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:e,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function i(r){let s=r.data;s?.target==="metamask-inpage"&&s.data?.name==="metamask-provider"&&(s.data.data?.id===e?(window.removeEventListener("message",i),s.data.data.error||function(){if(!rd){var e=new ru;let t=({register:t})=>t(e);try{window.dispatchEvent(new rc(t))}catch(e){console.error("wallet-standard:register-wallet event could not be dispatched\n",e)}try{window.addEventListener("wallet-standard:app-ready",({detail:e})=>t(e))}catch(e){console.error("wallet-standard:app-ready event listener could not be added\n",e)}rd=!0}}()):t())}window.addEventListener("message",i),window.setTimeout(()=>window.removeEventListener("message",i),5e3),t()}class rg extends tL{constructor(e={}){super(),this.name="Solflare",this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.Loadable,this._disconnected=()=>{let e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new tN),this.emit("disconnect"))},this._accountChanged=e=>{if(!e)return;let t=this._publicKey;if(t){try{e=new tk.PublicKey(e.toBytes())}catch(e){this.emit("error",new tb(e?.message,e));return}t.equals(e)||(this._publicKey=e,this.emit("connect",e))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==L.Unsupported&&(tS(()=>(!!window.solflare?.isSolflare||!!window.SolflareApp)&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0)),rp())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.connected}get readyState(){return this._readyState}async autoConnect(){this.readyState===L.Loadable&&tO()||await this.connect()}async connect(){try{let t,i,r;if(this.connected||this.connecting)return;if(this._readyState!==L.Loadable&&this._readyState!==L.Installed)throw new ty;if(this.readyState===L.Loadable&&tO()){let e=encodeURIComponent(window.location.href),t=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${e}?ref=${t}`;return}try{t=(await e.A(6110)).default}catch(e){throw new tw(e?.message,e)}try{i=new t({network:this._config.network})}catch(e){throw new tm(e?.message,e)}if(this._connecting=!0,!i.connected)try{await i.connect()}catch(e){throw new tM(e?.message,e)}if(!i.publicKey)throw new tM;try{r=new tk.PublicKey(i.publicKey.toBytes())}catch(e){throw new tb(e?.message,e)}i.on("disconnect",this._disconnected),i.on("accountChanged",this._accountChanged),this._wallet=i,this._publicKey=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(e){this.emit("error",new tv(e?.message,e))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{let r=this._wallet;if(!r)throw new tE;try{let{signers:s,...n}=i;return tx(e)?s?.length&&e.sign(s):(e=await this.prepareTransaction(e,t,n),s?.length&&e.partialSign(...s)),n.preflightCommitment=n.preflightCommitment||t.commitment,await r.signAndSendTransaction(e,n)}catch(e){if(e instanceof tf)throw e;throw new tA(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signMessage(e,"utf8")}catch(e){throw new tC(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}class rf extends tz{constructor(e={}){super(),this.name="Solong",this.url="https://solongwallet.io",this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAGlklEQVR4Ae3bA5DsyhfH8TNr49r2/du2bdu2bdu2zcdNrm3b9toz533rvctUn3Umk9p01WfdvVW/6nROBxJVS1rSkpa0pCUtaUlLWtKSpl4VXos3GJ4sujQFuUKfWl+qT730arzB8Ex9YksKcgXjFOCVeIPhBYydB8mawQ+yiGC8n0EN6zAVcgXhpQjoq1DDdsyDAAB9Pwo1HMC9INk0FIM8Bt1Qh9WohQQCvD+BtEMdtmC8I7y5aIE67MV0SBwDvB3qsE/UHwMJIpC/QB1OYiLEEeCPoQ7nMRcSwwDrao3Zl8aTIEGEUYlL0IAMXuQOr66UvsegDm+ExDJAPNiafSg0AlyIbmjAWX1aQzEkiH6T0QkNaEdpnAN8NNRhPcSF9e9el2ebBhyAuNBvGtLQgIuQOAd4D6jDMRQbM3AmOqEBDfq0xjJIEP3GohkakEFVjAP0y401sAsLnAE+pb6EsC5AA9J4sHsG+kX0PQR1eFJ8AwTWQh0+DjFm4a1Qh2/AOoz/BHX4ZdwD/CDU4aioX2GUMW+AOnB2bqiBBDHe86EOTYw5GRKJwQ/ijUM91OGTxgysxSmowzeNw7j08m5DHX4l7Igg2TY0g9hbLBZ+f7oxC98CdWjDvYzD+MVQh07GfEQsZyDgVWA71OGvorfnQQCAcqaYUFZDHW6j/itAoB70GcergzqsEa0rhGTTEA7mP0koK4xdyeOMmvBBhJU2zsjPMw7lu9O3zShpXheHk4hhcZ4w26AOG4RSxDiUfwZ12KdPqy+FBDHeV6EOZxizIg6HsMGbiQ5jdjzBXRfeefGg3tgbv9BYC0fhZE7sjUMY9Pf9rdcI5XtQh39BjBA/C3VYnM0zcgiDek+GOhzh93mQoMs7kIxze/eMhnxIEOPNM9bcFtTEeAb6I419axu/m2CsgxU4Aw1A/UxIUM/bO/9+cVkDDd5x42x8N1iH8Taow0NhHcZLoQ5Pi/MMzDMW+DTu7g6vIY9AdkAdHmaUMyn6roA6PD22AeLB6DbWplHG7LubfY+kfiIkiH5T0AJ1uFtMA1xUzOc1UIclzvCeXF+o7DygDlvds29RgVVzYj+K4xhgEX4NdcjgecE++rSL+ZdLmIxRB77Ose7l4XPIQB3eF8M60C/n8++ghltE/QLIFfqUiyUE8kOoYSW7jmLIFXeN4X0NaajDDlG/NG6XswrxKdxu+G/weh27j3wCej9uN9zEOjc3sObl4S243XBLhDfWE0mAMQjwZfhxDng7pG/8Sj4/ER/Gd/BdfBhPRGW2A/wxNAfcBOnFCHwZZ6GGs/gqapMAb/QEnIT20Uk8IQkQeB7aof3UihcM9wDvhyboANHXv1+IdWBOB2hsIftto+iSPEif8aGPcjrA50GHyPMiOIT9B/N5apaMgQT8D2poxMdwt8s+hkao4X9ZDxBTIdHwy/h8AeqQxhMhAU9BB9ThPMqHTYCYjU6owy3uPstSfL4Z6uZPC+Mk8gOomz8DEg3vXshAHb4MMXwZarhXGDPwa739w2j48623BPAniOFPUMPsMAL8INTw9AgDrLZOCmjFPEjA3WD1aUJVGAG+CGr4ECRCy6GGg3iyaF0+n/PwFByEGpaJ+qkw1sB7QA3/hUTozdBetFymvXhTWGVMOc7bp36/FhKRamNW9dcxZmpZiI+32ad+vAQSoWejGzpAXXh22Fek3wY1rDD2kVnijR3ExYQMPgkJOUB/nFW0Is3vnw6JhlHX9a4N70Iq/ACBv0MNu7J9WxHw7jaA2deFOtw32zeVHtHLWvMN0dtSkOzwS3spYy7iH1hx2d/wYdyTvnkR3BdeQjjerVBDN14JyZIfQWH5RC7e1rw32npZV54LCc+SPD5/HgqYD3WW5+gTqt6X+rA4v0701hRkKF0+bL+HTM9Hgv/MHH60wyvHWigsafwA1ZAhMguLoL34kbDcQEI1uAH8mcbuxPHImf8i5EMGxqvER9EI7cUqVMTl0Y6HoxHaBzvxNkyC9EEe7oEv4Sy0D/YQ+IS4ver1JNT38z7sWnwbb8TT8Cg8Gs/Gu/Ar7EEXtI/2ud7Ni0GAYCbiJDQiazA57k9nTcdqaJb9UtSvitXbmjavCJ9AMzRkJ/B80boUJBLhDe7Nw1/QCR1i9fgKRg6HByzvjZ/hInQQMjiCT2PSMHxC1a/l8wvwGxyG9kEaW/EtPI4xiiE5JcLrd6PxcLwM78SH8EG8Fc/H/UUXVUByGh8SSYBJgEmASYCJJMAkwBi6A3xCqZhiBz8+AAAAAElFTkSuQmCC",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&tS(()=>!!window.solong&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.currentAccount}get readyState(){return this._readyState}async connect(){try{let e,t;if(this.connected||this.connecting)return;if(this._readyState!==L.Installed)throw new ty;this._connecting=!0;let i=window.solong;try{e=await i.selectAccount()}catch(e){throw new tI(e?.message,e)}try{t=new tk.PublicKey(e)}catch(e){throw new tb(e?.message,e)}this._wallet=i,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}class ry extends tL{constructor(e={}){super(),this.name="TokenPocket",this.url="https://tokenpocket.pro",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGc+CjxwYXRoIGQ9Ik0xMDQxLjUyIDBILTI3VjEwMjRIMTA0MS41MlYwWiIgZmlsbD0iIzI5ODBGRSIvPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNDA4XzIyNSkiPgo8cGF0aCBkPSJNNDA2Ljc5NiA0MzguNjQzSDQwNi45MjdDNDA2Ljc5NiA0MzcuODU3IDQwNi43OTYgNDM2Ljk0IDQwNi43OTYgNDM2LjE1NFY0MzguNjQzWiIgZmlsbD0iIzI5QUVGRiIvPgo8cGF0aCBkPSJNNjY3LjYwMiA0NjMuNTMzSDUyMy4yNDlWNzI0LjA3NkM1MjMuMjQ5IDczNi4zODkgNTMzLjIwNCA3NDYuMzQ1IDU0NS41MTcgNzQ2LjM0NUg2NDUuMzMzQzY1Ny42NDcgNzQ2LjM0NSA2NjcuNjAyIDczNi4zODkgNjY3LjYwMiA3MjQuMDc2VjQ2My41MzNaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNDUzLjU2MyAyNzdINDQ4LjcxNkgxOTAuMjY5QzE3Ny45NTUgMjc3IDE2OCAyODYuOTU1IDE2OCAyOTkuMjY5VjM4OS42NTNDMTY4IDQwMS45NjcgMTc3Ljk1NSA0MTEuOTIyIDE5MC4yNjkgNDExLjkyMkgyNTAuOTE4SDI3NS4wMjFWNDM4LjY0NFY3MjQuNzMxQzI3NS4wMjEgNzM3LjA0NSAyODQuOTc2IDc0NyAyOTcuMjg5IDc0N0gzOTIuMTI4QzQwNC40NDEgNzQ3IDQxNC4zOTYgNzM3LjA0NSA0MTQuMzk2IDcyNC43MzFWNDM4LjY0NFY0MzYuMTU2VjQxMS45MjJINDM4LjQ5OUg0NDguMzIzSDQ1My4xN0M0OTAuMzcyIDQxMS45MjIgNTIwLjYzMSAzODEuNjYzIDUyMC42MzEgMzQ0LjQ2MUM1MjEuMDI0IDMwNy4yNTkgNDkwLjc2NSAyNzcgNDUzLjU2MyAyNzdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNjY3LjczNSA0NjMuNTMzVjY0NS4zNUM2NzIuNzEzIDY0Ni41MjkgNjc3LjgyMSA2NDcuNDQ2IDY4My4wNjEgNjQ4LjIzMkM2OTAuMzk3IDY0OS4yOCA2OTcuOTk0IDY0OS45MzUgNzA1LjU5MiA2NTAuMDY2QzcwNS45ODUgNjUwLjA2NiA3MDYuMzc4IDY1MC4wNjYgNzA2LjkwMiA2NTAuMDY2VjUwNS40NUM2ODUuMDI2IDUwNC4wMDkgNjY3LjczNSA0ODUuODAxIDY2Ny43MzUgNDYzLjUzM1oiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl80MDhfMjI1KSIvPgo8cGF0aCBkPSJNNzA5Ljc4MSAyNzdDNjA2LjgyMiAyNzcgNTIzLjI0OSAzNjAuNTczIDUyMy4yNDkgNDYzLjUzM0M1MjMuMjQ5IDU1Mi4wODQgNTg0Ljk0NiA2MjYuMjI1IDY2Ny43MzMgNjQ1LjM1VjQ2My41MzNDNjY3LjczMyA0NDAuMzQ3IDY4Ni41OTYgNDIxLjQ4NCA3MDkuNzgxIDQyMS40ODRDNzMyLjk2NyA0MjEuNDg0IDc1MS44MyA0NDAuMzQ3IDc1MS44MyA0NjMuNTMzQzc1MS44MyA0ODMuMDUxIDczOC42IDQ5OS40MjUgNzIwLjUyMyA1MDQuMTRDNzE3LjExNyA1MDUuMDU3IDcxMy40NDkgNTA1LjU4MSA3MDkuNzgxIDUwNS41ODFWNjUwLjA2NkM3MTMuNDQ5IDY1MC4wNjYgNzE2Ljk4NiA2NDkuOTM1IDcyMC41MjMgNjQ5LjgwNEM4MTguNTA1IDY0NC4xNzEgODk2LjMxNCA1NjIuOTU2IDg5Ni4zMTQgNDYzLjUzM0M4OTYuNDQ1IDM2MC41NzMgODEyLjg3MiAyNzcgNzA5Ljc4MSAyNzdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzA5Ljc4IDY1MC4wNjZWNTA1LjU4MUM3MDguNzMzIDUwNS41ODEgNzA3LjgxNiA1MDUuNTgxIDcwNi43NjggNTA1LjQ1VjY1MC4wNjZDNzA3LjgxNiA2NTAuMDY2IDcwOC44NjQgNjUwLjA2NiA3MDkuNzggNjUwLjA2NloiIGZpbGw9IndoaXRlIi8+CjwvZz4KPC9nPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzQwOF8yMjUiIHgxPSI3MDkuODQ0IiB5MT0iNTU2LjgyNyIgeDI9IjY2Ny43NTMiIHkyPSI1NTYuODI3IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IndoaXRlIi8+CjxzdG9wIG9mZnNldD0iMC45NjY3IiBzdG9wLWNvbG9yPSJ3aGl0ZSIgc3RvcC1vcGFjaXR5PSIwLjMyMzMiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJ3aGl0ZSIgc3RvcC1vcGFjaXR5PSIwLjMiLz4KPC9saW5lYXJHcmFkaWVudD4KPGNsaXBQYXRoIGlkPSJjbGlwMF80MDhfMjI1Ij4KPHJlY3Qgd2lkdGg9IjcyOC40NDgiIGhlaWdodD0iNDcwIiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTY4IDI3NykiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.NotDetected,this._disconnected=()=>{let e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new tN),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==L.Unsupported&&tS(()=>!!window.solana?.isTokenPocket&&(this._readyState=L.Installed,this.emit("readyStateChange",this._readyState),!0))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{let e;if(this.connected||this.connecting)return;if(this._readyState!==L.Installed)throw new ty;this._connecting=!0;let t=window.solana;try{await t.connect()}catch(e){throw new tM(e?.message,e)}if(!t.publicKey)throw new tI;try{e=new tk.PublicKey(t.publicKey.toBytes())}catch(e){throw new tb(e?.message,e)}t.on("disconnect",this._disconnected),this._wallet=t,this._publicKey=e,this.emit("connect",e)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("disconnect"))}async sendTransaction(e,t,i={}){try{let r=this._wallet;if(!r)throw new tE;try{let{signers:s,...n}=i;tx(e)?s?.length&&e.sign(s):(e=await this.prepareTransaction(e,t,n),s?.length&&e.partialSign(...s)),n.preflightCommitment=n.preflightCommitment||t.commitment;let{signature:a}=await r.signAndSendTransaction(e,n);return a}catch(e){if(e instanceof tf)throw e;throw new tA(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new tE;try{let{signature:i}=await t.signMessage(e);return i}catch(e){throw new tC(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}class rw extends tL{constructor({params:e={showTorusButton:!1}}={params:{showTorusButton:!1}}){super(),this.name="Torus",this.url="https://tor.us",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzMiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMyAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYuNSIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzAzNjRGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjIxODYgOS40OTIxOUMxMC40NTM5IDkuNDkyMTkgOS44MzM5OCAxMC4xMTIxIDkuODMzOTggMTAuODc2OFYxMi40ODk4QzkuODMzOTggMTMuMjU0NSAxMC40NTM5IDEzLjg3NDQgMTEuMjE4NiAxMy44NzQ0SDEzLjY2ODRWMjIuODk3NkMxMy42Njg0IDIzLjY2MjMgMTQuMjg4MyAyNC4yODIyIDE1LjA1MyAyNC4yODIySDE2LjY2NkMxNy40MzA3IDI0LjI4MjIgMTguMDUwNiAyMy42NjIzIDE4LjA1MDYgMjIuODk3NlYxMi41MDE1QzE4LjA1MDYgMTIuNDk3NiAxOC4wNTA2IDEyLjQ5MzcgMTguMDUwNiAxMi40ODk4VjEwLjg3NjhDMTguMDUwNiAxMC4xMTIxIDE3LjQzMDcgOS40OTIxOSAxNi42NjYgOS40OTIxOUgxNS4wNTNIMTEuMjE4NloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMS4zMzc2IDEzLjg3NDRDMjIuNTQ3NyAxMy44NzQ0IDIzLjUyODcgMTIuODkzNCAyMy41Mjg3IDExLjY4MzNDMjMuNTI4NyAxMC40NzMyIDIyLjU0NzcgOS40OTIxOSAyMS4zMzc2IDkuNDkyMTlDMjAuMTI3NSA5LjQ5MjE5IDE5LjE0NjUgMTAuNDczMiAxOS4xNDY1IDExLjY4MzNDMTkuMTQ2NSAxMi44OTM0IDIwLjEyNzUgMTMuODc0NCAyMS4zMzc2IDEzLjg3NDRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?L.Unsupported:L.Loadable,this._connecting=!1,this._wallet=null,this._publicKey=null,this._params=e}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isLoggedIn}get readyState(){return this._readyState}async connect(){try{let t,i,r,s;if(this.connected||this.connecting)return;if(this._readyState!==L.Loadable)throw new ty;this._connecting=!0;try{t=(await e.A(755714)).default}catch(e){throw new tw(e?.message,e)}try{i=window.torus||new t}catch(e){throw new tm(e?.message,e)}if(!i.isInitialized)try{await i.init(this._params)}catch(e){throw new tM(e?.message,e)}try{r=await i.login()}catch(e){throw new tI(e?.message,e)}try{s=new tk.PublicKey(r[0])}catch(e){throw new tb(e?.message,e)}this._wallet=i,this._publicKey=s,this.emit("connect",s)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{e.isLoggedIn&&await e.cleanUp()}catch(e){this.emit("error",new tv(e?.message,e))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{let r=this._wallet;if(!r)throw new tE;try{let{signers:s,...n}=i;e=await this.prepareTransaction(e,t,n),s?.length&&e.partialSign(...s),n.preflightCommitment=n.preflightCommitment||t.commitment;let{signature:a}=await r.signAndSendTransaction(e,n);return a}catch(e){if(e instanceof tf)throw e;throw new tA(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)||e}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signMessage(e)}catch(e){throw new tC(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}(p=tl||(tl={})).Mainnet="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",p.Devnet="solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",p.Deprecated_Mainnet="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",p.Deprecated_Devnet="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K",(g=th||(th={})).signTransaction="solana_signTransaction",g.signMessage="solana_signMessage",g.signAndSendTransaction="solana_signAndSendTransaction",g.signAndSendAllTransactions="solana_signAndSendAllTransactions",g.signAllTransactions="solana_signAllTransactions";let rm="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",rM="solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",rN="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",rv="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K";var rI=e.i(679877),rb=e.i(710600),rE=e.i(871520),rA=e.i(687542),rD=e.i(770749);e.i(736653);var rC=e.i(862570),rT=Object.defineProperty,rj=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?rT(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class r_ extends rC.IEvents{constructor(e){super(),this.opts=e,rj(this,"protocol","wc"),rj(this,"version",2)}}var rS=Object.defineProperty;class rO extends rC.IEvents{constructor(e,t){super(),this.core=e,this.logger=t,((e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?rS(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i})(this,"records",new Map)}}class rx{constructor(e,t){this.logger=e,this.core=t}}class rz extends rC.IEvents{constructor(e,t){super(),this.relayer=e,this.logger=t}}class rL extends rC.IEvents{constructor(e){super()}}class rP{constructor(e,t,i,r){this.core=e,this.logger=t,this.name=i}}class rk extends rC.IEvents{constructor(e,t){super(),this.relayer=e,this.logger=t}}class rU extends rC.IEvents{constructor(e,t){super(),this.core=e,this.logger=t}}class rR{constructor(e,t,i){this.core=e,this.logger=t,this.store=i}}class rY{constructor(e,t){this.projectId=e,this.logger=t}}class rQ{constructor(e,t,i){this.core=e,this.logger=t,this.telemetryEnabled=i}}var rB=Object.defineProperty,rq=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?rB(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};rI.default;class rW{constructor(e){this.opts=e,rq(this,"protocol","wc"),rq(this,"version",2)}}rI.EventEmitter;class rK{constructor(e){this.client=e}}var rH=e.i(550483),r$=e.i(14526),rV=e.i(232232),rG=e.i(33898),rF=e.i(12791),rZ=e.i(571232),rJ=e.i(574863);e.i(547762);var rX=e.i(266188),r0=e.i(835230),r1=e.i(913095),r4=e.i(895886),r2=e.i(208910);function r3(e){let[t,i]=e.split(":");return{namespace:t,reference:i}}function r5(e,t){return e.includes(":")?[e]:t.chains||[]}let r8="react-native",r6="node",r9="browser";function r7(){return"u">typeof tu.default&&"u">typeof tu.default.versions&&"u">typeof tu.default.versions.node}function se(){return!(0,rF.getDocument)()&&!!(0,rF.getNavigator)()&&"ReactNative"===navigator.product}function st(){return!r7()&&!!(0,rF.getNavigator)()&&!!(0,rF.getDocument)()}function si(){return se()?r8:r7()?r6:st()?r9:"unknown"}function sr(){var t;try{return se()&&"u">typeof(null==e.g?void 0:e.g.Application)?null==(t=e.g.Application)?void 0:t.applicationId:void 0}catch{return}}function ss(){return(0,rZ.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function sn(t,i,r){var s;let n,a=function(){if(si()===r8&&"u">typeof(null==e.g?void 0:e.g.Platform)){let{OS:t,Version:i}=e.g.Platform;return[t,i].join("-")}let t=(0,rG.detect)();if(null===t)return"unknown";let i=t.os?t.os.replace(" ","").toLowerCase():"unknown";return"browser"===t.type?[i,t.name,t.version].join("-"):[i,t.version].join("-")}(),o=(n=si())===r9?[n,(null==(s=(0,rF.getLocation)())?void 0:s.host)||"unknown"].join(":"):n;return[[t,i].join("-"),["js",r].join("-"),a,o].join("/")}function sa(e,t){return e.filter(e=>t.includes(e)).length===e.length}function so(e){return Object.fromEntries(e.entries())}function sc(e){return new Map(Object.entries(e))}function sl(e=rH.FIVE_MINUTES,t){let i,r,s,n,a=(0,rH.toMiliseconds)(e||rH.FIVE_MINUTES);return{resolve:e=>{s&&i&&(clearTimeout(s),i(e),n=Promise.resolve(e))},reject:e=>{s&&r&&(clearTimeout(s),r(e))},done:()=>new Promise((e,o)=>{if(n)return e(n);s=setTimeout(()=>{let e=Error(t);n=Promise.reject(e),o(e)},a),i=e,r=o})}}function sh(e,t,i){return new Promise(async(r,s)=>{let n=setTimeout(()=>s(Error(i)),t);try{let t=await e;r(t)}catch(e){s(e)}clearTimeout(n)})}function su(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function sd(e){let[t,i]=e.split(":"),r={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof i)r.topic=i;else if("id"===t&&Number.isInteger(Number(i)))r.id=Number(i);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${i}`);return r}function sp(e,t){return(0,rH.fromMiliseconds)((t||Date.now())+(0,rH.toMiliseconds)(e))}function sg(e){return Date.now()>=(0,rH.toMiliseconds)(e)}function sf(e,t){return`${e}${t?`:${t}`:""}`}function sy(e=[],t=[]){return[...new Set([...e,...t])]}async function sw({id:t,topic:i,wcDeepLink:r}){var s,n;try{if(!r)return;let a="string"==typeof r?JSON.parse(r):r,o=a?.href;if("string"!=typeof o)return;let c=function(e,t,i){let r=`requestId=${t}&sessionTopic=${i}`;e.endsWith("/")&&(e=e.slice(0,-1));let s=`${e}`;if(e.startsWith("https://t.me")){let t=e.includes("?")?"&startapp=":"?startapp=";s=`${s}${t}${function(e,t=!1){let i=i2.Buffer.from(e).toString("base64");return t?i.replace(/[=]/g,""):i}(r,!0)}`}else s=`${s}/wc?${r}`;return s}(o,t,i),l=si();if(l===r9){let e;if(!(null!=(s=(0,rF.getDocument)())&&s.hasFocus()))return void console.warn("Document does not have focus, skipping deeplink.");n=c,e="_self",!function(){try{return window.self!==window.top}catch{return!1}}()?("u">typeof window&&(window.TelegramWebviewProxy||window.Telegram||window.TelegramWebviewProxyProto)||n.startsWith("https://")||n.startsWith("http://"))&&(e="_blank"):e="_top",window.open(n,e,"noreferrer noopener")}else l===r8&&"u">typeof(null==e.g?void 0:e.g.Linking)&&await e.g.Linking.openURL(c)}catch(e){console.error(e)}}async function sm(e,t){let i="";try{if(st()&&(i=localStorage.getItem(t)))return i;i=await e.getItem(t)}catch(e){console.error(e)}return i}function sM(e,t){if(!e.includes(t))return null;let i=e.split(/([&,?,=])/),r=i.indexOf(t);return i[r+2]}function sN(){return"u">typeof crypto&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function sv(){return"u">typeof tu.default&&"true"===tu.default.env.IS_VITEST}function sI(e){return i2.Buffer.from(e,"base64").toString("utf-8")}function sb(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function sE(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function sA(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");sb(e.outputLen),sb(e.blockLen)}function sD(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function sC(e,t){sE(e);let i=t.outputLen;if(e.length<i)throw Error("digestInto() expects output buffer of length at least "+i)}let sT=BigInt(0x100000000-1),sj=BigInt(32),s_="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function sS(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function sO(e,t){return e<<32-t|e>>>t}let sx=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];function sz(e){for(let i=0;i<e.length;i++){var t;e[i]=(t=e[i])<<24&0xff000000|t<<8&0xff0000|t>>>8&65280|t>>>24&255}}function sL(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),sE(e),e}class sP{clone(){return this._cloneInto()}}function sk(e){let t=t=>e().update(sL(t)).digest(),i=e();return t.outputLen=i.outputLen,t.blockLen=i.blockLen,t.create=()=>e(),t}function sU(e=32){if(s_&&"function"==typeof s_.getRandomValues)return s_.getRandomValues(new Uint8Array(e));if(s_&&"function"==typeof s_.randomBytes)return s_.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}let sR=[],sY=[],sQ=[],sB=BigInt(0),sq=BigInt(1),sW=BigInt(2),sK=BigInt(7),sH=BigInt(256),s$=BigInt(113);for(let e=0,t=sq,i=1,r=0;e<24;e++){[i,r]=[r,(2*i+3*r)%5],sR.push(2*(5*r+i)),sY.push((e+1)*(e+2)/2%64);let s=sB;for(let e=0;e<7;e++)(t=(t<<sq^(t>>sK)*s$)%sH)&sW&&(s^=sq<<(sq<<BigInt(e))-sq);sQ.push(s)}let[sV,sG]=function(e,t=!1){let i=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let{h:n,l:a}=function(e,t=!1){return t?{h:Number(e&sT),l:Number(e>>sj&sT)}:{h:0|Number(e>>sj&sT),l:0|Number(e&sT)}}(e[s],t);[i[s],r[s]]=[n,a]}return[i,r]}(sQ,!0),sF=(e,t,i)=>i>32?t<<i-32|e>>>64-i:e<<i|t>>>32-i,sZ=(e,t,i)=>i>32?e<<i-32|t>>>64-i:t<<i|e>>>32-i;class sJ extends sP{constructor(e,t,i,r=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=i,this.enableXOF=r,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,sb(i),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}(this.state)}keccak(){sx||sz(this.state32),function(e,t=24){let i=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)i[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let r=(t+8)%10,s=(t+2)%10,n=i[s],a=i[s+1],o=sF(n,a,1)^i[r],c=sZ(n,a,1)^i[r+1];for(let i=0;i<50;i+=10)e[t+i]^=o,e[t+i+1]^=c}let t=e[2],s=e[3];for(let i=0;i<24;i++){let r=sY[i],n=sF(t,s,r),a=sZ(t,s,r),o=sR[i];t=e[o],s=e[o+1],e[o]=n,e[o+1]=a}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)i[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~i[(r+2)%10]&i[(r+4)%10]}e[0]^=sV[r],e[1]^=sG[r]}i.fill(0)}(this.state32,this.rounds),sx||sz(this.state32),this.posOut=0,this.pos=0}update(e){sD(this);let{blockLen:t,state:i}=this,r=(e=sL(e)).length;for(let s=0;s<r;){let n=Math.min(t-this.pos,r-s);for(let t=0;t<n;t++)i[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:i,blockLen:r}=this;e[i]^=t,(128&t)!=0&&i===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){sD(this,!1),sE(e),this.finish();let t=this.state,{blockLen:i}=this;for(let r=0,s=e.length;r<s;){this.posOut>=i&&this.keccak();let n=Math.min(i-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+n),r),this.posOut+=n,r+=n}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return sb(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(sC(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:i,outputLen:r,rounds:s,enableXOF:n}=this;return e||(e=new sJ(t,i,r,n,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=i,e.outputLen=r,e.enableXOF=n,e.destroyed=this.destroyed,e}}let sX=sk(()=>new sJ(136,1,32));function s0(e){let t=`Ethereum Signed Message:
${e.length}`,i=new TextEncoder().encode(t+e);return"0x"+i2.Buffer.from(sX(i)).toString("hex")}async function s1(e,t,i,r,s,n){switch(i.t){case"eip191":return await s4(e,t,i.s);case"eip1271":return await s2(e,t,i.s,r,s,n);default:throw Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${i.t}`)}}async function s4(e,t,i){return(await (0,rJ.recoverAddress)({hash:s0(t),signature:i})).toLowerCase()===e.toLowerCase()}async function s2(e,t,i,r,s,n){let a=r3(r);if(!a.namespace||!a.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{let a="0x1626ba7e",o=i.substring(2),c=s0(t).substring(2),l=a+c+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+o,h=await fetch(`${n||"https://rpc.walletconnect.org/v1"}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:l},"latest"]})}),{result:u}=await h.json();return!!u&&u.slice(0,a.length).toLowerCase()===a.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}var s3=Object.defineProperty,s5=Object.defineProperties,s8=Object.getOwnPropertyDescriptors,s6=Object.getOwnPropertySymbols,s9=Object.prototype.hasOwnProperty,s7=Object.prototype.propertyIsEnumerable,ne=(e,t,i)=>t in e?s3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;let nt=e=>e?.split(":"),ni=e=>{let t=e&&nt(e);if(t)return t[2]+":"+t[3]},nr=e=>{let t=e&&nt(e);if(t)return t.pop()};async function ns(e){let{cacao:t,projectId:i}=e,{s:r,p:s}=t,n=nn(s,s.iss),a=nr(s.iss);return await s1(a,n,r,ni(s.iss),i)}let nn=(e,t)=>{let i=`${e.domain} wants you to sign in with your Ethereum account:`,r=nr(t);if(!e.aud&&!e.uri)throw Error("Either `aud` or `uri` is required to construct the message");let s=e.statement||void 0,n=`URI: ${e.aud||e.uri}`,a=`Version: ${e.version}`,o=`Chain ID: ${(e=>{let t=e&&nt(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]})(t)}`,c=`Nonce: ${e.nonce}`,l=`Issued At: ${e.iat}`,h=e.exp?`Expiration Time: ${e.exp}`:void 0,u=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,p=e.resources?`Resources:${e.resources.map(e=>`
- ${e}`).join("")}`:void 0,g=nu(e.resources);return g&&(s=function(e="",t){na(t);let i="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(i))return e;let r=[],s=0;Object.keys(t.att).forEach(e=>{let i=Object.keys(t.att[e]).map(e=>({ability:e.split("/")[0],action:e.split("/")[1]}));i.sort((e,t)=>e.action.localeCompare(t.action));let n={};i.forEach(e=>{n[e.ability]||(n[e.ability]=[]),n[e.ability].push(e.action)});let a=Object.keys(n).map(t=>(s++,`(${s}) '${t}': '${n[t].join("', '")}' for '${e}'.`));r.push(a.join(", ").replace(".,","."))});let n=r.join(" "),a=`${i}${n}`;return`${e?e+" ":""}${a}`}(s,nc(g))),[i,r,"",s,"",n,a,o,c,l,h,u,d,p].filter(e=>null!=e).join(`
`)};function na(e){if(!e)throw Error("No recap provided, value is undefined");if(!e.att)throw Error("No `att` property found");let t=Object.keys(e.att);if(!(null!=t&&t.length))throw Error("No resources found in `att` property");t.forEach(t=>{let i=e.att[t];if(Array.isArray(i)||"object"!=typeof i)throw Error(`Resource must be an object: ${t}`);if(!Object.keys(i).length)throw Error(`Resource object is empty: ${t}`);Object.keys(i).forEach(e=>{let t=i[e];if(!Array.isArray(t))throw Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach(t=>{if("object"!=typeof t)throw Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)})})})}function no(e){return na(e),`urn:recap:${i2.Buffer.from(JSON.stringify(e)).toString("base64").replace(/=/g,"")}`}function nc(e){var t;let i=(t=e.replace("urn:recap:",""),JSON.parse(i2.Buffer.from(t,"base64").toString("utf-8")));return na(i),i}function nl(e){var t;let i=nc(e);na(i);let r=null==(t=i.att)?void 0:t.eip155;return r?Object.keys(r).map(e=>e.split("/")[1]):[]}function nh(e){let t=nc(e);na(t);let i=[];return Object.values(t.att).forEach(e=>{Object.values(e).forEach(e=>{var t;null!=(t=e?.[0])&&t.chains&&i.push(e[0].chains)})}),[...new Set(i.flat())]}function nu(e){if(!e)return;let t=e?.[e.length-1];return t&&t.includes("urn:recap:")?t:void 0}function nd(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function np(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function ng(e,...t){if(!np(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function nf(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function ny(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}let nw=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function nm(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e);else if(np(e))e=nv(e);else throw Error("Uint8Array expected, got "+typeof e);return e}function nM(e,t,i=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error("invalid output length, expected "+e+", got: "+t.length);if(i&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function nN(e,t,i,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,i,r);let s=BigInt(32),n=BigInt(0xffffffff),a=Number(i>>s&n),o=Number(i&n),c=4*!!r,l=4*!r;e.setUint32(t+c,a,r),e.setUint32(t+l,o,r)}function nv(e){return Uint8Array.from(e)}function nI(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}let nb=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),nE=nb("expand 16-byte k"),nA=nb("expand 32-byte k"),nD=nw(nE),nC=nw(nA);function nT(e,t){return e<<t|e>>>32-t}function nj(e){return e.byteOffset%4==0}let n_=0x100000000-1,nS=new Uint32Array,nO=(e,t)=>255&e[t++]|(255&e[t++])<<8;class nx{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,ng(e=nm(e),32);const t=nO(e,0),i=nO(e,2),r=nO(e,4),s=nO(e,6),n=nO(e,8),a=nO(e,10),o=nO(e,12),c=nO(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|i<<3)&8191,this.r[2]=(i>>>10|r<<6)&7939,this.r[3]=(r>>>7|s<<9)&8191,this.r[4]=(s>>>4|n<<12)&255,this.r[5]=n>>>1&8190,this.r[6]=(n>>>14|a<<2)&8191,this.r[7]=(a>>>11|o<<5)&8065,this.r[8]=(o>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=nO(e,16+2*t)}process(e,t,i=!1){let{h:r,r:s}=this,n=s[0],a=s[1],o=s[2],c=s[3],l=s[4],h=s[5],u=s[6],d=s[7],p=s[8],g=s[9],f=nO(e,t+0),y=nO(e,t+2),w=nO(e,t+4),m=nO(e,t+6),M=nO(e,t+8),N=nO(e,t+10),v=nO(e,t+12),I=nO(e,t+14),b=r[0]+(8191&f),E=r[1]+((f>>>13|y<<3)&8191),A=r[2]+((y>>>10|w<<6)&8191),D=r[3]+((w>>>7|m<<9)&8191),C=r[4]+((m>>>4|M<<12)&8191),T=r[5]+(M>>>1&8191),j=r[6]+((M>>>14|N<<2)&8191),_=r[7]+((N>>>11|v<<5)&8191),S=r[8]+((v>>>8|I<<8)&8191),O=r[9]+(I>>>5|2048*!i),x=0,z=0+b*n+5*g*E+5*p*A+5*d*D+5*u*C;x=z>>>13,z&=8191,z+=5*h*T+5*l*j+5*c*_+5*o*S+5*a*O,x+=z>>>13,z&=8191;let L=x+b*a+E*n+5*g*A+5*p*D+5*d*C;x=L>>>13,L&=8191,L+=5*u*T+5*h*j+5*l*_+5*c*S+5*o*O,x+=L>>>13,L&=8191;let P=x+b*o+E*a+A*n+5*g*D+5*p*C;x=P>>>13,P&=8191,P+=5*d*T+5*u*j+5*h*_+5*l*S+5*c*O,x+=P>>>13,P&=8191;let k=x+b*c+E*o+A*a+D*n+5*g*C;x=k>>>13,k&=8191,k+=5*p*T+5*d*j+5*u*_+5*h*S+5*l*O,x+=k>>>13,k&=8191;let U=x+b*l+E*c+A*o+D*a+C*n;x=U>>>13,U&=8191,U+=5*g*T+5*p*j+5*d*_+5*u*S+5*h*O,x+=U>>>13,U&=8191;let R=x+b*h+E*l+A*c+D*o+C*a;x=R>>>13,R&=8191,R+=T*n+5*g*j+5*p*_+5*d*S+5*u*O,x+=R>>>13,R&=8191;let Y=x+b*u+E*h+A*l+D*c+C*o;x=Y>>>13,Y&=8191,Y+=T*a+j*n+5*g*_+5*p*S+5*d*O,x+=Y>>>13,Y&=8191;let Q=x+b*d+E*u+A*h+D*l+C*c;x=Q>>>13,Q&=8191,Q+=T*o+j*a+_*n+5*g*S+5*p*O,x+=Q>>>13,Q&=8191;let B=x+b*p+E*d+A*u+D*h+C*l;x=B>>>13,B&=8191,B+=T*c+j*o+_*a+S*n+5*g*O,x+=B>>>13,B&=8191;let q=x+b*g+E*p+A*d+D*u+C*h;x=q>>>13,q&=8191,q+=T*l+j*c+_*o+S*a+O*n,x+=q>>>13,q&=8191,z=8191&(x=(x=(x<<2)+x|0)+z|0),x>>>=13,L+=x,r[0]=z,r[1]=L,r[2]=P,r[3]=k,r[4]=U,r[5]=R,r[6]=Y,r[7]=Q,r[8]=B,r[9]=q}finalize(){let{h:e,pad:t}=this,i=new Uint16Array(10),r=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=r,r=e[t]>>>13,e[t]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,i[0]=e[0]+5,r=i[0]>>>13,i[0]&=8191;for(let t=1;t<10;t++)i[t]=e[t]+r,r=i[t]>>>13,i[t]&=8191;i[9]-=8192;let s=(1^r)-1;for(let e=0;e<10;e++)i[e]&=s;s=~s;for(let t=0;t<10;t++)e[t]=e[t]&s|i[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let n=e[0]+t[0];e[0]=65535&n;for(let i=1;i<8;i++)n=(e[i]+t[i]|0)+(n>>>16)|0,e[i]=65535&n;nI(i)}update(e){nf(this);let{buffer:t,blockLen:i}=this,r=(e=nm(e)).length;for(let s=0;s<r;){let n=Math.min(i-this.pos,r-s);if(n===i){for(;i<=r-s;s+=i)this.process(e,s);continue}t.set(e.subarray(s,s+n),this.pos),this.pos+=n,s+=n,this.pos===i&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){nI(this.h,this.r,this.buffer,this.pad)}digestInto(e){nf(this),function(e,t){ng(e);let i=t.outputLen;if(e.length<i)throw Error("digestInto() expects output buffer of length at least "+i)}(e,this),this.finished=!0;let{buffer:t,h:i}=this,{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let s=0;for(let t=0;t<8;t++)e[s++]=i[t]>>>0,e[s++]=i[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let i=e.slice(0,t);return this.destroy(),i}}let nz=(f=e=>new nx(e),(n=(e,t)=>f(t).update(nm(e)).digest()).outputLen=(a=f(new Uint8Array(32))).outputLen,n.blockLen=a.blockLen,n.create=e=>f(e),n),nL=function(e,t){let{allowShortKeys:i,extendNonceFn:r,counterLength:s,counterRight:n,rounds:a}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return nd(s),nd(a),ny(n),ny(i),(t,o,c,l,h=0)=>{ng(t),ng(o),ng(c);let u=c.length;if(void 0===l&&(l=new Uint8Array(u)),ng(l),nd(h),h<0||h>=n_)throw Error("arx: counter overflow");if(l.length<u)throw Error(`arx: output (${l.length}) is shorter than data (${u})`);let d=[],p=t.length,g,f;if(32===p)d.push(g=nv(t)),f=nC;else if(16===p&&i)(g=new Uint8Array(32)).set(t),g.set(t,16),f=nD,d.push(g);else throw Error(`arx: invalid 32-byte key, got length=${p}`);nj(o)||d.push(o=nv(o));let y=nw(g);if(r){if(24!==o.length)throw Error("arx: extended nonce must be 24 bytes");r(f,y,nw(o.subarray(0,16)),y),o=o.subarray(16)}let w=16-s;if(w!==o.length)throw Error(`arx: nonce must be ${w} or 16 bytes`);if(12!==w){let e=new Uint8Array(12);e.set(o,n?0:12-o.length),o=e,d.push(o)}return function(e,t,i,r,s,n,a,o){let c=s.length,l=new Uint8Array(64),h=nw(l),u=nj(s)&&nj(n),d=u?nw(s):nS,p=u?nw(n):nS;for(let g=0;g<c;a++){if(e(t,i,r,h,a,o),a>=n_)throw Error("arx: counter overflow");let f=Math.min(64,c-g);if(u&&64===f){let e=g/4;if(g%4!=0)throw Error("arx: invalid block position");for(let t=0,i;t<16;t++)p[i=e+t]=d[i]^h[t];g+=64;continue}for(let e=0,t;e<f;e++)n[t=g+e]=s[t]^l[e];g+=f}}(e,f,y,nw(o),c,l,h,a),nI(...d),l}}(function(e,t,i,r,s,n=20){let a=e[0],o=e[1],c=e[2],l=e[3],h=t[0],u=t[1],d=t[2],p=t[3],g=t[4],f=t[5],y=t[6],w=t[7],m=i[0],M=i[1],N=i[2],v=a,I=o,b=c,E=l,A=h,D=u,C=d,T=p,j=g,_=f,S=y,O=w,x=s,z=m,L=M,P=N;for(let e=0;e<n;e+=2)j=j+(x=nT(x^(v=v+A|0),16))|0,v=v+(A=nT(A^j,12))|0,j=j+(x=nT(x^v,8))|0,A=nT(A^j,7),_=_+(z=nT(z^(I=I+D|0),16))|0,I=I+(D=nT(D^_,12))|0,_=_+(z=nT(z^I,8))|0,D=nT(D^_,7),S=S+(L=nT(L^(b=b+C|0),16))|0,b=b+(C=nT(C^S,12))|0,S=S+(L=nT(L^b,8))|0,C=nT(C^S,7),O=O+(P=nT(P^(E=E+T|0),16))|0,E=E+(T=nT(T^O,12))|0,O=O+(P=nT(P^E,8))|0,T=nT(T^O,7),S=S+(P=nT(P^(v=v+D|0),16))|0,v=v+(D=nT(D^S,12))|0,S=S+(P=nT(P^v,8))|0,D=nT(D^S,7),O=O+(x=nT(x^(I=I+C|0),16))|0,I=I+(C=nT(C^O,12))|0,O=O+(x=nT(x^I,8))|0,C=nT(C^O,7),j=j+(z=nT(z^(b=b+T|0),16))|0,b=b+(T=nT(T^j,12))|0,j=j+(z=nT(z^b,8))|0,T=nT(T^j,7),_=_+(L=nT(L^(E=E+A|0),16))|0,E=E+(A=nT(A^_,12))|0,_=_+(L=nT(L^E,8))|0,A=nT(A^_,7);let k=0;r[k++]=a+v|0,r[k++]=o+I|0,r[k++]=c+b|0,r[k++]=l+E|0,r[k++]=h+A|0,r[k++]=u+D|0,r[k++]=d+C|0,r[k++]=p+T|0,r[k++]=g+j|0,r[k++]=f+_|0,r[k++]=y+S|0,r[k++]=w+O|0,r[k++]=s+x|0,r[k++]=m+z|0,r[k++]=M+L|0,r[k++]=N+P|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),nP=new Uint8Array(16),nk=(e,t)=>{e.update(t);let i=t.length%16;i&&e.update(nP.subarray(i))},nU=new Uint8Array(32);function nR(e,t,i,r,s){let n=e(t,i,nU),a=nz.create(n);s&&nk(a,s),nk(a,r);let o=new Uint8Array(16),c=new DataView(o.buffer,o.byteOffset,o.byteLength);nN(c,0,BigInt(s?s.length:0),!0),nN(c,8,BigInt(r.length),!0),a.update(o);let l=a.digest();return nI(n,o),l}let nY=((e,t)=>{function i(r,...s){if(ng(r),void 0!==e.nonceLength){let t=s[0];if(!t)throw Error("nonce / iv required");e.varSizeNonce?ng(t):ng(t,e.nonceLength)}let n=e.tagLength;n&&void 0!==s[1]&&ng(s[1]);let a=t(r,...s),o=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");ng(t)}},c=!1;return{encrypt(e,t){if(c)throw Error("cannot encrypt() twice with same key + nonce");return c=!0,ng(e),o(a.encrypt.length,t),a.encrypt(e,t)},decrypt(e,t){if(ng(e),n&&e.length<n)throw Error("invalid ciphertext length: smaller than tagLength="+n);return o(a.decrypt.length,t),a.decrypt(e,t)}}}return Object.assign(i,e),i})({blockSize:64,nonceLength:12,tagLength:16},(e,t,i)=>({encrypt(r,s){let n=r.length;(s=nM(n+16,s,!1)).set(r);let a=s.subarray(0,-16);nL(e,t,a,a,1);let o=nR(nL,e,t,a,i);return s.set(o,n),nI(o),s},decrypt(r,s){s=nM(r.length-16,s,!1);let n=r.subarray(0,-16),a=r.subarray(-16),o=nR(nL,e,t,n,i);if(!function(e,t){if(e.length!==t.length)return!1;let i=0;for(let r=0;r<e.length;r++)i|=e[r]^t[r];return 0===i}(a,o))throw Error("invalid tag");return s.set(r.subarray(0,-16)),nL(e,t,s,s,1),nI(o),s}}));class nQ extends sP{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,sA(e);const i=sL(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(i.length>r?e.create().update(i).digest():i);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return sD(this),this.iHash.update(e),this}digestInto(e){sD(this),sE(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:i,finished:r,destroyed:s,blockLen:n,outputLen:a}=this;return e.finished=r,e.destroyed=s,e.blockLen=n,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let nB=(e,t,i)=>new nQ(e,t).update(i).digest();nB.create=(e,t)=>new nQ(e,t);let nq=new Uint8Array([0]),nW=new Uint8Array;class nK extends sP{constructor(e,t,i,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=i,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=sS(this.buffer)}update(e){sD(this);let{view:t,buffer:i,blockLen:r}=this,s=(e=sL(e)).length;for(let n=0;n<s;){let a=Math.min(r-this.pos,s-n);if(a===r){let t=sS(e);for(;r<=s-n;n+=r)this.process(t,n);continue}i.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){sD(this),sC(e,this),this.finished=!0;let{buffer:t,view:i,blockLen:r,isLE:s}=this,{pos:n}=this;t[n++]=128,this.buffer.subarray(n).fill(0),this.padOffset>r-n&&(this.process(i,0),n=0);for(let e=n;e<r;e++)t[e]=0;(function(e,t,i,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,i,r);let s=BigInt(32),n=BigInt(0xffffffff),a=Number(i>>s&n),o=Number(i&n),c=4*!!r,l=4*!r;e.setUint32(t+c,a,r),e.setUint32(t+l,o,r)})(i,r-8,BigInt(8*this.length),s),this.process(i,0);let a=sS(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=o/4,l=this.get();if(c>l.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)a.setUint32(4*e,l[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let i=e.slice(0,t);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:i,length:r,finished:s,destroyed:n,pos:a}=this;return e.length=r,e.pos=a,e.finished=s,e.destroyed=n,r%t&&e.buffer.set(i),e}}let nH=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),n$=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),nV=new Uint32Array(64);class nG extends nK{constructor(){super(64,32,8,!1),this.A=0|n$[0],this.B=0|n$[1],this.C=0|n$[2],this.D=0|n$[3],this.E=0|n$[4],this.F=0|n$[5],this.G=0|n$[6],this.H=0|n$[7]}get(){let{A:e,B:t,C:i,D:r,E:s,F:n,G:a,H:o}=this;return[e,t,i,r,s,n,a,o]}set(e,t,i,r,s,n,a,o){this.A=0|e,this.B=0|t,this.C=0|i,this.D=0|r,this.E=0|s,this.F=0|n,this.G=0|a,this.H=0|o}process(e,t){for(let i=0;i<16;i++,t+=4)nV[i]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=nV[e-15],i=nV[e-2],r=sO(t,7)^sO(t,18)^t>>>3,s=sO(i,17)^sO(i,19)^i>>>10;nV[e]=s+nV[e-7]+r+nV[e-16]|0}let{A:i,B:r,C:s,D:n,E:a,F:o,G:c,H:l}=this;for(let e=0;e<64;e++){var h,u,d,p;let t=l+(sO(a,6)^sO(a,11)^sO(a,25))+((h=a)&o^~h&c)+nH[e]+nV[e]|0,g=(sO(i,2)^sO(i,13)^sO(i,22))+((u=i)&(d=r)^u&(p=s)^d&p)|0;l=c,c=o,o=a,a=n+t|0,n=s,s=r,r=i,i=t+g|0}i=i+this.A|0,r=r+this.B|0,s=s+this.C|0,n=n+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(i,r,s,n,a,o,c,l)}roundClean(){nV.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let nF=sk(()=>new nG),nZ=BigInt(0);function nJ(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function nX(e){if(!nJ(e))throw Error("Uint8Array expected")}let n0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function n1(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function n4(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,i=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(i);for(let t=0,s=0;t<i;t++,s+=2){let i=n1(e.charCodeAt(s)),n=n1(e.charCodeAt(s+1));if(void 0===i||void 0===n)throw Error('hex string expected, got non-hex character "'+(e[s]+e[s+1])+'" at index '+s);r[t]=16*i+n}return r}function n2(e){return nX(e),function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?nZ:BigInt("0x"+e)}(function(e){nX(e);let t="";for(let i=0;i<e.length;i++)t+=n0[e[i]];return t}(Uint8Array.from(e).reverse()))}function n3(e,t,i){let r;if("string"==typeof t)try{r=n4(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(nJ(t))r=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let s=r.length;if("number"==typeof i&&s!==i)throw Error(e+" of length "+i+" expected, got "+s);return r}let n5=e=>"bigint"==typeof e&&nZ<=e;function n8(e,t,i,r){if(!(n5(t)&&n5(i)&&n5(r))||!(i<=t)||!(t<r))throw Error("expected valid "+e+": "+i+" <= n < "+r+", got "+t)}let n6={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||nJ(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)},n9=BigInt(0),n7=BigInt(1);function ae(e,t){let i=e%t;return i>=n9?i:t+i}function at(e,t,i){let r=e;for(;t-- >n9;)r*=r,r%=i;return r}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);let ai=BigInt(0),ar=BigInt(1),as=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);let an=BigInt(1),aa=BigInt(2),ao=BigInt(3),ac=BigInt(5);BigInt(8);let al=function(e){let t=(function(e,t,i={}){let r=(t,i,r)=>{let s=n6[i];if("function"!=typeof s)throw Error("invalid validator function");let n=e[t];if(!(r&&void 0===n)&&!s(n,e))throw Error("param "+String(t)+" is invalid. Expected "+i+", got "+n)};for(let[e,i]of Object.entries(t))r(e,i,!1);for(let[e,t]of Object.entries(i))r(e,t,!0)}(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})),{P:i}=t,r=e=>ae(e,i),s=t.montgomeryBits,n=Math.ceil(s/8),a=t.nByteLength,o=t.adjustScalarBytes||(e=>e),c=t.powPminus2||(e=>(function(e,t,i){if(t<n9)throw Error("invalid exponent, negatives unsupported");if(i<=n9)throw Error("invalid modulus");if(i===n7)return n9;let r=n7;for(;t>n9;)t&n7&&(r=r*e%i),e=e*e%i,t>>=n7;return r})(e,i-BigInt(2),i));function l(e,t,i){let s=r(e*(t-i));return[t=r(t-s),i=r(i+s)]}let h=(t.a-BigInt(2))/BigInt(4);function u(e){var t;return t=r(e),n4(t.toString(16).padStart(2*n,"0")).reverse()}function d(e,t){let d,p=function(e,t){n8("u",e,ai,i),n8("scalar",t,ai,i);let n=ar,a=ai,o=e,u=ar,d=ai,p;for(let i=BigInt(s-1);i>=ai;i--){let s=t>>i&ar;d^=s,n=(p=l(d,n,o))[0],o=p[1],a=(p=l(d,a,u))[0],u=p[1],d=s;let c=n+a,g=r(c*c),f=n-a,y=r(f*f),w=g-y,m=o+u,M=r((o-u)*c),N=r(m*f),v=M+N,I=M-N;o=r(v*v),u=r(e*r(I*I)),n=r(g*y),a=r(w*(g+r(h*w)))}return n=(p=l(d,n,o))[0],o=p[1],a=(p=l(d,a,u))[0],u=p[1],r(n*c(a))}((d=n3("u coordinate",t,n),32===a&&(d[31]&=127),n2(d)),function(e){let t=n3("scalar",e),i=t.length;if(i!==n&&i!==a)throw Error("invalid scalar, expected "+(""+n+" or ")+a+" bytes, got "+i);return n2(o(t))}(e));if(p===ai)throw Error("invalid private or public key received");return u(p)}let p=u(t.Gu);function g(e){return d(e,p)}return{scalarMult:d,scalarMultBase:g,getSharedSecret:(e,t)=>d(e,t),getPublicKey:e=>g(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:p}}({P:as,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{let t,i,r,s,n,a,o,c,l,h,u,d,p,g,{pow_p_5_8:f,b2:y}=(t=BigInt(10),i=BigInt(20),r=BigInt(40),s=BigInt(80),a=at(n=e*e%as*e%as,aa,as)*n%as,o=at(a,an,as)*e%as,c=at(o,ac,as)*o%as,l=at(c,t,as)*c%as,h=at(l,i,as)*l%as,u=at(h,r,as)*h%as,d=at(u,s,as)*u%as,p=at(d,s,as)*u%as,g=at(p,t,as)*c%as,{pow_p_5_8:at(g,aa,as)*e%as,b2:n});return ae(at(f,ao,as)*y,as)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:sU}),ah="base10",au="base16",ad="base64pad",ap="base64url",ag="utf8";function af(){let e=sU(32);return(0,rX.toString)(e,au)}function ay(e){let t=nF((0,r0.fromString)(e,au));return(0,rX.toString)(t,au)}function aw(e){let t=nF((0,r0.fromString)(e,ag));return(0,rX.toString)(t,au)}function am(e){return(0,r0.fromString)(`${e}`,ah)}function aM(e){return Number((0,rX.toString)(e,ah))}function aN(e){let{encoding:t=ad}=e;if(2===aM(e.type))return(0,rX.toString)((0,r1.concat)([e.type,e.sealed]),t);if(1===aM(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return(0,rX.toString)((0,r1.concat)([e.type,e.senderPublicKey,e.iv,e.sealed]),t)}return(0,rX.toString)((0,r1.concat)([e.type,e.iv,e.sealed]),t)}function av(e){let{encoded:t,encoding:i=ad}=e,r=(0,r0.fromString)(t,i),s=r.slice(0,1);if(1===aM(s)){let e=r.slice(1,33),t=r.slice(33,45);return{type:s,sealed:r.slice(45),iv:t,senderPublicKey:e}}if(2===aM(s))return{type:s,sealed:r.slice(1),iv:sU(12)};let n=r.slice(1,13);return{type:s,sealed:r.slice(13),iv:n}}function aI(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function ab(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function aE(e){return e?.relay||{protocol:"irn"}}function aA(e){let t=r2.RELAY_JSONRPC[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}function aD(e){var t;if(!e.includes("wc:")){let t=sI(e);null!=t&&t.includes("wc:")&&(e=t)}let i=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,s=e.substring(0,i),n=e.substring(i+1,r).split("@"),a=new URLSearchParams("u">typeof r?e.substring(r):""),o={};a.forEach((e,t)=>{o[t]=e});let c="string"==typeof o.methods?o.methods.split(","):void 0;return{protocol:s,topic:(t=n[0]).startsWith("//")?t.substring(2):t,version:parseInt(n[1],10),symKey:o.symKey,relay:function(e,t="-"){let i={},r="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(r)){let s=t.replace(r,""),n=e[t];i[s]=n}}),i}(o),methods:c,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function aC(e){let t=new URLSearchParams,i=function(e,t="-"){let i={};return Object.keys(e).forEach(r=>{e[r]&&(i["relay"+t+r]=e[r])}),i}(e.relay);Object.keys(i).sort().forEach(e=>{t.set(e,i[e])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));let r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function aT(e,t,i){return`${e}?wc_ev=${i}&topic=${t}`}function aj(e){let t=[];return e.forEach(e=>{let[i,r]=e.split(":");t.push(`${i}:${r}`)}),t}function a_(e){return e.includes(":")}function aS(e){return a_(e)?e.split(":")[0]:e}function aO(e,t){var i;let r,s=(i=t=t.map(e=>e.replace("did:pkh:","")),r={},i?.forEach(e=>{var t;let[i,s]=e.split(":");r[i]||(r[i]={accounts:[],chains:[],events:[],methods:[]}),r[i].accounts.push(e),null==(t=r[i].chains)||t.push(`${i}:${s}`)}),r);for(let[t,i]of Object.entries(s))i.methods?i.methods=sy(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return s}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let ax={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},az={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function aL(e,t){let{message:i,code:r}=az[e];return{message:t?`${i} ${t}`:i,code:r}}function aP(e,t){let{message:i,code:r}=ax[e];return{message:t?`${i} ${t}`:i,code:r}}function ak(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function aU(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function aR(e){return typeof e>"u"}function aY(e,t){return!!(t&&aR(e))||"string"==typeof e&&!!e.trim().length}function aQ(e,t){return!!(t&&aR(e))||"number"==typeof e&&!isNaN(e)}function aB(e){return!!(aY(e,!1)&&e.includes(":"))&&2===e.split(":").length}function aq(e){let t=!0;return ak(e)?e.length&&(t=e.every(e=>aY(e,!1))):t=!1,t}function aW(e,t){let i=null;return Object.values(e).forEach(e=>{var r;let s;if(i)return;let n=(r=`${t}, namespace`,s=null,aq(e?.methods)?aq(e?.events)||(s=aP("UNSUPPORTED_EVENTS",`${r}, events should be an array of strings or empty array for no events`)):s=aP("UNSUPPORTED_METHODS",`${r}, methods should be an array of strings or empty array for no methods`),s);n&&(i=n)}),i}function aK(e,t){let i=null;if(e&&aU(e)){let r,s=aW(e,t);s&&(i=s);let n=(r=null,Object.values(e).forEach(e=>{var i,s;let n;if(r)return;let a=(i=e?.accounts,s=`${t} namespace`,n=null,ak(i)?i.forEach(e=>{n||function(e){if(aY(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&aB(e)}}return!1}(e)||(n=aP("UNSUPPORTED_ACCOUNTS",`${s}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):n=aP("UNSUPPORTED_ACCOUNTS",`${s}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n);a&&(r=a)}),r);n&&(i=n)}else i=aL("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return i}function aH(e){return aY(e.protocol,!0)}function a$(e){return"u">typeof e}function aV(e,t){let i;return!(!aB(t)||!(i=[],Object.values(e).forEach(e=>{i.push(...aj(e.accounts))}),i).includes(t))}function aG(e,t,i){var r,s;let n,a,o=null,c=(n={},Object.keys(r=e).forEach(e=>{var t;e.includes(":")?n[e]=r[e]:null==(t=r[e].chains)||t.forEach(t=>{n[t]={methods:r[e].methods,events:r[e].events}})}),n),l=(a={},Object.keys(s=t).forEach(e=>{if(e.includes(":"))a[e]=s[e];else{let t=aj(s[e].accounts);t?.forEach(t=>{a[t]={accounts:s[e].accounts.filter(e=>e.includes(`${t}:`)),methods:s[e].methods,events:s[e].events}})}}),a),h=Object.keys(c),u=Object.keys(l),d=aF(Object.keys(e)),p=aF(Object.keys(t)),g=d.filter(e=>!p.includes(e));return g.length&&(o=aL("NON_CONFORMING_NAMESPACES",`${i} namespaces keys don't satisfy requiredNamespaces.
      Required: ${g.toString()}
      Received: ${Object.keys(t).toString()}`)),sa(h,u)||(o=aL("NON_CONFORMING_NAMESPACES",`${i} namespaces chains don't satisfy required namespaces.
      Required: ${h.toString()}
      Approved: ${u.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||o)return;let r=aj(t[e].accounts);r.includes(e)||(o=aL("NON_CONFORMING_NAMESPACES",`${i} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${r.toString()}`))}),h.forEach(e=>{o||(sa(c[e].methods,l[e].methods)?sa(c[e].events,l[e].events)||(o=aL("NON_CONFORMING_NAMESPACES",`${i} namespaces events don't satisfy namespace events for ${e}`)):o=aL("NON_CONFORMING_NAMESPACES",`${i} namespaces methods don't satisfy namespace methods for ${e}`))}),o}function aF(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function aZ(){let e=si();return new Promise(t=>{switch(e){case r9:t(st()&&navigator?.onLine);break;case r8:t(aJ());break;default:t(!0)}})}async function aJ(){if(se()&&null!=e.g&&e.g.NetInfo){let t=await (null==e.g?void 0:e.g.NetInfo.fetch());return t?.isConnected}return!0}let aX={};class a0{static get(e){return aX[e]}static set(e,t){aX[e]=t}static delete(e){delete aX[e]}}var a1=e.i(409482);e.i(660075);var a4=e.i(669941),a2=e.i(139434),a3=e.i(327026),a5=e.i(726511);let a8="core",a6=`wc@2:${a8}:`,a9={database:":memory:"},a7="client_ed25519_seed",oe=rH.ONE_DAY,ot=rH.SIX_HOURS,oi="wss://relay.walletconnect.org",or="relayer_message",os="relayer_message_ack",on="relayer_connection_stalled",oa="relayer_publish",oo="payload",oc="connect",ol="disconnect",oh="error",ou="2.19.0",od="link_mode",op="relay",og="WALLETCONNECT_LINK_MODE_APPS",of="subscription_created",oy="subscription_deleted",ow=(rH.THIRTY_DAYS,1e3*rH.FIVE_SECONDS),om=(rH.THIRTY_DAYS,{wc_pairingDelete:{req:{ttl:rH.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:rH.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:rH.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:rH.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:rH.ONE_DAY,prompt:!1,tag:0},res:{ttl:rH.ONE_DAY,prompt:!1,tag:0}}}),oM="pairing_create",oN="pairing_delete",ov="history_created",oI="history_updated",ob="history_deleted",oE="expirer_created",oA="expirer_deleted",oD="expirer_expired",oC=(rH.ONE_DAY,"https://verify.walletconnect.org"),oT=`${oC}/v3`,oj=["https://verify.walletconnect.com",oC],o_="malformed_pairing_uri",oS="session_approve_started";var oO=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var i=new Uint8Array(256),r=0;r<i.length;r++)i[r]=255;for(var s=0;s<e.length;s++){var n=e.charAt(s),a=n.charCodeAt(0);if(255!==i[a])throw TypeError(n+" is ambiguous");i[a]=s}var o=e.length,c=e.charAt(0),l=Math.log(o)/Math.log(256),h=Math.log(256)/Math.log(o);function u(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var r=0,s=0;e[t]===c;)r++,t++;for(var n=(e.length-t)*l+1>>>0,a=new Uint8Array(n);e[t];){var h=i[e.charCodeAt(t)];if(255===h)return;for(var u=0,d=n-1;(0!==h||u<s)&&-1!==d;d--,u++)h+=o*a[d]>>>0,a[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw Error("Non-zero carry");s=u,t++}if(" "!==e[t]){for(var p=n-s;p!==n&&0===a[p];)p++;for(var g=new Uint8Array(r+(n-p)),f=r;p!==n;)g[f++]=a[p++];return g}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var i=0,r=0,s=0,n=t.length;s!==n&&0===t[s];)s++,i++;for(var a=(n-s)*h+1>>>0,l=new Uint8Array(a);s!==n;){for(var u=t[s],d=0,p=a-1;(0!==u||d<r)&&-1!==p;p--,d++)u+=256*l[p]>>>0,l[p]=u%o>>>0,u=u/o>>>0;if(0!==u)throw Error("Non-zero carry");r=d,s++}for(var g=a-r;g!==a&&0===l[g];)g++;for(var f=c.repeat(i);g<a;++g)f+=e.charAt(l[g]);return f},decodeUnsafe:u,decode:function(e){var i=u(e);if(i)return i;throw Error(`Non-${t} character`)}}};let ox=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")};class oz{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class oL{constructor(e,t,i){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return ok(this,e)}}class oP{constructor(e){this.decoders=e}or(e){return ok(this,e)}decode(e){let t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let ok=(e,t)=>new oP({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class oU{constructor(e,t,i,r){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=r,this.encoder=new oz(e,t,i),this.decoder=new oL(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let oR=({name:e,prefix:t,encode:i,decode:r})=>new oU(e,t,i,r),oY=({prefix:e,name:t,alphabet:i})=>{let{encode:r,decode:s}=oO(i,t);return oR({prefix:e,name:t,encode:r,decode:e=>ox(s(e))})},oQ=({name:e,prefix:t,bitsPerChar:i,alphabet:r})=>oR({prefix:t,name:e,encode:e=>((e,t,i)=>{let r="="===t[t.length-1],s=(1<<i)-1,n="",a=0,o=0;for(let r=0;r<e.length;++r)for(o=o<<8|e[r],a+=8;a>i;)a-=i,n+=t[s&o>>a];if(a&&(n+=t[s&o<<i-a]),r)for(;n.length*i&7;)n+="=";return n})(e,r,i),decode:t=>((e,t,i,r)=>{let s={};for(let e=0;e<t.length;++e)s[t[e]]=e;let n=e.length;for(;"="===e[n-1];)--n;let a=new Uint8Array(n*i/8|0),o=0,c=0,l=0;for(let t=0;t<n;++t){let n=s[e[t]];if(void 0===n)throw SyntaxError(`Non-${r} character`);c=c<<i|n,(o+=i)>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=i||255&c<<8-o)throw SyntaxError("Unexpected end of data");return a})(t,r,i,e)});var oB=Object.freeze({__proto__:null,identity:oR({prefix:"\0",name:"identity",encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)})}),oq=Object.freeze({__proto__:null,base2:oQ({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),oW=Object.freeze({__proto__:null,base8:oQ({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),oK=Object.freeze({__proto__:null,base10:oY({prefix:"9",name:"base10",alphabet:"0123456789"})}),oH=Object.freeze({__proto__:null,base16:oQ({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:oQ({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})}),o$=Object.freeze({__proto__:null,base32:oQ({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper:oQ({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad:oQ({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper:oQ({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex:oQ({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper:oQ({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad:oQ({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:oQ({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:oQ({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),oV=Object.freeze({__proto__:null,base36:oY({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:oY({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),oG=Object.freeze({__proto__:null,base58btc:oY({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:oY({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})}),oF=Object.freeze({__proto__:null,base64:oQ({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad:oQ({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:oQ({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:oQ({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let oZ=Array.from(""),oJ=oZ.reduce((e,t,i)=>(e[i]=t,e),[]),oX=oZ.reduce((e,t,i)=>(e[t.codePointAt(0)]=i,e),[]);var o0=Object.freeze({__proto__:null,base256emoji:oR({prefix:"",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=oJ[t],"")},decode:function(e){let t=[];for(let i of e){let e=oX[i.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${i}`);t.push(e)}return new Uint8Array(t)}})});function o1(e,t,i){t=t||[],i=i||0;for(var r=i;e>=0x80000000;)t[i++]=255&e|128,e/=128;for(;-128&e;)t[i++]=255&e|128,e>>>=7;return t[i]=0|e,o1.bytes=i-r+1,t}var o4=function(e){return e<128?1:e<16384?2:e<2097152?3:e<0x10000000?4:e<0x800000000?5:e<0x40000000000?6:e<0x2000000000000?7:e<0x100000000000000?8:e<0x8000000000000000?9:10};let o2=(e,t,i=0)=>(o1(e,t,i),t),o3=(e,t)=>{let i=t.byteLength,r=o4(e),s=r+o4(i),n=new Uint8Array(s+i);return o2(e,n,0),o2(i,n,r),n.set(t,s),new o5(e,i,t,n)};class o5{constructor(e,t,i,r){this.code=e,this.size=t,this.digest=i,this.bytes=r}}let o8=({name:e,code:t,encode:i})=>new o6(e,t,i);class o6{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?o3(this.code,t):t.then(e=>o3(this.code,e))}throw Error("Unknown type, must be binary type")}}let o9=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var o7=Object.freeze({__proto__:null,sha256:o8({name:"sha2-256",code:18,encode:o9("SHA-256")}),sha512:o8({name:"sha2-512",code:19,encode:o9("SHA-512")})}),ce=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:ox,digest:e=>o3(0,ox(e))}});new TextEncoder,new TextDecoder;let ct={...oB,...oq,...oW,...oK,...oH,...o$,...oV,...oG,...oF,...o0};function ci(e,t,i,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:i},decoder:{decode:r}}}({...o7,...ce});let cr=ci("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),cs=ci("ascii","a",e=>{let t="a";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}),cn={utf8:cr,"utf-8":cr,hex:ct.base16,latin1:cs,ascii:cs,binary:cs,...ct};var ca=Object.defineProperty,co=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?ca(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class cc{constructor(e,t){this.core=e,this.logger=t,co(this,"keychain",new Map),co(this,"name","keychain"),co(this,"version","0.3"),co(this,"initialized",!1),co(this,"storagePrefix",a6),co(this,"init",async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}}),co(this,"has",e=>(this.isInitialized(),this.keychain.has(e))),co(this,"set",async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()}),co(this,"get",e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=aL("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}),co(this,"del",async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()}),this.core=e,this.logger=(0,rA.generateChildLogger)(t,this.name)}get context(){return(0,rA.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,so(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?sc(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=aL("NOT_INITIALIZED",this.name);throw Error(e)}}}var cl=Object.defineProperty,ch=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?cl(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class cu{constructor(e,t,i){this.core=e,this.logger=t,ch(this,"name","crypto"),ch(this,"keychain"),ch(this,"randomSessionIdentifier",af()),ch(this,"initialized",!1),ch(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),ch(this,"hasKeys",e=>(this.isInitialized(),this.keychain.has(e))),ch(this,"getClientId",async()=>{this.isInitialized();let e=await this.getClientSeed(),t=rV.generateKeyPair(e);return rV.encodeIss(t.publicKey)}),ch(this,"generateKeyPair",()=>{let e,t;this.isInitialized();let i=(e=al.utils.randomPrivateKey(),t=al.getPublicKey(e),{privateKey:(0,rX.toString)(e,au),publicKey:(0,rX.toString)(t,au)});return this.setPrivateKey(i.publicKey,i.privateKey)}),ch(this,"signJWT",async e=>{this.isInitialized();let t=await this.getClientSeed(),i=rV.generateKeyPair(t),r=this.randomSessionIdentifier;return await rV.signJWT(r,e,oe,i)}),ch(this,"generateSharedKey",(e,t,i)=>{var r,s,n;let a,o;this.isInitialized();let c=(r=this.getPrivateKey(e),a=al.getSharedSecret((0,r0.fromString)(r,au),(0,r0.fromString)(t,au)),s=void 0,o=function(e,t,i,r=32){if(sA(e),sb(r),r>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let s=Math.ceil(r/e.outputLen);void 0===i&&(i=nW);let n=new Uint8Array(s*e.outputLen),a=nB.create(e,t),o=a._cloneInto(),c=new Uint8Array(a.outputLen);for(let t=0;t<s;t++)nq[0]=t+1,o.update(0===t?nW:c).update(i).update(nq).digestInto(c),n.set(c,e.outputLen*t),a._cloneInto(o);return a.destroy(),o.destroy(),c.fill(0),nq.fill(0),n.slice(0,r)}(nF,(n=void 0,sA(nF),void 0===n&&(n=new Uint8Array(nF.outputLen)),nB(nF,sL(n),sL(a))),s,32),(0,rX.toString)(o,au));return this.setSymKey(c,i)}),ch(this,"setSymKey",async(e,t)=>{this.isInitialized();let i=t||ay(e);return await this.keychain.set(i,e),i}),ch(this,"deleteKeyPair",async e=>{this.isInitialized(),await this.keychain.del(e)}),ch(this,"deleteSymKey",async e=>{this.isInitialized(),await this.keychain.del(e)}),ch(this,"encode",async(e,t,i)=>{this.isInitialized();let r=aI(i),s=(0,r$.safeJsonStringify)(t);if(2===r.type){var n;let e,t;return n=i?.encoding,e=am(2),t=sU(12),aN({type:e,sealed:(0,r0.fromString)(s,ag),iv:t,encoding:n})}if(ab(r)){let t=r.senderPublicKey,i=r.receiverPublicKey;e=await this.generateSharedKey(t,i)}let a=this.getSymKey(e),{type:o,senderPublicKey:c}=r;return function(e){let t=am("u">typeof e.type?e.type:0);if(1===aM(t)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let i="u">typeof e.senderPublicKey?(0,r0.fromString)(e.senderPublicKey,au):void 0,r="u">typeof e.iv?(0,r0.fromString)(e.iv,au):sU(12);return aN({type:t,sealed:nY((0,r0.fromString)(e.symKey,au),r).encrypt((0,r0.fromString)(e.message,ag)),iv:r,senderPublicKey:i,encoding:e.encoding})}({type:o,symKey:a,message:s,senderPublicKey:c,encoding:i?.encoding})}),ch(this,"decode",async(e,t,i)=>{let r;this.isInitialized();let s=aI({type:aM((r=av({encoded:t,encoding:i?.encoding})).type),senderPublicKey:"u">typeof r.senderPublicKey?(0,rX.toString)(r.senderPublicKey,au):void 0,receiverPublicKey:i?.receiverPublicKey});if(2===s.type){let e=function(e,t){let{sealed:i}=av({encoded:e,encoding:t});return(0,rX.toString)(i,ag)}(t,i?.encoding);return(0,r$.safeJsonParse)(e)}if(ab(s)){let t=s.receiverPublicKey,i=s.senderPublicKey;e=await this.generateSharedKey(t,i)}try{let r=this.getSymKey(e),s=function(e){let t=(0,r0.fromString)(e.symKey,au),{sealed:i,iv:r}=av(e),s=nY(t,r).decrypt(i);if(null===s)throw Error("Failed to decrypt");return(0,rX.toString)(s,ag)}({symKey:r,encoded:t,encoding:i?.encoding});return(0,r$.safeJsonParse)(s)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}}),ch(this,"getPayloadType",(e,t=ad)=>aM(av({encoded:e,encoding:t}).type)),ch(this,"getPayloadSenderPublicKey",(e,t=ad)=>{let i=av({encoded:e,encoding:t});return i.senderPublicKey?(0,rX.toString)(i.senderPublicKey,au):void 0}),this.core=e,this.logger=(0,rA.generateChildLogger)(t,this.name),this.keychain=i||new cc(this.core,this.logger)}get context(){return(0,rA.getLoggerContext)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(a7)}catch{e=af(),await this.keychain.set(a7,e)}return function(e,t="utf8"){let i=cn[t];if(!i)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):i.decoder.decode(`${i.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=aL("NOT_INITIALIZED",this.name);throw Error(e)}}}var cd=Object.defineProperty,cp=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?cd(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class cg extends rx{constructor(e,t){super(e,t),this.logger=e,this.core=t,cp(this,"messages",new Map),cp(this,"name","messages"),cp(this,"version","0.3"),cp(this,"initialized",!1),cp(this,"storagePrefix",a6),cp(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}}),cp(this,"set",async(e,t)=>{this.isInitialized();let i=aw(t),r=this.messages.get(e);return typeof r>"u"&&(r={}),"u">typeof r[i]||(r[i]=t,this.messages.set(e,r),await this.persist()),i}),cp(this,"get",e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t}),cp(this,"has",(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[aw(t)])),cp(this,"del",async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()}),this.logger=(0,rA.generateChildLogger)(e,this.name),this.core=t}get context(){return(0,rA.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,so(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?sc(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=aL("NOT_INITIALIZED",this.name);throw Error(e)}}}var cf=Object.defineProperty,cy=Object.defineProperties,cw=Object.getOwnPropertyDescriptors,cm=Object.getOwnPropertySymbols,cM=Object.prototype.hasOwnProperty,cN=Object.prototype.propertyIsEnumerable,cv=(e,t,i)=>t in e?cf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,cI=(e,t)=>{for(var i in t||(t={}))cM.call(t,i)&&cv(e,i,t[i]);if(cm)for(var i of cm(t))cN.call(t,i)&&cv(e,i,t[i]);return e},cb=(e,t,i)=>cv(e,"symbol"!=typeof t?t+"":t,i);class cE extends rz{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,cb(this,"events",new rI.EventEmitter),cb(this,"name","publisher"),cb(this,"queue",new Map),cb(this,"publishTimeout",(0,rH.toMiliseconds)(rH.ONE_MINUTE)),cb(this,"initialPublishTimeout",(0,rH.toMiliseconds)(15*rH.ONE_SECOND)),cb(this,"needsTransportRestart",!1),cb(this,"publish",async(e,t,i)=>{var r;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:i}});let s=i?.ttl||ot,n=aE(i),a=i?.prompt||!1,o=i?.tag||0,c=i?.id||(0,a4.getBigIntRpcId)().toString(),l={topic:e,message:t,opts:{ttl:s,relay:n,prompt:a,tag:o,id:c,attestation:i?.attestation,tvf:i?.tvf}},h=`Failed to publish payload, please try again. id:${c} tag:${o}`;try{let r=new Promise(async r=>{let n=({id:e})=>{l.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(oa,n),r(l))};this.relayer.events.on(oa,n);let h=sh(new Promise((r,n)=>{this.rpcPublish({topic:e,message:t,ttl:s,prompt:a,tag:o,id:c,attestation:i?.attestation,tvf:i?.tvf}).then(r).catch(e=>{this.logger.warn(e,e?.message),n(e)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${o}`);try{await h,this.events.removeListener(oa,n)}catch(i){let e,t;this.queue.set(c,(e=cI({},l),t={attempt:1},cy(e,cw(t)))),this.logger.warn(i,i?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:i}}),await sh(r,this.publishTimeout,h)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(r=i?.internal)&&r.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}}),cb(this,"on",(e,t)=>{this.events.on(e,t)}),cb(this,"once",(e,t)=>{this.events.once(e,t)}),cb(this,"off",(e,t)=>{this.events.off(e,t)}),cb(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.relayer=e,this.logger=(0,rA.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,rA.getLoggerContext)(this.logger)}async rpcPublish(e){var t,i,r,s;let{topic:n,message:a,ttl:o=ot,prompt:c,tag:l,id:h,attestation:u,tvf:d}=e,p={method:aA(aE().protocol).publish,params:cI({topic:n,message:a,ttl:o,prompt:c,tag:l,attestation:u},d),id:h};aR(null==(t=p.params)?void 0:t.prompt)&&(null==(i=p.params)||delete i.prompt),aR(null==(r=p.params)?void 0:r.tag)&&(null==(s=p.params)||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});let g=await this.relayer.request(p);return this.relayer.events.emit(oa,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{let i=e.attempt+1;this.queue.set(t,cy(cI({},e),cw({attempt:i})));let{topic:r,message:s,opts:n,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${i}`),await this.rpcPublish(cy(cI({},e),cw({topic:r,message:s,ttl:n.ttl,prompt:n.prompt,tag:n.tag,id:n.id,attestation:a,tvf:n.tvf}))),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(rb.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(on);return}this.checkQueue()}),this.relayer.on(os,e=>{this.removeRequestFromQueue(e.id.toString())})}}var cA=Object.defineProperty,cD=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?cA(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class cC{constructor(){cD(this,"map",new Map),cD(this,"set",(e,t)=>{let i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])}),cD(this,"get",e=>this.map.get(e)||[]),cD(this,"exists",(e,t)=>this.get(e).includes(t)),cD(this,"delete",(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;let i=this.get(e);if(!this.exists(e,t))return;let r=i.filter(e=>e!==t);r.length?this.map.set(e,r):this.map.delete(e)}),cD(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var cT=Object.defineProperty,cj=Object.defineProperties,c_=Object.getOwnPropertyDescriptors,cS=Object.getOwnPropertySymbols,cO=Object.prototype.hasOwnProperty,cx=Object.prototype.propertyIsEnumerable,cz=(e,t,i)=>t in e?cT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,cL=(e,t)=>{for(var i in t||(t={}))cO.call(t,i)&&cz(e,i,t[i]);if(cS)for(var i of cS(t))cx.call(t,i)&&cz(e,i,t[i]);return e},cP=(e,t,i)=>cz(e,"symbol"!=typeof t?t+"":t,i);class ck extends rk{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,cP(this,"subscriptions",new Map),cP(this,"topicMap",new cC),cP(this,"events",new rI.EventEmitter),cP(this,"name","subscription"),cP(this,"version","0.3"),cP(this,"pending",new Map),cP(this,"cached",[]),cP(this,"initialized",!1),cP(this,"pendingSubscriptionWatchLabel","pending_sub_watch_label"),cP(this,"pollingInterval",20),cP(this,"storagePrefix",a6),cP(this,"subscribeTimeout",(0,rH.toMiliseconds)(rH.ONE_MINUTE)),cP(this,"initialSubscribeTimeout",(0,rH.toMiliseconds)(15*rH.ONE_SECOND)),cP(this,"clientId"),cP(this,"batchSubscribeTopicsLimit",500),cP(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),cP(this,"subscribe",async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let i=aE(t),r={topic:e,relay:i,transportType:t?.transportType};this.pending.set(e,r);let s=await this.rpcSubscribe(e,i,t);return"string"==typeof s&&(this.onSubscribe(s,r),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),s}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}}),cP(this,"unsubscribe",async(e,t)=>{this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)}),cP(this,"isSubscribed",async e=>{if(this.topics.includes(e))return!0;let t=`${this.pendingSubscriptionWatchLabel}_${e}`;return await new Promise((i,r)=>{let s=new rH.Watch;s.start(t);let n=setInterval(()=>{(!this.pending.has(e)&&this.topics.includes(e)||this.cached.some(t=>t.topic===e))&&(clearInterval(n),s.stop(t),i(!0)),s.elapsed(t)>=ow&&(clearInterval(n),s.stop(t),r(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)}),cP(this,"on",(e,t)=>{this.events.on(e,t)}),cP(this,"once",(e,t)=>{this.events.once(e,t)}),cP(this,"off",(e,t)=>{this.events.off(e,t)}),cP(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),cP(this,"start",async()=>{await this.onConnect()}),cP(this,"stop",async()=>{await this.onDisconnect()}),cP(this,"restart",async()=>{await this.restore(),await this.onRestart()}),cP(this,"checkPending",async()=>{if(0===this.pending.size&&(!this.initialized||!this.relayer.connected))return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}),cP(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(rb.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.events.on(of,async e=>{this.logger.info(`Emitting ${of}`),this.logger.debug({type:"event",event:of,data:e}),await this.persist()}),this.events.on(oy,async e=>{this.logger.info(`Emitting ${oy}`),this.logger.debug({type:"event",event:oy,data:e}),await this.persist()})}),this.relayer=e,this.logger=(0,rA.generateChildLogger)(t,this.name),this.clientId=""}get context(){return(0,rA.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let i=this.topicMap.get(e);await Promise.all(i.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{let r=aE(i);await this.restartToComplete({topic:e,id:t,relay:r}),await this.rpcUnsubscribe(e,t,r);let s=aP("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,i){var r;i&&i?.transportType!==op||await this.restartToComplete({topic:e,id:e,relay:t});let s={method:aA(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});let n=null==(r=i?.internal)?void 0:r.throwOnFailedPublish;try{let t=await this.getSubscriptionId(e);if(i?.transportType===od)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(e=>this.logger.warn(e))},(0,rH.toMiliseconds)(rH.ONE_SECOND)),t;let r=new Promise(async t=>{let i=r=>{r.topic===e&&(this.events.removeListener(of,i),t(r.id))};this.events.on(of,i);try{let r=await sh(new Promise((e,t)=>{this.relayer.request(s).catch(e=>{this.logger.warn(e,e?.message),t(e)}).then(e)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(of,i),t(r)}catch{}}),a=await sh(r,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!a&&n)throw Error(`Subscribing to ${e} failed, please try again`);return a?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(on),n)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t={method:aA(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await sh(new Promise(e=>{this.relayer.request(t).catch(e=>this.logger.warn(e)).then(e)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(on)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let i={method:aA(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{t=await await sh(new Promise((e,t)=>{this.relayer.request(i).catch(e=>{this.logger.warn(e),t(e)}).then(e)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(on)}return t}rpcUnsubscribe(e,t,i){let r={method:aA(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),this.relayer.request(r)}onSubscribe(e,t){this.setSubscription(e,cj(cL({},t),c_({id:e}))),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,cL({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,cL({},t)),this.topicMap.set(t.topic,e),this.events.emit(of,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=aL("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(oy,cj(cL({},i),c_({reason:t})))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async onRestart(){if(this.cached.length){let e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<t;i++){let t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit("subscription_resubscribed")}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=aL("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async e=>cj(cL({},e),c_({id:await this.getSubscriptionId(e.topic)}))))))}async batchFetchMessages(e){var t;if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let i=await this.rpcBatchFetchMessages(e);i&&i.messages&&(await (t=(0,rH.toMiliseconds)(rH.ONE_SECOND),new Promise(e=>setTimeout(e,t))),await this.relayer.handleBatchMessageEvents(i.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){let{message:e}=aL("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(e){this.relayer.connected||this.relayer.connecting||(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return aw(e+await this.getClientId())}}var cU=Object.defineProperty,cR=Object.getOwnPropertySymbols,cY=Object.prototype.hasOwnProperty,cQ=Object.prototype.propertyIsEnumerable,cB=(e,t,i)=>t in e?cU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,cq=(e,t)=>{for(var i in t||(t={}))cY.call(t,i)&&cB(e,i,t[i]);if(cR)for(var i of cR(t))cQ.call(t,i)&&cB(e,i,t[i]);return e},cW=(e,t,i)=>cB(e,"symbol"!=typeof t?t+"":t,i);class cK extends rL{constructor(t){super(t),cW(this,"protocol","wc"),cW(this,"version",2),cW(this,"core"),cW(this,"logger"),cW(this,"events",new rI.EventEmitter),cW(this,"provider"),cW(this,"messages"),cW(this,"subscriber"),cW(this,"publisher"),cW(this,"name","relayer"),cW(this,"transportExplicitlyClosed",!1),cW(this,"initialized",!1),cW(this,"connectionAttemptInProgress",!1),cW(this,"relayUrl"),cW(this,"projectId"),cW(this,"packageName"),cW(this,"bundleId"),cW(this,"hasExperiencedNetworkDisruption",!1),cW(this,"pingTimeout"),cW(this,"heartBeatTimeout",(0,rH.toMiliseconds)(rH.THIRTY_SECONDS+rH.FIVE_SECONDS)),cW(this,"reconnectTimeout"),cW(this,"connectPromise"),cW(this,"reconnectInProgress",!1),cW(this,"requestsInFlight",[]),cW(this,"connectTimeout",(0,rH.toMiliseconds)(15*rH.ONE_SECOND)),cW(this,"request",async e=>{var t,i;this.logger.debug("Publishing Request Payload");let r=e.id||(0,a4.getBigIntRpcId)().toString();await this.toEstablishConnection();try{this.logger.trace({id:r,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");let s=`${r}:${(null==(i=e.params)?void 0:i.tag)||""}`;this.requestsInFlight.push(s);let n=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter(e=>e!==s),n}catch(e){throw this.logger.debug(`Failed to Publish Request: ${r}`),e}}),cW(this,"resetPingTimeout",()=>{if(r7())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,t,i;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)||i.terminate()},this.heartBeatTimeout)}catch(e){this.logger.warn(e,e?.message)}}),cW(this,"onPayloadHandler",e=>{this.onProviderPayload(e),this.resetPingTimeout()}),cW(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit("relayer_connect")}),cW(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),cW(this,"onProviderErrorHandler",e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit("relayer_error",e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),cW(this,"registerProviderListeners",()=>{this.provider.on(oo,this.onPayloadHandler),this.provider.on(oc,this.onConnectHandler),this.provider.on(ol,this.onDisconnectHandler),this.provider.on(oh,this.onProviderErrorHandler)}),this.core=t.core,this.logger="u">typeof t.logger&&"string"!=typeof t.logger?(0,rA.generateChildLogger)(t.logger,this.name):(0,rD.pino)((0,rA.getDefaultLoggerOptions)({level:t.logger||"error"})),this.messages=new cg(this.logger,t.core),this.subscriber=new ck(this,this.logger),this.publisher=new cE(this,this.logger),this.relayUrl=t?.relayUrl||oi,this.projectId=t.projectId,se()&&"u">typeof(null==e.g?void 0:e.g.Platform)&&(null==e.g?void 0:e.g.Platform.OS)==="android"?this.packageName=sr():se()&&"u">typeof(null==e.g?void 0:e.g.Platform)&&(null==e.g?void 0:e.g.Platform.OS)==="ios"&&(this.bundleId=sr()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return(0,rA.getLoggerContext)(this.logger)}get connected(){var e,t,i;return(null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:i.readyState)===1}get connecting(){var e,t,i;return(null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:i.readyState)===0||void 0!==this.connectPromise}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:op})}async subscribe(e,t){var i,r,s;this.isInitialized(),null!=t&&t.transportType&&t?.transportType!=="relay"||await this.toEstablishConnection();let n=typeof(null==(i=t?.internal)?void 0:i.throwOnFailedPublish)>"u"||(null==(r=t?.internal)?void 0:r.throwOnFailedPublish),a=(null==(s=this.subscriber.topicMap.get(e))?void 0:s[0])||"",o,c=t=>{t.topic===e&&(this.subscriber.off(of,c),o())};return await Promise.all([new Promise(e=>{o=e,this.subscriber.on(of,c)}),new Promise(async(i,r)=>{a=await this.subscriber.subscribe(e,cq({internal:{throwOnFailedPublish:n}},t)).catch(e=>{n&&r(e)})||a,i()})]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await sh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics)return void this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,i)=>{await this.connect(e).then(t).catch(i).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await aZ())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0)return void this.logger.trace("Batch message events is empty. Ignoring...");let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.debug(`Batch of ${t.length} message events sorted`),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){let{topic:i}=e;if(!t.sessionExists){let e=sp(rH.FIVE_MINUTES);await this.core.pairing.pairings.set(i,{topic:i,expiry:e,relay:{protocol:"irn"},active:!1})}this.events.emit(or,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(e,t)=>{let i=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(ol,i),await sh(new Promise((e,t)=>{this.provider.connect().then(e).catch(t)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>{t(e)}).finally(()=>{this.provider.off(ol,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(e,t)=>{let i=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(ol,i),await this.subscriber.start().then(e).catch(t).finally(()=>{this.provider.off(ol,i)})}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){await this.subscriber.stop(),this.logger.warn({},e.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(e=>setTimeout(e,(0,rH.toMiliseconds)(+t))),t++}}startPingTimeout(){var e,t,i,r,s;if(r7())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(s=null==(r=null==(i=this.provider)?void 0:i.connection)?void 0:r.socket)||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new a1.JsonRpcProvider(new a3.default(function({protocol:e,version:t,relayUrl:i,sdkVersion:r,auth:s,projectId:n,useOnCloseEvent:a,bundleId:o,packageName:c}){let l=i.split("?"),h=sn(e,t,r),u=function(e,t){let i=new URLSearchParams(e);for(let e of Object.keys(t).sort())if(t.hasOwnProperty(e)){let r=t[e];void 0!==r&&i.set(e,r)}return i.toString()}(l[1]||"",{auth:s,ua:h,projectId:n,useOnCloseEvent:a||void 0,packageName:c||void 0,bundleId:o||void 0});return l[0]+"?"+u}({sdkVersion:ou,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){let{topic:t,message:i}=e;if(!i||0===i.length)return this.logger.warn(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.warn(`Ignoring message for non-subscribed topic ${t}`),!0;let r=this.messages.has(t,i);return r&&this.logger.warn(`Ignoring duplicate message: ${i}`),r}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,a2.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:i,message:r,publishedAt:s,attestation:n}=t.data,a={topic:i,message:r,publishedAt:s,transportType:op,attestation:n};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(cq({type:"event",event:t.id},a)),this.events.emit(t.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else(0,a2.isJsonRpcResponse)(e)&&this.events.emit(os,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(or,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let t=(0,a4.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(oo,this.onPayloadHandler),this.provider.off(oc,this.onConnectHandler),this.provider.off(ol,this.onDisconnectHandler),this.provider.off(oh,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await aZ();var i,r,s=async e=>{t!==e&&(t=e,e?await this.transportOpen().catch(e=>this.logger.error(e,e?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))};switch(si()){case r9:i=s,!se()&&st()&&(window.addEventListener("online",()=>i(!0)),window.addEventListener("offline",()=>i(!1)));break;case r8:r=s,se()&&null!=e.g&&e.g.NetInfo&&e.g?.NetInfo.addEventListener(e=>r(e?.isConnected))}}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit("relayer_disconnect"),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},(0,rH.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){let{message:e}=aL("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),this.connected||await this.connect()}}var cH=Object.defineProperty,c$=Object.getOwnPropertySymbols,cV=Object.prototype.hasOwnProperty,cG=Object.prototype.propertyIsEnumerable,cF=(e,t,i)=>t in e?cH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,cZ=(e,t)=>{for(var i in t||(t={}))cV.call(t,i)&&cF(e,i,t[i]);if(c$)for(var i of c$(t))cG.call(t,i)&&cF(e,i,t[i]);return e},cJ=(e,t,i)=>cF(e,"symbol"!=typeof t?t+"":t,i);class cX extends rP{constructor(e,t,i,r=a6,s){super(e,t,i,r),this.core=e,this.logger=t,this.name=i,cJ(this,"map",new Map),cJ(this,"version","0.3"),cJ(this,"cached",[]),cJ(this,"initialized",!1),cJ(this,"getKey"),cJ(this,"storagePrefix",a6),cJ(this,"recentlyDeleted",[]),cJ(this,"recentlyDeletedLimit",200),cJ(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!aR(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)}),cJ(this,"set",async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())}),cJ(this,"get",e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e))),cJ(this,"getAll",e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(i=>(0,a5.default)(t[i],e[i]))):this.values)),cJ(this,"update",async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let i=cZ(cZ({},this.getData(e)),t);this.map.set(e,i),await this.persist()}),cJ(this,"delete",async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())}),this.logger=(0,rA.generateChildLogger)(t,this.name),this.storagePrefix=r,this.getKey=s}get context(){return(0,rA.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=aL("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),Error(t)}let{message:t}=aL("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=aL("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=aL("NOT_INITIALIZED",this.name);throw Error(e)}}}var c0=Object.defineProperty,c1=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?c0(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class c4{constructor(e,t){this.core=e,this.logger=t,c1(this,"name","pairing"),c1(this,"version","0.3"),c1(this,"events",new rI.default),c1(this,"pairings"),c1(this,"initialized",!1),c1(this,"storagePrefix",a6),c1(this,"ignoredPayloadTypes",[1]),c1(this,"registeredMethods",[]),c1(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),c1(this,"register",({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]}),c1(this,"create",async e=>{this.isInitialized();let t=af(),i=await this.core.crypto.setSymKey(t),r=sp(rH.FIVE_MINUTES),s={protocol:"irn"},n={topic:i,expiry:r,relay:s,active:!1,methods:e?.methods},a=aC({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:t,relay:s,expiryTimestamp:r,methods:e?.methods});return this.events.emit(oM,n),this.core.expirer.set(i,r),await this.pairings.set(i,n),await this.core.relayer.subscribe(i,{transportType:e?.transportType}),{topic:i,uri:a}}),c1(this,"pair",async e=>{let t;this.isInitialized();let i=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:["pairing_started"]}});this.isValidPair(e,i);let{topic:r,symKey:s,relay:n,expiryTimestamp:a,methods:o}=aD(e.uri);if(i.props.properties.topic=r,i.addTrace("pairing_uri_validation_success"),i.addTrace("pairing_uri_not_expired"),this.pairings.keys.includes(r)){if(t=this.pairings.get(r),i.addTrace("existing_pairing"),t.active)throw i.setError("active_pairing_already_exists"),Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);i.addTrace("pairing_not_expired")}let c=a||sp(rH.FIVE_MINUTES),l={topic:r,relay:n,expiry:c,active:!1,methods:o};this.core.expirer.set(r,c),await this.pairings.set(r,l),i.addTrace("store_new_pairing"),e.activatePairing&&await this.activate({topic:r}),this.events.emit(oM,l),i.addTrace("emit_inactive_pairing"),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(s,r),i.addTrace("subscribing_pairing_topic");try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError("no_internet_connection")}try{await this.core.relayer.subscribe(r,{relay:n})}catch(e){throw i.setError("subscribe_pairing_topic_failure"),e}return i.addTrace("subscribe_pairing_topic_success"),l}),c1(this,"activate",async({topic:e})=>{this.isInitialized();let t=sp(rH.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})}),c1(this,"ping",async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:i,resolve:r,reject:s}=sl();this.events.once(sf("pairing_ping",e),({error:e})=>{e?s(e):r()}),await i()}}),c1(this,"updateExpiry",async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})}),c1(this,"updateMetadata",async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})}),c1(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),c1(this,"disconnect",async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",aP("USER_DISCONNECTED")),await this.deletePairing(t))}),c1(this,"formatUriFromPairing",e=>{this.isInitialized();let{topic:t,relay:i,expiry:r,methods:s}=e,n=this.core.crypto.keychain.get(t);return aC({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:n,relay:i,expiryTimestamp:r,methods:s})}),c1(this,"sendRequest",async(e,t,i)=>{let r=(0,a4.formatJsonRpcRequest)(t,i),s=await this.core.crypto.encode(e,r),n=om[t].req;return this.core.history.set(e,r),this.core.relayer.publish(e,s,n),r.id}),c1(this,"sendResult",async(e,t,i)=>{let r=(0,a4.formatJsonRpcResult)(e,i),s=await this.core.crypto.encode(t,r),n=om[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,s,n),await this.core.history.resolve(r)}),c1(this,"sendError",async(e,t,i)=>{let r=(0,a4.formatJsonRpcError)(e,i),s=await this.core.crypto.encode(t,r),n=(await this.core.history.get(t,e)).request.method,a=om[n]?om[n].res:om.unregistered_method.res;await this.core.relayer.publish(t,s,a),await this.core.history.resolve(r)}),c1(this,"deletePairing",async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,aP("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])}),c1(this,"cleanup",async()=>{let e=this.pairings.getAll().filter(e=>sg(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))}),c1(this,"onRelayEventRequest",e=>{let{topic:t,payload:i}=e;switch(i.method){case"wc_pairingPing":return this.onPairingPingRequest(t,i);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,i);default:return this.onUnknownRpcMethodRequest(t,i)}}),c1(this,"onRelayEventResponse",async e=>{let{topic:t,payload:i}=e,r=(await this.core.history.get(t,i.id)).request.method;return"wc_pairingPing"===r?this.onPairingPingResponse(t,i):this.onUnknownRpcMethodResponse(r)}),c1(this,"onPairingPingRequest",async(e,t)=>{let{id:i}=t;try{this.isValidPing({topic:e}),await this.sendResult(i,e,!0),this.events.emit("pairing_ping",{id:i,topic:e})}catch(t){await this.sendError(i,e,t),this.logger.error(t)}}),c1(this,"onPairingPingResponse",(e,t)=>{let{id:i}=t;setTimeout(()=>{(0,a2.isJsonRpcResult)(t)?this.events.emit(sf("pairing_ping",i),{}):(0,a2.isJsonRpcError)(t)&&this.events.emit(sf("pairing_ping",i),{error:t.error})},500)}),c1(this,"onPairingDeleteRequest",async(e,t)=>{let{id:i}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(oN,{id:i,topic:e})}catch(t){await this.sendError(i,e,t),this.logger.error(t)}}),c1(this,"onUnknownRpcMethodRequest",async(e,t)=>{let{id:i,method:r}=t;try{if(this.registeredMethods.includes(r))return;let t=aP("WC_METHOD_UNSUPPORTED",r);await this.sendError(i,e,t),this.logger.error(t)}catch(t){await this.sendError(i,e,t),this.logger.error(t)}}),c1(this,"onUnknownRpcMethodResponse",e=>{this.registeredMethods.includes(e)||this.logger.error(aP("WC_METHOD_UNSUPPORTED",e))}),c1(this,"isValidPair",(e,t)=>{var i;if(!a$(e)){let{message:i}=aL("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(o_),Error(i)}if(!function(e){function t(e){try{return"u">typeof new URL(e)}catch{return!1}}try{if(aY(e,!1)){if(t(e))return!0;let i=sI(e);return t(i)}}catch{}return!1}(e.uri)){let{message:i}=aL("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(o_),Error(i)}let r=aD(e?.uri);if(!(null!=(i=r?.relay)&&i.protocol)){let{message:e}=aL("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(o_),Error(e)}if(!(null!=r&&r.symKey)){let{message:e}=aL("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(o_),Error(e)}if(null!=r&&r.expiryTimestamp&&(0,rH.toMiliseconds)(r?.expiryTimestamp)<Date.now()){t.setError("pairing_expired");let{message:e}=aL("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}}),c1(this,"isValidPing",async e=>{if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),c1(this,"isValidDisconnect",async e=>{if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),c1(this,"isValidPairingTopic",async e=>{if(!aY(e,!1)){let{message:t}=aL("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=aL("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(sg(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=aL("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}),this.core=e,this.logger=(0,rA.generateChildLogger)(t,this.name),this.pairings=new cX(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,rA.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=aL("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(or,async e=>{let{topic:t,message:i,transportType:r}=e;if(!this.pairings.keys.includes(t)||r===od||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;let s=await this.core.crypto.decode(t,i);try{(0,a2.isJsonRpcRequest)(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):(0,a2.isJsonRpcResponse)(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id))}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(oD,async e=>{let{topic:t}=sd(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}var c2=Object.defineProperty,c3=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?c2(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class c5 extends rO{constructor(e,t){super(e,t),this.core=e,this.logger=t,c3(this,"records",new Map),c3(this,"events",new rI.EventEmitter),c3(this,"name","history"),c3(this,"version","0.3"),c3(this,"cached",[]),c3(this,"initialized",!1),c3(this,"storagePrefix",a6),c3(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),c3(this,"set",(e,t,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:i}),this.records.has(t.id))return;let r={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:i,expiry:sp(rH.THIRTY_DAYS)};this.records.set(r.id,r),this.persist(),this.events.emit(ov,r)}),c3(this,"resolve",async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,a2.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(oI,t))}),c3(this,"get",async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t))),c3(this,"delete",(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(i=>{i.topic===e&&("u">typeof t&&i.id!==t||(this.records.delete(i.id),this.events.emit(ob,i)))}),this.persist()}),c3(this,"exists",async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e)),c3(this,"on",(e,t)=>{this.events.on(e,t)}),c3(this,"once",(e,t)=>{this.events.once(e,t)}),c3(this,"off",(e,t)=>{this.events.off(e,t)}),c3(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,rA.generateChildLogger)(t,this.name)}get context(){return(0,rA.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let i={topic:t.topic,request:(0,a4.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=aL("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=aL("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ov,e=>{this.logger.info(`Emitting ${ov}`),this.logger.debug({type:"event",event:ov,record:e})}),this.events.on(oI,e=>{this.logger.info(`Emitting ${oI}`),this.logger.debug({type:"event",event:oI,record:e})}),this.events.on(ob,e=>{this.logger.info(`Emitting ${ob}`),this.logger.debug({type:"event",event:ob,record:e})}),this.core.heartbeat.on(rb.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,rH.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(ob,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=aL("NOT_INITIALIZED",this.name);throw Error(e)}}}var c8=Object.defineProperty,c6=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?c8(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class c9 extends rU{constructor(e,t){super(e,t),this.core=e,this.logger=t,c6(this,"expirations",new Map),c6(this,"events",new rI.EventEmitter),c6(this,"name","expirer"),c6(this,"version","0.3"),c6(this,"cached",[]),c6(this,"initialized",!1),c6(this,"storagePrefix",a6),c6(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),c6(this,"has",e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}}),c6(this,"set",(e,t)=>{this.isInitialized();let i=this.formatTarget(e),r={target:i,expiry:t};this.expirations.set(i,r),this.checkExpiry(i,r),this.events.emit(oE,{target:i,expiration:r})}),c6(this,"get",e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)}),c6(this,"del",e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),i=this.getExpiration(t);this.expirations.delete(t),this.events.emit(oA,{target:t,expiration:i})}}),c6(this,"on",(e,t)=>{this.events.on(e,t)}),c6(this,"once",(e,t)=>{this.events.once(e,t)}),c6(this,"off",(e,t)=>{this.events.off(e,t)}),c6(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,rA.generateChildLogger)(t,this.name)}get context(){return(0,rA.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return su("topic",e);if("number"==typeof e)return su("id",e);let{message:t}=aL("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=aL("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=aL("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:i}=t;(0,rH.toMiliseconds)(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(oD,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(rb.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(oE,e=>{this.logger.info(`Emitting ${oE}`),this.logger.debug({type:"event",event:oE,data:e}),this.persist()}),this.events.on(oD,e=>{this.logger.info(`Emitting ${oD}`),this.logger.debug({type:"event",event:oD,data:e}),this.persist()}),this.events.on(oA,e=>{this.logger.info(`Emitting ${oA}`),this.logger.debug({type:"event",event:oA,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=aL("NOT_INITIALIZED",this.name);throw Error(e)}}}var c7=Object.defineProperty,le=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?c7(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class lt extends rR{constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,le(this,"name","verify-api"),le(this,"abortController"),le(this,"isDevEnv"),le(this,"verifyUrlV3",oT),le(this,"storagePrefix",a6),le(this,"version",2),le(this,"publicKey"),le(this,"fetchPromise"),le(this,"init",async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,rH.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),le(this,"register",async e=>{if(!st()||this.isDevEnv)return;let t=window.location.origin,{id:i,decryptedId:r}=e,s=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${i}&decryptedId=${r}`;try{let e=(0,rF.getDocument)(),t=this.startAbortTimer(5*rH.ONE_SECOND),r=await new Promise((r,n)=>{let a=()=>{window.removeEventListener("message",c),e.body.removeChild(o),n("attestation aborted")};this.abortController.signal.addEventListener("abort",a);let o=e.createElement("iframe");o.src=s,o.style.display="none",o.addEventListener("error",a,{signal:this.abortController.signal});let c=s=>{if(s.data&&"string"==typeof s.data)try{let n=JSON.parse(s.data);if("verify_attestation"===n.type){if((0,rV.decodeJWT)(n.attestation).payload.id!==i)return;clearInterval(t),e.body.removeChild(o),this.abortController.signal.removeEventListener("abort",a),window.removeEventListener("message",c),r(null===n.attestation?"":n.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(o),window.addEventListener("message",c,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",r),r}catch(e){this.logger.warn(e)}return""}),le(this,"resolve",async e=>{if(this.isDevEnv)return"";let{attestationId:t,hash:i,encryptedId:r}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if((0,rV.decodeJWT)(t).payload.id!==r)return;let e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!i)return;let s=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(i,s)}),le(this,"fetchAttestation",async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);let i=this.startAbortTimer(5*rH.ONE_SECOND),r=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(i),200===r.status?await r.json():void 0}),le(this,"getVerifyUrl",e=>{let t=e||oC;return oj.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${oC}`),t=oC),t}),le(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let e=this.startAbortTimer(rH.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}}),le(this,"persistPublicKey",async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e}),le(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),le(this,"isValidJwtAttestation",async e=>{let t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}let i=await this.fetchAndPersistPublicKey();try{if(i)return this.validateAttestation(e,i)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}}),le(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),le(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async e=>{let t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))});let e=await this.fetchPromise;return this.fetchPromise=void 0,e}),le(this,"validateAttestation",(e,t)=>{let i=function(e,t){var i;let r,s,[n,a,o]=e.split("."),c=(i=o,i2.Buffer.from(((s=(r=i.replace(/-/g,"+").replace(/_/g,"/")).length%4)>0&&(r+="=".repeat(4-s)),r),"base64"));if(64!==c.length)throw Error("Invalid signature length");let l=c.slice(0,32).toString("hex"),h=c.slice(32,64).toString("hex"),u=nF(`${n}.${a}`),d=new r4.ec("p256").keyFromPublic({x:i2.Buffer.from(t.x,"base64").toString("hex"),y:i2.Buffer.from(t.y,"base64").toString("hex")},"hex"),p=(0,rX.toString)(u,au);if(!d.verify(p,{r:l,s:h}))throw Error("Invalid signature");return(0,rV.decodeJWT)(e).payload}(e,t.publicKey),r={hasExpired:(0,rH.toMiliseconds)(i.exp)<Date.now(),payload:i};if(r.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:r.payload.origin,isScam:r.payload.isScam,isVerified:r.payload.isVerified}}),this.logger=(0,rA.generateChildLogger)(t,this.name),this.abortController=new AbortController,this.isDevEnv=sv(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,rA.getLoggerContext)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,rH.toMiliseconds)(e))}}var li=Object.defineProperty,lr=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?li(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class ls extends rY{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,lr(this,"context","echo"),lr(this,"registerDeviceToken",async e=>{let{clientId:t,token:i,notificationType:r,enableEncrypted:s=!1}=e,n=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:r,token:i,always_raw:s})})}),this.logger=(0,rA.generateChildLogger)(t,this.context)}}var ln=Object.defineProperty,la=Object.getOwnPropertySymbols,lo=Object.prototype.hasOwnProperty,lc=Object.prototype.propertyIsEnumerable,ll=(e,t,i)=>t in e?ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,lh=(e,t)=>{for(var i in t||(t={}))lo.call(t,i)&&ll(e,i,t[i]);if(la)for(var i of la(t))lc.call(t,i)&&ll(e,i,t[i]);return e},lu=(e,t,i)=>ll(e,"symbol"!=typeof t?t+"":t,i);class ld extends rQ{constructor(e,t,i=!0){super(e,t,i),this.core=e,this.logger=t,lu(this,"context","event-client"),lu(this,"storagePrefix",a6),lu(this,"storageVersion",.1),lu(this,"events",new Map),lu(this,"shouldPersist",!1),lu(this,"init",async()=>{if(!sv())try{let e={eventId:sN(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:sn(this.core.relayer.protocol,this.core.relayer.version,ou)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}}),lu(this,"createEvent",e=>{let{event:t="ERROR",type:i="",properties:{topic:r,trace:s}}=e,n=sN(),a=this.core.projectId||"",o=lh({eventId:n,timestamp:Date.now(),props:{event:t,type:i,properties:{topic:r,trace:s}},bundleId:a,domain:this.getAppDomain()},this.setMethods(n));return this.telemetryEnabled&&(this.events.set(n,o),this.shouldPersist=!0),o}),lu(this,"getEvent",e=>{let{eventId:t,topic:i}=e;if(t)return this.events.get(t);let r=Array.from(this.events.values()).find(e=>e.props.properties.topic===i);if(r)return lh(lh({},r),this.setMethods(r.eventId))}),lu(this,"deleteEvent",e=>{let{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0}),lu(this,"setEventListeners",()=>{this.core.heartbeat.on(rb.HEARTBEAT_EVENTS.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(e=>{(0,rH.fromMiliseconds)(Date.now())-(0,rH.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)})})}),lu(this,"setMethods",e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)})),lu(this,"addTrace",(e,t)=>{let i=this.events.get(e);i&&(i.props.properties.trace.push(t),this.events.set(e,i),this.shouldPersist=!0)}),lu(this,"setError",(e,t)=>{let i=this.events.get(e);i&&(i.props.type=t,i.timestamp=Date.now(),this.events.set(e,i),this.shouldPersist=!0)}),lu(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),lu(this,"restore",async()=>{try{let e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach(e=>{this.events.set(e.eventId,lh(lh({},e),this.setMethods(e.eventId)))})}catch(e){this.logger.warn(e)}}),lu(this,"submit",async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let e=[];for(let[t,i]of this.events)i.props.type&&e.push(i);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(let t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}}),lu(this,"sendEvent",async e=>{let t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${ou}${t}`,{method:"POST",body:JSON.stringify(e)})}),lu(this,"getAppDomain",()=>ss().url),this.logger=(0,rA.generateChildLogger)(t,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var lp=Object.defineProperty,lg=Object.getOwnPropertySymbols,lf=Object.prototype.hasOwnProperty,ly=Object.prototype.propertyIsEnumerable,lw=(e,t,i)=>t in e?lp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,lm=(e,t)=>{for(var i in t||(t={}))lf.call(t,i)&&lw(e,i,t[i]);if(lg)for(var i of lg(t))ly.call(t,i)&&lw(e,i,t[i]);return e},lM=(e,t,i)=>lw(e,"symbol"!=typeof t?t+"":t,i);class lN extends r_{constructor(e){var t;super(e),lM(this,"protocol","wc"),lM(this,"version",2),lM(this,"name",a8),lM(this,"relayUrl"),lM(this,"projectId"),lM(this,"customStoragePrefix"),lM(this,"events",new rI.EventEmitter),lM(this,"logger"),lM(this,"heartbeat"),lM(this,"relayer"),lM(this,"crypto"),lM(this,"storage"),lM(this,"history"),lM(this,"expirer"),lM(this,"pairing"),lM(this,"verify"),lM(this,"echoClient"),lM(this,"linkModeSupportedApps"),lM(this,"eventClient"),lM(this,"initialized",!1),lM(this,"logChunkController"),lM(this,"on",(e,t)=>this.events.on(e,t)),lM(this,"once",(e,t)=>this.events.once(e,t)),lM(this,"off",(e,t)=>this.events.off(e,t)),lM(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),lM(this,"dispatchEnvelope",({topic:e,message:t,sessionExists:i})=>{if(!e||!t)return;let r={topic:e,message:t,publishedAt:Date.now(),transportType:od};this.relayer.onLinkMessageEvent(r,{sessionExists:i})}),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||oi,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=(0,rA.getDefaultLoggerOptions)({level:"string"==typeof e?.logger&&e.logger?e.logger:"error",name:a8}),{logger:r,chunkLoggerController:s}=(0,rA.generatePlatformLogger)({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,rA.generateChildLogger)(r,this.name),this.heartbeat=new rb.HeartBeat,this.crypto=new cu(this,this.logger,e?.keychain),this.history=new c5(this,this.logger),this.expirer=new c9(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new rE.default(lm(lm({},a9),e?.storageOptions)),this.relayer=new cK({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new c4(this,this.logger),this.verify=new lt(this,this.logger,this.storage),this.echoClient=new ls(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new ld(this,this.logger,e?.telemetryEnabled)}static async init(e){let t=new lN(e);await t.initialize();let i=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",i),t}get context(){return(0,rA.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(og,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(og)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}let lv="client",lI=`wc@2:${lv}:`,lb="WALLETCONNECT_DEEPLINK_CHOICE",lE=(rH.THIRTY_DAYS,"Proposal expired"),lA=rH.SEVEN_DAYS,lD={wc_sessionPropose:{req:{ttl:rH.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:rH.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:rH.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:rH.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:rH.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:rH.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:rH.ONE_DAY,prompt:!1,tag:1104},res:{ttl:rH.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:rH.ONE_DAY,prompt:!1,tag:1106},res:{ttl:rH.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:rH.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:rH.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:rH.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:rH.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:rH.ONE_DAY,prompt:!1,tag:1112},res:{ttl:rH.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:rH.ONE_DAY,prompt:!1,tag:1114},res:{ttl:rH.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:rH.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:rH.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:rH.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:rH.FIVE_MINUTES,prompt:!1,tag:1119}}},lC={min:rH.FIVE_MINUTES,max:rH.SEVEN_DAYS},lT="IDLE",lj="ACTIVE",l_={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},lS=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],lO="wc@1.5:auth:",lx=`${lO}:PUB_KEY`;var lz=Object.defineProperty,lL=Object.defineProperties,lP=Object.getOwnPropertyDescriptors,lk=Object.getOwnPropertySymbols,lU=Object.prototype.hasOwnProperty,lR=Object.prototype.propertyIsEnumerable,lY=(e,t,i)=>t in e?lz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,lQ=(e,t)=>{for(var i in t||(t={}))lU.call(t,i)&&lY(e,i,t[i]);if(lk)for(var i of lk(t))lR.call(t,i)&&lY(e,i,t[i]);return e},lB=(e,t,i)=>lY(e,"symbol"!=typeof t?t+"":t,i);class lq extends rK{constructor(t){super(t),lB(this,"name","engine"),lB(this,"events",new rI.default),lB(this,"initialized",!1),lB(this,"requestQueue",{state:lT,queue:[]}),lB(this,"sessionRequestQueue",{state:lT,queue:[]}),lB(this,"requestQueueDelay",rH.ONE_SECOND),lB(this,"expectedPairingMethodMap",new Map),lB(this,"recentlyDeletedMap",new Map),lB(this,"recentlyDeletedLimit",200),lB(this,"relayMessageCache",[]),lB(this,"pendingSessions",new Map),lB(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(lD)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,rH.toMiliseconds)(this.requestQueueDelay)))}),lB(this,"connect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let t=lL(lQ({},e),lP({requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}}));await this.isValidConnect(t);let{pairingTopic:i,requiredNamespaces:r,optionalNamespaces:s,sessionProperties:n,relays:a}=t,o=i,c,l=!1;try{if(o){let e=this.client.core.pairing.pairings.get(o);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),l=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${o}) failed`),e}if(!o||!l){let{topic:e,uri:t}=await this.client.core.pairing.create();o=e,c=t}if(!o){let{message:e}=aL("NO_MATCHING_KEY",`connect() pairing topic: ${o}`);throw Error(e)}let h=await this.client.core.crypto.generateKeyPair(),u=lD.wc_sessionPropose.req.ttl||rH.FIVE_MINUTES,d=sp(u),p=lL(lQ({requiredNamespaces:r,optionalNamespaces:s,relays:a??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:d,pairingTopic:o},n&&{sessionProperties:n}),lP({id:(0,a4.payloadId)()})),g=sf("session_connect",p.id),{reject:f,resolve:y,done:w}=sl(u,lE),m=({id:e})=>{e===p.id&&(this.client.events.off("proposal_expire",m),this.pendingSessions.delete(p.id),this.events.emit(g,{error:{message:lE,code:0}}))};return this.client.events.on("proposal_expire",m),this.events.once(g,({error:e,session:t})=>{this.client.events.off("proposal_expire",m),e?f(e):t&&y(t)}),await this.sendRequest({topic:o,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0,clientRpcId:p.id}),await this.setProposal(p.id,p),{uri:c,approval:w}}),lB(this,"pair",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}}),lB(this,"approve",async e=>{var t,i,r;let s=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[oS]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw s.setError("no_internet_connection"),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),s.setError("proposal_not_found"),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),s.setError("session_approve_namespace_validation_failure"),e}let{id:n,relayProtocol:a,namespaces:o,sessionProperties:c,sessionConfig:l}=e,h=this.client.proposal.get(n);this.client.core.eventClient.deleteEvent({eventId:s.eventId});let{pairingTopic:u,proposer:d,requiredNamespaces:p,optionalNamespaces:g}=h,f=null==(i=this.client.core.eventClient)?void 0:i.getEvent({topic:u});f||(f=null==(r=this.client.core.eventClient)?void 0:r.createEvent({type:oS,properties:{topic:u,trace:[oS,"session_namespaces_validation_success"]}}));let y=await this.client.core.crypto.generateKeyPair(),w=d.publicKey,m=await this.client.core.crypto.generateSharedKey(y,w),M=lQ(lQ({relay:{protocol:a??"irn"},namespaces:o,controller:{publicKey:y,metadata:this.client.metadata},expiry:sp(lA)},c&&{sessionProperties:c}),l&&{sessionConfig:l});f.addTrace("subscribing_session_topic");try{await this.client.core.relayer.subscribe(m,{transportType:op})}catch(e){throw f.setError("subscribe_session_topic_failure"),e}f.addTrace("subscribe_session_topic_success");let N=lL(lQ({},M),lP({topic:m,requiredNamespaces:p,optionalNamespaces:g,pairingTopic:u,acknowledged:!1,self:M.controller,peer:{publicKey:d.publicKey,metadata:d.metadata},controller:y,transportType:op}));await this.client.session.set(m,N),f.addTrace("store_session");try{f.addTrace("publishing_session_settle"),await this.sendRequest({topic:m,method:"wc_sessionSettle",params:M,throwOnFailedPublish:!0}).catch(e=>{throw f?.setError("session_settle_publish_failure"),e}),f.addTrace("session_settle_publish_success"),f.addTrace("publishing_session_approve"),await this.sendResult({id:n,topic:u,result:{relay:{protocol:a??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch(e=>{throw f?.setError("session_approve_publish_failure"),e}),f.addTrace("session_approve_publish_success")}catch(e){throw this.client.logger.error(e),this.client.session.delete(m,aP("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(m),e}return this.client.core.eventClient.deleteEvent({eventId:f.eventId}),await this.client.core.pairing.updateMetadata({topic:u,metadata:d.metadata}),await this.client.proposal.delete(n,aP("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:u}),await this.setExpiry(m,sp(lA)),{topic:m,acknowledged:()=>Promise.resolve(this.client.session.get(m))}}),lB(this,"reject",async e=>{let t;this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}let{id:i,reason:r}=e;try{t=this.client.proposal.get(i).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),e}t&&(await this.sendError({id:i,topic:t,error:r,rpcOpts:lD.wc_sessionPropose.reject}),await this.client.proposal.delete(i,aP("USER_DISCONNECTED")))}),lB(this,"update",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}let{topic:t,namespaces:i}=e,{done:r,resolve:s,reject:n}=sl(),a=(0,a4.payloadId)(),o=(0,a4.getBigIntRpcId)().toString(),c=this.client.session.get(t).namespaces;return this.events.once(sf("session_update",a),({error:e})=>{e?n(e):s()}),await this.client.session.update(t,{namespaces:i}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:a,relayRpcId:o}).catch(e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),n(e)}),{acknowledged:r}}),lB(this,"extend",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}let{topic:t}=e,i=(0,a4.payloadId)(),{done:r,resolve:s,reject:n}=sl();return this.events.once(sf("session_extend",i),({error:e})=>{e?n(e):s()}),await this.setExpiry(t,sp(lA)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(e=>{n(e)}),{acknowledged:r}}),lB(this,"request",async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}let{chainId:t,request:i,topic:r,expiry:s=lD.wc_sessionRequest.req.ttl}=e,n=this.client.session.get(r);n?.transportType===op&&await this.confirmOnlineStateOrThrow();let a=(0,a4.payloadId)(),o=(0,a4.getBigIntRpcId)().toString(),{done:c,resolve:l,reject:h}=sl(s,"Request expired. Please try again.");this.events.once(sf("session_request",a),({error:e,result:t})=>{e?h(e):l(t)});let u="wc_sessionRequest",d=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);if(d)return await this.sendRequest({clientRpcId:a,relayRpcId:o,topic:r,method:u,params:{request:lL(lQ({},i),lP({expiryTimestamp:sp(s)})),chainId:t},expiry:s,throwOnFailedPublish:!0,appLink:d}).catch(e=>h(e)),this.client.events.emit("session_request_sent",{topic:r,request:i,chainId:t,id:a}),await c();let p={request:lL(lQ({},i),lP({expiryTimestamp:sp(s)})),chainId:t},g=this.shouldSetTVF(u,p);return await Promise.all([new Promise(async e=>{await this.sendRequest(lQ({clientRpcId:a,relayRpcId:o,topic:r,method:u,params:p,expiry:s,throwOnFailedPublish:!0},g&&{tvf:this.getTVFParams(a,p)})).catch(e=>h(e)),this.client.events.emit("session_request_sent",{topic:r,request:i,chainId:t,id:a}),e()}),new Promise(async e=>{var t;if(!(null!=(t=n.sessionConfig)&&t.disableDeepLink)){let e=await sm(this.client.core.storage,lb);await sw({id:a,topic:r,wcDeepLink:e})}e()}),c()]).then(e=>e[2])}),lB(this,"respond",async e=>{this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:i}=e,{id:r}=i,s=this.client.session.get(t);s.transportType===op&&await this.confirmOnlineStateOrThrow();let n=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);(0,a2.isJsonRpcResult)(i)?await this.sendResult({id:r,topic:t,result:i.result,throwOnFailedPublish:!0,appLink:n}):(0,a2.isJsonRpcError)(i)&&await this.sendError({id:r,topic:t,error:i.error,appLink:n}),this.cleanupAfterResponse(e)}),lB(this,"ping",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=(0,a4.payloadId)(),i=(0,a4.getBigIntRpcId)().toString(),{done:r,resolve:s,reject:n}=sl();this.events.once(sf("session_ping",e),({error:e})=>{e?n(e):s()}),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:i}),r()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))}),lB(this,"emit",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);let{topic:t,event:i,chainId:r}=e,s=(0,a4.getBigIntRpcId)().toString(),n=(0,a4.payloadId)();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:i,chainId:r},throwOnFailedPublish:!0,relayRpcId:s,clientRpcId:n})}),lB(this,"disconnect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:aP("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=aL("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw Error(e)}}),lB(this,"find",e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(function(e,t){let{requiredNamespaces:i}=t,r=Object.keys(e.namespaces),s=Object.keys(i),n=!0;return!!sa(s,r)&&(r.forEach(t=>{let{accounts:r,methods:s,events:a}=e.namespaces[t],o=aj(r),c=i[t];sa(r5(t,c),o)&&sa(c.methods,s)&&sa(c.events,a)||(n=!1)}),n)})(t,e)))),lB(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),lB(this,"authenticate",async(e,t)=>{var i,r,s,n,a;let o;this.isInitialized(),this.isValidAuthenticate(e);let c=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(i=this.client.metadata.redirect)?void 0:i.linkMode),l=c?od:op;l===op&&await this.confirmOnlineStateOrThrow();let{chains:h,statement:u="",uri:d,domain:p,nonce:g,type:f,exp:y,nbf:w,methods:m=[],expiry:M}=e,N=[...e.resources||[]],{topic:v,uri:I}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:l});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:I}});let b=await this.client.core.crypto.generateKeyPair(),E=ay(b);if(await Promise.all([this.client.auth.authKeys.set(lx,{responseTopic:E,publicKey:b}),this.client.auth.pairingTopics.set(E,{topic:E,pairingTopic:v})]),await this.client.core.relayer.subscribe(E,{transportType:l}),this.client.logger.info(`sending request to new pairing topic: ${v}`),m.length>0){let e,t,{namespace:i}=r3(h[0]),o=no(function(e,t,i,r={}){return i?.sort((e,t)=>e.localeCompare(t)),{att:{[e]:function(e,t,i={}){return Object.assign({},...(t=t?.sort((e,t)=>e.localeCompare(t))).map(t=>({[`${e}/${t}`]:[i]})))}(t,i,r)}}}(i,"request",m));nu(N)&&(r=o,s=N.pop(),o=no((n=nc(r),a=nc(s),na(n),na(a),e=Object.keys(n.att).concat(Object.keys(a.att)).sort((e,t)=>e.localeCompare(t)),t={att:{}},e.forEach(e=>{var i,r;Object.keys((null==(i=n.att)?void 0:i[e])||{}).concat(Object.keys((null==(r=a.att)?void 0:r[e])||{})).sort((e,t)=>e.localeCompare(t)).forEach(i=>{var r,s;t.att[e]=s5(((e,t)=>{for(var i in t||(t={}))s9.call(t,i)&&ne(e,i,t[i]);if(s6)for(var i of s6(t))s7.call(t,i)&&ne(e,i,t[i]);return e})({},t.att[e]),s8({[i]:(null==(r=n.att[e])?void 0:r[i])||(null==(s=a.att[e])?void 0:s[i])}))})}),t))),N.push(o)}let A=M&&M>lD.wc_sessionAuthenticate.req.ttl?M:lD.wc_sessionAuthenticate.req.ttl,D={authPayload:{type:f??"caip122",chains:h,statement:u,aud:d,domain:p,version:"1",nonce:g,iat:new Date().toISOString(),exp:y,nbf:w,resources:N},requester:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:sp(A)},C={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:h,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:sp(lD.wc_sessionPropose.req.ttl),id:(0,a4.payloadId)()},{done:T,resolve:j,reject:_}=sl(A,"Request expired"),S=(0,a4.payloadId)(),O=sf("session_connect",C.id),x=sf("session_request",S),z=async({error:e,session:t})=>{this.events.off(x,L),e?_(e):t&&j({session:t})},L=async e=>{var i,r,s;let n;if(await this.deletePendingAuthRequest(S,{message:"fulfilled",code:0}),e.error){let t=aP("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(O,z),_(e.error.message))}await this.deleteProposal(C.id),this.events.off(O,z);let{cacaos:a,responder:o}=e.result,c=[],h=[];for(let e of a){await ns({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),_(aP("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:t}=e,i=nu(t.resources),r=[ni(t.iss)],s=nr(t.iss);if(i){let e=nl(i),t=nh(i);c.push(...e),r.push(...t)}for(let e of r)h.push(`${e}:${s}`)}let u=await this.client.core.crypto.generateSharedKey(b,o.publicKey);c.length>0&&(n={topic:u,acknowledged:!0,self:{publicKey:b,metadata:this.client.metadata},peer:o,controller:o.publicKey,expiry:sp(lA),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:aO([...new Set(c)],[...new Set(h)]),transportType:l},await this.client.core.relayer.subscribe(u,{transportType:l}),await this.client.session.set(u,n),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:o.metadata}),n=this.client.session.get(u)),null!=(i=this.client.metadata.redirect)&&i.linkMode&&null!=(r=o.metadata.redirect)&&r.linkMode&&null!=(s=o.metadata.redirect)&&s.universal&&t&&(this.client.core.addLinkModeSupportedApp(o.metadata.redirect.universal),this.client.session.update(u,{transportType:od})),j({auths:a,session:n})};this.events.once(O,z),this.events.once(x,L);try{if(c){let e=(0,a4.formatJsonRpcRequest)("wc_sessionAuthenticate",D,S);this.client.core.history.set(v,e);let i=await this.client.core.crypto.encode("",e,{type:2,encoding:ap});o=aT(t,v,i)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:D,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:S}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:C,expiry:lD.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:C.id})])}catch(e){throw this.events.off(O,z),this.events.off(x,L),e}return await this.setProposal(C.id,C),await this.setAuthRequest(S,{request:lL(lQ({},D),lP({verifyContext:{}})),pairingTopic:v,transportType:l}),{uri:o??I,response:T}}),lB(this,"approveSessionAuthenticate",async e=>{let t,{id:i,auths:r}=e,s=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:["authenticated_session_approve_started"]}});try{this.isInitialized()}catch(e){throw s.setError("no_internet_connection"),e}let n=this.getPendingAuthRequest(i);if(!n)throw s.setError("authenticated_session_pending_request_not_found"),Error(`Could not find pending auth request with id ${i}`);let a=n.transportType||op;a===op&&await this.confirmOnlineStateOrThrow();let o=n.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),l=ay(o),h={type:1,receiverPublicKey:o,senderPublicKey:c},u=[],d=[];for(let e of r){if(!await ns({cacao:e,projectId:this.client.core.projectId})){s.setError("invalid_cacao");let e=aP("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:l,error:e,encodeOpts:h}),Error(e.message)}s.addTrace("cacaos_verified");let{p:t}=e,r=nu(t.resources),n=[ni(t.iss)],a=nr(t.iss);if(r){let e=nl(r),t=nh(r);u.push(...e),n.push(...t)}for(let e of n)d.push(`${e}:${a}`)}let p=await this.client.core.crypto.generateSharedKey(c,o);if(s.addTrace("create_authenticated_session_topic"),u?.length>0){t={topic:p,acknowledged:!0,self:{publicKey:c,metadata:this.client.metadata},peer:{publicKey:o,metadata:n.requester.metadata},controller:o,expiry:sp(lA),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:n.pairingTopic,namespaces:aO([...new Set(u)],[...new Set(d)]),transportType:a},s.addTrace("subscribing_authenticated_session_topic");try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(e){throw s.setError("subscribe_authenticated_session_topic_failure"),e}s.addTrace("subscribe_authenticated_session_topic_success"),await this.client.session.set(p,t),s.addTrace("store_authenticated_session"),await this.client.core.pairing.updateMetadata({topic:n.pairingTopic,metadata:n.requester.metadata})}s.addTrace("publishing_authenticated_session_approve");try{await this.sendResult({topic:l,id:i,result:{cacaos:r,responder:{publicKey:c,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(n.requester.metadata,a)})}catch(e){throw s.setError("authenticated_session_approve_publish_failure"),e}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:n.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:t}}),lB(this,"rejectSessionAuthenticate",async e=>{this.isInitialized();let{id:t,reason:i}=e,r=this.getPendingAuthRequest(t);if(!r)throw Error(`Could not find pending auth request with id ${t}`);r.transportType===op&&await this.confirmOnlineStateOrThrow();let s=r.requester.publicKey,n=await this.client.core.crypto.generateKeyPair(),a=ay(s);await this.sendError({id:t,topic:a,error:i,encodeOpts:{type:1,receiverPublicKey:s,senderPublicKey:n},rpcOpts:lD.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(r.requester.metadata,r.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,aP("USER_DISCONNECTED"))}),lB(this,"formatAuthMessage",e=>{this.isInitialized();let{request:t,iss:i}=e;return nn(t,i)}),lB(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{let e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)}),lB(this,"cleanupDuplicatePairings",async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(i=>{var r,s;return(null==(r=i.peerMetadata)?void 0:r.url)&&(null==(s=i.peerMetadata)?void 0:s.url)===e.peer.metadata.url&&i.topic&&i.topic!==t.topic});if(0===i.length)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}}),lB(this,"deleteSession",async e=>{var t;let{topic:i,expirerHasDeleted:r=!1,emitEvent:s=!0,id:n=0}=e,{self:a}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,aP("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),r||this.client.core.expirer.del(i),this.client.core.storage.removeItem(lb).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===i&&this.deletePendingSessionRequest(e.id,aP("USER_DISCONNECTED"))}),i===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=lT),s&&this.client.events.emit("session_delete",{id:n,topic:i})}),lB(this,"deleteProposal",async(e,t)=>{if(t)try{let t=this.client.proposal.get(e),i=this.client.core.eventClient.getEvent({topic:t.pairingTopic});i?.setError("proposal_expired")}catch{}await Promise.all([this.client.proposal.delete(e,aP("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")}),lB(this,"deletePendingSessionRequest",async(e,t,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),i?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(t=>t.id!==e),i&&(this.sessionRequestQueue.state=lT,this.client.events.emit("session_request_expire",{id:e}))}),lB(this,"deletePendingAuthRequest",async(e,t,i=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),i?Promise.resolve():this.client.core.expirer.del(e)])}),lB(this,"setExpiry",async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))}),lB(this,"setProposal",async(e,t)=>{this.client.core.expirer.set(e,sp(lD.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)}),lB(this,"setAuthRequest",async(e,t)=>{let{request:i,pairingTopic:r,transportType:s=op}=t;this.client.core.expirer.set(e,i.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:e,pairingTopic:r,verifyContext:i.verifyContext,transportType:s})}),lB(this,"setPendingSessionRequest",async e=>{let{id:t,topic:i,params:r,verifyContext:s}=e,n=r.request.expiryTimestamp||sp(lD.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,n),await this.client.pendingRequest.set(t,{id:t,topic:i,params:r,verifyContext:s})}),lB(this,"sendRequest",async t=>{let i,r,{topic:s,method:n,params:a,expiry:o,relayRpcId:c,clientRpcId:l,throwOnFailedPublish:h,appLink:u,tvf:d}=t,p=(0,a4.formatJsonRpcRequest)(n,a,l),g=!!u;try{let e=g?ap:ad;i=await this.client.core.crypto.encode(s,p,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${s} failed`),e}if(lS.includes(n)){let e=aw(JSON.stringify(p)),t=aw(i);r=await this.client.core.verify.register({id:t,decryptedId:e})}let f=lD[n].req;if(f.attestation=r,o&&(f.ttl=o),c&&(f.id=c),this.client.core.history.set(s,p),g){let t=aT(u,s,i);await e.g.Linking.openURL(t,this.client.name)}else{let e,t=lD[n].req;o&&(t.ttl=o),c&&(t.id=c),t.tvf=lL(lQ({},d),lP({correlationId:p.id})),h?(e=lQ({},t.internal),t.internal=lL(e,lP({throwOnFailedPublish:!0})),await this.client.core.relayer.publish(s,i,t)):this.client.core.relayer.publish(s,i,t).catch(e=>this.client.logger.error(e))}return p.id}),lB(this,"sendResult",async t=>{let i,r,s,{id:n,topic:a,result:o,throwOnFailedPublish:c,encodeOpts:l,appLink:h}=t,u=(0,a4.formatJsonRpcResult)(n,o),d=h&&"u">typeof(null==e.g?void 0:e.g.Linking);try{let e,t,r=d?ap:ad;i=await this.client.core.crypto.encode(a,u,(e=lQ({},l||{}),t={encoding:r},lL(e,lP(t))))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${a} failed`),e}try{let e=(r=await this.client.core.history.get(a,n)).request;try{this.shouldSetTVF(e.method,e.params)&&(s=this.getTVFParams(n,e.params,o))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${a}, ${n}) failed`),e}if(d){let t=aT(h,a,i);await e.g.Linking.openURL(t,this.client.name)}else{let e,t=lD[r.request.method].res;t.tvf=lL(lQ({},s),lP({correlationId:n})),c?(e=lQ({},t.internal),t.internal=lL(e,lP({throwOnFailedPublish:!0})),await this.client.core.relayer.publish(a,i,t)):this.client.core.relayer.publish(a,i,t).catch(e=>this.client.logger.error(e))}await this.client.core.history.resolve(u)}),lB(this,"sendError",async t=>{let i,r,{id:s,topic:n,error:a,encodeOpts:o,rpcOpts:c,appLink:l}=t,h=(0,a4.formatJsonRpcError)(s,a),u=l&&"u">typeof(null==e.g?void 0:e.g.Linking);try{let e,t,r=u?ap:ad;i=await this.client.core.crypto.encode(n,h,(e=lQ({},o||{}),t={encoding:r},lL(e,lP(t))))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),e}try{r=await this.client.core.history.get(n,s)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${n}, ${s}) failed`),e}if(u){let t=aT(l,n,i);await e.g.Linking.openURL(t,this.client.name)}else{let e=r.request.method,t=c||lD[e].res;this.client.core.relayer.publish(n,i,t)}await this.client.core.history.resolve(h)}),lB(this,"cleanup",async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let i=!1;sg(t.expiry)&&(i=!0),this.client.core.crypto.keychain.has(t.topic)||(i=!0),i&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{sg(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])}),lB(this,"onRelayEventRequest",async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()}),lB(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===lj)return void this.client.logger.info("Request queue already active, skipping...");for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=lj;let e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=lT}),lB(this,"processRequest",async e=>{let{topic:t,payload:i,attestation:r,transportType:s,encryptedId:n}=e,a=i.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:a}))switch(a){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:i,attestation:r,encryptedId:n});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,i);case"wc_sessionPing":return await this.onSessionPingRequest(t,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:i,attestation:r,encryptedId:n,transportType:s});case"wc_sessionEvent":return await this.onSessionEventRequest(t,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:i,attestation:r,encryptedId:n,transportType:s});default:return this.client.logger.info(`Unsupported request method ${a}`)}}),lB(this,"onRelayEventResponse",async e=>{let{topic:t,payload:i,transportType:r}=e,s=(await this.client.core.history.get(t,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(t,i,r);case"wc_sessionSettle":return this.onSessionSettleResponse(t,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,i);case"wc_sessionExtend":return this.onSessionExtendResponse(t,i);case"wc_sessionPing":return this.onSessionPingResponse(t,i);case"wc_sessionRequest":return this.onSessionRequestResponse(t,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}}),lB(this,"onRelayEventUnknownPayload",e=>{let{topic:t}=e,{message:i}=aL("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(i)}),lB(this,"shouldIgnorePairingRequest",e=>{let{topic:t,requestMethod:i}=e,r=this.expectedPairingMethodMap.get(t);return!(!r||r.includes(i))&&!!(r.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),lB(this,"onSessionProposeRequest",async e=>{let{topic:t,payload:i,attestation:r,encryptedId:s}=e,{params:n,id:a}=i;try{let e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError("proposal_listener_not_found")),this.isValidConnect(lQ({},i.params));let o=n.expiryTimestamp||sp(lD.wc_sessionPropose.req.ttl),c=lQ({id:a,pairingTopic:t,expiryTimestamp:o},n);await this.setProposal(a,c);let l=await this.getVerifyContext({attestationId:r,hash:aw(JSON.stringify(i)),encryptedId:s,metadata:c.proposer.metadata});e?.addTrace("emit_session_proposal"),this.client.events.emit("session_proposal",{id:a,params:c,verifyContext:l})}catch(e){await this.sendError({id:a,topic:t,error:e,rpcOpts:lD.wc_sessionPropose.autoReject}),this.client.logger.error(e)}}),lB(this,"onSessionProposeResponse",async(e,t,i)=>{let{id:r}=t;if((0,a2.isJsonRpcResult)(t)){let{result:s}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});let n=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:n});let a=n.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});let o=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});let c=await this.client.core.crypto.generateSharedKey(a,o);this.pendingSessions.set(r,{sessionTopic:c,pairingTopic:e,proposalId:r,publicKey:a});let l=await this.client.core.relayer.subscribe(c,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:l}),await this.client.core.pairing.activate({topic:e})}else if((0,a2.isJsonRpcError)(t)){await this.client.proposal.delete(r,aP("USER_DISCONNECTED"));let e=sf("session_connect",r);if(0===this.events.listenerCount(e))throw Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}}),lB(this,"onSessionSettleRequest",async(e,t)=>{let{id:i,params:r}=t;try{let i,s;this.isValidSessionSettleRequest(r);let{relay:n,controller:a,expiry:o,namespaces:c,sessionProperties:l,sessionConfig:h}=t.params,u=[...this.pendingSessions.values()].find(t=>t.sessionTopic===e);if(!u)return this.client.logger.error(`Pending session not found for topic ${e}`);let d=this.client.proposal.get(u.proposalId),p=(i=lQ(lQ({topic:e,relay:n,expiry:o,namespaces:c,acknowledged:!0,pairingTopic:u.pairingTopic,requiredNamespaces:d.requiredNamespaces,optionalNamespaces:d.optionalNamespaces,controller:a.publicKey,self:{publicKey:u.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),h&&{sessionConfig:h}),s={transportType:op},lL(i,lP(s)));await this.client.session.set(p.topic,p),await this.setExpiry(p.topic,p.expiry),await this.client.core.pairing.updateMetadata({topic:u.pairingTopic,metadata:p.peer.metadata}),this.client.events.emit("session_connect",{session:p}),this.events.emit(sf("session_connect",u.proposalId),{session:p}),this.pendingSessions.delete(u.proposalId),this.deleteProposal(u.proposalId,!1),this.cleanupDuplicatePairings(p),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}}),lB(this,"onSessionSettleResponse",async(e,t)=>{let{id:i}=t;(0,a2.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(sf("session_approve",i),{})):(0,a2.isJsonRpcError)(t)&&(await this.client.session.delete(e,aP("USER_DISCONNECTED")),this.events.emit(sf("session_approve",i),{error:t.error}))}),lB(this,"onSessionUpdateRequest",async(e,t)=>{let{params:i,id:r}=t;try{let t=`${e}_session_update`,s=a0.get(t);if(s&&this.isRequestOutOfSync(s,r)){this.client.logger.warn(`Discarding out of sync request - ${r}`),this.sendError({id:r,topic:e,error:aP("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(lQ({topic:e},i));try{a0.set(t,r),await this.client.session.update(e,{namespaces:i.namespaces}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw a0.delete(t),e}this.client.events.emit("session_update",{id:r,topic:e,params:i})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),lB(this,"isRequestOutOfSync",(e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3)),lB(this,"onSessionUpdateResponse",(e,t)=>{let{id:i}=t,r=sf("session_update",i);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);(0,a2.isJsonRpcResult)(t)?this.events.emit(sf("session_update",i),{}):(0,a2.isJsonRpcError)(t)&&this.events.emit(sf("session_update",i),{error:t.error})}),lB(this,"onSessionExtendRequest",async(e,t)=>{let{id:i}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,sp(lA)),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:e})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}}),lB(this,"onSessionExtendResponse",(e,t)=>{let{id:i}=t,r=sf("session_extend",i);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);(0,a2.isJsonRpcResult)(t)?this.events.emit(sf("session_extend",i),{}):(0,a2.isJsonRpcError)(t)&&this.events.emit(sf("session_extend",i),{error:t.error})}),lB(this,"onSessionPingRequest",async(e,t)=>{let{id:i}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:e})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}}),lB(this,"onSessionPingResponse",(e,t)=>{let{id:i}=t,r=sf("session_ping",i);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);setTimeout(()=>{(0,a2.isJsonRpcResult)(t)?this.events.emit(sf("session_ping",i),{}):(0,a2.isJsonRpcError)(t)&&this.events.emit(sf("session_ping",i),{error:t.error})},500)}),lB(this,"onSessionDeleteRequest",async(e,t)=>{let{id:i}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise(t=>{this.client.core.relayer.once(oa,async()=>{t(await this.deleteSession({topic:e,id:i}))})}),this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:aP("USER_DISCONNECTED")})]).catch(e=>this.client.logger.error(e))}catch(e){this.client.logger.error(e)}}),lB(this,"onSessionRequest",async e=>{var t,i,r;let{topic:s,payload:n,attestation:a,encryptedId:o,transportType:c}=e,{id:l,params:h}=n;try{await this.isValidRequest(lQ({topic:s},h));let e=this.client.session.get(s),n=await this.getVerifyContext({attestationId:a,hash:aw(JSON.stringify((0,a4.formatJsonRpcRequest)("wc_sessionRequest",h,l))),encryptedId:o,metadata:e.peer.metadata,transportType:c}),u={id:l,topic:s,params:h,verifyContext:n};await this.setPendingSessionRequest(u),c===od&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(i=e.peer.metadata.redirect)?void 0:i.universal),null!=(r=this.client.signConfig)&&r.disableRequestQueue?this.emitSessionRequest(u):(this.addSessionRequestToSessionRequestQueue(u),this.processSessionRequestQueue())}catch(e){await this.sendError({id:l,topic:s,error:e}),this.client.logger.error(e)}}),lB(this,"onSessionRequestResponse",(e,t)=>{let{id:i}=t,r=sf("session_request",i);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);(0,a2.isJsonRpcResult)(t)?this.events.emit(sf("session_request",i),{result:t.result}):(0,a2.isJsonRpcError)(t)&&this.events.emit(sf("session_request",i),{error:t.error})}),lB(this,"onSessionEventRequest",async(e,t)=>{let{id:i,params:r}=t;try{let t=`${e}_session_event_${r.event.name}`,s=a0.get(t);if(s&&this.isRequestOutOfSync(s,i))return void this.client.logger.info(`Discarding out of sync request - ${i}`);this.isValidEmit(lQ({topic:e},r)),this.client.events.emit("session_event",{id:i,topic:e,params:r}),a0.set(t,i)}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}}),lB(this,"onSessionAuthenticateResponse",(e,t)=>{let{id:i}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,a2.isJsonRpcResult)(t)?this.events.emit(sf("session_request",i),{result:t.result}):(0,a2.isJsonRpcError)(t)&&this.events.emit(sf("session_request",i),{error:t.error})}),lB(this,"onSessionAuthenticateRequest",async e=>{var t;let{topic:i,payload:r,attestation:s,encryptedId:n,transportType:a}=e;try{let{requester:e,authPayload:o,expiryTimestamp:c}=r.params,l=await this.getVerifyContext({attestationId:s,hash:aw(JSON.stringify(r)),encryptedId:n,metadata:e.metadata,transportType:a}),h={requester:e,pairingTopic:i,id:r.id,authPayload:o,verifyContext:l,expiryTimestamp:c};await this.setAuthRequest(r.id,{request:h,pairingTopic:i,transportType:a}),a===od&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:r.params,id:r.id,verifyContext:l})}catch(n){this.client.logger.error(n);let e=r.params.requester.publicKey,t=await this.client.core.crypto.generateKeyPair(),s=this.getAppLinkIfEnabled(r.params.requester.metadata,a);await this.sendError({id:r.id,topic:i,error:n,encodeOpts:{type:1,receiverPublicKey:e,senderPublicKey:t},rpcOpts:lD.wc_sessionAuthenticate.autoReject,appLink:s})}}),lB(this,"addSessionRequestToSessionRequestQueue",e=>{this.sessionRequestQueue.queue.push(e)}),lB(this,"cleanupAfterResponse",e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=lT,this.processSessionRequestQueue()},(0,rH.toMiliseconds)(this.requestQueueDelay))}),lB(this,"cleanupPendingSentRequestsForTopic",({topic:e,error:t})=>{let i=this.client.core.history.pending;i.length>0&&i.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{let i=sf("session_request",e.request.id);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);this.events.emit(sf("session_request",e.request.id),{error:t})})}),lB(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===lj)return void this.client.logger.info("session request queue is already active.");let e=this.sessionRequestQueue.queue[0];if(!e)return void this.client.logger.info("session request queue is empty.");try{this.sessionRequestQueue.state=lj,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}}),lB(this,"emitSessionRequest",e=>{this.client.events.emit("session_request",e)}),lB(this,"onPairingCreated",e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:(0,a4.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties},t.id)})}),lB(this,"isValidConnect",async e=>{let t;if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:i,requiredNamespaces:r,optionalNamespaces:s,sessionProperties:n,relays:a}=e;if(aR(i)||await this.isValidPairingTopic(i),t=!1,a?a&&ak(a)&&a.length&&a.forEach(e=>{t=aH(e)}):t=!0,!t){let{message:e}=aL("MISSING_OR_INVALID",`connect() relays: ${a}`);throw Error(e)}aR(r)||0===aU(r)||this.validateNamespaces(r,"requiredNamespaces"),aR(s)||0===aU(s)||this.validateNamespaces(s,"optionalNamespaces"),aR(n)||this.validateSessionProps(n,"sessionProperties")}),lB(this,"validateNamespaces",(e,t)=>{let i=function(e,t,i){let r=null;if(e&&aU(e)){let s,n=aW(e,t);n&&(r=n);let a=(s=null,Object.entries(e).forEach(([e,r])=>{var n,a;let o;if(s)return;let c=(n=r5(e,r),a=`${t} ${i}`,o=null,ak(n)&&n.length?n.forEach(e=>{o||aB(e)||(o=aP("UNSUPPORTED_CHAINS",`${a}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):aB(e)||(o=aP("UNSUPPORTED_CHAINS",`${a}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),o);c&&(s=c)}),s);a&&(r=a)}else r=aL("MISSING_OR_INVALID",`${t}, ${i} should be an object with data`);return r}(e,"connect()",t);if(i)throw Error(i.message)}),lB(this,"isValidApprove",async e=>{if(!a$(e))throw Error(aL("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:i,relayProtocol:r,sessionProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);let n=this.client.proposal.get(t),a=aK(i,"approve()");if(a)throw Error(a.message);let o=aG(n.requiredNamespaces,i,"approve()");if(o)throw Error(o.message);if(!aY(r,!0)){let{message:e}=aL("MISSING_OR_INVALID",`approve() relayProtocol: ${r}`);throw Error(e)}aR(s)||this.validateSessionProps(s,"sessionProperties")}),lB(this,"isValidReject",async e=>{if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:i}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!i||"object"!=typeof i||!i.code||!aQ(i.code,!1)||!i.message||!aY(i.message,!1)){let{message:e}=aL("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw Error(e)}}),lB(this,"isValidSessionSettleRequest",e=>{let t;if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:i,controller:r,namespaces:s,expiry:n}=e;if(!aH(i)){let{message:e}=aL("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let a=(t=null,aY(r?.publicKey,!1)||(t=aL("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(a)throw Error(a.message);let o=aK(s,"onSessionSettleRequest()");if(o)throw Error(o.message);if(sg(n)){let{message:e}=aL("EXPIRED","onSessionSettleRequest()");throw Error(e)}}),lB(this,"isValidUpdate",async e=>{if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:i}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let r=this.client.session.get(t),s=aK(i,"update()");if(s)throw Error(s.message);let n=aG(r.requiredNamespaces,i,"update()");if(n)throw Error(n.message)}),lB(this,"isValidExtend",async e=>{if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)}),lB(this,"isValidRequest",async e=>{var t;let i;if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:r,request:s,chainId:n,expiry:a}=e;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);let{namespaces:o}=this.client.session.get(r);if(!aV(o,n)){let{message:e}=aL("MISSING_OR_INVALID",`request() chainId: ${n}`);throw Error(e)}if(aR(s)||!aY(s.method,!1)){let{message:e}=aL("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw Error(e)}if(!(aY(t=s.method,!1)&&(i=[],Object.values(o).forEach(e=>{aj(e.accounts).includes(n)&&i.push(...e.methods)}),i).includes(t))){let{message:e}=aL("MISSING_OR_INVALID",`request() method: ${s.method}`);throw Error(e)}if(a&&(!aQ(a,!1)||!(a<=lC.max)||!(a>=lC.min))){let{message:e}=aL("MISSING_OR_INVALID",`request() expiry: ${a}. Expiry must be a number (in seconds) between ${lC.min} and ${lC.max}`);throw Error(e)}}),lB(this,"isValidRespond",async e=>{var t;if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:i,response:r}=e;try{await this.isValidSessionTopic(i)}catch(i){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),i}if(aR(r)||aR(r.result)&&aR(r.error)||!aQ(r.id,!1)||!aY(r.jsonrpc,!1)){let{message:e}=aL("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw Error(e)}}),lB(this,"isValidPing",async e=>{if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),lB(this,"isValidEmit",async e=>{var t;let i;if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:r,event:s,chainId:n}=e;await this.isValidSessionTopic(r);let{namespaces:a}=this.client.session.get(r);if(!aV(a,n)){let{message:e}=aL("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw Error(e)}if(aR(s)||!aY(s.name,!1)||!(aY(t=s.name,!1)&&(i=[],Object.values(a).forEach(e=>{aj(e.accounts).includes(n)&&i.push(...e.events)}),i).includes(t))){let{message:e}=aL("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw Error(e)}}),lB(this,"isValidDisconnect",async e=>{if(!a$(e)){let{message:t}=aL("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),lB(this,"isValidAuthenticate",e=>{let{chains:t,uri:i,domain:r,nonce:s}=e;if(!Array.isArray(t)||0===t.length)throw Error("chains is required and must be a non-empty array");if(!aY(i,!1))throw Error("uri is required parameter");if(!aY(r,!1))throw Error("domain is required parameter");if(!aY(s,!1))throw Error("nonce is required parameter");if([...new Set(t.map(e=>r3(e).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:n}=r3(t[0]);if("eip155"!==n)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),lB(this,"getVerifyContext",async e=>{let{attestationId:t,hash:i,encryptedId:r,metadata:s,transportType:n}=e,a={verified:{verifyUrl:s.verifyUrl||oC,validation:"UNKNOWN",origin:s.url||""}};try{if(n===od){let e=this.getAppLinkIfEnabled(s,n);return a.verified.validation=e&&new URL(e).origin===new URL(s.url).origin?"VALID":"INVALID",a}let e=await this.client.core.verify.resolve({attestationId:t,hash:i,encryptedId:r,verifyUrl:s.verifyUrl});e&&(a.verified.origin=e.origin,a.verified.isScam=e.isScam,a.verified.validation=e.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(a)}`),a}),lB(this,"validateSessionProps",(e,t)=>{Object.values(e).forEach(e=>{if(!aY(e,!1)){let{message:i}=aL("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw Error(i)}})}),lB(this,"getPendingAuthRequest",e=>{let t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0}),lB(this,"addToRecentlyDeleted",(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0,t=this.recentlyDeletedLimit/2;for(let i of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(i)}}}),lB(this,"checkRecentlyDeleted",e=>{let t=this.recentlyDeletedMap.get(e);if(t){let{message:i}=aL("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw Error(i)}}),lB(this,"isLinkModeEnabled",(t,i)=>{var r,s,n,a,o,c,l,h,u;return!!t&&i===od&&(null==(s=null==(r=this.client.metadata)?void 0:r.redirect)?void 0:s.linkMode)===!0&&(null==(a=null==(n=this.client.metadata)?void 0:n.redirect)?void 0:a.universal)!==void 0&&(null==(c=null==(o=this.client.metadata)?void 0:o.redirect)?void 0:c.universal)!==""&&(null==(l=t?.redirect)?void 0:l.universal)!==void 0&&(null==(h=t?.redirect)?void 0:h.universal)!==""&&(null==(u=t?.redirect)?void 0:u.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&"u">typeof(null==e.g?void 0:e.g.Linking)}),lB(this,"getAppLinkIfEnabled",(e,t)=>{var i;return this.isLinkModeEnabled(e,t)?null==(i=e?.redirect)?void 0:i.universal:void 0}),lB(this,"handleLinkModeMessage",({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;let t=sM(e,"topic")||"",i=decodeURIComponent(sM(e,"wc_ev")||""),r=this.client.session.keys.includes(t);r&&this.client.session.update(t,{transportType:od}),this.client.core.dispatchEnvelope({topic:t,message:i,sessionExists:r})}),lB(this,"registerLinkModeListeners",async()=>{var t;if(sv()||se()&&null!=(t=this.client.metadata.redirect)&&t.linkMode){let t=null==e.g?void 0:e.g.Linking;if("u">typeof t){t.addEventListener("url",this.handleLinkModeMessage,this.client.name);let e=await t.getInitialURL();e&&setTimeout(()=>{this.handleLinkModeMessage({url:e})},50)}}}),lB(this,"shouldSetTVF",(e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;let{request:i}=t;return Object.keys(l_).includes(i.method)}),lB(this,"getTVFParams",(e,t,i)=>{var r,s;try{let n,a,o=t.request.method,c=this.extractTxHashesFromResult(o,i);return n=lQ({correlationId:e,rpcMethods:[o],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(s=null==(r=t.request.params)?void 0:r[0])?void 0:s.to]}),a={txHashes:c},lL(n,lP(a))}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}}),lB(this,"isValidContractData",e=>{var t;if(!e)return!1;try{let i=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!i.startsWith("0x"))return!1;let r=i.slice(2);return!!/^[0-9a-fA-F]*$/.test(r)&&r.length%2==0}catch{}return!1}),lB(this,"extractTxHashesFromResult",(e,t)=>{try{let i=l_[e];if("string"==typeof t)return[t];let r=t[i.key];if(ak(r))return r;if("string"==typeof r)return[r]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]})}isInitialized(){if(!this.initialized){let{message:e}=aL("NOT_INITIALIZED",this.name);throw Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(or,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){let{topic:t,message:i,attestation:r,transportType:s}=e,{publicKey:n}=this.client.auth.authKeys.keys.includes(lx)?this.client.auth.authKeys.get(lx):{responseTopic:void 0,publicKey:void 0},a=await this.client.core.crypto.decode(t,i,{receiverPublicKey:n,encoding:s===od?ap:ad});try{(0,a2.isJsonRpcRequest)(a)?(this.client.core.history.set(t,a),this.onRelayEventRequest({topic:t,payload:a,attestation:r,transportType:s,encryptedId:aw(i)})):(0,a2.isJsonRpcResponse)(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:t,payload:a,transportType:s}),this.client.core.history.delete(t,a.id)):this.onRelayEventUnknownPayload({topic:t,payload:a,transportType:s})}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(oD,async e=>{let{topic:t,id:i}=sd(e.target);return i&&this.client.pendingRequest.keys.includes(i)?await this.deletePendingSessionRequest(i,aL("EXPIRED"),!0):i&&this.client.auth.requests.keys.includes(i)?await this.deletePendingAuthRequest(i,aL("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i})))})}registerPairingEvents(){this.client.core.pairing.events.on(oM,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(oN,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!aY(e,!1)){let{message:t}=aL("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=aL("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(sg(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=aL("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!aY(e,!1)){let{message:t}=aL("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=aL("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if(sg(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=aL("EXPIRED",`session topic: ${e}`);throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=aL("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(aY(e,!1)){let{message:t}=aL("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=aL("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if("number"!=typeof e){let{message:t}=aL("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=aL("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if(sg(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=aL("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class lW extends cX{constructor(e,t){super(e,t,"proposal",lI),this.core=e,this.logger=t}}class lK extends cX{constructor(e,t){super(e,t,"session",lI),this.core=e,this.logger=t}}class lH extends cX{constructor(e,t){super(e,t,"request",lI,e=>e.id),this.core=e,this.logger=t}}class l$ extends cX{constructor(e,t){super(e,t,"authKeys",lO,()=>lx),this.core=e,this.logger=t}}class lV extends cX{constructor(e,t){super(e,t,"pairingTopics",lO),this.core=e,this.logger=t}}class lG extends cX{constructor(e,t){super(e,t,"requests",lO,e=>e.id),this.core=e,this.logger=t}}var lF=Object.defineProperty,lZ=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?lF(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class lJ{constructor(e,t){this.core=e,this.logger=t,lZ(this,"authKeys"),lZ(this,"pairingTopics"),lZ(this,"requests"),this.authKeys=new l$(this.core,this.logger),this.pairingTopics=new lV(this.core,this.logger),this.requests=new lG(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var lX=Object.defineProperty,l0=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?lX(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class l1 extends rW{constructor(e){super(e),l0(this,"protocol","wc"),l0(this,"version",2),l0(this,"name",lv),l0(this,"metadata"),l0(this,"core"),l0(this,"logger"),l0(this,"events",new rI.EventEmitter),l0(this,"engine"),l0(this,"session"),l0(this,"proposal"),l0(this,"pendingRequest"),l0(this,"auth"),l0(this,"signConfig"),l0(this,"on",(e,t)=>this.events.on(e,t)),l0(this,"once",(e,t)=>this.events.once(e,t)),l0(this,"off",(e,t)=>this.events.off(e,t)),l0(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),l0(this,"removeAllListeners",e=>this.events.removeAllListeners(e)),l0(this,"connect",async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"pair",async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"approve",async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"reject",async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"update",async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"extend",async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"request",async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"respond",async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"ping",async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"emit",async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"disconnect",async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"find",e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}}),l0(this,"authenticate",async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"formatAuthMessage",e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"approveSessionAuthenticate",async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),l0(this,"rejectSessionAuthenticate",async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),this.name=e?.name||lv,this.metadata=e?.metadata||ss(),this.signConfig=e?.signConfig;const t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,rD.pino)((0,rA.getDefaultLoggerOptions)({level:e?.logger||"error"}));this.core=e?.core||new lN(e),this.logger=(0,rA.generateChildLogger)(t,this.name),this.session=new lK(this.core,this.logger),this.proposal=new lW(this.core,this.logger),this.pendingRequest=new lH(this.core,this.logger),this.engine=new lq(this),this.auth=new lJ(this.core,this.logger)}static async init(e){let t=new l1(e);return await t.initialize(),t}get context(){return(0,rA.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},(0,rH.toMiliseconds)(rH.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var l4=e.i(700545);let l2="error",l3="wc@2:universal_provider:",l5="https://rpc.walletconnect.org/v1/",l8="generic",l6=`${l5}bundler`,l9="default_chain_changed";var l7="u">typeof globalThis?globalThis:"u">typeof window?window:e.g,he=function(e,t){return e===t||e!=e&&t!=t},ht=function(e,t){for(var i=e.length;i--;)if(he(e[i][0],t))return i;return -1},hi=Array.prototype.splice;function hr(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}hr.prototype.clear=function(){this.__data__=[],this.size=0},hr.prototype.delete=function(e){var t=this.__data__,i=ht(t,e);return!(i<0)&&(i==t.length-1?t.pop():hi.call(t,i,1),--this.size,!0)},hr.prototype.get=function(e){var t=this.__data__,i=ht(t,e);return i<0?void 0:t[i][1]},hr.prototype.has=function(e){return ht(this.__data__,e)>-1},hr.prototype.set=function(e,t){var i=this.__data__,r=ht(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this};var hs="object"==typeof l7&&l7&&l7.Object===Object&&l7,hn="object"==typeof self&&self&&self.Object===Object&&self,ha=hs||hn||Function("return this")(),ho=ha.Symbol,hc=Object.prototype,hl=hc.hasOwnProperty,hh=hc.toString,hu=ho?ho.toStringTag:void 0,hd=Object.prototype.toString,hp=function(e){var t=hl.call(e,hu),i=e[hu];try{e[hu]=void 0;var r=!0}catch{}var s=hh.call(e);return r&&(t?e[hu]=i:delete e[hu]),s},hg=ho?ho.toStringTag:void 0,hf=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":hg&&hg in Object(e)?hp(e):hd.call(e)},hy=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},hw=function(e){if(!hy(e))return!1;var t=hf(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},hm=ha["__core-js_shared__"],hM=(y=/[^.]+$/.exec(hm&&hm.keys&&hm.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"",hN=Function.prototype.toString,hv=function(e){if(null!=e){try{return hN.call(e)}catch{}try{return e+""}catch{}}return""},hI=/^\[object .+?Constructor\]$/,hb=Object.prototype,hE=Function.prototype.toString,hA=hb.hasOwnProperty,hD=RegExp("^"+hE.call(hA).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hC=function(e){return!!hy(e)&&(!hM||!(hM in e))&&(hw(e)?hD:hI).test(hv(e))},hT=function(e,t){var i=e?.[t];return hC(i)?i:void 0},hj=hT(ha,"Map"),h_=hT(Object,"create"),hS=Object.prototype.hasOwnProperty,hO=Object.prototype.hasOwnProperty;function hx(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}hx.prototype.clear=function(){this.__data__=h_?h_(null):{},this.size=0},hx.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},hx.prototype.get=function(e){var t=this.__data__;if(h_){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return hS.call(t,e)?t[e]:void 0},hx.prototype.has=function(e){var t=this.__data__;return h_?void 0!==t[e]:hO.call(t,e)},hx.prototype.set=function(e,t){var i=this.__data__;return this.size+=+!this.has(e),i[e]=h_&&void 0===t?"__lodash_hash_undefined__":t,this};var hz=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},hL=function(e,t){var i=e.__data__;return hz(t)?i["string"==typeof t?"string":"hash"]:i.map};function hP(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function hk(e){var t=this.__data__=new hr(e);this.size=t.size}hP.prototype.clear=function(){this.size=0,this.__data__={hash:new hx,map:new(hj||hr),string:new hx}},hP.prototype.delete=function(e){var t=hL(this,e).delete(e);return this.size-=!!t,t},hP.prototype.get=function(e){return hL(this,e).get(e)},hP.prototype.has=function(e){return hL(this,e).has(e)},hP.prototype.set=function(e,t){var i=hL(this,e),r=i.size;return i.set(e,t),this.size+=+(i.size!=r),this},hk.prototype.clear=function(){this.__data__=new hr,this.size=0},hk.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},hk.prototype.get=function(e){return this.__data__.get(e)},hk.prototype.has=function(e){return this.__data__.has(e)},hk.prototype.set=function(e,t){var i=this.__data__;if(i instanceof hr){var r=i.__data__;if(!hj||r.length<199)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new hP(r)}return i.set(e,t),this.size=i.size,this};var hU=function(){try{var e=hT(Object,"defineProperty");return e({},"",{}),e}catch{}}(),hR=function(e,t,i){"__proto__"==t&&hU?hU(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i},hY=function(e,t,i){(void 0===i||he(e[t],i))&&(void 0!==i||t in e)||hR(e,t,i)},hQ={exports:{}};v=(N=(M=(m=(w=hQ.exports)&&!w.nodeType&&w)&&hQ&&!hQ.nodeType&&hQ)&&M.exports===m?ha.Buffer:void 0)?N.allocUnsafe:void 0,hQ.exports=function(e,t){if(t)return e.slice();var i=e.length,r=v?v(i):new e.constructor(i);return e.copy(r),r};var hB=ha.Uint8Array,hq=function(e){var t=new e.constructor(e.byteLength);return new hB(t).set(new hB(e)),t},hW=Object.create,hK=function(){function e(){}return function(t){if(!hy(t))return{};if(hW)return hW(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),hH=(I=Object.getPrototypeOf,b=Object,function(e){return I(b(e))}),h$=Object.prototype,hV=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||h$)},hG=function(e){return null!=e&&"object"==typeof e},hF=function(e){return hG(e)&&"[object Arguments]"==hf(e)},hZ=Object.prototype,hJ=hZ.hasOwnProperty,hX=hZ.propertyIsEnumerable,h0=hF(function(){return arguments}())?hF:function(e){return hG(e)&&hJ.call(e,"callee")&&!hX.call(e,"callee")},h1=Array.isArray,h4=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff},h2=function(e){return null!=e&&h4(e.length)&&!hw(e)},h3={exports:{}};C=(D=(A=(E=h3.exports)&&!E.nodeType&&E)&&h3&&!h3.nodeType&&h3)&&D.exports===A?ha.Buffer:void 0,h3.exports=(C?C.isBuffer:void 0)||function(){return!1};var h5=Object.prototype,h8=Function.prototype.toString,h6=h5.hasOwnProperty,h9=h8.call(Object),h7={};h7["[object Float32Array]"]=h7["[object Float64Array]"]=h7["[object Int8Array]"]=h7["[object Int16Array]"]=h7["[object Int32Array]"]=h7["[object Uint8Array]"]=h7["[object Uint8ClampedArray]"]=h7["[object Uint16Array]"]=h7["[object Uint32Array]"]=!0,h7["[object Arguments]"]=h7["[object Array]"]=h7["[object ArrayBuffer]"]=h7["[object Boolean]"]=h7["[object DataView]"]=h7["[object Date]"]=h7["[object Error]"]=h7["[object Function]"]=h7["[object Map]"]=h7["[object Number]"]=h7["[object Object]"]=h7["[object RegExp]"]=h7["[object Set]"]=h7["[object String]"]=h7["[object WeakMap]"]=!1;var ue={exports:{}};S=(_=(j=(T=ue.exports)&&!T.nodeType&&T)&&ue&&!ue.nodeType&&ue)&&_.exports===j&&hs.process,ue.exports=function(){try{return _&&_.require&&_.require("util").types||S&&S.binding&&S.binding("util")}catch{}}();var ut=ue.exports,ui=ut&&ut.isTypedArray,ur=ui?function(e){return ui(e)}:function(e){return hG(e)&&h4(e.length)&&!!h7[hf(e)]},us=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},un=Object.prototype.hasOwnProperty,ua=function(e,t,i){var r=e[t];un.call(e,t)&&he(r,i)&&(void 0!==i||t in e)||hR(e,t,i)},uo=/^(?:0|[1-9]\d*)$/,uc=function(e,t){var i=typeof e;return!!(t=t??0x1fffffffffffff)&&("number"==i||"symbol"!=i&&uo.test(e))&&e>-1&&e%1==0&&e<t},ul=function(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r},uh=h3.exports,uu=Object.prototype.hasOwnProperty,ud=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t},up=Object.prototype.hasOwnProperty,ug=function(e,t){var i=h1(e),r=!i&&h0(e),s=!i&&!r&&uh(e),n=!i&&!r&&!s&&ur(e),a=i||r||s||n,o=a?ul(e.length,String):[],c=o.length;for(var l in e)(t||uu.call(e,l))&&!(a&&("length"==l||s&&("offset"==l||"parent"==l)||n&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||uc(l,c)))&&o.push(l);return o},uf=function(e){if(!hy(e))return ud(e);var t=hV(e),i=[];for(var r in e)"constructor"==r&&(t||!up.call(e,r))||i.push(r);return i},uy=function(e){return h2(e)?ug(e,!0):uf(e)},uw=function(e,t,i,r){var s=!i;i||(i={});for(var n=-1,a=t.length;++n<a;){var o=t[n],c=r?r(i[o],e[o],o,i,e):void 0;void 0===c&&(c=e[o]),s?hR(i,o,c):ua(i,o,c)}return i},um=hQ.exports,uM=function(e,t){var i=t?hq(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)},uN=function(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t},uv=h3.exports,uI=function(e){if(!hG(e)||"[object Object]"!=hf(e))return!1;var t=hH(e);if(null===t)return!0;var i=h6.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&h8.call(i)==h9},ub=function(e,t,i){for(var r=-1,s=Object(e),n=i(e),a=n.length;a--;){var o=n[++r];if(!1===t(s[o],o,s))break}return e},uE=function(e,t,i,r,s,n,a){var o=us(e,i),c=us(t,i),l=a.get(c);if(l)return void hY(e,i,l);var h=n?n(o,c,i+"",e,t,a):void 0,u=void 0===h;if(u){var d=h1(c),p=!d&&uv(c),g=!d&&!p&&ur(c);h=c,d||p||g?h1(o)?h=o:hG(o)&&h2(o)?h=uN(o):p?(u=!1,h=um(c,!0)):g?(u=!1,h=uM(c,!0)):h=[]:uI(c)||h0(c)?(h=o,h0(o)?h=uw(o,uy(o)):(!hy(o)||hw(o))&&(h="function"!=typeof c.constructor||hV(c)?{}:hK(hH(c)))):u=!1}u&&(a.set(c,h),s(h,c,r,n,a),a.delete(c)),hY(e,i,h)},uA=function(e){return e},uD=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)},uC=Math.max,uT=hU?function(e,t){return hU(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:uA,uj=Date.now,u_=(O=0,x=0,function(){var e=uj(),t=16-(e-x);if(x=e,t>0){if(++O>=800)return arguments[0]}else O=0;return uT.apply(void 0,arguments)}),uS=function(e,t,i){if(!hy(i))return!1;var r=typeof t;return("number"==r?!!(h2(i)&&uc(t,i.length)):"string"==r&&t in i)&&he(i[t],e)},uO=function e(t,i,r,s,n){t!==i&&ub(i,function(a,o){if(n||(n=new hk),hy(a))uE(t,i,o,r,e,s,n);else{var c=s?s(us(t,o),a,o+"",t,i,n):void 0;void 0===c&&(c=a),hY(t,o,c)}},uy)},ux=(z=function(e,t,i){uO(e,t,i)},u_((o=function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,n=r>2?t[2]:void 0;for(s=z.length>3&&"function"==typeof s?(r--,s):void 0,n&&uS(t[0],t[1],n)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=t[i];a&&z(e,a,i,s)}return e},l=uC(void 0===(l=c)?o.length-1:l,0),function(){for(var e=arguments,t=-1,i=uC(e.length-l,0),r=Array(i);++t<i;)r[t]=e[l+t];t=-1;for(var s=Array(l+1);++t<l;)s[t]=e[t];return s[l]=uA(r),uD(o,this,s)}),o+"")),uz=Object.defineProperty,uL=Object.defineProperties,uP=Object.getOwnPropertyDescriptors,uk=Object.getOwnPropertySymbols,uU=Object.prototype.hasOwnProperty,uR=Object.prototype.propertyIsEnumerable,uY=(e,t,i)=>t in e?uz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,uQ=(e,t)=>{for(var i in t||(t={}))uU.call(t,i)&&uY(e,i,t[i]);if(uk)for(var i of uk(t))uR.call(t,i)&&uY(e,i,t[i]);return e},uB=(e,t)=>uL(e,uP(t));function uq(e,t,i){var r;let s=r3(e);return(null==(r=t.rpcMap)?void 0:r[s.reference])||`${l5}?chainId=${s.namespace}:${s.reference}&projectId=${i}`}function uW(e){return e.includes(":")?e.split(":")[1]:e}function uK(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function uH(e={},t={}){return ux(u$(e),u$(t))}function u$(e){var t,i,r,s;let n={};if(!aU(e))return n;for(let[a,o]of Object.entries(e)){let e=a_(a)?[a]:o.chains,c=o.methods||[],l=o.events||[],h=o.rpcMap||{},u=aS(a);n[u]=uB(uQ(uQ({},n[u]),o),{chains:sy(e,null==(t=n[u])?void 0:t.chains),methods:sy(c,null==(i=n[u])?void 0:i.methods),events:sy(l,null==(r=n[u])?void 0:r.events),rpcMap:uQ(uQ({},h),null==(s=n[u])?void 0:s.rpcMap)})}return n}function uV(e){return e.includes(":")?e.split(":")[2]:e}function uG(e){let t={};for(let[i,r]of Object.entries(e)){let e=r.methods||[],s=r.events||[],n=r.accounts||[],a=a_(i)?[i]:r.chains?r.chains:uK(r.accounts);t[i]={chains:a,methods:e,events:s,accounts:n}}return t}function uF(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)}let uZ={},uJ=e=>uZ[e],uX=(e,t)=>{uZ[e]=t};var u0=Object.defineProperty,u1=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?u0(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class u4{constructor(e){u1(this,"name","polkadot"),u1(this,"client"),u1(this,"httpProviders"),u1(this,"events"),u1(this,"namespace"),u1(this,"chainId"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(l9,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let r=uW(t);e[r]=this.createHttpProvider(r,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||uq(e,this.namespace,this.client.core.projectId);return new a1.JsonRpcProvider(new l4.default(i,uJ("disableProviderPing")))}}var u2=Object.defineProperty,u3=Object.defineProperties,u5=Object.getOwnPropertyDescriptors,u8=Object.getOwnPropertySymbols,u6=Object.prototype.hasOwnProperty,u9=Object.prototype.propertyIsEnumerable,u7=(e,t,i)=>t in e?u2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,de=(e,t)=>{for(var i in t||(t={}))u6.call(t,i)&&u7(e,i,t[i]);if(u8)for(var i of u8(t))u9.call(t,i)&&u7(e,i,t[i]);return e},dt=(e,t,i)=>u7(e,"symbol"!=typeof t?t+"":t,i);class di{constructor(e){dt(this,"name","eip155"),dt(this,"client"),dt(this,"chainId"),dt(this,"namespace"),dt(this,"httpProviders"),dt(this,"events"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(l9,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let i=t||uq(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return new a1.JsonRpcProvider(new l4.HttpConnection(i,uJ("disableProviderPing")))}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let r=parseInt(uW(t));e[r]=this.createHttpProvider(r,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let r=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0",s=parseInt(r=r.startsWith("0x")?r:`0x${r}`,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:r}]},chainId:null==(i=this.namespace.chains)?void 0:i[0]}),this.setDefaultChain(`${s}`);else throw Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,i,r;let s=null==(i=null==(t=e.request)?void 0:t.params)?void 0:i[0];if(!s)throw Error("Missing address parameter in `wallet_getCapabilities` request");let n=this.client.session.get(e.topic),a=(null==(r=n?.sessionProperties)?void 0:r.capabilities)||{};if(null!=a&&a[s])return a?.[s];let o=await this.client.request(e);try{let t,i,r,c;await this.client.session.update(e.topic,{sessionProperties:(r=de({},n.sessionProperties||{}),c={capabilities:(t=de({},a||{}),i={[s]:o},u3(t,u5(i)))},u3(r,u5(c)))})}catch(e){console.warn("Failed to update session with capabilities",e)}return o}async getCallStatus(e){var t,i;let r=this.client.session.get(e.topic),s=null==(t=r.sessionProperties)?void 0:t.bundler_name;if(s){let t=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}let n=null==(i=r.sessionProperties)?void 0:i.bundler_url;if(n)try{return await this.getUserOperationReceipt(n,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,n)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var i;let r=new URL(e),s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,a4.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(i=t.request.params)?void 0:i[0]]))});if(!s.ok)throw Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,t){return`${l6}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var dr=Object.defineProperty,ds=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?dr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class dn{constructor(e){ds(this,"name","solana"),ds(this,"client"),ds(this,"httpProviders"),ds(this,"events"),ds(this,"namespace"),ds(this,"chainId"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(l9,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let r=uW(t);e[r]=this.createHttpProvider(r,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||uq(e,this.namespace,this.client.core.projectId);return new a1.JsonRpcProvider(new l4.default(i,uJ("disableProviderPing")))}}var da=Object.defineProperty,dc=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?da(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class dl{constructor(e){dc(this,"name","cosmos"),dc(this,"client"),dc(this,"httpProviders"),dc(this,"events"),dc(this,"namespace"),dc(this,"chainId"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(l9,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let r=uW(t);e[r]=this.createHttpProvider(r,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||uq(e,this.namespace,this.client.core.projectId);return new a1.JsonRpcProvider(new l4.default(i,uJ("disableProviderPing")))}}var dh=Object.defineProperty,du=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?dh(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class dd{constructor(e){du(this,"name","algorand"),du(this,"client"),du(this,"httpProviders"),du(this,"events"),du(this,"namespace"),du(this,"chainId"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let i=t||uq(`${this.name}:${e}`,this.namespace,this.client.core.projectId);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(l9,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||uq(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new a1.JsonRpcProvider(new l4.default(i,uJ("disableProviderPing")))}}var dp=Object.defineProperty,dg=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?dp(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class df{constructor(e){dg(this,"name","cip34"),dg(this,"client"),dg(this,"httpProviders"),dg(this,"events"),dg(this,"namespace"),dg(this,"chainId"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(l9,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let i=this.getCardanoRPCUrl(t),r=uW(t);e[r]=this.createHttpProvider(r,i)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||this.getCardanoRPCUrl(e);if(!i)throw Error(`No RPC url provided for chainId: ${e}`);return new a1.JsonRpcProvider(new l4.default(i,uJ("disableProviderPing")))}}var dy=Object.defineProperty,dw=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?dy(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class dm{constructor(e){dw(this,"name","elrond"),dw(this,"client"),dw(this,"httpProviders"),dw(this,"events"),dw(this,"namespace"),dw(this,"chainId"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(l9,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let r=uW(t);e[r]=this.createHttpProvider(r,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||uq(e,this.namespace,this.client.core.projectId);return new a1.JsonRpcProvider(new l4.default(i,uJ("disableProviderPing")))}}var dM=Object.defineProperty,dN=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?dM(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class dv{constructor(e){dN(this,"name","multiversx"),dN(this,"client"),dN(this,"httpProviders"),dN(this,"events"),dN(this,"namespace"),dN(this,"chainId"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(l9,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let r=uW(t);e[r]=this.createHttpProvider(r,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||uq(e,this.namespace,this.client.core.projectId);return new a1.JsonRpcProvider(new l4.default(i,uJ("disableProviderPing")))}}var dI=Object.defineProperty,db=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?dI(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class dE{constructor(e){db(this,"name","near"),db(this,"client"),db(this,"httpProviders"),db(this,"events"),db(this,"namespace"),db(this,"chainId"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let i=t||uq(`${this.name}:${e}`,this.namespace);this.setHttpProvider(e,i)}this.events.emit(l9,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,null==(i=this.namespace.rpcMap)?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||uq(e,this.namespace);return typeof i>"u"?void 0:new a1.JsonRpcProvider(new l4.default(i,uJ("disableProviderPing")))}}var dA=Object.defineProperty,dD=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?dA(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class dC{constructor(e){dD(this,"name","tezos"),dD(this,"client"),dD(this,"httpProviders"),dD(this,"events"),dD(this,"namespace"),dD(this,"chainId"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let i=t||uq(`${this.name}:${e}`,this.namespace);this.setHttpProvider(e,i)}this.events.emit(l9,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||uq(e,this.namespace);return typeof i>"u"?void 0:new a1.JsonRpcProvider(new l4.default(i))}}var dT=Object.defineProperty,dj=(e,t,i)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?dT(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i};class d_{constructor(e){dj(this,"name",l8),dj(this,"client"),dj(this,"httpProviders"),dj(this,"events"),dj(this,"namespace"),dj(this,"chainId"),this.namespace=e.namespace,this.events=uJ("events"),this.client=uJ("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(l9,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var e,t;let i={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(e=>{let t=r3(e);i[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)}),i}getHttpProvider(e){let t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||uq(e,this.namespace,this.client.core.projectId);return new a1.JsonRpcProvider(new l4.default(i,uJ("disableProviderPing")))}}var dS=Object.defineProperty,dO=Object.defineProperties,dx=Object.getOwnPropertyDescriptors,dz=Object.getOwnPropertySymbols,dL=Object.prototype.hasOwnProperty,dP=Object.prototype.propertyIsEnumerable,dk=(e,t,i)=>t in e?dS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,dU=(e,t)=>{for(var i in t||(t={}))dL.call(t,i)&&dk(e,i,t[i]);if(dz)for(var i of dz(t))dP.call(t,i)&&dk(e,i,t[i]);return e},dR=(e,t,i)=>dk(e,"symbol"!=typeof t?t+"":t,i);class dY{constructor(e){dR(this,"client"),dR(this,"namespaces"),dR(this,"optionalNamespaces"),dR(this,"sessionProperties"),dR(this,"events",new rI.default),dR(this,"rpcProviders",{}),dR(this,"session"),dR(this,"providerOpts"),dR(this,"logger"),dR(this,"uri"),dR(this,"disableProviderPing",!1),this.providerOpts=e,this.logger="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,rD.pino)((0,rA.getDefaultLoggerOptions)({level:e?.logger||l2})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new dY(e);return await t.initialize(),t}async request(e,t,i){let[r,s]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(r).request({request:dU({},e),chainId:`${r}:${s}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,r){let s=new Date().getTime();this.request(e,i,r).then(e=>t(null,(0,a4.formatJsonRpcResult)(s,e))).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:aP("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();let{uri:i,response:r}=await this.client.authenticate(e,t);i&&(this.uri=i,this.events.emit("display_uri",i));let s=await r();if(this.session=s.session,this.session){let e=uG(this.session.namespaces);this.namespaces=uH(this.namespaces,e),this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){let{uri:t,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});t&&(this.uri=t,this.events.emit("display_uri",t));let r=await i();this.session=r;let s=uG(r.namespaces);return this.namespaces=uH(this.namespaces,s),this.persist("namespaces",this.namespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[i,r]=this.validateChain(e),s=this.getProvider(i);s.name===l8?s.setDefaultChain(`${i}:${r}`,t):s.setDefaultChain(r,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(ak(t)){for(let i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await l1.init({core:this.providerOpts.core,logger:this.providerOpts.logger||l2,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>aS(e)))];uX("client",this.client),uX("events",this.events),uX("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let i=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!i.length)return[];let r=[];return i.forEach(e=>{let i=t.namespaces[e].accounts;r.push(...i)}),r}(e,this.session),i=uK(t),r=dO(dU({},uH(this.namespaces,this.optionalNamespaces)[e]),dx({accounts:t,chains:i}));switch(e){case"eip155":this.rpcProviders[e]=new di({namespace:r});break;case"algorand":this.rpcProviders[e]=new dd({namespace:r});break;case"solana":this.rpcProviders[e]=new dn({namespace:r});break;case"cosmos":this.rpcProviders[e]=new dl({namespace:r});break;case"polkadot":this.rpcProviders[e]=new u4({namespace:r});break;case"cip34":this.rpcProviders[e]=new df({namespace:r});break;case"elrond":this.rpcProviders[e]=new dm({namespace:r});break;case"multiversx":this.rpcProviders[e]=new dv({namespace:r});break;case"near":this.rpcProviders[e]=new dE({namespace:r});break;case"tezos":this.rpcProviders[e]=new dC({namespace:r});break;default:this.rpcProviders[l8]?this.rpcProviders[l8].updateNamespace(r):this.rpcProviders[l8]=new d_({namespace:r})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{let{params:t}=e,{event:i}=t;if("accountsChanged"===i.name){let e=i.data;e&&ak(e)&&this.events.emit("accountsChanged",e.map(uV))}else if("chainChanged"===i.name){let e=t.chainId,i=t.event.data,r=aS(e),s=uF(e)!==uF(i)?`${r}:${uF(i)}`:e;this.onChainChanged(s)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;let{namespaces:r}=t,s=null==(i=this.client)?void 0:i.session.get(e);this.session=dO(dU({},s),dx({namespaces:r})),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",dO(dU({},aP("USER_DISCONNECTED")),dx({data:e.topic})))}),this.on(l9,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[l8]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t,optionalNamespaces:i,sessionProperties:r}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=r,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){let[t,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(e=>aS(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];let r=aS(Object.keys(this.namespaces)[0]),s=this.rpcProviders[r].getDefaultChain();return[r,s]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;let[i,r]=this.validateChain(e);r&&(t||this.getProvider(i).setDefaultChain(r),this.namespaces[i]?this.namespaces[i].defaultChain=r:this.namespaces[`${i}:${r}`]?this.namespaces[`${i}:${r}`].defaultChain=r:this.namespaces[`${i}:${r}`]={defaultChain:r},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",r))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${l3}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${l3}/${e}`)}}var dQ=e.i(739068),dB=e.i(230371),dq=e.i(705418),dW=e.i(245707),dK=e.i(125397),dH=e.i(236599),d$=e.i(406780),dV=e.i(845624);let dG={validateCaipAddress(e){if(e.split(":")?.length!==3)throw Error("Invalid CAIP Address");return e},parseCaipAddress(e){let t=e.split(":");if(3!==t.length)throw Error(`Invalid CAIP-10 address: ${e}`);let[i,r,s]=t;if(!i||!r||!s)throw Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:i,chainId:r,address:s}},parseCaipNetworkId(e){let t=e.split(":");if(2!==t.length)throw Error(`Invalid CAIP-2 network id: ${e}`);let[i,r]=t;if(!i||!r)throw Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:i,chainId:r}}};var dF=e.i(557601),dZ=e.i(769832),dJ=e.i(4737),dX=e.i(21945),d0=e.i(359702),d1=e.i(770924);let d4={convertEVMChainIdToCoinType(e){if(e>=0x80000000)throw Error("Invalid chainId");return(0x80000000|e)>>>0}};var d2=e.i(436945),d3=e.i(134970);let d5=(0,d0.proxy)({suggestions:[],loading:!1}),d8={state:d5,subscribe:e=>(0,d0.subscribe)(d5,()=>e(d5)),subscribeKey:(e,t)=>(0,d1.subscribeKey)(d5,e,t),async resolveName(e){try{return await dJ.BlockchainApiController.lookupEnsName(e)}catch(e){throw Error(e?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(e){try{return await dJ.BlockchainApiController.lookupEnsName(e),!0}catch{return!1}},async getSuggestions(e){try{return d5.loading=!0,d5.suggestions=[],d5.suggestions=(await dJ.BlockchainApiController.getEnsNameSuggestions(e)).suggestions.map(e=>({...e,name:e.name}))||[],d5.suggestions}catch(e){throw Error(this.parseEnsApiError(e,"Error fetching name suggestions"))}finally{d5.loading=!1}},async getNamesForAddress(e){try{if(!dX.ChainController.state.activeCaipNetwork)return[];let t=d2.StorageUtil.getEnsFromCacheForAddress(e);if(t)return t;let i=await dJ.BlockchainApiController.reverseLookupEnsName({address:e});return d2.StorageUtil.updateEnsCache({address:e,ens:i,timestamp:Date.now()}),i}catch(e){throw Error(this.parseEnsApiError(e,"Error fetching names for address"))}},async registerName(e){let t=dX.ChainController.state.activeCaipNetwork;if(!t)throw Error("Network not found");let i=dQ.AccountController.state.address,r=dq.ConnectorController.getAuthConnector();if(!i||!r)throw Error("Address or auth connector not found");d5.loading=!0;try{let r=JSON.stringify({name:e,attributes:{},timestamp:Math.floor(Date.now()/1e3)});d3.RouterController.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){d5.loading=!1}});let s=await dB.ConnectionController.signMessage(r),n=t.id;if(!n)throw Error("Network not found");let a=d4.convertEVMChainIdToCoinType(Number(n));await dJ.BlockchainApiController.registerEnsName({coinType:a,address:i,signature:s,message:r}),dQ.AccountController.setProfileName(e,t.chainNamespace),d3.RouterController.replace("RegisterAccountNameSuccess")}catch(i){let t=this.parseEnsApiError(i,`Error registering name ${e}`);throw d3.RouterController.replace("RegisterAccountName"),Error(t)}finally{d5.loading=!1}},validateName:e=>/^[a-zA-Z0-9-]{4,}$/u.test(e),parseEnsApiError:(e,t)=>e?.reasons?.[0]?.description||t};var d6=e.i(490123),d9=e.i(868580),d7=e.i(130752),pe=e.i(645911),pt=e.i(473905);e.i(182785),e.i(421682);var pi=e.i(36993);e.i(966719);var pr=e.i(997686),ps=e.i(29323),pn=e.i(320256),pa=e.i(528815);d$.ConstantsUtil.CONNECTOR_ID.COINBASE,d$.ConstantsUtil.CONNECTOR_ID.COINBASE_SDK,d$.ConstantsUtil.CONNECTOR_ID.SAFE,d$.ConstantsUtil.CONNECTOR_ID.LEDGER,d$.ConstantsUtil.CONNECTOR_ID.OKX,pa.ConstantsUtil.METMASK_CONNECTOR_NAME,pa.ConstantsUtil.TRUST_CONNECTOR_NAME,pa.ConstantsUtil.SOLFLARE_CONNECTOR_NAME,pa.ConstantsUtil.PHANTOM_CONNECTOR_NAME,pa.ConstantsUtil.COIN98_CONNECTOR_NAME,pa.ConstantsUtil.MAGIC_EDEN_CONNECTOR_NAME,pa.ConstantsUtil.BACKPACK_CONNECTOR_NAME,pa.ConstantsUtil.BITGET_CONNECTOR_NAME,pa.ConstantsUtil.FRONTIER_CONNECTOR_NAME,pa.ConstantsUtil.XVERSE_CONNECTOR_NAME,pa.ConstantsUtil.LEATHER_CONNECTOR_NAME;let po={1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",0xaa36a7:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",0x4e454152:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},pc={[d$.ConstantsUtil.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[d$.ConstantsUtil.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[d$.ConstantsUtil.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[d$.ConstantsUtil.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[d$.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[d$.ConstantsUtil.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},pl={[d$.ConstantsUtil.CONNECTOR_ID.INJECTED]:"Browser Wallet",[d$.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[d$.ConstantsUtil.CONNECTOR_ID.COINBASE]:"Coinbase",[d$.ConstantsUtil.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[d$.ConstantsUtil.CONNECTOR_ID.LEDGER]:"Ledger",[d$.ConstantsUtil.CONNECTOR_ID.SAFE]:"Safe"},ph=(d$.ConstantsUtil.CONNECTOR_ID.INJECTED,d$.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT,d$.ConstantsUtil.CONNECTOR_ID.EIP6963,d$.ConstantsUtil.CONNECTOR_ID.AUTH,["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"]),pu={extendRpcUrlWithProjectId(e,t){let i=!1;try{i="rpc.walletconnect.org"===new URL(e).host}catch(e){i=!1}if(i){let i=new URL(e);return i.searchParams.has("projectId")||i.searchParams.set("projectId",t),i.toString()}return e},isCaipNetwork:e=>"chainNamespace"in e&&"caipNetworkId"in e,getChainNamespace(e){return this.isCaipNetwork(e)?e.chainNamespace:d$.ConstantsUtil.CHAIN.EVM},getCaipNetworkId(e){return this.isCaipNetwork(e)?e.caipNetworkId:`${d$.ConstantsUtil.CHAIN.EVM}:${e.id}`},getDefaultRpcUrl(e,t,i){let r=e.rpcUrls?.default?.http?.[0];if(ph.includes(t)){let e;return(e=new URL("https://rpc.walletconnect.org/v1/")).searchParams.set("chainId",t),e.searchParams.set("projectId",i),e.toString()}return r||""},extendCaipNetwork(e,{customNetworkImageUrls:t,projectId:i,customRpcUrls:r}){let s=this.getChainNamespace(e),n=this.getCaipNetworkId(e),a=e.rpcUrls.default.http?.[0],o=this.getDefaultRpcUrl(e,n,i),c=e?.rpcUrls?.chainDefault?.http?.[0]||a,l=r?.[n]?.map(e=>e.url)||[],h=[...l,o],u=[...l];return c&&!u.includes(c)&&u.push(c),{...e,chainNamespace:s,caipNetworkId:n,assets:{imageId:po[e.id],imageUrl:t?.[e.id]},rpcUrls:{...e.rpcUrls,default:{http:h},chainDefault:{http:u}}}},extendCaipNetworks:(e,{customNetworkImageUrls:t,projectId:i,customRpcUrls:r})=>e.map(e=>pu.extendCaipNetwork(e,{customNetworkImageUrls:t,customRpcUrls:r,projectId:i})),getViemTransport(e,t,i){let r=[];if(i?.forEach(e=>{r.push((0,pn.http)(e.url,e.config))}),ph.includes(e.caipNetworkId)){let i=this.getDefaultRpcUrl(e,e.caipNetworkId,t);r.push((0,pn.http)(i,{fetchOptions:{headers:{"Content-Type":"text/plain"}}}))}return(0,ps.fallback)(r)},extendWagmiTransports(e,t,i){if(ph.includes(e.caipNetworkId)){let r=this.getDefaultRpcUrl(e,e.caipNetworkId,t);return(0,ps.fallback)([i,(0,pn.http)(r)])}return i},getUnsupportedNetwork:e=>({id:e.split(":")[1],caipNetworkId:e,name:d$.ConstantsUtil.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}),getCaipNetworkFromStorage(e){let t=d2.StorageUtil.getActiveCaipNetworkId(),i=dX.ChainController.getAllRequestedCaipNetworks(),r=Array.from(dX.ChainController.state.chains?.keys()||[]),s=t?.split(":")[0],n=!!s&&r.includes(s),a=i?.find(e=>e.caipNetworkId===t);return n&&!a&&t?this.getUnsupportedNetwork(t):a||e||i?.[0]}},pd={UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},pp={SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${"undefined"!=typeof window?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}};var pg=e.i(130318);let pf={createLogger(e,t="error"){let i=(0,rA.getDefaultLoggerOptions)({level:t}),{logger:r}=(0,rA.generatePlatformLogger)({opts:i});return r.error=(...t)=>{for(let i of t)if(i instanceof Error)return void e(i,...t);e(void 0,...t)},r}},py={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},pw=(0,d0.proxy)({providers:{...py},providerIds:{...py}}),pm={state:pw,subscribeKey:(e,t)=>(0,d1.subscribeKey)(pw,e,t),subscribe:e=>(0,d0.subscribe)(pw,()=>{e(pw)}),subscribeProviders:e=>(0,d0.subscribe)(pw.providers,()=>e(pw.providers)),setProvider(e,t){t&&(pw.providers[e]=(0,d0.ref)(t))},getProvider:e=>pw.providers[e],setProviderId(e,t){t&&(pw.providerIds[e]=t)},getProviderId(e){if(e)return pw.providerIds[e]},reset(){pw.providers={...py},pw.providerIds={...py}},resetChain(e){pw.providers[e]=void 0,pw.providerIds[e]=void 0}};var pM=e.i(924956),pN=e.i(481705),pv=e.i(945122);function pI(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}let pb=pI({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),pE=pI({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),pA=pI({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});pI({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),pI({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});let pD={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},pC={getMethodsByChainNamespace:e=>pD[e]||[],createDefaultNamespace(e){return{methods:this.getMethodsByChainNamespace(e),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(e,t){if(!t)return{...e};let i={...e},r=new Set;if(t.methods&&Object.keys(t.methods).forEach(e=>r.add(e)),t.chains&&Object.keys(t.chains).forEach(e=>r.add(e)),t.events&&Object.keys(t.events).forEach(e=>r.add(e)),t.rpcMap&&Object.keys(t.rpcMap).forEach(e=>{let[t]=e.split(":");t&&r.add(t)}),r.forEach(e=>{i[e]||(i[e]=this.createDefaultNamespace(e))}),t.methods&&Object.entries(t.methods).forEach(([e,t])=>{i[e]&&(i[e].methods=t)}),t.chains&&Object.entries(t.chains).forEach(([e,t])=>{i[e]&&(i[e].chains=t)}),t.events&&Object.entries(t.events).forEach(([e,t])=>{i[e]&&(i[e].events=t)}),t.rpcMap){let e=new Set;Object.entries(t.rpcMap).forEach(([t,r])=>{let[s,n]=t.split(":");s&&n&&i[s]&&(i[s].rpcMap||(i[s].rpcMap={}),e.has(s)||(i[s].rpcMap={},e.add(s)),i[s].rpcMap[n]=r)})}return i},createNamespaces(e,t){let i=e.reduce((e,t)=>{let{id:i,chainNamespace:r,rpcUrls:s}=t,n=s.default.http[0];e[r]||(e[r]=this.createDefaultNamespace(r));let a=`${r}:${i}`,o=e[r];switch(o.chains.push(a),a){case pb.caipNetworkId:o.chains.push(pb.deprecatedCaipNetworkId);break;case pE.caipNetworkId:o.chains.push(pE.deprecatedCaipNetworkId)}return o?.rpcMap&&n&&(o.rpcMap[i]=n),e},{});return this.applyNamespaceOverrides(i,t)},resolveReownName:async e=>{let t=await d8.resolveName(e),i=Object.values(t?.addresses)||[];return i[0]?.address||!1},getChainsFromNamespaces:(e={})=>Object.values(e).flatMap(e=>Array.from(new Set([...e.chains||[],...e.accounts.map(e=>{let[t,i]=e.split(":");return`${t}:${i}`})]))),isSessionEventData:e=>"object"==typeof e&&null!==e&&"id"in e&&"topic"in e&&"params"in e&&"object"==typeof e.params&&null!==e.params&&"chainId"in e.params&&"event"in e.params&&"object"==typeof e.params.event&&null!==e.params.event};class pT{constructor({provider:e,caipNetworks:t,namespace:i}){this.id=d$.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT,this.name=pl[d$.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=pc[d$.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT],this.caipNetworks=t,this.provider=e,this.chain=i}get chains(){return this.caipNetworks}async connectWalletConnect(){if(!await this.authenticate()){let e=dK.OptionsController.state.universalProviderConfigOverride,t=pC.createNamespaces(this.caipNetworks,e);await this.provider.connect({optionalNamespaces:t})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){let e=this.chains.map(e=>e.caipNetworkId);return pv.SIWXUtil.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:pj})}}let pj=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class p_{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,e&&this.construct(e)}construct(e){this.caipNetworks=e.networks,this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.caipNetworks||[]}setAuthProvider(e){this.addConnector({id:d$.ConstantsUtil.CONNECTOR_ID.AUTH,type:"AUTH",name:d$.ConstantsUtil.CONNECTOR_NAMES.AUTH,provider:e,imageId:pc[d$.ConstantsUtil.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){let t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(e=>!t.has(e.id)&&(t.add(e.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){dQ.AccountController.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){let i=this.eventListeners.get(e);i&&i.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){let i=this.eventListeners.get(e);i&&i.forEach(e=>e(t))}async connectWalletConnect(e){let t=this.getWalletConnectConnector();return{clientId:(await t.connectWalletConnect()).clientId}}async switchNetwork(e){let{caipNetwork:t,providerType:i}=e;if(!e.provider)return;let r="provider"in e.provider?e.provider.provider:e.provider;if("WALLET_CONNECT"===i)return void r.setDefaultChain(t.caipNetworkId);if(r&&"AUTH"===i){await r.switchNetwork(t.caipNetworkId);let e=await r.getUser({chainId:t.caipNetworkId,preferredAccountType:dK.OptionsController.state.defaultAccountTypes[t.chainNamespace]});this.emit("switchNetwork",e)}}getWalletConnectConnector(){let e=this.connectors.find(e=>e instanceof pT);if(!e)throw Error("WalletConnectConnector not found");return e}}class pS extends p_{setUniversalProvider(e){this.addConnector(new pT({provider:e,caipNetworks:this.caipNetworks||[],namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{let e=this.getWalletConnectConnector();await e.disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){let t=this.provider;return Promise.resolve({accounts:(t?.session?.namespaces?.[e]?.accounts?.map(e=>{let[,,t]=e.split(":");return t}).filter((e,t,i)=>i.indexOf(e)===t)||[]).map(t=>dW.CoreHelperUtil.createAccount(e,t,"bip122"===e?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&pN.ConstantsUtil.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(dQ.AccountController.state.balanceLoading&&e.chainId===dX.ChainController.state.activeCaipNetwork?.id)return{balance:dQ.AccountController.state.balance||"0.00",symbol:dQ.AccountController.state.balanceSymbol||""};let t=(await dQ.AccountController.fetchTokenBalance()).find(t=>t.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&t.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:t?.quantity.numeric||"0.00",symbol:t?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){let{provider:t,message:i,address:r}=e;if(!t)throw Error("UniversalAdapter:signMessage - provider is undefined");return{signature:dX.ChainController.state.activeCaipNetwork?.chainNamespace===d$.ConstantsUtil.CHAIN.SOLANA?(await t.request({method:"solana_signMessage",params:{message:t9.default.encode(new TextEncoder().encode(i)),pubkey:r}},dX.ChainController.state.activeCaipNetwork?.caipNetworkId)).signature:await t.request({method:"personal_sign",params:[i,r]},dX.ChainController.state.activeCaipNetwork?.caipNetworkId)}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){let{caipNetwork:t}=e,i=this.getWalletConnectConnector();if(t.chainNamespace===d$.ConstantsUtil.CHAIN.EVM)try{await i.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,pM.toHex)(t.id)}]})}catch(e){if(4902===e.code||32603===e.code||5e3===e.code||e?.data?.originalError?.code===4902)try{await i.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:(0,pM.toHex)(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch(e){throw Error("Chain is not supported")}}i.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){let e=this.connectors.find(e=>"WALLET_CONNECT"===e.type);return e?.provider}}class pO{constructor(e){this.hasSwitchedToPreferredAccountTypeOnConnect=!1,this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=e=>{if(e){let t=dX.ChainController.getNetworkData(e)?.caipNetwork;return t||dX.ChainController.getRequestedCaipNetworks(e).filter(t=>t.chainNamespace===e)?.[0]}return dX.ChainController.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{let e=this.getCaipNetwork();if(e)return e.id},this.getCaipNetworks=e=>dX.ChainController.getRequestedCaipNetworks(e),this.getActiveChainNamespace=()=>dX.ChainController.state.activeChain,this.setRequestedCaipNetworks=(e,t)=>{dX.ChainController.setRequestedCaipNetworks(e,t)},this.getApprovedCaipNetworkIds=()=>dX.ChainController.getAllApprovedCaipNetworkIds(),this.getCaipAddress=e=>dX.ChainController.state.activeChain!==e&&e?dX.ChainController.getAccountProp("caipAddress",e):dX.ChainController.state.activeCaipAddress,this.setClientId=e=>{dJ.BlockchainApiController.setClientId(e)},this.getProvider=e=>pm.getProvider(e),this.getProviderType=e=>pm.getProviderId(e),this.getPreferredAccountType=()=>dQ.AccountController.state.preferredAccountType,this.setCaipAddress=(e,t)=>{dQ.AccountController.setCaipAddress(e,t)},this.setBalance=(e,t,i)=>{dQ.AccountController.setBalance(e,t,i)},this.setProfileName=(e,t)=>{dQ.AccountController.setProfileName(e,t)},this.setProfileImage=(e,t)=>{dQ.AccountController.setProfileImage(e,t)},this.setUser=(e,t)=>{dQ.AccountController.setUser(e,t),dK.OptionsController.state.enableEmbedded&&d9.ModalController.close()},this.resetAccount=e=>{dQ.AccountController.resetAccount(e)},this.setCaipNetwork=e=>{dX.ChainController.setActiveCaipNetwork(e)},this.setCaipNetworkOfNamespace=(e,t)=>{dX.ChainController.setChainNetworkData(t,{caipNetwork:e})},this.setAllAccounts=(e,t)=>{dQ.AccountController.setAllAccounts(e,t),dK.OptionsController.setHasMultipleAddresses(e?.length>1)},this.setStatus=(e,t)=>{dQ.AccountController.setStatus(e,t),dq.ConnectorController.isConnected()?d2.StorageUtil.setConnectionStatus("connected"):d2.StorageUtil.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=e=>dX.ChainController.getAccountProp("address",e),this.setConnectors=e=>{let t=[...dq.ConnectorController.getConnectors(),...e];dq.ConnectorController.setConnectors(t)},this.fetchIdentity=e=>dJ.BlockchainApiController.fetchIdentity(e),this.getReownName=e=>d8.getNamesForAddress(e),this.getConnectors=()=>dq.ConnectorController.getConnectors(),this.getConnectorImage=e=>dZ.AssetUtil.getConnectorImage(e),this.setConnectedWalletInfo=(e,t)=>{let i=pm.getProviderId(t),r=e?{...e,type:i}:void 0;dQ.AccountController.setConnectedWalletInfo(r,t)},this.getIsConnectedState=()=>!!dX.ChainController.state.activeCaipAddress,this.addAddressLabel=(e,t,i)=>{dQ.AccountController.addAddressLabel(e,t,i)},this.removeAddressLabel=(e,t)=>{dQ.AccountController.removeAddressLabel(e,t)},this.getAddress=e=>dX.ChainController.state.activeChain!==e&&e?dX.ChainController.getAccountProp("address",e):dQ.AccountController.state.address,this.setApprovedCaipNetworksData=e=>dX.ChainController.setApprovedCaipNetworksData(e),this.resetNetwork=e=>{dX.ChainController.resetNetwork(e)},this.addConnector=e=>{dq.ConnectorController.addConnector(e)},this.resetWcConnection=()=>{dB.ConnectionController.resetWcConnection()},this.setAddressExplorerUrl=(e,t)=>{dQ.AccountController.setAddressExplorerUrl(e,t)},this.setSmartAccountDeployed=(e,t)=>{dQ.AccountController.setSmartAccountDeployed(e,t)},this.setSmartAccountEnabledNetworks=(e,t)=>{dX.ChainController.setSmartAccountEnabledNetworks(e,t)},this.setPreferredAccountType=(e,t)=>{dQ.AccountController.setPreferredAccountType(e,t)},this.setEIP6963Enabled=e=>{dK.OptionsController.setEIP6963Enabled(e)},this.handleUnsafeRPCRequest=()=>{this.isOpen()?this.isTransactionStackEmpty()||this.redirect("ApproveTransaction"):this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=[...new Set(this.caipNetworks?.map(e=>e.chainNamespace))],this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e),this.sendInitializeEvent(e)}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),await this.syncExistingConnection(),d7.PublicStateController.set({initialized:!0})}sendInitializeEvent(e){let{...t}=e;delete t.adapters,d6.EventsController.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(e=>e.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&pt.ThemeController.setThemeMode(e.themeMode),e.themeVariables&&pt.ThemeController.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw Error("ConnectionControllerClient and NetworkControllerClient must be set");dX.ChainController.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});let t=this.getDefaultNetwork();t&&dX.ChainController.setActiveCaipNetwork(t)}initializeConnectionController(e){dB.ConnectionController.setWcBasic(e.basic??!1)}initializeConnectorController(){dq.ConnectorController.initialize(this.chainNamespaces)}initializeOptionsController(e){dK.OptionsController.setDebug(!1!==e.debug),dK.OptionsController.setEnableWalletConnect(!1!==e.enableWalletConnect),dK.OptionsController.setEnableWalletGuide(!1!==e.enableWalletGuide),dK.OptionsController.setEnableWallets(!1!==e.enableWallets),dK.OptionsController.setEIP6963Enabled(!1!==e.enableEIP6963),dK.OptionsController.setEnableNetworkSwitch(!1!==e.enableNetworkSwitch),dK.OptionsController.setEnableAuthLogger(!1!==e.enableAuthLogger),dK.OptionsController.setCustomRpcUrls(e.customRpcUrls),dK.OptionsController.setSdkVersion(e.sdkVersion),dK.OptionsController.setProjectId(e.projectId),dK.OptionsController.setEnableEmbedded(e.enableEmbedded),dK.OptionsController.setAllWallets(e.allWallets),dK.OptionsController.setIncludeWalletIds(e.includeWalletIds),dK.OptionsController.setExcludeWalletIds(e.excludeWalletIds),dK.OptionsController.setFeaturedWalletIds(e.featuredWalletIds),dK.OptionsController.setTokens(e.tokens),dK.OptionsController.setTermsConditionsUrl(e.termsConditionsUrl),dK.OptionsController.setPrivacyPolicyUrl(e.privacyPolicyUrl),dK.OptionsController.setCustomWallets(e.customWallets),dK.OptionsController.setFeatures(e.features),dK.OptionsController.setAllowUnsupportedChain(e.allowUnsupportedChain),dK.OptionsController.setDefaultAccountTypes(e.defaultAccountTypes),dK.OptionsController.setUniversalProviderConfigOverride(e.universalProviderConfigOverride);let t=this.getDefaultMetaData();if(!e.metadata&&t&&(e.metadata=t),dK.OptionsController.setMetadata(e.metadata),dK.OptionsController.setDisableAppend(e.disableAppend),dK.OptionsController.setEnableEmbedded(e.enableEmbedded),dK.OptionsController.setSIWX(e.siwx),!e.projectId)return void dF.AlertController.open(pp.PROJECT_ID_NOT_CONFIGURED,"error");if(e.adapters?.find(e=>e.namespace===d$.ConstantsUtil.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw Error("Cannot set both `siweConfig` and `siwx` options");dK.OptionsController.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return"undefined"!=typeof window&&"undefined"!=typeof document?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){let t=this.getActiveChainNamespace();if(t){let i=pu.getUnsupportedNetwork(`${t}:${e}`);dX.ChainController.setActiveCaipNetwork(i)}}getDefaultNetwork(){return pu.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return pu.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return pu.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){let t=e.networks.find(t=>t.id===e.defaultNetwork?.id);return t?pu.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{let e=dX.ChainController.state.activeChain,t=this.getAdapter(e),i=this.getCaipNetwork(e)?.id;if(!t)throw Error("Adapter not found");let r=await t.connectWalletConnect(i);this.close(),this.setClientId(r?.clientId||null),d2.StorageUtil.setConnectedNamespaces([...dX.ChainController.state.chains.keys()]),this.chainNamespaces.forEach(e=>{dq.ConnectorController.setConnectorId(pa.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT,e)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:i,provider:r,chain:s,caipNetwork:n})=>{let a=dX.ChainController.state.activeChain,o=s||a,c=this.getAdapter(o);if(s&&s!==a&&!n){let e=this.caipNetworks?.find(e=>e.chainNamespace===s);e&&this.setCaipNetwork(e)}if(!c)throw Error("Adapter not found");let l=this.getCaipNetwork(o),h=await c.connect({id:e,info:t,type:i,provider:r,chainId:n?.id||l?.id,rpcUrl:n?.rpcUrls?.default?.http?.[0]||l?.rpcUrls?.default?.http?.[0]});if(!h)return;d2.StorageUtil.addConnectedNamespace(o),this.syncProvider({...h,chainNamespace:o}),await this.syncAccount({...h,chainNamespace:o});let{accounts:u}=await c.getAccounts({namespace:o,id:e});this.setAllAccounts(u,o)},reconnectExternal:async({id:e,info:t,type:i,provider:r})=>{let s=dX.ChainController.state.activeChain,n=this.getAdapter(s);n?.reconnect&&(await n?.reconnect({id:e,info:t,type:i,provider:r,chainId:this.getCaipNetwork()?.id}),d2.StorageUtil.addConnectedNamespace(s))},disconnect:async e=>{let t=e||dX.ChainController.state.activeChain,i=this.getAdapter(t),r=pm.getProvider(t),s=pm.getProviderId(t);await i?.disconnect({provider:r,providerType:s}),d2.StorageUtil.removeConnectedNamespace(t),pm.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.hasSwitchedToPreferredAccountTypeOnConnect=!1},checkInstalled:e=>e?e.some(e=>!!window.ethereum?.[String(e)]):!!window.ethereum,signMessage:async e=>{let t=this.getAdapter(dX.ChainController.state.activeChain),i=await t?.signMessage({message:e,address:dQ.AccountController.state.address,provider:pm.getProvider(dX.ChainController.state.activeChain)});return i?.signature||""},sendTransaction:async e=>{if(e.chainNamespace===d$.ConstantsUtil.CHAIN.EVM){let t=this.getAdapter(dX.ChainController.state.activeChain),i=pm.getProvider(dX.ChainController.state.activeChain),r=await t?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:i});return r?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===d$.ConstantsUtil.CHAIN.EVM){let t=this.getAdapter(dX.ChainController.state.activeChain),i=pm.getProvider(dX.ChainController.state.activeChain),r=this.getCaipNetwork();if(!r)throw Error("CaipNetwork is undefined");let s=await t?.estimateGas({...e,provider:i,caipNetwork:r});return s?.gas||0n}return 0n},getEnsAvatar:async()=>{let e=this.getAdapter(dX.ChainController.state.activeChain),t=await e?.getProfile({address:dQ.AccountController.state.address,chainId:Number(this.getCaipNetwork()?.id)});return t?.profileImage||!1},getEnsAddress:async e=>{let t=this.getAdapter(dX.ChainController.state.activeChain),i=this.getCaipNetwork();if(!i)return!1;let r=await t?.getEnsAddress({name:e,caipNetwork:i});return r?.address||!1},writeContract:async e=>{let t=this.getAdapter(dX.ChainController.state.activeChain),i=this.getCaipNetwork(),r=this.getCaipAddress(),s=pm.getProvider(dX.ChainController.state.activeChain);if(!i||!r)throw Error("CaipNetwork or CaipAddress is undefined");let n=await t?.writeContract({...e,caipNetwork:i,provider:s,caipAddress:r});return n?.hash},parseUnits:(e,t)=>{let i=this.getAdapter(dX.ChainController.state.activeChain);return i?.parseUnits({value:e,decimals:t})??0n},formatUnits:(e,t)=>{let i=this.getAdapter(dX.ChainController.state.activeChain);return i?.formatUnits({value:e,decimals:t})??"0"},getCapabilities:async e=>{let t=this.getAdapter(dX.ChainController.state.activeChain);return await t?.getCapabilities(e)},grantPermissions:async e=>{let t=this.getAdapter(dX.ChainController.state.activeChain);return await t?.grantPermissions(e)},revokePermissions:async e=>{let t=this.getAdapter(dX.ChainController.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{let t=this.getAdapter(dX.ChainController.state.activeChain);return await t?.walletGetAssets(e)??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},dB.ConnectionController.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(pm.getProviderId(dX.ChainController.state.activeChain)===pa.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT){let e=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(e)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;let t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){let i=pm.getProvider(t),r=pm.getProviderId(t);if(e.chainNamespace===dX.ChainController.state.activeChain){let s=this.getAdapter(t);await s?.switchNetwork({caipNetwork:e,provider:i,providerType:r})}else if(this.setCaipNetwork(e),r===pa.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{let i=this.getAddressByChainNamespace(t);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(e=>Array.from(new Set([...e.chains||[],...e.accounts.map(e=>{let{chainId:t,chainNamespace:i}=dG.parseCaipAddress(e);return`${i}:${t}`})])))}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,i)=>{let r=e?.find(e=>e.namespace===i);return r?(t[i]=r,t[i].namespace=i,t[i].construct({namespace:i,projectId:this.options?.projectId,networks:this.caipNetworks})):t[i]=new pS({namespace:i,networks:this.caipNetworks}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){let t=this.getAdapter(e);t?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){let t=this.getAdapter(e);if(!t)return;let i=d2.StorageUtil.getConnectionStatus();"connected"===i?this.setStatus("connecting",e):("disconnected"===i&&d2.StorageUtil.clearAddressCache(),this.setStatus(i,e)),t.on("switchNetwork",({address:t,chainId:i})=>{let r=this.caipNetworks?.find(e=>e.id===i||e.caipNetworkId===i),s=dX.ChainController.state.activeChain===e,n=dX.ChainController.getAccountProp("address",e);if(r){let r=s&&t?t:n;r&&this.syncAccount({address:r,chainId:i,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),t.on("disconnect",this.disconnect.bind(this,e)),t.on("pendingTransactions",()=>{let e=dQ.AccountController.state.address,t=dX.ChainController.state.activeCaipNetwork;e&&t?.id&&this.updateNativeBalance(e,t.id,t.chainNamespace)}),t.on("accountChanged",({address:t,chainId:i})=>{let r=dX.ChainController.state.activeChain===e;r&&i?this.syncAccount({address:t,chainId:i,chainNamespace:e}):r&&dX.ChainController.state.activeCaipNetwork?.id?this.syncAccount({address:t,chainId:dX.ChainController.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(t,i,e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{let t=dq.ConnectorController.getConnectorId(e);switch(this.setStatus("connecting",e),t){case d$.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case d$.ConstantsUtil.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){let t=this.getAdapter(e),i=dq.ConnectorController.getConnectorId(e),r=this.getCaipNetwork(e),s=dq.ConnectorController.getConnectors(e).find(e=>e.id===i);try{if(!t||!s)throw Error(`Adapter or connector not found for namespace ${e}`);if(!r?.id)throw Error("CaipNetwork not found");let i=await t?.syncConnection({namespace:e,id:s.id,chainId:r.id,rpcUrl:r?.rpcUrls?.default?.http?.[0]});if(i){let r=await t?.getAccounts({namespace:e,id:s.id});r&&r.accounts.length>0?this.setAllAccounts(r.accounts,e):this.setAllAccounts([dW.CoreHelperUtil.createAccount(e,i.address,"eoa")],e),this.syncProvider({...i,chainNamespace:e}),await this.syncAccount({...i,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch(t){this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){let e=this.chainNamespaces.map(async e=>{let t=this.getAdapter(e),i=this.universalProvider?.session?.namespaces?.[e]?.accounts||[],r=dX.ChainController.state.activeCaipNetwork?.id,s=i.find(e=>{let{chainId:t}=dG.parseCaipAddress(e);return t===r?.toString()})||i[0];if(s){let i=dG.validateCaipAddress(s),{chainId:r,address:n}=dG.parseCaipAddress(i);if(pm.setProviderId(e,pa.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&dX.ChainController.state.activeCaipNetwork&&t?.namespace!==d$.ConstantsUtil.CHAIN.EVM){let i=t?.getWalletConnectProvider({caipNetworks:this.caipNetworks,provider:this.universalProvider,activeCaipNetwork:dX.ChainController.state.activeCaipNetwork});pm.setProvider(e,i)}else pm.setProvider(e,this.universalProvider);dq.ConnectorController.setConnectorId(d$.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT,e),d2.StorageUtil.addConnectedNamespace(e),this.syncWalletConnectAccounts(e),await this.syncAccount({address:n,chainId:r,chainNamespace:e})}else this.setStatus("disconnected",e);await dX.ChainController.setApprovedCaipNetworksData(e)});await Promise.all(e)}syncWalletConnectAccounts(e){let t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(e=>{let{address:t}=dG.parseCaipAddress(e);return t}).filter((e,t,i)=>i.indexOf(e)===t);t&&this.setAllAccounts(t.map(t=>dW.CoreHelperUtil.createAccount(e,t,"bip122"===e?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:i,chainNamespace:r}){pm.setProviderId(r,e),pm.setProvider(r,t),dq.ConnectorController.setConnectorId(i,r)}async syncAccount(e){let t=e.chainNamespace===dX.ChainController.state.activeChain,i=dX.ChainController.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:r,chainId:s,chainNamespace:n}=e,{chainId:a}=d2.StorageUtil.getActiveNetworkProps(),o=s||a,c=dX.ChainController.state.activeCaipNetwork?.name===d$.ConstantsUtil.UNSUPPORTED_NETWORK_NAME,l=dX.ChainController.getNetworkProp("supportsAllNetworks",n);if(this.setStatus("connected",n),(!c||l)&&o){let e=this.caipNetworks?.find(e=>e.id.toString()===o.toString()),s=this.caipNetworks?.find(e=>e.chainNamespace===n);if(!l&&!e&&!s){let t=this.getApprovedCaipNetworkIds()||[],i=t.find(e=>dG.parseCaipNetworkId(e)?.chainId===o.toString()),r=t.find(e=>dG.parseCaipNetworkId(e)?.chainNamespace===n);e=this.caipNetworks?.find(e=>e.caipNetworkId===i),s=this.caipNetworks?.find(e=>e.caipNetworkId===r||"deprecatedCaipNetworkId"in e&&e.deprecatedCaipNetworkId===r)}let a=e||s;a?.chainNamespace===dX.ChainController.state.activeChain?dK.OptionsController.state.enableNetworkSwitch&&!dK.OptionsController.state.allowUnsupportedChain&&dX.ChainController.state.activeCaipNetwork?.name===d$.ConstantsUtil.UNSUPPORTED_NETWORK_NAME?dX.ChainController.showUnsupportedChainUI():this.setCaipNetwork(a):!t&&i&&this.setCaipNetworkOfNamespace(i,n),this.syncConnectedWalletInfo(n),pg.HelpersUtil.isLowerCaseMatch(r,dQ.AccountController.state.address)||this.syncAccountInfo(r,a?.id,n),t?await this.syncBalance({address:r,chainId:a?.id,chainNamespace:n}):await this.syncBalance({address:r,chainId:i?.id,chainNamespace:n})}}async syncAccountInfo(e,t,i){let r=this.getCaipAddress(i),s=t||r?.split(":")[1];if(!s)return;let n=`${i}:${s}:${e}`;this.setCaipAddress(n,i),await this.syncIdentity({address:e,chainId:s,chainNamespace:i})}async syncReownName(e,t){try{let i=await this.getReownName(e);if(i[0]){let e=i[0];this.setProfileName(e.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){let t=dq.ConnectorController.getConnectorId(e),i=pm.getProviderId(e);if(i===pa.ConstantsUtil.CONNECTOR_TYPE_ANNOUNCED||i===pa.ConstantsUtil.CONNECTOR_TYPE_INJECTED){if(t){let i=this.getConnectors().find(e=>e.id===t);if(i){let{info:t,name:r,imageUrl:s}=i,n=s||this.getConnectorImage(i);this.setConnectedWalletInfo({name:r,icon:n,...t},e)}}}else if(i===pa.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT){let t=pm.getProvider(e);t?.session&&this.setConnectedWalletInfo({...t.session.peer.metadata,name:t.session.peer.metadata.name,icon:t.session.peer.metadata.icons?.[0]},e)}else if(t)if(t===d$.ConstantsUtil.CONNECTOR_ID.COINBASE){let t=this.getConnectors().find(e=>e.id===d$.ConstantsUtil.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(t)},e)}else this.setConnectedWalletInfo({name:t},e)}async syncBalance(e){dV.NetworkUtil.getNetworksByNamespace(this.caipNetworks,e.chainNamespace).find(t=>t.id.toString()===e.chainId?.toString())&&e.chainId&&await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,t,i){let r=this.getAdapter(i);if(r){let s=await r.getBalance({address:e,chainId:t,caipNetwork:this.getCaipNetwork(i),tokens:this.options.tokens});this.setBalance(s.balance,s.symbol,i)}}async initializeUniversalAdapter(){let e=pf.createLogger((e,...t)=>{e&&this.handleAlertError(e),console.error(...t)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};dK.OptionsController.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await dH.default.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{dB.ConnectionController.setUri(e)}),this.universalProvider.on("connect",dB.ConnectionController.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),dB.ConnectionController.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{let t=this.caipNetworks?.find(t=>t.id==e),i=this.getCaipNetwork();t?i?.id!==t?.id&&this.setCaipNetwork(t):this.setUnsupportedNetwork(e)}),this.universalProvider.on("session_event",e=>{if(pC.isSessionEventData(e)){let{name:t,data:i}=e.params.event;"accountsChanged"===t&&Array.isArray(i)&&dW.CoreHelperUtil.isCaipAddress(i[0])&&this.syncAccount(dG.parseCaipAddress(i[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&dW.CoreHelperUtil.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){d6.EventsController.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){let[t,i]=Object.entries(pd).find(([,{message:t}])=>e.message.includes(t))??[],{message:r,alertErrorKey:s}=i??{};if(t&&r&&!this.reportedAlertErrors[t]){let e=pp[s];e&&(dF.AlertController.open(e,"error"),this.reportedAlertErrors[t]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;let t=e.namespace;t&&(this.createClients(),e.namespace=t,e.construct({namespace:t,projectId:this.options?.projectId,networks:this.caipNetworks}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=e))}async open(e){await this.injectModalUi(),e?.uri&&dB.ConnectionController.setUri(e.uri),await d9.ModalController.open(e)}async close(){await this.injectModalUi(),d9.ModalController.close()}setLoading(e,t){d9.ModalController.setLoading(e,t)}async disconnect(e){await dB.ConnectionController.disconnect(e)}getError(){return""}getChainId(){return dX.ChainController.state.activeCaipNetwork?.id}async switchNetwork(e){let t=this.caipNetworks?.find(t=>t.id===e.id);t?await dX.ChainController.switchActiveNetwork(t):dF.AlertController.open(pp.SWITCH_NETWORK_NOT_FOUND,"error")}getWalletProvider(){return dX.ChainController.state.activeChain?pm.state.providers[dX.ChainController.state.activeChain]:null}getWalletProviderType(){return pm.getProviderId(dX.ChainController.state.activeChain)}subscribeProviders(e){return pm.subscribeProviders(e)}getThemeMode(){return pt.ThemeController.state.themeMode}getThemeVariables(){return pt.ThemeController.state.themeVariables}setThemeMode(e){pt.ThemeController.setThemeMode(e),(0,pr.setColorTheme)(pt.ThemeController.state.themeMode)}setTermsConditionsUrl(e){dK.OptionsController.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){dK.OptionsController.setPrivacyPolicyUrl(e)}setThemeVariables(e){pt.ThemeController.setThemeVariables(e),(0,pr.setThemeVariables)(pt.ThemeController.state.themeVariables)}subscribeTheme(e){return pt.ThemeController.subscribe(e)}getWalletInfo(){return dQ.AccountController.state.connectedWalletInfo}getAccount(e){let t=dq.ConnectorController.getAuthConnector(e),i=dX.ChainController.getAccountData(e);if(i)return{allAccounts:i.allAccounts,caipAddress:i.caipAddress,address:dW.CoreHelperUtil.getPlainAddress(i.caipAddress),isConnected:!!i.caipAddress,status:i.status,embeddedWalletInfo:t?{user:i.user,authProvider:i.socialProvider||"email",accountType:i.preferredAccountType,isSmartAccountDeployed:!!i.smartAccountDeployed}:void 0}}subscribeAccount(e,t){let i=()=>{let i=this.getAccount(t);i&&e(i)};t?dX.ChainController.subscribeChainProp("accountState",i,t):dX.ChainController.subscribe(i),dq.ConnectorController.subscribe(i)}subscribeNetwork(e){return dX.ChainController.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e){return dQ.AccountController.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){dQ.AccountController.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){dX.ChainController.subscribeKey("activeCaipNetwork",e)}getState(){return d7.PublicStateController.state}subscribeState(e){return d7.PublicStateController.subscribe(e)}showErrorMessage(e){pe.SnackController.showError(e)}showSuccessMessage(e){pe.SnackController.showSuccess(e)}getEvent(){return{...d6.EventsController.state}}subscribeEvents(e){return d6.EventsController.subscribe(e)}replace(e){d3.RouterController.replace(e)}redirect(e){d3.RouterController.push(e)}popTransactionStack(e){d3.RouterController.popTransactionStack(e)}isOpen(){return d9.ModalController.state.open}isTransactionStackEmpty(){return 0===d3.RouterController.state.transactionStack.length}isTransactionShouldReplaceView(){return d3.RouterController.state.transactionStack[d3.RouterController.state.transactionStack.length-1]?.replace}static getInstance(){return this.instance}updateFeatures(e){dK.OptionsController.setFeatures(e)}updateOptions(e){let t={...dK.OptionsController.state||{},...e};dK.OptionsController.setOptions(t)}setConnectMethodsOrder(e){dK.OptionsController.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){dK.OptionsController.setWalletFeaturesOrder(e)}setCollapseWallets(e){dK.OptionsController.setCollapseWallets(e)}setSocialsOrder(e){dK.OptionsController.setSocialsOrder(e)}getConnectMethodsOrder(){return pi.WalletUtil.getConnectOrderMethod(dK.OptionsController.state.features,dq.ConnectorController.getConnectors())}removeAdapter(e){let t=this.getIsConnectedState(),i=this.getAdapter(e);if(!i||!this.chainAdapters||t)return;let r=this.caipNetworks?.filter(t=>t.chainNamespace!==e);dX.ChainController.removeAdapter(e),dq.ConnectorController.removeAdapter(e),this.chainNamespaces=this.chainNamespaces.filter(t=>t!==e),this.caipNetworks=r,i.removeAllEventListeners(),Reflect.deleteProperty(this.chainAdapters,e)}addAdapter(e,t){let i=e.namespace;if(!this.connectionControllerClient||!this.networkControllerClient||!this.chainAdapters||!i)return;let r=this.extendCaipNetworks({...this.options,networks:t});this.caipNetworks=[...this.caipNetworks||[],...r],this.createAdapter(e),this.initChainAdapter(i),dX.ChainController.addAdapter(e,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient},r)}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw Error(`Adapter for namespace ${e} doesn't exist`);let i=this.extendCaipNetwork(t,this.options);dX.ChainController.addNetwork(i),this.caipNetworks&&!this.caipNetworks?.find(e=>e.id===i.id)&&this.caipNetworks.push(i)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw Error(`Adapter for namespace ${e} doesn't exist`);if(!this.caipNetworks?.find(e=>e.id===t))throw Error(`Network with ID ${t} not found`);if(!this.caipNetworks)return;let i=this.caipNetworks.filter(i=>i.chainNamespace===e&&i.id!==t);if(!i?.length)throw Error("Cannot remove last network for a namespace");dX.ChainController.removeNetwork(e,t),this.caipNetworks=[...i]}}let px=!1;class pz extends pO{async open(e){dq.ConnectorController.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&dB.ConnectionController.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!px&&dW.CoreHelperUtil.isClient()){if(await e.A(868653),await e.A(624671),!document.querySelector("w3m-modal")){let e=document.createElement("w3m-modal");dK.OptionsController.state.disableAppend||dK.OptionsController.state.enableEmbedded||document.body.insertAdjacentElement("beforeend",e)}px=!0}}}class pL extends Error{constructor(){super(),Object.setPrototypeOf(this,pL.prototype)}}class pP extends Error{constructor(e){super(`WalletConnect Adapter - Method ${e} is not supported by the wallet`),this.name="WalletConnectFeatureNotSupportedError"}}let pk={mainnet:`You are using a deprecated chain ID for Solana Mainnet, please use ${rm} instead.`,devnet:`You are using a deprecated chain ID for Solana Devnet, please use ${rM} instead.`,wallet:"The connected wallet is using a deprecated chain ID for Solana. Please, contact them to upgrade. You can learn more at https://github.com/ChainAgnostic/namespaces/blob/main/solana/caip10.md#chain-ids"};function pU(e,t){let i=e.namespaces.solana?.accounts.map(e=>`solana:${e.split(":")[1]}`);if(t===rm)return i?.find(e=>e===rm)?rm:(console.warn(pk.wallet),rN);if(t===rM)return i?.find(e=>e===rM)?rM:(console.warn(pk.wallet),rv);throw Error("WalletConnect Solana Adapter: Unable to get a default chain from the session.")}class pR extends Error{constructor(){super("QR Code Modal was closed by user"),Object.setPrototypeOf(this,pR.prototype),this.name="QRCodeModalError"}}class pY{_UniversalProvider;_session;_modal;_projectId;_network;_ConnectQueueResolver;constructor(e){if(this.initClient(e.options),this._network=e.network,!e.options.projectId)throw Error("WalletConnect Adapter: Project ID is undefined");this._projectId=e.options.projectId}async connect(){var e;let t;if(this._UniversalProvider||await new Promise(e=>{this._ConnectQueueResolver=e}),!this._UniversalProvider)throw Error("WalletConnect Adapter - Universal Provider was undefined while calling 'connect()'");if(this._UniversalProvider.session){this._session=this._UniversalProvider.session;let e=pU(this._session,this._network);return this._network=e,this._UniversalProvider.setDefaultChain(e),{publicKey:this.publicKey}}await this.initModal();let i={optionalNamespaces:{solana:{chains:(t=[e=this._network],e===rm||e===rN?(t=[rm,rN],e===rN&&console.warn(pk.mainnet)):(e===rv||e===rM)&&(t=[rM,rv],rv&&console.warn(pk.devnet)),t),methods:[th.signTransaction,th.signMessage],events:[]}}};this._modal?.open();let r=new AbortController,s=r.signal;this._modal?.subscribeState(e=>{e.open||r.abort(new pR)});try{let e=await Promise.race([this._UniversalProvider?.connect(i),new Promise((e,t)=>{s.addEventListener("abort",()=>{t(s.reason)})})]);if(this._modal?.close(),this._session=e,!e)throw new tM;let t=pU(e,this._network);return this._network=t,this._UniversalProvider?.setDefaultChain(t),{publicKey:this.publicKey}}catch(e){throw this._modal?.close(),e}}async disconnect(){if(this._UniversalProvider?.session){if(await this.initModal(),!this._modal)throw Error("WalletConnect Adapter -Modal is undefined: unable to disconnect");await this.client.disconnect(),this._session=void 0}else throw new pL}get client(){if(this._UniversalProvider)return this._UniversalProvider;throw new pL}get session(){if(!this._session)throw new pL;return this._session}get publicKey(){if(this._UniversalProvider?.session&&this._session){let{address:e}=function(e){let[t,i,r]=e.split(":");return{namespace:t,reference:i,address:r}}(this._session?.namespaces.solana?.accounts[0]??"");return new tk.PublicKey(e)}throw new pL}async signTransaction(e){this.checkIfWalletSupportsMethod(th.signTransaction);let t=tx(e),i=t?{}:e,{signature:r,transaction:s}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:th.signTransaction,params:{...i,transaction:this.serialize(e)}}});return s?this.deserialize(s,t):(e.addSignature(this.publicKey,i2.Buffer.from(t9.default.decode(r))),e)}async signMessage(e){this.checkIfWalletSupportsMethod(th.signMessage);let{signature:t}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:th.signMessage,params:{pubkey:this.publicKey.toString(),message:t9.default.encode(e)}}});return t9.default.decode(t)}async signAndSendTransaction(e){this.checkIfWalletSupportsMethod(th.signAndSendTransaction);let{signature:t}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:th.signAndSendTransaction,params:{transaction:this.serialize(e)}}});return t}async signAllTransactions(e){try{this.checkIfWalletSupportsMethod(th.signAllTransactions);let t=e.map(e=>this.serialize(e)),{transactions:i}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:th.signAllTransactions,params:{transactions:t}}});return e.map((e,t)=>tx(e)?this.deserialize(i[t]??"",!0):this.deserialize(i[t]??""))}catch(t){if(t instanceof pP){let t=e.map(e=>this.signTransaction(e));return await Promise.all(t)}throw t}}async initClient(e){let t=await dY.init(e);this._UniversalProvider=t,this._ConnectQueueResolver&&this._ConnectQueueResolver(!0)}async initModal(){if(!this._modal){if(!this._UniversalProvider)throw Error("WalletConnect Adapter - cannot init modal when Universal Provider is undefined");this._modal=new pz({...{projectId:this._projectId,universalProvider:this._UniversalProvider,networks:[pb,pE,pA],manualWCControl:!0},basic:!0,sdkVersion:"html-core-1.7.2"})}}serialize(e){return i2.Buffer.from(e.serialize({verifySignatures:!1})).toString("base64")}deserialize(e,t=!1){return t?tk.VersionedTransaction.deserialize(i2.Buffer.from(e,"base64")):tk.Transaction.from(i2.Buffer.from(e,"base64"))}checkIfWalletSupportsMethod(e){if(!this.session.namespaces.solana?.methods.includes(e))throw new pP(e)}}class pQ extends tz{name="WalletConnect";url="https://walletconnect.org";icon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4NSIgdmlld0JveD0iMCAwIDMwMCAxODUiIHdpZHRoPSIzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYxLjQzODU0MjkgMzYuMjU2MjYxMmM0OC45MTEyMjQxLTQ3Ljg4ODE2NjMgMTI4LjIxMTk4NzEtNDcuODg4MTY2MyAxNzcuMTIzMjA5MSAwbDUuODg2NTQ1IDUuNzYzNDE3NGMyLjQ0NTU2MSAyLjM5NDQwODEgMi40NDU1NjEgNi4yNzY1MTEyIDAgOC42NzA5MjA0bC0yMC4xMzY2OTUgMTkuNzE1NTAzYy0xLjIyMjc4MSAxLjE5NzIwNTEtMy4yMDUzIDEuMTk3MjA1MS00LjQyODA4MSAwbC04LjEwMDU4NC03LjkzMTE0NzljLTM0LjEyMTY5Mi0zMy40MDc5ODE3LTg5LjQ0Mzg4Ni0zMy40MDc5ODE3LTEyMy41NjU1Nzg4IDBsLTguNjc1MDU2MiA4LjQ5MzYwNTFjLTEuMjIyNzgxNiAxLjE5NzIwNDEtMy4yMDUzMDEgMS4xOTcyMDQxLTQuNDI4MDgwNiAwbC0yMC4xMzY2OTQ5LTE5LjcxNTUwMzFjLTIuNDQ1NTYxMi0yLjM5NDQwOTItMi40NDU1NjEyLTYuMjc2NTEyMiAwLTguNjcwOTIwNHptMjE4Ljc2Nzc5NjEgNDAuNzczNzQ0OSAxNy45MjE2OTcgMTcuNTQ2ODk3YzIuNDQ1NTQ5IDIuMzk0Mzk2OSAyLjQ0NTU2MyA2LjI3NjQ3NjkuMDAwMDMxIDguNjcwODg5OWwtODAuODEwMTcxIDc5LjEyMTEzNGMtMi40NDU1NDQgMi4zOTQ0MjYtNi40MTA1ODIgMi4zOTQ0NTMtOC44NTYxNi4wMDAwNjItLjAwMDAxLS4wMDAwMS0uMDAwMDIyLS4wMDAwMjItLjAwMDAzMi0uMDAwMDMybC01Ny4zNTQxNDMtNTYuMTU0NTcyYy0uNjExMzktLjU5ODYwMi0xLjYwMjY1LS41OTg2MDItMi4yMTQwNCAwLS4wMDAwMDQuMDAwMDA0LS4wMDAwMDcuMDAwMDA4LS4wMDAwMTEuMDAwMDExbC01Ny4zNTI5MjEyIDU2LjE1NDUzMWMtMi40NDU1MzY4IDIuMzk0NDMyLTYuNDEwNTc1NSAyLjM5NDQ3Mi04Ljg1NjE2MTIuMDAwMDg3LS4wMDAwMTQzLS4wMDAwMTQtLjAwMDAyOTYtLjAwMDAyOC0uMDAwMDQ0OS0uMDAwMDQ0bC04MC44MTI0MTk0My03OS4xMjIxODVjLTIuNDQ1NTYwMjEtMi4zOTQ0MDgtMi40NDU1NjAyMS02LjI3NjUxMTUgMC04LjY3MDkxOTdsMTcuOTIxNzI5NjMtMTcuNTQ2ODY3M2MyLjQ0NTU2MDItMi4zOTQ0MDgyIDYuNDEwNTk4OS0yLjM5NDQwODIgOC44NTYxNjAyIDBsNTcuMzU0OTc3NSA1Ni4xNTUzNTdjLjYxMTM5MDguNTk4NjAyIDEuNjAyNjQ5LjU5ODYwMiAyLjIxNDAzOTggMCAuMDAwMDA5Mi0uMDAwMDA5LjAwMDAxNzQtLjAwMDAxNy4wMDAwMjY1LS4wMDAwMjRsNTcuMzUyMTAzMS01Ni4xNTUzMzNjMi40NDU1MDUtMi4zOTQ0NjMzIDYuNDEwNTQ0LTIuMzk0NTUzMSA4Ljg1NjE2MS0uMDAwMi4wMDAwMzQuMDAwMDMzNi4wMDAwNjguMDAwMDY3My4wMDAxMDEuMDAwMTAxbDU3LjM1NDkwMiA1Ni4xNTU0MzJjLjYxMTM5LjU5ODYwMSAxLjYwMjY1LjU5ODYwMSAyLjIxNDA0IDBsNTcuMzUzOTc1LTU2LjE1NDMyNDljMi40NDU1NjEtMi4zOTQ0MDkyIDYuNDEwNTk5LTIuMzk0NDA5MiA4Ljg1NjE2IDB6IiBmaWxsPSIjM2I5OWZjIi8+PC9zdmc+";supportedTransactionVersions=new Set(["legacy",0]);_publicKey;_connecting;_wallet;_config;_readyState;_onDisconnect;constructor(e){super(),this._publicKey=null,this._connecting=!1,this._config=e,this._wallet=null,this._readyState="undefined"==typeof window?L.Unsupported:L.Loadable,this._onDisconnect=this.disconnect.bind(this)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==L.Loadable)throw new ty;this._connecting=!0,this._wallet=new pY({network:this._config.network===P.Mainnet?tl.Mainnet:tl.Devnet,options:this._config.options});let{publicKey:e}=await this._wallet.connect();this._publicKey=e,this.emit("connect",e),this._wallet.client.on("session_delete",this._onDisconnect)}catch(e){if("QRCodeModalError"===e.constructor.name||e instanceof Error&&"QRCodeModalError"===e.name)throw new tj;throw this._connecting=!1,e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){e.client.off("session_delete",this._onDisconnect),this._publicKey=null;try{e.client.session&&await e.disconnect()}catch(e){console.error("WalletConnectWalletAdapter: disconnect error",e),this.emit("error",new tv(e?.message,e))}}this.emit("disconnect")}async signTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signTransaction(e)}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signMessage(e)}catch(e){throw new tC(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAndSendTransaction(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAndSendTransaction(e)}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new tE;try{return await t.signAllTransactions(e)}catch(e){throw new tD(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}var pB=e.i(768820),pq=e.i(536925);let pW="https://pump-fe.helius-rpc.com?api-key=1b8db865-a5a1-4535-9aec-01061440523b";e.s(["SolanaWalletProvider",0,({children:e})=>{let t=(0,pq.useIsClient)(),i=P.Mainnet,r=(0,iW.useMemo)(()=>[new rs,new rg,new rw,new ri,new rr({endpoint:pW}),new ry,new i5({endpoint:pW}),new rf({endpoint:pW}),new i3({endpoint:pW}),new rn({endpoint:pW}),new i1({endpoint:pW}),new i0({endpoint:pW}),new i4,new i8,new pQ({network:i,options:{relayUrl:"wss://relay.walletconnect.com",projectId:"7f7fa697ad2bb1eeb36edbbc13bd73d7",metadata:{name:"Pump",description:"Launch a coin that is instantly tradable without having to seed liquidity. Deploy a coin on Solana for under 2$ in one click.",url:"https://pump.fun",icons:["https://pump.fun/_next/image?url=%2Flogo.png&w=64&q=75"]}}})],[]);return(0,iW.useEffect)(()=>{if(tO()&&pB.isMobile){let e=setInterval(()=>{localStorage.removeItem("walletName")},1e3);return()=>clearInterval(e)}},[t]),(0,td.jsx)(tp.GlobalProviders,{endpoint:pW,config:tp.DEFAULT_CONFIG,children:(0,td.jsx)(iX,{wallets:r,autoConnect:!0,children:e})})}],828443)},216648,e=>{"use strict";var t=e.i(281675);function i(){return(0,t.useEffect)(()=>{console.log(" AnalyticsInitializer component mounted"),e.A(618250).then(()=>{console.log(" Analytics module loaded successfully")}).catch(e=>{console.error(" Failed to load analytics module:",e)})},[]),null}e.s(["default",()=>i])},704631,e=>{"use strict";let t;e.i(171580);var i=e.i(897972),r=e.i(910528);e.i(346243);var s=e.i(838644),n=e.i(747868),a=e.i(162179),o=e.i(373200),c=e.i(102213),l=e.i(316658),h=e.i(179889);function u(e,t,i){let r,s=0,n=[],a=!0,o=0,c=[],{stop:u}=(0,l.addEventListener)(e,t,"message",({data:e})=>{if("wrote"!==e.type||e.streamId!==i)return;let t=c[0];t&&(t.id===e.id?(c.shift(),s+=e.additionalBytesCount,n.push(e.result),r=e.trailer,t.writeCallback?t.writeCallback(e.result.byteLength):t.finishCallback&&t.finishCallback()):t.id<e.id&&u())});function d(){let e=0===n.length?new Uint8Array(0):(0,h.concatBuffers)(n.concat(r)),t={rawBytesCount:s,output:e,outputBytesCount:e.byteLength,encoding:"deflate"};return s=0,n=[],t}function p(){a||(t.postMessage({action:"reset",streamId:i}),a=!0)}return{isAsync:!0,get isEmpty(){return a},write(e,r){t.postMessage({action:"write",id:o,data:e,streamId:i}),c.push({id:o,writeCallback:r,data:e}),a=!1,o+=1},finish(e){p(),c.length?(c.forEach(e=>{delete e.writeCallback}),c[c.length-1].finishCallback=()=>e(d())):e(d())},finishSync(){p();let e=c.map(e=>e.data).join("");return c.length=0,{...d(),pendingData:e}},estimateEncodedBytesCount:e=>e.length/8,stop(){u()}}}var d=e.i(512535),p=e.i(82042),g=e.i(49223),f=e.i(175776);function y({configuredUrl:e,error:t,source:i,scriptType:r}){var s;if(p.display.error(`${i} failed to start: an error occurred while initializing the ${r}:`,t),t instanceof Event||t instanceof Error&&((s=t.message).includes("Content Security Policy")||s.includes("requires 'TrustedScriptURL'"))){let t;t=e?`Please make sure the ${r} URL ${e} is correct and CSP is correctly configured.`:"Please make sure CSP is correctly configured.",p.display.error(`${t} See documentation at ${p.DOCS_ORIGIN}/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay`)}else"worker"===r&&(0,d.addTelemetryError)(t)}let w=30*f.ONE_SECOND;function m(e){return new Worker(e.workerUrl||URL.createObjectURL(new Blob(['(()=>{function t(t){if(1===t.length)return t[0];const e=t.reduce((t,e)=>t+e.length,0),a=new Uint8Array(e);let n=0;for(const e of t)a.set(e,n),n+=e.length;return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),n=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=Array(576);e(s);var h=Array(60);e(h);var l=Array(512);e(l);var _=Array(256);e(_);var o=Array(29);e(o);var d,u,f,c=Array(30);function p(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function g(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(c);var v=function(t){return t<256?l[t]:l[256+(t>>>7)]},w=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},m=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},b=function(t,e,a){m(t,a[2*e],a[2*e+1])},y=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},z=function(t,e,a){var n,r,i=Array(16),s=0;for(n=1;n<=15;n++)i[n]=s=s+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=y(i[h]++,h))}},k=function(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},x=function(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},A=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},U=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&A(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!A(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},B=function(t,e,r){var i,s,h,l,d=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],s=t.pending_buf[t.l_buf+d],d++,0===i?b(t,s,e):(h=_[s],b(t,h+256+1,e),0!==(l=a[h])&&(s-=o[h],m(t,s,l)),i--,h=v(i),b(t,h,r),0!==(l=n[h])&&(i-=c[h],m(t,i,l)))}while(d<t.last_lit);b(t,256,e)},I=function(t,e){var a,n,r,i=e.dyn_tree,s=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,_=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==i[2*a]?(t.heap[++t.heap_len]=_=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)i[2*(r=t.heap[++t.heap_len]=_<2?++_:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=s[2*r+1]);for(e.max_code=_,a=t.heap_len>>1;a>=1;a--)U(t,i,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],U(t,i,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,i[2*r]=i[2*a]+i[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,i[2*a+1]=i[2*n+1]=r,t.heap[1]=r++,U(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,i,s,h,l=e.dyn_tree,_=e.max_code,o=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,c=e.stat_desc.max_length,p=0;for(i=0;i<=15;i++)t.bl_count[i]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(i=l[2*l[2*(n=t.heap[a])+1]+1]+1)>c&&(i=c,p++),l[2*n+1]=i,n>_||(t.bl_count[i]++,s=0,n>=f&&(s=u[n-f]),h=l[2*n],t.opt_len+=h*(i+s),d&&(t.static_len+=h*(o[2*n+1]+s)));if(0!==p){do{for(i=c-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[c]--,p-=2}while(p>0);for(i=c;0!==i;i--)for(n=t.bl_count[i];0!==n;)(r=t.heap[--a])>_||(l[2*r+1]!==i&&(t.opt_len+=(i-l[2*r+1])*l[2*r],l[2*r+1]=i),n--)}}(t,e),z(i,_,t.bl_count)},E=function(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,_=4;for(0===s&&(l=138,_=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++h<l&&r===s||(h<_?t.bl_tree[2*r]+=h:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,h=0,i=r,0===s?(l=138,_=3):r===s?(l=6,_=3):(l=7,_=4))},C=function(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,_=4;for(0===s&&(l=138,_=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++h<l&&r===s)){if(h<_)do{b(t,r,t.bl_tree)}while(0!==--h);else 0!==r?(r!==i&&(b(t,r,t.bl_tree),h--),b(t,16,t.bl_tree),m(t,h-3,2)):h<=10?(b(t,17,t.bl_tree),m(t,h-3,3)):(b(t,18,t.bl_tree),m(t,h-11,7));h=0,i=r,0===s?(l=138,_=3):r===s?(l=6,_=3):(l=7,_=4)}},D=!1,M=function(t,e,a,n){m(t,0+(n?1:0),3),function(t,e,a){x(t),w(t,a),w(t,~a),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a)},j=M,L=function(t,e,a,n){for(var r=65535&t,i=t>>>16&65535,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16},S=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),T=function(t,e,a,n){var r=S,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},O={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},q=j,F=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(_[a]+256+1)]++,t.dyn_dtree[2*v(e)]++),t.last_lit===t.lit_bufsize-1},G=-2,H=258,J=262,K=103,N=113,P=666,Q=function(t,e){return t.msg=O[e],e},R=function(t){return(t<<1)-(t>4?9:0)},V=function(t){for(var e=t.length;--e>=0;)t[e]=0},W=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},X=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},Y=function(t,e){(function(t,e,a,n){var r,l,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),I(t,t.l_desc),I(t,t.d_desc),_=function(t){var e;for(E(t,t.dyn_ltree,t.l_desc.max_code),E(t,t.dyn_dtree,t.d_desc.max_code),I(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*i[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(l=t.static_len+3+7>>>3)<=r&&(r=l)):r=l=a+5,a+4<=r&&-1!==e?M(t,e,a,n):4===t.strategy||l===r?(m(t,2+(n?1:0),3),B(t,s,h)):(m(t,4+(n?1:0),3),function(t,e,a,n){var r;for(m(t,e-257,5),m(t,a-1,5),m(t,n-4,4),r=0;r<n;r++)m(t,t.bl_tree[2*i[r]+1],3);C(t,t.dyn_ltree,e-1),C(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),B(t,t.dyn_ltree,t.dyn_dtree)),k(t),n&&x(t)})(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,X(t.strm)},Z=function(t,e){t.pending_buf[t.pending++]=e},$=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},tt=function(t,e,a,n){var r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),a),1===t.state.wrap?t.adler=L(t.adler,e,r,a):2===t.state.wrap&&(t.adler=T(t.adler,e,r,a)),t.next_in+=r,t.total_in+=r,r)},et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-J?t.strstart-(t.w_size-J):0,_=t.window,o=t.w_mask,d=t.prev,u=t.strstart+H,f=_[i+s-1],c=_[i+s];t.prev_length>=t.good_match&&(r>>=2),h>t.lookahead&&(h=t.lookahead);do{if(_[(a=e)+s]===c&&_[a+s-1]===f&&_[a]===_[i]&&_[++a]===_[i+1]){i+=2,a++;do{}while(_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&i<u);if(n=H-(u-i),i=u-H,n>s){if(t.match_start=e,s=n,n>=h)break;f=_[i+s-1],c=_[i+s]}}}while((e=d[e&o])>l&&0!==--r);return s<=t.lookahead?s:t.lookahead},at=function(t){var e,a,n,r,i,s=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-J)){t.window.set(t.window.subarray(s,s+s),0),t.match_start-=s,t.strstart-=s,t.block_start-=s,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=s?n-s:0}while(--a);e=a=s;do{n=t.prev[--e],t.prev[e]=n>=s?n-s:0}while(--a);r+=s}if(0===t.strm.avail_in)break;if(a=tt(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=W(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=W(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<J&&0!==t.strm.avail_in)},nt=function(t,e){for(var a,n;;){if(t.lookahead<J){if(at(t),t.lookahead<J&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-J&&(t.match_length=et(t,a)),t.match_length>=3)if(n=F(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=W(t,t.ins_h,t.window[t.strstart+1]);else n=F(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2},rt=function(t,e){for(var a,n,r;;){if(t.lookahead<J){if(at(t),t.lookahead<J&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-J&&(t.match_length=et(t,a),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=F(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Y(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=F(t,0,t.window[t.strstart-1]))&&Y(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=F(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2};function it(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var st=[new it(0,0,0,0,function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(at(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Y(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-J&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Y(t,!1),t.strm.avail_out),1)}),new it(4,4,8,4,nt),new it(4,5,16,8,nt),new it(4,6,32,32,nt),new it(4,4,16,16,rt),new it(8,16,32,32,rt),new it(8,16,128,128,rt),new it(8,32,128,256,rt),new it(32,128,258,1024,rt),new it(32,258,258,4096,rt)];function ht(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),V(this.dyn_ltree),V(this.dyn_dtree),V(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),V(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),V(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}for(var lt=function(t){var e,i=function(t){if(!t||!t.state)return Q(t,G);t.total_in=t.total_out=0,t.data_type=2;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:N,t.adler=2===e.wrap?0:1,e.last_flush=0,function(t){D||(function(){var t,e,i,g,v,w=Array(16);for(i=0,g=0;g<28;g++)for(o[g]=i,t=0;t<1<<a[g];t++)_[i++]=g;for(_[i-1]=g,v=0,g=0;g<16;g++)for(c[g]=v,t=0;t<1<<n[g];t++)l[v++]=g;for(v>>=7;g<30;g++)for(c[g]=v<<7,t=0;t<1<<n[g]-7;t++)l[256+v++]=g;for(e=0;e<=15;e++)w[e]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,w[8]++;for(;t<=255;)s[2*t+1]=9,t++,w[9]++;for(;t<=279;)s[2*t+1]=7,t++,w[7]++;for(;t<=287;)s[2*t+1]=8,t++,w[8]++;for(z(s,287,w),t=0;t<30;t++)h[2*t+1]=5,h[2*t]=y(t,5);d=new p(s,a,257,286,15),u=new p(h,n,0,30,15),f=new p([],r,0,19,7)}(),D=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,u),t.bl_desc=new g(t.bl_tree,f),t.bi_buf=0,t.bi_valid=0,k(t)}(e),0}(t);return 0===i&&((e=t.state).window_size=2*e.w_size,V(e.head),e.max_lazy_match=st[e.level].max_lazy,e.good_match=st[e.level].good_length,e.nice_match=st[e.level].nice_length,e.max_chain_length=st[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i},_t=function(t,e){var a,n;if(!t||!t.state||e>5||e<0)return t?Q(t,G):G;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===P&&4!==e)return Q(t,0===t.avail_out?-5:G);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,Z(r,31),Z(r,139),Z(r,8),r.gzhead?(Z(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Z(r,255&r.gzhead.time),Z(r,r.gzhead.time>>8&255),Z(r,r.gzhead.time>>16&255),Z(r,r.gzhead.time>>24&255),Z(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Z(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Z(r,255&r.gzhead.extra.length),Z(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=T(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Z(r,0),Z(r,0),Z(r,0),Z(r,0),Z(r,0),Z(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Z(r,3),r.status=N);else{var h=8+(r.w_bits-8<<4)<<8;h|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(h|=32),h+=31-h%31,r.status=N,$(r,h),0!==r.strstart&&($(r,t.adler>>>16),$(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),X(t),a=r.pending,r.pending!==r.pending_buf_size));)Z(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),X(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Z(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),X(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Z(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=K)}else r.status=K;if(r.status===K&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&X(t),r.pending+2<=r.pending_buf_size&&(Z(r,255&t.adler),Z(r,t.adler>>8&255),t.adler=0,r.status=N)):r.status=N),0!==r.pending){if(X(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&R(e)<=R(i)&&4!==e)return Q(t,-5);if(r.status===P&&0!==t.avail_in)return Q(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&r.status!==P){var l=2===r.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(at(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,a=F(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=H){if(at(t),t.lookahead<=H&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+H;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=H-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=F(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=F(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2}(r,e):st[r.level].func(r,e);if(3!==l&&4!==l||(r.status=P),1===l||3===l)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===l&&(1===e?function(t){m(t,2,3),b(t,256,s),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}(r):5!==e&&(q(r,0,0,!1),3===e&&(V(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),X(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(Z(r,255&t.adler),Z(r,t.adler>>8&255),Z(r,t.adler>>16&255),Z(r,t.adler>>24&255),Z(r,255&t.total_in),Z(r,t.total_in>>8&255),Z(r,t.total_in>>16&255),Z(r,t.total_in>>24&255)):($(r,t.adler>>>16),$(r,65535&t.adler)),X(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},ot=function(t){if(!t||!t.state)return G;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==K&&e!==N&&e!==P?Q(t,G):(t.state=null,e===N?Q(t,-3):0)},dt=new Uint8Array(256),ut=0;ut<256;ut++)dt[ut]=ut>=252?6:ut>=248?5:ut>=240?4:ut>=224?3:ut>=192?2:1;dt[254]=dt[254]=1;var ft=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},ct=Object.prototype.toString;function pt(){this.options={level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ft,this.strm.avail_out=0;var e,a,n=function(t,e,a,n,r,i){if(!t)return G;var s=1;if(-1===e&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||8!==a||n<8||n>15||e<0||e>9||i<0||i>4)return Q(t,G);8===n&&(n=9);var h=new ht;return t.state=h,h.strm=t,h.wrap=s,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=r+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<r+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=i,h.method=a,lt(t)}(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw Error(O[n]);if(t.header&&(e=this.strm,a=t.header,e&&e.state&&(2!==e.state.wrap||(e.state.gzhead=a))),t.dictionary){var r;if(r="[object ArrayBuffer]"===ct.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=function(t,e){var a=e.length;if(!t||!t.state)return G;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return G;if(1===r&&(t.adler=L(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(V(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,h=t.next_in,l=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,at(n);n.lookahead>=3;){var _=n.strstart,o=n.lookahead-2;do{n.ins_h=W(n,n.ins_h,n.window[_+3-1]),n.prev[_&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=_,_++}while(--o);n.strstart=_,n.lookahead=2,at(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=h,t.input=l,t.avail_in=s,n.wrap=r,0}(this.strm,r)))throw Error(O[n]);this._dict_set=!0}}function gt(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:e+"",streamId:a})}}function vt(t){const e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}pt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?4:0,"[object ArrayBuffer]"===ct.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(2===n||3===n)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(1===(a=_t(r,n)))return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=ot(this.strm),this.onEnd(a),this.ended=!0,0===a;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},pt.prototype.onData=function(t){this.chunks.push(t)},pt.prototype.onEnd=function(t){0===t&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,h=t.length;i<h;i++){var l=t[i];r.set(l,s),s+=l.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e=self){try{const a=new Map;e.addEventListener("message",n=>{try{const r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"6.25.1"};case"write":{let n=e.get(a.streamId);n||(n=new pt,e.set(a.streamId,n));const r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,n,r,i,s=t.length,h=0;for(r=0;r<s;r++)a=t.charCodeAt(r),55296==(64512&a)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),r++)),h+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(h),i=0,r=0;i<h;r++)a=t.charCodeAt(r),55296==(64512&a)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),r++)),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,2),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:vt(n),additionalBytesCount:i.length}}case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){gt(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}})}catch(t){gt(e,t)}}()})();'])))}let M={status:0};function N(e,t,i,r=m){switch(0===M.status&&function(e,t,i=m){try{let r=i(e),{stop:s}=(0,l.addEventListener)(e,r,"error",i=>{v(e,t,i)}),{stop:n}=(0,l.addEventListener)(e,r,"message",({data:i})=>{var r;"errored"===i.type?v(e,t,i.error,i.streamId):"initialized"===i.type&&(r=i.version,1===M.status&&(M={status:3,worker:M.worker,stop:M.stop,version:r}))});r.postMessage({action:"init"}),(0,g.setTimeout)(()=>{var e;return e=t,void(1===M.status&&(p.display.error(`${e} failed to start: a timeout occurred while initializing the Worker`),M.initializationFailureCallbacks.forEach(e=>e()),M={status:2}))},w),M={status:1,worker:r,stop:()=>{s(),n()},initializationFailureCallbacks:[]}}catch(i){v(e,t,i)}}(e,t,r),M.status){case 1:return M.initializationFailureCallbacks.push(i),M.worker;case 3:return M.worker}}function v(e,t,i,r){1===M.status||0===M.status?(y({configuredUrl:e.workerUrl,error:i,source:t,scriptType:"worker"}),1===M.status&&M.initializationFailureCallbacks.forEach(e=>e()),M={status:2}):(0,d.addTelemetryError)(i,{worker_version:3===M.status&&M.version,stream_id:r})}function I(){return"function"==typeof Array.from&&"function"==typeof CSSSupportsRule&&"function"==typeof URL.createObjectURL&&"forEach"in NodeList.prototype}var b=e.i(302332),E=e.i(927652),A=e.i(655207),D=e.i(919214);async function C(e,t,i){try{return await i}finally{e.notify(t)}}async function T(e=j){try{return await e()}catch(e){y({error:e,source:"Recorder",scriptType:"module"})}}async function j(){return(await e.A(282547)).startRecording}var _=e.i(240820),S=e.i(192096),O=e.i(591056);async function x(e=z){try{return await e()}catch(e){y({error:e,source:"Profiler",scriptType:"module"})}}async function z(){return(await e.A(62498)).createRumProfiler}let L=function(e,t){let i;if((0,a.canUseEventBridge)()&&!(0,a.bridgeSupports)("records")||!I())return{start:o.noop,stop:o.noop,getReplayStats:()=>void 0,onRumStart:o.noop,isRecording:()=>!1,getSessionReplayLink:()=>void 0};let{strategy:r,shouldStartImmediately:s}=(i=0,{strategy:{start(){i=1},stop(){i=2},isRecording:()=>!1,getSessionReplayLink:o.noop},shouldStartImmediately:e=>1===i||0===i&&!e.startSessionReplayRecordingManually});return{start:e=>r.start(e),stop:()=>r.stop(),getSessionReplayLink:()=>r.getSessionReplayLink(),onRumStart:function(t,i,n,a,c,l){let h;r=function(e,t,i,r,s,n,a){let c,l=0;t.subscribe(9,()=>{(2===l||3===l)&&(g(),l=1)}),t.subscribe(10,()=>{1===l&&p()});let h=new A.Observable;!function(e,t){let i,r,s;if(!e.metricsEnabled)return o.noop;let{unsubscribe:n}=t.subscribe(e=>{switch(e.type){case"start":i={forced:e.forced,timestamp:(0,f.timeStampNow)()},r=void 0,s=void 0;break;case"document-ready":i&&(r=(0,f.elapsed)(i.timestamp,(0,f.timeStampNow)()));break;case"recorder-settled":i&&(s=(0,f.elapsed)(i.timestamp,(0,f.timeStampNow)()));break;case"aborted":case"deflate-encoder-load-failed":case"recorder-load-failed":case"succeeded":var t,a,o,c;n(),i&&(0,d.addTelemetryMetrics)("Recorder init metrics",{metrics:(t=i.forced,a=s,o=(0,f.elapsed)(i.timestamp,(0,f.timeStampNow)()),c=e.type,{forced:t,loadRecorderModuleDuration:a,recorderInitDuration:o,result:c,waitForDocReadyDuration:r})})}})}(a,h);let u=async o=>{h.notify({type:"start",forced:o});let[u]=await Promise.all([C(h,{type:"recorder-settled"},s()),C(h,{type:"document-ready"},(0,b.asyncRunOnReadyState)(e,"interactive"))]);if(2!==l)return void h.notify({type:"aborted"});if(!u){l=0,h.notify({type:"recorder-load-failed"});return}let d=n();if(!d){l=0,h.notify({type:"deflate-encoder-load-failed"});return}({stop:c}=u(t,e,i,r,d,a)),l=3,h.notify({type:"succeeded"})};function p(e){var t,r,s,n,a;let o=i.findTrackedSession();if(t=o,r=e,!t||0===t.sessionReplay&&(!r||!r.force)){l=1;return}if(2===(s=l)||3===s)return;l=2;let c=(n=o,(a=e)&&a.force&&0===n.sessionReplay||!1);u(c).catch(E.monitorError),c&&i.setForcedReplay()}function g(){3===l&&(null==c||c()),l=0}return{start:p,stop:g,getSessionReplayLink:()=>{var t,s,n;let a,o,c;return t=0!==l,s=a=i.findTrackedSession(),n=t,o=I()?s?0===s.sessionReplay?"incorrect-session-plan":n?void 0:"replay-not-started":"rum-not-tracked":"browser-not-supported",c=r.findView(),(0,D.getSessionReplayUrl)(e,{viewContext:c,errorType:o,session:a})},isRecording:()=>3===l}}(i,t,n,a,e,function(){return!h&&(null!=c||(c=N(i,"Datadog Session Replay",()=>{r.stop()},void 0)),c&&(h=u(i,c,1))),h},l),s(i)&&r.start()},isRecording:()=>3===M.status&&r.isRecording(),getReplayStats:e=>3===M.status?(0,c.getReplayStats)(e):void 0}}(T),P=(0,s.makeRumPublicApi)(n.startRum,L,{onRumStart:function(e,i,s,n,a,o,c){let l,h=n.findTrackedSession();if(!h||!(0,_.isSampled)(h.id,s.profilingSampleRate))return;let u=(l={status:"starting"},i.register(0,({eventType:e})=>e!==O.RumEventType.VIEW&&e!==O.RumEventType.LONG_TASK?S.SKIPPED:{type:e,_dd:{profiling:l}}),{get:()=>l,set:e=>{l=e}});void 0===(0,r.getGlobalObject)().Profiler?u.set({status:"error",error_reason:"not-supported-by-browser"}):x().then(i=>{if(!i){(0,d.addTelemetryDebug)("[DD_RUM] Failed to lazy load the RUM Profiler"),u.set({status:"error",error_reason:"failed-to-lazy-load"});return}(t=i(s,e,n,u,o,c,a,void 0)).start()}).catch(E.monitorError)},stop:()=>{null==t||t.stop().catch(E.monitorError)}},{startDeflateWorker:N,createDeflateEncoder:u,sdkName:"rum"});function k(){return null}(0,i.defineGlobal)((0,r.getGlobalObject)(),"DD_RUM",P),P.init({applicationId:"d742b24c-8e81-460e-b527-ab06bf4c2ba5",clientToken:"pubd53aa353c3fdab89107af32a2a8b48c0",site:"datadoghq.com",service:"frontend",env:"production",sessionSampleRate:20,sessionReplaySampleRate:1,trackUserInteractions:!0,trackResources:!0,trackLongTasks:!0,defaultPrivacyLevel:"mask-user-input"}),e.s(["default",()=>k],704631)},225073,e=>{"use strict";var t=e.i(649785),i=e.i(463578),r=e.i(281675),s=e.i(595673);function n(){let e,n,a=(0,t.c)(4),o=(0,i.usePathname)(),c=(0,i.useSearchParams)(),l=(0,r.useRef)(null);return a[0]!==o||a[1]!==c?(e=()=>{let e=c?.toString(),t=e?`${o}?${e}`:o;l.current!==t&&((0,s.trackPageView)(t,{originPath:l.current||void 0}),l.current=t)},n=[o,c],a[0]=o,a[1]=c,a[2]=e,a[3]=n):(e=a[2],n=a[3]),(0,r.useEffect)(e,n),null}e.s(["default",()=>n])},16542,e=>{"use strict";var t=e.i(281675);function i(){return(0,t.useEffect)(()=>{console.log("[UserEventsInitializer] component mounted"),Promise.all([e.A(743864),e.A(629284)]).then(([e,t])=>{e.initUserEventsSDK();let i=e.getSDKInstance();t.setRecordEventFunction(e.recordUserEvent),i?(t.setUserEventsSDK(i),console.log("[UserEventsSDK] Initialized with frontend's recordUserEvent function")):console.log("[UserEventsSDK] Initialized (Instance not available)")}).catch(e=>{console.error("[UserEventsSDK] Failed to load:",e)})},[]),null}e.s(["default",()=>i])},262908,e=>{"use strict";var t=e.i(171580),i=e.i(281675),r=e.i(463578);function s(){return false}function n(e){return RegExp(`/${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(?=[/?#]|$)`)}function a(e){(0,i.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]);let r=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(r.current)e.route&&r.current(e.route);else{let i=function(e={}){var t;if("undefined"==typeof window||null===e.route)return null;window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)});let i=e.scriptSrc?e.scriptSrc:s()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":e.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":e.basePath?`${e.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js";if(document.head.querySelector(`script[src*="${i}"]`))return null;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend));let r=document.createElement("script");return r.src=i,r.defer=!0,r.dataset.sdkn="@vercel/speed-insights"+(e.framework?`/${e.framework}`:""),r.dataset.sdkv="1.3.1",e.sampleRate&&(r.dataset.sampleRate=e.sampleRate.toString()),e.route&&(r.dataset.route=e.route),e.endpoint?r.dataset.endpoint=e.endpoint:e.basePath&&(r.dataset.endpoint=`${e.basePath}/speed-insights/vitals`),e.dsn&&(r.dataset.dsn=e.dsn),s()&&!1===e.debug&&(r.dataset.debug="false"),r.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${i}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(r),{setRoute:e=>{r.dataset.route=e??void 0}}}({framework:e.framework??"react",basePath:e.basePath??function(){if(void 0!==t.default&&void 0!==t.default.env)return t.default.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}(),...e});i&&(r.current=i.setRoute)}},[e.route]),null}function o(e){let s=(()=>{let e=(0,r.useParams)(),t=(0,r.useSearchParams)()||new URLSearchParams,i=(0,r.usePathname)();if(!e)return null;let s=Object.keys(e).length?e:Object.fromEntries(t.entries());if(!i||!s)return i;let a=i;try{let e=Object.entries(s);for(let[t,i]of e)if(!Array.isArray(i)){let e=n(i);e.test(a)&&(a=a.replace(e,`/[${t}]`))}for(let[t,i]of e)if(Array.isArray(i)){let e=n(i.join("/"));e.test(a)&&(a=a.replace(e,`/[...${t}]`))}return a}catch(e){return i}})();return i.default.createElement(a,{route:s,...e,framework:"next",basePath:function(){if(void 0!==t.default&&void 0!==t.default.env)return t.default.env.NEXT_PUBLIC_VERCEL_OBSERVABILITY_BASEPATH}()})}function c(e){return i.default.createElement(i.Suspense,{fallback:null},i.default.createElement(o,{...e}))}e.s(["SpeedInsights",()=>c])},123374,(e,t,i)=>{!function(r,s){if("function"==typeof define&&define.amd){let r;void 0!==(r=s(e.r,i,t))&&e.v(r)}else t.exports=s()}(e.e,function(){var e,t,i,r={};r.version="0.2.0";var s=r.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function n(e,t,i){return e<t?t:e>i?i:e}r.configure=function(e){var t,i;for(t in e)void 0!==(i=e[t])&&e.hasOwnProperty(t)&&(s[t]=i);return this},r.status=null,r.set=function(e){var t=r.isStarted();r.status=1===(e=n(e,s.minimum,1))?null:e;var i=r.render(!t),c=i.querySelector(s.barSelector),l=s.speed,h=s.easing;return i.offsetWidth,a(function(t){var n,a,u,d;""===s.positionUsing&&(s.positionUsing=r.getPositioningCSS()),o(c,(n=e,a=l,u=h,(d="translate3d"===s.positionUsing?{transform:"translate3d("+(-1+n)*100+"%,0,0)"}:"translate"===s.positionUsing?{transform:"translate("+(-1+n)*100+"%,0)"}:{"margin-left":(-1+n)*100+"%"}).transition="all "+a+"ms "+u,d)),1===e?(o(i,{transition:"none",opacity:1}),i.offsetWidth,setTimeout(function(){o(i,{transition:"all "+l+"ms linear",opacity:0}),setTimeout(function(){r.remove(),t()},l)},l)):setTimeout(t,l)}),this},r.isStarted=function(){return"number"==typeof r.status},r.start=function(){r.status||r.set(0);var e=function(){setTimeout(function(){r.status&&(r.trickle(),e())},s.trickleSpeed)};return s.trickle&&e(),this},r.done=function(e){return e||r.status?r.inc(.3+.5*Math.random()).set(1):this},r.inc=function(e){var t=r.status;return t?("number"!=typeof e&&(e=(1-t)*n(Math.random()*t,.1,.95)),t=n(t+e,0,.994),r.set(t)):r.start()},r.trickle=function(){return r.inc(Math.random()*s.trickleRate)},e=0,t=0,r.promise=function(i){return i&&"resolved"!==i.state()&&(0===t&&r.start(),e++,t++,i.always(function(){0==--t?(e=0,r.done()):r.set((e-t)/e)})),this},r.render=function(e){if(r.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var t=document.createElement("div");t.id="nprogress",t.innerHTML=s.template;var i,n=t.querySelector(s.barSelector),a=e?"-100":(-1+(r.status||0))*100,c=document.querySelector(s.parent);return o(n,{transition:"all 0 linear",transform:"translate3d("+a+"%,0,0)"}),!s.showSpinner&&(i=t.querySelector(s.spinnerSelector))&&d(i),c!=document.body&&l(c,"nprogress-custom-parent"),c.appendChild(t),t},r.remove=function(){h(document.documentElement,"nprogress-busy"),h(document.querySelector(s.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&d(e)},r.isRendered=function(){return!!document.getElementById("nprogress")},r.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var a=(i=[],function(e){i.push(e),1==i.length&&function e(){var t=i.shift();t&&t(e)}()}),o=function(){var e=["Webkit","O","Moz","ms"],t={};function i(i,r,s){var n;r=t[n=(n=r).replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})]||(t[n]=function(t){var i=document.body.style;if(t in i)return t;for(var r,s=e.length,n=t.charAt(0).toUpperCase()+t.slice(1);s--;)if((r=e[s]+n)in i)return r;return t}(n)),i.style[r]=s}return function(e,t){var r,s,n=arguments;if(2==n.length)for(r in t)void 0!==(s=t[r])&&t.hasOwnProperty(r)&&i(e,r,s);else i(e,n[1],n[2])}}();function c(e,t){return("string"==typeof e?e:u(e)).indexOf(" "+t+" ")>=0}function l(e,t){var i=u(e),r=i+t;c(i,t)||(e.className=r.substring(1))}function h(e,t){var i,r=u(e);c(e,t)&&(e.className=(i=r.replace(" "+t+" "," ")).substring(1,i.length-1))}function u(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function d(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return r})},25699,(e,t,i)=>{var r=Object.create,s=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t)=>s(e,"name",{value:t,configurable:!0}),h=(e,t,i,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of a(t))c.call(e,o)||o===i||s(e,o,{get:()=>t[o],enumerable:!(r=n(t,o))||r.enumerable});return e},u=(e,t,i)=>(i=null!=e?r(o(e)):{},h(!t&&e&&e.__esModule?i:s(i,"default",{value:e,enumerable:!0}),e)),d={},p={default:()=>v,useTopLoader:()=>M};for(var g in p)s(d,g,{get:p[g],enumerable:!0});t.exports=h(s({},"__esModule",{value:!0}),d);var f=u(e.r(304153)),y=u(e.r(281675)),w=u(e.r(123374)),m=u(e.r(123374)),M=l(()=>({start:()=>m.start(),done:e=>m.done(e),remove:()=>m.remove(),setProgress:e=>m.set(e),inc:e=>m.inc(e),trickle:()=>m.trickle(),isStarted:()=>m.isStarted(),isRendered:()=>m.isRendered(),getPositioningCSS:()=>m.getPositioningCSS()}),"useTopLoader"),N=l(({color:e,height:t,showSpinner:i,crawl:r,crawlSpeed:s,initialPosition:n,easing:a,speed:o,shadow:c,template:h,zIndex:u=1600,showAtBottom:d=!1,showForHashAnchor:p=!0,nonce:g})=>{let f=null!=e?e:"#29d",m=c||void 0===c?c?`box-shadow:${c}`:`box-shadow:0 0 10px ${f},0 0 5px ${f}`:"",M=y.createElement("style",{nonce:g},`#nprogress{pointer-events:none}#nprogress .bar{background:${f};position:fixed;z-index:${u};${d?"bottom: 0;":"top: 0;"}left:0;width:100%;height:${null!=t?t:3}px}#nprogress .peg{display:block;position:absolute;right:0;width:100px;height:100%;${m};opacity:1;-webkit-transform:rotate(3deg) translate(0px,-4px);-ms-transform:rotate(3deg) translate(0px,-4px);transform:rotate(3deg) translate(0px,-4px)}#nprogress .spinner{display:block;position:fixed;z-index:${u};${d?"bottom: 15px;":"top: 15px;"}right:15px}#nprogress .spinner-icon{width:18px;height:18px;box-sizing:border-box;border:2px solid transparent;border-top-color:${f};border-left-color:${f};border-radius:50%;-webkit-animation:nprogress-spinner 400ms linear infinite;animation:nprogress-spinner 400ms linear infinite}.nprogress-custom-parent{overflow:hidden;position:relative}.nprogress-custom-parent #nprogress .bar,.nprogress-custom-parent #nprogress .spinner{position:absolute}@-webkit-keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes nprogress-spinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}`),N=l(e=>new URL(e,window.location.href).href,"toAbsoluteURL"),v=l((e,t)=>{let i=new URL(N(e)),r=new URL(N(t));return i.href.split("#")[0]===r.href.split("#")[0]},"isHashAnchor"),I=l((e,t)=>{let i=new URL(N(e)),r=new URL(N(t));return i.hostname.replace(/^www\./,"")===r.hostname.replace(/^www\./,"")},"isSameHostName");return y.useEffect(()=>{let e,t;function c(e,t){let i=new URL(e),r=new URL(t);if(i.hostname===r.hostname&&i.pathname===r.pathname&&i.search===r.search){let e=i.hash,t=r.hash;return e!==t&&i.href.replace(e,"")===r.href.replace(t,"")}return!1}w.configure({showSpinner:null==i||i,trickle:null==r||r,trickleSpeed:null!=s?s:200,minimum:null!=n?n:.08,easing:null!=a?a:"ease",speed:null!=o?o:200,template:null!=h?h:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'}),l(c,"isAnchorOfCurrentUrl");var u,d,g=document.querySelectorAll("html");let f=l(()=>g.forEach(e=>e.classList.remove("nprogress-busy")),"removeNProgressClass");function y(e){for(;e&&"a"!==e.tagName.toLowerCase();)e=e.parentElement;return e}function m(e){try{let t=e.target,i=y(t),r=null==i?void 0:i.href;if(r){let t=window.location.href,s=""!==i.target,n=["tel:","mailto:","sms:","blob:","download:"].some(e=>r.startsWith(e));if(!I(window.location.href,i.href))return;let a=c(t,r)||v(window.location.href,i.href);if(!p&&a)return;r===t||s||n||a||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||!N(i.href).startsWith("http")?(w.start(),w.done(),f()):w.start()}}catch(e){w.start(),w.done()}}function M(){w.done(),f()}function b(){w.done()}return l(y,"findClosestAnchor"),l(m,"handleClick"),e=(u=window.history).pushState,u.pushState=(...t)=>(w.done(),f(),e.apply(u,t)),t=(d=window.history).replaceState,d.replaceState=(...e)=>(w.done(),f(),t.apply(d,e)),l(M,"handlePageHide"),l(b,"handleBackAndForth"),window.addEventListener("popstate",b),document.addEventListener("click",m),window.addEventListener("pagehide",M),()=>{document.removeEventListener("click",m),window.removeEventListener("pagehide",M),window.removeEventListener("popstate",b)}},[]),M},"NextTopLoader"),v=N;N.propTypes={color:f.string,height:f.number,showSpinner:f.bool,crawl:f.bool,crawlSpeed:f.number,initialPosition:f.number,easing:f.string,speed:f.number,template:f.string,shadow:f.oneOfType([f.string,f.bool]),zIndex:f.number,showAtBottom:f.bool}}]);