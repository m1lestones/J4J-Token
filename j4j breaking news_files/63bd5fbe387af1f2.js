(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,929,e=>{"use strict";var t=e.i(942765),r=e.i(649785);e.s(["CenteredStatusMessage",0,e=>{let s,n,a,o=(0,r.c)(8),{children:l,icon:i,className:c}=e,d=`flex justify-center items-center h-full text-sm text-gray-400 ${void 0===c?"":c}`;return o[0]!==i?(s=i&&(0,t.jsx)("span",{className:"mr-2",children:i}),o[0]=i,o[1]=s):s=o[1],o[2]!==l?(n=(0,t.jsx)("span",{children:l}),o[2]=l,o[3]=n):n=o[3],o[4]!==d||o[5]!==s||o[6]!==n?(a=(0,t.jsxs)("div",{className:d,children:[s,n]}),o[4]=d,o[5]=s,o[6]=n,o[7]=a):a=o[7],a}])},821896,385044,e=>{"use strict";var t=e.i(942765),r=e.i(281675),s=e.i(291967),n=e.i(156207),a=e.i(556872),o=e.i(357784),l=e.i(144977),i=e.i(770460),c=e.i(60212),d=e.i(371353),u=e.i(89535),m=e.i(461194),g=e.i(301345),p=e.i(614952),f=e.i(653747),h=e.i(252960),x=e.i(534643),y="rovingFocusGroup.onEntryFocus",v={bubbles:!1,cancelable:!0},b="RovingFocusGroup",[j,C,w]=(0,o.createCollection)(b),[M,S]=(0,n.createContextScope)(b,[w]),[N,R]=M(b),_=r.forwardRef((e,r)=>(0,t.jsx)(j.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(j.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(A,{...e,ref:r})})}));_.displayName=b;var A=r.forwardRef((e,n)=>{let{__scopeRovingFocusGroup:o,orientation:c,loop:d=!1,dir:u,currentTabStopId:m,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:p,onEntryFocus:f,preventScrollOnEntryFocus:j=!1,...w}=e,M=r.useRef(null),S=(0,l.useComposedRefs)(n,M),R=(0,i.useDirection)(u),[_,A]=(0,x.useControllableState)({prop:m,defaultProp:g??null,onChange:p,caller:b}),[E,k]=r.useState(!1),T=(0,h.useCallbackRef)(f),I=C(o),P=r.useRef(!1),[U,D]=r.useState(0);return r.useEffect(()=>{let e=M.current;if(e)return e.addEventListener(y,T),()=>e.removeEventListener(y,T)},[T]),(0,t.jsx)(N,{scope:o,orientation:c,dir:R,loop:d,currentTabStopId:_,onItemFocus:r.useCallback(e=>A(e),[A]),onItemShiftTab:r.useCallback(()=>k(!0),[]),onFocusableItemAdd:r.useCallback(()=>D(e=>e+1),[]),onFocusableItemRemove:r.useCallback(()=>D(e=>e-1),[]),children:(0,t.jsx)(a.Primitive.div,{tabIndex:E||0===U?-1:0,"data-orientation":c,...w,ref:S,style:{outline:"none",...e.style},onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,()=>{P.current=!0}),onFocus:(0,s.composeEventHandlers)(e.onFocus,e=>{let t=!P.current;if(e.target===e.currentTarget&&t&&!E){let t=new CustomEvent(y,v);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=I().filter(e=>e.focusable);L([e.find(e=>e.active),e.find(e=>e.id===_),...e].filter(Boolean).map(e=>e.ref.current),j)}}P.current=!1}),onBlur:(0,s.composeEventHandlers)(e.onBlur,()=>k(!1))})})}),E="RovingFocusGroupItem",k=r.forwardRef((e,n)=>{let{__scopeRovingFocusGroup:o,focusable:l=!0,active:i=!1,tabStopId:c,children:d,...u}=e,g=(0,m.useId)(),p=c||g,f=R(E,o),h=f.currentTabStopId===p,x=C(o),{onFocusableItemAdd:y,onFocusableItemRemove:v,currentTabStopId:b}=f;return r.useEffect(()=>{if(l)return y(),()=>v()},[l,y,v]),(0,t.jsx)(j.ItemSlot,{scope:o,id:p,focusable:l,active:i,children:(0,t.jsx)(a.Primitive.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...u,ref:n,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{l?f.onItemFocus(p):e.preventDefault()}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>f.onItemFocus(p)),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let n=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return T[n]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=x().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){var r,s;"prev"===t&&n.reverse();let a=n.indexOf(e.currentTarget);n=f.loop?(r=n,s=a+1,r.map((e,t)=>r[(s+t)%r.length])):n.slice(a+1)}setTimeout(()=>L(n))}}),children:"function"==typeof d?d({isCurrentTabStop:h,hasTabStop:null!=b}):d})})});k.displayName=E;var T={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function L(e,t=!1){let r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var I=e.i(93074),P=e.i(73772),U=e.i(621790),D=["Enter"," "],O=["ArrowUp","PageDown","End"],H=["ArrowDown","PageUp","Home",...O],F={ltr:[...D,"ArrowRight"],rtl:[...D,"ArrowLeft"]},K={ltr:["ArrowLeft"],rtl:["ArrowRight"]},B="Menu",[z,G,q]=(0,o.createCollection)(B),[$,Q]=(0,n.createContextScope)(B,[q,g.createPopperScope,S]),V=(0,g.createPopperScope)(),X=S(),[Y,J]=$(B),[Z,W]=$(B),ee=e=>{let{__scopeMenu:s,open:n=!1,children:a,dir:o,onOpenChange:l,modal:c=!0}=e,d=V(s),[u,m]=r.useState(null),p=r.useRef(!1),f=(0,h.useCallbackRef)(l),x=(0,i.useDirection)(o);return r.useEffect(()=>{let e=()=>{p.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>p.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,t.jsx)(g.Root,{...d,children:(0,t.jsx)(Y,{scope:s,open:n,onOpenChange:f,content:u,onContentChange:m,children:(0,t.jsx)(Z,{scope:s,onClose:r.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:p,dir:x,modal:c,children:a})})})};ee.displayName=B;var et=r.forwardRef((e,r)=>{let{__scopeMenu:s,...n}=e,a=V(s);return(0,t.jsx)(g.Anchor,{...a,...n,ref:r})});et.displayName="MenuAnchor";var er="MenuPortal",[es,en]=$(er,{forceMount:void 0}),ea=e=>{let{__scopeMenu:r,forceMount:s,children:n,container:a}=e,o=J(er,r);return(0,t.jsx)(es,{scope:r,forceMount:s,children:(0,t.jsx)(f.Presence,{present:s||o.open,children:(0,t.jsx)(p.Portal,{asChild:!0,container:a,children:n})})})};ea.displayName=er;var eo="MenuContent",[el,ei]=$(eo),ec=r.forwardRef((e,r)=>{let s=en(eo,e.__scopeMenu),{forceMount:n=s.forceMount,...a}=e,o=J(eo,e.__scopeMenu),l=W(eo,e.__scopeMenu);return(0,t.jsx)(z.Provider,{scope:e.__scopeMenu,children:(0,t.jsx)(f.Presence,{present:n||o.open,children:(0,t.jsx)(z.Slot,{scope:e.__scopeMenu,children:l.modal?(0,t.jsx)(ed,{...a,ref:r}):(0,t.jsx)(eu,{...a,ref:r})})})})}),ed=r.forwardRef((e,n)=>{let a=J(eo,e.__scopeMenu),o=r.useRef(null),i=(0,l.useComposedRefs)(n,o);return r.useEffect(()=>{let e=o.current;if(e)return(0,P.hideOthers)(e)},[]),(0,t.jsx)(eg,{...e,ref:i,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:(0,s.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),eu=r.forwardRef((e,r)=>{let s=J(eo,e.__scopeMenu);return(0,t.jsx)(eg,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),em=(0,I.createSlot)("MenuContent.ScrollLock"),eg=r.forwardRef((e,n)=>{let{__scopeMenu:a,loop:o=!1,trapFocus:i,onOpenAutoFocus:m,onCloseAutoFocus:p,disableOutsidePointerEvents:f,onEntryFocus:h,onEscapeKeyDown:x,onPointerDownOutside:y,onFocusOutside:v,onInteractOutside:b,onDismiss:j,disableOutsideScroll:C,...w}=e,M=J(eo,a),S=W(eo,a),N=V(a),R=X(a),A=G(a),[E,k]=r.useState(null),T=r.useRef(null),L=(0,l.useComposedRefs)(n,T,M.onContentChange),I=r.useRef(0),P=r.useRef(""),D=r.useRef(0),F=r.useRef(null),K=r.useRef("right"),B=r.useRef(0),z=C?U.RemoveScroll:r.Fragment;r.useEffect(()=>()=>window.clearTimeout(I.current),[]),(0,d.useFocusGuards)();let q=r.useCallback(e=>{var t,r;return K.current===F.current?.side&&(t=e,!!(r=F.current?.area)&&function(e,t){let{x:r,y:s}=e,n=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let o=t[e],l=t[a],i=o.x,c=o.y,d=l.x,u=l.y;c>s!=u>s&&r<(d-i)*(s-c)/(u-c)+i&&(n=!n)}return n}({x:t.clientX,y:t.clientY},r))},[]);return(0,t.jsx)(el,{scope:a,searchRef:P,onItemEnter:r.useCallback(e=>{q(e)&&e.preventDefault()},[q]),onItemLeave:r.useCallback(e=>{q(e)||(T.current?.focus(),k(null))},[q]),onTriggerLeave:r.useCallback(e=>{q(e)&&e.preventDefault()},[q]),pointerGraceTimerRef:D,onPointerGraceIntentChange:r.useCallback(e=>{F.current=e},[]),children:(0,t.jsx)(z,{...C?{as:em,allowPinchZoom:!0}:void 0,children:(0,t.jsx)(u.FocusScope,{asChild:!0,trapped:i,onMountAutoFocus:(0,s.composeEventHandlers)(m,e=>{e.preventDefault(),T.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:p,children:(0,t.jsx)(c.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:x,onPointerDownOutside:y,onFocusOutside:v,onInteractOutside:b,onDismiss:j,children:(0,t.jsx)(_,{asChild:!0,...R,dir:S.dir,orientation:"vertical",loop:o,currentTabStopId:E,onCurrentTabStopIdChange:k,onEntryFocus:(0,s.composeEventHandlers)(h,e=>{S.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,t.jsx)(g.Content,{role:"menu","aria-orientation":"vertical","data-state":eF(M.open),"data-radix-menu-content":"",dir:S.dir,...N,...w,ref:L,style:{outline:"none",...w.style},onKeyDown:(0,s.composeEventHandlers)(w.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,s=1===e.key.length;if(t){var n;let t,a,o,l,i,c;"Tab"===e.key&&e.preventDefault(),!r&&s&&(n=e.key,t=P.current+n,a=A().filter(e=>!e.disabled),o=document.activeElement,l=a.find(e=>e.ref.current===o)?.textValue,i=function(e,t,r){var s;let n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=r?e.indexOf(r):-1,o=(s=Math.max(a,0),e.map((t,r)=>e[(s+r)%e.length]));1===n.length&&(o=o.filter(e=>e!==r));let l=o.find(e=>e.toLowerCase().startsWith(n.toLowerCase()));return l!==r?l:void 0}(a.map(e=>e.textValue),t,l),c=a.find(e=>e.textValue===i)?.ref.current,function e(t){P.current=t,window.clearTimeout(I.current),""!==t&&(I.current=window.setTimeout(()=>e(""),1e3))}(t),c&&setTimeout(()=>c.focus()))}let a=T.current;if(e.target!==a||!H.includes(e.key))return;e.preventDefault();let o=A().filter(e=>!e.disabled).map(e=>e.ref.current);O.includes(e.key)&&o.reverse(),function(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}(o)}),onBlur:(0,s.composeEventHandlers)(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(I.current),P.current="")}),onPointerMove:(0,s.composeEventHandlers)(e.onPointerMove,ez(e=>{let t=e.target,r=B.current!==e.clientX;e.currentTarget.contains(t)&&r&&(K.current=e.clientX>B.current?"right":"left",B.current=e.clientX)}))})})})})})})});ec.displayName=eo;var ep=r.forwardRef((e,r)=>{let{__scopeMenu:s,...n}=e;return(0,t.jsx)(a.Primitive.div,{role:"group",...n,ref:r})});ep.displayName="MenuGroup";var ef=r.forwardRef((e,r)=>{let{__scopeMenu:s,...n}=e;return(0,t.jsx)(a.Primitive.div,{...n,ref:r})});ef.displayName="MenuLabel";var eh="MenuItem",ex="menu.itemSelect",ey=r.forwardRef((e,n)=>{let{disabled:o=!1,onSelect:i,...c}=e,d=r.useRef(null),u=W(eh,e.__scopeMenu),m=ei(eh,e.__scopeMenu),g=(0,l.useComposedRefs)(n,d),p=r.useRef(!1);return(0,t.jsx)(ev,{...c,ref:g,disabled:o,onClick:(0,s.composeEventHandlers)(e.onClick,()=>{let e=d.current;if(!o&&e){let t=new CustomEvent(ex,{bubbles:!0,cancelable:!0});e.addEventListener(ex,e=>i?.(e),{once:!0}),(0,a.dispatchDiscreteCustomEvent)(e,t),t.defaultPrevented?p.current=!1:u.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),p.current=!0},onPointerUp:(0,s.composeEventHandlers)(e.onPointerUp,e=>{p.current||e.currentTarget?.click()}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{let t=""!==m.searchRef.current;o||t&&" "===e.key||D.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});ey.displayName=eh;var ev=r.forwardRef((e,n)=>{let{__scopeMenu:o,disabled:i=!1,textValue:c,...d}=e,u=ei(eh,o),m=X(o),g=r.useRef(null),p=(0,l.useComposedRefs)(n,g),[f,h]=r.useState(!1),[x,y]=r.useState("");return r.useEffect(()=>{let e=g.current;e&&y((e.textContent??"").trim())},[d.children]),(0,t.jsx)(z.ItemSlot,{scope:o,disabled:i,textValue:c??x,children:(0,t.jsx)(k,{asChild:!0,...m,focusable:!i,children:(0,t.jsx)(a.Primitive.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...d,ref:p,onPointerMove:(0,s.composeEventHandlers)(e.onPointerMove,ez(e=>{i?u.onItemLeave(e):(u.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,s.composeEventHandlers)(e.onPointerLeave,ez(e=>u.onItemLeave(e))),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>h(!0)),onBlur:(0,s.composeEventHandlers)(e.onBlur,()=>h(!1))})})})}),eb=r.forwardRef((e,r)=>{let{checked:n=!1,onCheckedChange:a,...o}=e;return(0,t.jsx)(e_,{scope:e.__scopeMenu,checked:n,children:(0,t.jsx)(ey,{role:"menuitemcheckbox","aria-checked":eK(n)?"mixed":n,...o,ref:r,"data-state":eB(n),onSelect:(0,s.composeEventHandlers)(o.onSelect,()=>a?.(!!eK(n)||!n),{checkForDefaultPrevented:!1})})})});eb.displayName="MenuCheckboxItem";var ej="MenuRadioGroup",[eC,ew]=$(ej,{value:void 0,onValueChange:()=>{}}),eM=r.forwardRef((e,r)=>{let{value:s,onValueChange:n,...a}=e,o=(0,h.useCallbackRef)(n);return(0,t.jsx)(eC,{scope:e.__scopeMenu,value:s,onValueChange:o,children:(0,t.jsx)(ep,{...a,ref:r})})});eM.displayName=ej;var eS="MenuRadioItem",eN=r.forwardRef((e,r)=>{let{value:n,...a}=e,o=ew(eS,e.__scopeMenu),l=n===o.value;return(0,t.jsx)(e_,{scope:e.__scopeMenu,checked:l,children:(0,t.jsx)(ey,{role:"menuitemradio","aria-checked":l,...a,ref:r,"data-state":eB(l),onSelect:(0,s.composeEventHandlers)(a.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});eN.displayName=eS;var eR="MenuItemIndicator",[e_,eA]=$(eR,{checked:!1}),eE=r.forwardRef((e,r)=>{let{__scopeMenu:s,forceMount:n,...o}=e,l=eA(eR,s);return(0,t.jsx)(f.Presence,{present:n||eK(l.checked)||!0===l.checked,children:(0,t.jsx)(a.Primitive.span,{...o,ref:r,"data-state":eB(l.checked)})})});eE.displayName=eR;var ek=r.forwardRef((e,r)=>{let{__scopeMenu:s,...n}=e;return(0,t.jsx)(a.Primitive.div,{role:"separator","aria-orientation":"horizontal",...n,ref:r})});ek.displayName="MenuSeparator";var eT=r.forwardRef((e,r)=>{let{__scopeMenu:s,...n}=e,a=V(s);return(0,t.jsx)(g.Arrow,{...a,...n,ref:r})});eT.displayName="MenuArrow";var eL="MenuSub",[eI,eP]=$(eL);var eU="MenuSubTrigger",eD=r.forwardRef((e,n)=>{let a=J(eU,e.__scopeMenu),o=W(eU,e.__scopeMenu),i=eP(eU,e.__scopeMenu),c=ei(eU,e.__scopeMenu),d=r.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:m}=c,g={__scopeMenu:e.__scopeMenu},p=r.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return r.useEffect(()=>p,[p]),r.useEffect(()=>{let e=u.current;return()=>{window.clearTimeout(e),m(null)}},[u,m]),(0,t.jsx)(et,{asChild:!0,...g,children:(0,t.jsx)(ev,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":i.contentId,"data-state":eF(a.open),...e,ref:(0,l.composeRefs)(n,i.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:(0,s.composeEventHandlers)(e.onPointerMove,ez(t=>{c.onItemEnter(t),!t.defaultPrevented&&(e.disabled||a.open||d.current||(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{a.onOpenChange(!0),p()},100)))})),onPointerLeave:(0,s.composeEventHandlers)(e.onPointerLeave,ez(e=>{p();let t=a.content?.getBoundingClientRect();if(t){let r=a.content?.dataset.side,s="right"===r,n=t[s?"left":"right"],o=t[s?"right":"left"];c.onPointerGraceIntentChange({area:[{x:e.clientX+(s?-5:5),y:e.clientY},{x:n,y:t.top},{x:o,y:t.top},{x:o,y:t.bottom},{x:n,y:t.bottom}],side:r}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(e),e.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,t=>{let r=""!==c.searchRef.current;e.disabled||r&&" "===t.key||F[o.dir].includes(t.key)&&(a.onOpenChange(!0),a.content?.focus(),t.preventDefault())})})})});eD.displayName=eU;var eO="MenuSubContent",eH=r.forwardRef((e,n)=>{let a=en(eo,e.__scopeMenu),{forceMount:o=a.forceMount,...i}=e,c=J(eo,e.__scopeMenu),d=W(eo,e.__scopeMenu),u=eP(eO,e.__scopeMenu),m=r.useRef(null),g=(0,l.useComposedRefs)(n,m);return(0,t.jsx)(z.Provider,{scope:e.__scopeMenu,children:(0,t.jsx)(f.Presence,{present:o||c.open,children:(0,t.jsx)(z.Slot,{scope:e.__scopeMenu,children:(0,t.jsx)(eg,{id:u.contentId,"aria-labelledby":u.triggerId,...i,ref:g,align:"start",side:"rtl"===d.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{d.isUsingKeyboardRef.current&&m.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,s.composeEventHandlers)(e.onFocusOutside,e=>{e.target!==u.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:(0,s.composeEventHandlers)(e.onEscapeKeyDown,e=>{d.onClose(),e.preventDefault()}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),r=K[d.dir].includes(e.key);t&&r&&(c.onOpenChange(!1),u.trigger?.focus(),e.preventDefault())})})})})})});function eF(e){return e?"open":"closed"}function eK(e){return"indeterminate"===e}function eB(e){return eK(e)?"indeterminate":e?"checked":"unchecked"}function ez(e){return t=>"mouse"===t.pointerType?e(t):void 0}eH.displayName=eO;var eG="ContextMenu",[eq,e$]=(0,n.createContextScope)(eG,[Q]),eQ=Q(),[eV,eX]=eq(eG),eY=e=>{let{__scopeContextMenu:s,children:n,onOpenChange:a,dir:o,modal:l=!0}=e,[i,c]=r.useState(!1),d=eQ(s),u=(0,h.useCallbackRef)(a),m=r.useCallback(e=>{c(e),u(e)},[u]);return(0,t.jsx)(eV,{scope:s,open:i,onOpenChange:m,modal:l,children:(0,t.jsx)(ee,{...d,dir:o,open:i,onOpenChange:m,modal:l,children:n})})};eY.displayName=eG;var eJ="ContextMenuTrigger",eZ=r.forwardRef((e,n)=>{let{__scopeContextMenu:o,disabled:l=!1,...i}=e,c=eX(eJ,o),d=eQ(o),u=r.useRef({x:0,y:0}),m=r.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...u.current})}),g=r.useRef(0),p=r.useCallback(()=>window.clearTimeout(g.current),[]),f=e=>{u.current={x:e.clientX,y:e.clientY},c.onOpenChange(!0)};return r.useEffect(()=>p,[p]),r.useEffect(()=>void(l&&p()),[l,p]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(et,{...d,virtualRef:m}),(0,t.jsx)(a.Primitive.span,{"data-state":c.open?"open":"closed","data-disabled":l?"":void 0,...i,ref:n,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:l?e.onContextMenu:(0,s.composeEventHandlers)(e.onContextMenu,e=>{p(),f(e),e.preventDefault()}),onPointerDown:l?e.onPointerDown:(0,s.composeEventHandlers)(e.onPointerDown,e4(e=>{p(),g.current=window.setTimeout(()=>f(e),700)})),onPointerMove:l?e.onPointerMove:(0,s.composeEventHandlers)(e.onPointerMove,e4(p)),onPointerCancel:l?e.onPointerCancel:(0,s.composeEventHandlers)(e.onPointerCancel,e4(p)),onPointerUp:l?e.onPointerUp:(0,s.composeEventHandlers)(e.onPointerUp,e4(p))})]})});eZ.displayName=eJ;var eW=e=>{let{__scopeContextMenu:r,...s}=e,n=eQ(r);return(0,t.jsx)(ea,{...n,...s})};eW.displayName="ContextMenuPortal";var e0="ContextMenuContent",e1=r.forwardRef((e,s)=>{let{__scopeContextMenu:n,...a}=e,o=eX(e0,n),l=eQ(n),i=r.useRef(!1);return(0,t.jsx)(ec,{...l,...a,ref:s,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),!t.defaultPrevented&&i.current&&t.preventDefault(),i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||o.modal||(i.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});e1.displayName=e0,r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(ep,{...a,...n,ref:r})}).displayName="ContextMenuGroup",r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(ef,{...a,...n,ref:r})}).displayName="ContextMenuLabel";var e2=r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(ey,{...a,...n,ref:r})});e2.displayName="ContextMenuItem",r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(eb,{...a,...n,ref:r})}).displayName="ContextMenuCheckboxItem",r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(eM,{...a,...n,ref:r})}).displayName="ContextMenuRadioGroup",r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(eN,{...a,...n,ref:r})}).displayName="ContextMenuRadioItem",r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(eE,{...a,...n,ref:r})}).displayName="ContextMenuItemIndicator";var e3=r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(ek,{...a,...n,ref:r})});e3.displayName="ContextMenuSeparator",r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(eT,{...a,...n,ref:r})}).displayName="ContextMenuArrow";function e4(e){return t=>"mouse"!==t.pointerType?e(t):void 0}r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(eD,{...a,...n,ref:r})}).displayName="ContextMenuSubTrigger",r.forwardRef((e,r)=>{let{__scopeContextMenu:s,...n}=e,a=eQ(s);return(0,t.jsx)(eH,{...a,...n,ref:r,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="ContextMenuSubContent";var e5=e.i(264458);let e7=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(eW,{children:(0,t.jsx)(e1,{ref:s,className:(0,e5.default)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-white/10 bg-zinc-900/95 p-1 text-white shadow-md",e),...r})}));e7.displayName=e1.displayName;let e6=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(e2,{ref:s,className:(0,e5.default)("relative flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none","focus:bg-white/10",e),...r}));e6.displayName=e2.displayName,r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(e3,{ref:s,className:(0,e5.default)("-mx-1 my-1 h-px bg-white/10",e),...r})).displayName=e3.displayName,e.s(["ContextMenu",0,eY,"ContextMenuContent",0,e7,"ContextMenuItem",0,e6,"ContextMenuTrigger",0,eZ],821896);var e8=e.i(649785),e9=e.i(132838),te=e.i(606933),tt=e.i(264552),tr=e.i(565813),ts=e.i(619416),tn=e.i(936736),ta=e.i(54567),to=e.i(942219);async function tl(e){let{roomId:t,messageId:r,reason:s}=e;ta.logger.debug("[useDeleteChatMessage] Sending delete request",{roomId:t,messageId:r,reason:s}),await tn.livechatApi.post(`chat/moderation/rooms/${t}/messages/${r}/delete`,{json:{reason:s}})}function ti(e){return e.banUser}async function tc(e){let{roomId:t,userAddress:r,username:s,reason:n}=e;ta.logger.debug("[useBanChatUser] Sending ban request",{roomId:t,userAddress:r,username:s,reason:n}),await tn.livechatApi.post(`chat/moderation/rooms/${t}/bans`,{json:{userAddress:r,username:s,reason:n}})}function td(e,t){return e+t.messages.length}function tu(e,t){return e+t.messages.length}function tm(e,t){let{roomId:r,userAddress:s}=t;ta.logger.error("[useBanChatUser] Ban request failed",{roomId:r,userAddress:s,error:e.message})}function tg(e){return e.unbanUser}async function tp(e){let{roomId:t,userAddress:r}=e;ta.logger.debug("[useUnbanChatUser] Sending unban request",{roomId:t,userAddress:r}),await tn.livechatApi.delete(`chat/moderation/rooms/${t}/bans/${r}`)}function tf(e,t){let{roomId:r,userAddress:s}=t;ta.logger.error("[useUnbanChatUser] Unban request failed",{roomId:r,userAddress:s,error:e.message})}async function th(e){let{roomId:t,userAddress:r}=e;ta.logger.debug("[useAssignModerator] Sending assign moderator request",{roomId:t,userAddress:r}),await tn.livechatApi.post(`chat/moderation/rooms/${t}/moderators`,{json:{userAddress:r}})}function tx(e,t){let{roomId:r,userAddress:s}=t;ta.logger.error("[useAssignModerator] Assign moderator request failed",{roomId:r,userAddress:s,error:e.message})}async function ty(e){let{roomId:t,userAddress:r}=e;ta.logger.debug("[useUnassignModerator] Sending unassign moderator request",{roomId:t,userAddress:r}),await tn.livechatApi.delete(`chat/moderation/rooms/${t}/moderators/${r}`)}function tv(e,t){let{roomId:r,userAddress:s}=t;ta.logger.error("[useUnassignModerator] Unassign moderator request failed",{roomId:r,userAddress:s,error:e.message})}e.s(["useAssignModerator",0,()=>{let e,t=(0,e8.c)(2),r=(0,te.useQueryClient)();return t[0]!==r?(e={mutationFn:th,onSuccess:(e,t)=>{let{roomId:s,userAddress:n}=t;ta.logger.debug("[useAssignModerator] Assign moderator request successful",{roomId:s,userAddress:n}),r.invalidateQueries({queryKey:[tr.GET_ROOM_MODERATORS_QUERY_KEY,s]})},onError:tx},t[0]=r,t[1]=e):e=t[1],(0,e9.useMutation)(e)},"useBanChatUser",0,()=>{let e,t=(0,e8.c)(3),r=(0,ts.useChatParticipantsStore)(ti),s=(0,te.useQueryClient)();return t[0]!==r||t[1]!==s?(e={mutationFn:tc,onSuccess:(e,t)=>{let{roomId:n,userAddress:a}=t;ta.logger.debug("[useBanChatUser] Ban request successful",{roomId:n,userAddress:a}),r(a,n),s.invalidateQueries({queryKey:[tt.GET_BANNED_USERS_QUERY_KEY,n]});let o=(0,to.getMessagesQueryKey)(n);s.setQueryData(o,e=>{if(!e)return{pages:[],pageParams:[]};let t={...e,pages:e.pages.map(e=>({...e,messages:e.messages.filter(e=>e.userAddress!==a)}))},r=e.pages.reduce(td,0),s=t.pages.reduce(tu,0);return ta.logger.debug(`[useBanChatUser] Optimistically removed ${r-s} messages from banned user ${a}`),t})},onError:tm},t[0]=r,t[1]=s,t[2]=e):e=t[2],(0,e9.useMutation)(e)},"useDeleteChatMessage",0,()=>{let e,t=(0,e8.c)(2),r=(0,te.useQueryClient)();return t[0]!==r?(e={mutationFn:tl,onSuccess:(e,t)=>{let{roomId:s,messageId:n}=t;ta.logger.debug("[useDeleteChatMessage] Delete request successful",{roomId:s,messageId:n}),r.invalidateQueries({queryKey:(0,to.getMessagesQueryKey)(s),exact:!0})},onError:(e,t)=>{let{roomId:s,messageId:n}=t;ta.logger.error("[useDeleteChatMessage] Delete request failed",{roomId:s,messageId:n,error:e.message}),r.invalidateQueries({queryKey:(0,to.getMessagesQueryKey)(s),exact:!0})}},t[0]=r,t[1]=e):e=t[1],(0,e9.useMutation)(e)},"useUnassignModerator",0,()=>{let e,t=(0,e8.c)(2),r=(0,te.useQueryClient)();return t[0]!==r?(e={mutationFn:ty,onSuccess:(e,t)=>{let{roomId:s,userAddress:n}=t;ta.logger.debug("[useUnassignModerator] Unassign moderator request successful",{roomId:s,userAddress:n}),r.invalidateQueries({queryKey:[tr.GET_ROOM_MODERATORS_QUERY_KEY,s]})},onError:tv},t[0]=r,t[1]=e):e=t[1],(0,e9.useMutation)(e)},"useUnbanChatUser",0,()=>{let e,t=(0,e8.c)(3),r=(0,ts.useChatParticipantsStore)(tg),s=(0,te.useQueryClient)();return t[0]!==s||t[1]!==r?(e={mutationFn:tp,onSuccess:(e,t)=>{let{roomId:n,userAddress:a}=t;ta.logger.debug("[useUnbanChatUser] Unban request successful",{roomId:n,userAddress:a}),r(a,n),s.invalidateQueries({queryKey:[tt.GET_BANNED_USERS_QUERY_KEY,n]})},onError:tf},t[0]=s,t[1]=r,t[2]=e):e=t[2],(0,e9.useMutation)(e)}],385044)},632628,411227,584474,e=>{"use strict";var t=e.i(649785),r=e.i(281675);let s=/(?:^|\s)@([a-zA-Z0-9_]{0,32})$/,n=/@[a-zA-Z0-9_]*$/;var a=e.i(690877),o=e.i(936736),l=e.i(54567);let i=e=>["get-chat-participants",e],c=(e,r)=>{let s,n,c,d,u=(0,t.c)(10);u[0]!==r?(s=void 0===r?{}:r,u[0]=r,u[1]=s):s=u[1];let{enabled:m}=s;u[2]!==e?(n=i(e),u[2]=e,u[3]=n):n=u[3],u[4]!==e?(c=async()=>{if(!e)return l.logger.debug("[useGetChatParticipants] Skipping fetch: roomId is missing"),[];l.logger.debug(`[useGetChatParticipants] Fetching participants for room: ${e}`);try{let t=await o.livechatApi.get(`chat/moderation/rooms/${e}/participants`).json();return l.logger.debug(`[useGetChatParticipants] Fetched ${t.length} participants for room: ${e}`),t}catch(r){let t=r instanceof Error?r.message:String(r);throw l.logger.error(`[useGetChatParticipants] Failed to fetch participants for room: ${e}`,{error:t}),r}},u[4]=e,u[5]=c):c=u[5];let g=!!e&&(void 0===m||m);return u[6]!==n||u[7]!==c||u[8]!==g?(d={queryKey:n,queryFn:c,enabled:g,staleTime:6e4},u[6]=n,u[7]=c,u[8]=g,u[9]=d):d=u[9],(0,a.useQuery)(d)};e.s(["getChatParticipantsQueryKey",0,i,"useGetChatParticipants",0,c],411227);let d=(0,e.i(78436).create)(e=>({replyTarget:null,setReplyTarget:t=>e({replyTarget:t}),clearReplyTarget:()=>e({replyTarget:null})})),u=()=>{let e,r=(0,t.c)(4),s=d(m),n=d(g),a=d(p);return r[0]!==a||r[1]!==s||r[2]!==n?(e={replyTarget:s,setReplyTarget:n,clearReplyTarget:a},r[0]=a,r[1]=s,r[2]=n,r[3]=e):e=r[3],e};function m(e){return e.replyTarget}function g(e){return e.setReplyTarget}function p(e){return e.clearReplyTarget}e.s(["useReplyTarget",0,u],584474);var f=e.i(855645);function h(e){return e.username}e.s(["useMessageInput",0,()=>{let e,a,o,l,i,d,m,g,p,x=(0,t.c)(35),{sendMessage:y,isConnected:v,isJoined:b,isSendingMessage:j,readOnly:C,currentRoomId:w}=(0,f.useLivechat)(),M=!!w;x[0]!==M?(e={enabled:M},x[0]=M,x[1]=e):e=x[1];let{data:S}=c(w,e);x[2]!==S?(a=void 0===S?[]:S,x[2]=S,x[3]=a):a=x[3];let N=a,{replyTarget:R,clearReplyTarget:_}=u(),[A,E]=(0,r.useState)(""),[k,T]=(0,r.useState)(null),[L,I]=(0,r.useState)(!1),P=(0,r.useRef)(null),U=v&&b&&!j;x[4]!==A?(o=A.trim(),x[4]=A,x[5]=o):o=x[5];let D=!o;x[6]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{let t=e.target.value;E(t);let r=e.target.selectionStart??t.length,n=t.slice(0,r),a=new RegExp(s),o=n.match(a);o?(T(o[1]),I(!0)):(T(null),I(!1))},x[6]=l):l=x[6];let O=l;x[7]!==U||x[8]!==_||x[9]!==A||x[10]!==D||x[11]!==R||x[12]!==y?(i=e=>{e?.preventDefault(),U&&!D&&(y({messageText:R?`@${R.username} ${A.trim()}`:A.trim(),replyToId:R?.id,replyPreview:R?R.message.slice(0,80):void 0}),E(""),T(null),I(!1),_(),P.current?.focus())},x[7]=U,x[8]=_,x[9]=A,x[10]=D,x[11]=R,x[12]=y,x[13]=i):i=x[13];let H=i;x[14]!==H?(d=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),H())},x[14]=H,x[15]=d):d=x[15];let F=d;e:{let e;if(!k){let e;x[16]===Symbol.for("react.memo_cache_sentinel")?(e=[],x[16]=e):e=x[16],m=e;break e}if(x[17]!==k||x[18]!==N){let t=k.toLowerCase();e=N.filter(e=>e.username.toLowerCase().startsWith(t)).map(h).slice(0,5),x[17]=k,x[18]=N,x[19]=e}else e=x[19];m=e}let K=m;x[20]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{E(t=>{let r=new RegExp(s),a=new RegExp(n);return t.replace(r,t=>t.replace(a,`@${e} `))}),T(null),I(!1),setTimeout(()=>P.current?.focus(),0)},x[20]=g):g=x[20];let B=g;return x[21]!==U||x[22]!==_||x[23]!==F||x[24]!==H||x[25]!==A||x[26]!==v||x[27]!==D||x[28]!==b||x[29]!==j||x[30]!==C||x[31]!==R||x[32]!==L||x[33]!==K?(p={inputRef:P,inputText:A,canSendMessage:U,isInputEmpty:D,showSuggestions:L,suggestions:K,isSendingMessage:j,isConnected:v,isJoined:b,readOnly:C,replyTarget:R,clearReplyTarget:_,handleInputChange:O,handleSubmit:H,handleKeyDown:F,handleSelectSuggestion:B},x[21]=U,x[22]=_,x[23]=F,x[24]=H,x[25]=A,x[26]=v,x[27]=D,x[28]=b,x[29]=j,x[30]=C,x[31]=R,x[32]=L,x[33]=K,x[34]=p):p=x[34],p}],632628)},848963,770751,267753,37473,273491,662230,717298,588599,243900,e=>{"use strict";var t=e.i(942765),r=e.i(649785),s=e.i(264458),n=e.i(89623),a=e.i(821896),o=e.i(264552),l=e.i(385044),i=e.i(632628),c=e.i(10785),d=e.i(281675),u=e.i(967388),m=e.i(203350);let g=(e,{roomId:t,messageId:r,emojiKey:s,source:n,context:a})=>{(0,m.recordUserEvent)((0,c.createInteractLivechatReaction)({roomId:t,messageId:r,emojiKey:s,action:e,source:n}),a)};var p=e.i(855645),f=e.i(550118),h=e.i(298180),x=e.i(600963),y=e.i(480530),v=e.i(66866),b=e.i(584474),j=e.i(474877),C=e.i(18671),w=e.i(396693),M=e.i(376530);let S=(0,M.default)("corner-up-left",[["polyline",{points:"9 14 4 9 9 4",key:"881910"}],["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}]]),N=(0,M.default)("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);e.s(["Ban",()=>N],770751);let R=(0,M.default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>R],267753);let _=(0,M.default)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);e.s(["ShieldAlert",()=>_],37473);var A=e.i(141327),E=e.i(876730),k=e.i(203296),T=e.i(481834);let L=s.default,I=k.Root,P=k.Trigger,U=k.Sub,D=d.default.forwardRef((e,s)=>{let n,a,o,l,i,c,d,u=(0,r.c)(14);u[0]!==e?({className:a,inset:o,children:n,...l}=e,u[0]=e,u[1]=n,u[2]=a,u[3]=o,u[4]=l):(n=u[1],a=u[2],o=u[3],l=u[4]);let m=o&&"pl-8";return u[5]!==a||u[6]!==m?(i=L("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-gray-700 data-[state=open]:bg-gray-700 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",m,a),u[5]=a,u[6]=m,u[7]=i):i=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)(T.ChevronRight,{className:"ml-auto"}),u[8]=c):c=u[8],u[9]!==n||u[10]!==l||u[11]!==s||u[12]!==i?(d=(0,t.jsxs)(k.SubTrigger,{ref:s,className:i,...l,children:[n,c]}),u[9]=n,u[10]=l,u[11]=s,u[12]=i,u[13]=d):d=u[13],d});D.displayName=k.SubTrigger.displayName;let O=d.default.forwardRef((e,s)=>{let n,a,o,l,i=(0,r.c)(9);return i[0]!==e?({className:n,...a}=e,i[0]=e,i[1]=n,i[2]=a):(n=i[1],a=i[2]),i[3]!==n?(o=L("z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-700 bg-bg-secondary p-1 text-gray-200 shadow-lg",n),i[3]=n,i[4]=o):o=i[4],i[5]!==a||i[6]!==s||i[7]!==o?(l=(0,t.jsx)(k.SubContent,{ref:s,className:o,...a}),i[5]=a,i[6]=s,i[7]=o,i[8]=l):l=i[8],l});O.displayName=k.SubContent.displayName;let H=d.default.forwardRef((e,s)=>{let n,a,o,l,i,c=(0,r.c)(11);c[0]!==e?({className:n,sideOffset:o,...a}=e,c[0]=e,c[1]=n,c[2]=a,c[3]=o):(n=c[1],a=c[2],o=c[3]);let d=void 0===o?4:o;return c[4]!==n?(l=L("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border border-gray-700 bg-bg-secondary p-1 text-gray-200 shadow-md",n),c[4]=n,c[5]=l):l=c[5],c[6]!==a||c[7]!==s||c[8]!==d||c[9]!==l?(i=(0,t.jsx)(k.Portal,{children:(0,t.jsx)(k.Content,{ref:s,sideOffset:d,className:l,...a})}),c[6]=a,c[7]=s,c[8]=d,c[9]=l,c[10]=i):i=c[10],i});H.displayName=k.Content.displayName;let F=d.default.forwardRef((e,s)=>{let n,a,o,l,i,c,d,u,m=(0,r.c)(17);m[0]!==e?({className:a,inset:i,icon:l,destructive:o,children:n,...c}=e,m[0]=e,m[1]=n,m[2]=a,m[3]=o,m[4]=l,m[5]=i,m[6]=c):(n=m[1],a=m[2],o=m[3],l=m[4],i=m[5],c=m[6]);let g=i&&"pl-8",p=o&&"text-red-400 focus:text-red-400";return m[7]!==a||m[8]!==g||m[9]!==p?(d=L("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-gray-700 focus:text-gray-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",g,p,a),m[7]=a,m[8]=g,m[9]=p,m[10]=d):d=m[10],m[11]!==n||m[12]!==l||m[13]!==c||m[14]!==s||m[15]!==d?(u=(0,t.jsxs)(k.Item,{ref:s,className:d,...c,children:[l,n]}),m[11]=n,m[12]=l,m[13]=c,m[14]=s,m[15]=d,m[16]=u):u=m[16],u});F.displayName=k.Item.displayName;let K=d.default.forwardRef((e,s)=>{let n,a,o,l,i,c=(0,r.c)(11);c[0]!==e?({className:n,inset:a,...o}=e,c[0]=e,c[1]=n,c[2]=a,c[3]=o):(n=c[1],a=c[2],o=c[3]);let d=a&&"pl-8";return c[4]!==n||c[5]!==d?(l=L("px-2 py-1.5 text-sm font-semibold",d,n),c[4]=n,c[5]=d,c[6]=l):l=c[6],c[7]!==o||c[8]!==s||c[9]!==l?(i=(0,t.jsx)(k.Label,{ref:s,className:l,...o}),c[7]=o,c[8]=s,c[9]=l,c[10]=i):i=c[10],i});K.displayName=k.Label.displayName;let B=d.default.forwardRef((e,s)=>{let n,a,o,l,i=(0,r.c)(9);return i[0]!==e?({className:n,...a}=e,i[0]=e,i[1]=n,i[2]=a):(n=i[1],a=i[2]),i[3]!==n?(o=L("-mx-1 my-1 h-px bg-gray-700",n),i[3]=n,i[4]=o):o=i[4],i[5]!==a||i[6]!==s||i[7]!==o?(l=(0,t.jsx)(k.Separator,{ref:s,className:o,...a}),i[5]=a,i[6]=s,i[7]=o,i[8]=l):l=i[8],l});B.displayName=k.Separator.displayName,Object.assign(I,{Trigger:P,Content:H,Sub:U,SubTrigger:D,SubContent:O,Label:K,Separator:B}),e.s(["DropdownMenu",()=>I,"DropdownMenuItem",()=>F],273491);var z=e.i(408289),G=e.i(325320),q=e.i(54567);let $=()=>{let e,t,s,n,a,o=(0,r.c)(20),{socket:l,currentRoomId:i,pinnedMessageId:d,isCreator:m}=(0,p.useLivechat)(),{mintId:g}=(0,G.useLivestreamContext)();o[0]!==l?(e={socket:l},o[0]=l,o[1]=e):e=o[1];let{emitPinMessage:f,emitUnpinMessage:h}=(0,v.useLivechatSocketEmitters)(e);o[2]!==i||o[3]!==f||o[4]!==m||o[5]!==g?(t=e=>{m&&i&&(q.logger.debug("[useChatPinActions] pinMessage",{currentRoomId:i,messageId:e}),f(i,e),(0,z.trackMessagePin)({chatId:i,chatType:c.ChatType.LIVECHAT,messageId:e,mint:g,context:u.LIVECHAT_SOURCE_CONTEXTS.CHAT_MESSAGE}))},o[2]=i,o[3]=f,o[4]=m,o[5]=g,o[6]=t):t=o[6];let x=t;o[7]!==i||o[8]!==h||o[9]!==m||o[10]!==g||o[11]!==d?(s=()=>{m&&i&&(q.logger.debug("[useChatPinActions] unpinMessage",{currentRoomId:i}),h(i),(0,z.trackMessageUnpin)({chatId:i,chatType:c.ChatType.LIVECHAT,messageId:d||"unknown",mint:g,context:u.LIVECHAT_SOURCE_CONTEXTS.CHAT_MESSAGE}))},o[7]=i,o[8]=h,o[9]=m,o[10]=g,o[11]=d,o[12]=s):s=o[12];let y=s;o[13]!==d?(n=e=>d===e,o[13]=d,o[14]=n):n=o[14];let b=n;return o[15]!==b||o[16]!==x||o[17]!==d||o[18]!==y?(a={pinMessage:x,unpinMessage:y,isPinned:b,pinnedMessageId:d},o[15]=b,o[16]=x,o[17]=d,o[18]=y,o[19]=a):a=o[19],a};e.s(["useChatPinActions",0,$],662230);var Q=e.i(792425);let V=e=>{let s,n,a,o,i,c,d,u,m,g=(0,r.c)(34),{onReply:f,onDelete:h,onUnban:x,isBanned:y,userAddress:v,roomId:b,messageId:j,hideBan:w}=e,M=void 0!==y&&y,k=void 0!==w&&w,{mutate:T}=(0,l.useBanChatUser)(),{isCreator:L}=(0,p.useLivechat)(),{pinMessage:P,unpinMessage:U,isPinned:D}=$();g[0]!==D||g[1]!==j?(s=D(j),g[0]=D,g[1]=j,g[2]=s):s=g[2];let O=s;g[3]!==T||g[4]!==b||g[5]!==v?(n=e=>{q.logger.debug("[ModeratorMessageMenu] handleBan called",{userAddress:v,roomId:b,reason:e}),v&&b?T({userAddress:v,roomId:b,reason:e}):q.logger.warn("[ModeratorMessageMenu] Ban skipped: userAddress or roomId is missing",{userAddress:v,roomId:b})},g[3]=T,g[4]=b,g[5]=v,g[6]=n):n=g[6];let H=n;g[7]!==O||g[8]!==j||g[9]!==P||g[10]!==b||g[11]!==U?(a=()=>{j&&b&&(O?U():P(j))},g[7]=O,g[8]=j,g[9]=P,g[10]=b,g[11]=U,g[12]=a):a=g[12];let K=a;return g[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)(I.Trigger,{asChild:!0,children:(0,t.jsx)("button",{type:"button","aria-label":"Moderation actions",className:"rounded p-1 text-gray-400 hover:bg-gray-700/60 hover:text-gray-200",children:(0,t.jsx)(R,{size:14})})}),g[13]=o):o=g[13],g[14]!==f?(i=f&&(0,t.jsx)(F,{icon:(0,t.jsx)(S,{size:14}),onSelect:f,children:"Reply"}),g[14]=f,g[15]=i):i=g[15],g[16]!==K||g[17]!==L||g[18]!==O||g[19]!==j||g[20]!==b?(c=L&&j&&b&&(0,t.jsx)(F,{icon:(0,t.jsx)(Q.PinIcon,{width:14,height:14}),onSelect:K,children:O?"Unpin message":"Pin message"}),g[16]=K,g[17]=L,g[18]=O,g[19]=j,g[20]=b,g[21]=c):c=g[21],g[22]!==h?(d=h&&(0,t.jsx)(F,{icon:(0,t.jsx)(E.Trash2,{size:14}),onSelect:h,children:"Delete message"}),g[22]=h,g[23]=d):d=g[23],g[24]!==H||g[25]!==k||g[26]!==M||g[27]!==x?(u=!k&&(M?x&&(0,t.jsx)(F,{icon:(0,t.jsx)(N,{size:14}),onSelect:x,children:"Unban user"}):(0,t.jsxs)(I.Sub,{children:[(0,t.jsxs)(I.SubTrigger,{className:"text-red-400",children:[(0,t.jsx)(N,{size:14}),"Ban user"]}),(0,t.jsxs)(I.SubContent,{children:[(0,t.jsx)(I.Label,{children:"Select Ban Reason:"}),(0,t.jsx)(F,{icon:(0,t.jsx)(_,{size:14}),onSelect:()=>H(C.DeleteMessageReasonEnum.TOXIC),children:"Toxic"}),(0,t.jsx)(F,{icon:(0,t.jsx)(A.ShieldCheck,{size:14}),onSelect:()=>H(C.DeleteMessageReasonEnum.SPAM),children:"Spam"})]})]})),g[24]=H,g[25]=k,g[26]=M,g[27]=x,g[28]=u):u=g[28],g[29]!==u||g[30]!==i||g[31]!==c||g[32]!==d?(m=(0,t.jsxs)(I,{children:[o,(0,t.jsxs)(I.Content,{align:"end",children:[i,c,d,u]})]}),g[29]=u,g[30]=i,g[31]=c,g[32]=d,g[33]=m):m=g[33],m};e.s(["ModeratorMessageMenu",0,V],717298);let X=e=>{let n,a,o,l=(0,r.c)(14),{canModerateRoom:i,isCreator:c,messageType:d,isOwnMessage:u,onReply:m,onDelete:g,onUnban:p,isUserBanned:f,userAddress:h,roomId:x,messageId:y}=e;if((i||c)&&d===C.MessageType.REGULAR){let e,r;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.default)("absolute","top-1","right-1"),l[0]=e):e=l[0],l[1]!==u||l[2]!==f||l[3]!==y||l[4]!==g||l[5]!==m||l[6]!==p||l[7]!==x||l[8]!==h?(r=(0,t.jsx)("div",{className:e,children:(0,t.jsx)(V,{onReply:m,onDelete:g,onUnban:p,isBanned:f,userAddress:h,roomId:x,messageId:y,hideBan:u})}),l[1]=u,l[2]=f,l[3]=y,l[4]=g,l[5]=m,l[6]=p,l[7]=x,l[8]=h,l[9]=r):r=l[9],r}return l[10]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.default)("absolute","top-1","right-1","text-gray-400","hover:text-gray-200"),a=(0,t.jsx)(S,{size:14}),l[10]=n,l[11]=a):(n=l[10],a=l[11]),l[12]!==m?(o=(0,t.jsx)("button",{type:"button","aria-label":"Reply",onClick:m,className:n,children:a}),l[12]=m,l[13]=o):o=l[13],o};var Y=e.i(952544);let J=e=>{let n,a,o,l=(0,r.c)(9),{slug:i,className:c,children:d,style:u}=e;l[0]!==i?(n=new URL(`/profile/${encodeURIComponent(i)}`,Y.environment.mainFrontendUrl).toString(),l[0]=i,l[1]=n):n=l[1];let m=n;return l[2]!==c?(a=(0,s.default)(c,"hover:underline"),l[2]=c,l[3]=a):a=l[3],l[4]!==d||l[5]!==m||l[6]!==u||l[7]!==a?(o=(0,t.jsx)("a",{href:m,className:a,style:u,target:"_blank",rel:"noopener noreferrer",children:d}),l[4]=d,l[5]=m,l[6]=u,l[7]=a,l[8]=o):o=l[8],o};e.s(["ProfileLink",0,J],588599);var Z=e.i(574953);let W=e=>{let s,n,a,o=(0,r.c)(8),{username:l,color:i,hidden:c}=e;return c?null:(o[0]!==i?(s={color:i},o[0]=i,o[1]=s):s=o[1],o[2]!==l?(n=(0,Z.getDisplayUsername)(l),o[2]=l,o[3]=n):n=o[3],o[4]!==s||o[5]!==n||o[6]!==l?(a=(0,t.jsx)(J,{slug:l,className:"mb-0.5 text-xs font-semibold",style:s,children:n}),o[4]=s,o[5]=n,o[6]=l,o[7]=a):a=o[7],a)},ee=e=>{let s,n,a=(0,r.c)(5),{content:o,spacerContent:l}=e;return a[0]!==l?(s=(0,t.jsx)("span",{className:"pointer-events-none select-none whitespace-pre opacity-0","aria-hidden":"true",children:l}),a[0]=l,a[1]=s):s=a[1],a[2]!==o||a[3]!==s?(n=(0,t.jsxs)("p",{className:"break-words",children:[o,s]}),a[2]=o,a[3]=s,a[4]=n):n=a[4],n},et=e=>{let s,n,a,o=(0,r.c)(6),{text:l}=e,i="string"==typeof l?l:String(l||"");o[0]===Symbol.for("react.memo_cache_sentinel")?(s=/(@[a-zA-Z0-9_]+)/g,o[0]=s):s=o[0];let c=s;if(o[1]!==i){let e,r=i.split(c);o[3]===Symbol.for("react.memo_cache_sentinel")?(e=(e,r)=>{if(e.match(c)){let s=e.slice(1);return(0,t.jsxs)(J,{slug:s,className:"font-semibold text-indigo-600",children:["@",(0,Z.getDisplayUsername)(s)]},`${e}-${r}`)}return(0,t.jsx)(d.Fragment,{children:e},`${e}-${r}`)},o[3]=e):e=o[3],n=r.map(e),o[1]=i,o[2]=n}else n=o[2];return o[4]!==n?(a=(0,t.jsx)(t.Fragment,{children:n}),o[4]=n,o[5]=a):a=o[5],a},er=e=>{let n,a,o,l=(0,r.c)(4),{text:i}=e;if(!i)return null;l[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.default)("mb-1 mt-0.5","flex items-start gap-1","rounded-sm border-l-2 border-gray-400/30","bg-gray-700/30","py-0.5 pl-1.5 pr-2","text-xs text-gray-300"),l[0]=n):n=l[0];let c=n;return l[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(S,{size:12,className:"mt-0.5 shrink-0"}),l[1]=a):a=l[1],l[2]!==i?(o=(0,t.jsxs)("div",{className:c,children:[a,(0,t.jsx)("span",{className:"max-w-[200px] truncate leading-snug",children:i})]}),l[2]=i,l[3]=o):o=l[3],o},es=e=>{let n,a,o,l,i=(0,r.c)(9),{avatars:c,className:d}=e;i[0]!==c?(n=Array.from(new Set((c||[]).filter(Boolean))).slice(0,3),i[0]=c,i[1]=n):n=i[1];let u=n;return 0===u.length?null:(i[2]!==d?(a=(0,s.default)("flex items-center",d),i[2]=d,i[3]=a):a=i[3],i[4]!==u?(o=u.map(en),i[4]=u,i[5]=o):o=i[5],i[6]!==a||i[7]!==o?(l=(0,t.jsx)("span",{className:a,children:o}),i[6]=a,i[7]=o,i[8]=l):l=i[8],l)};function en(e,r){return(0,t.jsx)("img",{src:e,alt:"avatar",className:(0,s.default)("relative h-3 w-3 rounded-full border border-black/20 object-cover ring-1 ring-black/50",r>0&&"-ml-1"),style:{zIndex:3-r}},e)}let ea=e=>{let n,a,o,l,i=(0,r.c)(11),{item:c,onClick:d,isOwnMessage:u}=e,m=u?c.isMine?"border-transparent bg-white text-primary-black hover:bg-white/90":"border-transparent bg-white/30 text-primary-black hover:bg-white/40":c.isMine?"border-transparent bg-bg-info text-primary-black hover:bg-bg-info/90":"border-transparent bg-black/30 text-white hover:bg-black/40";return i[0]!==m?(n=(0,s.default)("flex items-center gap-1 rounded-full border px-1.5 py-0.5 text-xs font-medium transition-colors",m),i[0]=m,i[1]=n):n=i[1],i[2]!==c.char?(a=(0,t.jsx)("span",{className:"text-base leading-none",children:c.char}),i[2]=c.char,i[3]=a):a=i[3],i[4]!==c.avatars?(o=(0,t.jsx)(es,{avatars:c.avatars}),i[4]=c.avatars,i[5]=o):o=i[5],i[6]!==d||i[7]!==n||i[8]!==a||i[9]!==o?(l=(0,t.jsxs)("button",{type:"button",onClick:d,className:n,children:[a,o]}),i[6]=d,i[7]=n,i[8]=a,i[9]=o,i[10]=l):l=i[10],l},eo=e=>{let n,a,o,l=(0,r.c)(12),{items:i,onToggle:c,className:d,isOwnMessage:u}=e;if(!i||0===i.length)return null;if(l[0]!==d?(n=(0,s.default)("mt-1 flex flex-wrap gap-1",d),l[0]=d,l[1]=n):n=l[1],l[2]!==u||l[3]!==i||l[4]!==c){let e;l[6]!==u||l[7]!==c?(e=e=>(0,t.jsx)(ea,{item:e,onClick:()=>c(e.emojiKey,e.isMine),isOwnMessage:u},e.emojiKey),l[6]=u,l[7]=c,l[8]=e):e=l[8],a=i.map(e),l[2]=u,l[3]=i,l[4]=c,l[5]=a}else a=l[5];return l[9]!==n||l[10]!==a?(o=(0,t.jsx)("div",{className:n,children:a}),l[9]=n,l[10]=a,l[11]=o):o=l[11],o},el=e=>{let n,a,o=(0,r.c)(7),{items:l,onToggle:i,isOwnMessage:c}=e,d=!c;o[0]!==d?(n=(0,s.default)("pl-1.5 pr-1.5",{"pr-4":d}),o[0]=d,o[1]=n):n=o[1];let u=n;return o[2]!==u||o[3]!==c||o[4]!==l||o[5]!==i?(a=(0,t.jsx)(eo,{items:l,onToggle:i,className:u,isOwnMessage:c}),o[2]=u,o[3]=c,o[4]=l,o[5]=i,o[6]=a):a=o[6],a};var ei=e.i(29054);let ec=e=>{let n,a,o,l=(0,r.c)(7),{timestamp:i,textColorClass:c}=e;return l[0]!==c?(n=(0,s.default)("text-[10px] leading-tight",c),l[0]=c,l[1]=n):n=l[1],l[2]!==i?(a=(0,ei.formatTime)(i),l[2]=i,l[3]=a):a=l[3],l[4]!==n||l[5]!==a?(o=(0,t.jsx)("div",{className:"absolute bottom-1 right-1 flex items-center gap-1",children:(0,t.jsx)("span",{className:n,children:a})}),l[4]=n,l[5]=a,l[6]=o):o=l[6],o},ed=e=>{let M,S,N,R,_,A,E,k,T,L,I,P,U,D,O=(0,r.c)(139),{message:H,className:F}=e,{username:K,userAddress:B,message:z,timestamp:G,isOwnMessage:q,isPending:$,roomId:Q,id:V,messageType:Y}=H,{setReplyTarget:J}=(0,b.useReplyTarget)(),{messages:Z,isCreator:es,currentUser:en}=(0,p.useLivechat)(),{canModerateRoom:ea}=(0,j.useRoomModerationContext)(),{inputRef:eo}=(0,i.useMessageInput)(),{mutateAsync:ei}=(0,l.useDeleteChatMessage)(),{mutateAsync:ed}=(0,l.useUnbanChatUser)();O[0]!==ea?(M={enabled:ea},O[0]=ea,O[1]=M):M=O[1];let{data:eu}=(0,o.useGetBannedUsers)(Q,M),em=V??"",eg=en?.userAddress;O[2]!==H.reactionRecentAddresses||O[3]!==H.reactionRecentAvatarUrls||O[4]!==Q||O[5]!==em||O[6]!==eg?(S={roomId:Q,messageId:em,currentUserAddress:eg,reactionRecentAddresses:H.reactionRecentAddresses,reactionRecentAvatarUrls:H.reactionRecentAvatarUrls},O[2]=H.reactionRecentAddresses,O[3]=H.reactionRecentAvatarUrls,O[4]=Q,O[5]=em,O[6]=eg,O[7]=S):S=O[7];let{barEmojiItems:ep,selectedKey:ef,items:eh,onSelect:ex,onTogglePill:ey,onContextMenu:ev}=(({roomId:e,messageId:t,currentUserAddress:r,reactionRecentAddresses:s,reactionRecentAvatarUrls:n})=>{let{messages:a,currentUser:o,socket:l}=(0,p.useLivechat)(),{emitAddReaction:i,emitRemoveReaction:b}=(0,v.useLivechatSocketEmitters)({socket:l}),[j,C]=(0,d.useState)(!1),w=(0,f.useLivechatReactionsStore)(e=>e.byMessageId[t]),M=(0,f.useLivechatReactionsStore)(e=>e.myReactions),S=(0,f.useLivechatReactionsStore)(e=>e.mySelectedByMessage),N=(0,d.useMemo)(()=>{let e=S[t];if(e&&e.size>0){let t=e.values().next();if(!t.done)return t.value}for(let e of h.EMOJI_OPTIONS)if(M.has((0,x.buildReactionKey)(t,e.key)))return e.key},[t,M,S]),R=(0,d.useMemo)(()=>{let e=a.filter(y.isChatMessage).map(({userAddress:e,profile_image:t})=>({userAddress:e,profile_image:t})),t=(0,x.buildAddressToAvatarMap)(e),s=o?.userAddress??r;return s&&o?.profile_image&&t.set(s,o.profile_image),t},[a,o?.profile_image,o?.userAddress,r]),_=w?.recentAddresses,A=w?.recentAvatarUrls,E=(0,d.useMemo)(()=>{let e=new Map;return A?Object.values(A).forEach(t=>{Object.entries(t).forEach(([t,r])=>{r&&e.set(t,r)})}):s&&n&&Object.keys(s).forEach(t=>{let r=s[t],a=n[t];r&&a&&r.forEach((t,r)=>{let s=a[r];t&&s&&e.set(t,s)})}),R.forEach((t,r)=>e.set(r,t)),e},[R,s,n,A]),k=(0,d.useMemo)(()=>h.EMOJI_OPTIONS.map(e=>{let n=(0,x.selectRecentAddresses)({recentMap:_,serverRecent:s,emojiKey:e.key}),a=M.has((0,x.buildReactionKey)(t,e.key)),l=n.length,i=(0,x.buildAvatars)(n,E,h.REACTION_AVATAR_LIMIT),c=!!(r&&(0,x.includesAddressCaseInsensitive)(n,r)||o?.userAddress&&(0,x.includesAddressCaseInsensitive)(n,o.userAddress)),d=0===i.length&&c&&o?.profile_image?[o.profile_image]:i,u=N===e.key||a||!!r&&(0,x.includesAddressCaseInsensitive)(n,r)||!!o?.userAddress&&(0,x.includesAddressCaseInsensitive)(n,o.userAddress);return{emojiKey:e.key,char:e.char,count:l,avatars:d,isMine:u}}).filter(e=>e.avatars.length>0||e.isMine||(e.count??0)>0),[E,o?.userAddress,o?.profile_image,r,t,M,_,s,N]),T=k.find(e=>e.isMine)?.emojiKey,L=N??T,I=(0,d.useCallback)(()=>o?.userAddress||r||"",[o?.userAddress,r]),P=(0,d.useCallback)((r,s=c.LivechatReactionSource.CONTEXT_MENU)=>{if(I()){let n;i(e,t,r,o?.profile_image),n={roomId:e,messageId:t,emojiKey:r,source:s,context:u.LIVECHAT_SOURCE_CONTEXTS.CHAT_MESSAGE},g(c.LivechatReactionAction.ADD,n)}},[o?.profile_image,i,I,t,e]),U=(0,d.useCallback)((r,s=c.LivechatReactionSource.CONTEXT_MENU)=>{if(I()){let n;b(e,t,r),n={roomId:e,messageId:t,emojiKey:r,source:s,context:u.LIVECHAT_SOURCE_CONTEXTS.CHAT_MESSAGE},g(c.LivechatReactionAction.REMOVE,n)}},[b,I,t,e]),D=(0,d.useCallback)((e,t,r=c.LivechatReactionSource.CONTEXT_MENU)=>{e!==t&&(U(e,r),P(t,r))},[P,U]),O=(0,d.useCallback)(()=>{C(!0),(({roomId:e,messageId:t,context:r})=>{(0,m.recordUserEvent)((0,c.createFocusLivechatReactionBar)({roomId:e,messageId:t}),r)})({roomId:e,messageId:t,context:u.LIVECHAT_SOURCE_CONTEXTS.CHAT_MESSAGE})},[t,e]),H=(0,d.useCallback)(e=>{if(L===e){U(e),C(!1);return}L?D(L,e):P(e),C(!1)},[P,L,U,D]),F=(0,d.useCallback)((e,t)=>{t?U(e,c.LivechatReactionSource.PILL):L&&L!==e?D(L,e,c.LivechatReactionSource.PILL):P(e,c.LivechatReactionSource.PILL)},[P,L,U,D]);return{isBarOpen:j,setBarOpen:C,barEmojiItems:h.EMOJI_OPTIONS,selectedKey:L,items:k,onContextMenu:O,onSelect:H,onTogglePill:F}})(S);O[8]!==eu||O[9]!==B?(N=eu?.some(e=>e.userAddress===B)??!1,O[8]=eu,O[9]=B,O[10]=N):N=O[10];let eb=N;O[11]!==K?(R=(0,y.getUserColor)(K),O[11]=K,O[12]=R):R=O[12];let ej=R;if(O[13]!==ea||O[14]!==F||O[15]!==ei||O[16]!==eo||O[17]!==es||O[18]!==q||O[19]!==$||O[20]!==eb||O[21]!==H||O[22]!==V||O[23]!==Y||O[24]!==Z||O[25]!==ev||O[26]!==ey||O[27]!==eh||O[28]!==Q||O[29]!==J||O[30]!==z||O[31]!==G||O[32]!==ed||O[33]!==B||O[34]!==ej||O[35]!==K){let e,r,n,a,o,l,i,c,d,u,m,g,p,f,h,x,y=(0,s.default)({"justify-end":q,"justify-start":!q});if(O[40]!==ea||O[41]!==es||O[42]!==q||O[43]!==$||O[44]!==H.profile_image||O[45]!==H.replyPreview||O[46]!==H.replyToId||O[47]!==Z||O[48]!==z){let t,o,l,i=(0,s.default)({"bg-blue-300":q,"bg-black-3":!q}),c=(0,s.default)({"text-primary-black":q,"text-grey-6":!q}),d=!q;O[55]!==q||O[56]!==d?(t=(0,s.default)({"text-primary-black":q,"text-grey-6":d}),O[55]=q,O[56]=d,O[57]=t):t=O[57],a=t;let u=q&&(ea||es),m=(0,s.default)({"pr-8":u,"pr-6":!u&&z.length<8,"pr-4":!u&&z.length>=8&&z.length<20,"pr-3":!u&&z.length>=20}),g=(0,s.default)({"pt-3":u,"pt-1.5":!u}),p=(0,s.default)("rounded-lg",{"rounded-br-none":q,"rounded-bl-none":!q});O[58]===Symbol.for("react.memo_cache_sentinel")?(o="".repeat(6),O[58]=o):o=O[58],r=o,E=!q,A=H.profile_image||w.PEPE_PLACEHOLDER,O[59]!==H.replyPreview||O[60]!==H.replyToId||O[61]!==Z?(l=H.replyPreview??(H.replyToId?Z.find(e=>e.id===H.replyToId)?.message:void 0),O[59]=H.replyPreview,O[60]=H.replyToId,O[61]=Z,O[62]=l):l=O[62],e=l,n=(0,s.default)("relative inline-flex w-fit min-w-[64px] max-w-[80%] flex-col","pb-2 pl-[9px] text-sm transition-opacity duration-200 ease-in-out",m,g,i,c,p,{"opacity-60":$,"opacity-100":!$}),O[40]=ea,O[41]=es,O[42]=q,O[43]=$,O[44]=H.profile_image,O[45]=H.replyPreview,O[46]=H.replyToId,O[47]=Z,O[48]=z,O[49]=e,O[50]=A,O[51]=E,O[52]=r,O[53]=n,O[54]=a}else e=O[49],A=O[50],E=O[51],r=O[52],n=O[53],a=O[54];let v=n;O[63]!==ei||O[64]!==H.timestamp||O[65]!==V||O[66]!==Q?(o=async()=>{let e=H.timestamp?H.timestamp.getTime():V??"";e&&await ei({messageId:e,roomId:Q,reason:C.DeleteMessageReasonEnum.TOXIC})},O[63]=ei,O[64]=H.timestamp,O[65]=V,O[66]=Q,O[67]=o):o=O[67];let b=o;O[68]!==Q||O[69]!==ed||O[70]!==B?(l=async()=>{B&&await ed({userAddress:B,roomId:Q})},O[68]=Q,O[69]=ed,O[70]=B,O[71]=l):l=O[71];let j=l;O[72]!==eo||O[73]!==J?(i=e=>{J(e),eo.current?.focus()},O[72]=eo,O[73]=J,O[74]=i):i=O[74];let M=i;O[75]!==e?(c=(0,t.jsx)(er,{text:e}),O[75]=e,O[76]=c):c=O[76],O[77]!==q||O[78]!==ej||O[79]!==K?(d=(0,t.jsx)(W,{username:K,color:ej,hidden:q}),O[77]=q,O[78]=ej,O[79]=K,O[80]=d):d=O[80],O[81]!==z?(u=(0,t.jsx)(et,{text:z}),O[81]=z,O[82]=u):u=O[82],O[83]!==r||O[84]!==u?(m=(0,t.jsx)(ee,{content:u,spacerContent:r}),O[83]=r,O[84]=u,O[85]=m):m=O[85],O[86]!==a||O[87]!==G?(g=(0,t.jsx)(ec,{timestamp:G,textColorClass:a}),O[86]=a,O[87]=G,O[88]=g):g=O[88],O[89]!==q||O[90]!==ey||O[91]!==eh?(p=(0,t.jsx)(el,{items:eh,onToggle:ey,isOwnMessage:q}),O[89]=q,O[90]=ey,O[91]=eh,O[92]=p):p=O[92],O[93]!==M||O[94]!==H?(f=()=>M(H),O[93]=M,O[94]=H,O[95]=f):f=O[95],O[96]!==ea||O[97]!==b||O[98]!==j||O[99]!==es||O[100]!==q||O[101]!==eb||O[102]!==V||O[103]!==Y||O[104]!==Q||O[105]!==f||O[106]!==B?(h=(0,t.jsx)(X,{canModerateRoom:ea,isCreator:es,messageType:Y,isOwnMessage:q,onReply:f,onDelete:b,onUnban:j,isUserBanned:eb,userAddress:B,roomId:Q,messageId:V}),O[96]=ea,O[97]=b,O[98]=j,O[99]=es,O[100]=q,O[101]=eb,O[102]=V,O[103]=Y,O[104]=Q,O[105]=f,O[106]=B,O[107]=h):h=O[107],O[108]!==v||O[109]!==ev||O[110]!==c||O[111]!==d||O[112]!==m||O[113]!==g||O[114]!==p||O[115]!==h?(x=(0,t.jsxs)("div",{className:v,onContextMenu:ev,children:[c,d,m,g,p,h]}),O[108]=v,O[109]=ev,O[110]=c,O[111]=d,O[112]=m,O[113]=g,O[114]=p,O[115]=h,O[116]=x):x=O[116],_=x,k=(0,s.default)("mb-2 flex w-full",y,F),O[13]=ea,O[14]=F,O[15]=ei,O[16]=eo,O[17]=es,O[18]=q,O[19]=$,O[20]=eb,O[21]=H,O[22]=V,O[23]=Y,O[24]=Z,O[25]=ev,O[26]=ey,O[27]=eh,O[28]=Q,O[29]=J,O[30]=z,O[31]=G,O[32]=ed,O[33]=B,O[34]=ej,O[35]=K,O[36]=_,O[37]=A,O[38]=E,O[39]=k}else _=O[36],A=O[37],E=O[38],k=O[39];if(O[117]!==A||O[118]!==E||O[119]!==K?(T=E&&(0,t.jsx)("div",{className:"mr-2 flex-shrink-0 self-end",children:(0,t.jsx)(n.Avatar,{src:A,alt:`${K}'s profile picture`,size:30})}),O[117]=A,O[118]=E,O[119]=K,O[120]=T):T=O[120],O[121]!==_?(L=(0,t.jsx)(a.ContextMenuTrigger,{asChild:!0,children:_}),O[121]=_,O[122]=L):L=O[122],O[123]!==ep||O[124]!==ex||O[125]!==ef){let e;O[127]!==ex||O[128]!==ef?(e=e=>(0,t.jsx)(a.ContextMenuItem,{asChild:!0,children:(0,t.jsx)("button",{type:"button",onClick:()=>ex(e.key),className:(0,s.default)("relative flex h-8 w-8 items-center justify-center rounded-full",ef===e.key?"bg-blue-600/20":"bg-transparent","transition-colors hover:bg-white/10"),"aria-label":e.label,children:(0,t.jsx)("span",{className:"text-xl leading-none",children:e.char})})},e.key),O[127]=ex,O[128]=ef,O[129]=e):e=O[129],I=ep.map(e),O[123]=ep,O[124]=ex,O[125]=ef,O[126]=I}else I=O[126];return O[130]!==I?(P=(0,t.jsx)(a.ContextMenuContent,{className:"p-2",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:I})}),O[130]=I,O[131]=P):P=O[131],O[132]!==P||O[133]!==L?(U=(0,t.jsxs)(a.ContextMenu,{children:[L,P]}),O[132]=P,O[133]=L,O[134]=U):U=O[134],O[135]!==U||O[136]!==k||O[137]!==T?(D=(0,t.jsxs)("div",{className:k,children:[T,U]}),O[135]=U,O[136]=k,O[137]=T,O[138]=D):D=O[138],D};e.s(["UserMessageBubble",0,ed],243900),e.s(["ChatMessage",0,e=>{let s,n=(0,r.c)(3),{message:a,className:o}=e;return n[0]!==o||n[1]!==a?(s=(0,t.jsx)(ed,{message:a,className:o}),n[0]=o,n[1]=a,n[2]=s):s=n[2],s}],848963)},499843,e=>{"use strict";let t=(0,e.i(376530).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],499843)},110763,743358,326279,800407,e=>{"use strict";var t=e.i(942765),r=e.i(649785),s=e.i(376530);let n=(0,s.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var a=e.i(929);e.s(["ConnectionErrorStatus",0,e=>{let s,o,l,i,c,d=(0,r.c)(13),{error:u,onRetry:m}=e;d[0]!==u?(s=u.includes("Authentication")||u.includes("log in"),d[0]=u,d[1]=s):s=d[1];let g=s;return d[2]!==u?(o=(0,t.jsx)("span",{className:"text-center",children:u}),d[2]=u,d[3]=o):o=d[3],d[4]!==g||d[5]!==m?(l=!g&&m&&(0,t.jsxs)("button",{onClick:m,className:"flex items-center space-x-1 rounded bg-blue-600 px-3 py-1 text-xs text-white hover:bg-blue-700",type:"button",children:[(0,t.jsx)(n,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:"Retry Connection"})]}),d[4]=g,d[5]=m,d[6]=l):l=d[6],d[7]!==g?(i=g&&(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Please refresh the page to log in again"}),d[7]=g,d[8]=i):i=d[8],d[9]!==o||d[10]!==l||d[11]!==i?(c=(0,t.jsx)(a.CenteredStatusMessage,{className:"text-red-500",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[o,l,i]})}),d[9]=o,d[10]=l,d[11]=i,d[12]=c):c=d[12],c}],110763);let o=(0,s.default)("send-horizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);e.s(["SendHorizontal",()=>o],743358);var l=e.i(264458);e.s(["List",0,e=>{let s,n,a=(0,r.c)(5),{children:o,className:i}=e;return a[0]!==i?(s=(0,l.default)("w-40 rounded-md border border-gray-600 bg-bg-secondary text-sm shadow-lg",i),a[0]=i,a[1]=s):s=a[1],a[2]!==o||a[3]!==s?(n=(0,t.jsx)("ul",{className:s,children:o}),a[2]=o,a[3]=s,a[4]=n):n=a[4],n}],326279),e.s(["ListItem",0,e=>{let s,n,a=(0,r.c)(7),{children:o,className:i,onClick:c,onMouseDown:d}=e;return a[0]!==i?(s=(0,l.default)("cursor-pointer px-2 py-1 text-gray-200 hover:bg-gray-700",i),a[0]=i,a[1]=s):s=a[1],a[2]!==o||a[3]!==c||a[4]!==d||a[5]!==s?(n=(0,t.jsx)("li",{className:s,onClick:c,onMouseDown:d,children:o}),a[2]=o,a[3]=c,a[4]=d,a[5]=s,a[6]=n):n=a[6],n}],800407)},612809,703117,e=>{"use strict";var t=e.i(942765),r=e.i(649785),s=e.i(264458),n=e.i(434092),a=e.i(499843),o=e.i(743358),l=e.i(326279),i=e.i(800407),c=e.i(751973),d=e.i(632628),u=e.i(855645),m=e.i(574953);e.s(["MessageInput",0,()=>{let e,g,p,f,h,x,y,v,b,j,C,w,M,S=(0,r.c)(45),{inputRef:N,inputText:R,canSendMessage:_,isInputEmpty:A,showSuggestions:E,suggestions:k,isSendingMessage:T,isConnected:L,isJoined:I,readOnly:P,replyTarget:U,clearReplyTarget:D,handleInputChange:O,handleSubmit:H,handleKeyDown:F,handleSelectSuggestion:K}=(0,d.useMessageInput)(),{isAuthenticated:B}=(0,u.useLivechat)(),z=!L||!I||!B,G=L&&I&&B;if(P)return null;S[0]!==B||S[1]!==L||S[2]!==I?(e=()=>L?I?B?"Write a message...":"Log in to send messages":"Joining room...":"Connecting...",S[0]=B,S[1]=L,S[2]=I,S[3]=e):e=S[3];let q=e;S[4]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.default)("relative","flex","flex-col","gap-3","bg-[#21232C]","px-4","py-3","shadow-[0_-4px_4px_0_rgba(0,_0,_0,_0.15)]"),S[4]=g):g=S[4],S[5]!==G||S[6]!==D||S[7]!==U?(p=U&&G&&(0,t.jsxs)("div",{className:(0,s.default)("flex","items-center","gap-1","rounded","bg-bg-secondary","px-2","py-1","text-xs","border-l-2","border-blue-500"),children:[(0,t.jsxs)("span",{className:"truncate text-gray-200",children:["Replying to"," ",(0,t.jsxs)("span",{className:"font-semibold text-blue-300",children:["@",(0,m.getDisplayUsername)(U.username)]})]}),(0,t.jsx)("button",{type:"button",onClick:D,className:"ml-auto text-gray-400 hover:text-gray-200",children:""})]}),S[5]=G,S[6]=D,S[7]=U,S[8]=p):p=S[8];let $=q(),Q=!B;S[9]!==Q?(f=(0,s.default)("mr-2","h-9","min-w-0","flex-1","rounded","bg-[#3A4350]","px-3","py-1.5","text-sm","text-white","placeholder-gray-400","focus:border-blue-500","focus:outline-none","focus:ring-1","focus:ring-blue-500","disabled:cursor-not-allowed","disabled:opacity-50",{"pr-8":Q}),S[9]=Q,S[10]=f):f=S[10],S[11]!==O||S[12]!==F||S[13]!==N||S[14]!==R||S[15]!==z||S[16]!==$||S[17]!==f?(h=(0,t.jsx)("input",{ref:N,type:"text",value:R,onChange:O,onKeyDown:F,placeholder:$,disabled:z,maxLength:c.LIVECHAT_MESSAGE_CHAR_LIMIT,className:f}),S[11]=O,S[12]=F,S[13]=N,S[14]=R,S[15]=z,S[16]=$,S[17]=f,S[18]=h):h=S[18],S[19]!==B?(x=!B&&(0,t.jsx)(a.Lock,{size:14,className:"pointer-events-none absolute right-4 text-gray-400"}),S[19]=B,S[20]=x):x=S[20],S[21]!==h||S[22]!==x?(y=(0,t.jsxs)("div",{className:"relative flex flex-1 items-center",children:[h,x]}),S[21]=h,S[22]=x,S[23]=y):y=S[23];let V=!_||A||!B;S[24]===Symbol.for("react.memo_cache_sentinel")?(v=(0,s.default)("relative","flex","h-[34px]","w-[34px]","items-center","justify-center","rounded-full","bg-livestream-green","p-2","text-black","enabled:hover:bg-livestream-green-dark","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-opacity-50","disabled:cursor-not-allowed","disabled:opacity-50"),S[24]=v):v=S[24];let X=B?"Send message":"Log in to send messages";return S[25]!==B||S[26]!==T?(b=B?T?(0,t.jsx)(n.Loader2,{size:18,className:"animate-spin"}):(0,t.jsx)(o.SendHorizontal,{size:18}):(0,t.jsx)(a.Lock,{size:16}),S[25]=B,S[26]=T,S[27]=b):b=S[27],S[28]!==X||S[29]!==b||S[30]!==V?(j=(0,t.jsx)("button",{type:"submit","aria-label":"Send message",disabled:V,className:v,title:X,children:b}),S[28]=X,S[29]=b,S[30]=V,S[31]=j):j=S[31],S[32]!==j||S[33]!==y?(C=(0,t.jsxs)("div",{className:"flex w-full items-center",children:[y,j]}),S[32]=j,S[33]=y,S[34]=C):C=S[34],S[35]!==G||S[36]!==K||S[37]!==E||S[38]!==k?(w=E&&k.length>0&&G&&(0,t.jsx)(l.List,{className:"absolute bottom-12 left-2 z-20 w-40",children:k.map(e=>(0,t.jsx)(i.ListItem,{onMouseDown:t=>{t.preventDefault(),K(e)},children:e},e))}),S[35]=G,S[36]=K,S[37]=E,S[38]=k,S[39]=w):w=S[39],S[40]!==H||S[41]!==C||S[42]!==w||S[43]!==p?(M=(0,t.jsxs)("form",{onSubmit:H,className:g,children:[p,C,w]}),S[40]=H,S[41]=C,S[42]=w,S[43]=p,S[44]=M):M=S[44],M}],612809);var g=e.i(281675),p=e.i(54567);e.s(["useMessageListScroll",0,e=>{let t,s,n,a,o,l,i=(0,r.c)(17),{messages:c,listRef:d,isTopVisible:u,hasMoreHistory:m,isLoadingHistory:f,loadOlderMessages:h}=e,x=(0,g.useRef)(!0),y=(0,g.useRef)(!1),v=(0,g.useRef)(null),b=(0,g.useRef)(!1),j=(0,g.useRef)(0);i[0]!==f||i[1]!==d||i[2]!==c?(t=()=>{let e=d.current;if(!e||f)return void p.logger.debug("[useMessageListScroll] LayoutEffect skipped (no listEl or isLoadingHistory)",{hasListEl:!!e,isLoadingHistory:f});if(b.current&&v.current){let t=v.current;p.logger.debug("[useMessageListScroll] Attempting history restoration",{targetMessageId:t});let r=e.querySelector(`div[data-message-id="${t}"]`);r?(e.scrollTop=r.offsetTop-e.offsetTop,x.current=!1,y.current=!0,p.logger.debug("[useMessageListScroll] History restored successfully",{scrollTop:e.scrollTop})):(x.current=!1,y.current=!0,p.logger.warn("[useMessageListScroll] History restoration failed, target element not found",{targetMessageId:t})),v.current=null,b.current=!1,j.current=c.length;return}if(c.length>0&&0===j.current){p.logger.debug("[useMessageListScroll] Initial load, scrolling to bottom"),e.scrollTop=e.scrollHeight,x.current=!0,y.current=!1,j.current=c.length;return}if(c.length>j.current){let t=c[c.length-1],r="isOwnMessage"in t&&t.isOwnMessage;p.logger.debug("[useMessageListScroll] Message added",{didUserSendLastMessage:r,isNearBottom:x.current,hasUserScrolledUp:y.current}),r?(e.scrollTop=e.scrollHeight,x.current=!0,y.current=!1):(!y.current||x.current)&&(e.scrollTop=e.scrollHeight,x.current=!0,y.current=!1)}j.current=c.length},s=[c,d,f],i[0]=f,i[1]=d,i[2]=c,i[3]=t,i[4]=s):(t=i[3],s=i[4]),(0,g.useLayoutEffect)(t,s),i[5]!==f||i[6]!==d?(n=()=>{let e=d.current;if(!e)return;let t=e.scrollTop,r=()=>{if(b.current||f)return void p.logger.debug("[useMessageListScroll] Scroll handler skipped (restoring/loading history)");let{scrollTop:r,scrollHeight:s,clientHeight:n}=e,a=s-r-n<=50;r<t&&!a&&s>n?y.current=!0:a&&(y.current=!1),x.current=a,t=r<=0?0:r};return e.addEventListener("scroll",r,{passive:!0}),r(),()=>{e.removeEventListener("scroll",r)}},a=[d,f],i[5]=f,i[6]=d,i[7]=n,i[8]=a):(n=i[7],a=i[8]),(0,g.useEffect)(n,a),i[9]!==m||i[10]!==f||i[11]!==u||i[12]!==d||i[13]!==h||i[14]!==c?(o=()=>{let e=d.current;if(u&&m&&!f&&!b.current&&e&&c.length>0){p.logger.debug("[useMessageListScroll] Conditions met to check for loading older messages",{isTopVisible:u,hasMoreHistory:m,isLoadingHistory:f});let t=null,r=e.getBoundingClientRect().top;for(let s of e.querySelectorAll("div[data-message-id]"))if(s.getBoundingClientRect().top>=r){t=s.dataset.messageId||null;break}t?(v.current=t,b.current=!0,p.logger.debug("[useMessageListScroll] Triggering loadOlderMessages (with restoration point)",{topVisibleMessageId:t})):p.logger.warn("[useMessageListScroll] Triggering loadOlderMessages (no restoration point found, fallback)"),h()}},l=[u,m,f,h,c,d],i[9]=m,i[10]=f,i[11]=u,i[12]=d,i[13]=h,i[14]=c,i[15]=o,i[16]=l):(o=i[15],l=i[16]),(0,g.useEffect)(o,l)}],703117)},276116,353810,120234,30625,115044,662939,793764,e=>{"use strict";var t=e.i(942765),r=e.i(649785),s=e.i(275762),n=e.i(325320),a=e.i(655703),o=e.i(264458),l=e.i(281675),i=e.i(855645),c=e.i(474877),d=e.i(643630),u=e.i(396693),m=e.i(95098),g=e.i(434092),p=e.i(499843),f=e.i(443815),h=e.i(929),x=e.i(110763),y=e.i(612809),v=e.i(458903),b=e.i(703117),j=e.i(18671),C=e.i(848963);let w=e=>{let s,n=(0,r.c)(2),{message:a}=e;return n[0]!==a.message?(s=(0,t.jsx)("div",{className:"py-1 text-center text-sm text-gray-500",children:a.message}),n[0]=a.message,n[1]=s):s=n[1],s};e.s(["SystemMessage",0,w],353810);let M=e=>{let s,n,a,c,d,u,m,p,f=(0,r.c)(23),{className:h}=e,{messages:x,hasMoreHistory:y,isLoadingHistory:j,loadOlderMessages:C}=(0,i.useLivechat)(),w=(0,l.useRef)(null);f[0]===Symbol.for("react.memo_cache_sentinel")?(s={threshold:0,rootMargin:"0px 0px 200px 0px"},f[0]=s):s=f[0];let{ref:M,inView:N}=(0,v.useInView)(s);return f[1]!==y||f[2]!==j||f[3]!==N||f[4]!==C||f[5]!==x?(n={messages:x,listRef:w,isTopVisible:N,hasMoreHistory:y,isLoadingHistory:j,loadOlderMessages:C},f[1]=y,f[2]=j,f[3]=N,f[4]=C,f[5]=x,f[6]=n):n=f[6],(0,b.useMessageListScroll)(n),f[7]!==h?(a=(0,o.default)("flex flex-1 flex-col-reverse p-4","custom-scrollbar overflow-y-auto",h),f[7]=h,f[8]=a):a=f[8],f[9]!==x?(c=x.map(S),f[9]=x,f[10]=c):c=f[10],f[11]!==c?(d=(0,t.jsx)("div",{className:"flex flex-grow flex-col space-y-2",children:c}),f[11]=c,f[12]=d):d=f[12],f[13]!==y||f[14]!==j?(u=j?(0,t.jsxs)("div",{className:"absolute inset-x-0 top-0 flex items-center justify-center pt-2 text-xs text-gray-400",children:[(0,t.jsx)(g.Loader2,{className:"mr-1 h-4 w-4 animate-spin"}),(0,t.jsx)("span",{children:"Loading older messages..."})]}):y?null:(0,t.jsx)("div",{className:"-mt-4 text-center",children:(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"New messages will appear here"})}),f[13]=y,f[14]=j,f[15]=u):u=f[15],f[16]!==u||f[17]!==M?(m=(0,t.jsx)("div",{ref:M,className:"relative min-h-[1px] py-4",children:u}),f[16]=u,f[17]=M,f[18]=m):m=f[18],f[19]!==a||f[20]!==d||f[21]!==m?(p=(0,t.jsxs)("div",{ref:w,className:a,children:[d,m]}),f[19]=a,f[20]=d,f[21]=m,f[22]=p):p=f[22],p};function S(e){let r=e.id;return e.messageType===j.MessageType.SYSTEM?(0,t.jsx)(w,{message:e},r):(0,t.jsx)("div",{"data-message-id":e.id,children:(0,t.jsx)(C.ChatMessage,{message:e})},r)}e.s(["MessageList",0,M],120234);var N=e.i(429877),R=e.i(588599),_=e.i(662230),A=e.i(574953),E=e.i(480530);let k=()=>{let e,s,n,a,l,c,d,u,m,g,p,f=(0,r.c)(28),{pinnedMessageId:h,messages:x,isCreator:y}=(0,i.useLivechat)(),{unpinMessage:v}=(0,_.useChatPinActions)();e:{let t;if(!h){e=void 0;break e}if(f[0]!==x||f[1]!==h){let e;f[3]!==h?(e=e=>e.id===h,f[3]=h,f[4]=e):e=f[4],t=x.find(e),f[0]=x,f[1]=h,f[2]=t}else t=f[2];e=t}let b=e;if(!b)return null;f[5]!==b.username?(s=(0,E.getUserColor)(b.username),f[5]=b.username,f[6]=s):s=f[6];let j=s;f[7]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.default)("flex items-start gap-2 border-b border-gray-700 bg-bg-secondary/50 px-3 py-1.5 text-xs text-gray-200"),f[7]=n):n=f[7],f[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,t.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-600"}),(0,t.jsx)("span",{className:"h-[14px] w-0.5 rounded-full bg-gray-600"}),(0,t.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-600"})]}),f[8]=a):a=f[8];let C=b.username;return f[9]!==j?(l={color:j},f[9]=j,f[10]=l):l=f[10],f[11]!==b.username?(c=(0,A.getDisplayUsername)(b.username),f[11]=b.username,f[12]=c):c=f[12],f[13]!==b.username||f[14]!==l||f[15]!==c?(d=(0,t.jsx)(R.ProfileLink,{slug:C,style:l,className:"mb-0.5 font-semibold",children:c}),f[13]=b.username,f[14]=l,f[15]=c,f[16]=d):d=f[16],f[17]!==b.message?(u=(0,t.jsx)("span",{className:"truncate leading-snug text-gray-300",children:b.message}),f[17]=b.message,f[18]=u):u=f[18],f[19]!==d||f[20]!==u?(m=(0,t.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[d,u]}),f[19]=d,f[20]=u,f[21]=m):m=f[21],f[22]!==y||f[23]!==v?(g=y&&(0,t.jsx)("button",{type:"button",onClick:v,"aria-label":"Unpin message",className:"ml-2 flex-shrink-0 text-gray-400 hover:text-gray-200",children:(0,t.jsx)(N.XIcon,{width:14,height:14})}),f[22]=y,f[23]=v,f[24]=g):g=f[24],f[25]!==g||f[26]!==m?(p=(0,t.jsxs)("div",{className:n,children:[a,m,g]}),f[25]=g,f[26]=m,f[27]=p):p=f[27],p},T=()=>{let e,s,n,a,o,l=(0,r.c)(22),{isConnected:c,isConnecting:d,connectionError:u,isJoined:v,isJoining:b,retryCount:j,forceReconnect:C,isAuthenticated:w}=(0,i.useLivechat)(),S=!w;if(d){let e,r;l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(f.Loading,{className:"h-4 w-4 animate-spin"}),l[0]=e):e=l[0];let s=j>0?`Reconnecting... (attempt ${j+1})`:"Connecting...";return l[1]!==s?(r=(0,t.jsx)(h.CenteredStatusMessage,{icon:e,children:s}),l[1]=s,l[2]=r):r=l[2],r}if(u){let e;return l[3]!==u||l[4]!==C?(e=(0,t.jsx)(x.ConnectionErrorStatus,{error:u,onRetry:C}),l[3]=u,l[4]=C,l[5]=e):e=l[5],e}if(!c){let e,r,s;return l[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("span",{children:"Disconnected. Trying to reconnect..."}),l[6]=e):e=l[6],l[7]!==j?(r=j>0&&(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Connecting..."}),l[7]=j,l[8]=r):r=l[8],l[9]!==r?(s=(0,t.jsx)(h.CenteredStatusMessage,{children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[e,r]})}),l[9]=r,l[10]=s):s=l[10],s}if(b){let e;return l[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(h.CenteredStatusMessage,{icon:(0,t.jsx)(g.Loader2,{className:"h-4 w-4 animate-spin"}),children:"Joining room..."}),l[11]=e):e=l[11],e}if(!v){let e;return l[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(h.CenteredStatusMessage,{children:"Connected, waiting to join room..."}),l[12]=e):e=l[12],e}return l[13]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(k,{}),s=(0,t.jsx)(M,{}),l[13]=e,l[14]=s):(e=l[13],s=l[14]),l[15]!==S?(n=S&&(0,t.jsx)("div",{className:"border-t border-[#2F3037] bg-[#1E2028] px-3 py-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-gray-400",children:[(0,t.jsx)(m.Eye,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:"Read-only mode - Log in to send messages"})]})}),l[15]=S,l[16]=n):n=l[16],l[17]!==w?(a=w?(0,t.jsx)(y.MessageInput,{}):(0,t.jsx)("div",{className:"border-t border-[#2F3037] bg-[#1E2028] p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2 rounded border border-gray-600 bg-gray-700/50 px-3 py-2 text-gray-400",children:[(0,t.jsx)(p.Lock,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:"Log in to send messages"})]})}),l[17]=w,l[18]=a):a=l[18],l[19]!==n||l[20]!==a?(o=(0,t.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e,s,n,a]}),l[19]=n,l[20]=a,l[21]=o):o=l[21],o};e.s(["LivechatContent",0,T],30625);var L=e.i(723897),I=e.i(902551);let P=e=>{let s,n,a,l,c,d,u,m=(0,r.c)(18),{children:g,className:p}=e,{isCollapsed:f,toggleCollapse:h}=(0,i.useLivechat)();m[0]!==p?(s=(0,o.default)("flex h-11 flex-shrink-0 cursor-pointer items-center justify-between px-4",p),m[0]=p,m[1]=s):s=m[1],m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("p",{className:"truncate text-sm font-semibold text-white",children:"Live Chat"})}),m[2]=n):n=m[2],m[3]!==h?(a=e=>{e.stopPropagation(),h()},m[3]=h,m[4]=a):a=m[4];let x=f?"Expand chat":"Collapse chat";return m[5]!==f?(l=f?(0,t.jsx)(I.ChevronUp,{size:18}):(0,t.jsx)(L.ChevronDown,{size:18}),m[5]=f,m[6]=l):l=m[6],m[7]!==a||m[8]!==x||m[9]!==l?(c=(0,t.jsx)("button",{type:"button",onClick:a,className:"p-1 text-gray-400 hover:text-white","aria-label":x,children:l}),m[7]=a,m[8]=x,m[9]=l,m[10]=c):c=m[10],m[11]!==g||m[12]!==c?(d=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[g,c]}),m[11]=g,m[12]=c,m[13]=d):d=m[13],m[14]!==s||m[15]!==d||m[16]!==h?(u=(0,t.jsxs)("div",{className:s,onClick:h,children:[n,d]}),m[14]=s,m[15]=d,m[16]=h,m[17]=u):u=m[17],u};e.s(["LivechatHeader",0,P],115044);var U=e.i(606933),D=e.i(652145),O=e.i(546781),H=e.i(264552),F=e.i(411227),K=e.i(141327),B=e.i(385044);let z=e=>{let s,n,a,o,l,i,c,d,u,m,g,p,f=(0,r.c)(32),{bannedUser:h,roomId:x,participants:y}=e,{mutate:v,isPending:b}=(0,B.useUnbanChatUser)();if(!h||!h.userAddress||!h.bannedAt)return null;f[0]!==h.userAddress||f[1]!==x||f[2]!==v?(s=()=>{v({roomId:x,userAddress:h.userAddress})},f[0]=h.userAddress,f[1]=x,f[2]=v,f[3]=s):s=f[3];let j=s,C=h.bannedUserUsername||h.userAddress;f[4]!==h.bannedByAddress||f[5]!==y?(n=y.find(e=>e.userAddress===h.bannedByAddress)?.username||h.bannedByAddress,f[4]=h.bannedByAddress,f[5]=y,f[6]=n):n=f[6];let w=n;if(f[7]!==h.bannedAt){let e=new Date(h.bannedAt);a=isNaN(e.getTime())?"N/A":e.toLocaleDateString(),f[7]=h.bannedAt,f[8]=a}else a=f[8];let M=a;return f[9]!==C?(o=(0,A.getDisplayUsername)(C),f[9]=C,f[10]=o):o=f[10],f[11]!==C||f[12]!==o?(l=(0,t.jsx)(R.ProfileLink,{slug:C,className:"text-sm font-medium",children:o}),f[11]=C,f[12]=o,f[13]=l):l=f[13],f[14]!==w?(i=(0,A.getDisplayUsername)(w),f[14]=w,f[15]=i):i=f[15],f[16]!==w||f[17]!==i?(c=(0,t.jsx)(R.ProfileLink,{slug:w,className:"hover:underline",children:i}),f[16]=w,f[17]=i,f[18]=c):c=f[18],f[19]!==M||f[20]!==c?(d=(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:["Banned by:"," ",c," ","on ",M]}),f[19]=M,f[20]=c,f[21]=d):d=f[21],f[22]!==l||f[23]!==d?(u=(0,t.jsxs)("div",{className:"flex flex-col",children:[l,d]}),f[22]=l,f[23]=d,f[24]=u):u=f[24],f[25]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)(K.ShieldCheck,{size:14}),f[25]=m):m=f[25],f[26]!==j||f[27]!==b?(g=(0,t.jsxs)("button",{onClick:j,disabled:b,className:"flex items-center gap-2 rounded-md bg-green-600 px-2 py-1 text-xs hover:bg-green-700 disabled:cursor-not-allowed disabled:opacity-50",children:[m,"Unban"]}),f[26]=j,f[27]=b,f[28]=g):g=f[28],f[29]!==g||f[30]!==u?(p=(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-md p-2 hover:bg-gray-700/50",children:[u,g]}),f[29]=g,f[30]=u,f[31]=p):p=f[31],p},G=e=>{let s,n,a,o=(0,r.c)(12),{users:l,roomId:i}=e,{data:c}=(0,F.useGetChatParticipants)(i);o[0]!==c?(s=void 0===c?[]:c,o[0]=c,o[1]=s):s=o[1];let d=s;if(0===l.length){let e;return o[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"py-4 text-center text-sm text-gray-500",children:"No users are currently banned from this chat."}),o[2]=e):e=o[2],e}if(o[3]!==d||o[4]!==i||o[5]!==l){let e;o[7]!==d||o[8]!==i?(e=e=>(0,t.jsx)(z,{bannedUser:e,roomId:i,participants:d},e.userAddress),o[7]=d,o[8]=i,o[9]=e):e=o[9],n=l.map(e),o[3]=d,o[4]=i,o[5]=l,o[6]=n}else n=o[6];return o[10]!==n?(a=(0,t.jsx)("div",{className:"flex flex-col gap-1",children:n}),o[10]=n,o[11]=a):a=o[11],a};var q=e.i(376530);let $=(0,q.default)("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Q=(0,q.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>Q],662939);var V=e.i(369195),X=e.i(864532),Y=e.i(565813),J=e.i(26454),Z=e.i(770751),W=e.i(267753),ee=e.i(37473),et=e.i(433173),er=e.i(765057),es=e.i(273491);let en=e=>{let s,n,a,o,l,i,d,u,m=(0,r.c)(36),{userAddress:g,username:p,roomId:f,isBanned:h,isRoomModerator:x}=e,y=(0,U.useQueryClient)(),{canManageRoomModerators:v}=(0,c.useRoomModerationContext)(),{mutate:b,isPending:C}=(0,B.useAssignModerator)(),{mutate:w,isPending:M}=(0,B.useUnassignModerator)(),{mutate:S,isPending:N}=(0,B.useBanChatUser)(),{mutate:R,isPending:_}=(0,B.useUnbanChatUser)();m[0]!==S||m[1]!==y||m[2]!==f||m[3]!==g||m[4]!==p?(s=e=>{S({roomId:f,userAddress:g,username:p,reason:e},{onSuccess:()=>{y.invalidateQueries({queryKey:["bannedUsers",f]})}})},m[0]=S,m[1]=y,m[2]=f,m[3]=g,m[4]=p,m[5]=s):s=m[5];let A=s;m[6]!==b||m[7]!==y||m[8]!==f||m[9]!==g?(n=()=>{b({roomId:f,userAddress:g},{onSuccess:()=>{y.invalidateQueries({queryKey:["roomModerators",f]}),y.invalidateQueries({queryKey:["bannedUsers",f]})}})},m[6]=b,m[7]=y,m[8]=f,m[9]=g,m[10]=n):n=m[10];let E=n;m[11]!==y||m[12]!==f||m[13]!==w||m[14]!==g?(a=()=>{w({roomId:f,userAddress:g},{onSuccess:()=>{y.invalidateQueries({queryKey:["roomModerators",f]})}})},m[11]=y,m[12]=f,m[13]=w,m[14]=g,m[15]=a):a=m[15];let k=a;m[16]!==y||m[17]!==f||m[18]!==R||m[19]!==g?(o=()=>{R({roomId:f,userAddress:g},{onSuccess:()=>{y.invalidateQueries({queryKey:["bannedUsers",f]})}})},m[16]=y,m[17]=f,m[18]=R,m[19]=g,m[20]=o):o=m[20];let T=o,L=C||M||N||_;return m[21]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)(es.DropdownMenu.Trigger,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"rounded-md p-1 hover:bg-gray-600",children:(0,t.jsx)(W.MoreVertical,{size:16})})}),m[21]=l):l=m[21],m[22]!==A||m[23]!==T||m[24]!==h||m[25]!==L?(i=h?(0,t.jsx)(es.DropdownMenuItem,{icon:(0,t.jsx)(K.ShieldCheck,{size:14}),onSelect:T,disabled:L,children:"Unban User"}):(0,t.jsxs)(es.DropdownMenu.Sub,{children:[(0,t.jsxs)(es.DropdownMenu.SubTrigger,{className:"text-red-400",disabled:L,children:[(0,t.jsx)(Z.Ban,{size:14}),"Ban User"]}),(0,t.jsxs)(es.DropdownMenu.SubContent,{children:[(0,t.jsx)(es.DropdownMenu.Label,{children:"Select Ban Reason:"}),(0,t.jsx)(es.DropdownMenuItem,{icon:(0,t.jsx)(ee.ShieldAlert,{size:14}),onSelect:()=>A(j.DeleteMessageReasonEnum.TOXIC),children:"Toxic"}),(0,t.jsx)(es.DropdownMenuItem,{icon:(0,t.jsx)(K.ShieldCheck,{size:14}),onSelect:()=>A(j.DeleteMessageReasonEnum.SPAM),children:"Spam"})]})]}),m[22]=A,m[23]=T,m[24]=h,m[25]=L,m[26]=i):i=m[26],m[27]!==v||m[28]!==E||m[29]!==k||m[30]!==L||m[31]!==x?(d=v&&(0,t.jsx)(t.Fragment,{children:x?(0,t.jsx)(es.DropdownMenuItem,{icon:(0,t.jsx)(et.UserMinus,{size:14}),onSelect:k,disabled:L,children:"Unassign Moderator"}):(0,t.jsx)(es.DropdownMenuItem,{icon:(0,t.jsx)(er.UserPlus,{size:14}),onSelect:E,disabled:L,children:"Assign as Moderator"})}),m[27]=v,m[28]=E,m[29]=k,m[30]=L,m[31]=x,m[32]=d):d=m[32],m[33]!==i||m[34]!==d?(u=(0,t.jsxs)(es.DropdownMenu,{children:[l,(0,t.jsxs)(es.DropdownMenu.Content,{align:"end",children:[i,d]})]}),m[33]=i,m[34]=d,m[35]=u):u=m[35],u},ea=e=>{let s,n,a,o,l,d,u,m,g,p,f,h,x,y,v,b=(0,r.c)(42),{participant:j,roomId:C}=e,{canModerateRoom:w}=(0,c.useRoomModerationContext)();b[0]!==w?(s={enabled:w},b[0]=w,b[1]=s):s=b[1];let{data:M}=(0,H.useGetBannedUsers)(C,s),{userAddress:S}=(0,i.useLivechat)();b[2]!==C?(n=e=>e.roomModeratorsByRoom[C],b[2]=C,b[3]=n):n=b[3];let N=(0,J.useRoomModeratorsStore)(n);b[4]!==w?(a={enabled:w},b[4]=w,b[5]=a):a=b[5],(0,Y.useGetRoomModerators)(C,a),b[6]!==j.userAddress||b[7]!==N?(o=!!N&&N.has(j.userAddress.toLowerCase()),b[6]=j.userAddress,b[7]=N,b[8]=o):o=b[8];let _=o;b[9]!==M||b[10]!==j.userAddress?(l=M?.some(e=>e.userAddress===j.userAddress)??!1,b[9]=M,b[10]=j.userAddress,b[11]=l):l=b[11];let E=l;b[12]!==S||b[13]!==j.userAddress?(d=!!S&&j.userAddress.toLowerCase()===S.toLowerCase(),b[12]=S,b[13]=j.userAddress,b[14]=d):d=b[14];let k=d;b[15]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)(X.User,{size:16,className:"text-gray-400"}),b[15]=u):u=b[15];let T=j.username;b[16]!==j.username?(m=(0,A.getDisplayUsername)(j.username),b[16]=j.username,b[17]=m):m=b[17],b[18]!==j.username||b[19]!==m?(g=(0,t.jsx)(R.ProfileLink,{slug:T,className:"text-sm font-medium",children:m}),b[18]=j.username,b[19]=m,b[20]=g):g=b[20],b[21]!==k?(p=k&&(0,t.jsx)("span",{title:"Livestream Creator",children:(0,t.jsx)(V.Star,{size:14,className:"text-yellow-400"})}),b[21]=k,b[22]=p):p=b[22],b[23]!==k||b[24]!==_?(f=_&&!k&&(0,t.jsx)("span",{title:"Room Moderator",children:(0,t.jsx)(Q,{size:14,className:"text-blue-400"})}),b[23]=k,b[24]=_,b[25]=f):f=b[25],b[26]!==E?(h=E&&(0,t.jsx)("span",{title:"Banned",children:(0,t.jsx)($,{size:14,className:"text-red-500"})}),b[26]=E,b[27]=h):h=b[27],b[28]!==g||b[29]!==p||b[30]!==f||b[31]!==h?(x=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[u,g,p,f,h]}),b[28]=g,b[29]=p,b[30]=f,b[31]=h,b[32]=x):x=b[32];let L=_||k;return b[33]!==E||b[34]!==j.userAddress||b[35]!==j.username||b[36]!==C||b[37]!==L?(y=(0,t.jsx)(en,{userAddress:j.userAddress,username:j.username,roomId:C,isBanned:E,isRoomModerator:L}),b[33]=E,b[34]=j.userAddress,b[35]=j.username,b[36]=C,b[37]=L,b[38]=y):y=b[38],b[39]!==x||b[40]!==y?(v=(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-md p-2 hover:bg-gray-700/50",children:[x,y]}),b[39]=x,b[40]=y,b[41]=v):v=b[41],v},eo=e=>{let s,n,a,o,l=(0,r.c)(11),{participants:i,roomId:c}=e;if(l[0]!==i||l[1]!==c){a=Symbol.for("react.early_return_sentinel");e:{let e,r=i.filter(el);if(0===r.length){let e;l[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"py-4 text-center text-sm text-gray-500",children:"No participants found."}),l[5]=e):e=l[5],a=e;break e}s="flex flex-col gap-1",l[6]!==c?(e=e=>(0,t.jsx)(ea,{participant:e,roomId:c},`${e.userAddress}-${e.username}`),l[6]=c,l[7]=e):e=l[7],n=r.map(e)}l[0]=i,l[1]=c,l[2]=s,l[3]=n,l[4]=a}else s=l[2],n=l[3],a=l[4];return a!==Symbol.for("react.early_return_sentinel")?a:(l[8]!==s||l[9]!==n?(o=(0,t.jsx)("div",{className:s,children:n}),l[8]=s,l[9]=n,l[10]=o):o=l[10],o)};function el(e){return e&&e.userAddress&&e.username}let ei=e=>{let s,n,a,o,u,m,g,p,h,x,y,v,b,C=(0,r.c)(30),{roomId:w}=e,[M,S]=(0,l.useState)(""),{messages:N}=(0,i.useLivechat)(),R=(0,U.useQueryClient)(),{canModerateRoom:_}=(0,c.useRoomModerationContext)();C[0]!==_?(s={enabled:_},C[0]=_,C[1]=s):s=C[1];let{data:A,isLoading:E}=(0,F.useGetChatParticipants)(w,s);C[2]!==_?(n={enabled:_},C[2]=_,C[3]=n):n=C[3];let{data:k,isLoading:T}=(0,H.useGetBannedUsers)(w,n);C[4]!==N||C[5]!==A||C[6]!==R||C[7]!==w?(a=()=>{let e=N[N.length-1];A&&e&&e.messageType===j.MessageType.REGULAR&&(A.some(t=>t.userAddress===e.userAddress)||R.invalidateQueries({queryKey:(0,F.getChatParticipantsQueryKey)(w)}))},o=[N,A,R,w],C[4]=N,C[5]=A,C[6]=R,C[7]=w,C[8]=a,C[9]=o):(a=C[8],o=C[9]),(0,l.useEffect)(a,o);let L=(0,d.useChatModerationStore)(ec);C[10]!==A||C[11]!==M?(u=M&&A?A.filter(e=>e.username.toLowerCase().includes(M.toLowerCase())):A||[],C[10]=A,C[11]=M,C[12]=u):u=C[12];let I=u,P=E||T;return C[13]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)("h2",{className:"text-sm font-semibold",children:"Chat Moderation"}),C[13]=m):m=C[13],C[14]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)(O.X,{size:18}),C[14]=g):g=C[14],C[15]!==L?(p=(0,t.jsxs)("header",{className:"flex items-center justify-between border-b border-gray-700 p-2",children:[m,(0,t.jsx)("button",{onClick:L,className:"rounded-full p-1 hover:bg-gray-700",children:g})]}),C[15]=L,C[16]=p):p=C[16],C[17]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)(D.Search,{size:16,className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"}),C[17]=h):h=C[17],C[18]===Symbol.for("react.memo_cache_sentinel")?(x=e=>S(e.target.value),C[18]=x):x=C[18],C[19]!==M?(y=(0,t.jsx)("div",{className:"p-2",children:(0,t.jsxs)("div",{className:"relative",children:[h,(0,t.jsx)("input",{type:"text",placeholder:"Search users...",value:M,onChange:x,className:"w-full rounded-md border border-gray-700 bg-gray-900 py-1.5 pl-8 pr-2 text-sm focus:border-blue-500 focus:ring-blue-500"})]})}),C[19]=M,C[20]=y):y=C[20],C[21]!==k||C[22]!==I||C[23]!==P||C[24]!==w?(v=P?(0,t.jsx)(f.Loading,{}):(0,t.jsxs)("div",{className:"min-h-0 flex-1 overflow-y-auto p-2",children:[(0,t.jsxs)("section",{className:"mb-4",children:[(0,t.jsxs)("h3",{className:"mb-2 px-1 text-xs font-bold uppercase text-gray-400",children:["Chat Participants (",I.length,")"]}),(0,t.jsx)(eo,{participants:I,roomId:w})]}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("h3",{className:"mb-2 px-1 text-xs font-bold uppercase text-gray-400",children:["Banned Users (",k?.length||0,")"]}),(0,t.jsx)(G,{users:k||[],roomId:w})]})]}),C[21]=k,C[22]=I,C[23]=P,C[24]=w,C[25]=v):v=C[25],C[26]!==y||C[27]!==v||C[28]!==p?(b=(0,t.jsxs)("div",{className:"flex min-h-0 flex-col bg-bg-secondary text-white",children:[p,y,v]}),C[26]=y,C[27]=v,C[28]=p,C[29]=b):b=C[29],b};function ec(e){return e.closeModerationView}var ed=e.i(766409);let eu=e=>{let s,n,a,o,l=(0,r.c)(14),{roomId:i}=e,c=(0,d.useChatModerationStore)(em),u=(0,d.useChatModerationStore)(eg),m=(0,d.useChatModerationStore)(ep);l[0]!==m||l[1]!==c||l[2]!==u||l[3]!==i?(s=e=>{e.stopPropagation(),c?m():u(i)},l[0]=m,l[1]=c,l[2]=u,l[3]=i,l[4]=s):s=l[4];let g=s,p=c?"Chat":"Moderation",f=c?ed.ArrowLeft:Q,h=c?"Return to chat":"Chat Moderation";return l[5]!==f?(n=(0,t.jsx)(f,{size:16}),l[5]=f,l[6]=n):n=l[6],l[7]!==p?(a=(0,t.jsx)("span",{children:p}),l[7]=p,l[8]=a):a=l[8],l[9]!==h||l[10]!==g||l[11]!==n||l[12]!==a?(o=(0,t.jsxs)("button",{onClick:g,className:"flex items-center gap-1.5 rounded-md p-2 text-xs font-semibold text-gray-300 hover:bg-gray-700/50 hover:text-white",title:h,children:[n,a]}),l[9]=h,l[10]=g,l[11]=n,l[12]=a,l[13]=o):o=l[13],o};function em(e){return e.isModerationViewActive}function eg(e){return e.openModerationView}function ep(e){return e.closeModerationView}let ef=e=>{let s,n,a,o,l=(0,r.c)(12),{roomId:u}=e,{canModerateRoom:m}=(0,c.useRoomModerationContext)(),{isModerationViewActive:g,activeModerationRoomId:p}=(0,d.useChatModerationStore)(),{isCollapsed:f}=(0,i.useLivechat)(),h=g&&p===u;return l[0]!==m||l[1]!==u?(s=m&&(0,t.jsx)(eu,{roomId:u}),l[0]=m,l[1]=u,l[2]=s):s=l[2],l[3]!==s?(n=(0,t.jsx)(P,{children:s}),l[3]=s,l[4]=n):n=l[4],l[5]!==f||l[6]!==u||l[7]!==h?(a=!f&&(0,t.jsx)("div",{className:"flex flex-1 flex-col overflow-hidden",children:h?(0,t.jsx)(ei,{roomId:u}):(0,t.jsx)(T,{})}),l[5]=f,l[6]=u,l[7]=h,l[8]=a):a=l[8],l[9]!==n||l[10]!==a?(o=(0,t.jsxs)(t.Fragment,{children:[n,a]}),l[9]=n,l[10]=a,l[11]=o):o=l[11],o},eh=e=>{let s,n,c,d,m,g,p,f,h=(0,r.c)(26),{roomId:x,user:y,className:v}=e,{isConnected:b,isJoined:j,isJoining:C,isCollapsed:w,joinRoom:M,leaveRoom:S}=(0,i.useLivechat)(),{authReady:N}=(0,a.useProfile)();h[0]!==y?.address||h[1]!==y?.username?(s=y?.username?.trim()||y?.address?.trim()||null,h[0]=y?.address,h[1]=y?.username,h[2]=s):s=h[2];let R=s,_=y?.profile_image||u.PEPE_PLACEHOLDER,A=void 0!==y,E=(0,l.useRef)(!1),k=(0,l.useRef)(null);h[3]!==N||h[4]!==R||h[5]!==b||h[6]!==j||h[7]!==C||h[8]!==A||h[9]!==M||h[10]!==_||h[11]!==x?(n=()=>{k.current&&k.current!==x&&(E.current=!1,k.current=null),N&&A&&b&&x&&!j&&!C&&!E.current&&(E.current=!0,k.current=x,M(x,{username:R,profile_image:_}))},c=[N,A,b,x,j,C,M,R,_],h[3]=N,h[4]=R,h[5]=b,h[6]=j,h[7]=C,h[8]=A,h[9]=M,h[10]=_,h[11]=x,h[12]=n,h[13]=c):(n=h[12],c=h[13]),(0,l.useEffect)(n,c),h[14]!==S?(d=()=>()=>{k.current&&(S(),E.current=!1,k.current=null)},m=[S],h[14]=S,h[15]=d,h[16]=m):(d=h[15],m=h[16]),(0,l.useEffect)(d,m);let T=!w;return h[17]!==v||h[18]!==w||h[19]!==T?(g=(0,o.default)("flex","flex-col","overflow-hidden","rounded-lg","bg-[#1E2028]","border","border-[#2F3037]","shadow-lg","backdrop-blur-md","transition-[height]","duration-200","ease-in-out",{"h-[44px]":w,"h-full max-h-[500px]":T},v),h[17]=v,h[18]=w,h[19]=T,h[20]=g):g=h[20],h[21]!==x?(p=(0,t.jsx)(ef,{roomId:x}),h[21]=x,h[22]=p):p=h[22],h[23]!==g||h[24]!==p?(f=(0,t.jsx)("div",{className:g,children:p}),h[23]=g,h[24]=p,h[25]=f):f=h[25],f};e.s(["LivechatView",0,eh],793764),e.s(["Livechat",0,e=>{let a,o=(0,r.c)(4),{className:l}=e,{mintId:i,livechatUser:c}=(0,n.useLivestreamContext)(),d=(0,s.useLivestream)(i);return d?.isLive?(o[0]!==l||o[1]!==c||o[2]!==i?(a=(0,t.jsx)(eh,{roomId:i,user:c,className:l}),o[0]=l,o[1]=c,o[2]=i,o[3]=a):a=o[3],a):null}],276116)}]);