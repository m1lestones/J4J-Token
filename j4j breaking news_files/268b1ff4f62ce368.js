(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,407672,e=>{"use strict";var t=e.i(568969);(0,t.createHook)(function(e){return e});var r=(0,t.forwardRef)(function(e){return(0,t.createElement)("div",e)});Object.assign(r,["a","button","details","dialog","div","form","h1","h2","h3","h4","h5","h6","header","img","input","label","li","nav","ol","p","section","select","span","summary","textarea","ul","svg"].reduce((e,r)=>(e[r]=(0,t.forwardRef)(function(e){return(0,t.createElement)(r,e)}),e),{})),e.s(["Role",()=>r])},427619,(e,t,r)=>{t.exports=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}},615529,(e,t,r)=>{var n=e.r(427619),a=e.r(394370);t.exports=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=a(r))==r?r:0),void 0!==t&&(t=(t=a(t))==t?t:0),n(a(e),t,r)}},655039,(e,t,r)=>{t.exports=function(e){return e&&e.length?e[0]:void 0}},820686,(e,t,r)=>{var n=e.r(603114),a=e.r(626568),i=e.r(417288),o=e.r(272098),s=e.r(707850),l=e.r(385370),c=e.r(570795),u=e.r(713376),d=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(s(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||u(e)||i(e)))return!e.length;var t=a(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var r in e)if(d.call(e,r))return!1;return!0}},501874,(e,t,r)=>{var n=e.r(225935),a=e.r(716110),i=e.r(697125);t.exports=function(e,t,r){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&a(e,t,r)?(t=0,r=o):(t=null==t?0:i(t),r=void 0===r?o:i(r)),n(e,t,r)):[]}},600017,(e,t,r)=>{var n=e.r(25964),a=e.r(607873),i=e.r(76780),o=e.r(166536),s=e.r(632900),l=e.r(689808);t.exports=function(e,t,r,c){var u=-1,d=a,m=!0,f=e.length,_=[],p=t.length;if(!f)return _;r&&(t=o(t,s(r))),c?(d=i,m=!1):t.length>=200&&(d=l,m=!1,t=new n(t));e:for(;++u<f;){var y=e[u],S=null==r?y:r(y);if(y=c||0!==y?y:0,m&&S==S){for(var h=p;h--;)if(t[h]===S)continue e;_.push(y)}else d(t,S,c)||_.push(y)}return _}},836526,(e,t,r)=>{var n=e.r(707850),a=e.r(819674);t.exports=function(e){return a(e)&&n(e)}},542922,(e,t,r)=>{var n=e.r(600017),a=e.r(686521),i=e.r(836526);t.exports=a(function(e,t){return i(e)?n(e,t):[]})},708081,743182,188085,440875,e=>{"use strict";var t=e.i(942765);let r={WIDGETS_STATE:"widgets-state-v0.3",WIDGET_LAYOUT:"widget-layout-v0.9",WIDGET_LAYOUT_SETTINGS:"widget-layout-settings-v0.2",WIDGET_LAYOUT_SETTINGS_MOBILE:"widget-layout-settings-mobile-v0.1",ADVANCED_COIN_TABS:"advancedCoinTabs",ADVANCED_ACTIVE_TAB_ID:"advancedActiveTabId",BUY_PRESETS:"buy-presets",SELL_PRESETS:"sell-presets",ROW_DISPLAY_SETTINGS:"row-display-settings-v0.3",TRADING_VIEW_CHART_SETTINGS:"trading-view-chart-settings-v0.1",COIN_COLUMN_ORDER:"coin-column-order-v0.1"},n=[{id:"col-0",type:"latest",label:"Newly Created"},{id:"col-1",type:"aboutToGraduate",label:"About To Graduate"},{id:"col-2",type:"graduated",label:"Graduated"}],a=[...n,{id:"col-3",type:"featured",label:"Featured"},{id:"col-4",type:"watchlist",label:"Watchlist"}];e.s(["ALL_AVAILABLE_COLUMNS",0,a,"ASSETS",0,{LOGO:"/logo.png",SOL_LOGO:"/icons/sol_logo.png"},"DEFAULT_BUY_PRESETS",0,[.01,.1,1,10],"DEFAULT_COLORS",0,{CARD_BG:"#000000",BACKGROUND:"#000000",BOTTOM_NAV_BG:"#050912",PRIMARY_GREEN:"#86efac",SECONDARY_GREEN:"#1b1d27",POPOVER_BG:"#1F2937",BORDER_COLOR:"#212329",TEXT_WHITE:"white",TEXT_GRAY:"#9CA3AF",TEXT_GREEN:"#4ADE80"},"DEFAULT_COLUMNS",0,n,"DEFAULT_SELL_PRESETS",0,[25,50,75,100],"DEFAULT_VALUES",0,{BOND_MARKET_CAP_MULTIPLIER:405,SOL_PRICE_DECIMALS:2},"STORAGE_KEYS",0,r,"URL_PARAMS",0,{MINT_ID:"mintId",SCAN:"scan"}],743182),e.s(["CACHE_TTL",0,{STALE:{VERY_SHORT:5e3,SHORT:1e4,MEDIUM:3e4,STANDARD:6e4,LONG:12e4,VERY_LONG:3e5},GC:{SHORT:6e4,MEDIUM:12e4,STANDARD:3e5,LONG:6e5},REFETCH:{FAST:1e4,MEDIUM:3e4,SLOW:6e4}}],188085),e.s([],440875);var i=e.i(615529),o=e.i(564962),s=e.i(461317),l=e.i(655039),c=e.i(272098),u=e.i(820686),d=e.i(555221),m=e.i(394786),f=e.i(501874),_=e.i(542922),p=e.i(463578),y=e.i(281675);let S=(0,y.createContext)(void 0);function h(e,t){let[r,n]=(0,y.useState)(()=>{try{let r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch{return t}}),a=(0,y.useCallback)(t=>{try{let a=t instanceof Function?t(r):t;n(a),(0,c.default)(a)&&(0,u.default)(a)||""===a?window.localStorage.removeItem(e):window.localStorage.setItem(e,JSON.stringify(a))}catch{}},[e,r]);return[r,a]}function T(){let e=(0,y.useContext)(S);if(!e)throw Error("useTabs must be used within a TabsProvider");return e}function g({children:e}){let n=(0,y.useRef)(!1),a=(0,y.useRef)(null),T=(0,y.useRef)(!1),g=(0,p.useParams)(),v=(0,p.useRouter)(),b=(0,p.usePathname)(),E="/advanced",C=b.startsWith(`${E}/scan`),A=(0,y.useMemo)(()=>{try{return g.mintId||""}catch{return""}},[g]),[w,O]=(0,y.useState)(!0),[I,N]=h(r.ADVANCED_COIN_TABS,[]),R=(0,y.useCallback)(()=>{try{if(A)return A;if(!(0,u.default)(I))return(0,s.default)((0,l.default)(I),"mintId","");return""}catch{return""}},[A,I]),[x,L]=h(r.ADVANCED_ACTIVE_TAB_ID,R()),k=(0,y.useCallback)(e=>{if(!(0,d.default)(e)||(0,u.default)(e))return!1;N(t=>{if(!(0,c.default)(t))return[];if(t.some(t=>(0,s.default)(t,"mintId")===e))return t;let r={mintId:e,label:`Coin ${e.substring(0,8)}...`};return t.length>=8?[r,...t.slice(0,7)]:[r,...t]}),L(e)},[N,L]),D=(0,y.useCallback)(()=>{try{L(""),v.push(`${E}/scan`,{scroll:!1})}catch{}},[L,v,E]),P=(0,y.useCallback)(e=>{L(e),v.push(`${E}/coin/${e}`,{scroll:!1})},[L,v,E]);(0,y.useEffect)(()=>{try{if(!w)return;k(A),O(!1)}catch{O(!1)}},[w,k,A]),(0,y.useEffect)(()=>{try{if(w||!A||C||a.current===A&&n.current||T.current)return;k(A)}catch{}},[A,k,w]),(0,y.useEffect)(()=>{C&&""!==x&&L("")},[C,L,x]);let U=(0,y.useCallback)(e=>{k(e),P(e)},[k]),M=(0,y.useCallback)(e=>{try{if(!(0,d.default)(e)||(0,u.default)(e))return;N(t=>{if(!(0,c.default)(t))return[];if(t.some(t=>(0,s.default)(t,"mintId")===e))return t;let r={mintId:e,label:`Coin ${e.substring(0,8)}...`};return t.length>=8?[r,...t.slice(0,7)]:[r,...t]})}catch{}},[N]),B=(0,y.useCallback)(e=>{try{let t=(0,o.default)(I,t=>(0,s.default)(t,"mintId")===e);if(-1===t)return;n.current=!0,a.current=e,setTimeout(()=>n.current=!1,500);let r=(0,_.default)(I,...I.filter(t=>(0,s.default)(t,"mintId")===e));if(N(r),C||e!==x)return;if((0,u.default)(r)){L(""),D();return}let l=(0,i.default)(t,0,r.length-1),c=(0,s.default)(r[l],"mintId","");P(c)}catch{}},[P,D,C,I,x,N,L]),G=(0,y.useCallback)(e=>{try{let t=(0,o.default)(I,t=>(0,s.default)(t,"mintId")===e);if(-1===t)return;let r=(0,f.default)(I,0,t+1);if(N(r),C||r.some(e=>(0,s.default)(e,"mintId")===x))return;if((0,u.default)(r)||""===x)D();else{let e=(0,s.default)((0,m.default)(r),"mintId","");P(e)}}catch{}},[I,x,N,L]),j=(0,y.useCallback)(e=>{try{let t=(0,o.default)(I,t=>(0,s.default)(t,"mintId")===e);if(-1===t)return;let r=(0,f.default)(I,t);if(N(r),C||r.some(e=>(0,s.default)(e,"mintId")===x))return;if((0,u.default)(r)||""===x)D();else{let e=(0,s.default)((0,l.default)(r),"mintId","");P(e)}}catch{}},[I,x,N,L]),F=(0,y.useCallback)(()=>{try{T.current=!0,N([]),L(""),D(),setTimeout(()=>T.current=!1,100)}catch{T.current=!1}},[N,L]),V=(0,y.useCallback)(e=>{(e!==x||C)&&L(e)},[x,L,C]),W=(0,y.useCallback)(()=>{try{return x||""}catch{return""}},[x]),Y=(0,y.useCallback)((e,t)=>{try{N(r=>{if(!(0,c.default)(r))return[];let n=[...r],[a]=n.splice(e,1);return a&&n.splice(t,0,a),n})}catch{}},[N]);(0,y.useEffect)(()=>{try{if(w)return;x&&!I.some(e=>(0,s.default)(e,"mintId")===x)&&((0,u.default)(I)?L(""):L((0,s.default)((0,l.default)(I),"mintId","")))}catch{}},[I,x,w,L]),(0,y.useEffect)(()=>{let e=()=>{try{let e=new URLSearchParams(window.location.search),t=e.get("mintId")||"";"true"!==e.get("scan")&&t?t&&k(t):L("")}catch{}};try{return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}catch{return()=>{}}},[k,L]),(0,y.useEffect)(()=>{try{if(""!==A||C||""===x)return;N([]),L("")}catch{}},[A,x,N,L]);let $=(0,y.useMemo)(()=>({tabs:I,activeTabId:x,addTab:U,addTabWithoutOpening:M,removeTab:B,closeTabsToTheRight:G,closeTabsToTheLeft:j,closeAllTabs:F,setActiveTab:V,getActiveMintId:W,reorderTabs:Y}),[I,x,U,M,B,G,j,F,V,W,Y]);return(0,t.jsx)(S.Provider,{value:$,children:e})}e.s(["TabsProvider",()=>g,"useTabs",()=>T],708081)},145913,72669,e=>{"use strict";var t=e.i(649785);e.i(846164);var r=e.i(948293),n=e.i(401998),a=e.i(711774),i=e.i(655703),o=e.i(701082),s=e.i(456753);function l(){let e,l,c,u,d=(0,t.c)(11),{priorityLevel:m}=(0,o.usePriorityLevel)(),{executeV3:f}=(0,r.useGoogleReCaptcha)(),{getCurrentBatchId:_}=(0,s.useSeenCoinsObserver)(),{wallet:p}=(0,i.useProfile)(),{coinAccountsRef:y}=(0,n.useCoinAccountsRefContext)();d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.getClientServerUrl)(),d[0]=e):e=d[0],d[1]!==m||d[2]!==p?(l={wallet:p,priorityLevel:m,clientServerUrl:e},d[1]=m,d[2]=p,d[3]=l):l=d[3];let{signAndSendSwapTx:S}=(0,n.useSignAndSendSwapTx)(l);d[4]!==y||d[5]!==f||d[6]!==_||d[7]!==S?(c=async e=>{let{isBuySelected:t,mint:r,instructions:a,defaultUnits:i,unitsScaleFactor:o,frontRunningProtection:s,tipAmount:l}=e;if(!f)return;let c=await f("send_transaction"),u=_().id,{bondingCurve:d}=(0,n.destructureCoinAccountsRef)(y);return await S({isBuySelected:t,mint:r,instructions:a,defaultUnits:i,unitsScaleFactor:o,frontRunningProtection:s,tipAmount:l,captchaToken:c,batchId:u,bondingCurve:d})},d[4]=y,d[5]=f,d[6]=_,d[7]=S,d[8]=c):c=d[8];let h=c;return d[9]!==h?(u={signAndSendSwapTx:h},d[9]=h,d[10]=u):u=d[10],u}e.s(["useFrontendSendSwapTx",()=>l],145913);var c=e.i(426091),u=e.i(235364);let d={SUCCESS:"success",NOT_ATTEMPTED:"not_attempted"};e.s(["CONVERSION_LOGGING_STATUS",0,d,"default",0,()=>{let e,r,n,o=(0,t.c)(9),{decodedJwt:l}=(0,i.useProfile)(),{sessionId:m,batchId:f}=(0,s.useSeenCoinsObserver)();o[0]!==l?(e=async(e,t,r,n,i)=>{if(!l)return{status:d.NOT_ATTEMPTED,reason:"User not authenticated"};let o=(0,c.getWalletName)(),s={coinId:e,batchId:t.batchId,itemPosition:t.itemPosition,screenWidth:t.screenWidth,origin:t.origin,sortBy:t.sortBy,wasAnimationOn:t.wasAnimationOn,boughtAmount:r,sessionId:t.sessionId,pageNumber:t.pageNumber,marketCap:n,createdAt:new Date().toISOString(),forYouData:t.forYouData,searchTerm:i,rec_id:t.rec_id,walletType:o};try{return await fetch(`${(0,a.getClientServerUrl)()}/activity/convert`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),{status:d.SUCCESS}}catch(e){throw console.error("Error activity convert:",e),e}},o[0]=l,o[1]=e):e=o[1];let _=e;o[2]!==f?.id||o[3]!==l||o[4]!==m?(r=async(e,t,r,n,i,o,s,_)=>{if(!l)return{status:d.NOT_ATTEMPTED,reason:"User not authenticated"};let p=(0,c.getWalletName)(),y=window.innerWidth,S={coinId:e,itemPosition:t?.itemPosition??-1,screenWidth:t?.screenWidth??y,sessionId:t?.sessionId??m??"",batchId:t?.batchId??f?.id??"",isOwned:t?.isOwned??!1,sortBy:t?.sortBy??"",boughtAmount:r,marketCap:n,volume:i,numHolders:o,filters:(0,u.convertFilters)(_),createdAt:new Date().toISOString(),isQuickBuy:s,walletType:p,origin:t?.origin??"advanced_latest"};try{return await fetch(`${(0,a.getClientServerUrl)()}/activity/convert-advanced`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}),{status:d.SUCCESS}}catch(e){throw console.error("Error activity convert:",e),e}},o[2]=f?.id,o[3]=l,o[4]=m,o[5]=r):r=o[5];let p=r;return o[6]!==p||o[7]!==_?(n={handleCoinConversion:_,handleAdvancedCoinConversion:p},o[6]=p,o[7]=_,o[8]=n):n=o[8],n}],72669)},247647,870464,e=>{"use strict";var t=e.i(942765),r=e.i(649785),n=e.i(281675),a=e.i(425444),i=e.i(182119),o=e.i(171580);let s="buy-with-privy-large-amounts-confirmation",l="buy-with-privy-large-amounts-confirmation-checkbox";class c{solAmount;wallet;tradeType;threshold;needConfirmation;constructor(e){this.solAmount=e.solAmount,this.wallet=e.wallet,this.tradeType=e.tradeType,this.threshold=parseFloat(o.default.env.NEXT_PUBLIC_NEED_CONFIRMATION_SOL_AMOUNT||"0")||4,this.needConfirmation=c.getNeedConfirmation()}static getLocalStorageValue(e,t){{let r=localStorage.getItem(e);return null!==r?JSON.parse(r):t}}static setLocalStorageValue(e,t){localStorage.setItem(e,JSON.stringify(t))}static getNeedConfirmation(){return this.getLocalStorageValue(s,!0)}static setNeedConfirmation(e){this.setLocalStorageValue(s,e)}static getConfirmationCheckbox(){return this.getLocalStorageValue(l,!0)}static setConfirmationCheckbox(e){this.setLocalStorageValue(l,e)}shouldConfirm(){return"buy"===this.tradeType&&!!this.needConfirmation&&!(this.solAmount<this.threshold)&&"privy"===this.wallet?.walletClientType}}e.s(["TradeConfirmation",()=>c],870464),e.s(["default",0,e=>{let o,s,l,u,d,m,f,_,p,y,S,h,T,g,v,b,E,C=(0,r.c)(39),{isOpen:A,onOpenChange:w,solAmount:O,coinSymbol:I,tradeType:N,tokenImageUri:R,tradeConfirmationDialogCallback:x}=e;C[0]===Symbol.for("react.memo_cache_sentinel")?(o=c.getConfirmationCheckbox(),C[0]=o):o=C[0];let[L,k]=(0,n.useState)(o);C[1]===Symbol.for("react.memo_cache_sentinel")?(s=e=>{k(e),c.setConfirmationCheckbox(e)},C[1]=s):s=C[1];let D=s;C[2]!==w||C[3]!==L||C[4]!==x?(l=()=>{L&&c.setNeedConfirmation(!1),x?.(),w(!1)},C[2]=w,C[3]=L,C[4]=x,C[5]=l):l=C[5];let P=l;if(C[6]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)("h3",{className:"text-center text-[20px] leading-[24px] text-slate-50",children:"trade confirmation"}),C[6]=u):u=C[6],C[7]!==I||C[8]!==R?(d=R&&(0,t.jsx)(a.default,{className:"h-20 w-20",src:R,alt:I,width:80,height:80}),C[7]=I,C[8]=R,C[9]=d):d=C[9],C[10]!==I)m=I&&I.startsWith("$")?I.slice(1):I,C[10]=I,C[11]=m;else m=C[11];return C[12]!==O||C[13]!==m||C[14]!==N?(f=(0,t.jsxs)("div",{className:"self-stretch text-left text-xs font-normal leading-[16px] text-slate-50",children:["You are about to ",N," ",O," SOL of $",m,". Please confirm."]}),C[12]=O,C[13]=m,C[14]=N,C[15]=f):f=C[15],C[16]===Symbol.for("react.memo_cache_sentinel")?(_=e=>D(e.target.checked),C[16]=_):_=C[16],C[17]!==L?(p=(0,t.jsx)("input",{type:"checkbox",className:"mr-1 h-4 w-4 cursor-pointer bg-white/50",checked:L,onChange:_}),C[17]=L,C[18]=p):p=C[18],C[19]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)("div",{className:"whitespace-nowrap text-left text-xs font-normal leading-none text-slate-50",children:"skip trade confirmations from now on"}),C[19]=y):y=C[19],C[20]!==p?(S=(0,t.jsxs)("div",{className:"inline-flex items-center justify-start gap-1 self-stretch",children:[p,y]}),C[20]=p,C[21]=S):S=C[21],C[22]!==w?(h=(0,t.jsx)("div",{className:"cursor-pointer text-center text-sm font-normal leading-[18px] text-slate-50",onClick:()=>w(!1),children:"[cancel]"}),C[22]=w,C[23]=h):h=C[23],C[24]===Symbol.for("react.memo_cache_sentinel")?(T=(0,t.jsx)("div",{className:"text-center text-sm font-normal leading-[18px] text-black",children:"confirm"}),C[24]=T):T=C[24],C[25]!==P?(g=(0,t.jsx)("div",{className:"flex cursor-pointer items-center justify-center gap-1 rounded bg-[#1fd978] p-2",onClick:P,children:T}),C[25]=P,C[26]=g):g=C[26],C[27]!==h||C[28]!==g?(v=(0,t.jsxs)("div",{className:"inline-flex items-center justify-end gap-4 self-stretch",children:[h,g]}),C[27]=h,C[28]=g,C[29]=v):v=C[29],C[30]!==S||C[31]!==v||C[32]!==d||C[33]!==f?(b=(0,t.jsxs)(i.DialogContent,{className:"inline-flex h-[335px] w-[285px] flex-col items-center justify-start gap-6 rounded-lg border border-slate-50 bg-bg-secondary p-6",children:[u,d,f,S,v]}),C[30]=S,C[31]=v,C[32]=d,C[33]=f,C[34]=b):b=C[34],C[35]!==A||C[36]!==w||C[37]!==b?(E=(0,t.jsx)(i.Dialog,{open:A,onOpenChange:w,children:b}),C[35]=A,C[36]=w,C[37]=b,C[38]=E):E=C[38],E}],247647)},151799,e=>{"use strict";e.i(353110);var t=e.i(494692),r=e.i(401998),n=e.i(10785),a=e.i(655703),i=e.i(235828),o=e.i(606933),s=e.i(281675),l=e.i(754219),c=e.i(974658),u=e.i(240763),d=e.i(145913),m=e.i(72669),f=e.i(990116),_=e.i(595673),p=e.i(198825),y=e.i(569526),S=e.i(561667),h=e.i(870464);let T="Activity logging failed:";function g({coin:e,surface:g,frontRunningProtection:v,tipAmount:b,slippage:E,isBuySelected:C,setIsBuySelected:A}){let[w,O]=(0,s.useState)(!1),[I,N]=(0,s.useState)(!1),[R,x]=(0,s.useState)(null),{amount:L,setAmount:k,solAmount:D,setSolAmount:P,nativeSelected:U,setNativeSelected:M,inputSolValueArrow:B,setInputSolValueArrow:G}=(0,r.usePumpQuote)(C),{isSolBalanceInsufficientCallback:j,isTokenBalanceInsufficientCallback:F}=(0,r.useUserBalances)(),V=(0,o.useQueryClient)(),{address:W,wallet:Y}=(0,a.useProfile)(),{lastClickImpression:$,lastAdvancedClickImpression:H}=(0,y.useLastClickImpression)(),{handleCoinConversion:J,handleAdvancedCoinConversion:K}=(0,m.default)(),{signAndSendSwapTx:X}=(0,d.useFrontendSendSwapTx)(),{setShowWallet:Q}=(0,p.useConnectWallet)(),{setRecentlyTraded:z,handleRecentTrade:q,handleFirstTrade:Z}=(0,S.useRecentTrade)(),{trackEvent:ee}=(0,f.useStandardizedAnalytics)(),{getInstructions:et}=(0,r.usePump)(),er=(0,s.useCallback)(()=>$?.mint===e.mint?$.impression:void 0,[$,e]),en=(0,s.useCallback)(async(t,r,a)=>{let o=e.mint;if(!Y){ee("press_connect_wallet",{event_group:"wallet",source_type:"screen",target_type:"button",source:"tradebox",surface:g,mint:o}),Q(!0),O(!1);return}let{type:s,amount:d,solAmount:p,instructions:y,defaultUnits:S,unitsScaleFactor:C}=await et({coin:e,parsedAmount:t,slippage:E,tipAmount:b,frontRunningProtection:v,operation:r?a?"buySolInput":"buyTokenInput":"sellTokenInput"}),I=d.toNumber()/1e6,R=p.toNumber()/i.LAMPORTS_PER_SOL;if(A(r),k(I),P(R),w)return;let L=er(),D=j({isBuySelected:r,nativeSelected:a,solAmount:R}),U=F({isBuySelected:r,amount:I});ee("press_trade_button_tradebox",{event_group:"trade",source_type:"component",target_type:"button",mint:e.mint,swap_type:r?"buy":"sell",value:r?R:I,currency:r?"SOL":e.symbol,slippage:E,wallet_connected:!!Y,sufficient_balance:!D&&!U,impression:L}),O(!0);try{if(t.lten(0)){l.toast.error("invalid amount",{description:"please enter a valid amount to trade"}),O(!1);return}let a=async()=>{try{if(!Y)return;try{let t="advanced"===g?n.SourceScreen.ADVANCED:n.SourceScreen.COIN_DETAILS;$?.mint===e.mint?(0,_.trackTradeInitiated)({mint:e.mint,tradeDirection:r?"buy":"sell",solAmount:p.toNumber()/i.LAMPORTS_PER_SOL,usdMarketCap:e.usd_market_cap,program:(0,_.mapCoinProgramToBlockchainProgram)(e.program),isLivestreamActive:e.is_currently_live,absolutePosition:$.impression.itemPosition,recommendationId:$.impression.rec_id,screen:t}):(0,_.trackTradeInitiated)({mint:e.mint,tradeDirection:r?"buy":"sell",solAmount:p.toNumber()/i.LAMPORTS_PER_SOL,usdMarketCap:e.usd_market_cap,program:(0,_.mapCoinProgramToBlockchainProgram)(e.program),isLivestreamActive:e.is_currently_live,screen:t})}catch(e){console.error("[Analytics] Failed to track trade initiation:",e)}let t=performance.now(),a=er(),o=e.mint,h=p.toNumber(),A=d.toNumber();(0,f.onRecsysEvent)("recsys_started",{mint:o,type:s,amount_sol:h,amount_tokens:A},a),(0,f.onRecsysEvent)("recsys_passed_conditions",{mint:o,type:s,wallet_connected:!!Y,sufficient_balance:!U},a);let w=d.divn(1e6).toNumber(),{toastId:I,interval:N}="buy"===s?(0,c.showBuyLoadingToast)(w,e.symbol,p):(0,c.showSellLoadingToast)(w,e.symbol,p);try{let t=await X({isBuySelected:r,mint:o,instructions:y,defaultUnits:S,unitsScaleFactor:C,frontRunningProtection:v,tipAmount:b});if(!t)throw Error("Transaction failed to send");let{signature:n,confirmTxPromise:l,signedTimestamp:c}=t;(0,f.onRecsysEvent)("recsys_send_tx",{mint:o,type:s,signature:n},a),$?.mint===o&&h>0?((0,f.onRecsysEvent)("recsys_conversion_started",{mint:o,type:s},a),J(o,$.impression,h,e.usd_market_cap,$.searchTerm).then(e=>{e.status===m.CONVERSION_LOGGING_STATUS.SUCCESS&&(0,f.onRecsysEvent)("recsys_conversion_completed",{mint:o,type:s},a)}).catch(e=>{console.error(T,e),(0,f.onRecsysEvent)("recsys_conversion_failed",{mint:o,type:s,result_reason:e.message,error_message:T},a)})):(0,f.onRecsysEvent)("recsys_conversion_skipped",{mint:o,type:s,last_click_impression:$,sol_amount:h},a),H?.mint===o&&h>0&&K(o,H.impression,h,e.usd_market_cap,H.impression.volume,H.impression.numHolders,!1,H.filters).catch(e=>{console.error("Activity log failed:",e)}),(0,u.showTransactionToast)({type:s,mint:o,amount:w,symbol:e.symbol,solAmount:p,signature:n,interval:N,toastId:I,confirmTxPromise:l,signedTimestamp:c,onShowToastSuccess:()=>{ee("code_swap_success_tradebox",{event_group:"trade",source_type:"screen",target_type:"button",type:s,token_amount:w,symbol:e.symbol,mint:o,signature:n,location:"TradeBox",sol_amount:h/1e9,source:"tradebox",raydium:!!e.raydium_pool,provider:e.pump_swap_pool?"pumpswap":e.raydium_pool?"raydium":"bonding_curve",impression:a,is_livestream_active:e.is_currently_live}),(0,f.trackFullStoryEvent)(f.AnalyticsEvents.TRANSACTIONS.SUCCESS,{type:s,amount:w,symbol:e.symbol,mint:o,signature:n,solAmount:h/1e9,message:`${s} successful`}),(0,_.trackSwapSuccess)({tradeDirection:s,mint:o,solAmount:h/i.LAMPORTS_PER_SOL,tokenAmount:w,signature:n,provider:e.pump_swap_pool?"pumpswap":e.raydium_pool?"raydium":"bonding_curve",isLivestreamActive:e.is_currently_live})}})}catch(u){console.error(`could not ${s}`,u),clearInterval(N),l.toast.dismiss(I);let r=t?performance.now()-t:null,n=r?(r/1e3).toFixed(1):null,i="buy"===s?h:A,c="buy"===s?"SOL":e.symbol;ee("code_trade_error_tradebox",{event_group:"trade",source_type:"component",target_type:"button",mint:e.mint,swap_type:s,value:i,currency:c,error_message:u?.message||"Unknown error"}),ee("code_swap_error_tradebox",{event_group:"trade",source_type:"screen",target_type:"button",type:s,error:u?.message,timeElapsed:n?parseFloat(n):void 0,message:"could not submit trade",location:"TradeBox",source:"tradebox",surface:g,raydium:!1,impression:a}),(0,f.trackFullStoryEvent)(f.AnalyticsEvents.TRANSACTIONS.TRADE_ERROR,{swap_type:s,error_message:u?.message||"Unknown error",mint:o,value:i,currency:c}),(0,_.trackSwapError)({tradeDirection:s,mint:e.mint,error:u?.message||"Unknown error",slippage:E.toString()}),l.toast.error(`could not ${s}`,{description:u?.message,cancel:{label:"[dismiss]",onClick:()=>l.toast.dismiss()}}),O(!1);return}q(e.mint),z(!0),r&&Z(),V.invalidateQueries({queryKey:["coin-pnl",e.mint,W]})}catch(e){console.error("Trade failed:",e)}};if(new h.TradeConfirmation({solAmount:p.toNumber()/i.LAMPORTS_PER_SOL,wallet:Y,tradeType:r?"buy":"sell"}).shouldConfirm()){x(()=>async()=>{O(!0);try{await a()}catch(e){console.error("Trade failed:",e)}finally{O(!1)}}),N(!0),O(!1);return}await a()}catch(e){console.error("Trade failed:",e)}finally{O(!1)}},[W,e,v,er,et,K,J,Z,q,j,F,w,H,$,V,k,A,z,Q,P,X,E,g,b,ee,Y]),ea=(0,s.useCallback)(()=>en(U?new t.BN(Math.min(Math.floor(1e9*(D||0)),Number.MAX_SAFE_INTEGER)):(e=>{let[r,n=""]=e.split("."),a=n.padEnd(6,"0").slice(0,6);return new t.BN(`${r}${a}`)})(L.toString()),C,U),[L,en,C,U,D]),ei=(0,s.useMemo)(()=>j({isBuySelected:C,nativeSelected:U,solAmount:D}),[C,j,U,D]),eo=(0,s.useMemo)(()=>F({isBuySelected:C,amount:L}),[L,C,F]);return{handlePlaceTradeWithInputs:en,handlePlaceTrade:ea,amount:L,setAmount:k,solAmount:D,setSolAmount:P,nativeSelected:U,setNativeSelected:M,tradeConfirmationDialogCallback:R,setTradeConfirmationDialogCallback:x,isDialogOpen:I,setIsDialogOpen:N,isTradeLoading:w,setIsTradeLoading:O,inputSolValueArrow:B,setInputSolValueArrow:G,isBuySelected:C,setIsBuySelected:A,isSolBalanceInsufficient:ei,isTokenBalanceInsufficient:eo}}e.s(["usePlaceTrade",()=>g])}]);