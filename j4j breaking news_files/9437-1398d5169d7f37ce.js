(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9437],{2301:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZodError=t.quotelessJson=t.ZodIssueCode=void 0;let i=r(27176);t.ZodIssueCode=i.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),t.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class n extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},i=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(i);else if("invalid_return_type"===n.code)i(n.returnTypeError);else if("invalid_arguments"===n.code)i(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,i=0;for(;i<n.path.length;){let r=n.path[i];i===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(this),r}static assert(e){if(!(e instanceof n))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,i.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let i of this.issues)if(i.path.length>0){let r=i.path[0];t[r]=t[r]||[],t[r].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}t.ZodError=n,n.create=e=>new n(e)},3458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},13829:(e,t,r)=>{"use strict";r.d(t,{Cg:()=>s,Cl:()=>i,Tt:()=>n,fX:()=>o});var i=function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function n(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function s(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}Object.create;function o(e,t,r){if(r||2==arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}Object.create,"function"==typeof SuppressedError&&SuppressedError},14505:(e,t,r)=>{"use strict";r.d(t,{ZX:()=>I});var i,n,s=r(95293),o=r(3098),a=r(73095),l=r(30728),u=r(51552),c=r(31704),d=r(14157);let h=new Uint8Array(32),p={amount:0xffffffffffffffffn,script:o.wg};o.Lo.decimal(8);let f=(e,t)=>void 0===e?t:e;function y(e){if(Array.isArray(e))return e.map(e=>y(e));if((0,c.aY)(e))return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(null===e)return e;if("object"==typeof e)return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,y(t)]));throw Error(`cloneDeep: unknown type=${e} (${typeof e})`)}function g(e){if(void 0===e.script||void 0===e.amount)throw Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}function m(e){if(void 0===e.txid||void 0===e.index)throw Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:f(e.sequence,0xffffffff),finalScriptSig:f(e.finalScriptSig,o.wg)}}function v(e){for(let t in e)l.G3.includes(t)||delete e[t]}!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"}(i||(i={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"}(n||(n={}));let b=o.w3({txid:o.ee(32,!0),index:o.QK});function w(e){if("number"!=typeof e||"string"!=typeof n[e])throw Error(`Invalid SigHash=${e}`);return e}function x(e){let t=31&e;return{isAny:!!(e&i.ANYONECANPAY),isNone:t===i.NONE,isSingle:t===i.SINGLE}}function k(e){if(e.nonWitnessUtxo&&void 0!==e.index){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let r=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!(0,c.ex)(e.witnessUtxo.script,r.script)||e.witnessUtxo.amount!==r.amount))throw Error("validateInput: witnessUtxo different from nonWitnessUtxo");if(e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw Error("nonWitnessUtxo: incorect output index");let t=I.fromRaw(u.NC.encode(e.nonWitnessUtxo),{allowUnknownOutputs:!0,disableScriptCheck:!0,allowUnknownInputs:!0}),r=s.uh.encode(e.txid);if(t.isFinal&&t.id!==r)throw Error(`nonWitnessUtxo: wrong txid, exp=${r} got=${t.id}`)}}return e}function A(e){if(e.nonWitnessUtxo){if(void 0===e.index)throw Error("Unknown input index");return e.nonWitnessUtxo.outputs[e.index]}if(e.witnessUtxo)return e.witnessUtxo;throw Error("Cannot find previous output info")}function S(e,t,r,i=!1,n=!1){let o,{nonWitnessUtxo:d,txid:h}=e;"string"==typeof d&&(d=s.uh.decode(d)),(0,c.aY)(d)&&(d=u.NC.decode(d)),"nonWitnessUtxo"in e||void 0!==d||(d=t?.nonWitnessUtxo),"string"==typeof h&&(h=s.uh.decode(h)),void 0===h&&(h=t?.txid);let p={...t,...e,nonWitnessUtxo:d,txid:h};return"nonWitnessUtxo"in e||void 0!==p.nonWitnessUtxo||delete p.nonWitnessUtxo,void 0===p.sequence&&(p.sequence=0xffffffff),null===p.tapMerkleRoot&&delete p.tapMerkleRoot,p=l.O4(l.k0,p,t,r,n),l.ju.encode(p),p.nonWitnessUtxo&&void 0!==p.index?o=p.nonWitnessUtxo.outputs[p.index]:p.witnessUtxo&&(o=p.witnessUtxo),o&&!i&&(0,a.wN)(o&&o.script,p.redeemScript,p.witnessScript),p}function B(e,t=!1){let r="legacy",n=i.ALL,s=A(e),o=a._o.decode(s.script),l=o.type,u=o,c=[o];if("tr"===o.type)return n=i.DEFAULT,{txType:"taproot",type:"tr",last:o,lastScript:s.script,defaultSighash:n,sighash:e.sighashType||n};{if(("wpkh"===o.type||"wsh"===o.type)&&(r="segwit"),"sh"===o.type){if(!e.redeemScript)throw Error("inputType: sh without redeemScript");let t=a._o.decode(e.redeemScript);("wpkh"===t.type||"wsh"===t.type)&&(r="segwit"),c.push(t),u=t,l+=`-${t.type}`}if("wsh"===u.type){if(!e.witnessScript)throw Error("inputType: wsh without witnessScript");let t=a._o.decode(e.witnessScript);"wsh"===t.type&&(r="segwit"),c.push(t),u=t,l+=`-${t.type}`}let i=c[c.length-1];if("sh"===i.type||"wsh"===i.type)throw Error("inputType: sh/wsh cannot be terminal type");let s=a._o.encode(i),d={type:l,txType:r,last:i,lastScript:s,defaultSighash:n,sighash:e.sighashType||n};if("legacy"===r&&!t&&!e.nonWitnessUtxo)throw Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return d}}class I{constructor(e={}){this.global={},this.inputs=[],this.outputs=[];let t=this.opts=function(e){if(void 0!==e&&"[object Object]"!==({}).toString.call(e))throw Error(`Wrong object type for transaction options: ${e}`);let t={...e,version:f(e.version,2),lockTime:f(e.lockTime,0),PSBTVersion:f(e.PSBTVersion,0)};if(void 0!==t.allowUnknowInput&&(e.allowUnknownInputs=t.allowUnknowInput),void 0!==t.allowUnknowOutput&&(e.allowUnknownOutputs=t.allowUnknowOutput),"number"!=typeof t.lockTime)throw Error("Transaction lock time should be number");if(o.QK.encode(t.lockTime),0!==t.PSBTVersion&&2!==t.PSBTVersion)throw Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let e of["allowUnknownVersion","allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let r=t[e];if(void 0!==r&&"boolean"!=typeof r)throw Error(`Transation options wrong type: ${e}=${r} (${typeof r})`)}if(t.allowUnknownVersion?"number"==typeof t.version:![-1,0,1,2,3].includes(t.version))throw Error(`Unknown version: ${t.version}`);if(void 0!==t.customScripts){let e=t.customScripts;if(!Array.isArray(e))throw Error(`wrong custom scripts type (expected array): customScripts=${e} (${typeof e})`);for(let t of e)if("function"!=typeof t.encode||"function"!=typeof t.decode||void 0!==t.finalizeTaproot&&"function"!=typeof t.finalizeTaproot)throw Error(`wrong script=${t} (${typeof t})`)}return Object.freeze(t)}(e);0!==t.lockTime&&(this.global.fallbackLocktime=t.lockTime),this.global.txVersion=t.version}static fromRaw(e,t={}){let r=u.NC.decode(e),i=new I({...t,version:r.version,lockTime:r.lockTime});for(let e of r.outputs)i.addOutput(e);if(i.outputs=r.outputs,i.inputs=r.inputs,r.witnesses)for(let e=0;e<r.witnesses.length;e++)i.inputs[e].finalScriptWitness=r.witnesses[e];return i}static fromPSBT(e,t={}){let r;try{r=l.QX.decode(e)}catch(t){try{r=l.QC.decode(e)}catch(e){throw t}}let i=r.global.version||0;if(0!==i&&2!==i)throw Error(`Wrong PSBT version=${i}`);let n=r.global.unsignedTx,s=0===i?n?.version:r.global.txVersion,a=0===i?n?.lockTime:r.global.fallbackLocktime,u=new I({...t,version:s,lockTime:a,PSBTVersion:i}),c=0===i?n?.inputs.length:r.global.inputCount;u.inputs=r.inputs.slice(0,c).map((e,t)=>k({finalScriptSig:o.wg,...r.global.unsignedTx?.inputs[t],...e}));let d=0===i?n?.outputs.length:r.global.outputCount;return u.outputs=r.outputs.slice(0,d).map((e,t)=>({...e,...r.global.unsignedTx?.outputs[t]})),u.global={...r.global,txVersion:s},0!==a&&(u.global.fallbackLocktime=a),u}toPSBT(e=this.opts.PSBTVersion){if(0!==e&&2!==e)throw Error(`Wrong PSBT version=${e}`);let t=this.inputs.map(t=>k(l.Ow(e,l.k0,t)));for(let e of t)e.partialSig&&!e.partialSig.length&&delete e.partialSig,e.finalScriptSig&&!e.finalScriptSig.length&&delete e.finalScriptSig,e.finalScriptWitness&&!e.finalScriptWitness.length&&delete e.finalScriptWitness;let r=this.outputs.map(t=>l.Ow(e,l.hZ,t)),i={...this.global};return 0===e?(i.unsignedTx=u.kW.decode(u.kW.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(m).map(e=>({...e,finalScriptSig:o.wg})),outputs:this.outputs.map(g)})),delete i.fallbackLocktime,delete i.txVersion):(i.version=e,i.txVersion=this.version,i.inputCount=this.inputs.length,i.outputCount=this.outputs.length,i.fallbackLocktime&&0===i.fallbackLocktime&&delete i.fallbackLocktime),this.opts.bip174jsCompat&&(t.length||t.push({}),r.length||r.push({})),(0===e?l.QX:l.QC).encode({global:i,inputs:t,outputs:r})}get lockTime(){let e=0,t=0,r=0,i=0;for(let n of this.inputs)n.requiredHeightLocktime&&(e=Math.max(e,n.requiredHeightLocktime),t++),n.requiredTimeLocktime&&(r=Math.max(r,n.requiredTimeLocktime),i++);return t&&t>=i?e:0!==r?r:this.global.fallbackLocktime||0}get version(){if(void 0===this.global.txVersion)throw Error("No global.txVersion");return this.global.txVersion}inputStatus(e){this.checkInputIdx(e);let t=this.inputs[e];return t.finalScriptSig&&t.finalScriptSig.length||t.finalScriptWitness&&t.finalScriptWitness.length?"finalized":t.tapKeySig||t.tapScriptSig&&t.tapScriptSig.length||t.partialSig&&t.partialSig.length?"signed":"unsigned"}inputSighash(e){this.checkInputIdx(e);let t=this.inputs[e].sighashType,r=void 0===t?i.DEFAULT:t,n=r===i.DEFAULT?i.ALL:3&r;return{sigInputs:r&i.ANYONECANPAY,sigOutputs:n}}signStatus(){let e=!0,t=!0,r=[],n=[];for(let s=0;s<this.inputs.length;s++){if("unsigned"===this.inputStatus(s))continue;let{sigInputs:o,sigOutputs:a}=this.inputSighash(s);if(o===i.ANYONECANPAY?r.push(s):e=!1,a===i.ALL)t=!1;else if(a===i.SINGLE)n.push(s);else if(a===i.NONE);else throw Error(`Wrong signature hash output type: ${a}`)}return{addInput:e,addOutput:t,inputs:r,outputs:n}}get isFinal(){for(let e=0;e<this.inputs.length;e++)if("finalized"!==this.inputStatus(e))return!1;return!0}get hasWitnesses(){let e=!1;for(let t of this.inputs)t.finalScriptWitness&&t.finalScriptWitness.length&&(e=!0);return e}get weight(){if(!this.isFinal)throw Error("Transaction is not finalized");let e=32,t=this.outputs.map(g);for(let r of(e+=4*u.km.encode(this.outputs.length).length,t))e+=32+4*u.Rg.encode(r.script).length;for(let t of(this.hasWitnesses&&(e+=2),e+=4*u.km.encode(this.inputs.length).length,this.inputs))e+=160+4*u.Rg.encode(t.finalScriptSig||o.wg).length,this.hasWitnesses&&t.finalScriptWitness&&(e+=u.Kk.encode(t.finalScriptWitness).length);return e}get vsize(){return Math.ceil(this.weight/4)}toBytes(e=!1,t=!1){return u.NC.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(m).map(t=>({...t,finalScriptSig:e&&t.finalScriptSig||o.wg})),outputs:this.outputs.map(g),witnesses:this.inputs.map(e=>e.finalScriptWitness||[]),segwitFlag:t&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return s.uh.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw Error("Transaction is not finalized");return s.uh.encode(c.Y7(this.toBytes(!0)))}get id(){if(!this.isFinal)throw Error("Transaction is not finalized");return s.uh.encode(c.Y7(this.toBytes(!0)).reverse())}checkInputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.inputs.length)throw Error(`Wrong input index=${e}`)}getInput(e){return this.checkInputIdx(e),y(this.inputs[e])}get inputsLength(){return this.inputs.length}addInput(e,t=!1){if(!t&&!this.signStatus().addInput)throw Error("Tx has signed inputs, cannot add new one");return this.inputs.push(S(e,void 0,void 0,this.opts.disableScriptCheck)),this.inputs.length-1}updateInput(e,t,r=!1){let i;if(this.checkInputIdx(e),!r){let t=this.signStatus();(!t.addInput||t.inputs.includes(e))&&(i=l.j1)}this.inputs[e]=S(t,this.inputs[e],i,this.opts.disableScriptCheck,this.opts.allowUnknown)}checkOutputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.outputs.length)throw Error(`Wrong output index=${e}`)}getOutput(e){return this.checkOutputIdx(e),y(this.outputs[e])}getOutputAddress(e,t=c.pG){let r=this.getOutput(e);if(r.script)return(0,a.pV)(t).encode(a._o.decode(r.script))}get outputsLength(){return this.outputs.length}normalizeOutput(e,t,r){let{amount:i,script:n}=e;if(void 0===i&&(i=t?.amount),"bigint"!=typeof i)throw Error(`Wrong amount type, should be of type bigint in sats, but got ${i} of type ${typeof i}`);"string"==typeof n&&(n=s.uh.decode(n)),void 0===n&&(n=t?.script);let o={...t,...e,amount:i,script:n};if(void 0===o.amount&&delete o.amount,o=l.O4(l.hZ,o,t,r,this.opts.allowUnknown),l.AT.encode(o),o.script&&!this.opts.allowUnknownOutputs&&"unknown"===a._o.decode(o.script).type)throw Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure");return this.opts.disableScriptCheck||(0,a.wN)(o.script,o.redeemScript,o.witnessScript),o}addOutput(e,t=!1){if(!t&&!this.signStatus().addOutput)throw Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(e)),this.outputs.length-1}updateOutput(e,t,r=!1){let i;if(this.checkOutputIdx(e),!r){let t=this.signStatus();(!t.addOutput||t.outputs.includes(e))&&(i=l.Ss)}this.outputs[e]=this.normalizeOutput(t,this.outputs[e],i)}addOutputAddress(e,t,r=c.pG){return this.addOutput({script:a._o.encode((0,a.pV)(r).decode(e)),amount:t})}get fee(){let e=0n;for(let t of this.inputs){let r=A(t);if(!r)throw Error("Empty input amount");e+=r.amount}for(let t of this.outputs.map(g))e-=t.amount;return e}preimageLegacy(e,t,r){let{isAny:i,isNone:n,isSingle:s}=x(r);if(e<0||!Number.isSafeInteger(e))throw Error(`Invalid input idx=${e}`);if(s&&e>=this.outputs.length||e>=this.inputs.length)return o.Iz.encode(1n);t=u.eF.encode(u.eF.decode(t).filter(e=>"CODESEPARATOR"!==e));let a=this.inputs.map(m).map((r,i)=>({...r,finalScriptSig:i===e?t:o.wg}));i?a=[a[e]]:(n||s)&&(a=a.map((t,r)=>({...t,sequence:r===e?t.sequence:0})));let l=this.outputs.map(g);n?l=[]:s&&(l=l.slice(0,e).fill(p).concat([l[e]]));let d=u.NC.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:a,outputs:l});return c.Y7(d,o.eV.encode(r))}preimageWitnessV0(e,t,r,i){let{isAny:n,isNone:s,isSingle:a}=x(r),l=h,d=h,p=h,f=this.inputs.map(m),y=this.outputs.map(g);n||(l=c.Y7(...f.map(b.encode))),n||a||s||(d=c.Y7(...f.map(e=>o.QK.encode(e.sequence)))),a||s?a&&e<y.length&&(p=c.Y7(u.oV.encode(y[e]))):p=c.Y7(...y.map(u.oV.encode));let v=f[e];return c.Y7(o.eV.encode(this.version),l,d,o.ee(32,!0).encode(v.txid),o.QK.encode(v.index),u.Rg.encode(t),o.dg.encode(i),o.QK.encode(v.sequence),p,o.QK.encode(this.lockTime),o.QK.encode(r))}preimageWitnessV1(e,t,r,n,s=-1,l,p=192,f){if(!Array.isArray(n)||this.inputs.length!==n.length)throw Error(`Invalid amounts array=${n}`);if(!Array.isArray(t)||this.inputs.length!==t.length)throw Error(`Invalid prevOutScript array=${t}`);let y=[o.U8.encode(0),o.U8.encode(r),o.eV.encode(this.version),o.QK.encode(this.lockTime)],v=r===i.DEFAULT?i.ALL:3&r,w=r&i.ANYONECANPAY,x=this.inputs.map(m),k=this.outputs.map(g);w!==i.ANYONECANPAY&&y.push(...[x.map(b.encode),n.map(o.dg.encode),t.map(u.Rg.encode),x.map(e=>o.QK.encode(e.sequence))].map(e=>d.sc((0,c.Id)(...e)))),v===i.ALL&&y.push(d.sc((0,c.Id)(...k.map(u.oV.encode))));let A=!!f|2*!!l;if(y.push(new Uint8Array([A])),w===i.ANYONECANPAY){let r=x[e];y.push(b.encode(r),o.dg.encode(n[e]),u.Rg.encode(t[e]),o.QK.encode(r.sequence))}else y.push(o.QK.encode(e));return 1&A&&y.push(d.sc(u.Rg.encode(f||o.wg))),v===i.SINGLE&&y.push(e<k.length?d.sc(u.oV.encode(k[e])):h),l&&y.push((0,a.Me)(l,p),o.U8.encode(0),o.eV.encode(s)),c.m("TapSighash",...y)}signIdx(e,t,r,n){this.checkInputIdx(t);let s=this.inputs[t],l=B(s,this.opts.allowLegacyWitnessUtxo);if(!(0,c.aY)(e)){if(!s.bip32Derivation||!s.bip32Derivation.length)throw Error("bip32Derivation: empty");let r=s.bip32Derivation.filter(t=>t[1].fingerprint==e.fingerprint).map(([t,{path:r}])=>{let i=e;for(let e of r)i=i.deriveChild(e);if(!(0,c.ex)(i.publicKey,t))throw Error("bip32Derivation: wrong pubKey");if(!i.privateKey)throw Error("bip32Derivation: no privateKey");return i});if(!r.length)throw Error(`bip32Derivation: no items with fingerprint=${e.fingerprint}`);let i=!1;for(let e of r)this.signIdx(e.privateKey,t)&&(i=!0);return i}r?r.forEach(w):r=[l.defaultSighash];let d=l.sighash;if(!r.includes(d))throw Error(`Input with not allowed sigHash=${d}. Allowed: ${r.join(", ")}`);let{sigOutputs:h}=this.inputSighash(t);if(h===i.SINGLE&&t>=this.outputs.length)throw Error(`Input with sighash SINGLE, but there is no output with corresponding index=${t}`);let p=A(s);if("taproot"===l.txType){let r=this.inputs.map(A),l=r.map(e=>e.script),h=r.map(e=>e.amount),p=!1,f=c.vl(e),y=s.tapMerkleRoot||o.wg;if(s.tapInternalKey){let{pubKey:r,privKey:a}=function(e,t,r,i=o.wg){return(0,c.ex)(r,t)&&(e=c.Cn(e,i),t=c.vl(e)),{privKey:e,pubKey:t}}(e,f,s.tapInternalKey,y),[u,g]=c.gD(s.tapInternalKey,y);if((0,c.ex)(u,r)){let e=this.preimageWitnessV1(t,l,d,h),r=(0,c.Id)(c.V0(e,a,n),d!==i.DEFAULT?new Uint8Array([d]):o.wg);this.updateInput(t,{tapKeySig:r},!0),p=!0}}if(s.tapLeafScript)for(let[r,y]of(s.tapScriptSig=s.tapScriptSig||[],s.tapLeafScript)){let r=y.subarray(0,-1),s=u.eF.decode(r),g=y[y.length-1],m=(0,a.Me)(r,g);if(-1===s.findIndex(e=>(0,c.aY)(e)&&(0,c.ex)(e,f)))continue;let v=this.preimageWitnessV1(t,l,d,h,void 0,r,g),b=(0,c.Id)(c.V0(v,e,n),d!==i.DEFAULT?new Uint8Array([d]):o.wg);this.updateInput(t,{tapScriptSig:[[{pubKey:f,leafHash:m},b]]},!0),p=!0}if(!p)throw Error("No taproot scripts signed")}else{let r,i=c.E1(e),n=!1,s=c.A0(i);for(let e of u.eF.decode(l.lastScript))(0,c.aY)(e)&&((0,c.ex)(e,i)||(0,c.ex)(e,s))&&(n=!0);if(!n)throw Error(`Input script doesn't have pubKey: ${l.lastScript}`);if("legacy"===l.txType)r=this.preimageLegacy(t,l.lastScript,d);else if("segwit"===l.txType){let e=l.lastScript;"wpkh"===l.last.type&&(e=a._o.encode({type:"pkh",hash:l.last.hash})),r=this.preimageWitnessV0(t,e,d,p.amount)}else throw Error(`Transaction/sign: unknown tx type: ${l.txType}`);let o=c.iM(r,e,this.opts.lowR);this.updateInput(t,{partialSig:[[i,(0,c.Id)(o,new Uint8Array([d]))]]},!0)}return!0}sign(e,t,r){let i=0;for(let n=0;n<this.inputs.length;n++)try{this.signIdx(e,n,t,r)&&i++}catch(e){}if(!i)throw Error("No inputs signed");return i}finalizeIdx(e){let t,r;if(this.checkInputIdx(e),this.fee<0n)throw Error("Outputs spends more than inputs amount");let i=this.inputs[e],n=B(i,this.opts.allowLegacyWitnessUtxo);if("taproot"===n.txType){if(i.tapKeySig)i.finalScriptWitness=[i.tapKeySig];else if(i.tapLeafScript&&i.tapScriptSig){for(let[e,t]of i.tapLeafScript.sort((e,t)=>l.u0.encode(e[0]).length-l.u0.encode(t[0]).length)){let r=t.slice(0,-1),n=t[t.length-1],s=a._o.decode(r),d=(0,a.Me)(r,n),h=i.tapScriptSig.filter(e=>(0,c.ex)(e[0].leafHash,d)),p=[];if("tr_ms"===s.type){let e=s.m,t=s.pubkeys,r=0;for(let i of t){let t=h.findIndex(e=>(0,c.ex)(e[0].pubKey,i));if(r===e||-1===t){p.push(o.wg);continue}p.push(h[t][1]),r++}if(r!==e)continue}else if("tr_ns"===s.type){for(let e of s.pubkeys){let t=h.findIndex(t=>(0,c.ex)(t[0].pubKey,e));-1!==t&&p.push(h[t][1])}if(p.length!==s.pubkeys.length)continue}else if("unknown"===s.type&&this.opts.allowUnknownInputs){let e=u.eF.decode(r);if(!(p=h.map(([{pubKey:t},r])=>{let i=e.findIndex(e=>(0,c.aY)(e)&&(0,c.ex)(e,t));if(-1===i)throw Error("finalize/taproot: cannot find position of pubkey in script");return{signature:r,pos:i}}).sort((e,t)=>e.pos-t.pos).map(e=>e.signature)).length)continue}else{let t=this.opts.customScripts;if(t)for(let n of t){if(!n.finalizeTaproot)continue;let t=u.eF.decode(r),s=n.encode(t);if(void 0===s)continue;let a=n.finalizeTaproot(r,s,h);if(a){i.finalScriptWitness=a.concat(l.u0.encode(e)),i.finalScriptSig=o.wg,v(i);return}}throw Error("Finalize: Unknown tapLeafScript")}i.finalScriptWitness=p.reverse().concat([r,l.u0.encode(e)]);break}if(!i.finalScriptWitness)throw Error("finalize/taproot: empty witness")}else throw Error("finalize/taproot: unknown input");i.finalScriptSig=o.wg,v(i);return}if(!i.partialSig||!i.partialSig.length)throw Error("Not enough partial sign");let s=o.wg,h=[];if("ms"===n.last.type){let e=n.last.m,t=n.last.pubkeys,r=[];for(let e of t){let t=i.partialSig.find(t=>(0,c.ex)(e,t[0]));t&&r.push(t[1])}if((r=r.slice(0,e)).length!==e)throw Error(`Multisig: wrong signatures count, m=${e} n=${t.length} signatures=${r.length}`);s=u.eF.encode([0,...r])}else if("pk"===n.last.type)s=u.eF.encode([i.partialSig[0][1]]);else if("pkh"===n.last.type)s=u.eF.encode([i.partialSig[0][1],i.partialSig[0][0]]);else if("wpkh"===n.last.type)s=o.wg,h=[i.partialSig[0][1],i.partialSig[0][0]];else if("unknown"===n.last.type&&!this.opts.allowUnknownInputs)throw Error("Unknown inputs not allowed");if(n.type.includes("wsh-")&&(s.length&&n.lastScript.length&&(h=u.eF.decode(s).map(e=>{if(0===e)return o.wg;if((0,c.aY)(e))return e;throw Error(`Wrong witness op=${e}`)})),h=h.concat(n.lastScript)),"segwit"===n.txType&&(r=h),n.type.startsWith("sh-wsh-")?t=u.eF.encode([u.eF.encode([0,d.sc(n.lastScript)])]):n.type.startsWith("sh-")?t=u.eF.encode([...u.eF.decode(s),n.lastScript]):n.type.startsWith("wsh-")||"segwit"!==n.txType&&(t=s),!t&&!r)throw Error("Unknown error finalizing input");t&&(i.finalScriptSig=t),r&&(i.finalScriptWitness=r),v(i)}finalize(){for(let e=0;e<this.inputs.length;e++)this.finalizeIdx(e)}extract(){if(!this.isFinal)throw Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw Error("Transaction has no outputs");if(this.fee<0n)throw Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(e){for(let t of["PSBTVersion","version","lockTime"])if(this.opts[t]!==e.opts[t])throw Error(`Transaction/combine: different ${t} this=${this.opts[t]} other=${e.opts[t]}`);for(let t of["inputs","outputs"])if(this[t].length!==e[t].length)throw Error(`Transaction/combine: different ${t} length this=${this[t].length} other=${e[t].length}`);let t=this.global.unsignedTx?u.kW.encode(this.global.unsignedTx):o.wg,r=e.global.unsignedTx?u.kW.encode(e.global.unsignedTx):o.wg;if(!(0,c.ex)(t,r))throw Error("Transaction/combine: different unsigned tx");this.global=l.O4(l.xG,this.global,e.global,void 0,this.opts.allowUnknown);for(let t=0;t<this.inputs.length;t++)this.updateInput(t,e.inputs[t],!0);for(let t=0;t<this.outputs.length;t++)this.updateOutput(t,e.outputs[t],!0);return this}clone(){return I.fromPSBT(this.toPSBT(this.opts.PSBTVersion),this.opts)}}},17547:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultErrorMap=void 0,t.setErrorMap=function(e){s=e},t.getErrorMap=function(){return s};let n=i(r(40467));t.defaultErrorMap=n.default;let s=n.default},19408:(e,t,r)=>{"use strict";let i,n;r.d(t,{Rn:()=>_,jn:()=>E});let s=2n**255n-19n,o=2n**252n+0x14def9dea2f79cd65812631a5cf5d3edn,a={a:-1n,d:0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3n,p:s,n:o,h:8,Gx:0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Gy:0x6666666666666666666666666666666666666666666666666666666666666658n},l=(e="")=>{throw Error(e)},u=(e,t)=>e instanceof Uint8Array&&("number"!=typeof t||!(t>0)||e.length===t)?e:l("Uint8Array expected"),c=e=>new Uint8Array(e),d=(e,t)=>u("string"==typeof e?b(e):c(e),t),h=(e,t=s)=>{let r=e%t;return r>=0n?r:t+r},p=e=>e instanceof f?e:l("Point expected");class f{constructor(e,t,r,i){this.ex=e,this.ey=t,this.ez=r,this.et=i}static fromAffine(e){return new f(e.x,e.y,1n,h(e.x*e.y))}static fromHex(e,t=!0){let{d:r}=a,i=(e=d(e,32)).slice();i[31]=-129&e[31];let n=x(i);0n===n||(t&&!(0n<n&&n<s)&&l("bad y coord 1"),t||0n<n&&n<2n**256n||l("bad y coord 2"));let o=h(n*n),{isValid:u,value:c}=B(h(o-1n),h(r*o+1n));u||l("bad y coordinate 3");let p=(1n&c)===1n;return(128&e[31])!=0!==p&&(c=h(-c)),new f(c,n,1n,h(c*n))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){let{ex:t,ey:r,ez:i}=this,{ex:n,ey:s,ez:o}=p(e),a=h(t*o),l=h(n*i),u=h(r*o),c=h(s*i);return a===l&&u===c}is0(){return this.equals(g)}negate(){return new f(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){let{ex:e,ey:t,ez:r}=this,{a:i}=a,n=h(e*e),s=h(t*t),o=h(2n*h(r*r)),l=h(i*n),u=e+t,c=h(h(u*u)-n-s),d=l+s,p=d-o,y=l-s,g=h(c*p),m=h(d*y),v=h(c*y);return new f(g,m,h(p*d),v)}add(e){let{ex:t,ey:r,ez:i,et:n}=this,{ex:s,ey:o,ez:l,et:u}=p(e),{a:c,d}=a,y=h(t*s),g=h(r*o),m=h(n*d*u),v=h(i*l),b=h((t+r)*(s+o)-y-g),w=h(v-m),x=h(v+m),k=h(g-c*y),A=h(b*w),S=h(x*k),B=h(b*k);return new f(A,S,h(w*x),B)}mul(e,t=!0){if(0n===e)return!0===t?l("cannot multiply by 0"):g;if("bigint"==typeof e&&0n<e&&e<o||l("invalid scalar, must be < L"),!t&&this.is0()||1n===e)return this;if(this.equals(y))return T(e).p;let r=g,i=y;for(let n=this;e>0n;n=n.double(),e>>=1n)1n&e?r=r.add(n):t&&(i=i.add(n));return r}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(a.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(o/2n,!1).double();return o%2n&&(e=e.add(this)),e.is0()}toAffine(){let{ex:e,ey:t,ez:r}=this;if(this.is0())return{x:0n,y:0n};let i=A(r);return 1n!==h(r*i)&&l("invalid inverse"),{x:h(e*i),y:h(t*i)}}toRawBytes(){let{x:e,y:t}=this.toAffine(),r=w(t);return r[31]|=1n&e?128:0,r}toHex(){return v(this.toRawBytes())}}f.BASE=new f(0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,0x6666666666666666666666666666666666666666666666666666666666666658n,1n,h(0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an*0x6666666666666666666666666666666666666666666666666666666666666658n)),f.ZERO=new f(0n,1n,1n,0n);let{BASE:y,ZERO:g}=f,m=(e,t)=>e.toString(16).padStart(t,"0"),v=e=>Array.from(e).map(e=>m(e,2)).join(""),b=e=>{let t=e.length;("string"!=typeof e||t%2)&&l("hex invalid 1");let r=c(t/2);for(let t=0;t<r.length;t++){let i=2*t,n=Number.parseInt(e.slice(i,i+2),16);(Number.isNaN(n)||n<0)&&l("hex invalid 2"),r[t]=n}return r},w=e=>b(m(e,64)).reverse(),x=e=>BigInt("0x"+v(c(u(e)).reverse())),k=(...e)=>{let t=c(e.reduce((e,t)=>e+u(t).length,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.length}),t},A=(e,t=s)=>{(0n===e||t<=0n)&&l("no inverse n="+e+" mod="+t);let r=h(e,t),i=t,n=0n,o=1n,a=1n,u=0n;for(;0n!==r;){let e=i/r,t=i%r,s=n-a*e,l=o-u*e;i=r,r=t,n=a,o=u,a=s,u=l}return 1n===i?h(n,t):l("no inverse")},S=(e,t)=>{let r=e;for(;t-- >0n;)r*=r,r%=s;return r},B=(e,t)=>{let r=h(t*t*t),i=(e=>{let t=e*e%s*e%s,r=S(t,2n)*t%s,i=S(r,1n)*e%s,n=S(i,5n)*i%s,o=S(n,10n)*n%s,a=S(o,20n)*o%s,l=S(a,40n)*a%s,u=S(l,80n)*l%s,c=S(u,80n)*l%s,d=S(c,10n)*n%s;return{pow_p_5_8:S(d,2n)*e%s,b2:t}})(e*h(r*r*t)).pow_p_5_8,n=h(e*r*i),o=h(t*n*n),a=n,l=h(0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n*n),u=o===e,c=o===h(-e),d=o===h(-(0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n*e));return u&&(n=a),(c||d)&&(n=l),(1n&h(n))===1n&&(n=h(-n)),{isValid:u||c,value:n}},I=e=>{let t=e.slice(0,32);t[0]&=248,t[31]&=127,t[31]|=64;let r=e.slice(32,64),i=h(x(t),o),n=y.mul(i),s=n.toRawBytes();return{head:t,prefix:r,scalar:i,point:n,pointBytes:s}},_=e=>((...e)=>E.sha512Async(...e))(d(e,32)).then(I).then(e=>e.pointBytes),C=()=>"object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,E={bytesToHex:v,hexToBytes:b,concatBytes:k,mod:h,invert:A,randomBytes:e=>{let t=C();return t||l("crypto.getRandomValues must be defined"),t.getRandomValues(c(e))},sha512Async:async(...e)=>{let t=C();t||l("crypto.subtle or etc.sha512Async must be defined");let r=k(...e);return c(await t.subtle.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(E,{sha512Sync:{configurable:!1,get:()=>i,set(e){i||(i=e)}}});let T=e=>{let t=n||(n=(()=>{let e=[],t=y,r=t;for(let i=0;i<33;i++){r=t,e.push(r);for(let i=1;i<128;i++)r=r.add(t),e.push(r);t=r.double()}return e})()),r=(e,t)=>{let r=t.negate();return e?r:t},i=g,s=y,o=BigInt(255),a=BigInt(8);for(let n=0;n<33;n++){let l=128*n,u=Number(e&o);e>>=a,u>128&&(u-=256,e+=1n);let c=l+Math.abs(u)-1,d=n%2!=0,h=u<0;0===u?s=s.add(r(d,t[l])):i=i.add(r(h,t[c]))}return{p:i,f:s}}},25655:(e,t,r)=>{"use strict";var i;let n;Object.defineProperty(t,"__esModule",{value:!0}),t.discriminatedUnion=t.date=t.boolean=t.bigint=t.array=t.any=t.coerce=t.ZodFirstPartyTypeKind=t.late=t.ZodSchema=t.Schema=t.ZodReadonly=t.ZodPipeline=t.ZodBranded=t.BRAND=t.ZodNaN=t.ZodCatch=t.ZodDefault=t.ZodNullable=t.ZodOptional=t.ZodTransformer=t.ZodEffects=t.ZodPromise=t.ZodNativeEnum=t.ZodEnum=t.ZodLiteral=t.ZodLazy=t.ZodFunction=t.ZodSet=t.ZodMap=t.ZodRecord=t.ZodTuple=t.ZodIntersection=t.ZodDiscriminatedUnion=t.ZodUnion=t.ZodObject=t.ZodArray=t.ZodVoid=t.ZodNever=t.ZodUnknown=t.ZodAny=t.ZodNull=t.ZodUndefined=t.ZodSymbol=t.ZodDate=t.ZodBoolean=t.ZodBigInt=t.ZodNumber=t.ZodString=t.ZodType=void 0,t.NEVER=t.void=t.unknown=t.union=t.undefined=t.tuple=t.transformer=t.symbol=t.string=t.strictObject=t.set=t.record=t.promise=t.preprocess=t.pipeline=t.ostring=t.optional=t.onumber=t.oboolean=t.object=t.number=t.nullable=t.null=t.never=t.nativeEnum=t.nan=t.map=t.literal=t.lazy=t.intersection=t.instanceof=t.function=t.enum=t.effect=void 0,t.datetimeRegex=N,t.custom=em;let s=r(2301),o=r(17547),a=r(92536),l=r(48603),u=r(27176);class c{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let d=(e,t)=>{if((0,l.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new s.ZodError(e.common.issues);return this._error=t,this._error}}};function h(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:i,description:n}=e;if(t&&(r||i))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??n.defaultError}:void 0===n.data?{message:s??i??n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:s??r??n.defaultError}},description:n}}class p{get description(){return this._def.description}_getType(e){return(0,u.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,u.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new l.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,u.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if((0,l.isAsync)(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,u.getParsedType)(e)},i=this._parseSync({data:e,path:r.path,parent:r});return d(r,i)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,u.getParsedType)(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return(0,l.isValid)(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>(0,l.isValid)(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,u.getParsedType)(e)},i=this._parse({data:e,path:r.path,parent:r});return d(r,await ((0,l.isAsync)(i)?i:Promise.resolve(i)))}refine(e,t){return this._refinement((r,i)=>{let n=e(r),o=()=>i.addIssue({code:s.ZodIssueCode.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(o(),!1)):!!n||(o(),!1)})}refinement(e,t){return this._refinement((r,i)=>!!e(r)||(i.addIssue("function"==typeof t?t(r,i):t),!1))}_refinement(e){return new ea({schema:this,typeName:i.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return el.create(this,this._def)}nullable(){return eu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return F.create(this)}promise(){return eo.create(this,this._def)}or(e){return W.create([this,e],this._def)}and(e){return G.create(this,e,this._def)}transform(e){return new ea({...h(this._def),schema:this,typeName:i.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ec({...h(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:i.ZodDefault})}brand(){return new ep({typeName:i.ZodBranded,type:this,...h(this._def)})}catch(e){return new ed({...h(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:i.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return ef.create(this,e)}readonly(){return ey.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}t.ZodType=p,t.Schema=p,t.ZodSchema=p;let f=/^c[^\s-]{8,}$/i,y=/^[0-9a-z]+$/,g=/^[0-9A-HJKMNP-TV-Z]{26}$/i,m=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,v=/^[a-z0-9_-]{21}$/i,b=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,w=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,x=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,k=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,A=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,S=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,B=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,I=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,_=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,C="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",E=RegExp(`^${C}$`);function T(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function N(e){let t=`${C}T${T(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class O extends p{_parse(e){var t,r,i,o;let a;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==u.ZodParsedType.string){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.string,received:t.parsedType}),l.INVALID}let c=new l.ParseStatus;for(let d of this._def.checks)if("min"===d.kind)e.data.length<d.value&&(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{code:s.ZodIssueCode.too_small,minimum:d.value,type:"string",inclusive:!0,exact:!1,message:d.message}),c.dirty());else if("max"===d.kind)e.data.length>d.value&&(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{code:s.ZodIssueCode.too_big,maximum:d.value,type:"string",inclusive:!0,exact:!1,message:d.message}),c.dirty());else if("length"===d.kind){let t=e.data.length>d.value,r=e.data.length<d.value;(t||r)&&(a=this._getOrReturnCtx(e,a),t?(0,l.addIssueToContext)(a,{code:s.ZodIssueCode.too_big,maximum:d.value,type:"string",inclusive:!0,exact:!0,message:d.message}):r&&(0,l.addIssueToContext)(a,{code:s.ZodIssueCode.too_small,minimum:d.value,type:"string",inclusive:!0,exact:!0,message:d.message}),c.dirty())}else if("email"===d.kind)x.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"email",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if("emoji"===d.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"emoji",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if("uuid"===d.kind)m.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"uuid",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if("nanoid"===d.kind)v.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"nanoid",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if("cuid"===d.kind)f.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"cuid",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if("cuid2"===d.kind)y.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"cuid2",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if("ulid"===d.kind)g.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"ulid",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if("url"===d.kind)try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"url",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty()}else"regex"===d.kind?(d.regex.lastIndex=0,d.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"regex",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty())):"trim"===d.kind?e.data=e.data.trim():"includes"===d.kind?e.data.includes(d.value,d.position)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{code:s.ZodIssueCode.invalid_string,validation:{includes:d.value,position:d.position},message:d.message}),c.dirty()):"toLowerCase"===d.kind?e.data=e.data.toLowerCase():"toUpperCase"===d.kind?e.data=e.data.toUpperCase():"startsWith"===d.kind?e.data.startsWith(d.value)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{code:s.ZodIssueCode.invalid_string,validation:{startsWith:d.value},message:d.message}),c.dirty()):"endsWith"===d.kind?e.data.endsWith(d.value)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{code:s.ZodIssueCode.invalid_string,validation:{endsWith:d.value},message:d.message}),c.dirty()):"datetime"===d.kind?N(d).test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{code:s.ZodIssueCode.invalid_string,validation:"datetime",message:d.message}),c.dirty()):"date"===d.kind?E.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{code:s.ZodIssueCode.invalid_string,validation:"date",message:d.message}),c.dirty()):"time"===d.kind?RegExp(`^${T(d)}$`).test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{code:s.ZodIssueCode.invalid_string,validation:"time",message:d.message}),c.dirty()):"duration"===d.kind?w.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"duration",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty()):"ip"===d.kind?(t=e.data,!(("v4"===(r=d.version)||!r)&&k.test(t)||("v6"===r||!r)&&S.test(t))&&1&&(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"ip",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty())):"jwt"===d.kind?!function(e,t){if(!b.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let i=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(i));if("object"!=typeof n||null===n||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)return!1;return!0}catch{return!1}}(e.data,d.alg)&&(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"jwt",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty()):"cidr"===d.kind?(i=e.data,!(("v4"===(o=d.version)||!o)&&A.test(i)||("v6"===o||!o)&&B.test(i))&&1&&(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"cidr",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty())):"base64"===d.kind?I.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"base64",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty()):"base64url"===d.kind?_.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,l.addIssueToContext)(a,{validation:"base64url",code:s.ZodIssueCode.invalid_string,message:d.message}),c.dirty()):u.util.assertNever(d);return{status:c.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:s.ZodIssueCode.invalid_string,...a.errorUtil.errToObj(r)})}_addCheck(e){return new O({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...a.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...a.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...a.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...a.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...a.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...a.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...a.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...a.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...a.errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...a.errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...a.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...a.errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...a.errorUtil.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...a.errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...a.errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...a.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...a.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...a.errorUtil.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...a.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...a.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...a.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...a.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...a.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,a.errorUtil.errToObj(e))}trim(){return new O({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new O({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new O({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodString=O,O.create=e=>new O({checks:[],typeName:i.ZodString,coerce:e?.coerce??!1,...h(e)});class U extends p{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==u.ZodParsedType.number){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.number,received:t.parsedType}),l.INVALID}let r=new l.ParseStatus;for(let i of this._def.checks)"int"===i.kind?u.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"multipleOf"===i.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,n=r>i?r:i;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.not_finite,message:i.message}),r.dirty()):u.util.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,a.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,a.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,a.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,a.errorUtil.toString(t))}setLimit(e,t,r,i){return new U({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:a.errorUtil.toString(i)}]})}_addCheck(e){return new U({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:a.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:a.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:a.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:a.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:a.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:a.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:a.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:a.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:a.errorUtil.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&u.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}t.ZodNumber=U,U.create=e=>new U({checks:[],typeName:i.ZodNumber,coerce:e?.coerce||!1,...h(e)});class Z extends p{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==u.ZodParsedType.bigint)return this._getInvalidInput(e);let r=new l.ParseStatus;for(let i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):u.util.assertNever(i);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.bigint,received:t.parsedType}),l.INVALID}gte(e,t){return this.setLimit("min",e,!0,a.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,a.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,a.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,a.errorUtil.toString(t))}setLimit(e,t,r,i){return new Z({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:a.errorUtil.toString(i)}]})}_addCheck(e){return new Z({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:a.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:a.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:a.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:a.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:a.errorUtil.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodBigInt=Z,Z.create=e=>new Z({checks:[],typeName:i.ZodBigInt,coerce:e?.coerce??!1,...h(e)});class P extends p{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==u.ZodParsedType.boolean){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.boolean,received:t.parsedType}),l.INVALID}return(0,l.OK)(e.data)}}t.ZodBoolean=P,P.create=e=>new P({typeName:i.ZodBoolean,coerce:e?.coerce||!1,...h(e)});class L extends p{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==u.ZodParsedType.date){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.date,received:t.parsedType}),l.INVALID}if(Number.isNaN(e.data.getTime())){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_date}),l.INVALID}let r=new l.ParseStatus;for(let i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(t=this._getOrReturnCtx(e,t),(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(t=this._getOrReturnCtx(e,t),(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):u.util.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new L({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:a.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:a.errorUtil.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}t.ZodDate=L,L.create=e=>new L({checks:[],coerce:e?.coerce||!1,typeName:i.ZodDate,...h(e)});class j extends p{_parse(e){if(this._getType(e)!==u.ZodParsedType.symbol){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.symbol,received:t.parsedType}),l.INVALID}return(0,l.OK)(e.data)}}t.ZodSymbol=j,j.create=e=>new j({typeName:i.ZodSymbol,...h(e)});class V extends p{_parse(e){if(this._getType(e)!==u.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.undefined,received:t.parsedType}),l.INVALID}return(0,l.OK)(e.data)}}t.ZodUndefined=V,V.create=e=>new V({typeName:i.ZodUndefined,...h(e)});class R extends p{_parse(e){if(this._getType(e)!==u.ZodParsedType.null){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.null,received:t.parsedType}),l.INVALID}return(0,l.OK)(e.data)}}t.ZodNull=R,R.create=e=>new R({typeName:i.ZodNull,...h(e)});class D extends p{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,l.OK)(e.data)}}t.ZodAny=D,D.create=e=>new D({typeName:i.ZodAny,...h(e)});class $ extends p{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,l.OK)(e.data)}}t.ZodUnknown=$,$.create=e=>new $({typeName:i.ZodUnknown,...h(e)});class H extends p{_parse(e){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.never,received:t.parsedType}),l.INVALID}}t.ZodNever=H,H.create=e=>new H({typeName:i.ZodNever,...h(e)});class M extends p{_parse(e){if(this._getType(e)!==u.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.void,received:t.parsedType}),l.INVALID}return(0,l.OK)(e.data)}}t.ZodVoid=M,M.create=e=>new M({typeName:i.ZodVoid,...h(e)});class F extends p{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==u.ZodParsedType.array)return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.array,received:t.parsedType}),l.INVALID;if(null!==i.exactLength){let e=t.data.length>i.exactLength.value,n=t.data.length<i.exactLength.value;(e||n)&&((0,l.addIssueToContext)(t,{code:e?s.ZodIssueCode.too_big:s.ZodIssueCode.too_small,minimum:n?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&((0,l.addIssueToContext)(t,{code:s.ZodIssueCode.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&((0,l.addIssueToContext)(t,{code:s.ZodIssueCode.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>i.type._parseAsync(new c(t,e,t.path,r)))).then(e=>l.ParseStatus.mergeArray(r,e));let n=[...t.data].map((e,r)=>i.type._parseSync(new c(t,e,t.path,r)));return l.ParseStatus.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new F({...this._def,minLength:{value:e,message:a.errorUtil.toString(t)}})}max(e,t){return new F({...this._def,maxLength:{value:e,message:a.errorUtil.toString(t)}})}length(e,t){return new F({...this._def,exactLength:{value:e,message:a.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}t.ZodArray=F,F.create=(e,t)=>new F({type:e,minLength:null,maxLength:null,exactLength:null,typeName:i.ZodArray,...h(t)});class z extends p{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=u.util.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==u.ZodParsedType.object){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.object,received:t.parsedType}),l.INVALID}let{status:t,ctx:r}=this._processInputParams(e),{shape:i,keys:n}=this._getCached(),o=[];if(!(this._def.catchall instanceof H&&"strip"===this._def.unknownKeys))for(let e in r.data)n.includes(e)||o.push(e);let a=[];for(let e of n){let t=i[e],n=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new c(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof H){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of o)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)o.length>0&&((0,l.addIssueToContext)(r,{code:s.ZodIssueCode.unrecognized_keys,keys:o}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of o){let i=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new c(r,i,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let r=await t.key,i=await t.value;e.push({key:r,value:i,alwaysSet:t.alwaysSet})}return e}).then(e=>l.ParseStatus.mergeObjectSync(t,e)):l.ParseStatus.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return a.errorUtil.errToObj,new z({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let i=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:a.errorUtil.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new z({...this._def,unknownKeys:"strip"})}passthrough(){return new z({...this._def,unknownKeys:"passthrough"})}extend(e){return new z({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new z({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:i.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new z({...this._def,catchall:e})}pick(e){let t={};for(let r of u.util.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new z({...this._def,shape:()=>t})}omit(e){let t={};for(let r of u.util.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new z({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof z){let r={};for(let i in t.shape){let n=t.shape[i];r[i]=el.create(e(n))}return new z({...t._def,shape:()=>r})}if(t instanceof F)return new F({...t._def,type:e(t.element)});if(t instanceof el)return el.create(e(t.unwrap()));if(t instanceof eu)return eu.create(e(t.unwrap()));if(t instanceof Y)return Y.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of u.util.objectKeys(this.shape)){let i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}return new z({...this._def,shape:()=>t})}required(e){let t={};for(let r of u.util.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof el;)e=e._def.innerType;t[r]=e}return new z({...this._def,shape:()=>t})}keyof(){return ei(u.util.objectKeys(this.shape))}}t.ZodObject=z,z.create=(e,t)=>new z({shape:()=>e,unknownKeys:"strip",catchall:H.create(),typeName:i.ZodObject,...h(t)}),z.strictCreate=(e,t)=>new z({shape:()=>e,unknownKeys:"strict",catchall:H.create(),typeName:i.ZodObject,...h(t)}),z.lazycreate=(e,t)=>new z({shape:e,unknownKeys:"strip",catchall:H.create(),typeName:i.ZodObject,...h(t)});class W extends p{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new s.ZodError(e.ctx.common.issues));return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_union,unionErrors:r}),l.INVALID});{let e,i=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&i.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=i.map(e=>new s.ZodError(e));return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_union,unionErrors:n}),l.INVALID}}get options(){return this._def.options}}t.ZodUnion=W,W.create=(e,t)=>new W({options:e,typeName:i.ZodUnion,...h(t)});let q=e=>{if(e instanceof et)return q(e.schema);if(e instanceof ea)return q(e.innerType());if(e instanceof er)return[e.value];if(e instanceof en)return e.options;if(e instanceof es)return u.util.objectValues(e.enum);else if(e instanceof ec)return q(e._def.innerType);else if(e instanceof V)return[void 0];else if(e instanceof R)return[null];else if(e instanceof el)return[void 0,...q(e.unwrap())];else if(e instanceof eu)return[null,...q(e.unwrap())];else if(e instanceof ep)return q(e.unwrap());else if(e instanceof ey)return q(e.unwrap());else if(e instanceof ed)return q(e._def.innerType);else return[]};class K extends p{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.ZodParsedType.object)return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.object,received:t.parsedType}),l.INVALID;let r=this.discriminator,i=t.data[r],n=this.optionsMap.get(i);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):((0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),l.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=q(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new K({typeName:i.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...h(r)})}}t.ZodDiscriminatedUnion=K;class G extends p{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if((0,l.isAborted)(e)||(0,l.isAborted)(i))return l.INVALID;let n=function e(t,r){let i=(0,u.getParsedType)(t),n=(0,u.getParsedType)(r);if(t===r)return{valid:!0,data:t};if(i===u.ZodParsedType.object&&n===u.ZodParsedType.object){let i=u.util.objectKeys(r),n=u.util.objectKeys(t).filter(e=>-1!==i.indexOf(e)),s={...t,...r};for(let i of n){let n=e(t[i],r[i]);if(!n.valid)return{valid:!1};s[i]=n.data}return{valid:!0,data:s}}if(i===u.ZodParsedType.array&&n===u.ZodParsedType.array){if(t.length!==r.length)return{valid:!1};let i=[];for(let n=0;n<t.length;n++){let s=e(t[n],r[n]);if(!s.valid)return{valid:!1};i.push(s.data)}return{valid:!0,data:i}}if(i===u.ZodParsedType.date&&n===u.ZodParsedType.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,i.value);return n.valid?(((0,l.isDirty)(e)||(0,l.isDirty)(i))&&t.dirty(),{status:t.value,value:n.data}):((0,l.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_intersection_types}),l.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>i(e,t)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}t.ZodIntersection=G,G.create=(e,t,r)=>new G({left:e,right:t,typeName:i.ZodIntersection,...h(r)});class Y extends p{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.ZodParsedType.array)return(0,l.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.array,received:r.parsedType}),l.INVALID;if(r.data.length<this._def.items.length)return(0,l.addIssueToContext)(r,{code:s.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),l.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,l.addIssueToContext)(r,{code:s.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...r.data].map((e,t)=>{let i=this._def.items[t]||this._def.rest;return i?i._parse(new c(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(i).then(e=>l.ParseStatus.mergeArray(t,e)):l.ParseStatus.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Y({...this._def,rest:e})}}t.ZodTuple=Y,Y.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new Y({items:e,typeName:i.ZodTuple,rest:null,...h(t)})};class J extends p{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.ZodParsedType.object)return(0,l.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.object,received:r.parsedType}),l.INVALID;let i=[],n=this._def.keyType,o=this._def.valueType;for(let e in r.data)i.push({key:n._parse(new c(r,e,r.path,e)),value:o._parse(new c(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?l.ParseStatus.mergeObjectAsync(t,i):l.ParseStatus.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return new J(t instanceof p?{keyType:e,valueType:t,typeName:i.ZodRecord,...h(r)}:{keyType:O.create(),valueType:e,typeName:i.ZodRecord,...h(t)})}}t.ZodRecord=J;class Q extends p{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.ZodParsedType.map)return(0,l.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.map,received:r.parsedType}),l.INVALID;let i=this._def.keyType,n=this._def.valueType,o=[...r.data.entries()].map(([e,t],s)=>({key:i._parse(new c(r,e,r.path,[s,"key"])),value:n._parse(new c(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of o){let i=await r.key,n=await r.value;if("aborted"===i.status||"aborted"===n.status)return l.INVALID;("dirty"===i.status||"dirty"===n.status)&&t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of o){let i=r.key,n=r.value;if("aborted"===i.status||"aborted"===n.status)return l.INVALID;("dirty"===i.status||"dirty"===n.status)&&t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}}}}t.ZodMap=Q,Q.create=(e,t,r)=>new Q({valueType:t,keyType:e,typeName:i.ZodMap,...h(r)});class X extends p{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.ZodParsedType.set)return(0,l.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.set,received:r.parsedType}),l.INVALID;let i=this._def;null!==i.minSize&&r.data.size<i.minSize.value&&((0,l.addIssueToContext)(r,{code:s.ZodIssueCode.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&r.data.size>i.maxSize.value&&((0,l.addIssueToContext)(r,{code:s.ZodIssueCode.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let n=this._def.valueType;function o(e){let r=new Set;for(let i of e){if("aborted"===i.status)return l.INVALID;"dirty"===i.status&&t.dirty(),r.add(i.value)}return{status:t.value,value:r}}let a=[...r.data.values()].map((e,t)=>n._parse(new c(r,e,r.path,t)));return r.common.async?Promise.all(a).then(e=>o(e)):o(a)}min(e,t){return new X({...this._def,minSize:{value:e,message:a.errorUtil.toString(t)}})}max(e,t){return new X({...this._def,maxSize:{value:e,message:a.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}t.ZodSet=X,X.create=(e,t)=>new X({valueType:e,minSize:null,maxSize:null,typeName:i.ZodSet,...h(t)});class ee extends p{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.ZodParsedType.function)return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.function,received:t.parsedType}),l.INVALID;function r(e,r){return(0,l.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,o.getErrorMap)(),o.defaultErrorMap].filter(e=>!!e),issueData:{code:s.ZodIssueCode.invalid_arguments,argumentsError:r}})}function i(e,r){return(0,l.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,o.getErrorMap)(),o.defaultErrorMap].filter(e=>!!e),issueData:{code:s.ZodIssueCode.invalid_return_type,returnTypeError:r}})}let n={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof eo){let e=this;return(0,l.OK)(async function(...t){let o=new s.ZodError([]),l=await e._def.args.parseAsync(t,n).catch(e=>{throw o.addIssue(r(t,e)),o}),u=await Reflect.apply(a,this,l);return await e._def.returns._def.type.parseAsync(u,n).catch(e=>{throw o.addIssue(i(u,e)),o})})}{let e=this;return(0,l.OK)(function(...t){let o=e._def.args.safeParse(t,n);if(!o.success)throw new s.ZodError([r(t,o.error)]);let l=Reflect.apply(a,this,o.data),u=e._def.returns.safeParse(l,n);if(!u.success)throw new s.ZodError([i(l,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ee({...this._def,args:Y.create(e).rest($.create())})}returns(e){return new ee({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ee({args:e||Y.create([]).rest($.create()),returns:t||$.create(),typeName:i.ZodFunction,...h(r)})}}t.ZodFunction=ee;class et extends p{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}t.ZodLazy=et,et.create=(e,t)=>new et({getter:e,typeName:i.ZodLazy,...h(t)});class er extends p{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{received:t.data,code:s.ZodIssueCode.invalid_literal,expected:this._def.value}),l.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ei(e,t){return new en({values:e,typeName:i.ZodEnum,...h(t)})}t.ZodLiteral=er,er.create=(e,t)=>new er({value:e,typeName:i.ZodLiteral,...h(t)});class en extends p{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,l.addIssueToContext)(t,{expected:u.util.joinValues(r),received:t.parsedType,code:s.ZodIssueCode.invalid_type}),l.INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,l.addIssueToContext)(t,{received:t.data,code:s.ZodIssueCode.invalid_enum_value,options:r}),l.INVALID}return(0,l.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return en.create(e,{...this._def,...t})}exclude(e,t=this._def){return en.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}t.ZodEnum=en,en.create=ei;class es extends p{_parse(e){let t=u.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==u.ZodParsedType.string&&r.parsedType!==u.ZodParsedType.number){let e=u.util.objectValues(t);return(0,l.addIssueToContext)(r,{expected:u.util.joinValues(e),received:r.parsedType,code:s.ZodIssueCode.invalid_type}),l.INVALID}if(this._cache||(this._cache=new Set(u.util.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=u.util.objectValues(t);return(0,l.addIssueToContext)(r,{received:r.data,code:s.ZodIssueCode.invalid_enum_value,options:e}),l.INVALID}return(0,l.OK)(e.data)}get enum(){return this._def.values}}t.ZodNativeEnum=es,es.create=(e,t)=>new es({values:e,typeName:i.ZodNativeEnum,...h(t)});class eo extends p{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.ZodParsedType.promise&&!1===t.common.async)return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.promise,received:t.parsedType}),l.INVALID;let r=t.parsedType===u.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,l.OK)(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}t.ZodPromise=eo,eo.create=(e,t)=>new eo({type:e,typeName:i.ZodPromise,...h(t)});class ea extends p{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===i.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,n={addIssue:e=>{(0,l.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===i.type){let e=i.transform(r.data,n);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return l.INVALID;let i=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===i.status?l.INVALID:"dirty"===i.status||"dirty"===t.value?(0,l.DIRTY)(i.value):i});{if("aborted"===t.value)return l.INVALID;let i=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===i.status?l.INVALID:"dirty"===i.status||"dirty"===t.value?(0,l.DIRTY)(i.value):i}}if("refinement"===i.type){let e=e=>{let t=i.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?l.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===i.status?l.INVALID:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}}if("transform"===i.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,l.isValid)(e)?Promise.resolve(i.transform(e.value,n)).then(e=>({status:t.value,value:e})):l.INVALID);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,l.isValid)(e))return l.INVALID;let s=i.transform(e.value,n);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}u.util.assertNever(i)}}t.ZodEffects=ea,t.ZodTransformer=ea,ea.create=(e,t,r)=>new ea({schema:e,typeName:i.ZodEffects,effect:t,...h(r)}),ea.createWithPreprocess=(e,t,r)=>new ea({schema:t,effect:{type:"preprocess",transform:e},typeName:i.ZodEffects,...h(r)});class el extends p{_parse(e){return this._getType(e)===u.ZodParsedType.undefined?(0,l.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodOptional=el,el.create=(e,t)=>new el({innerType:e,typeName:i.ZodOptional,...h(t)});class eu extends p{_parse(e){return this._getType(e)===u.ZodParsedType.null?(0,l.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodNullable=eu,eu.create=(e,t)=>new eu({innerType:e,typeName:i.ZodNullable,...h(t)});class ec extends p{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===u.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}t.ZodDefault=ec,ec.create=(e,t)=>new ec({innerType:e,typeName:i.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...h(t)});class ed extends p{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,l.isAsync)(i)?i.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new s.ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new s.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}t.ZodCatch=ed,ed.create=(e,t)=>new ed({innerType:e,typeName:i.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...h(t)});class eh extends p{_parse(e){if(this._getType(e)!==u.ZodParsedType.nan){let t=this._getOrReturnCtx(e);return(0,l.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:u.ZodParsedType.nan,received:t.parsedType}),l.INVALID}return{status:"valid",value:e.data}}}t.ZodNaN=eh,eh.create=e=>new eh({typeName:i.ZodNaN,...h(e)}),t.BRAND=Symbol("zod_brand");class ep extends p{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}t.ZodBranded=ep;class ef extends p{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?l.INVALID:"dirty"===e.status?(t.dirty(),(0,l.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?l.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new ef({in:e,out:t,typeName:i.ZodPipeline})}}t.ZodPipeline=ef;class ey extends p{_parse(e){let t=this._def.innerType._parse(e),r=e=>((0,l.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,l.isAsync)(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eg(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function em(e,t={},r){return e?D.create().superRefine((i,n)=>{let s=e(i);if(s instanceof Promise)return s.then(e=>{if(!e){let e=eg(t,i),s=e.fatal??r??!0;n.addIssue({code:"custom",...e,fatal:s})}});if(!s){let e=eg(t,i),s=e.fatal??r??!0;n.addIssue({code:"custom",...e,fatal:s})}}):D.create()}t.ZodReadonly=ey,ey.create=(e,t)=>new ey({innerType:e,typeName:i.ZodReadonly,...h(t)}),t.late={object:z.lazycreate},function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(i||(t.ZodFirstPartyTypeKind=i={})),t.instanceof=(e,t={message:`Input not instance of ${e.name}`})=>em(t=>t instanceof e,t);let ev=O.create;t.string=ev;let eb=U.create;t.number=eb,t.nan=eh.create,t.bigint=Z.create;let ew=P.create;t.boolean=ew,t.date=L.create,t.symbol=j.create,t.undefined=V.create,t.null=R.create,t.any=D.create,t.unknown=$.create,t.never=H.create,t.void=M.create,t.array=F.create,t.object=z.create,t.strictObject=z.strictCreate,t.union=W.create,t.discriminatedUnion=K.create,t.intersection=G.create,t.tuple=Y.create,t.record=J.create,t.map=Q.create,t.set=X.create,t.function=ee.create,t.lazy=et.create,t.literal=er.create,t.enum=en.create,t.nativeEnum=es.create,t.promise=eo.create;let ex=ea.create;t.effect=ex,t.transformer=ex,t.optional=el.create,t.nullable=eu.create,t.preprocess=ea.createWithPreprocess,t.pipeline=ef.create,t.ostring=()=>ev().optional(),t.onumber=()=>eb().optional(),t.oboolean=()=>ew().optional(),t.coerce={string:e=>O.create({...e,coerce:!0}),number:e=>U.create({...e,coerce:!0}),boolean:e=>P.create({...e,coerce:!0}),bigint:e=>Z.create({...e,coerce:!0}),date:e=>L.create({...e,coerce:!0})},t.NEVER=l.INVALID},27176:(e,t)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedType=t.ZodParsedType=t.objectUtil=t.util=void 0,function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),i={};for(let e of r)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(r||(t.util=r={})),(i||(t.objectUtil=i={})).mergeShapes=(e,t)=>({...e,...t}),t.ZodParsedType=r.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t.getParsedType=e=>{switch(typeof e){case"undefined":return t.ZodParsedType.undefined;case"string":return t.ZodParsedType.string;case"number":return Number.isNaN(e)?t.ZodParsedType.nan:t.ZodParsedType.number;case"boolean":return t.ZodParsedType.boolean;case"function":return t.ZodParsedType.function;case"bigint":return t.ZodParsedType.bigint;case"symbol":return t.ZodParsedType.symbol;case"object":if(Array.isArray(e))return t.ZodParsedType.array;if(null===e)return t.ZodParsedType.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return t.ZodParsedType.promise;if("undefined"!=typeof Map&&e instanceof Map)return t.ZodParsedType.map;if("undefined"!=typeof Set&&e instanceof Set)return t.ZodParsedType.set;if("undefined"!=typeof Date&&e instanceof Date)return t.ZodParsedType.date;return t.ZodParsedType.object;default:return t.ZodParsedType.unknown}}},32607:(e,t,r)=>{"use strict";r.d(t,{ev:()=>k});var i=r(41337),n=r(23084),s=r(64546),o=r(57551),a=r(52516);let l=BigInt(0),u=BigInt(1),c=BigInt(2),d=BigInt(8),h={zip215:!0},p=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),f=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),y=BigInt(0),g=BigInt(1),m=BigInt(2);BigInt(3);let v=BigInt(5),b=BigInt(8);function w(e,t){let r=(0,o.zi)(t*t*t,p),i=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%p*e%p,a=(0,o.zH)(s,m,p)*s%p,l=(0,o.zH)(a,g,p)*e%p,u=(0,o.zH)(l,v,p)*l%p,c=(0,o.zH)(u,t,p)*u%p,d=(0,o.zH)(c,r,p)*c%p,h=(0,o.zH)(d,i,p)*d%p,f=(0,o.zH)(h,n,p)*h%p,y=(0,o.zH)(f,n,p)*h%p,b=(0,o.zH)(y,t,p)*u%p;return{pow_p_5_8:(0,o.zH)(b,m,p)*e%p,b2:s}}(e*(0,o.zi)(r*r*t,p)).pow_p_5_8,n=(0,o.zi)(e*r*i,p),s=(0,o.zi)(t*n*n,p),a=n,l=(0,o.zi)(n*f,p),u=s===e,c=s===(0,o.zi)(-e,p),d=s===(0,o.zi)(-e*f,p);return u&&(n=a),(c||d)&&(n=l),(0,o.dQ)(n,p)&&(n=(0,o.zi)(-n,p)),{isValid:u||c,value:n}}let x=(0,o.D0)(p,void 0,!0),k=function(e){let t=function(e){let t=(0,s.hp)(e);return(0,a.Q5)(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n:i,prehash:n,hash:p,randomBytes:f,nByteLength:y,h:g}=t,m=c<<BigInt(8*y)-u,v=r.create,b=(0,o.D0)(t.n,t.nBitLength);if(!function(e,i){let n=r.sqr(e),s=r.sqr(i),o=r.add(r.mul(t.a,n),s),a=r.add(r.ONE,r.mul(t.d,r.mul(n,s)));return r.eql(o,a)}(t.Gx,t.Gy))throw Error("bad curve params: generator point");let w=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:l}}}),x=t.adjustScalarBytes||(e=>e),k=t.domain||((e,t,r)=>{if((0,a.e8)("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function A(e,t,r=!1){let i=r?u:l;(0,a.aK)("coordinate "+e,t,i,m)}function S(e){if(!(e instanceof _))throw Error("ExtendedPoint expected")}let B=(0,a.x)((e,t)=>{let{ex:i,ey:n,ez:s}=e,o=e.is0();null==t&&(t=o?d:r.inv(s));let a=v(i*t),c=v(n*t),h=v(s*t);if(o)return{x:l,y:u};if(h!==u)throw Error("invZ was invalid");return{x:a,y:c}}),I=(0,a.x)(e=>{let{a:r,d:i}=t;if(e.is0())throw Error("bad point: ZERO");let{ex:n,ey:s,ez:o,et:a}=e,l=v(n*n),u=v(s*s),c=v(o*o),d=v(c*c),h=v(l*r);if(v(c*v(h+u))!==v(d+v(i*v(l*u))))throw Error("bad point: equation left != right (1)");if(v(n*s)!==v(o*a))throw Error("bad point: equation left != right (2)");return!0});class _{constructor(e,t,r,i){A("x",e),A("y",t),A("z",r,!0),A("t",i),this.ex=e,this.ey=t,this.ez=r,this.et=i,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof _)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return A("x",t),A("y",r),new _(t,r,u,v(t*r))}static normalizeZ(e){let t=(0,o.pS)(r,e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(_.fromAffine)}static msm(e,t){return(0,s.Xf)(_,b,e,t)}_setWindowSize(e){T.setWindowSize(this,e)}assertValidity(){I(this)}equals(e){S(e);let{ex:t,ey:r,ez:i}=this,{ex:n,ey:s,ez:o}=e,a=v(t*o),l=v(n*i),u=v(r*o),c=v(s*i);return a===l&&u===c}is0(){return this.equals(_.ZERO)}negate(){return new _(v(-this.ex),this.ey,this.ez,v(-this.et))}double(){let{a:e}=t,{ex:r,ey:i,ez:n}=this,s=v(r*r),o=v(i*i),a=v(c*v(n*n)),l=v(e*s),u=r+i,d=v(v(u*u)-s-o),h=l+o,p=h-a,f=l-o,y=v(d*p),g=v(h*f),m=v(d*f);return new _(y,g,v(p*h),m)}add(e){S(e);let{a:r,d:i}=t,{ex:n,ey:s,ez:o,et:a}=this,{ex:l,ey:u,ez:c,et:d}=e,h=v(n*l),p=v(s*u),f=v(a*i*d),y=v(o*c),g=v((n+s)*(l+u)-h-p),m=y-f,b=y+f,w=v(p-r*h),x=v(g*m),k=v(b*w),A=v(g*w);return new _(x,k,v(m*b),A)}subtract(e){return this.add(e.negate())}wNAF(e){return T.wNAFCached(this,e,_.normalizeZ)}multiply(e){(0,a.aK)("scalar",e,u,i);let{p:t,f:r}=this.wNAF(e);return _.normalizeZ([t,r])[0]}multiplyUnsafe(e,t=_.ZERO){return((0,a.aK)("scalar",e,l,i),e===l)?E:this.is0()||e===u?this:T.wNAFCachedUnsafe(this,e,_.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(g).is0()}isTorsionFree(){return T.unsafeLadder(this,i).is0()}toAffine(e){return B(this,e)}clearCofactor(){let{h:e}=t;return e===u?this:this.multiplyUnsafe(e)}static fromHex(e,i=!1){let{d:n,a:s}=t,o=r.BYTES;e=(0,a.qj)("pointHex",e,o),(0,a.e8)("zip215",i);let c=e.slice(),d=e[o-1];c[o-1]=-129&d;let h=(0,a.lX)(c),p=i?m:r.ORDER;(0,a.aK)("pointHex.y",h,l,p);let f=v(h*h),{isValid:y,value:g}=w(v(f-u),v(n*f-s));if(!y)throw Error("Point.fromHex: invalid y coordinate");let b=(g&u)===u,x=(128&d)!=0;if(!i&&g===l&&x)throw Error("Point.fromHex: x=0 and x_0=1");return x!==b&&(g=v(-g)),_.fromAffine({x:g,y:h})}static fromPrivateKey(e){let{scalar:t}=O(e);return C.multiply(t)}toRawBytes(){let{x:e,y:t}=this.toAffine(),i=(0,a.z)(t,r.BYTES);return i[i.length-1]|=e&u?128:0,i}toHex(){return(0,a.My)(this.toRawBytes())}}_.BASE=new _(t.Gx,t.Gy,u,v(t.Gx*t.Gy)),_.ZERO=new _(l,u,u,l);let{BASE:C,ZERO:E}=_,T=(0,s.hT)(_,8*y);function N(e){var t;return t=(0,a.lX)(e),(0,o.zi)(t,i)}function O(e){let t=r.BYTES;e=(0,a.qj)("private key",e,t);let i=(0,a.qj)("hashed private key",p(e),2*t),n=x(i.slice(0,t)),s=i.slice(t,2*t),o=N(n);return{head:n,prefix:s,scalar:o}}function U(e){let{head:t,prefix:r,scalar:i}=O(e),n=C.multiply(i),s=n.toRawBytes();return{head:t,prefix:r,scalar:i,point:n,pointBytes:s}}function Z(e=Uint8Array.of(),...t){return N(p(k((0,a.Id)(...t),(0,a.qj)("context",e),!!n)))}return C._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return U(e).pointBytes},sign:function(e,t,s={}){var u;e=(0,a.qj)("message",e),n&&(e=n(e));let{prefix:c,scalar:d,pointBytes:h}=U(t),p=Z(s.context,c,e),f=C.multiply(p).toRawBytes(),y=(u=p+Z(s.context,f,h,e)*d,(0,o.zi)(u,i));(0,a.aK)("signature.s",y,l,i);let g=(0,a.Id)(f,(0,a.z)(y,r.BYTES));return(0,a.qj)("result",g,2*r.BYTES)},verify:function(e,t,i,s=h){let o,l,u,{context:c,zip215:d}=s,p=r.BYTES;e=(0,a.qj)("signature",e,2*p),t=(0,a.qj)("message",t),i=(0,a.qj)("publicKey",i,p),void 0!==d&&(0,a.e8)("zip215",d),n&&(t=n(t));let f=(0,a.lX)(e.slice(p,2*p));try{o=_.fromHex(i,d),l=_.fromHex(e.slice(0,p),d),u=C.multiplyUnsafe(f)}catch(e){return!1}if(!d&&o.isSmallOrder())return!1;let y=Z(c,l.toRawBytes(),o.toRawBytes(),t);return l.add(o.multiplyUnsafe(y)).subtract(u).clearCofactor().equals(_.ZERO)},ExtendedPoint:_,utils:{getExtendedPublicKey:U,randomPrivateKey:()=>f(r.BYTES),precompute:(e=8,t=_.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:x.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:x,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:b,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:i.Zf,randomBytes:n.po,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:w})},35687:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(17547),t),n(r(48603),t),n(r(3458),t),n(r(27176),t),n(r(25655),t),n(r(2301),t)},40467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(2301),n=r(27176);t.default=(e,t)=>{let r;switch(e.code){case i.ZodIssueCode.invalid_type:r=e.received===n.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case i.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,n.util.jsonStringifyReplacer)}`;break;case i.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${n.util.joinValues(e.keys,", ")}`;break;case i.ZodIssueCode.invalid_union:r="Invalid input";break;case i.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${n.util.joinValues(e.options)}`;break;case i.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${n.util.joinValues(e.options)}, received '${e.received}'`;break;case i.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case i.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case i.ZodIssueCode.invalid_date:r="Invalid date";break;case i.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:n.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case i.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case i.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case i.ZodIssueCode.custom:r="Invalid input";break;case i.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case i.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case i.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,n.util.assertNever(e)}return{message:r}}},48554:(e,t,r)=>{var i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,n=function(){function e(){this.fetch=!1,this.DOMException=i.DOMException}return e.prototype=i,new e}();!function(e){!function(t){var r=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r&&r,i={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(i.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function c(e){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function h(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(i.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;i.arrayBuffer&&i.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e)}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){if(!this._bodyArrayBuffer)return this.blob().then(h);var e=c(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}),this.text=function(){var e,t,r,i=c(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=d(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},i.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=o(e),t=a(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype.delete=function(e){delete this.map[o(e)]},u.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},u.prototype.set=function(e,t){this.map[o(e)]=a(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),l(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),l(e)},i.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){if(!(this instanceof g))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,n=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new u(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),y.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(n))}}),t}function v(e,t){if(!(this instanceof v))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},f.call(g.prototype),f.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];v.redirect=function(e,t){if(-1===b.indexOf(t))throw RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},t.DOMException=r.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(e,n){return new Promise(function(s,o){var l=new g(e,n);if(l.signal&&l.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function d(){c.abort()}c.onload=function(){var e,t,r={status:c.status,statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();t.append(i,n)}}),t)};r.url="responseURL"in c?c.responseURL:r.headers.get("X-Request-URL");var i="response"in c?c.response:c.responseText;setTimeout(function(){s(new v(i,r))},0)},c.onerror=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},c.onabort=function(){setTimeout(function(){o(new t.DOMException("Aborted","AbortError"))},0)},c.open(l.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(l.url),!0),"include"===l.credentials?c.withCredentials=!0:"omit"===l.credentials&&(c.withCredentials=!1),"responseType"in c&&(i.blob?c.responseType="blob":i.arrayBuffer&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!n||"object"!=typeof n.headers||n.headers instanceof u?l.headers.forEach(function(e,t){c.setRequestHeader(t,e)}):Object.getOwnPropertyNames(n.headers).forEach(function(e){c.setRequestHeader(e,a(n.headers[e]))}),l.signal&&(l.signal.addEventListener("abort",d),c.onreadystatechange=function(){4===c.readyState&&l.signal.removeEventListener("abort",d)}),c.send(void 0===l._bodyInit?null:l._bodyInit)})}w.polyfill=!0,r.fetch||(r.fetch=w,r.Headers=u,r.Request=g,r.Response=v),t.Headers=u,t.Request=g,t.Response=v,t.fetch=w}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=i.fetch?i:n;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},48603:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=t.isValid=t.isDirty=t.isAborted=t.OK=t.DIRTY=t.INVALID=t.ParseStatus=t.EMPTY_PATH=t.makeIssue=void 0,t.addIssueToContext=function(e,r){let i=(0,n.getErrorMap)(),o=(0,t.makeIssue)({issueData:r,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,i,i===s.default?void 0:s.default].filter(e=>!!e)});e.common.issues.push(o)};let n=r(17547),s=i(r(40467));t.makeIssue=e=>{let{data:t,path:r,errorMaps:i,issueData:n}=e,s=[...r,...n.path||[]],o={...n,path:s};if(void 0!==n.message)return{...n,path:s,message:n.message};let a="";for(let e of i.filter(e=>!!e).slice().reverse())a=e(o,{data:t,defaultError:a}).message;return{...n,path:s,message:a}},t.EMPTY_PATH=[];class o{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,r){let i=[];for(let n of r){if("aborted"===n.status)return t.INVALID;"dirty"===n.status&&e.dirty(),i.push(n.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,i=await e.value;r.push({key:t,value:i})}return o.mergeObjectSync(e,r)}static mergeObjectSync(e,r){let i={};for(let n of r){let{key:r,value:s}=n;if("aborted"===r.status||"aborted"===s.status)return t.INVALID;"dirty"===r.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"!==r.value&&(void 0!==s.value||n.alwaysSet)&&(i[r.value]=s.value)}return{status:e.value,value:i}}}t.ParseStatus=o,t.INVALID=Object.freeze({status:"aborted"}),t.DIRTY=e=>({status:"dirty",value:e}),t.OK=e=>({status:"valid",value:e}),t.isAborted=e=>"aborted"===e.status,t.isDirty=e=>"dirty"===e.status,t.isValid=e=>"valid"===e.status,t.isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise},49381:(e,t,r)=>{"use strict";var i=r(51642).Buffer;class n{static isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){let r=n.toUint8Array(e),i=n.toUint8Array(t);if(r.length!==i.byteLength)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1;return!0}static concat(...e){let t;t=!Array.isArray(e[0])||e[1]instanceof Function?Array.isArray(e[0])&&e[1]instanceof Function?e[0]:e[e.length-1]instanceof Function?e.slice(0,e.length-1):e:e[0];let r=0;for(let e of t)r+=e.byteLength;let i=new Uint8Array(r),n=0;for(let e of t){let t=this.toUint8Array(e);i.set(t,n),n+=t.length}return e[e.length-1]instanceof Function?this.toView(i,e[e.length-1]):i.buffer}}let s="string",o=/^[0-9a-f\s]+$/i,a=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,l=/^[a-zA-Z0-9-_]+$/;class u{static fromString(e){let t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}static toString(e){let t=n.toUint8Array(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return decodeURIComponent(escape(r))}}class c{static toString(e,t=!1){let r=n.toArrayBuffer(e),i=new DataView(r),s="";for(let e=0;e<r.byteLength;e+=2)s+=String.fromCharCode(i.getUint16(e,t));return s}static fromString(e,t=!1){let r=new ArrayBuffer(2*e.length),i=new DataView(r);for(let r=0;r<e.length;r++)i.setUint16(2*r,e.charCodeAt(r),t);return r}}class d{static isHex(e){return typeof e===s&&o.test(e)}static isBase64(e){return typeof e===s&&a.test(e)}static isBase64Url(e){return typeof e===s&&l.test(e)}static ToString(e,t="utf8"){let r=n.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return c.toString(r,!0);case"utf16":case"utf16be":return c.toString(r);default:throw Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return c.fromString(e,!0);case"utf16":case"utf16be":return c.fromString(e);default:throw Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){let t=n.toUint8Array(e);return"undefined"!=typeof btoa?btoa(this.ToString(t,"binary")):i.from(t).toString("base64")}static FromBase64(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!d.isBase64(t))throw TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(t)):new Uint8Array(i.from(t,"base64")).buffer}static FromBase64Url(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!d.isBase64Url(t))throw TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=d.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return u.fromString(e);case"utf16":case"utf16be":return c.fromString(e);case"utf16le":case"usc2":return c.fromString(e,!0);default:throw Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=d.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return u.toString(e);case"utf16":case"utf16be":return c.toString(e);case"utf16le":case"usc2":return c.toString(e,!0);default:throw Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){let t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return r.buffer}static ToBinary(e){let t=n.toUint8Array(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return r}static ToHex(e){let t=n.toUint8Array(e),r="",i=t.length;for(let e=0;e<i;e++){let i=t[e];i<16&&(r+="0"),r+=i.toString(16)}return r}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!d.isHex(t))throw TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){let i=t.slice(e,e+2);r[e/2]=parseInt(i,16)}return r.buffer}static ToUtf16String(e,t=!1){return c.toString(e,t)}static FromUtf16String(e,t=!1){return c.fromString(e,t)}static Base64Padding(e){let t=4-e.length%4;if(t<4)for(let r=0;r<t;r++)e+="=";return e}static formatString(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}d.DEFAULT_UTF8_ENCODING="utf8",t._H=n,t.U$=d,t.n4=function(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),i=new Uint8Array(t);for(let t=0;t<e.byteLength;t++)if(r[t]!==i[t])return!1;return!0}},54808:(e,t,r)=>{"use strict";r.d(t,{_d:()=>$});var i,n,s,o,a,l,u,c,d,h,p,f,y,g,m,v,b,w,x,k,A,S,B,I,_,C,E,T,N,O,U,Z,P,L,j,V,R,D={};r.r(D),r.d(D,{Any:()=>td,BaseBlock:()=>ex,BaseStringBlock:()=>ek,BitString:()=>ej,BmpString:()=>e2,Boolean:()=>eU,CharacterString:()=>ti,Choice:()=>th,Constructed:()=>eC,DATE:()=>to,DateTime:()=>tl,Duration:()=>tu,EndOfContent:()=>eT,Enumerated:()=>e$,GeneralString:()=>tr,GeneralizedTime:()=>ts,GraphicString:()=>te,HexBlock:()=>ey,IA5String:()=>e7,Integer:()=>eD,Null:()=>eN,NumericString:()=>e4,ObjectIdentifier:()=>eF,OctetString:()=>eP,Primitive:()=>eS,PrintableString:()=>e3,RawData:()=>tf,RelativeObjectIdentifier:()=>eq,Repeated:()=>tp,Sequence:()=>eK,Set:()=>eG,TIME:()=>tc,TeletexString:()=>e5,TimeOfDay:()=>ta,UTCTime:()=>tn,UniversalString:()=>e8,Utf8String:()=>e0,ValueBlock:()=>em,VideotexString:()=>e9,ViewWriter:()=>es,VisibleString:()=>tt,compareSchema:()=>ty,fromBER:()=>eI,verifySchema:()=>tg});var $={};r.r($),r.d($,{fromBuffer:()=>iP,fromString:()=>ij,isBase64:()=>iR,isBase64url:()=>iD,toBase64:()=>iL,toBuffer:()=>iZ,toString:()=>iV}),new TextDecoder,new TextEncoder;let H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",F=e=>{let t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),r=H.length;for(let i=0;i<r;i++)t[e.charCodeAt(i)]=i;return t},z=F(H),W=F(M),q=/^[-A-Za-z0-9\-_]*$/,K=/^[-A-Za-z0-9+/]*={0,3}$/,G={};G.toArrayBuffer=(e,t)=>{let r=e.length,i=.75*e.length,n,s=0,o,a,l,u;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);let c=new ArrayBuffer(i),d=new Uint8Array(c),h=t?W:z;for(n=0;n<r;n+=4)o=h[e.charCodeAt(n)],a=h[e.charCodeAt(n+1)],l=h[e.charCodeAt(n+2)],u=h[e.charCodeAt(n+3)],d[s++]=o<<2|a>>4,d[s++]=(15&a)<<4|l>>2,d[s++]=(3&l)<<6|63&u;return c},G.fromArrayBuffer=(e,t)=>{let r=new Uint8Array(e),i,n="",s=r.length,o=t?M:H;for(i=0;i<s;i+=3)n+=o[r[i]>>2],n+=o[(3&r[i])<<4|r[i+1]>>4],n+=o[(15&r[i+1])<<2|r[i+2]>>6],n+=o[63&r[i+2]];let a=s%3;return 2===a?n=n.substring(0,n.length-1)+(t?"":"="):1===a&&(n=n.substring(0,n.length-2)+(t?"":"==")),n},G.toString=(e,t)=>new TextDecoder().decode(G.toArrayBuffer(e,t)),G.fromString=(e,t)=>G.fromArrayBuffer(new TextEncoder().encode(e),t),G.validate=(e,t)=>{if(!("string"==typeof e||e instanceof String))return!1;try{return t?q.test(e):K.test(e)}catch(e){return!1}},G.base64=G,r(48554);var Y=r(49381);function J(e,t){let r=0;if(1===e.length)return e[0];for(let i=e.length-1;i>=0;i--)r+=e[e.length-1-i]*Math.pow(2,t*i);return r}function Q(e,t,r=-1){let i=e,n=0,s=Math.pow(2,t);for(let o=1;o<8;o++){if(e<s){let e;if(r<0)e=new ArrayBuffer(o),n=o;else{if(r<o)return new ArrayBuffer(0);e=new ArrayBuffer(r),n=r}let s=new Uint8Array(e);for(let e=o-1;e>=0;e--){let r=Math.pow(2,e*t);s[n-e-1]=Math.floor(i/r),i-=s[n-e-1]*r}return e}s*=Math.pow(2,t)}return new ArrayBuffer(0)}function X(...e){let t=0,r=0;for(let r of e)t+=r.length;let i=new Uint8Array(new ArrayBuffer(t));for(let t of e)i.set(t,r),r+=t.length;return i}function ee(){let e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let t=255===e[0]&&128&e[1],r=0===e[0]&&(128&e[1])==0;(t||r)&&this.warnings.push("Needlessly long format")}let t=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let e=0;e<this.valueHex.byteLength;e++)t[e]=0;t[0]=128&e[0];let r=J(t,8),i=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let t=0;t<this.valueHex.byteLength;t++)i[t]=e[t];return i[0]&=127,J(i,8)-r}function et(e,t){let r=e.toString(10);if(t<r.length)return"";let i=t-r.length,n=Array(i);for(let e=0;e<i;e++)n[e]="0";return n.join("").concat(r)}function er(){if("undefined"==typeof BigInt)throw Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function ei(e){let t=0,r=0;for(let r=0;r<e.length;r++)t+=e[r].byteLength;let i=new Uint8Array(t);for(let t=0;t<e.length;t++){let n=e[t];i.set(new Uint8Array(n),r),r+=n.byteLength}return i.buffer}function en(e,t,r,i){return t instanceof Uint8Array?t.byteLength?r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):i<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-i<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class es{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return ei(this.items)}}let eo=[new Uint8Array([1])],ea="0123456789",el="name",eu="valueHexView",ec=new ArrayBuffer(0),ed=new Uint8Array(0),eh="EndOfContent",ep="OCTET STRING",ef="BIT STRING";function ey(e){var t;return(t=class extends e{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}constructor(...e){var t;super(...e);let r=e[0]||{};this.isHexOnly=null!=(t=r.isHexOnly)&&t,this.valueHexView=r.valueHex?Y._H.toUint8Array(r.valueHex):ed}fromBER(e,t,r){let i=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!en(this,i,t,r))return -1;let n=t+r;return(this.valueHexView=i.subarray(t,n),this.valueHexView.length)?(this.blockLength=r,n):(this.warnings.push("Zero buffer length"),t)}toBER(e=!1){return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",ec)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Y.U$.ToHex(this.valueHexView)}}}).NAME="hexBlock",t}class eg{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:t="",warnings:r=[],valueBeforeDecode:i=ed}={}){this.blockLength=e,this.error=t,this.warnings=r,this.valueBeforeDecodeView=Y._H.toUint8Array(i)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Y.U$.ToHex(this.valueBeforeDecodeView)}}}eg.NAME="baseBlock";class em extends eg{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}em.NAME="valueBlock";class ev extends ey(eg){constructor({idBlock:e={}}={}){var t,r,i,n;super(),e?(this.isHexOnly=null!=(t=e.isHexOnly)&&t,this.valueHexView=e.valueHex?Y._H.toUint8Array(e.valueHex):ed,this.tagClass=null!=(r=e.tagClass)?r:-1,this.tagNumber=null!=(i=e.tagNumber)?i:-1,this.isConstructed=null!=(n=e.isConstructed)&&n):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",ec}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){let r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,r[0]=t}return r.buffer}if(!this.isHexOnly){let r=Q(this.tagNumber,7),i=new Uint8Array(r),n=r.byteLength,s=new Uint8Array(n+1);if(s[0]=31|t,!e){for(let e=0;e<n-1;e++)s[e+1]=128|i[e];s[n]=i[n-1]}return s.buffer}let r=new Uint8Array(this.valueHexView.byteLength+1);if(r[0]=31|t,!e){let e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=128|e[t];r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,t,r){let i=Y._H.toUint8Array(e);if(!en(this,i,t,r))return -1;let n=i.subarray(t,t+r);if(0===n.length)return this.error="Zero buffer length",-1;switch(192&n[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(32&n[0])==32,this.isHexOnly=!1;let s=31&n[0];if(31!==s)this.tagNumber=s,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),r=255;for(;128&n[e];){if(t[e-1]=127&n[e],++e>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(e===r){let e=new Uint8Array(r+=255);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1,t[e-1]=127&n[e];let i=new Uint8Array(e);for(let r=0;r<e;r++)i[r]=t[r];(t=this.valueHexView=new Uint8Array(e)).set(i),this.blockLength<=9?this.tagNumber=J(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}ev.NAME="identificationBlock";class eb extends eg{constructor({lenBlock:e={}}={}){var t,r,i;super(),this.isIndefiniteForm=null!=(t=e.isIndefiniteForm)&&t,this.longFormUsed=null!=(r=e.longFormUsed)&&r,this.length=null!=(i=e.length)?i:0}fromBER(e,t,r){let i=Y._H.toUint8Array(e);if(!en(this,i,t,r))return -1;let n=i.subarray(t,t+r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),!1===this.longFormUsed)return this.length=n[0],this.blockLength=1,t+this.blockLength;let s=127&n[0];if(s>8)return this.error="Too big integer",-1;if(s+1>n.length)return this.error="End of input reached before message was fully decoded",-1;let o=t+1,a=i.subarray(o,o+s);return 0===a[s-1]&&this.warnings.push("Needlessly long encoded length"),this.length=J(a,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=s+1,t+this.blockLength}toBER(e=!1){let t,r;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=128),t;if(this.longFormUsed){let i=Q(this.length,8);if(i.byteLength>127)return this.error="Too big length",ec;if(t=new ArrayBuffer(i.byteLength+1),e)return t;let n=new Uint8Array(i);(r=new Uint8Array(t))[0]=128|i.byteLength;for(let e=0;e<i.byteLength;e++)r[e+1]=n[e];return t}return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}eb.NAME="lengthBlock";let ew={};class ex extends eg{constructor({name:e="",optional:t=!1,primitiveSchema:r,...i}={},n){super(i),this.name=e,this.optional=t,r&&(this.primitiveSchema=r),this.idBlock=new ev(i),this.lenBlock=new eb(i),this.valueBlock=n?new n(i):new em(i)}fromBER(e,t,r){let i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===i?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),i}toBER(e,t){let r=t||new es;t||function e(t){var r;if(t instanceof ew.Constructed)for(let r of t.valueBlock.value)e(r)&&(t.lenBlock.isIndefiniteForm=!0);return!!(null==(r=t.lenBlock)?void 0:r.isIndefiniteForm)}(this);let i=this.idBlock.toBER(e);if(r.write(i),this.lenBlock.isIndefiniteForm)r.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,r),r.write(new ArrayBuffer(2));else{let t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;let i=this.lenBlock.toBER(e);r.write(i),r.write(t)}return t?ec:r.final()}toJSON(){let e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():Y.U$.ToHex(this.toBER())}onAsciiEncoding(){let e=this.constructor.NAME,t=Y.U$.ToHex(this.valueBlock.valueBeforeDecodeView);return`${e} : ${t}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;let t=this.toBER(),r=e.toBER();if(t.byteLength!==r.byteLength)return!1;let i=new Uint8Array(t),n=new Uint8Array(r);for(let e=0;e<i.length;e++)if(i[e]!==n[e])return!1;return!0}}ex.NAME="BaseBlock";class ek extends ex{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e="",...t}={},r){super(t,r),e&&this.fromString(e)}fromBER(e,t,r){let i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===i?this.error=this.valueBlock.error:(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),i}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}ek.NAME="BaseStringBlock";class eA extends ey(em){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}eA.NAME="PrimitiveValueBlock";class eS extends ex{constructor(e={}){super(e,eA),this.idBlock.isConstructed=!1}}function eB(e,t=0,r=e.length){let i=t,n=new ex({},em),s=new eg;if(!en(s,e,t,r))return n.error=s.error,{offset:-1,result:n};if(!e.subarray(t,t+r).length)return n.error="Zero buffer length",{offset:-1,result:n};let o=n.idBlock.fromBER(e,t,r);if(n.idBlock.warnings.length&&n.warnings.concat(n.idBlock.warnings),-1===o)return n.error=n.idBlock.error,{offset:-1,result:n};if(t=o,r-=n.idBlock.blockLength,o=n.lenBlock.fromBER(e,t,r),n.lenBlock.warnings.length&&n.warnings.concat(n.lenBlock.warnings),-1===o)return n.error=n.lenBlock.error,{offset:-1,result:n};if(t=o,r-=n.lenBlock.blockLength,!n.idBlock.isConstructed&&n.lenBlock.isIndefiniteForm)return n.error="Indefinite length form used for primitive encoding form",{offset:-1,result:n};let a=ex;if(1===n.idBlock.tagClass){if(n.idBlock.tagNumber>=37&&!1===n.idBlock.isHexOnly)return n.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:n};switch(n.idBlock.tagNumber){case 0:if(n.idBlock.isConstructed&&n.lenBlock.length>0)return n.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:n};a=ew.EndOfContent;break;case 1:a=ew.Boolean;break;case 2:a=ew.Integer;break;case 3:a=ew.BitString;break;case 4:a=ew.OctetString;break;case 5:a=ew.Null;break;case 6:a=ew.ObjectIdentifier;break;case 10:a=ew.Enumerated;break;case 12:a=ew.Utf8String;break;case 13:a=ew.RelativeObjectIdentifier;break;case 14:a=ew.TIME;break;case 15:return n.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:n};case 16:a=ew.Sequence;break;case 17:a=ew.Set;break;case 18:a=ew.NumericString;break;case 19:a=ew.PrintableString;break;case 20:a=ew.TeletexString;break;case 21:a=ew.VideotexString;break;case 22:a=ew.IA5String;break;case 23:a=ew.UTCTime;break;case 24:a=ew.GeneralizedTime;break;case 25:a=ew.GraphicString;break;case 26:a=ew.VisibleString;break;case 27:a=ew.GeneralString;break;case 28:a=ew.UniversalString;break;case 29:a=ew.CharacterString;break;case 30:a=ew.BmpString;break;case 31:a=ew.DATE;break;case 32:a=ew.TimeOfDay;break;case 33:a=ew.DateTime;break;case 34:a=ew.Duration;break;default:{let e=n.idBlock.isConstructed?new ew.Constructed:new ew.Primitive;e.idBlock=n.idBlock,e.lenBlock=n.lenBlock,e.warnings=n.warnings,n=e}}}else a=n.idBlock.isConstructed?ew.Constructed:ew.Primitive;return o=(n=function(e,t){if(e instanceof t)return e;let r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecodeView=e.valueBeforeDecodeView,r}(n,a)).fromBER(e,t,n.lenBlock.isIndefiniteForm?r:n.lenBlock.length),n.valueBeforeDecodeView=e.subarray(i,i+n.blockLength),{offset:o,result:n}}function eI(e){if(!e.byteLength){let e=new ex({},em);return e.error="Input buffer has zero length",{offset:-1,result:e}}return eB(Y._H.toUint8Array(e).slice(),0,e.byteLength)}ew.Primitive=eS,eS.NAME="PRIMITIVE";class e_ extends em{constructor({value:e=[],isIndefiniteForm:t=!1,...r}={}){super(r),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,r){var i,n;let s=Y._H.toUint8Array(e);if(!en(this,s,t,r))return -1;if(this.valueBeforeDecodeView=s.subarray(t,t+r),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let o=t;for(;i=this.isIndefiniteForm,n=r,(i?1:n)>0;){let e=eB(s,o,r);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(o=e.offset,this.blockLength+=e.result.blockLength,r-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===eh)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===eh?this.value.pop():this.warnings.push("No EndOfContent block encoded")),o}toBER(e,t){let r=t||new es;for(let t=0;t<this.value.length;t++)this.value[t].toBER(e,r);return t?ec:r.final()}toJSON(){let e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let t of this.value)e.value.push(t.toJSON());return e}}e_.NAME="ConstructedValueBlock";class eC extends ex{constructor(e={}){super(e,e_),this.idBlock.isConstructed=!0}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===i?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),i}onAsciiEncoding(){let e=[];for(let t of this.valueBlock.value)e.push(t.toString("ascii").split("\n").map(e=>`  ${e}`).join("\n"));let t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :
${e.join("\n")}`:`${t} :`}}ew.Constructed=eC,eC.NAME="CONSTRUCTED";class eE extends em{fromBER(e,t,r){return t}toBER(e){return ec}}eE.override="EndOfContentValueBlock";class eT extends ex{constructor(e={}){super(e,eE),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}ew.EndOfContent=eT,eT.NAME=eh;class eN extends ex{constructor(e={}){super(e,em),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,r){return(this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength)?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}toBER(e,t){let r=new ArrayBuffer(2);if(!e){let e=new Uint8Array(r);e[0]=5,e[1]=0}return t&&t.write(r),r}onAsciiEncoding(){return`${this.constructor.NAME}`}}ew.Null=eN,eN.NAME="NULL";class eO extends ey(em){get value(){for(let e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=255*!!e}constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=Y._H.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,t,r){let i=Y._H.toUint8Array(e);return en(this,i,t,r)?(this.valueHexView=i.subarray(t,t+r),r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,ee.call(this),this.blockLength=r,t+r):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}eO.NAME="BooleanValueBlock";class eU extends ex{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,eO),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}ew.Boolean=eU,eU.NAME="BOOLEAN";class eZ extends ey(e_){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,r){let i=0;if(this.isConstructed){if(this.isHexOnly=!1,-1===(i=e_.prototype.fromBER.call(this,e,t,r)))return i;for(let e=0;e<this.value.length;e++){let t=this.value[e].constructor.NAME;if(t===eh)if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1;else break;if(t!==ep)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=super.fromBER(e,t,r),this.blockLength=r;return i}toBER(e,t){return this.isConstructed?e_.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}eZ.NAME="OctetStringValueBlock";class eP extends ex{constructor({idBlock:e={},lenBlock:t={},...r}={}){var i;null!=r.isConstructed||(r.isConstructed=!!(null==(i=r.value)?void 0:i.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},eZ),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,r){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===r)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){let i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+r);try{if(i.byteLength){let e=eB(i,0,i.byteLength);-1!==e.offset&&e.offset===r&&(this.valueBlock.value=[e.result])}}catch{}}return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return eC.prototype.onAsciiEncoding.call(this);let e=this.constructor.NAME,t=Y.U$.ToHex(this.valueBlock.valueHexView);return`${e} : ${t}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let e=[];for(let t of this.valueBlock.value)t instanceof i&&e.push(t.valueBlock.valueHexView);return Y._H.concat(e)}}ew.OctetString=i=eP,eP.NAME=ep;class eL extends ey(e_){constructor({unusedBits:e=0,isConstructed:t=!1,...r}={}){super(r),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r)return t;let i=-1;if(this.isConstructed){if(-1===(i=e_.prototype.fromBER.call(this,e,t,r)))return i;for(let e of this.value){let t=e.constructor.NAME;if(t===eh)if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1;else break;if(t!==ef)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=r.unusedBits}return i}let n=Y._H.toUint8Array(e);if(!en(this,n,t,r))return -1;let s=n.subarray(t,t+r);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let e=s.subarray(1);try{if(e.byteLength){let t=eB(e,0,e.byteLength);-1!==t.offset&&t.offset===r-1&&(this.value=[t.result])}}catch{}}return this.valueHexView=s.subarray(1),this.blockLength=s.length,t+r}toBER(e,t){if(this.isConstructed)return e_.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return ec;let r=new Uint8Array(this.valueHexView.length+1);return r[0]=this.unusedBits,r.set(this.valueHexView,1),r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}eL.NAME="BitStringValueBlock";class ej extends ex{constructor({idBlock:e={},lenBlock:t={},...r}={}){var i;null!=r.isConstructed||(r.isConstructed=!!(null==(i=r.value)?void 0:i.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},eL),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return eC.prototype.onAsciiEncoding.call(this);{let e=[];for(let t of this.valueBlock.valueHexView)e.push(t.toString(2).padStart(8,"0"));let t=e.join(""),r=this.constructor.NAME,i=t.substring(0,t.length-this.valueBlock.unusedBits);return`${r} : ${i}`}}}function eV(e){if(e>=eo.length)for(let t=eo.length;t<=e;t++){let e=new Uint8Array([0]),r=eo[t-1].slice(0);for(let t=r.length-1;t>=0;t--){let i=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=i[0]/10,r[t]=i[0]%10}e[0]>0&&(r=X(e,r)),eo.push(r)}return eo[e]}ew.BitString=ej,ej.NAME=ef;class eR extends ey(em){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=ee.call(this)))}constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function(e){let t=e<0?-1*e:e,r=128;for(let i=1;i<8;i++){if(t<=r){if(e<0){let e=Q(r-t,8,i),n=new Uint8Array(e);return n[0]|=128,e}let n=Q(t,8,i),s=new Uint8Array(n);if(128&s[0]){let e=n.slice(0),t=new Uint8Array(e);s=new Uint8Array(n=new ArrayBuffer(n.byteLength+1));for(let r=0;r<e.byteLength;r++)s[r+1]=t[r];s[0]=0}return n}r*=256}return new ArrayBuffer(0)}(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,i=0){let n=this.fromBER(e,t,r);if(-1===n)return n;let s=this.valueHexView;return 0===s[0]&&(128&s[1])!=0?this.valueHexView=s.subarray(1):0!==i&&s.length<i&&(i-s.length>1&&(i=s.length+1),this.valueHexView=s.subarray(i-s.length)),n}toDER(e=!1){let t=this.valueHexView;switch(!0){case(128&t[0])!=0:{let e=new Uint8Array(this.valueHexView.length+1);e[0]=0,e.set(t,1),this.valueHexView=e}break;case 0===t[0]&&(128&t[1])==0:this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,r){let i=super.fromBER(e,t,r);return -1===i||this.setValueHex(),i}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let e,t=8*this.valueHexView.length-1,r=new Uint8Array(8*this.valueHexView.length/3),i=0,n=this.valueHexView,s="",o=!1;for(let o=n.byteLength-1;o>=0;o--){e=n[o];for(let n=0;n<8;n++)(1&e)==1&&(i===t?(r=function(e,t){let r,i=0,n=new Uint8Array(e),s=new Uint8Array(t),o=n.slice(0),a=o.length-1,l=s.slice(0),u=l.length-1,c=0;for(let e=u;e>=0;e--,c++)!0==(r=o[a-c]-l[u-c]-i)<0?(i=1,o[a-c]=r+10):(i=0,o[a-c]=r);if(i>0)for(let e=a-u+1;e>=0;e--,c++)if((r=o[a-c]-i)<0)i=1,o[a-c]=r+10;else{i=0,o[a-c]=r;break}return o.slice()}(eV(i),r),s="-"):r=function(e,t){let r=new Uint8Array([0]),i=new Uint8Array(e),n=new Uint8Array(t),s=i.slice(0),o=s.length-1,a=n.slice(0),l=a.length-1,u=0,c=l<o?o:l,d=0;for(let e=c;e>=0;e--,d++)u=!0==d<a.length?s[o-d]+a[l-d]+r[0]:s[o-d]+r[0],r[0]=u/10,!0==d>=s.length?s=X(new Uint8Array([u%10]),s):s[o-d]=u%10;return r[0]>0&&(s=X(r,s)),s}(r,eV(i))),i++,e>>=1}for(let e=0;e<r.length;e++)r[e]&&(o=!0),o&&(s+=ea.charAt(r[e]));return!1===o&&(s+=ea.charAt(0)),s}}eR.NAME="IntegerValueBlock",Object.defineProperty(eR.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class eD extends ex{constructor(e={}){super(e,eR),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return er(),BigInt(this.valueBlock.toString())}static fromBigInt(e){er();let t=BigInt(e),r=new es,i=t.toString(16).replace(/^-/,""),s=new Uint8Array(Y.U$.FromHex(i));if(t<0){let e=new Uint8Array(s.length+(128&s[0]?1:0));e[0]|=128;let i=BigInt(`0x${Y.U$.ToHex(e)}`)+t,n=Y._H.toUint8Array(Y.U$.FromHex(i.toString(16)));n[0]|=128,r.write(n)}else 128&s[0]&&r.write(new Uint8Array([0])),r.write(s);return new n({valueHex:r.final()})}convertToDER(){let e=new n({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new n({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}ew.Integer=n=eD,eD.NAME="INTEGER";class e$ extends eD{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}ew.Enumerated=e$,e$.NAME="ENUMERATED";class eH extends ey(em){constructor({valueDec:e=-1,isFirstSid:t=!1,...r}={}){super(r),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,r){if(!r)return t;let i=Y._H.toUint8Array(e);if(!en(this,i,t,r))return -1;let n=i.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r&&(this.valueHexView[e]=127&n[e],this.blockLength++,(128&n[e])!=0);e++);let s=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)s[e]=this.valueHexView[e];return(this.valueHexView=s,(128&n[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=J(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){er();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;let r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++)r[e]=parseInt(t.slice(7*e,7*e+7),2)+128*(e+1<r.length);this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}let t=Q(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",ec;let r=new Uint8Array(t.byteLength);if(!e){let e=new Uint8Array(t),i=t.byteLength-1;for(let t=0;t<i;t++)r[t]=128|e[t];r[i]=e[i]}return r}toString(){let e="";if(this.isHexOnly)e=Y.U$.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}eH.NAME="sidBlock";class eM extends em{constructor({value:e="",...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let i=t;for(;r>0;){let t=new eH;if(-1===(i=t.fromBER(e,i,r))){this.blockLength=0,this.error=t.error;break}0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return i}toBER(e){let t=[];for(let r=0;r<this.value.length;r++){let i=this.value[r].toBER(e);if(0===i.byteLength)return this.error=this.value[r].error,ec;t.push(i)}return ei(t)}fromString(e){this.value=[];let t=0,r=0,i="",n=!1;do if(i=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1,n){let e=this.value[0],t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:this.value=[];return}let r=parseInt(i,10);if(isNaN(r))return;e.valueDec=r+t,n=!1}else{let e=new eH;if(i>Number.MAX_SAFE_INTEGER)er(),e.valueBigInt=BigInt(i);else if(e.valueDec=parseInt(i,10),isNaN(e.valueDec))return;this.value.length||(e.isFirstSid=!0,n=!0),this.value.push(e)}while(-1!==r)}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let i=this.value[r].toString();0!==r&&(e=`${e}.`),t?(i=`{${i}}`,this.value[r].isFirstSid?e=`2.{${i} - 80}`:e+=i):e+=i}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}eM.NAME="ObjectIdentifierValueBlock";class eF extends ex{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,eM),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}ew.ObjectIdentifier=eF,eF.NAME="OBJECT IDENTIFIER";class ez extends ey(eg){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,r){if(0===r)return t;let i=Y._H.toUint8Array(e);if(!en(this,i,t,r))return -1;let n=i.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r&&(this.valueHexView[e]=127&n[e],this.blockLength++,(128&n[e])!=0);e++);let s=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)s[e]=this.valueHexView[e];return(this.valueHexView=s,(128&n[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=J(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}let t=Q(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",ec;let r=new Uint8Array(t.byteLength);if(!e){let e=new Uint8Array(t),i=t.byteLength-1;for(let t=0;t<i;t++)r[t]=128|e[t];r[i]=e[i]}return r.buffer}toString(){return this.isHexOnly?Y.U$.ToHex(this.valueHexView):this.valueDec.toString()}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}ez.NAME="relativeSidBlock";class eW extends em{constructor({value:e="",...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let i=t;for(;r>0;){let t=new ez;if(-1===(i=t.fromBER(e,i,r))){this.blockLength=0,this.error=t.error;break}this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return i}toBER(e,t){let r=[];for(let t=0;t<this.value.length;t++){let i=this.value[t].toBER(e);if(0===i.byteLength)return this.error=this.value[t].error,ec;r.push(i)}return ei(r)}fromString(e){this.value=[];let t=0,r=0,i="";do{i=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1;let n=new ez;if(n.valueDec=parseInt(i,10),isNaN(n.valueDec))break;this.value.push(n)}while(-1!==r);return!0}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let i=this.value[r].toString();0!==r&&(e=`${e}.`),t?e+=i=`{${i}}`:e+=i}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}eW.NAME="RelativeObjectIdentifierValueBlock";class eq extends ex{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,eW),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}ew.RelativeObjectIdentifier=eq,eq.NAME="RelativeObjectIdentifier";class eK extends eC{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}ew.Sequence=eK,eK.NAME="SEQUENCE";class eG extends eC{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}ew.Set=eG,eG.NAME="SET";class eY extends ey(em){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=""}toJSON(){return{...super.toJSON(),value:this.value}}}eY.NAME="StringValueBlock";class eJ extends eY{}eJ.NAME="SimpleStringValueBlock";class eQ extends ek{constructor({...e}={}){super(e,eJ)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,Y._H.toUint8Array(e))}fromString(e){let t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);this.valueBlock.value=e}}eQ.NAME="SIMPLE STRING";class eX extends eQ{fromBuffer(e){this.valueBlock.valueHexView=Y._H.toUint8Array(e);try{this.valueBlock.value=Y.U$.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=Y.U$.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Y.U$.FromUtf8String(e)),this.valueBlock.value=e}}eX.NAME="Utf8StringValueBlock";class e0 extends eX{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}ew.Utf8String=e0,e0.NAME="UTF8String";class e1 extends eQ{fromBuffer(e){this.valueBlock.value=Y.U$.ToUtf16String(e),this.valueBlock.valueHexView=Y._H.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Y.U$.FromUtf16String(e))}}e1.NAME="BmpStringValueBlock";class e2 extends e1{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}ew.BmpString=e2,e2.NAME="BMPString";class e6 extends eQ{fromBuffer(e){let t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),r=new Uint8Array(t);for(let e=0;e<r.length;e+=4)r[e]=r[e+3],r[e+1]=r[e+2],r[e+2]=0,r[e+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){let t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let i=0;i<t;i++){let t=new Uint8Array(Q(e.charCodeAt(i),8));if(t.length>4)continue;let n=4-t.length;for(let e=t.length-1;e>=0;e--)r[4*i+e+n]=t[e]}this.valueBlock.value=e}}e6.NAME="UniversalStringValueBlock";class e8 extends e6{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}ew.UniversalString=e8,e8.NAME="UniversalString";class e4 extends eQ{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}ew.NumericString=e4,e4.NAME="NumericString";class e3 extends eQ{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}ew.PrintableString=e3,e3.NAME="PrintableString";class e5 extends eQ{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}ew.TeletexString=e5,e5.NAME="TeletexString";class e9 extends eQ{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}ew.VideotexString=e9,e9.NAME="VideotexString";class e7 extends eQ{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}ew.IA5String=e7,e7.NAME="IA5String";class te extends eQ{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}ew.GraphicString=te,te.NAME="GraphicString";class tt extends eQ{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}ew.VisibleString=tt,tt.NAME="VisibleString";class tr extends eQ{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}ew.GeneralString=tr,tr.NAME="GeneralString";class ti extends eQ{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}ew.CharacterString=ti,ti.NAME="CharacterString";class tn extends tt{constructor({value:e,valueDate:t,...r}={}){if(super(r),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,Y._H.toUint8Array(e)))}toBuffer(){let e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){let t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(null===t){this.error="Wrong input string for conversion";return}let r=parseInt(t[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(e="iso"){if("iso"===e){let e=Array(7);return e[0]=et(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=et(this.month,2),e[2]=et(this.day,2),e[3]=et(this.hour,2),e[4]=et(this.minute,2),e[5]=et(this.second,2),e[6]="Z",e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}ew.UTCTime=tn,tn.NAME="UTCTime";class ts extends tn{constructor(e={}){super(e),null!=this.millisecond||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,r=!1,i="",n="",s=0,o=0,a=0;if("Z"===e[e.length-1])i=e.substring(0,e.length-1),r=!0;else{if(isNaN(new Number(e[e.length-1]).valueOf()))throw Error("Wrong input string for conversion");i=e}if(r){if(-1!==i.indexOf("+")||-1!==i.indexOf("-"))throw Error("Wrong input string for conversion")}else{let e=1,t=i.indexOf("+"),r="";if(-1===t&&(t=i.indexOf("-"),e=-1),-1!==t){if(r=i.substring(t+1),i=i.substring(0,t),2!==r.length&&4!==r.length)throw Error("Wrong input string for conversion");let n=parseInt(r.substring(0,2),10);if(isNaN(n.valueOf()))throw Error("Wrong input string for conversion");if(o=e*n,4===r.length){if(isNaN((n=parseInt(r.substring(2,4),10)).valueOf()))throw Error("Wrong input string for conversion");a=e*n}}}let l=i.indexOf(".");if(-1===l&&(l=i.indexOf(",")),-1!==l){let e=new Number(`0${i.substring(l)}`);if(isNaN(e.valueOf()))throw Error("Wrong input string for conversion");s=e.valueOf(),n=i.substring(0,l)}else n=i;switch(!0){case 8===n.length:if(t=/(\d{4})(\d{2})(\d{2})/ig,-1!==l)throw Error("Wrong input string for conversion");break;case 10===n.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,-1!==l){let e=60*s;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===n.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==l){let e=60*s;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===n.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==l){let e=1e3*s;this.millisecond=Math.floor(e)}break;default:throw Error("Wrong input string for conversion")}let u=t.exec(n);if(null===u)throw Error("Wrong input string for conversion");for(let e=1;e<u.length;e++)switch(e){case 1:this.year=parseInt(u[e],10);break;case 2:this.month=parseInt(u[e],10);break;case 3:this.day=parseInt(u[e],10);break;case 4:this.hour=parseInt(u[e],10)+o;break;case 5:this.minute=parseInt(u[e],10)+a;break;case 6:this.second=parseInt(u[e],10);break;default:throw Error("Wrong input string for conversion")}if(!1===r){let e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if("iso"===e){let e=[];return e.push(et(this.year,4)),e.push(et(this.month,2)),e.push(et(this.day,2)),e.push(et(this.hour,2)),e.push(et(this.minute,2)),e.push(et(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(et(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}ew.GeneralizedTime=ts,ts.NAME="GeneralizedTime";class to extends e0{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}ew.DATE=to,to.NAME="DATE";class ta extends e0{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}ew.TimeOfDay=ta,ta.NAME="TimeOfDay";class tl extends e0{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}ew.DateTime=tl,tl.NAME="DateTime";class tu extends e0{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}ew.Duration=tu,tu.NAME="Duration";class tc extends e0{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}ew.TIME=tc,tc.NAME="TIME";class td{constructor({name:e="",optional:t=!1}={}){this.name=e,this.optional=t}}class th extends td{constructor({value:e=[],...t}={}){super(t),this.value=e}}class tp extends td{constructor({value:e=new td,local:t=!1,...r}={}){super(r),this.value=e,this.local=t}}class tf{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=Y._H.toUint8Array(e)}constructor({data:e=ed}={}){this.dataView=Y._H.toUint8Array(e)}fromBER(e,t,r){let i=t+r;return this.dataView=Y._H.toUint8Array(e).subarray(t,i),i}toBER(e){return this.dataView.slice().buffer}}function ty(e,t,r){if(r instanceof th){for(let i of r.value)if(ty(e,t,i).verified)return{verified:!0,result:e};{let e={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty(el)&&(e.name=r.name),e}}if(r instanceof td)return r.hasOwnProperty(el)&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1||"idBlock"in r==!1||"fromBER"in r.idBlock==!1||"toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let i=r.idBlock.toBER(!1);if(0===i.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(i,0,i.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!("isHexOnly"in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly){if(eu in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let i=r.idBlock.valueHexView,n=t.idBlock.valueHexView;if(i.length!==n.length)return{verified:!1,result:e};for(let t=0;t<i.length;t++)if(i[t]!==n[1])return{verified:!1,result:e}}if(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(e[r.name]=t)),r instanceof ew.Constructed){let i=0,n={verified:!1,result:{error:"Unknown error"}},s=r.valueBlock.value.length;if(s>0&&r.valueBlock.value[0]instanceof tp&&(s=t.valueBlock.value.length),0===s)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){let t=!0;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||!1);return t?{verified:!0,result:e}:(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let o=0;o<s;o++)if(o-i>=t.valueBlock.value.length){if(!1===r.valueBlock.value[o].optional){let t={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}}else if(r.valueBlock.value[0]instanceof tp){if(!1===(n=ty(e,t.valueBlock.value[o],r.valueBlock.value[0].value)).verified)if(!r.valueBlock.value[0].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),n;else i++;if(el in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let i={};void 0===(i="local"in r.valueBlock.value[0]&&r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(i[r.valueBlock.value[0].name]=[]),i[r.valueBlock.value[0].name].push(t.valueBlock.value[o])}}else if(!1===(n=ty(e,t.valueBlock.value[o-i],r.valueBlock.value[o])).verified)if(!r.valueBlock.value[o].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),n;else i++;if(!1===n.verified){let t={verified:!1,result:e};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}return{verified:!0,result:e}}if(r.primitiveSchema&&eu in t.valueBlock){let i=eB(t.valueBlock.valueHexView);if(-1===i.offset){let t={verified:!1,result:i.result};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}return ty(e,i.result,r.primitiveSchema)}return{verified:!0,result:e}}function tg(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};let r=eB(Y._H.toUint8Array(e));return -1===r.offset?{verified:!1,result:r.result}:ty(r.result,r.result,t)}!function(e){e[e.Sequence=0]="Sequence",e[e.Set=1]="Set",e[e.Choice=2]="Choice"}(s||(s={})),function(e){e[e.Any=1]="Any",e[e.Boolean=2]="Boolean",e[e.OctetString=3]="OctetString",e[e.BitString=4]="BitString",e[e.Integer=5]="Integer",e[e.Enumerated=6]="Enumerated",e[e.ObjectIdentifier=7]="ObjectIdentifier",e[e.Utf8String=8]="Utf8String",e[e.BmpString=9]="BmpString",e[e.UniversalString=10]="UniversalString",e[e.NumericString=11]="NumericString",e[e.PrintableString=12]="PrintableString",e[e.TeletexString=13]="TeletexString",e[e.VideotexString=14]="VideotexString",e[e.IA5String=15]="IA5String",e[e.GraphicString=16]="GraphicString",e[e.VisibleString=17]="VisibleString",e[e.GeneralString=18]="GeneralString",e[e.CharacterString=19]="CharacterString",e[e.UTCTime=20]="UTCTime",e[e.GeneralizedTime=21]="GeneralizedTime",e[e.DATE=22]="DATE",e[e.TimeOfDay=23]="TimeOfDay",e[e.DateTime=24]="DateTime",e[e.Duration=25]="Duration",e[e.TIME=26]="TIME",e[e.Null=27]="Null"}(o||(o={}));class tm{constructor(e,t=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),e)if("number"==typeof e)this.fromNumber(e);else if(Y._H.isBufferSource(e))this.unusedBits=t,this.value=Y._H.toArrayBuffer(e);else throw TypeError("Unsupported type of 'params' argument for BitString")}fromASN(e){if(!(e instanceof ej))throw TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=e.valueBlock.unusedBits,this.value=e.valueBlock.valueHex,this}toASN(){return new ej({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new ej({name:e})}toNumber(){let e="";for(let t of new Uint8Array(this.value))e+=t.toString(2).padStart(8,"0");return e=e.split("").reverse().join(""),this.unusedBits&&(e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(e,2)}fromNumber(e){let t=e.toString(2),r=t.length+7>>3;this.unusedBits=(r<<3)-t.length;let i=new Uint8Array(r);t=t.padStart(r<<3,"0").split("").reverse().join("");let n=0;for(;n<r;)i[n]=parseInt(t.slice(n<<3,(n<<3)+8),2),n++;this.value=i.buffer}}class tv{get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}constructor(e){"number"==typeof e?this.buffer=new ArrayBuffer(e):Y._H.isBufferSource(e)?this.buffer=Y._H.toArrayBuffer(e):Array.isArray(e)?this.buffer=new Uint8Array(e):this.buffer=new ArrayBuffer(0)}fromASN(e){if(!(e instanceof eP))throw TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=e.valueBlock.valueHex,this}toASN(){return new eP({valueHex:this.buffer})}toSchema(e){return new eP({name:e})}}let tb={fromASN:e=>e instanceof eN?null:e.valueBeforeDecodeView,toASN:e=>{if(null===e)return new eN;let t=eI(e);if(t.result.error)throw Error(t.result.error);return t.result}},tw={fromASN:e=>e.valueBlock.valueHexView.byteLength>=4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new eD({value:+e})},tx={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new e$({value:e})},tk={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new eD({valueHex:e})},tA={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new ej({valueHex:e})},tS={fromASN:e=>e.valueBlock.toString(),toASN:e=>new eF({value:e})},tB={fromASN:e=>e.valueBlock.value,toASN:e=>new eU({value:e})},tI={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new eP({valueHex:e})};function t_(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}let tC=t_(e0),tE=t_(e2),tT=t_(e8),tN=t_(e4),tO=t_(e3),tU=t_(e5),tZ=t_(e9),tP=t_(e7),tL=t_(te),tj=t_(tt),tV=t_(tr),tR=t_(ti),tD={fromASN:e=>e.toDate(),toASN:e=>new tn({valueDate:e})},t$={fromASN:e=>e.toDate(),toASN:e=>new ts({valueDate:e})},tH={fromASN:()=>null,toASN:()=>new eN};function tM(e){switch(e){case o.Any:return tb;case o.BitString:return tA;case o.BmpString:return tE;case o.Boolean:return tB;case o.CharacterString:return tR;case o.Enumerated:return tx;case o.GeneralString:return tV;case o.GeneralizedTime:return t$;case o.GraphicString:return tL;case o.IA5String:return tP;case o.Integer:return tw;case o.Null:return tH;case o.NumericString:return tN;case o.ObjectIdentifier:return tS;case o.OctetString:return tI;case o.PrintableString:return tO;case o.TeletexString:return tU;case o.UTCTime:return tD;case o.UniversalString:return tT;case o.Utf8String:return tC;case o.VideotexString:return tZ;case o.VisibleString:return tj;default:return null}}function tF(e){return"function"==typeof e&&e.prototype?!!e.prototype.toASN&&!!e.prototype.fromASN||tF(e.prototype):!!(e&&"object"==typeof e&&"toASN"in e&&"fromASN"in e)}class tz{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,t=!1){let r=this.items.get(e);if(!r)throw Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(t&&!r.schema)throw Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return r}cache(e){let t=this.get(e);t.schema||(t.schema=this.create(e,!0))}createDefault(e){let t={type:s.Sequence,items:{}},r=this.findParentSchema(e);return r&&(Object.assign(t,r),t.items=Object.assign({},t.items,r.items)),t}create(e,t){let r=this.items.get(e)||this.createDefault(e),i=[];for(let e in r.items){let n,a=r.items[e],l=t?e:"";if("number"==typeof a.type){let e=o[a.type],t=D[e];if(!t)throw Error(`Cannot get ASN1 class by name '${e}'`);n=new t({name:l})}else tF(a.type)?n=new a.type().toSchema(l):a.optional?this.get(a.type).type===s.Choice?n=new td({name:l}):(n=this.create(a.type,!1)).name=l:n=new td({name:l});let u=!!a.optional||void 0!==a.defaultValue;if(a.repeated&&(n.name="",n=new("set"===a.repeated?eG:eK)({name:"",value:[new tp({name:l,value:n})]})),null!==a.context&&void 0!==a.context)if(a.implicit)if("number"==typeof a.type||tF(a.type)){let e=a.repeated?eC:eS;i.push(new e({name:l,optional:u,idBlock:{tagClass:3,tagNumber:a.context}}))}else{this.cache(a.type);let e=!!a.repeated,t=e?n:this.get(a.type,!0).schema;t="valueBlock"in t?t.valueBlock.value:t.value,i.push(new eC({name:e?"":l,optional:u,idBlock:{tagClass:3,tagNumber:a.context},value:t}))}else i.push(new eC({optional:u,idBlock:{tagClass:3,tagNumber:a.context},value:[n]}));else n.optional=u,i.push(n)}switch(r.type){case s.Sequence:return new eK({value:i,name:""});case s.Set:return new eG({value:i,name:""});case s.Choice:return new th({value:i,name:""});default:throw Error("Unsupported ASN1 type in use")}}set(e,t){return this.items.set(e,t),this}findParentSchema(e){let t=Object.getPrototypeOf(e);return t?this.items.get(t)||this.findParentSchema(t):null}}let tW=new tz,tq=e=>t=>{let r;tW.has(t)?r=tW.get(t):(r=tW.createDefault(t),tW.set(t,r)),Object.assign(r,e)},tK=e=>(t,r)=>{let i;tW.has(t.constructor)?i=tW.get(t.constructor):(i=tW.createDefault(t.constructor),tW.set(t.constructor,i));let n=Object.assign({},e);if("number"==typeof n.type&&!n.converter){let i=tM(e.type);if(!i)throw Error(`Cannot get default converter for property '${r}' of ${t.constructor.name}`);n.converter=i}n.raw=e.raw,i.items[r]=n};class tG extends Error{constructor(){super(...arguments),this.schemas=[]}}class tY{static parse(e,t){let r=eI(e);if(r.result.error)throw Error(r.result.error);return this.fromASN(r.result,t)}static fromASN(e,t){try{if(tF(t))return new t().fromASN(e);let r=tW.get(t);tW.cache(t);let i=r.schema,n=this.handleChoiceTypes(e,r,t,i);if(null==n?void 0:n.result)return n.result;(null==n?void 0:n.targetSchema)&&(i=n.targetSchema);let s=this.handleSequenceTypes(e,r,t,i);if(s&&"isManualMapping"in s)return s.result;let o=new t;if(function e(t){var r;if(t){let i=Object.getPrototypeOf(t);return(null==(r=null==i?void 0:i.prototype)?void 0:r.constructor)===Array||e(i)}return!1}(t))return this.handleArrayTypes(e,r,t);return this.processSchemaItems(r,s,o),o}catch(e){throw e instanceof tG&&e.schemas.push(t.name),e}}static handleChoiceTypes(e,t,r,i){if(e.constructor===eC&&t.type===s.Choice&&3===e.idBlock.tagClass)for(let i in t.items){let n=t.items[i];if(n.context===e.idBlock.tagNumber&&n.implicit&&"function"==typeof n.type&&tW.has(n.type)){let t=tW.get(n.type);if(t&&t.type===s.Sequence){let t=new eK;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in t.valueBlock){t.valueBlock.value=e.valueBlock.value;let s=this.fromASN(t,n.type),o=new r;return o[i]=s,{result:o}}}}}else if(e.constructor===eC&&t.type!==s.Choice){let r=new eC({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:t.schema.valueBlock.value});for(let r in t.items)delete e[r];return{targetSchema:r}}return null}static handleSequenceTypes(e,t,r,i){if(t.type===s.Sequence){if(Object.keys(t.items).filter(e=>{let r=t.items[e];return r.optional&&"function"==typeof r.type&&tW.has(r.type)&&tW.get(r.type).type===s.Choice}).length>0&&"value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"CertReqMsg"===r.name)return this.handleManualMapping(e,t,r);let n=ty({},e,i);if(!n.verified)throw new tG(`Data does not match to ${r.name} ASN1 schema.${n.result.error?` ${n.result.error}`:""}`);return n}{let t=ty({},e,i);if(!t.verified)throw new tG(`Data does not match to ${r.name} ASN1 schema.${t.result.error?` ${t.result.error}`:""}`);return t}}static handleManualMapping(e,t,r){let i=new r,n=e.valueBlock.value,s=Object.keys(t.items),o=0;for(let e=0;e<s.length;e++){let r=s[e],a=t.items[r];if(o>=n.length)break;if(a.repeated){i[r]=this.processRepeatedField(n,o,a);break}if("number"==typeof a.type)i[r]=this.processPrimitiveField(n[o],a),o++;else if(this.isOptionalChoiceField(a)){let e=this.processOptionalChoiceField(n[o],a);e.processed&&(i[r]=e.value,o++)}else i[r]=this.fromASN(n[o],a.type),o++}return{result:i,verified:!0,isManualMapping:!0}}static processRepeatedField(e,t,r){let i=e.slice(t);if(1===i.length&&"Sequence"===i[0].constructor.name){let e=i[0];e.valueBlock&&e.valueBlock.value&&Array.isArray(e.valueBlock.value)&&(i=e.valueBlock.value)}if("number"!=typeof r.type)return i.filter(e=>e&&e.valueBlock).map(e=>{try{return this.fromASN(e,r.type)}catch{return}}).filter(e=>void 0!==e);{let e=tM(r.type);if(!e)throw Error(`No converter for ASN.1 type ${r.type}`);return i.filter(e=>e&&e.valueBlock).map(t=>{try{return e.fromASN(t)}catch{return}}).filter(e=>void 0!==e)}}static processPrimitiveField(e,t){let r=tM(t.type);if(!r)throw Error(`No converter for ASN.1 type ${t.type}`);return r.fromASN(e)}static isOptionalChoiceField(e){return e.optional&&"function"==typeof e.type&&tW.has(e.type)&&tW.get(e.type).type===s.Choice}static processOptionalChoiceField(e,t){try{let r=this.fromASN(e,t.type);return{processed:!0,value:r}}catch(e){if(e instanceof tG&&/Wrong values for Choice type/.test(e.message))return{processed:!1};throw e}}static handleArrayTypes(e,t,r){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let i=t.itemType;if("number"!=typeof i)return r.from(e.valueBlock.value,e=>this.fromASN(e,i));{let t=tM(i);if(!t)throw Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);return r.from(e.valueBlock.value,e=>t.fromASN(e))}}static processSchemaItems(e,t,r){for(let i in e.items){let n,s=t.result[i];if(!s)continue;let o=e.items[i],a=o.type;(n="number"==typeof a||tF(a)?this.processPrimitiveSchemaItem(s,o,a):this.processComplexSchemaItem(s,o,a))&&"object"==typeof n&&"value"in n&&"raw"in n?(r[i]=n.value,r[`${i}Raw`]=n.raw):r[i]=n}}static processPrimitiveSchemaItem(e,t,r){var i;let n=null!=(i=t.converter)?i:tF(r)?new r:null;if(!n)throw Error("Converter is empty");return t.repeated?this.processRepeatedPrimitiveItem(e,t,n):this.processSinglePrimitiveItem(e,t,r,n)}static processRepeatedPrimitiveItem(e,t,r){if(!t.implicit)return Array.from(e,e=>r.fromASN(e));{let i=new("sequence"===t.repeated?eK:eG);i.valueBlock=e.valueBlock;let n=eI(i.toBER(!1));if(-1===n.offset)throw Error(`Cannot parse the child item. ${n.result.error}`);if(!("value"in n.result.valueBlock&&Array.isArray(n.result.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");return Array.from(n.result.valueBlock.value,e=>r.fromASN(e))}}static processSinglePrimitiveItem(e,t,r,i){let n=e;if(t.implicit){let e;if(tF(r))e=new r().toSchema("");else{let t=o[r],i=D[t];if(!i)throw Error(`Cannot get '${t}' class from asn1js module`);e=new i}e.valueBlock=n.valueBlock,n=eI(e.toBER(!1)).result}return i.fromASN(n)}static processComplexSchemaItem(e,t,r){if(t.repeated){if(!Array.isArray(e))throw Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");return Array.from(e,e=>this.fromASN(e,r))}{let i=this.handleImplicitTagging(e,t,r);if(this.isOptionalChoiceField(t))try{return this.fromASN(i,r)}catch(e){if(e instanceof tG&&/Wrong values for Choice type/.test(e.message))return;throw e}{let n=this.fromASN(i,r);return t.raw?{value:n,raw:e.valueBeforeDecodeView}:n}}}static handleImplicitTagging(e,t,r){if(t.implicit&&"number"==typeof t.context){let t=tW.get(r);if(t.type===s.Sequence){let t=new eK;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in t.valueBlock)return t.valueBlock.value=e.valueBlock.value,t}else if(t.type===s.Set){let t=new eG;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in t.valueBlock)return t.valueBlock.value=e.valueBlock.value,t}}return e}}class tJ{static serialize(e){return e instanceof ex?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){let t;if(e&&"object"==typeof e&&tF(e))return e.toASN();if(!(e&&"object"==typeof e))throw TypeError("Parameter 1 should be type of Object.");let r=e.constructor,i=tW.get(r);tW.cache(r);let n=[];if(i.itemType){if(!Array.isArray(e))throw TypeError("Parameter 1 should be type of Array.");if("number"==typeof i.itemType){let t=tM(i.itemType);if(!t)throw Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);n=e.map(e=>t.toASN(e))}else n=e.map(e=>this.toAsnItem({type:i.itemType},"[]",r,e))}else for(let t in i.items){let s=i.items[t],o=e[t];if(void 0===o||s.defaultValue===o||"object"==typeof s.defaultValue&&"object"==typeof o&&function(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),i=new Uint8Array(t);for(let t=0;t<e.byteLength;t++)if(r[t]!==i[t])return!1;return!0}(this.serialize(s.defaultValue),this.serialize(o)))continue;let a=tJ.toAsnItem(s,t,r,o);if("number"==typeof s.context)if(s.implicit)if(!s.repeated&&("number"==typeof s.type||tF(s.type))){let e={};e.valueHex=a instanceof eN?a.valueBeforeDecodeView:a.valueBlock.toBER(),n.push(new eS({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},...e}))}else n.push(new eC({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:a.valueBlock.value}));else n.push(new eC({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:[a]}));else s.repeated?n=n.concat(a):n.push(a)}switch(i.type){case s.Sequence:t=new eK({value:n});break;case s.Set:t=new eG({value:n});break;case s.Choice:if(!n[0])throw Error(`Schema '${r.name}' has wrong data. Choice cannot be empty.`);t=n[0]}return t}static toAsnItem(e,t,r,i){let n;if("number"==typeof e.type){let s=e.converter;if(!s)throw Error(`Property '${t}' doesn't have converter for type ${o[e.type]} in schema '${r.name}'`);if(e.repeated){if(!Array.isArray(i))throw TypeError("Parameter 'objProp' should be type of Array.");let t=Array.from(i,e=>s.toASN(e));n=new("sequence"===e.repeated?eK:eG)({value:t})}else n=s.toASN(i)}else if(e.repeated){if(!Array.isArray(i))throw TypeError("Parameter 'objProp' should be type of Array.");let t=Array.from(i,e=>this.toASN(e));n=new("sequence"===e.repeated?eK:eG)({value:t})}else n=this.toASN(i);return n}}class tQ extends Array{constructor(e=[]){if("number"==typeof e)super(e);else for(let t of(super(),e))this.push(t)}}class tX{static serialize(e){return tJ.serialize(e)}static parse(e,t){return tY.parse(e,t)}static toString(e){let t=eI(Y._H.isBufferSource(e)?Y._H.toArrayBuffer(e):tX.serialize(e));if(-1===t.offset)throw Error(`Cannot decode ASN.1 data. ${t.result.error}`);return t.result.toString()}}function t0(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}Object.create;Object.create,"function"==typeof SuppressedError&&SuppressedError;class t1{static isIPv4(e){return/^(\d{1,3}\.){3}\d{1,3}$/.test(e)}static parseIPv4(e){let t=e.split(".");if(4!==t.length)throw Error("Invalid IPv4 address");return t.map(e=>{let t=parseInt(e,10);if(isNaN(t)||t<0||t>255)throw Error("Invalid IPv4 address part");return t})}static parseIPv6(e){let t=this.expandIPv6(e).split(":");if(8!==t.length)throw Error("Invalid IPv6 address");return t.reduce((e,t)=>{let r=parseInt(t,16);if(isNaN(r)||r<0||r>65535)throw Error("Invalid IPv6 address part");return e.push(r>>8&255),e.push(255&r),e},[])}static expandIPv6(e){if(!e.includes("::"))return e;let t=e.split("::");if(t.length>2)throw Error("Invalid IPv6 address");let r=t[0]?t[0].split(":"):[],i=t[1]?t[1].split(":"):[],n=8-(r.length+i.length);if(n<0)throw Error("Invalid IPv6 address");return[...r,...Array(n).fill("0"),...i].join(":")}static formatIPv6(e){let t=[];for(let r=0;r<16;r+=2)t.push((e[r]<<8|e[r+1]).toString(16));return this.compressIPv6(t.join(":"))}static compressIPv6(e){let t=e.split(":"),r=-1,i=0,n=-1,s=0;for(let e=0;e<t.length;e++)"0"===t[e]?(-1===n&&(n=e),s++):(s>i&&(r=n,i=s),n=-1,s=0);if(s>i&&(r=n,i=s),i>1){let e=t.slice(0,r).join(":"),n=t.slice(r+i).join(":");return`${e}::${n}`}return e}static parseCIDR(e){let[t,r]=e.split("/"),i=parseInt(r,10);if(this.isIPv4(t)){if(i<0||i>32)throw Error("Invalid IPv4 prefix length");return[this.parseIPv4(t),i]}if(i<0||i>128)throw Error("Invalid IPv6 prefix length");return[this.parseIPv6(t),i]}static decodeIP(e){if(64===e.length&&0===parseInt(e,16))return"::/0";if(16!==e.length)return e;let t=parseInt(e.slice(8),16).toString(2).split("").reduce((e,t)=>e+ +t,0),r=e.slice(0,8).replace(/(.{2})/g,e=>`${parseInt(e,16)}.`);return r=r.slice(0,-1),`${r}/${t}`}static toString(e){let t=new Uint8Array(e);if(4===t.length)return Array.from(t).join(".");if(16===t.length)return this.formatIPv6(t);if(8===t.length||32===t.length){let e=t.length/2,r=t.slice(0,e),i=t.slice(e);if(t.every(e=>0===e))return 8===t.length?"0.0.0.0/0":"::/0";let n=i.reduce((e,t)=>e+(t.toString(2).match(/1/g)||[]).length,0);if(8===t.length){let e=Array.from(r).join(".");return`${e}/${n}`}{let e=this.formatIPv6(r);return`${e}/${n}`}}return this.decodeIP(Y.U$.ToHex(e))}static fromString(e){if(e.includes("/")){let[t,r]=this.parseCIDR(e),i=new Uint8Array(t.length),n=r;for(let e=0;e<i.length;e++)n>=8?(i[e]=255,n-=8):n>0&&(i[e]=255<<8-n,n=0);let s=new Uint8Array(2*t.length);return s.set(t,0),s.set(i,t.length),s.buffer}return new Uint8Array(this.isIPv4(e)?this.parseIPv4(e):this.parseIPv6(e)).buffer}}let t2=class{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};t0([tK({type:o.TeletexString})],t2.prototype,"teletexString",void 0),t0([tK({type:o.PrintableString})],t2.prototype,"printableString",void 0),t0([tK({type:o.UniversalString})],t2.prototype,"universalString",void 0),t0([tK({type:o.Utf8String})],t2.prototype,"utf8String",void 0),t0([tK({type:o.BmpString})],t2.prototype,"bmpString",void 0),t2=t0([tq({type:s.Choice})],t2);let t6=class extends t2{constructor(e={}){super(e),Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?Y.U$.ToHex(this.anyValue):super.toString())}};t0([tK({type:o.IA5String})],t6.prototype,"ia5String",void 0),t0([tK({type:o.Any})],t6.prototype,"anyValue",void 0),t6=t0([tq({type:s.Choice})],t6);class t8{constructor(e={}){this.type="",this.value=new t6,Object.assign(this,e)}}t0([tK({type:o.ObjectIdentifier})],t8.prototype,"type",void 0),t0([tK({type:t6})],t8.prototype,"value",void 0);let t4=a=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,a.prototype)}};t4=a=t0([tq({type:s.Set,itemType:t8})],t4);let t3=l=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,l.prototype)}};t3=l=t0([tq({type:s.Sequence,itemType:t4})],t3);let t5=u=class extends t3{constructor(e){super(e),Object.setPrototypeOf(this,u.prototype)}};t5=u=t0([tq({type:s.Sequence})],t5);class t9{constructor(e={}){this.typeId="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}t0([tK({type:o.ObjectIdentifier})],t9.prototype,"typeId",void 0),t0([tK({type:o.Any,context:0})],t9.prototype,"value",void 0);class t7{constructor(e={}){this.partyName=new t2,Object.assign(this,e)}}t0([tK({type:t2,optional:!0,context:0,implicit:!0})],t7.prototype,"nameAssigner",void 0),t0([tK({type:t2,context:1,implicit:!0})],t7.prototype,"partyName",void 0);let re=class{constructor(e={}){Object.assign(this,e)}};t0([tK({type:t9,context:0,implicit:!0})],re.prototype,"otherName",void 0),t0([tK({type:o.IA5String,context:1,implicit:!0})],re.prototype,"rfc822Name",void 0),t0([tK({type:o.IA5String,context:2,implicit:!0})],re.prototype,"dNSName",void 0),t0([tK({type:o.Any,context:3,implicit:!0})],re.prototype,"x400Address",void 0),t0([tK({type:t5,context:4,implicit:!1})],re.prototype,"directoryName",void 0),t0([tK({type:t7,context:5})],re.prototype,"ediPartyName",void 0),t0([tK({type:o.IA5String,context:6,implicit:!0})],re.prototype,"uniformResourceIdentifier",void 0),t0([tK({type:o.OctetString,context:7,implicit:!0,converter:{fromASN:e=>t1.toString(tI.fromASN(e)),toASN:e=>tI.toASN(t1.fromString(e))}})],re.prototype,"iPAddress",void 0),t0([tK({type:o.ObjectIdentifier,context:8,implicit:!0})],re.prototype,"registeredID",void 0),re=t0([tq({type:s.Choice})],re);class rt{constructor(e={}){this.accessMethod="",this.accessLocation=new re,Object.assign(this,e)}}t0([tK({type:o.ObjectIdentifier})],rt.prototype,"accessMethod",void 0),t0([tK({type:re})],rt.prototype,"accessLocation",void 0);let rr=c=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,c.prototype)}};rr=c=t0([tq({type:s.Sequence,itemType:rt})],rr);class ri extends tv{}class rn{constructor(e={}){e&&Object.assign(this,e)}}t0([tK({type:ri,context:0,optional:!0,implicit:!0})],rn.prototype,"keyIdentifier",void 0),t0([tK({type:re,context:1,optional:!0,implicit:!0,repeated:"sequence"})],rn.prototype,"authorityCertIssuer",void 0),t0([tK({type:o.Integer,context:2,optional:!0,implicit:!0,converter:tk})],rn.prototype,"authorityCertSerialNumber",void 0);class rs{constructor(e={}){this.cA=!1,Object.assign(this,e)}}t0([tK({type:o.Boolean,defaultValue:!1})],rs.prototype,"cA",void 0),t0([tK({type:o.Integer,optional:!0})],rs.prototype,"pathLenConstraint",void 0);let ro=d=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,d.prototype)}};ro=d=t0([tq({type:s.Sequence,itemType:re})],ro);let ra=h=class extends ro{constructor(e){super(e),Object.setPrototypeOf(this,h.prototype)}};ra=h=t0([tq({type:s.Sequence})],ra);let rl=class{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};t0([tK({type:o.IA5String})],rl.prototype,"ia5String",void 0),t0([tK({type:o.VisibleString})],rl.prototype,"visibleString",void 0),t0([tK({type:o.BmpString})],rl.prototype,"bmpString",void 0),t0([tK({type:o.Utf8String})],rl.prototype,"utf8String",void 0),rl=t0([tq({type:s.Choice})],rl);class ru{constructor(e={}){this.organization=new rl,this.noticeNumbers=[],Object.assign(this,e)}}t0([tK({type:rl})],ru.prototype,"organization",void 0),t0([tK({type:o.Integer,repeated:"sequence"})],ru.prototype,"noticeNumbers",void 0);class rc{constructor(e={}){Object.assign(this,e)}}t0([tK({type:ru,optional:!0})],rc.prototype,"noticeRef",void 0),t0([tK({type:rl,optional:!0})],rc.prototype,"explicitText",void 0);let rd=class{constructor(e={}){Object.assign(this,e)}};t0([tK({type:o.IA5String})],rd.prototype,"cPSuri",void 0),t0([tK({type:rc})],rd.prototype,"userNotice",void 0),rd=t0([tq({type:s.Choice})],rd);class rh{constructor(e={}){this.policyQualifierId="",this.qualifier=new ArrayBuffer(0),Object.assign(this,e)}}t0([tK({type:o.ObjectIdentifier})],rh.prototype,"policyQualifierId",void 0),t0([tK({type:o.Any})],rh.prototype,"qualifier",void 0);class rp{constructor(e={}){this.policyIdentifier="",Object.assign(this,e)}}t0([tK({type:o.ObjectIdentifier})],rp.prototype,"policyIdentifier",void 0),t0([tK({type:rh,repeated:"sequence",optional:!0})],rp.prototype,"policyQualifiers",void 0);let rf=p=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,p.prototype)}};rf=p=t0([tq({type:s.Sequence,itemType:rp})],rf);let ry=class{constructor(e=0){this.value=e}};t0([tK({type:o.Integer})],ry.prototype,"value",void 0),ry=t0([tq({type:s.Choice})],ry);let rg=class extends ry{};rg=t0([tq({type:s.Choice})],rg),function(e){e[e.unused=1]="unused",e[e.keyCompromise=2]="keyCompromise",e[e.cACompromise=4]="cACompromise",e[e.affiliationChanged=8]="affiliationChanged",e[e.superseded=16]="superseded",e[e.cessationOfOperation=32]="cessationOfOperation",e[e.certificateHold=64]="certificateHold",e[e.privilegeWithdrawn=128]="privilegeWithdrawn",e[e.aACompromise=256]="aACompromise"}(y||(y={}));class rm extends tm{toJSON(){let e=[],t=this.toNumber();return t&y.aACompromise&&e.push("aACompromise"),t&y.affiliationChanged&&e.push("affiliationChanged"),t&y.cACompromise&&e.push("cACompromise"),t&y.certificateHold&&e.push("certificateHold"),t&y.cessationOfOperation&&e.push("cessationOfOperation"),t&y.keyCompromise&&e.push("keyCompromise"),t&y.privilegeWithdrawn&&e.push("privilegeWithdrawn"),t&y.superseded&&e.push("superseded"),t&y.unused&&e.push("unused"),e}toString(){return`[${this.toJSON().join(", ")}]`}}let rv=class{constructor(e={}){Object.assign(this,e)}};t0([tK({type:re,context:0,repeated:"sequence",implicit:!0})],rv.prototype,"fullName",void 0),t0([tK({type:t4,context:1,implicit:!0})],rv.prototype,"nameRelativeToCRLIssuer",void 0),rv=t0([tq({type:s.Choice})],rv);class rb{constructor(e={}){Object.assign(this,e)}}t0([tK({type:rv,context:0,optional:!0})],rb.prototype,"distributionPoint",void 0),t0([tK({type:rm,context:1,optional:!0,implicit:!0})],rb.prototype,"reasons",void 0),t0([tK({type:re,context:2,optional:!0,repeated:"sequence",implicit:!0})],rb.prototype,"cRLIssuer",void 0);let rw=f=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,f.prototype)}};rw=f=t0([tq({type:s.Sequence,itemType:rb})],rw);let rx=g=class extends rw{constructor(e){super(e),Object.setPrototypeOf(this,g.prototype)}};rx=g=t0([tq({type:s.Sequence,itemType:rb})],rx);class rk{constructor(e={}){this.onlyContainsUserCerts=rk.ONLY,this.onlyContainsCACerts=rk.ONLY,this.indirectCRL=rk.ONLY,this.onlyContainsAttributeCerts=rk.ONLY,Object.assign(this,e)}}rk.ONLY=!1,t0([tK({type:rv,context:0,optional:!0})],rk.prototype,"distributionPoint",void 0),t0([tK({type:o.Boolean,context:1,defaultValue:rk.ONLY,implicit:!0})],rk.prototype,"onlyContainsUserCerts",void 0),t0([tK({type:o.Boolean,context:2,defaultValue:rk.ONLY,implicit:!0})],rk.prototype,"onlyContainsCACerts",void 0),t0([tK({type:rm,context:3,optional:!0,implicit:!0})],rk.prototype,"onlySomeReasons",void 0),t0([tK({type:o.Boolean,context:4,defaultValue:rk.ONLY,implicit:!0})],rk.prototype,"indirectCRL",void 0),t0([tK({type:o.Boolean,context:5,defaultValue:rk.ONLY,implicit:!0})],rk.prototype,"onlyContainsAttributeCerts",void 0),function(e){e[e.unspecified=0]="unspecified",e[e.keyCompromise=1]="keyCompromise",e[e.cACompromise=2]="cACompromise",e[e.affiliationChanged=3]="affiliationChanged",e[e.superseded=4]="superseded",e[e.cessationOfOperation=5]="cessationOfOperation",e[e.certificateHold=6]="certificateHold",e[e.removeFromCRL=8]="removeFromCRL",e[e.privilegeWithdrawn=9]="privilegeWithdrawn",e[e.aACompromise=10]="aACompromise"}(m||(m={}));let rA=class{constructor(e=m.unspecified){this.reason=m.unspecified,this.reason=e}toJSON(){return m[this.reason]}toString(){return this.toJSON()}};t0([tK({type:o.Enumerated})],rA.prototype,"reason",void 0),rA=t0([tq({type:s.Choice})],rA);let rS=v=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,v.prototype)}};rS=v=t0([tq({type:s.Sequence,itemType:o.ObjectIdentifier})],rS);let rB=class{constructor(e=new ArrayBuffer(0)){this.value=e}};t0([tK({type:o.Integer,converter:tk})],rB.prototype,"value",void 0),rB=t0([tq({type:s.Choice})],rB);let rI=class{constructor(e){this.value=new Date,e&&(this.value=e)}};t0([tK({type:o.GeneralizedTime})],rI.prototype,"value",void 0),rI=t0([tq({type:s.Choice})],rI);let r_=b=class extends ro{constructor(e){super(e),Object.setPrototypeOf(this,b.prototype)}};r_=b=t0([tq({type:s.Sequence})],r_),function(e){e[e.digitalSignature=1]="digitalSignature",e[e.nonRepudiation=2]="nonRepudiation",e[e.keyEncipherment=4]="keyEncipherment",e[e.dataEncipherment=8]="dataEncipherment",e[e.keyAgreement=16]="keyAgreement",e[e.keyCertSign=32]="keyCertSign",e[e.cRLSign=64]="cRLSign",e[e.encipherOnly=128]="encipherOnly",e[e.decipherOnly=256]="decipherOnly"}(w||(w={}));class rC{constructor(e={}){this.base=new re,this.minimum=0,Object.assign(this,e)}}t0([tK({type:re})],rC.prototype,"base",void 0),t0([tK({type:o.Integer,context:0,defaultValue:0,implicit:!0})],rC.prototype,"minimum",void 0),t0([tK({type:o.Integer,context:1,optional:!0,implicit:!0})],rC.prototype,"maximum",void 0);let rE=x=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,x.prototype)}};rE=x=t0([tq({type:s.Sequence,itemType:rC})],rE);class rT{constructor(e={}){Object.assign(this,e)}}t0([tK({type:rE,context:0,optional:!0,implicit:!0})],rT.prototype,"permittedSubtrees",void 0),t0([tK({type:rE,context:1,optional:!0,implicit:!0})],rT.prototype,"excludedSubtrees",void 0);class rN{constructor(e={}){Object.assign(this,e)}}t0([tK({type:o.Integer,context:0,implicit:!0,optional:!0,converter:tk})],rN.prototype,"requireExplicitPolicy",void 0),t0([tK({type:o.Integer,context:1,implicit:!0,optional:!0,converter:tk})],rN.prototype,"inhibitPolicyMapping",void 0);class rO{constructor(e={}){this.issuerDomainPolicy="",this.subjectDomainPolicy="",Object.assign(this,e)}}t0([tK({type:o.ObjectIdentifier})],rO.prototype,"issuerDomainPolicy",void 0),t0([tK({type:o.ObjectIdentifier})],rO.prototype,"subjectDomainPolicy",void 0);let rU=k=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,k.prototype)}};rU=k=t0([tq({type:s.Sequence,itemType:rO})],rU);let rZ=A=class extends ro{constructor(e){super(e),Object.setPrototypeOf(this,A.prototype)}};rZ=A=t0([tq({type:s.Sequence})],rZ);class rP{constructor(e={}){this.type="",this.values=[],Object.assign(this,e)}}t0([tK({type:o.ObjectIdentifier})],rP.prototype,"type",void 0),t0([tK({type:o.Any,repeated:"set"})],rP.prototype,"values",void 0);let rL=S=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,S.prototype)}};rL=S=t0([tq({type:s.Sequence,itemType:rP})],rL);class rj{constructor(e={}){Object.assign(this,e)}}t0([tK({type:o.GeneralizedTime,context:0,implicit:!0,optional:!0})],rj.prototype,"notBefore",void 0),t0([tK({type:o.GeneralizedTime,context:1,implicit:!0,optional:!0})],rj.prototype,"notAfter",void 0),function(e){e[e.keyUpdateAllowed=1]="keyUpdateAllowed",e[e.newExtensions=2]="newExtensions",e[e.pKIXCertificate=4]="pKIXCertificate"}(B||(B={}));class rV extends tm{toJSON(){let e=[],t=this.toNumber();return t&B.pKIXCertificate&&e.push("pKIXCertificate"),t&B.newExtensions&&e.push("newExtensions"),t&B.keyUpdateAllowed&&e.push("keyUpdateAllowed"),e}toString(){return`[${this.toJSON().join(", ")}]`}}class rR{constructor(e={}){this.entrustVers="",this.entrustInfoFlags=new rV,Object.assign(this,e)}}t0([tK({type:o.GeneralString})],rR.prototype,"entrustVers",void 0),t0([tK({type:rV})],rR.prototype,"entrustInfoFlags",void 0);let rD=I=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,I.prototype)}};rD=I=t0([tq({type:s.Sequence,itemType:rt})],rD);class r${constructor(e={}){this.algorithm="",Object.assign(this,e)}isEqual(e){return e instanceof r$&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&Y.n4(e.parameters,this.parameters)||e.parameters===this.parameters)}}t0([tK({type:o.ObjectIdentifier})],r$.prototype,"algorithm",void 0),t0([tK({type:o.Any,optional:!0})],r$.prototype,"parameters",void 0);class rH{constructor(e={}){this.algorithm=new r$,this.subjectPublicKey=new ArrayBuffer(0),Object.assign(this,e)}}t0([tK({type:r$})],rH.prototype,"algorithm",void 0),t0([tK({type:o.BitString})],rH.prototype,"subjectPublicKey",void 0);let rM=class{constructor(e){if(e)if("string"==typeof e||"number"==typeof e||e instanceof Date){let t=new Date(e);t.getUTCFullYear()>2049?this.generalTime=t:this.utcTime=t}else Object.assign(this,e)}getTime(){let e=this.utcTime||this.generalTime;if(!e)throw Error("Cannot get time from CHOICE object");return e}};t0([tK({type:o.UTCTime})],rM.prototype,"utcTime",void 0),t0([tK({type:o.GeneralizedTime})],rM.prototype,"generalTime",void 0),rM=t0([tq({type:s.Choice})],rM);class rF{constructor(e){this.notBefore=new rM(new Date),this.notAfter=new rM(new Date),e&&(this.notBefore=new rM(e.notBefore),this.notAfter=new rM(e.notAfter))}}t0([tK({type:rM})],rF.prototype,"notBefore",void 0),t0([tK({type:rM})],rF.prototype,"notAfter",void 0);class rz{constructor(e={}){this.extnID="",this.critical=rz.CRITICAL,this.extnValue=new tv,Object.assign(this,e)}}rz.CRITICAL=!1,t0([tK({type:o.ObjectIdentifier})],rz.prototype,"extnID",void 0),t0([tK({type:o.Boolean,defaultValue:rz.CRITICAL})],rz.prototype,"critical",void 0),t0([tK({type:tv})],rz.prototype,"extnValue",void 0);let rW=_=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,_.prototype)}};rW=_=t0([tq({type:s.Sequence,itemType:rz})],rW),function(e){e[e.v1=0]="v1",e[e.v2=1]="v2",e[e.v3=2]="v3"}(C||(C={}));class rq{constructor(e={}){this.version=C.v1,this.serialNumber=new ArrayBuffer(0),this.signature=new r$,this.issuer=new t5,this.validity=new rF,this.subject=new t5,this.subjectPublicKeyInfo=new rH,Object.assign(this,e)}}t0([tK({type:o.Integer,context:0,defaultValue:C.v1})],rq.prototype,"version",void 0),t0([tK({type:o.Integer,converter:tk})],rq.prototype,"serialNumber",void 0),t0([tK({type:r$})],rq.prototype,"signature",void 0),t0([tK({type:t5})],rq.prototype,"issuer",void 0),t0([tK({type:rF})],rq.prototype,"validity",void 0),t0([tK({type:t5})],rq.prototype,"subject",void 0),t0([tK({type:rH})],rq.prototype,"subjectPublicKeyInfo",void 0),t0([tK({type:o.BitString,context:1,implicit:!0,optional:!0})],rq.prototype,"issuerUniqueID",void 0),t0([tK({type:o.BitString,context:2,implicit:!0,optional:!0})],rq.prototype,"subjectUniqueID",void 0),t0([tK({type:rW,context:3,optional:!0})],rq.prototype,"extensions",void 0);class rK{constructor(e={}){this.tbsCertificate=new rq,this.signatureAlgorithm=new r$,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}t0([tK({type:rq,raw:!0})],rK.prototype,"tbsCertificate",void 0),t0([tK({type:r$})],rK.prototype,"signatureAlgorithm",void 0),t0([tK({type:o.BitString})],rK.prototype,"signatureValue",void 0);class rG{constructor(e={}){this.userCertificate=new ArrayBuffer(0),this.revocationDate=new rM,Object.assign(this,e)}}t0([tK({type:o.Integer,converter:tk})],rG.prototype,"userCertificate",void 0),t0([tK({type:rM})],rG.prototype,"revocationDate",void 0),t0([tK({type:rz,optional:!0,repeated:"sequence"})],rG.prototype,"crlEntryExtensions",void 0);class rY{constructor(e={}){this.signature=new r$,this.issuer=new t5,this.thisUpdate=new rM,Object.assign(this,e)}}t0([tK({type:o.Integer,optional:!0})],rY.prototype,"version",void 0),t0([tK({type:r$})],rY.prototype,"signature",void 0),t0([tK({type:t5})],rY.prototype,"issuer",void 0),t0([tK({type:rM})],rY.prototype,"thisUpdate",void 0),t0([tK({type:rM,optional:!0})],rY.prototype,"nextUpdate",void 0),t0([tK({type:rG,repeated:"sequence",optional:!0})],rY.prototype,"revokedCertificates",void 0),t0([tK({type:rz,optional:!0,context:0,repeated:"sequence"})],rY.prototype,"crlExtensions",void 0);class rJ{constructor(e={}){this.tbsCertList=new rY,this.signatureAlgorithm=new r$,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}function rQ(e){return new r$({algorithm:e})}function rX(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}t0([tK({type:rY,raw:!0})],rJ.prototype,"tbsCertList",void 0),t0([tK({type:r$})],rJ.prototype,"signatureAlgorithm",void 0),t0([tK({type:o.BitString})],rJ.prototype,"signature",void 0),rQ("1.2.840.10045.4.1"),rQ("1.2.840.10045.4.3.1"),rQ("1.2.840.10045.4.3.2"),rQ("1.2.840.10045.4.3.3"),rQ("1.2.840.10045.4.3.4"),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;let r0=class{constructor(e={}){Object.assign(this,e)}};rX([tK({type:o.ObjectIdentifier})],r0.prototype,"fieldType",void 0),rX([tK({type:o.Any})],r0.prototype,"parameters",void 0),r0=rX([tq({type:s.Sequence})],r0);class r1 extends tv{}let r2=class{constructor(e={}){Object.assign(this,e)}};rX([tK({type:o.OctetString})],r2.prototype,"a",void 0),rX([tK({type:o.OctetString})],r2.prototype,"b",void 0),rX([tK({type:o.BitString,optional:!0})],r2.prototype,"seed",void 0),r2=rX([tq({type:s.Sequence})],r2),function(e){e[e.ecpVer1=1]="ecpVer1"}(E||(E={}));let r6=class{constructor(e={}){this.version=E.ecpVer1,Object.assign(this,e)}};rX([tK({type:o.Integer})],r6.prototype,"version",void 0),rX([tK({type:r0})],r6.prototype,"fieldID",void 0),rX([tK({type:r2})],r6.prototype,"curve",void 0),rX([tK({type:r1})],r6.prototype,"base",void 0),rX([tK({type:o.Integer,converter:tk})],r6.prototype,"order",void 0),rX([tK({type:o.Integer,optional:!0})],r6.prototype,"cofactor",void 0),r6=rX([tq({type:s.Sequence})],r6);let r8=class{constructor(e={}){Object.assign(this,e)}};rX([tK({type:o.ObjectIdentifier})],r8.prototype,"namedCurve",void 0),rX([tK({type:o.Null})],r8.prototype,"implicitCurve",void 0),rX([tK({type:r6})],r8.prototype,"specifiedCurve",void 0),r8=rX([tq({type:s.Choice})],r8);class r4{constructor(e={}){this.version=1,this.privateKey=new tv,Object.assign(this,e)}}rX([tK({type:o.Integer})],r4.prototype,"version",void 0),rX([tK({type:tv})],r4.prototype,"privateKey",void 0),rX([tK({type:r8,context:0,optional:!0})],r4.prototype,"parameters",void 0),rX([tK({type:o.BitString,context:1,optional:!0})],r4.prototype,"publicKey",void 0);class r3{constructor(e={}){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0),Object.assign(this,e)}}function r5(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}rX([tK({type:o.Integer,converter:tk})],r3.prototype,"r",void 0),rX([tK({type:o.Integer,converter:tk})],r3.prototype,"s",void 0),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;let r9="1.2.840.113549.1.1",r7=`${r9}.1`,ie=`${r9}.7`,it=`${r9}.9`,ir=`${r9}.10`,ii=`${r9}.2`,is=`${r9}.4`,io=`${r9}.5`,ia=`${r9}.12`,il=`${r9}.13`,iu=`${r9}.15`,ic=`${r9}.16`,id=`${r9}.8`;function ih(e){return new r$({algorithm:e,parameters:null})}ih("1.2.840.113549.2.2"),ih("1.2.840.113549.2.5");let ip=ih("1.3.14.3.2.26");ih("2.16.840.1.101.3.4.2.4"),ih("2.16.840.1.101.3.4.2.1"),ih("2.16.840.1.101.3.4.2.2"),ih("2.16.840.1.101.3.4.2.3"),ih("2.16.840.1.101.3.4.2.5"),ih("2.16.840.1.101.3.4.2.6");let iy=new r$({algorithm:id,parameters:tX.serialize(ip)}),ig=new r$({algorithm:it,parameters:tX.serialize(tI.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});ih(r7),ih(ii),ih(is),ih(io),ih(iu),ih(ic),ih(ia),ih(il),ih(iu),ih(ic);class im{constructor(e={}){this.hashAlgorithm=new r$(ip),this.maskGenAlgorithm=new r$({algorithm:id,parameters:tX.serialize(ip)}),this.pSourceAlgorithm=new r$(ig),Object.assign(this,e)}}r5([tK({type:r$,context:0,defaultValue:ip})],im.prototype,"hashAlgorithm",void 0),r5([tK({type:r$,context:1,defaultValue:iy})],im.prototype,"maskGenAlgorithm",void 0),r5([tK({type:r$,context:2,defaultValue:ig})],im.prototype,"pSourceAlgorithm",void 0),new r$({algorithm:ie,parameters:tX.serialize(new im)});class iv{constructor(e={}){this.hashAlgorithm=new r$(ip),this.maskGenAlgorithm=new r$({algorithm:id,parameters:tX.serialize(ip)}),this.saltLength=20,this.trailerField=1,Object.assign(this,e)}}r5([tK({type:r$,context:0,defaultValue:ip})],iv.prototype,"hashAlgorithm",void 0),r5([tK({type:r$,context:1,defaultValue:iy})],iv.prototype,"maskGenAlgorithm",void 0),r5([tK({type:o.Integer,context:2,defaultValue:20})],iv.prototype,"saltLength",void 0),r5([tK({type:o.Integer,context:3,defaultValue:1})],iv.prototype,"trailerField",void 0),new r$({algorithm:ir,parameters:tX.serialize(new iv)});class ib{constructor(e={}){this.digestAlgorithm=new r$,this.digest=new tv,Object.assign(this,e)}}r5([tK({type:r$})],ib.prototype,"digestAlgorithm",void 0),r5([tK({type:tv})],ib.prototype,"digest",void 0);class iw{constructor(e={}){this.prime=new ArrayBuffer(0),this.exponent=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}r5([tK({type:o.Integer,converter:tk})],iw.prototype,"prime",void 0),r5([tK({type:o.Integer,converter:tk})],iw.prototype,"exponent",void 0),r5([tK({type:o.Integer,converter:tk})],iw.prototype,"coefficient",void 0);let ix=T=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,T.prototype)}};ix=T=r5([tq({type:s.Sequence,itemType:iw})],ix);class ik{constructor(e={}){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}r5([tK({type:o.Integer})],ik.prototype,"version",void 0),r5([tK({type:o.Integer,converter:tk})],ik.prototype,"modulus",void 0),r5([tK({type:o.Integer,converter:tk})],ik.prototype,"publicExponent",void 0),r5([tK({type:o.Integer,converter:tk})],ik.prototype,"privateExponent",void 0),r5([tK({type:o.Integer,converter:tk})],ik.prototype,"prime1",void 0),r5([tK({type:o.Integer,converter:tk})],ik.prototype,"prime2",void 0),r5([tK({type:o.Integer,converter:tk})],ik.prototype,"exponent1",void 0),r5([tK({type:o.Integer,converter:tk})],ik.prototype,"exponent2",void 0),r5([tK({type:o.Integer,converter:tk})],ik.prototype,"coefficient",void 0),r5([tK({type:ix,optional:!0})],ik.prototype,"otherPrimeInfos",void 0);class iA{constructor(e={}){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),Object.assign(this,e)}}r5([tK({type:o.Integer,converter:tk})],iA.prototype,"modulus",void 0),r5([tK({type:o.Integer,converter:tk})],iA.prototype,"publicExponent",void 0);var iS=r(13829);!function(e){e[e.verified=0]="verified",e[e.selfSigned=1]="selfSigned",e[e.unverified=2]="unverified",e[e.failed=3]="failed"}(O||(O={}));class iB{constructor(e={}){this.verifiedBootKey=new tv,this.deviceLocked=!1,this.verifiedBootState=O.verified,Object.assign(this,e)}}(0,iS.Cg)([tK({type:tv})],iB.prototype,"verifiedBootKey",void 0),(0,iS.Cg)([tK({type:o.Boolean})],iB.prototype,"deviceLocked",void 0),(0,iS.Cg)([tK({type:o.Enumerated})],iB.prototype,"verifiedBootState",void 0),(0,iS.Cg)([tK({type:tv,optional:!0})],iB.prototype,"verifiedBootHash",void 0);let iI=N=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,N.prototype)}};iI=N=(0,iS.Cg)([tq({type:s.Set,itemType:o.Integer})],iI);class i_{constructor(e={}){Object.assign(this,e)}}(0,iS.Cg)([tK({context:1,type:iI,optional:!0})],i_.prototype,"purpose",void 0),(0,iS.Cg)([tK({context:2,type:o.Integer,optional:!0})],i_.prototype,"algorithm",void 0),(0,iS.Cg)([tK({context:3,type:o.Integer,optional:!0})],i_.prototype,"keySize",void 0),(0,iS.Cg)([tK({context:5,type:iI,optional:!0})],i_.prototype,"digest",void 0),(0,iS.Cg)([tK({context:6,type:iI,optional:!0})],i_.prototype,"padding",void 0),(0,iS.Cg)([tK({context:10,type:o.Integer,optional:!0})],i_.prototype,"ecCurve",void 0),(0,iS.Cg)([tK({context:200,type:o.Integer,optional:!0})],i_.prototype,"rsaPublicExponent",void 0),(0,iS.Cg)([tK({context:203,type:iI,optional:!0})],i_.prototype,"mgfDigest",void 0),(0,iS.Cg)([tK({context:303,type:o.Null,optional:!0})],i_.prototype,"rollbackResistance",void 0),(0,iS.Cg)([tK({context:305,type:o.Null,optional:!0})],i_.prototype,"earlyBootOnly",void 0),(0,iS.Cg)([tK({context:400,type:o.Integer,optional:!0})],i_.prototype,"activeDateTime",void 0),(0,iS.Cg)([tK({context:401,type:o.Integer,optional:!0})],i_.prototype,"originationExpireDateTime",void 0),(0,iS.Cg)([tK({context:402,type:o.Integer,optional:!0})],i_.prototype,"usageExpireDateTime",void 0),(0,iS.Cg)([tK({context:405,type:o.Integer,optional:!0})],i_.prototype,"usageCountLimit",void 0),(0,iS.Cg)([tK({context:503,type:o.Null,optional:!0})],i_.prototype,"noAuthRequired",void 0),(0,iS.Cg)([tK({context:504,type:o.Integer,optional:!0})],i_.prototype,"userAuthType",void 0),(0,iS.Cg)([tK({context:505,type:o.Integer,optional:!0})],i_.prototype,"authTimeout",void 0),(0,iS.Cg)([tK({context:506,type:o.Null,optional:!0})],i_.prototype,"allowWhileOnBody",void 0),(0,iS.Cg)([tK({context:507,type:o.Null,optional:!0})],i_.prototype,"trustedUserPresenceRequired",void 0),(0,iS.Cg)([tK({context:508,type:o.Null,optional:!0})],i_.prototype,"trustedConfirmationRequired",void 0),(0,iS.Cg)([tK({context:509,type:o.Null,optional:!0})],i_.prototype,"unlockedDeviceRequired",void 0),(0,iS.Cg)([tK({context:600,type:o.Null,optional:!0})],i_.prototype,"allApplications",void 0),(0,iS.Cg)([tK({context:601,type:tv,optional:!0})],i_.prototype,"applicationId",void 0),(0,iS.Cg)([tK({context:701,type:o.Integer,optional:!0})],i_.prototype,"creationDateTime",void 0),(0,iS.Cg)([tK({context:702,type:o.Integer,optional:!0})],i_.prototype,"origin",void 0),(0,iS.Cg)([tK({context:703,type:o.Null,optional:!0})],i_.prototype,"rollbackResistant",void 0),(0,iS.Cg)([tK({context:704,type:iB,optional:!0})],i_.prototype,"rootOfTrust",void 0),(0,iS.Cg)([tK({context:705,type:o.Integer,optional:!0})],i_.prototype,"osVersion",void 0),(0,iS.Cg)([tK({context:706,type:o.Integer,optional:!0})],i_.prototype,"osPatchLevel",void 0),(0,iS.Cg)([tK({context:709,type:tv,optional:!0})],i_.prototype,"attestationApplicationId",void 0),(0,iS.Cg)([tK({context:710,type:tv,optional:!0})],i_.prototype,"attestationIdBrand",void 0),(0,iS.Cg)([tK({context:711,type:tv,optional:!0})],i_.prototype,"attestationIdDevice",void 0),(0,iS.Cg)([tK({context:712,type:tv,optional:!0})],i_.prototype,"attestationIdProduct",void 0),(0,iS.Cg)([tK({context:713,type:tv,optional:!0})],i_.prototype,"attestationIdSerial",void 0),(0,iS.Cg)([tK({context:714,type:tv,optional:!0})],i_.prototype,"attestationIdImei",void 0),(0,iS.Cg)([tK({context:715,type:tv,optional:!0})],i_.prototype,"attestationIdMeid",void 0),(0,iS.Cg)([tK({context:716,type:tv,optional:!0})],i_.prototype,"attestationIdManufacturer",void 0),(0,iS.Cg)([tK({context:717,type:tv,optional:!0})],i_.prototype,"attestationIdModel",void 0),(0,iS.Cg)([tK({context:718,type:o.Integer,optional:!0})],i_.prototype,"vendorPatchLevel",void 0),(0,iS.Cg)([tK({context:719,type:o.Integer,optional:!0})],i_.prototype,"bootPatchLevel",void 0),(0,iS.Cg)([tK({context:720,type:o.Null,optional:!0})],i_.prototype,"deviceUniqueAttestation",void 0),function(e){e[e.software=0]="software",e[e.trustedEnvironment=1]="trustedEnvironment",e[e.strongBox=2]="strongBox"}(U||(U={})),function(e){e[e.KM2=1]="KM2",e[e.KM3=2]="KM3",e[e.KM4=3]="KM4",e[e.KM4_1=4]="KM4_1",e[e.keyMint1=100]="keyMint1",e[e.keyMint2=200]="keyMint2"}(Z||(Z={}));class iC{constructor(e={}){this.attestationVersion=Z.KM4,this.attestationSecurityLevel=U.software,this.keymasterVersion=0,this.keymasterSecurityLevel=U.software,this.attestationChallenge=new tv,this.uniqueId=new tv,this.softwareEnforced=new i_,this.teeEnforced=new i_,Object.assign(this,e)}}(0,iS.Cg)([tK({type:o.Integer})],iC.prototype,"attestationVersion",void 0),(0,iS.Cg)([tK({type:o.Enumerated})],iC.prototype,"attestationSecurityLevel",void 0),(0,iS.Cg)([tK({type:o.Integer})],iC.prototype,"keymasterVersion",void 0),(0,iS.Cg)([tK({type:o.Enumerated})],iC.prototype,"keymasterSecurityLevel",void 0),(0,iS.Cg)([tK({type:tv})],iC.prototype,"attestationChallenge",void 0),(0,iS.Cg)([tK({type:tv})],iC.prototype,"uniqueId",void 0),(0,iS.Cg)([tK({type:i_})],iC.prototype,"softwareEnforced",void 0),(0,iS.Cg)([tK({type:i_})],iC.prototype,"teeEnforced",void 0);let iE=class extends i_{};iE=(0,iS.Cg)([tq({type:s.Choice})],iE);let iT=P=class extends tQ{constructor(e){super(e),Object.setPrototypeOf(this,P.prototype)}findProperty(e){let t=this.find(t=>e in t);if(t)return t[e]}};iT=P=(0,iS.Cg)([tq({type:s.Sequence,itemType:iE})],iT);class iN{constructor(e={}){this.attestationVersion=Z.KM4,this.attestationSecurityLevel=U.software,this.keymasterVersion=0,this.keymasterSecurityLevel=U.software,this.attestationChallenge=new tv,this.uniqueId=new tv,this.softwareEnforced=new iT,this.teeEnforced=new iT,Object.assign(this,e)}}(0,iS.Cg)([tK({type:o.Integer})],iN.prototype,"attestationVersion",void 0),(0,iS.Cg)([tK({type:o.Enumerated})],iN.prototype,"attestationSecurityLevel",void 0),(0,iS.Cg)([tK({type:o.Integer})],iN.prototype,"keymasterVersion",void 0),(0,iS.Cg)([tK({type:o.Enumerated})],iN.prototype,"keymasterSecurityLevel",void 0),(0,iS.Cg)([tK({type:tv})],iN.prototype,"attestationChallenge",void 0),(0,iS.Cg)([tK({type:tv})],iN.prototype,"uniqueId",void 0),(0,iS.Cg)([tK({type:iT})],iN.prototype,"softwareEnforced",void 0),(0,iS.Cg)([tK({type:iT})],iN.prototype,"teeEnforced",void 0);class iO{constructor(e={}){Object.assign(this,e)}}(0,iS.Cg)([tK({type:o.OctetString})],iO.prototype,"packageName",void 0),(0,iS.Cg)([tK({type:o.Integer})],iO.prototype,"version",void 0);class iU{constructor(e={}){Object.assign(this,e)}}function iZ(e,t="base64url"){return new Uint8Array(G.toArrayBuffer(e,"base64url"===t))}function iP(e,t="base64url"){return G.fromArrayBuffer(e,"base64url"===t)}function iL(e){let t=G.toArrayBuffer(e,!0);return G.fromArrayBuffer(t)}function ij(e){return G.fromString(e,!0)}function iV(e){return G.toString(e,!0)}function iR(e){return G.validate(e,!1)}function iD(e){return e=e.replace(/=/g,""),G.validate(e,!0)}(0,iS.Cg)([tK({type:iO,repeated:"set"})],iU.prototype,"packageInfos",void 0),(0,iS.Cg)([tK({type:o.OctetString,repeated:"set"})],iU.prototype,"signatureDigests",void 0),function(e){e[e.kty=1]="kty",e[e.alg=3]="alg",e[e.crv=-1]="crv",e[e.x=-2]="x",e[e.y=-3]="y",e[e.n=-1]="n",e[e.e=-2]="e"}(L||(L={})),function(e){e[e.OKP=1]="OKP",e[e.EC2=2]="EC2",e[e.RSA=3]="RSA"}(j||(j={})),function(e){e[e.P256=1]="P256",e[e.P384=2]="P384",e[e.P521=3]="P521",e[e.ED25519=6]="ED25519",e[e.SECP256K1=8]="SECP256K1"}(V||(V={})),function(e){e[e.ES256=-7]="ES256",e[e.EdDSA=-8]="EdDSA",e[e.ES384=-35]="ES384",e[e.ES512=-36]="ES512",e[e.PS256=-37]="PS256",e[e.PS384=-38]="PS384",e[e.PS512=-39]="PS512",e[e.ES256K=-47]="ES256K",e[e.RS256=-257]="RS256",e[e.RS384=-258]="RS384",e[e.RS512=-259]="RS512",e[e.RS1=-65535]="RS1"}(R||(R={}))},60564:(e,t)=>{"use strict";function r(e){if(!Number.isSafeInteger(e))throw Error(`Wrong integer: ${e}`)}function i(...e){let t=(e,t)=>r=>e(t(r));return{encode:Array.from(e).reverse().reduce((e,r)=>e?t(e,r.encode):r.encode,void 0),decode:e.reduce((e,r)=>e?t(e,r.decode):r.decode,void 0)}}function n(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(r(t),t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw Error(`alphabet.decode: not string element=${t}`);let r=e.indexOf(t);if(-1===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function s(e=""){if("string"!=typeof e)throw Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw Error("join.decode input should be string");return t.split(e)}}}function o(e,t="="){if(r(e),"string"!=typeof t)throw Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.decode: non-string input=${e}`);let i=r.length;if(i*e%8)throw Error("Invalid padding: string should have whole number of bytes");for(;i>0&&r[i-1]===t;i--)if(!((i-1)*e%8))throw Error("Invalid padding: string has too much padding");return r.slice(0,i)}}}function a(e){if("function"!=typeof e)throw Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,i){if(t<2)throw Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(i<2)throw Error(`convertRadix: wrong to=${i}, base cannot be less than 2`);if(!Array.isArray(e))throw Error("convertRadix: data should be array");if(!e.length)return[];let n=0,s=[],o=Array.from(e);for(o.forEach(e=>{if(r(e),e<0||e>=t)throw Error(`Wrong integer: ${e}`)});;){let e=0,r=!0;for(let s=n;s<o.length;s++){let a=o[s],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!=t*e||(e=l%i,o[s]=Math.floor(l/i),!Number.isSafeInteger(o[s])||o[s]*i+e!==l))throw Error("convertRadix: carry overflow");r&&(o[s]?r=!1:n=s)}if(s.push(e),r)break}for(let t=0;t<e.length-1&&0===e[t];t++)s.push(0);return s.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=r;let u=(e,t)=>t?u(t,e%t):e,c=(e,t)=>e+(t-u(e,t));function d(e,t,i,n){if(!Array.isArray(e))throw Error("convertRadix2: data should be array");if(t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(i<=0||i>32)throw Error(`convertRadix2: wrong to=${i}`);if(c(t,i)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${i} carryBits=${c(t,i)}`);let s=0,o=0,a=2**i-1,l=[];for(let n of e){if(r(n),n>=2**t)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(s=s<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=i;o-=i)l.push((s>>o-i&a)>>>0);s&=2**o-1}if(s=s<<i-o&a,!n&&o>=t)throw Error("Excess padding");if(!n&&s)throw Error(`Non-zero padding: ${s}`);return n&&o>0&&l.push(s>>>0),l}function h(e){return r(e),{encode:t=>{if(!(t instanceof Uint8Array))throw Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("radix.decode input should be array of strings");return Uint8Array.from(l(t,e,256))}}}function p(e,t=!1){if(r(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(c(8,e)>32||c(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw Error("radix2.encode input should be Uint8Array");return d(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error("radix2.decode input should be array of strings");return Uint8Array.from(d(r,e,8,t))}}}function f(e){if("function"!=typeof e)throw Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function y(e,t){if(r(e),"function"!=typeof t)throw Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw Error("checksum.encode: input should be Uint8Array");let i=t(r).slice(0,e),n=new Uint8Array(r.length+e);return n.set(r),n.set(i,r.length),n},decode(r){if(!(r instanceof Uint8Array))throw Error("checksum.decode: input should be Uint8Array");let i=r.slice(0,-e),n=t(i).slice(0,e),s=r.slice(-e);for(let t=0;t<e;t++)if(n[t]!==s[t])throw Error("Invalid checksum");return i}}}t.utils={alphabet:n,chain:i,checksum:y,radix:h,radix2:p,join:s,padding:o},t.base16=i(p(4),n("0123456789ABCDEF"),s("")),t.base32=i(p(5),n("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o(5),s("")),t.base32hex=i(p(5),n("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o(5),s("")),t.base32crockford=i(p(5),n("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),s(""),a(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=i(p(6),n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o(6),s("")),t.base64url=i(p(6),n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(6),s(""));let g=e=>i(h(58),n(e),s(""));t.base58=g("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=g("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=g("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let m=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let r="";for(let i=0;i<e.length;i+=8){let n=e.subarray(i,i+8);r+=t.base58.encode(n).padStart(m[n.length],"1")}return r},decode(e){let r=[];for(let i=0;i<e.length;i+=11){let n=e.slice(i,i+11),s=m.indexOf(n.length),o=t.base58.decode(n);for(let e=0;e<o.length-s;e++)if(0!==o[e])throw Error("base58xmr: wrong padding");r=r.concat(Array.from(o.slice(o.length-s)))}return Uint8Array.from(r)}},t.base58check=e=>i(y(4,t=>e(e(t))),t.base58);let v=i(n("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),s("")),b=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function w(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<b.length;e++)(t>>e&1)==1&&(r^=b[e]);return r}function x(e,t,r=1){let i=e.length,n=1;for(let t=0;t<i;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);n=w(n)^r>>5}n=w(n);for(let t=0;t<i;t++)n=w(n)^31&e.charCodeAt(t);for(let e of t)n=w(n)^e;for(let e=0;e<6;e++)n=w(n);return n^=r,v.encode(d([n%0x40000000],30,5,!1))}function k(e){let t="bech32"===e?1:0x2bc830a3,r=p(5),i=r.decode,n=r.encode,s=f(i);function o(e,r=90){if("string"!=typeof e)throw Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||!1!==r&&e.length>r)throw TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);let i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let n=(e=i).lastIndexOf("1");if(0===n||-1===n)throw Error('Letter "1" must be present between prefix and data only');let s=e.slice(0,n),a=e.slice(n+1);if(a.length<6)throw Error("Data must be at least 6 characters long");let l=v.decode(a).slice(0,-6),u=x(s,l,t);if(!a.endsWith(u))throw Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:s,words:l}}let a=f(o);return{encode:function(e,r,i=90){if("string"!=typeof e)throw Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error(`bech32.encode words should be array of numbers, not ${typeof r}`);let n=e.length+7+r.length;if(!1!==i&&n>i)throw TypeError(`Length ${n} exceeds limit ${i}`);return e=e.toLowerCase(),`${e}1${v.encode(r)}${x(e,r,t)}`},decode:o,decodeToBytes:function(e){let{prefix:t,words:r}=o(e,!1);return{prefix:t,words:r,bytes:i(r)}},decodeUnsafe:a,fromWords:i,fromWordsUnsafe:s,toWords:n}}t.bech32=k("bech32"),t.bech32m=k("bech32m"),t.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},t.hex=i(p(4),n("0123456789abcdef"),s(""),a(e=>{if("string"!=typeof e||e.length%2)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));let A={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},S=`Invalid encoding type. Available types: ${Object.keys(A).join(", ")}`;t.bytesToString=(e,t)=>{if("string"!=typeof e||!A.hasOwnProperty(e))throw TypeError(S);if(!(t instanceof Uint8Array))throw TypeError("bytesToString() expects Uint8Array");return A[e].encode(t)},t.str=t.bytesToString,t.stringToBytes=(e,t)=>{if(!A.hasOwnProperty(e))throw TypeError(S);if("string"!=typeof t)throw TypeError("stringToBytes() expects string");return A[e].decode(t)},t.bytes=t.stringToBytes},92536:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.errorUtil=void 0,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(r||(t.errorUtil=r={}))},96602:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;let a=s(r(35687));t.z=a,o(r(35687),t),t.default=a}}]);