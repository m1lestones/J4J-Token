(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,202258,e=>{"use strict";var t=e.i(649785),i=e.i(281675);function n(e){let n,a,o=(0,t.c)(3),[s,r]=(0,i.useState)();return o[0]!==e?(n=()=>{let t=window.matchMedia(e),i=()=>r(!!t.matches);return i(),t.addEventListener("change",i),()=>t.removeEventListener("change",i)},a=[e],o[0]=e,o[1]=n,o[2]=a):(n=o[1],a=o[2]),(0,i.useEffect)(n,a),s}e.s(["default",()=>n])},138027,770578,e=>{"use strict";var t,i,n,a=e.i(942765),o=e.i(281675),s=e.i(834649),r=e.i(477908),d=Object.defineProperty,l=(e,t,i)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i};let h=class e{constructor(e){l(this,"_name"),this._name=e}static flip(t){return t===e.HORZ?e.VERT:e.HORZ}getName(){return this._name}toString(){return this._name}};l(h,"HORZ",new h("horz")),l(h,"VERT",new h("vert"));class c{constructor(e,t,i,n){l(this,"x"),l(this,"y"),l(this,"width"),l(this,"height"),this.x=e,this.y=t,this.width=i,this.height=n}static empty(){return new c(0,0,0,0)}static fromJson(e){return new c(e.x,e.y,e.width,e.height)}toJson(){return{x:this.x,y:this.y,width:this.width,height:this.height}}snap(e){this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this.width=Math.round(this.width/e)*e,this.height=Math.round(this.height/e)*e}static getBoundingClientRect(e){let{x:t,y:i,width:n,height:a}=e.getBoundingClientRect();return new c(t,i,n,a)}static getContentRect(e){let t=e.getBoundingClientRect(),i=window.getComputedStyle(e),n=parseFloat(i.paddingLeft),a=parseFloat(i.paddingRight),o=parseFloat(i.paddingTop),s=parseFloat(i.paddingBottom),r=parseFloat(i.borderLeftWidth),d=parseFloat(i.borderRightWidth),l=parseFloat(i.borderTopWidth),h=parseFloat(i.borderBottomWidth),u=t.width-r-n-a-d,b=t.height-l-o-s-h;return new c(t.left+r+n,t.top+l+o,u,b)}static fromDomRect(e){return new c(e.x,e.y,e.width,e.height)}relativeTo(e){return new c(this.x-e.x,this.y-e.y,this.width,this.height)}clone(){return new c(this.x,this.y,this.width,this.height)}equals(e){return this.x===(null==e?void 0:e.x)&&this.y===(null==e?void 0:e.y)&&this.width===(null==e?void 0:e.width)&&this.height===(null==e?void 0:e.height)}equalSize(e){return this.width===(null==e?void 0:e.width)&&this.height===(null==e?void 0:e.height)}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}get bottom(){return this.y+this.height}get right(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,t){this.styleWithPosition(e.style,t)}styleWithPosition(e,t="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=t,e}contains(e,t){return!!(this.x<=e&&e<=this.getRight()&&this.y<=t&&t<=this.getBottom())}removeInsets(e){return new c(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let t=this.width;return e===h.VERT&&(t=this.height),t}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}let u=class e{constructor(t,i,n){l(this,"name"),l(this,"orientation"),l(this,"indexPlus"),this.name=t,this.orientation=i,this.indexPlus=n,e.values.set(this.name,this)}static getByName(t){return e.values.get(t)}static getLocation(t,i,n){if(i=(i-t.x)/t.width,n=(n-t.y)/t.height,i>=.25&&i<.75&&n>=.25&&n<.75)return e.CENTER;let a=n>=i,o=n>=1-i;return a?o?e.BOTTOM:e.LEFT:o?e.RIGHT:e.TOP}getName(){return this.name}getOrientation(){return this.orientation}getDockRect(t){return this===e.TOP?new c(t.x,t.y,t.width,t.height/2):this===e.BOTTOM?new c(t.x,t.getBottom()-t.height/2,t.width,t.height/2):this===e.LEFT?new c(t.x,t.y,t.width/2,t.height):this===e.RIGHT?new c(t.getRight()-t.width/2,t.y,t.width/2,t.height):t.clone()}split(t,i){return this===e.TOP?{start:new c(t.x,t.y,t.width,i),end:new c(t.x,t.y+i,t.width,t.height-i)}:this===e.LEFT?{start:new c(t.x,t.y,i,t.height),end:new c(t.x+i,t.y,t.width-i,t.height)}:this===e.RIGHT?{start:new c(t.getRight()-i,t.y,i,t.height),end:new c(t.x,t.y,t.width-i,t.height)}:{start:new c(t.x,t.getBottom()-i,t.width,i),end:new c(t.x,t.y,t.width,t.height-i)}}reflect(){return this===e.TOP?e.BOTTOM:this===e.LEFT?e.RIGHT:this===e.RIGHT?e.LEFT:e.TOP}toString(){return"(DockLocation: name="+this.name+", orientation="+this.orientation+")"}};l(u,"values",new Map),l(u,"TOP",new u("top",h.VERT,0)),l(u,"BOTTOM",new u("bottom",h.VERT,1)),l(u,"LEFT",new u("left",h.HORZ,0)),l(u,"RIGHT",new u("right",h.HORZ,1)),l(u,"CENTER",new u("center",h.VERT,0));var b=((t=b||{}).Close_Tab="Close",t.Close_Tabset="Close tab set",t.Active_Tabset="Active tab set",t.Move_Tabset="Move tab set",t.Move_Tabs="Move tabs(?)",t.Maximize="Maximize tab set",t.Restore="Restore tab set",t.Popout_Tab="Popout selected tab",t.Overflow_Menu_Tooltip="Hidden tabs",t.Error_rendering_component="Error rendering component",t.Error_rendering_component_retry="Retry",t),g=((i=g||{}).FLEXLAYOUT__BORDER="flexlayout__border",i.FLEXLAYOUT__BORDER_="flexlayout__border_",i.FLEXLAYOUT__BORDER_TAB_CONTENTS="flexlayout__border_tab_contents",i.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",i.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",i.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",i.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",i.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",i.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",i.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",i.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",i.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",i.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",i.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",i.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",i.FLEXLAYOUT__BORDER_LEADING="flexlayout__border_leading",i.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",i.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",i.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",i.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",i.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",i.FLEXLAYOUT__EDGE_RECT_TOP="flexlayout__edge_rect_top",i.FLEXLAYOUT__EDGE_RECT_LEFT="flexlayout__edge_rect_left",i.FLEXLAYOUT__EDGE_RECT_BOTTOM="flexlayout__edge_rect_bottom",i.FLEXLAYOUT__EDGE_RECT_RIGHT="flexlayout__edge_rect_right",i.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",i.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",i.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",i.FLEXLAYOUT__LAYOUT="flexlayout__layout",i.FLEXLAYOUT__LAYOUT_MOVEABLES="flexlayout__layout_moveables",i.FLEXLAYOUT__LAYOUT_OVERLAY="flexlayout__layout_overlay",i.FLEXLAYOUT__LAYOUT_TAB_STAMPS="flexlayout__layout_tab_stamps",i.FLEXLAYOUT__LAYOUT_MAIN="flexlayout__layout_main",i.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER="flexlayout__layout_border_container",i.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER="flexlayout__layout_border_container_inner",i.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",i.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",i.FLEXLAYOUT__SPLITTER="flexlayout__splitter",i.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",i.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",i.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",i.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",i.FLEXLAYOUT__SPLITTER_HANDLE="flexlayout__splitter_handle",i.FLEXLAYOUT__SPLITTER_HANDLE_HORZ="flexlayout__splitter_handle_horz",i.FLEXLAYOUT__SPLITTER_HANDLE_VERT="flexlayout__splitter_handle_vert",i.FLEXLAYOUT__ROW="flexlayout__row",i.FLEXLAYOUT__TAB="flexlayout__tab",i.FLEXLAYOUT__TAB_POSITION="flexlayout__tab_position",i.FLEXLAYOUT__TAB_MOVEABLE="flexlayout__tab_moveable",i.FLEXLAYOUT__TAB_OVERLAY="flexlayout__tab_overlay",i.FLEXLAYOUT__TABSET="flexlayout__tabset",i.FLEXLAYOUT__TABSET_CONTAINER="flexlayout__tabset_container",i.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",i.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",i.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",i.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",i.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",i.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",i.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",i.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",i.FLEXLAYOUT__TABSET_LEADING="flexlayout__tabset_leading",i.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",i.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",i.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",i.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",i.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",i.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",i.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",i.FLEXLAYOUT__TAB_BUTTON_STRETCH="flexlayout__tab_button_stretch",i.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",i.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",i.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",i.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",i.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",i.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",i.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",i.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",i.FLEXLAYOUT__TAB_TOOLBAR_ICON="flexlayout__tab_toolbar_icon",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",i.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",i.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",i.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",i.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED="flexlayout__popup_menu_item--selected",i.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",i.FLEXLAYOUT__MINI_SCROLLBAR="flexlayout__mini_scrollbar",i.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER="flexlayout__mini_scrollbar_container",i);class T{constructor(e,t){l(this,"type"),l(this,"data"),this.type=e,this.data=t}}let p=class e{static addNode(t,i,n,a,o){return new T(e.ADD_NODE,{json:t,toNode:i,location:n.getName(),index:a,select:o})}static moveNode(t,i,n,a,o){return new T(e.MOVE_NODE,{fromNode:t,toNode:i,location:n.getName(),index:a,select:o})}static deleteTab(t){return new T(e.DELETE_TAB,{node:t})}static deleteTabset(t){return new T(e.DELETE_TABSET,{node:t})}static renameTab(t,i){return new T(e.RENAME_TAB,{node:t,text:i})}static selectTab(t){return new T(e.SELECT_TAB,{tabNode:t})}static setActiveTabset(t,i){return new T(e.SET_ACTIVE_TABSET,{tabsetNode:t,windowId:i})}static adjustWeights(t,i){return new T(e.ADJUST_WEIGHTS,{nodeId:t,weights:i})}static adjustBorderSplit(t,i){return new T(e.ADJUST_BORDER_SPLIT,{node:t,pos:i})}static maximizeToggle(t,i){return new T(e.MAXIMIZE_TOGGLE,{node:t,windowId:i})}static updateModelAttributes(t){return new T(e.UPDATE_MODEL_ATTRIBUTES,{json:t})}static updateNodeAttributes(t,i){return new T(e.UPDATE_NODE_ATTRIBUTES,{node:t,json:i})}static popoutTab(t){return new T(e.POPOUT_TAB,{node:t})}static popoutTabset(t){return new T(e.POPOUT_TABSET,{node:t})}static closeWindow(t){return new T(e.CLOSE_WINDOW,{windowId:t})}static createWindow(t,i){return new T(e.CREATE_WINDOW,{layout:t,rect:i})}};l(p,"ADD_NODE","FlexLayout_AddNode"),l(p,"MOVE_NODE","FlexLayout_MoveNode"),l(p,"DELETE_TAB","FlexLayout_DeleteTab"),l(p,"DELETE_TABSET","FlexLayout_DeleteTabset"),l(p,"RENAME_TAB","FlexLayout_RenameTab"),l(p,"SELECT_TAB","FlexLayout_SelectTab"),l(p,"SET_ACTIVE_TABSET","FlexLayout_SetActiveTabset"),l(p,"ADJUST_WEIGHTS","FlexLayout_AdjustWeights"),l(p,"ADJUST_BORDER_SPLIT","FlexLayout_AdjustBorderSplit"),l(p,"MAXIMIZE_TOGGLE","FlexLayout_MaximizeToggle"),l(p,"UPDATE_MODEL_ATTRIBUTES","FlexLayout_UpdateModelAttributes"),l(p,"UPDATE_NODE_ATTRIBUTES","FlexLayout_UpdateNodeAttributes"),l(p,"POPOUT_TAB","FlexLayout_PopoutTab"),l(p,"POPOUT_TABSET","FlexLayout_PopoutTabset"),l(p,"CLOSE_WINDOW","FlexLayout_CloseWindow"),l(p,"CREATE_WINDOW","FlexLayout_CreateWindow");class m{constructor(e,t,i,n){l(this,"name"),l(this,"alias"),l(this,"modelName"),l(this,"pairedAttr"),l(this,"pairedType"),l(this,"defaultValue"),l(this,"alwaysWriteJson"),l(this,"type"),l(this,"required"),l(this,"fixed"),l(this,"description"),this.name=e,this.alias=void 0,this.modelName=t,this.defaultValue=i,this.alwaysWriteJson=n,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setAlias(e){return this.alias=e,this}setDescription(e){this.description=e}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}setpairedAttr(e){this.pairedAttr=e}setPairedType(e){this.pairedType=e}}l(m,"NUMBER","number"),l(m,"STRING","string"),l(m,"BOOLEAN","boolean");class _{constructor(){l(this,"attributes"),l(this,"nameToAttribute"),this.attributes=[],this.nameToAttribute=new Map}addWithAll(e,t,i,n){let a=new m(e,t,i,n);return this.attributes.push(a),this.nameToAttribute.set(e,a),a}addInherited(e,t){return this.addWithAll(e,t,void 0,!1)}add(e,t,i){return this.addWithAll(e,void 0,t,i)}getAttributes(){return this.attributes}getModelName(e){let t=this.nameToAttribute.get(e);if(void 0!==t)return t.modelName}toJson(e,t){for(let i of this.attributes){let n=t[i.name];(i.alwaysWriteJson||n!==i.defaultValue)&&(e[i.name]=n)}}fromJson(e,t){for(let i of this.attributes){let n=e[i.name];void 0===n&&i.alias&&(n=e[i.alias]),void 0===n?t[i.name]=i.defaultValue:t[i.name]=n}}update(e,t){for(let i of this.attributes)if(Object.prototype.hasOwnProperty.call(e,i.name)){let n=e[i.name];void 0===n?delete t[i.name]:t[i.name]=n}}setDefaults(e){for(let t of this.attributes)e[t.name]=t.defaultValue}pairAttributes(e,t){for(let i of t.attributes)if(i.modelName&&this.nameToAttribute.has(i.modelName)){let t=this.nameToAttribute.get(i.modelName);t.setpairedAttr(i),i.setpairedAttr(t),t.setPairedType(e)}}toTypescriptInterface(e,t){var i,n;let a=[],o=this.attributes.sort((e,t)=>e.name.localeCompare(t.name));a.push("export interface I"+e+"Attributes {");for(let e=0;e<o.length;e++){let s,r,d=o[e],l=d.type,h=d;void 0!==h.defaultValue?s=h.defaultValue:void 0!==h.modelName&&void 0!==t&&void 0!==t.nameToAttribute.get(h.modelName)&&(r=h.modelName,s=(h=t.nameToAttribute.get(r)).defaultValue,l=h.type);let c=JSON.stringify(s),u=h.required?"":"?",b="	/**\n	  ";d.description?b+=d.description:d.pairedType&&(null==(i=d.pairedAttr)?void 0:i.description)&&(b+=`Value for ${d.pairedType} attribute ${d.pairedAttr.name} if not overridden`,b+="\n\n	  ",b+=null==(n=d.pairedAttr)?void 0:n.description),b+="\n\n	  ",d.fixed?b+=`Fixed value: ${c}`:r?b+=`Default: inherited from Global attribute ${d.modelName} (default ${c})`:b+=`Default: ${c}`,b+="\n	 */",a.push(b),a.push("	"+d.name+u+": "+l+";\n")}return a.push("}"),a.join("\n")}}class f{constructor(e,t,i,n,a){l(this,"node"),l(this,"rect"),l(this,"location"),l(this,"index"),l(this,"className"),this.node=e,this.rect=t,this.location=i,this.index=n,this.className=a}}class E{constructor(e){l(this,"borders"),l(this,"borderMap"),l(this,"layoutHorizontal"),this.borders=[],this.borderMap=new Map,this.layoutHorizontal=!0}static fromJson(e,t){let i=new E(t);for(let n of(i.borders=e.map(e=>z.fromJson(e,t)),i.borders))i.borderMap.set(n.getLocation(),n);return i}toJson(){return this.borders.map(e=>e.toJson())}getLayoutHorizontal(){return this.layoutHorizontal}getBorders(){return this.borders}getBorderMap(){return this.borderMap}forEachNode(e){for(let t of this.borders)for(let i of(e(t,0),t.getChildren()))i.forEachNode(e,1)}setPaths(){for(let e of this.borders){let t="/border/"+e.getLocation().getName();e.setPath(t);let i=0;for(let n of e.getChildren())n.setPath(t+"/t"+i),i++}}findDropTargetNode(e,t,i){for(let n of this.borders)if(n.isShowing()){let a=n.canDrop(e,t,i);if(void 0!==a)return a}}}class w{constructor(e){l(this,"model"),l(this,"attributes"),l(this,"parent"),l(this,"children"),l(this,"rect"),l(this,"path"),l(this,"listeners"),this.model=e,this.attributes={},this.children=[],this.rect=c.empty(),this.listeners=new Map,this.path=""}getId(){let e=this.attributes.id;return void 0!==e||(e=this.model.nextUniqueId(),this.setId(e)),e}getModel(){return this.model}getType(){return this.attributes.type}getParent(){return this.parent}getChildren(){return this.children}getRect(){return this.rect}getPath(){return this.path}getOrientation(){return void 0===this.parent?this.model.isRootOrientationVertical()?h.VERT:h.HORZ:h.flip(this.parent.getOrientation())}setEventListener(e,t){this.listeners.set(e,t)}removeEventListener(e){this.listeners.delete(e)}setId(e){this.attributes.id=e}fireEvent(e,t){this.listeners.has(e)&&this.listeners.get(e)(t)}getAttr(e){let t=this.attributes[e];if(void 0===t){let i=this.getAttributeDefinitions().getModelName(e);void 0!==i&&(t=this.model.getAttribute(i))}return t}forEachNode(e,t){for(let i of(e(this,t),t++,this.children))i.forEachNode(e,t)}setPaths(e){let t=0;for(let i of this.children){let n=e;"row"===i.getType()?n+="/r"+t:"tabset"===i.getType()?n+="/ts"+t:"tab"===i.getType()&&(n+="/t"+t),i.path=n,i.setPaths(n),t++}}setParent(e){this.parent=e}setRect(e){this.rect=e}setPath(e){this.path=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}findDropTargetNode(e,t,i,n){let a;if(this.rect.contains(i,n)){if(void 0!==this.model.getMaximizedTabset(e))a=this.model.getMaximizedTabset(e).canDrop(t,i,n);else if(void 0===(a=this.canDrop(t,i,n))&&0!==this.children.length){for(let o of this.children)if(void 0!==(a=o.findDropTargetNode(e,t,i,n)))break}}return a}canDrop(e,t,i){}canDockInto(e,t){if(null!=t){if(t.location===u.CENTER&&!1===t.node.isEnableDrop()||t.location===u.CENTER&&"tabset"===e.getType()&&void 0!==e.getName()||t.location!==u.CENTER&&!1===t.node.isEnableDivide())return!1;if(this.model.getOnAllowDrop())return this.model.getOnAllowDrop()(e,t)}return!0}removeChild(e){let t=this.children.indexOf(e);return -1!==t&&this.children.splice(t,1),t}addChild(e,t){return null!=t?this.children.splice(t,0,e):(this.children.push(e),t=this.children.length-1),e.parent=this,t}removeAll(){this.children=[]}styleWithPosition(e){return null==e&&(e={}),this.rect.styleWithPosition(e)}isEnableDivide(){return!0}toAttributeString(){return JSON.stringify(this.attributes,void 0,"	")}}let O=class e extends w{constructor(t,i,n=!0){super(t),l(this,"tabRect",c.empty()),l(this,"moveableElement"),l(this,"tabStamp"),l(this,"renderedName"),l(this,"extra"),l(this,"visible"),l(this,"rendered"),l(this,"scrollTop"),l(this,"scrollLeft"),this.extra={},this.moveableElement=null,this.tabStamp=null,this.rendered=!1,this.visible=!1,e.attributeDefinitions.fromJson(i,this.attributes),!0===n&&t.addNode(this)}static fromJson(t,i,n=!0){return new e(i,t,n)}getName(){return this.getAttr("name")}getHelpText(){return this.getAttr("helpText")}getComponent(){return this.getAttr("component")}getWindowId(){return this.parent instanceof M?this.parent.getWindowId():P.MAIN_WINDOW_ID}getWindow(){let e=this.model.getwindowsMap().get(this.getWindowId());if(e)return e.window}getConfig(){return this.attributes.config}getExtraData(){return this.extra}isPoppedOut(){return this.getWindowId()!==P.MAIN_WINDOW_ID}isSelected(){return this.getParent().getSelectedNode()===this}getIcon(){return this.getAttr("icon")}isEnableClose(){return this.getAttr("enableClose")}getCloseType(){return this.getAttr("closeType")}isEnablePopout(){return this.getAttr("enablePopout")}isEnablePopoutIcon(){return this.getAttr("enablePopoutIcon")}isEnablePopoutOverlay(){return this.getAttr("enablePopoutOverlay")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableRename(){return this.getAttr("enableRename")}isEnableWindowReMount(){return this.getAttr("enableWindowReMount")}getClassName(){return this.getAttr("className")}getContentClassName(){return this.getAttr("contentClassName")}getTabSetClassName(){return this.getAttr("tabsetClassName")}isEnableRenderOnDemand(){return this.getAttr("enableRenderOnDemand")}getMinWidth(){return this.getAttr("minWidth")}getMinHeight(){return this.getAttr("minHeight")}getMaxWidth(){return this.getAttr("maxWidth")}getMaxHeight(){return this.getAttr("maxHeight")}isVisible(){return this.visible}toJson(){let t={};return e.attributeDefinitions.toJson(t,this.attributes),t}saveScrollPosition(){this.moveableElement&&(this.scrollLeft=this.moveableElement.scrollLeft,this.scrollTop=this.moveableElement.scrollTop)}restoreScrollPosition(){this.scrollTop&&requestAnimationFrame(()=>{this.moveableElement&&this.scrollTop&&(this.moveableElement.scrollTop=this.scrollTop,this.moveableElement.scrollLeft=this.scrollLeft)})}setRect(e){e.equals(this.rect)||(this.fireEvent("resize",{rect:e}),this.rect=e)}setVisible(e){e!==this.visible&&(this.visible=e,this.fireEvent("visibility",{visible:e}))}getScrollTop(){return this.scrollTop}setScrollTop(e){this.scrollTop=e}getScrollLeft(){return this.scrollLeft}setScrollLeft(e){this.scrollLeft=e}isRendered(){return this.rendered}setRendered(e){this.rendered=e}getTabRect(){return this.tabRect}setTabRect(e){this.tabRect=e}getTabStamp(){return this.tabStamp}setTabStamp(e){this.tabStamp=e}getMoveableElement(){return this.moveableElement}setMoveableElement(e){this.moveableElement=e}setRenderedName(e){this.renderedName=e}getNameForOverflowMenu(){let e=this.getAttr("altName");return void 0!==e?e:this.renderedName}setName(e){this.attributes.name=e}delete(){this.parent.remove(this),this.fireEvent("close",{})}updateAttrs(t){e.attributeDefinitions.update(t,this.attributes)}getAttributeDefinitions(){return e.attributeDefinitions}setBorderWidth(e){this.attributes.borderWidth=e}setBorderHeight(e){this.attributes.borderHeight=e}static getAttributeDefinitions(){return e.attributeDefinitions}static createAttributeDefinitions(){let t=new _;return t.add("type",e.TYPE,!0).setType(m.STRING).setFixed(),t.add("id",void 0).setType(m.STRING).setDescription("the unique id of the tab, if left undefined a uuid will be assigned"),t.add("name","[Unnamed Tab]").setType(m.STRING).setDescription("name of tab to be displayed in the tab button"),t.add("altName",void 0).setType(m.STRING).setDescription("if there is no name specifed then this value will be used in the overflow menu"),t.add("helpText",void 0).setType(m.STRING).setDescription("An optional help text for the tab to be displayed upon tab hover."),t.add("component",void 0).setType(m.STRING).setDescription("string identifying which component to run (for factory)"),t.add("config",void 0).setType("any").setDescription("a place to hold json config for the hosted component"),t.add("tabsetClassName",void 0).setType(m.STRING).setDescription("class applied to parent tabset when this is the only tab and it is stretched to fill the tabset"),t.add("enableWindowReMount",!1).setType(m.BOOLEAN).setDescription("if enabled the tab will re-mount when popped out/in"),t.addInherited("enableClose","tabEnableClose").setType(m.BOOLEAN).setDescription("allow user to close tab via close button"),t.addInherited("closeType","tabCloseType").setType("ICloseType").setDescription("see values in ICloseType"),t.addInherited("enableDrag","tabEnableDrag").setType(m.BOOLEAN).setDescription("allow user to drag tab to new location"),t.addInherited("enableRename","tabEnableRename").setType(m.BOOLEAN).setDescription("allow user to rename tabs by double clicking"),t.addInherited("className","tabClassName").setType(m.STRING).setDescription("class applied to tab button"),t.addInherited("contentClassName","tabContentClassName").setType(m.STRING).setDescription("class applied to tab content"),t.addInherited("icon","tabIcon").setType(m.STRING).setDescription("the tab icon"),t.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(m.BOOLEAN).setDescription("whether to avoid rendering component until tab is visible"),t.addInherited("enablePopout","tabEnablePopout").setType(m.BOOLEAN).setAlias("enableFloat").setDescription("enable popout (in popout capable browser)"),t.addInherited("enablePopoutIcon","tabEnablePopoutIcon").setType(m.BOOLEAN).setDescription("whether to show the popout icon in the tabset header if this tab enables popouts"),t.addInherited("enablePopoutOverlay","tabEnablePopoutOverlay").setType(m.BOOLEAN).setDescription(`if this tab will not work correctly in a popout window when the main window is backgrounded (inactive)
            then enabling this option will gray out this tab`),t.addInherited("borderWidth","tabBorderWidth").setType(m.NUMBER).setDescription("width when added to border, -1 will use border size"),t.addInherited("borderHeight","tabBorderHeight").setType(m.NUMBER).setDescription("height when added to border, -1 will use border size"),t.addInherited("minWidth","tabMinWidth").setType(m.NUMBER).setDescription("the min width of this tab"),t.addInherited("minHeight","tabMinHeight").setType(m.NUMBER).setDescription("the min height of this tab"),t.addInherited("maxWidth","tabMaxWidth").setType(m.NUMBER).setDescription("the max width of this tab"),t.addInherited("maxHeight","tabMaxHeight").setType(m.NUMBER).setDescription("the max height of this tab"),t}};function y(){return"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches}function L(e,t,i){let n,o=t.getName(),s=t.getName();void 0===i&&(i=0),void 0===n&&void 0!==t.getIcon()&&(n=0!==i?(0,a.jsx)("img",{style:{width:"1em",height:"1em",transform:"rotate("+i+"deg)"},src:t.getIcon(),alt:"leadingContent"}):(0,a.jsx)("img",{style:{width:"1em",height:"1em"},src:t.getIcon(),alt:"leadingContent"}));let r={leading:n,content:o,name:s,buttons:[]};return e.customizeTab(t,r),t.setRenderedName(r.name),r}function R(e){let t=!1;return e.nativeEvent instanceof MouseEvent&&(0!==e.nativeEvent.button||e.ctrlKey||e.altKey||e.metaKey||e.shiftKey)&&(t=!0),t}function A(e,t){for(let i of[...v("iframe",t),...v("webview",t)])i.style.pointerEvents=e?"auto":"none"}function v(e,t){return[...t.getElementsByTagName(e)]}function x(e,t,i,n,a){t.preventDefault();let o=e=>{e.preventDefault(),i(e.clientX,e.clientY)},s=e=>{e.preventDefault(),a()},r=()=>{e.removeEventListener("pointermove",o),e.removeEventListener("pointerup",r),e.removeEventListener("pointercancel",s),n()};e.addEventListener("pointermove",o),e.addEventListener("pointerup",r),e.addEventListener("pointercancel",s)}function N(e){if(e instanceof O)return e.isEnablePopout();if(e instanceof M){for(let t of e.getChildren())if(!1===t.isEnablePopout())return!1;return!0}return!1}function D(e,t){let i=e.getAttribute("style");return i!==t.getAttribute("style")&&(i?t.setAttribute("style",i):t.removeAttribute("style"),!0)}function C(e,t){if(void 0!==e&&(e instanceof M||e instanceof z)){let i=e.getSelected();-1!==i&&(t===i&&e.getChildren().length>0?t>=e.getChildren().length&&e.setSelected(e.getChildren().length-1):t<i?e.setSelected(i-1):t>i||e.setSelected(-1))}}function S(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}l(O,"TYPE","tab"),l(O,"attributeDefinitions",O.createAttributeDefinitions());let B=class e extends w{constructor(t,i){super(t),l(this,"tabStripRect",c.empty()),l(this,"contentRect",c.empty()),l(this,"calculatedMinHeight"),l(this,"calculatedMinWidth"),l(this,"calculatedMaxHeight"),l(this,"calculatedMaxWidth"),this.calculatedMinHeight=0,this.calculatedMinWidth=0,this.calculatedMaxHeight=0,this.calculatedMaxWidth=0,e.attributeDefinitions.fromJson(i,this.attributes),t.addNode(this)}static fromJson(t,i,n){let a=new e(i,t);if(null!=t.children)for(let e of t.children){let t=O.fromJson(e,i);a.addChild(t)}return 0===a.children.length&&a.setSelected(-1),t.maximized&&!0===t.maximized&&(n.maximizedTabSet=a),t.active&&!0===t.active&&(n.activeTabSet=a),a}getName(){return this.getAttr("name")}isEnableActiveIcon(){return this.getAttr("enableActiveIcon")}getSelected(){let e=this.attributes.selected;return void 0!==e?e:-1}getSelectedNode(){let e=this.getSelected();if(-1!==e)return this.children[e]}getWeight(){return this.getAttr("weight")}getAttrMinWidth(){return this.getAttr("minWidth")}getAttrMinHeight(){return this.getAttr("minHeight")}getMinWidth(){return this.calculatedMinWidth}getMinHeight(){return this.calculatedMinHeight}getMinSize(e){return e===h.HORZ?this.getMinWidth():this.getMinHeight()}getAttrMaxWidth(){return this.getAttr("maxWidth")}getAttrMaxHeight(){return this.getAttr("maxHeight")}getMaxWidth(){return this.calculatedMaxWidth}getMaxHeight(){return this.calculatedMaxHeight}getMaxSize(e){return e===h.HORZ?this.getMaxWidth():this.getMaxHeight()}getConfig(){return this.attributes.config}isMaximized(){return this.model.getMaximizedTabset(this.getWindowId())===this}isActive(){return this.model.getActiveTabset(this.getWindowId())===this}isEnableDeleteWhenEmpty(){return this.getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this.getAttr("enableDrop")}isEnableTabWrap(){return this.getAttr("enableTabWrap")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableDivide(){return this.getAttr("enableDivide")}isEnableMaximize(){return this.getAttr("enableMaximize")}isEnableClose(){return this.getAttr("enableClose")}isEnableSingleTabStretch(){return this.getAttr("enableSingleTabStretch")}isEnableTabStrip(){return this.getAttr("enableTabStrip")}isAutoSelectTab(){return this.getAttr("autoSelectTab")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}getClassNameTabStrip(){return this.getAttr("classNameTabStrip")}getTabLocation(){return this.getAttr("tabLocation")}toJson(){let t={};return e.attributeDefinitions.toJson(t,this.attributes),t.children=this.children.map(e=>e.toJson()),this.isActive()&&(t.active=!0),this.isMaximized()&&(t.maximized=!0),t}calcMinMaxSize(){for(let e of(this.calculatedMinHeight=this.getAttrMinHeight(),this.calculatedMinWidth=this.getAttrMinWidth(),this.calculatedMaxHeight=this.getAttrMaxHeight(),this.calculatedMaxWidth=this.getAttrMaxWidth(),this.children))this.calculatedMinWidth=Math.max(this.calculatedMinWidth,e.getMinWidth()),this.calculatedMinHeight=Math.max(this.calculatedMinHeight,e.getMinHeight()),this.calculatedMaxWidth=Math.min(this.calculatedMaxWidth,e.getMaxWidth()),this.calculatedMaxHeight=Math.min(this.calculatedMaxHeight,e.getMaxHeight());this.calculatedMinHeight+=this.tabStripRect.height,this.calculatedMaxHeight+=this.tabStripRect.height}canMaximize(){return!!this.isEnableMaximize()&&(this.getModel().getMaximizedTabset(this.getWindowId())===this||this.getParent()!==this.getModel().getRoot(this.getWindowId())||1!==this.getModel().getRoot(this.getWindowId()).getChildren().length)}setContentRect(e){this.contentRect=e}getContentRect(){return this.contentRect}setTabStripRect(e){this.tabStripRect=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}getWindowId(){return this.parent.getWindowId()}canDrop(e,t,i){let n;if(e===this){let e=u.CENTER;n=new f(this,this.tabStripRect,e,-1,g.FLEXLAYOUT__OUTLINE_RECT)}else if(this.getWindowId()!==P.MAIN_WINDOW_ID&&!N(e))return;else if(this.contentRect.contains(t,i)){let e=u.CENTER;void 0===this.model.getMaximizedTabset(this.parent.getWindowId())&&(e=u.getLocation(this.contentRect,t,i)),n=new f(this,e.getDockRect(this.rect),e,-1,g.FLEXLAYOUT__OUTLINE_RECT)}else if(null!=this.tabStripRect&&this.tabStripRect.contains(t,i)){let e,a,o;if(0===this.children.length)a=(e=this.tabStripRect.clone()).y+3,o=e.height-4,e.width=2;else{let s=this.children[0];a=(e=s.getTabRect()).y,o=e.height;let r=this.tabStripRect.x,d=0;for(let o=0;o<this.children.length;o++){if((e=(s=this.children[o]).getTabRect()).y!==a&&(a=e.y,r=this.tabStripRect.x),d=e.x+e.width/2,r<=t&&t<d&&e.y<i&&i<e.getBottom()){let t=u.CENTER,i=new c(e.x-2,e.y,3,e.height);if(!(this.rect.x<e.x&&e.x<this.rect.getRight()))return;n=new f(this,i,t,o,g.FLEXLAYOUT__OUTLINE_RECT);break}r=d}}if(null==n&&e.getRight()<this.rect.getRight()){let t=u.CENTER;n=new f(this,new c(e.getRight()-2,a,3,o),t,this.children.length,g.FLEXLAYOUT__OUTLINE_RECT)}}if(e.canDockInto(e,n))return n}delete(){this.parent.removeChild(this)}remove(e){let t=this.removeChild(e);this.model.tidy(),C(this,t)}drop(t,i,n,a){if(this===t)return;let o=t.getParent(),s=0;if(void 0!==o&&(s=o.removeChild(t),o instanceof z&&o.getSelected()===s?o.setSelected(-1):C(o,s)),t instanceof O&&o===this&&s<n&&n>0&&n--,i===u.CENTER){let e=n;if(-1===e&&(e=this.children.length),t instanceof O)this.addChild(t,e),(a||!1!==a&&this.isAutoSelectTab())&&this.setSelected(e);else if(t instanceof W)t.forEachNode((t,i)=>{t instanceof O&&(this.addChild(t,e),e++)},0);else{for(let i=0;i<t.getChildren().length;i++){let n=t.getChildren()[i];this.addChild(n,e),e++}-1===this.getSelected()&&this.children.length>0&&this.setSelected(0)}this.model.setActiveTabset(this,this.parent.getWindowId())}else{let n=t;if(t instanceof O){let i=this.model.getOnCreateTabSet();(n=new e(this.model,i?i(t):{})).addChild(t),o=n}else if(t instanceof W){let e=this.getParent();if(t.getOrientation()===e.getOrientation()&&(i.getOrientation()===e.getOrientation()||i===u.CENTER)){let e=new W(this.model,this.getWindowId(),{});e.addChild(t),n=e}}else n=t;let a=this.parent,s=a.getChildren().indexOf(this);if(a.getOrientation()===i.orientation)n.setWeight(this.getWeight()/2),this.setWeight(this.getWeight()/2),a.addChild(n,s+i.indexPlus);else{let e=new W(this.model,this.getWindowId(),{});e.setWeight(this.getWeight()),e.addChild(this),this.setWeight(50),n.setWeight(50),e.addChild(n,i.indexPlus),a.removeChild(this),a.addChild(e,s)}n instanceof e&&this.model.setActiveTabset(n,this.getWindowId())}this.model.tidy()}updateAttrs(t){e.attributeDefinitions.update(t,this.attributes)}getAttributeDefinitions(){return e.attributeDefinitions}static getAttributeDefinitions(){return e.attributeDefinitions}static createAttributeDefinitions(){let t=new _;return t.add("type",e.TYPE,!0).setType(m.STRING).setFixed(),t.add("id",void 0).setType(m.STRING).setDescription("the unique id of the tab set, if left undefined a uuid will be assigned"),t.add("weight",100).setType(m.NUMBER).setDescription("relative weight for sizing of this tabset in parent row"),t.add("selected",0).setType(m.NUMBER).setDescription("index of selected/visible tab in tabset"),t.add("name",void 0).setType(m.STRING),t.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),t.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty").setDescription("whether to delete this tabset when is has no tabs"),t.addInherited("enableDrop","tabSetEnableDrop").setDescription("allow user to drag tabs into this tabset"),t.addInherited("enableDrag","tabSetEnableDrag").setDescription("allow user to drag tabs out this tabset"),t.addInherited("enableDivide","tabSetEnableDivide").setDescription("allow user to drag tabs to region of this tabset, splitting into new tabset"),t.addInherited("enableMaximize","tabSetEnableMaximize").setDescription("allow user to maximize tabset to fill view via maximize button"),t.addInherited("enableClose","tabSetEnableClose").setDescription("allow user to close tabset via a close button"),t.addInherited("enableSingleTabStretch","tabSetEnableSingleTabStretch").setDescription("if the tabset has only a single tab then stretch the single tab to fill area and display in a header style"),t.addInherited("classNameTabStrip","tabSetClassNameTabStrip").setDescription("a class name to apply to the tab strip"),t.addInherited("enableTabStrip","tabSetEnableTabStrip").setDescription("enable tab strip and allow multiple tabs in this tabset"),t.addInherited("minWidth","tabSetMinWidth").setDescription("minimum width (in px) for this tabset"),t.addInherited("minHeight","tabSetMinHeight").setDescription("minimum height (in px) for this tabset"),t.addInherited("maxWidth","tabSetMaxWidth").setDescription("maximum width (in px) for this tabset"),t.addInherited("maxHeight","tabSetMaxHeight").setDescription("maximum height (in px) for this tabset"),t.addInherited("enableTabWrap","tabSetEnableTabWrap").setDescription("wrap tabs onto multiple lines"),t.addInherited("tabLocation","tabSetTabLocation").setDescription("the location of the tabs either top or bottom"),t.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(m.BOOLEAN).setDescription("whether to select new/moved tabs in tabset"),t.addInherited("enableActiveIcon","tabSetEnableActiveIcon").setType(m.BOOLEAN).setDescription("whether the active icon (*) should be displayed when the tabset is active"),t.addInherited("enableTabScrollbar","tabSetEnableTabScrollbar").setType(m.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),t}};l(B,"TYPE","tabset"),l(B,"attributeDefinitions",B.createAttributeDefinitions());let M=B,I=class e extends w{constructor(t,i,n){super(t),l(this,"windowId"),l(this,"minHeight"),l(this,"minWidth"),l(this,"maxHeight"),l(this,"maxWidth"),this.windowId=i,this.minHeight=H,this.minWidth=H,this.maxHeight=F,this.maxWidth=F,e.attributeDefinitions.fromJson(n,this.attributes),this.normalizeWeights(),t.addNode(this)}static fromJson(t,i,n){let a=new e(i,n.windowId,t);if(null!=t.children)for(let o of t.children)if(o.type===M.TYPE){let e=M.fromJson(o,i,n);a.addChild(e)}else{let t=e.fromJson(o,i,n);a.addChild(t)}return a}getWeight(){return this.attributes.weight}toJson(){let t={};for(let i of(e.attributeDefinitions.toJson(t,this.attributes),t.children=[],this.children))t.children.push(i.toJson());return t}getWindowId(){return this.windowId}setWindowId(e){this.windowId=e}setWeight(e){this.attributes.weight=e}getSplitterBounds(e){let t=this.getOrientation()===h.HORZ,i=this.getChildren(),n=this.model.getSplitterSize(),a=i[0].getRect(),o=i[i.length-1].getRect(),s=t?[a.x,o.getRight()]:[a.y,o.getBottom()],r=t?[a.x,o.getRight()]:[a.y,o.getBottom()];for(let a=0;a<e;a++){let e=i[a];s[0]+=t?e.getMinWidth():e.getMinHeight(),r[0]+=t?e.getMaxWidth():e.getMaxHeight(),a>0&&(s[0]+=n,r[0]+=n)}for(let a=i.length-1;a>=e;a--){let e=i[a];s[1]-=(t?e.getMinWidth():e.getMinHeight())+n,r[1]-=(t?e.getMaxWidth():e.getMaxHeight())+n}return[Math.max(r[1],s[0]),Math.min(r[0],s[1])]}getSplitterInitials(e){let t=this.getOrientation()===h.HORZ,i=this.getChildren(),n=this.model.getSplitterSize(),a=[],o=0;for(let e=0;e<i.length;e++){let n=i[e].getRect(),s=t?n.width:n.height;a.push(s),o+=s}let s=i[e].getRect();return{initialSizes:a,sum:o,startPosition:(t?s.x:s.y)-n}}calculateSplit(e,t,i,n,a){let o=this.getOrientation()===h.HORZ,s=this.getChildren(),r=s[e],d=o?r.getMaxWidth():r.getMaxHeight(),l=[...i];if(t<a){let i=a-t,n=0;l[e]+i>d?(n=l[e]+i-d,l[e]=d):l[e]+=i;for(let t=e-1;t>=0;t--){let e=s[t],n=o?e.getMinWidth():e.getMinHeight();if(l[t]-i>n){l[t]-=i;break}i-=l[t]-n,l[t]=n}for(let t=e+1;t<s.length;t++){let e=s[t],i=o?e.getMaxWidth():e.getMaxHeight();if(l[t]+n<i){l[t]+=n;break}n-=i-l[t],l[t]=i}}else{let i=t-a,n=0;l[e-1]+i>d?(n=l[e-1]+i-d,l[e-1]=d):l[e-1]+=i;for(let t=e;t<s.length;t++){let e=s[t],n=o?e.getMinWidth():e.getMinHeight();if(l[t]-i>n){l[t]-=i;break}i-=l[t]-n,l[t]=n}for(let t=e-1;t>=0;t--){let e=s[t],i=o?e.getMaxWidth():e.getMaxHeight();if(l[t]+n<i){l[t]+=n;break}n-=i-l[t],l[t]=i}}return l.map(e=>100*Math.max(.1,e)/n)}getMinSize(e){return e===h.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this.minWidth}getMinHeight(){return this.minHeight}getMaxSize(e){return e===h.HORZ?this.getMaxWidth():this.getMaxHeight()}getMaxWidth(){return this.maxWidth}getMaxHeight(){return this.maxHeight}calcMinMaxSize(){this.minHeight=H,this.minWidth=H,this.maxHeight=F,this.maxWidth=F;let e=!0;for(let t of this.children)t.calcMinMaxSize(),this.getOrientation()===h.VERT?(this.minHeight+=t.getMinHeight(),this.maxHeight+=t.getMaxHeight(),e||(this.minHeight+=this.model.getSplitterSize(),this.maxHeight+=this.model.getSplitterSize()),this.minWidth=Math.max(this.minWidth,t.getMinWidth()),this.maxWidth=Math.min(this.maxWidth,t.getMaxWidth())):(this.minWidth+=t.getMinWidth(),this.maxWidth+=t.getMaxWidth(),e||(this.minWidth+=this.model.getSplitterSize(),this.maxWidth+=this.model.getSplitterSize()),this.minHeight=Math.max(this.minHeight,t.getMinHeight()),this.maxHeight=Math.min(this.maxHeight,t.getMaxHeight())),e=!1}tidy(){let t=0;for(;t<this.children.length;){let i=this.children[t];if(i instanceof e){i.tidy();let n=i.getChildren();if(0===n.length)this.removeChild(i);else if(1===n.length){let a=n[0];if(this.removeChild(i),a instanceof e){let e=0,n=a.getChildren();for(let t of n)e+=t.getWeight();for(let a=0;a<n.length;a++){let o=n[a];o.setWeight(i.getWeight()*o.getWeight()/e),this.addChild(o,t+a)}}else a.setWeight(i.getWeight()),this.addChild(a,t)}else t++}else i instanceof M&&0===i.getChildren().length&&i.isEnableDeleteWhenEmpty()?(this.removeChild(i),i===this.model.getMaximizedTabset(this.windowId)&&this.model.setMaximizedTabset(void 0,this.windowId)):t++}if(this===this.model.getRoot(this.windowId)&&0===this.children.length){let e=this.model.getOnCreateTabSet(),t=e?e():{};t={...t,selected:-1};let i=new M(this.model,t);this.model.setActiveTabset(i,this.windowId),this.addChild(i)}}canDrop(e,t,i){let n,a=i-this.rect.y,o=t-this.rect.x,s=this.rect.width,r=this.rect.height;if(this.getWindowId()===P.MAIN_WINDOW_ID||N(e)){if(this.model.isEnableEdgeDock()&&void 0===this.parent){if(t<this.rect.x+10&&a>r/2-50&&a<r/2+50){let e=u.LEFT,t=e.getDockRect(this.rect);t.width=t.width/2,n=new f(this,t,e,-1,g.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(t>this.rect.getRight()-10&&a>r/2-50&&a<r/2+50){let e=u.RIGHT,t=e.getDockRect(this.rect);t.width=t.width/2,t.x+=t.width,n=new f(this,t,e,-1,g.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(i<this.rect.y+10&&o>s/2-50&&o<s/2+50){let e=u.TOP,t=e.getDockRect(this.rect);t.height=t.height/2,n=new f(this,t,e,-1,g.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(i>this.rect.getBottom()-10&&o>s/2-50&&o<s/2+50){let e=u.BOTTOM,t=e.getDockRect(this.rect);t.height=t.height/2,t.y+=t.height,n=new f(this,t,e,-1,g.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(void 0!==n&&!e.canDockInto(e,n))return}return n}}drop(t,i,n){let a,o=t.getParent();if(o&&o.removeChild(t),void 0!==o&&o instanceof M&&o.setSelected(0),void 0!==o&&o instanceof z&&o.setSelected(-1),t instanceof M||t instanceof e)(a=t)instanceof e&&a.getOrientation()===this.getOrientation()&&(i.getOrientation()===this.getOrientation()||i===u.CENTER)&&(a=new e(this.model,this.windowId,{})).addChild(t);else{let e=this.model.getOnCreateTabSet();(a=new M(this.model,e?e(t):{})).addChild(t)}let s=this.children.reduce((e,t)=>e+t.getWeight(),0);0===s&&(s=100),a.setWeight(s/3);let r=!this.model.isRootOrientationVertical();if(i===u.CENTER)-1===n?this.addChild(a,this.children.length):this.addChild(a,n);else if(r&&i===u.LEFT||!r&&i===u.TOP)this.addChild(a,0);else if(r&&i===u.RIGHT||!r&&i===u.BOTTOM)this.addChild(a);else if(r&&i===u.TOP||!r&&i===u.LEFT){let t=new e(this.model,this.windowId,{}),i=new e(this.model,this.windowId,{});for(let e of(i.setWeight(75),a.setWeight(25),this.children))i.addChild(e);this.removeAll(),t.addChild(a),t.addChild(i),this.addChild(t)}else if(r&&i===u.BOTTOM||!r&&i===u.RIGHT){let t=new e(this.model,this.windowId,{}),i=new e(this.model,this.windowId,{});for(let e of(i.setWeight(75),a.setWeight(25),this.children))i.addChild(e);this.removeAll(),t.addChild(i),t.addChild(a),this.addChild(t)}a instanceof M&&this.model.setActiveTabset(a,this.windowId),this.model.tidy()}isEnableDrop(){return!0}getAttributeDefinitions(){return e.attributeDefinitions}updateAttrs(t){e.attributeDefinitions.update(t,this.attributes)}static getAttributeDefinitions(){return e.attributeDefinitions}normalizeWeights(){let e=0;for(let t of this.children)e+=t.getWeight();for(let t of(0===e&&(e=1),this.children))t.setWeight(Math.max(.001,100*t.getWeight()/e))}static createAttributeDefinitions(){let t=new _;return t.add("type",e.TYPE,!0).setType(m.STRING).setFixed(),t.add("id",void 0).setType(m.STRING).setDescription("the unique id of the row, if left undefined a uuid will be assigned"),t.add("weight",100).setType(m.NUMBER).setDescription("relative weight for sizing of this row in parent row"),t}};l(I,"TYPE","row"),l(I,"attributeDefinitions",I.createAttributeDefinitions());let W=I;class U{constructor(e,t){l(this,"_windowId"),l(this,"_layout"),l(this,"_rect"),l(this,"_window"),l(this,"_root"),l(this,"_maximizedTabSet"),l(this,"_activeTabSet"),l(this,"_toScreenRectFunction"),this._windowId=e,this._rect=t,this._toScreenRectFunction=e=>e}visitNodes(e){this.root.forEachNode(e,0)}get windowId(){return this._windowId}get rect(){return this._rect}get layout(){return this._layout}get window(){return this._window}get root(){return this._root}get maximizedTabSet(){return this._maximizedTabSet}get activeTabSet(){return this._activeTabSet}set rect(e){this._rect=e}set layout(e){this._layout=e}set window(e){this._window=e}set root(e){this._root=e}set maximizedTabSet(e){this._maximizedTabSet=e}set activeTabSet(e){this._activeTabSet=e}get toScreenRectFunction(){return this._toScreenRectFunction}set toScreenRectFunction(e){this._toScreenRectFunction=e}toJson(){return this._window&&this._window.screenTop>-1e4&&(this.rect=new c(this._window.screenLeft,this._window.screenTop,this._window.outerWidth,this._window.outerHeight)),{layout:this.root.toJson(),rect:this.rect.toJson()}}static fromJson(e,t,i){let n=t.getwindowsMap().size,a=e.rect?c.fromJson(e.rect):new c(50+50*n,50+50*n,600,400);a.snap(10);let o=new U(i,a);return o.root=W.fromJson(e.layout,t,o),o}}let H=0,F=99999,Y=class e{constructor(){l(this,"attributes"),l(this,"idMap"),l(this,"changeListeners"),l(this,"borders"),l(this,"onAllowDrop"),l(this,"onCreateTabSet"),l(this,"windows"),l(this,"rootWindow"),this.attributes={},this.idMap=new Map,this.borders=new E(this),this.windows=new Map,this.rootWindow=new U(e.MAIN_WINDOW_ID,c.empty()),this.windows.set(e.MAIN_WINDOW_ID,this.rootWindow),this.changeListeners=[]}doAction(t){var i;let n;switch(t.type){case p.ADD_NODE:{let e=new O(this,t.data.json,!0),i=this.idMap.get(t.data.toNode);(i instanceof M||i instanceof z||i instanceof W)&&(i.drop(e,u.getByName(t.data.location),t.data.index,t.data.select),n=e);break}case p.MOVE_NODE:{let e=this.idMap.get(t.data.fromNode);if(e instanceof O||e instanceof M||e instanceof W){e===this.getMaximizedTabset(e.getWindowId())&&(this.windows.get(e.getWindowId()).maximizedTabSet=void 0);let i=this.idMap.get(t.data.toNode);(i instanceof M||i instanceof z||i instanceof W)&&i.drop(e,u.getByName(t.data.location),t.data.index,t.data.select)}this.removeEmptyWindows();break}case p.DELETE_TAB:{let e=this.idMap.get(t.data.node);e instanceof O&&e.delete(),this.removeEmptyWindows();break}case p.DELETE_TABSET:{let e=this.idMap.get(t.data.node);if(e instanceof M){let t=[...e.getChildren()];for(let e=0;e<t.length;e++){let i=t[e];i.isEnableClose()&&i.delete()}0===e.getChildren().length&&e.delete(),this.tidy()}this.removeEmptyWindows();break}case p.POPOUT_TABSET:{let e=this.idMap.get(t.data.node);if(e instanceof M){let t=e.isMaximized(),i=this.windows.get(e.getWindowId()),n=S(),a=new U(n,i.toScreenRectFunction(e.getRect())),o=W.fromJson({type:"row",children:[]},this,a);a.root=o,this.windows.set(n,a),o.drop(e,u.CENTER,0),t&&(this.rootWindow.maximizedTabSet=void 0)}this.removeEmptyWindows();break}case p.POPOUT_TAB:{let e=this.idMap.get(t.data.node);if(e instanceof O){let t=S(),i=c.empty();i=e.getParent()instanceof M?e.getParent().getRect():e.getParent().getContentRect();let n=new U(t,this.windows.get(e.getWindowId()).toScreenRectFunction(i)),a=S(),o=W.fromJson({type:"row",children:[{type:"tabset",id:a}]},this,n);n.root=o,this.windows.set(t,n),this.idMap.get(a).drop(e,u.CENTER,0,!0)}this.removeEmptyWindows();break}case p.CLOSE_WINDOW:{let n=this.windows.get(t.data.windowId);n&&(null==(i=this.rootWindow.root)||i.drop(n.root,u.CENTER,-1),this.rootWindow.visitNodes((t,i)=>{t instanceof W&&t.setWindowId(e.MAIN_WINDOW_ID)}),this.windows.delete(t.data.windowId));break}case p.CREATE_WINDOW:{let e=S(),i=new U(e,c.fromJson(t.data.rect)),a=W.fromJson(t.data.layout,this,i);i.root=a,this.windows.set(e,i),n=e;break}case p.RENAME_TAB:{let e=this.idMap.get(t.data.node);e instanceof O&&e.setName(t.data.text);break}case p.SELECT_TAB:{let i=this.idMap.get(t.data.tabNode),n=t.data.windowId?t.data.windowId:e.MAIN_WINDOW_ID,a=this.windows.get(n);if(i instanceof O){let e=i.getParent(),t=e.getChildren().indexOf(i);e instanceof z?e.getSelected()===t?e.setSelected(-1):e.setSelected(t):e instanceof M&&(e.getSelected()!==t&&e.setSelected(t),a.activeTabSet=e)}break}case p.SET_ACTIVE_TABSET:{let i=t.data.windowId?t.data.windowId:e.MAIN_WINDOW_ID,n=this.windows.get(i);if(void 0===t.data.tabsetNode)n.activeTabSet=void 0;else{let e=this.idMap.get(t.data.tabsetNode);e instanceof M&&(n.activeTabSet=e)}break}case p.ADJUST_WEIGHTS:{let e=this.idMap.get(t.data.nodeId).getChildren();for(let i=0;i<e.length;i++)e[i].setWeight(t.data.weights[i]);break}case p.ADJUST_BORDER_SPLIT:{let e=this.idMap.get(t.data.node);e instanceof z&&e.setSize(t.data.pos);break}case p.MAXIMIZE_TOGGLE:{let i=t.data.windowId?t.data.windowId:e.MAIN_WINDOW_ID,n=this.windows.get(i),a=this.idMap.get(t.data.node);a instanceof M&&(a===n.maximizedTabSet?n.maximizedTabSet=void 0:(n.maximizedTabSet=a,n.activeTabSet=a));break}case p.UPDATE_MODEL_ATTRIBUTES:this.updateAttrs(t.data.json);break;case p.UPDATE_NODE_ATTRIBUTES:this.idMap.get(t.data.node).updateAttrs(t.data.json)}for(let e of(this.updateIdMap(),this.changeListeners))e(t);return n}getActiveTabset(t=e.MAIN_WINDOW_ID){let i=this.windows.get(t);return i&&i.activeTabSet&&this.getNodeById(i.activeTabSet.getId())?i.activeTabSet:void 0}getMaximizedTabset(t=e.MAIN_WINDOW_ID){return this.windows.get(t).maximizedTabSet}getRoot(t=e.MAIN_WINDOW_ID){return this.windows.get(t).root}isRootOrientationVertical(){return this.attributes.rootOrientationVertical}isEnableRotateBorderIcons(){return this.attributes.enableRotateBorderIcons}getBorderSet(){return this.borders}getwindowsMap(){return this.windows}visitNodes(e){for(let[t,i]of(this.borders.forEachNode(e),this.windows))i.root.forEachNode(e,0)}visitWindowNodes(t,i){this.windows.has(t)&&(t===e.MAIN_WINDOW_ID&&this.borders.forEachNode(i),this.windows.get(t).visitNodes(i))}getNodeById(e){return this.idMap.get(e)}getFirstTabSet(t=this.windows.get(e.MAIN_WINDOW_ID).root){let i=t.getChildren()[0];return i instanceof M?i:this.getFirstTabSet(i)}static fromJson(t){let i=new e;if(e.attributeDefinitions.fromJson(t.global,i.attributes),t.borders&&(i.borders=E.fromJson(t.borders,i)),t.popouts)for(let e in t.popouts){let n=t.popouts[e],a=U.fromJson(n,i,e);i.windows.set(e,a)}return i.rootWindow.root=W.fromJson(t.layout,i,i.getwindowsMap().get(e.MAIN_WINDOW_ID)),i.tidy(),i}toJson(){let t={};e.attributeDefinitions.toJson(t,this.attributes),this.visitNodes(e=>{e.fireEvent("save",{})});let i={};for(let[t,n]of this.windows)t!==e.MAIN_WINDOW_ID&&(i[t]=n.toJson());return{global:t,borders:this.borders.toJson(),layout:this.rootWindow.root.toJson(),popouts:i}}getSplitterSize(){return this.attributes.splitterSize}getSplitterExtra(){return this.attributes.splitterExtra}isEnableEdgeDock(){return this.attributes.enableEdgeDock}isSplitterEnableHandle(){return this.attributes.splitterEnableHandle}setOnAllowDrop(e){this.onAllowDrop=e}setOnCreateTabSet(e){this.onCreateTabSet=e}addChangeListener(e){this.changeListeners.push(e)}removeChangeListener(e){let t=this.changeListeners.findIndex(t=>t===e);-1!==t&&this.changeListeners.splice(t,1)}toString(){return JSON.stringify(this.toJson())}removeEmptyWindows(){let t=new Set;for(let[i]of this.windows)if(i!==e.MAIN_WINDOW_ID){let e=0;this.visitWindowNodes(i,t=>{t instanceof O&&e++}),0===e&&t.add(i)}for(let e of t)this.windows.delete(e)}setActiveTabset(e,t){let i=this.windows.get(t);i&&(e?i.activeTabSet=e:i.activeTabSet=void 0)}setMaximizedTabset(e,t){let i=this.windows.get(t);i&&(e?i.maximizedTabSet=e:i.maximizedTabSet=void 0)}updateIdMap(){this.idMap.clear(),this.visitNodes(e=>{this.idMap.set(e.getId(),e)})}addNode(e){let t=e.getId();if(this.idMap.has(t))throw Error(`Error: each node must have a unique id, duplicate id:${e.getId()}`);this.idMap.set(t,e)}findDropTargetNode(t,i,n,a){let o=this.windows.get(t).root.findDropTargetNode(t,i,n,a);return void 0===o&&t===e.MAIN_WINDOW_ID&&(o=this.borders.findDropTargetNode(i,n,a)),o}tidy(){for(let[e,t]of this.windows)t.root.tidy()}updateAttrs(t){e.attributeDefinitions.update(t,this.attributes)}nextUniqueId(){return"#"+S()}getAttribute(e){return this.attributes[e]}getOnAllowDrop(){return this.onAllowDrop}getOnCreateTabSet(){return this.onCreateTabSet}static toTypescriptInterfaces(){e.attributeDefinitions.pairAttributes("RowNode",W.getAttributeDefinitions()),e.attributeDefinitions.pairAttributes("TabSetNode",M.getAttributeDefinitions()),e.attributeDefinitions.pairAttributes("TabNode",O.getAttributeDefinitions()),e.attributeDefinitions.pairAttributes("BorderNode",z.getAttributeDefinitions());let t=[];t.push(e.attributeDefinitions.toTypescriptInterface("Global",void 0)),t.push(W.getAttributeDefinitions().toTypescriptInterface("Row",e.attributeDefinitions)),t.push(M.getAttributeDefinitions().toTypescriptInterface("TabSet",e.attributeDefinitions)),t.push(O.getAttributeDefinitions().toTypescriptInterface("Tab",e.attributeDefinitions)),t.push(z.getAttributeDefinitions().toTypescriptInterface("Border",e.attributeDefinitions)),console.log(t.join("\n"))}static createAttributeDefinitions(){let e=new _;return e.add("enableEdgeDock",!0).setType(m.BOOLEAN).setDescription("enable docking to the edges of the layout, this will show the edge indicators"),e.add("rootOrientationVertical",!1).setType(m.BOOLEAN).setDescription("the top level 'row' will layout horizontally by default, set this option true to make it layout vertically"),e.add("enableRotateBorderIcons",!0).setType(m.BOOLEAN).setDescription("boolean indicating if tab icons should rotate with the text in the left and right borders"),e.add("splitterSize",8).setType(m.NUMBER).setDescription("width in pixels of all splitters between tabsets/borders"),e.add("splitterExtra",0).setType(m.NUMBER).setDescription("additional width in pixels of the splitter hit test area"),e.add("splitterEnableHandle",!1).setType(m.BOOLEAN).setDescription("enable a small centralized handle on all splitters"),e.add("tabEnableClose",!0).setType(m.BOOLEAN),e.add("tabCloseType",1).setType("ICloseType"),e.add("tabEnablePopout",!1).setType(m.BOOLEAN).setAlias("tabEnableFloat"),e.add("tabEnablePopoutIcon",!0).setType(m.BOOLEAN),e.add("tabEnablePopoutOverlay",!1).setType(m.BOOLEAN),e.add("tabEnableDrag",!0).setType(m.BOOLEAN),e.add("tabEnableRename",!0).setType(m.BOOLEAN),e.add("tabContentClassName",void 0).setType(m.STRING),e.add("tabClassName",void 0).setType(m.STRING),e.add("tabIcon",void 0).setType(m.STRING),e.add("tabEnableRenderOnDemand",!0).setType(m.BOOLEAN),e.add("tabDragSpeed",.3).setType(m.NUMBER),e.add("tabBorderWidth",-1).setType(m.NUMBER),e.add("tabBorderHeight",-1).setType(m.NUMBER),e.add("tabSetEnableDeleteWhenEmpty",!0).setType(m.BOOLEAN),e.add("tabSetEnableDrop",!0).setType(m.BOOLEAN),e.add("tabSetEnableDrag",!0).setType(m.BOOLEAN),e.add("tabSetEnableDivide",!0).setType(m.BOOLEAN),e.add("tabSetEnableMaximize",!0).setType(m.BOOLEAN),e.add("tabSetEnableClose",!1).setType(m.BOOLEAN),e.add("tabSetEnableSingleTabStretch",!1).setType(m.BOOLEAN),e.add("tabSetAutoSelectTab",!0).setType(m.BOOLEAN),e.add("tabSetEnableActiveIcon",!1).setType(m.BOOLEAN),e.add("tabSetClassNameTabStrip",void 0).setType(m.STRING),e.add("tabSetEnableTabStrip",!0).setType(m.BOOLEAN),e.add("tabSetEnableTabWrap",!1).setType(m.BOOLEAN),e.add("tabSetTabLocation","top").setType("ITabLocation"),e.add("tabMinWidth",H).setType(m.NUMBER),e.add("tabMinHeight",H).setType(m.NUMBER),e.add("tabSetMinWidth",H).setType(m.NUMBER),e.add("tabSetMinHeight",H).setType(m.NUMBER),e.add("tabMaxWidth",F).setType(m.NUMBER),e.add("tabMaxHeight",F).setType(m.NUMBER),e.add("tabSetMaxWidth",F).setType(m.NUMBER),e.add("tabSetMaxHeight",F).setType(m.NUMBER),e.add("tabSetEnableTabScrollbar",!1).setType(m.BOOLEAN),e.add("borderSize",200).setType(m.NUMBER),e.add("borderMinSize",H).setType(m.NUMBER),e.add("borderMaxSize",F).setType(m.NUMBER),e.add("borderEnableDrop",!0).setType(m.BOOLEAN),e.add("borderAutoSelectTabWhenOpen",!0).setType(m.BOOLEAN),e.add("borderAutoSelectTabWhenClosed",!1).setType(m.BOOLEAN),e.add("borderClassName",void 0).setType(m.STRING),e.add("borderEnableAutoHide",!1).setType(m.BOOLEAN),e.add("borderEnableTabScrollbar",!1).setType(m.BOOLEAN),e}};l(Y,"MAIN_WINDOW_ID","__main_window_id__"),l(Y,"attributeDefinitions",Y.createAttributeDefinitions());let P=Y,X=class e extends w{constructor(t,i,n){super(n),l(this,"contentRect",c.empty()),l(this,"tabHeaderRect",c.empty()),l(this,"location"),this.location=t,this.attributes.id=`border_${t.getName()}`,e.attributeDefinitions.fromJson(i,this.attributes),n.addNode(this)}static fromJson(t,i){let n=new e(u.getByName(t.location),t,i);return t.children&&(n.children=t.children.map(e=>{let t=O.fromJson(e,i);return t.setParent(n),t})),n}getLocation(){return this.location}getClassName(){return this.getAttr("className")}isHorizontal(){return this.location.orientation===h.HORZ}getSize(){let e=this.getAttr("size"),t=this.getSelected();if(-1===t)return e;{let i=this.children[t],n=this.isHorizontal()?i.getAttr("borderWidth"):i.getAttr("borderHeight");return -1===n?e:n}}getMinSize(){let e=this.getSelectedNode(),t=this.getAttr("minSize");return e&&(t=Math.max(t,this.isHorizontal()?e.getMinWidth():e.getMinHeight())),t}getMaxSize(){let e=this.getSelectedNode(),t=this.getAttr("maxSize");return e&&(t=Math.min(t,this.isHorizontal()?e.getMaxWidth():e.getMaxHeight())),t}getSelected(){return this.attributes.selected}isAutoHide(){return this.getAttr("enableAutoHide")}getSelectedNode(){if(-1!==this.getSelected())return this.children[this.getSelected()]}getOrientation(){return this.location.getOrientation()}getConfig(){return this.attributes.config}isMaximized(){return!1}isShowing(){return this.attributes.show}toJson(){let t={};return e.attributeDefinitions.toJson(t,this.attributes),t.location=this.location.getName(),t.children=this.children.map(e=>e.toJson()),t}isAutoSelectTab(e){return(null==e&&(e=-1!==this.getSelected()),e)?this.getAttr("autoSelectTabWhenOpen"):this.getAttr("autoSelectTabWhenClosed")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}setSelected(e){this.attributes.selected=e}getTabHeaderRect(){return this.tabHeaderRect}setTabHeaderRect(e){this.tabHeaderRect=e}getRect(){return this.tabHeaderRect}getContentRect(){return this.contentRect}setContentRect(e){this.contentRect=e}isEnableDrop(){return this.getAttr("enableDrop")}setSize(e){let t=this.getSelected();if(-1===t)this.attributes.size=e;else{let i=this.children[t];-1===(this.isHorizontal()?i.getAttr("borderWidth"):i.getAttr("borderHeight"))?this.attributes.size=e:this.isHorizontal()?i.setBorderWidth(e):i.setBorderHeight(e)}}updateAttrs(t){e.attributeDefinitions.update(t,this.attributes)}remove(e){let t=this.removeChild(e);-1!==this.getSelected()&&C(this,t)}canDrop(e,t,i){let n;if(!(e instanceof O))return;let a=u.CENTER;if(this.tabHeaderRect.contains(t,i)){if(this.location.orientation===h.VERT)if(this.children.length>0){let e=this.children[0],i=e.getTabRect(),o=i.y,s=i.height,r=this.tabHeaderRect.x,d=0;for(let l=0;l<this.children.length;l++){if(d=(i=(e=this.children[l]).getTabRect()).x+i.width/2,t>=r&&t<d){n=new f(this,new c(i.x-2,o,3,s),a,l,g.FLEXLAYOUT__OUTLINE_RECT);break}r=d}null==n&&(n=new f(this,new c(i.getRight()-2,o,3,s),a,this.children.length,g.FLEXLAYOUT__OUTLINE_RECT))}else n=new f(this,new c(this.tabHeaderRect.x+1,this.tabHeaderRect.y+2,3,18),a,0,g.FLEXLAYOUT__OUTLINE_RECT);else if(this.children.length>0){let e=this.children[0],t=e.getTabRect(),o=t.x,s=t.width,r=this.tabHeaderRect.y,d=0;for(let l=0;l<this.children.length;l++){if(d=(t=(e=this.children[l]).getTabRect()).y+t.height/2,i>=r&&i<d){n=new f(this,new c(o,t.y-2,s,3),a,l,g.FLEXLAYOUT__OUTLINE_RECT);break}r=d}null==n&&(n=new f(this,new c(o,t.getBottom()-2,s,3),a,this.children.length,g.FLEXLAYOUT__OUTLINE_RECT))}else n=new f(this,new c(this.tabHeaderRect.x+2,this.tabHeaderRect.y+1,18,3),a,0,g.FLEXLAYOUT__OUTLINE_RECT);if(!e.canDockInto(e,n))return}else if(-1!==this.getSelected()&&this.contentRect.contains(t,i)&&(n=new f(this,this.contentRect,a,-1,g.FLEXLAYOUT__OUTLINE_RECT),!e.canDockInto(e,n)))return;return n}drop(t,i,n,a){let o=0,s=t.getParent();void 0!==s&&(o=s.removeChild(t),s!==this&&s instanceof e&&s.getSelected()===o?s.setSelected(-1):C(s,o)),t instanceof O&&s===this&&o<n&&n>0&&n--;let r=n;-1===r&&(r=this.children.length),t instanceof O&&this.addChild(t,r),(a||!1!==a&&this.isAutoSelectTab())&&this.setSelected(r),this.model.tidy()}getSplitterBounds(e,t=!1){let i=[0,0],n=t?this.getMinSize():0,a=t?this.getMaxSize():99999,o=this.model.getRoot(P.MAIN_WINDOW_ID),s=o.getRect(),r=this.model.getSplitterSize();if(this.location===u.TOP){i[0]=this.tabHeaderRect.getBottom()+n;let e=this.tabHeaderRect.getBottom()+a;i[1]=Math.max(i[0],s.getBottom()-o.getMinHeight()-r),i[1]=Math.min(i[1],e)}else if(this.location===u.LEFT){i[0]=this.tabHeaderRect.getRight()+n;let e=this.tabHeaderRect.getRight()+a;i[1]=Math.max(i[0],s.getRight()-o.getMinWidth()-r),i[1]=Math.min(i[1],e)}else if(this.location===u.BOTTOM){i[1]=this.tabHeaderRect.y-n-r;let e=this.tabHeaderRect.y-a-r;i[0]=Math.min(i[1],s.y+o.getMinHeight()),i[0]=Math.max(i[0],e)}else if(this.location===u.RIGHT){i[1]=this.tabHeaderRect.x-n-r;let e=this.tabHeaderRect.x-a-r;i[0]=Math.min(i[1],s.x+o.getMinWidth()),i[0]=Math.max(i[0],e)}return i}calculateSplit(e,t){let i=this.getSplitterBounds(t);return this.location===u.BOTTOM||this.location===u.RIGHT?Math.max(0,i[1]-t):Math.max(0,t-i[0])}getAttributeDefinitions(){return e.attributeDefinitions}static getAttributeDefinitions(){return e.attributeDefinitions}static createAttributeDefinitions(){let t=new _;return t.add("type",e.TYPE,!0).setType(m.STRING).setFixed(),t.add("selected",-1).setType(m.NUMBER).setDescription("index of selected/visible tab in border; -1 means no tab selected"),t.add("show",!0).setType(m.BOOLEAN).setDescription("show/hide this border"),t.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),t.addInherited("enableDrop","borderEnableDrop").setType(m.BOOLEAN).setDescription("whether tabs can be dropped into this border"),t.addInherited("className","borderClassName").setType(m.STRING).setDescription("class applied to tab button"),t.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(m.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is already open"),t.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(m.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is currently closed"),t.addInherited("size","borderSize").setType(m.NUMBER).setDescription("size of the tab area when selected"),t.addInherited("minSize","borderMinSize").setType(m.NUMBER).setDescription("the minimum size of the tab area"),t.addInherited("maxSize","borderMaxSize").setType(m.NUMBER).setDescription("the maximum size of the tab area"),t.addInherited("enableAutoHide","borderEnableAutoHide").setType(m.BOOLEAN).setDescription("hide border if it has zero tabs"),t.addInherited("enableTabScrollbar","borderEnableTabScrollbar").setType(m.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),t}};l(X,"TYPE","border"),l(X,"attributeDefinitions",X.createAttributeDefinitions());let z=X,j=!1,k=e=>{let t,{layout:i,node:n,index:s,horizontal:r}=e,[d,l]=o.useState(!1),u=o.useRef(null),b=o.useRef(null),T=o.useRef([]),m=o.useRef(void 0),_=o.useRef(void 0),f=o.useRef(0),E=o.useRef(0),w=o.useRef({initialSizes:[],sum:0,startPosition:0}),O=n.getModel().getSplitterSize(),L=n.getModel().getSplitterExtra();y()||(L=Math.max(20,L+O)-O),o.useEffect(()=>{var e,t;return null==(e=u.current)||e.addEventListener("touchstart",R,{passive:!1}),null==(t=b.current)||t.addEventListener("touchstart",R,{passive:!1}),()=>{var e,t;null==(e=u.current)||e.removeEventListener("touchstart",R),null==(t=b.current)||t.removeEventListener("touchstart",R)}},[]);let R=e=>{e.preventDefault(),e.stopImmediatePropagation()},v=e=>{var t;e.stopPropagation(),n instanceof W&&(w.current=n.getSplitterInitials(s)),A(!1,i.getCurrentDocument()),x(e.currentTarget.ownerDocument,e,D,C,N),T.current=n.getSplitterBounds(s,!0);let a=i.getRootDiv();m.current=i.getCurrentDocument().createElement("div"),m.current.style.flexDirection=r?"row":"column",m.current.className=i.getClassName(g.FLEXLAYOUT__SPLITTER_DRAG),m.current.style.cursor=n.getOrientation()===h.VERT?"ns-resize":"ew-resize",n.getModel().isSplitterEnableHandle()&&(_.current=i.getCurrentDocument().createElement("div"),_.current.className=M(g.FLEXLAYOUT__SPLITTER_HANDLE)+" "+(r?M(g.FLEXLAYOUT__SPLITTER_HANDLE_HORZ):M(g.FLEXLAYOUT__SPLITTER_HANDLE_VERT)),m.current.appendChild(_.current));let o=null==(t=u.current)?void 0:t.getBoundingClientRect(),d=new c(o.x-i.getDomRect().x,o.y-i.getDomRect().y,o.width,o.height);f.current=e.clientX-o.x,E.current=e.clientY-o.y,d.positionElement(m.current),a&&a.appendChild(m.current),l(!0),j=!0},N=()=>{let e=i.getRootDiv();e&&m.current&&e.removeChild(m.current),m.current=void 0,l(!1),j=!1},D=(e,t)=>{if(m.current){let a=i.getDomRect();a&&(n.getOrientation()===h.VERT?m.current.style.top=B(t-a.y-E.current)+"px":m.current.style.left=B(e-a.x-f.current)+"px",i.isRealtimeResize()&&S())}},C=()=>{if(m.current){S();let e=i.getRootDiv();e&&m.current&&e.removeChild(m.current),m.current=void 0}A(!0,i.getCurrentDocument()),l(!1),j=!1},S=e=>{if(m.current){let e=0;if(e=n.getOrientation()===h.VERT?m.current.offsetTop:m.current.offsetLeft,n instanceof z){let t=n.calculateSplit(n,e);i.doAction(p.adjustBorderSplit(n.getId(),t))}else{let t=w.current,a=n.calculateSplit(s,e,t.initialSizes,t.sum,t.startPosition);i.doAction(p.adjustWeights(n.getId(),a))}}},B=e=>{let t=T.current,i=e;return e<t[0]&&(i=t[0]),e>t[1]&&(i=t[1]),i},M=i.getClassName,I={cursor:r?"ew-resize":"ns-resize",flexDirection:r?"column":"row"},U=M(g.FLEXLAYOUT__SPLITTER)+" "+M(g.FLEXLAYOUT__SPLITTER_+n.getOrientation().getName());if(n instanceof z?U+=" "+M(g.FLEXLAYOUT__SPLITTER_BORDER):void 0!==n.getModel().getMaximizedTabset(i.getWindowId())&&(I.display="none"),r?(I.width=O+"px",I.minWidth=O+"px"):(I.height=O+"px",I.minHeight=O+"px"),!d&&n.getModel().isSplitterEnableHandle()&&(t=(0,a.jsx)("div",{className:M(g.FLEXLAYOUT__SPLITTER_HANDLE)+" "+(r?M(g.FLEXLAYOUT__SPLITTER_HANDLE_HORZ):M(g.FLEXLAYOUT__SPLITTER_HANDLE_VERT))})),0===L)return(0,a.jsx)("div",{className:U,style:I,ref:u,"data-layout-path":n.getPath()+"/s"+(s-1),onPointerDown:v,children:t});{let e={};n.getOrientation()===h.HORZ?(e.height="100%",e.width=O+L+"px",e.cursor="ew-resize"):(e.height=O+L+"px",e.width="100%",e.cursor="ns-resize");let t=M(g.FLEXLAYOUT__SPLITTER_EXTRA);return(0,a.jsx)("div",{className:U,style:I,ref:u,"data-layout-path":n.getPath()+"/s"+(s-1),onPointerDown:v,children:(0,a.jsx)("div",{style:e,ref:b,className:t,onPointerDown:v})})}};function G(e){let{layout:t,border:i,show:n}=e,s=o.useRef(null),r=o.useRef(void 0);o.useLayoutEffect(()=>{let e=t.getBoundingClientRect(s.current);isNaN(e.x)||!(e.width>0)||i.getContentRect().equals(e)||(i.setContentRect(e),j?(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{t.redrawInternal("border content rect "+e),r.current=void 0},50)):t.redrawInternal("border content rect "+e))});let d=!0,l={};i.getOrientation()===h.HORZ?(l.width=i.getSize(),l.minWidth=i.getMinSize(),l.maxWidth=i.getMaxSize()):(l.height=i.getSize(),l.minHeight=i.getMinSize(),l.maxHeight=i.getMaxSize(),d=!1),l.display=n?"flex":"none";let c=t.getClassName(g.FLEXLAYOUT__BORDER_TAB_CONTENTS);return i.getLocation()===u.LEFT||i.getLocation()===u.TOP?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:s,style:l,className:c}),n&&(0,a.jsx)(k,{layout:t,node:i,index:0,horizontal:d})]}):(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(k,{layout:t,node:i,index:0,horizontal:d}),(0,a.jsx)("div",{ref:s,style:l,className:c})]})}var V=((n=V||{})[n.Visible=1]="Visible",n[n.Always=2]="Always",n[n.Selected=3]="Selected",n);let J=e=>{let{layout:t,node:i,selected:n,border:s,icons:r,path:d}=e,l=o.useRef(null),h=o.useRef(null);o.useLayoutEffect(()=>{i.setTabRect(t.getBoundingClientRect(l.current)),t.getEditingTab()===i&&h.current.select()});let c=t.getClassName,u=c(g.FLEXLAYOUT__BORDER_BUTTON)+" "+c(g.FLEXLAYOUT__BORDER_BUTTON_+s);n?u+=" "+c(g.FLEXLAYOUT__BORDER_BUTTON__SELECTED):u+=" "+c(g.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),void 0!==i.getClassName()&&(u+=" "+i.getClassName());let T=0;!1===i.getModel().isEnableRotateBorderIcons()&&("left"===s?T=90:"right"===s&&(T=-90));let m=L(t,i,T),_=m.content?(0,a.jsx)("div",{className:c(g.FLEXLAYOUT__BORDER_BUTTON_CONTENT),children:m.content}):null,f=m.leading?(0,a.jsx)("div",{className:c(g.FLEXLAYOUT__BORDER_BUTTON_LEADING),children:m.leading}):null;if(t.getEditingTab()===i&&(_=(0,a.jsx)("input",{ref:h,className:c(g.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":d+"/textbox",type:"text",autoFocus:!0,defaultValue:i.getName(),onKeyDown:e=>{"Escape"===e.code?t.setEditingTab(void 0):("Enter"===e.code||"NumpadEnter"===e.code)&&(t.setEditingTab(void 0),t.doAction(p.renameTab(i.getId(),e.target.value)))},onPointerDown:e=>{e.stopPropagation()}})),i.isEnableClose()){let e=t.i18nName(b.Close_Tab);m.buttons.push((0,a.jsx)("div",{"data-layout-path":d+"/button/close",title:e,className:c(g.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onPointerDown:e=>{e.stopPropagation()},onClick:e=>{let a;a=i.getCloseType(),(n||a===V.Always||a===V.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches||0)&&(t.doAction(p.deleteTab(i.getId())),e.stopPropagation())},children:"function"==typeof r.close?r.close(i):r.close},"close"))}return(0,a.jsxs)("div",{ref:l,"data-layout-path":d,className:u,onClick:()=>{t.doAction(p.selectTab(i.getId()))},onAuxClick:e=>{R(e)&&t.auxMouseClick(i,e)},onContextMenu:e=>{t.showContextMenu(i,e)},title:i.getHelpText(),draggable:!0,onDragStart:e=>{i.isEnableDrag()?(e.stopPropagation(),t.setDragNode(e.nativeEvent,i)):e.preventDefault()},onDragEnd:e=>{e.stopPropagation(),t.clearDragMain()},children:[f,_,m.buttons]})},Z=e=>{let{layout:t,node:i}=e,n=t.getClassName,o=n(g.FLEXLAYOUT__TAB_BUTTON_STAMP),s=L(t,i),r=s.content?(0,a.jsx)("div",{className:n(g.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:s.content}):i.getNameForOverflowMenu(),d=s.leading?(0,a.jsx)("div",{className:n(g.FLEXLAYOUT__TAB_BUTTON_LEADING),children:s.leading}):null;return(0,a.jsxs)("div",{className:o,title:i.getHelpText(),children:[d,r]})};function q(e,t,i,n,o){let s=o.getRootDiv(),r=o.getClassName,d=e.ownerDocument,l=e.getBoundingClientRect(),h=(null==s?void 0:s.getBoundingClientRect())??new DOMRect(0,0,100,100),c=d.createElement("div");c.className=r(g.FLEXLAYOUT__POPUP_MENU_CONTAINER),l.left<h.left+h.width/2?c.style.left=l.left-h.left+"px":c.style.right=h.right-l.right+"px",l.top<h.top+h.height/2?c.style.top=l.top-h.top+"px":c.style.bottom=h.bottom-l.bottom+"px",o.showOverlay(!0),s&&s.appendChild(c);let u=()=>{o.hideControlInPortal(),o.showOverlay(!1),s&&s.removeChild(c),c.removeEventListener("pointerdown",b),d.removeEventListener("pointerdown",T)},b=e=>{e.stopPropagation()},T=e=>{u()};c.addEventListener("pointerdown",b),d.addEventListener("pointerdown",T),o.showControlInPortal((0,a.jsx)(K,{currentDocument:d,parentNode:t,onSelect:n,onHide:u,items:i,classNameMapper:r,layout:o}),c)}let K=e=>{let{parentNode:t,items:i,onHide:n,onSelect:s,classNameMapper:r,layout:d}=e,l=(0,o.useRef)(null);(0,o.useEffect)(()=>{l.current&&l.current.focus()},[]);let h=e=>{d.clearDragMain()},c=i.map((e,i)=>{let o=r(g.FLEXLAYOUT__POPUP_MENU_ITEM);return t.getSelected()===e.index&&(o+=" "+r(g.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED)),(0,a.jsx)("div",{className:o,"data-layout-path":"/popup-menu/tb"+i,onClick:t=>{s(e),n(),t.stopPropagation()},draggable:!0,onDragStart:t=>{var i;return i=e.node,void(t.stopPropagation(),d.setDragNode(t.nativeEvent,i),setTimeout(()=>{n()},0))},onDragEnd:h,title:e.node.getHelpText(),children:(0,a.jsx)(Z,{node:e.node,layout:d})},e.index)});return(0,a.jsx)("div",{className:r(g.FLEXLAYOUT__POPUP_MENU),ref:l,tabIndex:0,onKeyDown:e=>{"Escape"===e.key&&n()},"data-layout-path":"/popup-menu",children:c})},$=(e,t,i,n,a,s)=>{let[r,d]=o.useState([]),[l,c]=o.useState(!1),[u,b]=o.useState(!1),g=o.useRef(null),T=o.useRef(!1),p=o.useRef(void 0),m=o.useRef([]),_=o.useRef(0),f=o.useRef(!1);m.current=r,o.useLayoutEffect(()=>{n.current&&M(0)},[t.getId()]),o.useLayoutEffect(()=>{T.current=!1},[t.getSelectedNode(),t.getRect().width,t.getRect().height]),o.useLayoutEffect(()=>{A(),!1===T.current&&function(){let i=t.getSelectedNode();if(i&&n.current){let t=e.getBoundingClientRect(n.current),a=i.getTabRect(),o=N(t)-N(a);o>0||S(a)>S(t)?(M(I(n.current)-o),f.current=!0):(o=D(a)-D(t))>0&&(M(I(n.current)+o),f.current=!0)}}(),w(),O()}),o.useEffect(()=>{var e;return null==(e=g.current)||e.addEventListener("wheel",E,{passive:!1}),()=>{var e;null==(e=g.current)||e.removeEventListener("wheel",E)}},[g.current]);let E=e=>{e.preventDefault()},w=()=>{if(n.current&&a.current){let e=n.current,t=a.current,o=C(e),s=B(e),r=I(e);if(s>o&&s>0){let e=o*o/s,n=0;e<20&&(n=20-e,e=20);let a=r*(o-n)/s;i===h.HORZ?(t.style.width=e+"px",t.style.left=a+"px"):(t.style.height=e+"px",t.style.top=a+"px"),t.style.display="block"}else t.style.display="none";i===h.HORZ?t.style.bottom="0px":t.style.right="0px"}},O=()=>{let e=v().length>0;e!==l&&c(e),void 0===p.current&&(p.current=setTimeout(()=>{var e,t;let i=v();e=i,t=m.current,e.length===t.length&&e.every((e,i)=>e===t[i])||d(i),p.current=void 0},100))},y=(e,t)=>{if(n.current&&a.current){let o=n.current,s=a.current,r=C(o),d=B(o),l=C(s),c=o.getBoundingClientRect(),u=0;u=Math.max(0,Math.min(d-l,u=i===h.HORZ?e-c.x-_.current:t-c.y-_.current)),r>0&&M(u*d/r)}},L=()=>{},R=()=>{},A=()=>{if(n.current){let e=C(n.current.firstElementChild)+10*!!u>C(n.current);e!==u&&b(e)}},v=()=>{let e=[];if(n.current){let t=n.current,i=t.getBoundingClientRect(),a=N(i)-1,o=D(i)+1,r=t.firstElementChild,d=0;Array.from(r.children).forEach(t=>{let i=t.getBoundingClientRect();t.classList.contains(s)&&((N(i)<a||D(i)>o)&&e.push(d),d++)})}return e},N=e=>i===h.HORZ?e.x:e.y,D=e=>i===h.HORZ?e.right:e.bottom,C=e=>i===h.HORZ?e.clientWidth:e.clientHeight,S=e=>i===h.HORZ?e.width:e.height,B=e=>i===h.HORZ?e.scrollWidth:e.scrollHeight,M=e=>{i===h.HORZ?n.current.scrollLeft=e:n.current.scrollTop=e},I=e=>i===h.HORZ?e.scrollLeft:e.scrollTop;return{selfRef:g,userControlledPositionRef:T,onScroll:()=>{f.current||(T.current=!0),f.current=!1,w(),O()},onScrollPointerDown:e=>{var t;e.stopPropagation(),a.current.setPointerCapture(e.pointerId);let n=null==(t=a.current)?void 0:t.getBoundingClientRect();i===h.HORZ?_.current=e.clientX-n.x:_.current=e.clientY-n.y,x(e.currentTarget.ownerDocument,e,y,L,R)},hiddenTabs:r,onMouseWheel:e=>{if(n.current){if(0===t.getChildren().length)return;let i=0;if(Math.abs(e.deltaY)>0){i=-e.deltaY,1===e.deltaMode&&(i*=40);let t=I(n.current)-i;M(Math.max(0,Math.min(B(n.current)-C(n.current),t))),e.stopPropagation()}}},isDockStickyButtons:u,isShowHiddenTabs:l}},Q=e=>{let t,i,n,{border:s,layout:r,size:d}=e,l=o.useRef(null),c=o.useRef(null),T=o.useRef(null),m=o.useRef(null),_=o.useRef(null),f=r.getIcons();o.useLayoutEffect(()=>{s.setTabHeaderRect(r.getBoundingClientRect(E.current))});let{selfRef:E,userControlledPositionRef:w,onScroll:O,onScrollPointerDown:y,hiddenTabs:L,onMouseWheel:A,isDockStickyButtons:v,isShowHiddenTabs:x}=$(r,s,h.flip(s.getOrientation()),_,c,r.getClassName(g.FLEXLAYOUT__BORDER_BUTTON)),N=e=>{R(e)&&r.auxMouseClick(s,e)},D=e=>{e.stopPropagation()},C=e=>{r.doAction(p.selectTab(e.node.getId())),w.current=!1},S=r.getClassName,B=[],M=e=>{let t=s.getSelected()===e,i=s.getChildren()[e];B.push((0,a.jsx)(J,{layout:r,border:s.getLocation().getName(),node:i,path:s.getPath()+"/tb"+e,selected:t,icons:f},i.getId())),e<s.getChildren().length-1&&B.push((0,a.jsx)("div",{className:S(g.FLEXLAYOUT__BORDER_TAB_DIVIDER)},"divider"+e))};for(let e=0;e<s.getChildren().length;e++)M(e);let I=S(g.FLEXLAYOUT__BORDER)+" "+S(g.FLEXLAYOUT__BORDER_+s.getLocation().getName());void 0!==s.getClassName()&&(I+=" "+s.getClassName());let W=[],U=[],H={leading:t,buttons:W,stickyButtons:U,overflowPosition:void 0};if(r.customizeTabSet(s,H),t=H.leading,U=H.stickyButtons,W=H.buttons,void 0===H.overflowPosition&&(H.overflowPosition=U.length),U.length>0&&(v?W=[...U,...W]:B.push((0,a.jsx)("div",{ref:m,onPointerDown:D,onDragStart:e=>{e.preventDefault()},className:S(g.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:U},"sticky_buttons_container"))),x){let e,t=r.i18nName(b.Overflow_Menu_Tooltip);if("function"==typeof f.more){let t=L.map(e=>({index:e,node:s.getChildren()[e]}));e=f.more(s,t)}else e=(0,a.jsxs)(a.Fragment,{children:[f.more,(0,a.jsx)("div",{className:S(g.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:L.length>0?L.length:""})]});W.splice(Math.min(H.overflowPosition,W.length),0,(0,a.jsx)("button",{ref:T,className:S(g.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+S(g.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+S(g.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+s.getLocation().getName()),title:t,onClick:e=>{let t=r.getShowOverflowMenu(),i=L.map(e=>({index:e,node:s.getChildren()[e]}));void 0!==t?t(s,e,i,C):q(T.current,s,i,C,r),e.stopPropagation()},onPointerDown:D,children:e},"overflowbutton"))}let F=s.getSelected();if(-1!==F){let e=s.getChildren()[F];if(void 0!==e&&r.isSupportsPopout()&&e.isEnablePopout()){let t=r.i18nName(b.Popout_Tab);W.push((0,a.jsx)("button",{title:t,className:S(g.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+S(g.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:e=>{let t=s.getChildren()[s.getSelected()];void 0!==t&&r.doAction(p.popoutTab(t.getId())),e.stopPropagation()},onPointerDown:D,children:"function"==typeof f.popout?f.popout(e):f.popout},"popout"))}}let Y=(0,a.jsx)("div",{ref:l,className:S(g.FLEXLAYOUT__BORDER_TOOLBAR)+" "+S(g.FLEXLAYOUT__BORDER_TOOLBAR_+s.getLocation().getName()),children:W},"toolbar"),P={},X={},z=d-1;return s.getLocation()===u.LEFT?(P={right:"100%",top:0},X={width:z,overflowY:"auto"}):s.getLocation()===u.RIGHT?(P={left:"100%",top:0},X={width:z,overflowY:"auto"}):(P={left:0},X={height:z,overflowX:"auto"}),s.isEnableTabScrollbar()&&(i=(0,a.jsx)("div",{ref:c,className:S(g.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:y})),t&&(n=(0,a.jsx)("div",{className:S(g.FLEXLAYOUT__BORDER_LEADING),children:t})),(0,a.jsxs)("div",{ref:E,style:{display:"flex",flexDirection:s.getOrientation()===h.VERT?"row":"column"},className:I,"data-layout-path":s.getPath(),onClick:N,onAuxClick:N,onContextMenu:e=>{r.showContextMenu(s,e)},onWheel:A,children:[n,(0,a.jsxs)("div",{className:S(g.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[(0,a.jsx)("div",{ref:_,className:S(g.FLEXLAYOUT__BORDER_INNER)+" "+S(g.FLEXLAYOUT__BORDER_INNER_+s.getLocation().getName()),style:X,onScroll:O,children:(0,a.jsx)("div",{style:P,className:S(g.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+S(g.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+s.getLocation().getName()),children:B})}),i]}),Y]})},ee=e=>{let{layout:t,node:i}=e,n=o.useRef(null);o.useEffect(()=>{i.setTabStamp(n.current)},[i,n.current]);let s=(0,t.getClassName)(g.FLEXLAYOUT__DRAG_RECT);return(0,a.jsx)("div",{ref:n,className:s,children:(0,a.jsx)(Z,{layout:t,node:i},i.getId())})},et=e=>{let{title:t,layout:i,layoutWindow:n,url:a,onCloseWindow:r,onSetWindow:d,children:l}=e,h=o.useRef(null),[c,u]=o.useState(void 0),b=new Map;return(o.useLayoutEffect(()=>{if(!h.current){let e=n.windowId,i=n.rect;h.current=window.open(a,e,`left=${i.x},top=${i.y},width=${i.width},height=${i.height}`),h.current?(n.window=h.current,d(n,h.current),window.addEventListener("beforeunload",()=>{if(h.current){let e=h.current;h.current=null,e.close()}}),h.current.addEventListener("load",()=>{if(h.current){h.current.focus(),h.current.resizeTo(i.width,i.height),h.current.moveTo(i.x,i.y);let e=h.current.document;e.title=t;let a=e.createElement("div");a.className=g.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,e.body.appendChild(a),(function(e,t){let i=[];for(let n of document.querySelectorAll('style, link[rel="stylesheet"]'))ei(e,n,t,i);return Promise.all(i)})(e,b).then(()=>{u(a)});let o=new MutationObserver(t=>(function(e,t,i){for(let n of e)if("childList"===n.type){for(let e of n.addedNodes)(e instanceof HTMLLinkElement||e instanceof HTMLStyleElement)&&ei(t,e,i);for(let e of n.removedNodes)if(e instanceof HTMLLinkElement||e instanceof HTMLStyleElement){let n=i.get(e);n&&t.head.removeChild(n)}}})(t,e,b));o.observe(document.head,{childList:!0}),h.current.addEventListener("beforeunload",()=>{h.current&&(r(n),h.current=null,o.disconnect())})}})):(console.warn(`Unable to open window ${a}`),r(n))}return()=>{var e;i.getModel().getwindowsMap().has(n.windowId)||(null==(e=h.current)||e.close(),h.current=null)}},[]),void 0!==c)?(0,s.createPortal)(l,c):null};function ei(e,t,i,n){if(t instanceof HTMLLinkElement){let a=t.cloneNode(!0);e.head.appendChild(a),i.set(t,a),n&&n.push(new Promise(e=>{a.onload=()=>e(!0)}))}else if(t instanceof HTMLStyleElement)try{let n=t.cloneNode(!0);e.head.appendChild(n),i.set(t,n)}catch(e){}}let en={width:"1em",height:"1em",display:"flex",alignItems:"center"},ea=()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:en,viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,a.jsx)("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}),eo=e=>{let{layout:t,show:i}=e;return(0,a.jsx)("div",{className:t.getClassName(g.FLEXLAYOUT__LAYOUT_OVERLAY),style:{display:i?"flex":"none"}})},es=e=>{let{layout:t,node:i,selected:n,path:s}=e,r=o.useRef(null),d=o.useRef(null),l=t.getIcons();o.useLayoutEffect(()=>{i.setTabRect(t.getBoundingClientRect(r.current)),t.getEditingTab()===i&&d.current.select()});let h=e=>{e.target!==d.current&&(t.getCurrentDocument().body.removeEventListener("pointerdown",h),t.setEditingTab(void 0))},c=t.getClassName,u=i.getParent(),T=u.isEnableSingleTabStretch()&&1===u.getChildren().length,m=T?g.FLEXLAYOUT__TAB_BUTTON_STRETCH:g.FLEXLAYOUT__TAB_BUTTON,_=c(m);_+=" "+c(m+"_"+u.getTabLocation()),T||(n?_+=" "+c(m+"--selected"):_+=" "+c(m+"--unselected")),void 0!==i.getClassName()&&(_+=" "+i.getClassName());let f=L(t,i),E=f.content?(0,a.jsx)("div",{className:c(g.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:f.content}):null,w=f.leading?(0,a.jsx)("div",{className:c(g.FLEXLAYOUT__TAB_BUTTON_LEADING),children:f.leading}):null;if(t.getEditingTab()===i&&(E=(0,a.jsx)("input",{ref:d,className:c(g.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":s+"/textbox",type:"text",autoFocus:!0,defaultValue:i.getName(),onKeyDown:e=>{"Escape"===e.code?t.setEditingTab(void 0):("Enter"===e.code||"NumpadEnter"===e.code)&&(t.setEditingTab(void 0),t.doAction(p.renameTab(i.getId(),e.target.value)))},onPointerDown:e=>{e.stopPropagation()}})),i.isEnableClose()&&!T){let e=t.i18nName(b.Close_Tab);f.buttons.push((0,a.jsx)("div",{"data-layout-path":s+"/button/close",title:e,className:c(g.FLEXLAYOUT__TAB_BUTTON_TRAILING),onPointerDown:e=>{e.stopPropagation()},onClick:e=>{let a;a=i.getCloseType(),(n||a===V.Always||a===V.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches||0)&&(t.doAction(p.deleteTab(i.getId())),e.stopPropagation())},children:"function"==typeof l.close?l.close(i):l.close},"close"))}return(0,a.jsxs)("div",{ref:r,"data-layout-path":s,className:_,onClick:()=>{t.doAction(p.selectTab(i.getId()))},onAuxClick:e=>{R(e)&&t.auxMouseClick(i,e)},onContextMenu:e=>{t.showContextMenu(i,e)},title:i.getHelpText(),draggable:!0,onDragStart:e=>{i.isEnableDrag()?(e.stopPropagation(),t.setDragNode(e.nativeEvent,i)):e.preventDefault()},onDragEnd:e=>{t.clearDragMain()},onDoubleClick:e=>{i.isEnableRename()&&(t.setEditingTab(i),t.getCurrentDocument().body.addEventListener("pointerdown",h),e.stopPropagation())},children:[w,E,f.buttons]})},er=e=>{let t,i,n,r,{node:d,layout:l}=e,c=o.useRef(null),u=o.useRef(null),T=o.useRef(null),m=o.useRef(null),_=o.useRef(null),f=o.useRef(null),E=o.useRef(null),w=o.useRef(void 0),O=l.getIcons();o.useLayoutEffect(()=>{d.setRect(l.getBoundingClientRect(y.current)),c.current&&d.setTabStripRect(l.getBoundingClientRect(c.current));let e=l.getBoundingClientRect(m.current);d.getContentRect().equals(e)||isNaN(e.x)||(d.setContentRect(e),j?(w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{l.redrawInternal("border content rect "+e),w.current=void 0},50)):l.redrawInternal("border content rect "+e))});let{selfRef:y,userControlledPositionRef:L,onScroll:A,onScrollPointerDown:v,hiddenTabs:x,onMouseWheel:N,isDockStickyButtons:D,isShowHiddenTabs:C}=$(l,d,h.HORZ,T,u,l.getClassName(g.FLEXLAYOUT__TAB_BUTTON)),S=e=>{l.doAction(p.selectTab(e.node.getId())),L.current=!1},B=e=>{l.getEditingTab()?e.preventDefault():d.isEnableDrag()?(e.stopPropagation(),l.setDragNode(e.nativeEvent,d)):e.preventDefault()},M=e=>{R(e)||l.doAction(p.setActiveTabset(d.getId(),l.getWindowId()))},I=e=>{R(e)&&l.auxMouseClick(d,e)},W=e=>{l.showContextMenu(d,e)},U=e=>{e.stopPropagation()},H=e=>{d.canMaximize()&&l.maximize(d)},F=l.getClassName,Y=d.getSelectedNode(),P=d.getPath(),X=[];if(d.isEnableTabStrip())for(let e=0;e<d.getChildren().length;e++){let t=d.getChildren()[e],i=d.getSelected()===e;X.push((0,a.jsx)(es,{layout:l,node:t,path:P+"/tb"+e,selected:i},t.getId())),e<d.getChildren().length-1&&X.push((0,a.jsx)("div",{className:F(g.FLEXLAYOUT__TABSET_TAB_DIVIDER)},"divider"+e))}let z=[],k=[],G={leading:n,stickyButtons:z,buttons:k,overflowPosition:void 0};l.customizeTabSet(d,G),n=G.leading,z=G.stickyButtons,k=G.buttons;let V=d.isEnableSingleTabStretch()&&1===d.getChildren().length,J=V&&d.getChildren()[0].isEnableClose()||d.isEnableClose();if(void 0===G.overflowPosition&&(G.overflowPosition=z.length),z.length>0&&(!d.isEnableTabWrap()&&(D||V)?k=[...z,...k]:X.push((0,a.jsx)("div",{ref:E,onPointerDown:U,onDragStart:e=>{e.preventDefault()},className:F(g.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:z},"sticky_buttons_container"))),!d.isEnableTabWrap()&&C){let e,t=l.i18nName(b.Overflow_Menu_Tooltip);if("function"==typeof O.more){let t=x.map(e=>({index:e,node:d.getChildren()[e]}));e=O.more(d,t)}else e=(0,a.jsxs)(a.Fragment,{children:[O.more,(0,a.jsx)("div",{className:F(g.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:x.length>0?x.length:""})]});k.splice(Math.min(G.overflowPosition,k.length),0,(0,a.jsx)("button",{"data-layout-path":P+"/button/overflow",ref:f,className:F(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+F(g.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:t,onClick:e=>{let t=l.getShowOverflowMenu(),i=x.map(e=>({index:e,node:d.getChildren()[e]}));void 0!==t?t(d,e,i,S):q(f.current,d,i,S,l),e.stopPropagation()},onPointerDown:U,children:e},"overflowbutton"))}if(void 0!==Y&&l.isSupportsPopout()&&Y.isEnablePopout()&&Y.isEnablePopoutIcon()){let e=l.i18nName(b.Popout_Tab);k.push((0,a.jsx)("button",{"data-layout-path":P+"/button/popout",title:e,className:F(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+F(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:e=>{void 0!==Y&&l.doAction(p.popoutTab(Y.getId())),e.stopPropagation()},onPointerDown:U,children:"function"==typeof O.popout?O.popout(Y):O.popout},"popout"))}if(d.canMaximize()){let e=l.i18nName(b.Restore),t=l.i18nName(b.Maximize);k.push((0,a.jsx)("button",{"data-layout-path":P+"/button/max",title:d.isMaximized()?e:t,className:F(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+F(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(d.isMaximized()?"max":"min")),onClick:e=>{d.canMaximize()&&l.maximize(d),e.stopPropagation()},onPointerDown:U,children:d.isMaximized()?"function"==typeof O.restore?O.restore(d):O.restore:"function"==typeof O.maximize?O.maximize(d):O.maximize},"max"))}if(!d.isMaximized()&&J){let e=V?l.i18nName(b.Close_Tab):l.i18nName(b.Close_Tabset);k.push((0,a.jsx)("button",{"data-layout-path":P+"/button/close",title:e,className:F(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+F(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:V?e=>{l.doAction(p.deleteTab(d.getChildren()[0].getId())),e.stopPropagation()}:e=>{l.doAction(p.deleteTabset(d.getId())),e.stopPropagation()},onPointerDown:U,children:"function"==typeof O.closeTabset?O.closeTabset(d):O.closeTabset},"close"))}if(d.isActive()&&d.isEnableActiveIcon()){let e=l.i18nName(b.Active_Tabset);k.push((0,a.jsx)("div",{"data-layout-path":P+"/button/active",title:e,className:F(g.FLEXLAYOUT__TAB_TOOLBAR_ICON),children:"function"==typeof O.activeTabset?O.activeTabset(d):O.activeTabset},"active"))}let Z=(0,a.jsx)("div",{ref:_,className:F(g.FLEXLAYOUT__TAB_TOOLBAR),onPointerDown:U,onDragStart:e=>{e.preventDefault()},children:k},"buttonbar"),K=F(g.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(void 0!==d.getClassNameTabStrip()&&(K+=" "+d.getClassNameTabStrip()),K+=" "+g.FLEXLAYOUT__TABSET_TABBAR_OUTER_+d.getTabLocation(),d.isActive()&&(K+=" "+F(g.FLEXLAYOUT__TABSET_SELECTED)),d.isMaximized()&&(K+=" "+F(g.FLEXLAYOUT__TABSET_MAXIMIZED)),V){let e=d.getChildren()[0];void 0!==e.getTabSetClassName()&&(K+=" "+e.getTabSetClassName())}if(n&&(r=(0,a.jsx)("div",{className:F(g.FLEXLAYOUT__TABSET_LEADING),children:n})),d.isEnableTabWrap())d.isEnableTabStrip()&&(t=(0,a.jsxs)("div",{className:K,style:{flexWrap:"wrap",gap:"1px",marginTop:"2px"},ref:c,"data-layout-path":P+"/tabstrip",onPointerDown:M,onDoubleClick:H,onContextMenu:W,onClick:I,onAuxClick:I,draggable:!0,onDragStart:B,children:[r,X,(0,a.jsx)("div",{style:{flexGrow:1}}),Z]}));else if(d.isEnableTabStrip()){let e;d.isEnableTabScrollbar()&&(e=(0,a.jsx)("div",{ref:u,className:F(g.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:v})),t=(0,a.jsxs)("div",{className:K,ref:c,"data-layout-path":P+"/tabstrip",onPointerDown:M,onDoubleClick:H,onContextMenu:W,onClick:I,onAuxClick:I,draggable:!0,onWheel:N,onDragStart:B,children:[r,(0,a.jsxs)("div",{className:F(g.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[(0,a.jsx)("div",{ref:T,className:F(g.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+F(g.FLEXLAYOUT__TABSET_TABBAR_INNER_+d.getTabLocation()),style:{overflowX:"auto",overflowY:"hidden"},onScroll:A,children:(0,a.jsx)("div",{style:{width:V?"100%":"none"},className:F(g.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+F(g.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+d.getTabLocation()),children:X})}),e]}),Z]})}if(0===d.getChildren().length){let e=l.getTabSetPlaceHolderCallback();e&&(i=e(d))}let Q=(0,a.jsx)("div",{ref:m,className:F(g.FLEXLAYOUT__TABSET_CONTENT),children:i});Q="top"===d.getTabLocation()?(0,a.jsxs)(a.Fragment,{children:[t,Q]}):(0,a.jsxs)(a.Fragment,{children:[Q,t]});let ee={flexGrow:Math.max(1,1e3*d.getWeight()),minWidth:d.getMinWidth(),minHeight:d.getMinHeight(),maxWidth:d.getMaxWidth(),maxHeight:d.getMaxHeight()};void 0===d.getModel().getMaximizedTabset(l.getWindowId())||d.isMaximized()||(ee.display="none");let et=(0,a.jsx)("div",{ref:y,className:F(g.FLEXLAYOUT__TABSET_CONTAINER),style:ee,children:(0,a.jsx)("div",{className:F(g.FLEXLAYOUT__TABSET),"data-layout-path":P,children:Q})});return d.isMaximized()&&l.getMainElement()?(0,s.createPortal)((0,a.jsx)("div",{style:{position:"absolute",display:"flex",top:0,left:0,bottom:0,right:0},children:et}),l.getMainElement()):et},ed=e=>{let{layout:t,node:i}=e,n=o.useRef(null),s=i.getOrientation()===h.HORZ;o.useLayoutEffect(()=>{i.setRect(t.getBoundingClientRect(n.current))});let r=[],d=0;for(let e of i.getChildren())d>0&&r.push((0,a.jsx)(k,{layout:t,node:i,index:d,horizontal:s},"splitter"+d)),e instanceof W?r.push((0,a.jsx)(ed,{layout:t,node:e},e.getId())):e instanceof M&&r.push((0,a.jsx)(er,{layout:t,node:e},e.getId())),d++;let l={flexGrow:Math.max(1,1e3*i.getWeight()),minWidth:i.getMinWidth(),minHeight:i.getMinHeight(),maxWidth:i.getMaxWidth(),maxHeight:i.getMaxHeight()};return s?l.flexDirection="row":l.flexDirection="column",(0,a.jsx)("div",{ref:n,className:t.getClassName(g.FLEXLAYOUT__ROW),style:l,children:r})},el=e=>{let{layout:t,selected:i,node:n,path:s}=e,r=o.useRef(null),d=o.useRef(!0),l=n.getParent(),h=l.getContentRect();o.useLayoutEffect(()=>{let e=n.getMoveableElement();r.current.appendChild(e),n.setMoveableElement(e);let t=()=>{n.saveScrollPosition()};return e.addEventListener("scroll",t),r.current.addEventListener("pointerdown",c),()=>{e.removeEventListener("scroll",t),r.current&&r.current.removeEventListener("pointerdown",c),n.setVisible(!1)}},[]),o.useEffect(()=>{n.isSelected()&&d.current&&(n.restoreScrollPosition(),d.current=!1)});let c=()=>{let e=n.getParent();e instanceof M&&!e.isActive()&&t.doAction(p.setActiveTabset(e.getId(),t.getWindowId()))};n.setRect(h);let u=t.getClassName,b={};h.styleWithPosition(b);let T=null;if(i){if(n.setVisible(!0),document.hidden&&n.isEnablePopoutOverlay()){let e={};h.styleWithPosition(e),T=(0,a.jsx)("div",{style:e,className:u(g.FLEXLAYOUT__TAB_OVERLAY)})}}else b.display="none",n.setVisible(!1);l instanceof M&&void 0!==n.getModel().getMaximizedTabset(t.getWindowId())&&(l.isMaximized()?b.zIndex=10:b.display="none"),l instanceof z&&!l.isShowing()&&(b.display="none");let m=u(g.FLEXLAYOUT__TAB);return l instanceof z&&(m+=" "+u(g.FLEXLAYOUT__TAB_BORDER),m+=" "+u(g.FLEXLAYOUT__TAB_BORDER_+l.getLocation().getName())),void 0!==n.getContentClassName()&&(m+=" "+n.getContentClassName()),(0,a.jsxs)(a.Fragment,{children:[T,(0,a.jsx)("div",{ref:r,style:b,className:m,"data-layout-path":s})]})};class eh extends o.Component{constructor(e){super(e),l(this,"retry",()=>{this.setState({hasError:!1})}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.debug(e),console.debug(t)}render(){return this.state.hasError?(0,a.jsx)("div",{className:g.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER,children:(0,a.jsx)("div",{className:g.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT,children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[this.props.message,(0,a.jsx)("p",{children:(0,a.jsx)("button",{onClick:this.retry,children:this.props.retryText})})]})})}):this.props.children}}let ec=o.memo(({layout:e,node:t})=>(0,a.jsx)(eh,{message:e.i18nName(b.Error_rendering_component),retryText:e.i18nName(b.Error_rendering_component_retry),children:e.props.factory(t)}),function(e,t){return!(t.visible&&(!e.rect.equalSize(t.rect)||e.forceRevision!==t.forceRevision||e.tabsRevision!==t.tabsRevision))});class eu extends o.Component{constructor(e){super(e),l(this,"selfRef"),l(this,"revision"),this.selfRef=o.createRef(),this.revision=0}redraw(){this.selfRef.current.redraw("parent "+this.revision)}addTabToTabSet(e,t){return this.selfRef.current.addTabToTabSet(e,t)}addTabWithDragAndDrop(e,t,i){this.selfRef.current.addTabWithDragAndDrop(e,t,i)}moveTabWithDragAndDrop(e,t){this.selfRef.current.moveTabWithDragAndDrop(e,t)}addTabToActiveTabSet(e){return this.selfRef.current.addTabToActiveTabSet(e)}setDragComponent(e,t,i,n){this.selfRef.current.setDragComponent(e,t,i,n)}getRootDiv(){return this.selfRef.current.getRootDiv()}render(){return(0,a.jsx)(eg,{ref:this.selfRef,...this.props,renderRevision:this.revision++})}}let eb=class e extends o.Component{constructor(t){super(t),l(this,"selfRef"),l(this,"moveablesRef"),l(this,"findBorderBarSizeRef"),l(this,"mainRef"),l(this,"previousModel"),l(this,"orderedTabIds"),l(this,"orderedTabMoveableIds"),l(this,"moveableElementMap",new Map),l(this,"dropInfo"),l(this,"outlineDiv"),l(this,"currentDocument"),l(this,"currentWindow"),l(this,"supportsPopout"),l(this,"popoutURL"),l(this,"icons"),l(this,"resizeObserver"),l(this,"dragEnterCount",0),l(this,"dragging",!1),l(this,"windowId"),l(this,"layoutWindow"),l(this,"mainLayout"),l(this,"isMainWindow"),l(this,"isDraggingOverWindow"),l(this,"styleObserver"),l(this,"popoutWindowName"),l(this,"updateLayoutMetrics",()=>{if(this.findBorderBarSizeRef.current){let e=this.findBorderBarSizeRef.current.getBoundingClientRect().height;e!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:e})}}),l(this,"onModelChange",e=>{this.redrawInternal("model change"),this.props.onModelChange&&this.props.onModelChange(this.props.model,e)}),l(this,"updateRect",()=>{if(this.selfRef.current){let e=c.fromDomRect(this.selfRef.current.getBoundingClientRect());e.equals(this.state.rect)||0===e.width||0===e.height||(this.setState({rect:e}),this.windowId!==P.MAIN_WINDOW_ID&&this.redrawInternal("rect updated"))}}),l(this,"getClassName",e=>void 0===this.props.classNameMapper?e:this.props.classNameMapper(e)),l(this,"onCloseWindow",e=>{this.doAction(p.closeWindow(e.windowId))}),l(this,"onSetWindow",(e,t)=>{}),l(this,"showControlInPortal",(e,t)=>{let i=(0,s.createPortal)(e,t);this.setState({portal:i})}),l(this,"hideControlInPortal",()=>{this.setState({portal:void 0})}),l(this,"getIcons",()=>this.icons),l(this,"setDragNode",(t,i)=>{if(e.dragState=new ef(this.mainLayout,"internal",i,void 0,void 0),t.dataTransfer.setData("text/plain","--flexlayout--"),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.dropEffect="move",this.dragEnterCount=0,i instanceof M){let e=!1,n=this.i18nName(b.Move_Tabset);if(i.getChildren().length>0&&(n=this.i18nName(b.Move_Tabs).replace("?",String(i.getChildren().length))),this.props.onRenderDragRect){let a=this.props.onRenderDragRect(n,i,void 0);a&&(this.setDragComponent(t,a,10,10),e=!0)}e||this.setDragComponent(t,n,10,10)}else{let e=t.target.getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top,s=null==i?void 0:i.getParent(),r=s instanceof z&&s.getOrientation()===h.HORZ,d=r?10:n,l=r?10:o,c=!1;if(this.props.onRenderDragRect){let e=(0,a.jsx)(Z,{layout:this,node:i},i.getId()),n=this.props.onRenderDragRect(e,i,void 0);n&&(this.setDragComponent(t,n,d,l),c=!0)}if(!c){let e;!(e=navigator.userAgent).includes("Safari")||e.includes("Chrome")||e.includes("Chromium")?t.dataTransfer.setDragImage(i.getTabStamp(),d,l):this.setDragComponent(t,(0,a.jsx)(Z,{node:i,layout:this}),d,l)}}}),l(this,"onDragEnterRaw",e=>{this.dragEnterCount++,1===this.dragEnterCount&&this.onDragEnter(e)}),l(this,"onDragLeaveRaw",e=>{this.dragEnterCount--,0===this.dragEnterCount&&this.onDragLeave(e)}),l(this,"onDragEnter",t=>{if(!e.dragState&&this.props.onExternalDrag){let i=this.props.onExternalDrag(t);if(i){let t=O.fromJson(i.json,this.props.model,!1);e.dragState=new ef(this.mainLayout,"external",t,i.json,i.onDrop)}}if(e.dragState){if(this.windowId!==P.MAIN_WINDOW_ID&&e.dragState.mainLayout===this.mainLayout&&e.dragState.mainLayout.setDraggingOverWindow(!0),e.dragState.mainLayout!==this.mainLayout)return;t.preventDefault(),this.dropInfo=void 0;let i=this.selfRef.current;this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(g.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden";let n=this.props.model.getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${n}s, left ${n}s, width ${n}s, height ${n}s`,i.appendChild(this.outlineDiv),this.dragging=!0,this.showOverlay(!0),this.isDraggingOverWindow||void 0!==this.props.model.getMaximizedTabset(this.windowId)||this.setState({showEdges:this.props.model.isEnableEdgeDock()});let a=this.selfRef.current.getBoundingClientRect();new c(t.clientX-a.left,t.clientY-a.top,1,1).positionElement(this.outlineDiv)}}),l(this,"onDragOver",t=>{var i;if(this.dragging&&!this.isDraggingOverWindow){t.preventDefault();let n=null==(i=this.selfRef.current)?void 0:i.getBoundingClientRect(),a={x:t.clientX-((null==n?void 0:n.left)??0),y:t.clientY-((null==n?void 0:n.top)??0)};this.checkForBorderToShow(a.x,a.y);let o=this.props.model.findDropTargetNode(this.windowId,e.dragState.dragNode,a.x,a.y);o&&(this.dropInfo=o,this.outlineDiv&&(this.outlineDiv.className=this.getClassName(o.className),o.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))}}),l(this,"onDragLeave",t=>{this.dragging&&(this.windowId!==P.MAIN_WINDOW_ID&&e.dragState.mainLayout.setDraggingOverWindow(!1),this.clearDragLocal())}),l(this,"onDrop",t=>{if(this.dragging){t.preventDefault();let i=e.dragState;if(this.dropInfo)if(void 0!==i.dragJson){let e=this.doAction(p.addNode(i.dragJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));void 0!==i.fnNewNodeDropped&&i.fnNewNodeDropped(e,t)}else void 0!==i.dragNode&&this.doAction(p.moveNode(i.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.mainLayout.clearDragMain()}this.dragEnterCount=0}),this.orderedTabIds=[],this.orderedTabMoveableIds=[],this.selfRef=o.createRef(),this.moveablesRef=o.createRef(),this.mainRef=o.createRef(),this.findBorderBarSizeRef=o.createRef(),this.supportsPopout=void 0!==t.supportsPopout?t.supportsPopout:ep,this.popoutURL=t.popoutURL?t.popoutURL:"popout.html",this.icons={...eT,...t.icons},this.windowId=t.windowId?t.windowId:P.MAIN_WINDOW_ID,this.mainLayout=this.props.mainLayout?this.props.mainLayout:this,this.isDraggingOverWindow=!1,this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.popoutWindowName=this.props.popoutWindowName||"Popout Window",this.state={rect:c.empty(),editingTab:void 0,showEdges:!1,showOverlay:!1,calculatedBorderBarSize:29,layoutRevision:0,forceRevision:0,showHiddenBorder:u.CENTER},this.isMainWindow=this.windowId===P.MAIN_WINDOW_ID}componentDidMount(){if(this.updateRect(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.layoutWindow.window=this.currentWindow,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{this.updateRect()})}),this.selfRef.current&&this.resizeObserver.observe(this.selfRef.current),this.isMainWindow)this.props.model.addChangeListener(this.onModelChange),this.updateLayoutMetrics();else{this.currentWindow.addEventListener("resize",()=>{this.updateRect()});let e=this.props.mainLayout.getRootDiv(),t=this.selfRef.current;D(e,t),this.styleObserver=new MutationObserver(()=>{D(e,t)&&this.redraw("mutation observer")}),this.styleObserver.observe(e,{attributeFilter:["style"]})}document.addEventListener("visibilitychange",()=>{for(let[e,t]of this.props.model.getwindowsMap())t.layout&&this.redraw("visibility change")})}componentDidUpdate(){this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.isMainWindow&&(this.props.model!==this.previousModel&&(void 0!==this.previousModel&&this.previousModel.removeChangeListener(this.onModelChange),this.props.model.getwindowsMap().get(this.windowId).layout=this,this.props.model.addChangeListener(this.onModelChange),this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.previousModel=this.props.model,this.tidyMoveablesMap()),this.updateLayoutMetrics())}componentWillUnmount(){var e,t;this.selfRef.current&&(null==(e=this.resizeObserver)||e.unobserve(this.selfRef.current)),this.isMainWindow&&this.props.model.removeChangeListener(this.onModelChange),null==(t=this.styleObserver)||t.disconnect()}render(){if(!this.selfRef.current)return(0,a.jsxs)("div",{ref:this.selfRef,className:this.getClassName(g.FLEXLAYOUT__LAYOUT),children:[(0,a.jsx)("div",{ref:this.moveablesRef,className:this.getClassName(g.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),this.renderMetricsElements()]});let e=this.props.model;e.getRoot(this.windowId).calcMinMaxSize(),e.getRoot(this.windowId).setPaths(""),e.getBorderSet().setPaths();let t=this.renderLayout(),i=this.renderBorders(t),n=this.renderTabs(),o=this.reorderComponents(n,this.orderedTabIds),s=null,r=null,d=null,l=null;if(this.isMainWindow){s=this.renderWindows(),l=this.renderMetricsElements();let e=this.renderTabMoveables();r=this.reorderComponents(e,this.orderedTabMoveableIds),d=(0,a.jsx)("div",{className:this.getClassName(g.FLEXLAYOUT__LAYOUT_TAB_STAMPS),children:this.renderTabStamps()},"__tabStamps__")}return(0,a.jsxs)("div",{ref:this.selfRef,className:this.getClassName(g.FLEXLAYOUT__LAYOUT),onDragEnter:this.onDragEnterRaw,onDragLeave:this.onDragLeaveRaw,onDragOver:this.onDragOver,onDrop:this.onDrop,children:[(0,a.jsx)("div",{ref:this.moveablesRef,className:this.getClassName(g.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),l,(0,a.jsx)(eo,{layout:this,show:this.state.showOverlay},"__overlay__"),i,o,r,d,this.state.portal,s]})}renderBorders(e){let t=this.getClassName(g.FLEXLAYOUT__LAYOUT_MAIN),i=this.props.model.getBorderSet().getBorderMap();if(!this.isMainWindow||!(i.size>0))return(0,a.jsx)("div",{className:t,ref:this.mainRef,style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex"},children:e});{e=(0,a.jsx)("div",{className:t,ref:this.mainRef,children:e});let n=new Map,o=new Map;for(let[e,t]of u.values){let e=i.get(t);e&&e.isShowing()&&(!e.isAutoHide()||e.isAutoHide()&&(e.getChildren().length>0||this.state.showHiddenBorder===t))&&(n.set(t,(0,a.jsx)(Q,{layout:this,border:e,size:this.state.calculatedBorderBarSize})),o.set(t,(0,a.jsx)(G,{layout:this,border:e,show:-1!==e.getSelected()})))}let s=this.getClassName(g.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER),r=this.getClassName(g.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER);if(this.props.model.getBorderSet().getLayoutHorizontal()){let t=(0,a.jsxs)("div",{className:r,style:{flexDirection:"column"},children:[o.get(u.TOP),(0,a.jsxs)("div",{className:r,style:{flexDirection:"row"},children:[o.get(u.LEFT),e,o.get(u.RIGHT)]}),o.get(u.BOTTOM)]});return(0,a.jsxs)("div",{className:s,style:{flexDirection:"column"},children:[n.get(u.TOP),(0,a.jsxs)("div",{className:r,style:{flexDirection:"row"},children:[n.get(u.LEFT),t,n.get(u.RIGHT)]}),n.get(u.BOTTOM)]})}{let t=(0,a.jsxs)("div",{className:r,style:{flexDirection:"row"},children:[o.get(u.LEFT),(0,a.jsxs)("div",{className:r,style:{flexDirection:"column"},children:[o.get(u.TOP),e,o.get(u.BOTTOM)]}),o.get(u.RIGHT)]});return(0,a.jsxs)("div",{className:s,style:{flexDirection:"row"},children:[n.get(u.LEFT),(0,a.jsxs)("div",{className:r,style:{flexDirection:"column"},children:[n.get(u.TOP),t,n.get(u.BOTTOM)]}),n.get(u.RIGHT)]})}}}renderLayout(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ed,{layout:this,node:this.props.model.getRoot(this.windowId)},"__row__"),this.renderEdgeIndicators()]})}renderEdgeIndicators(){let e=[],t=this.icons.edgeArrow;if(this.state.showEdges){let i=this.props.model.getRoot(this.windowId).getRect(),n=em/2,o=this.getClassName(g.FLEXLAYOUT__EDGE_RECT);e.push((0,a.jsx)("div",{style:{top:0,left:i.width/2-n,width:em,height:e_,borderBottomLeftRadius:50,borderBottomRightRadius:50},className:o+" "+this.getClassName(g.FLEXLAYOUT__EDGE_RECT_TOP),children:(0,a.jsx)("div",{style:{transform:"rotate(180deg)"},children:t})},"North")),e.push((0,a.jsx)("div",{style:{top:i.height/2-n,left:0,width:e_,height:em,borderTopRightRadius:50,borderBottomRightRadius:50},className:o+" "+this.getClassName(g.FLEXLAYOUT__EDGE_RECT_LEFT),children:(0,a.jsx)("div",{style:{transform:"rotate(90deg)"},children:t})},"West")),e.push((0,a.jsx)("div",{style:{top:i.height-e_,left:i.width/2-n,width:em,height:e_,borderTopLeftRadius:50,borderTopRightRadius:50},className:o+" "+this.getClassName(g.FLEXLAYOUT__EDGE_RECT_BOTTOM),children:(0,a.jsx)("div",{children:t})},"South")),e.push((0,a.jsx)("div",{style:{top:i.height/2-n,left:i.width-e_,width:e_,height:em,borderTopLeftRadius:50,borderBottomLeftRadius:50},className:o+" "+this.getClassName(g.FLEXLAYOUT__EDGE_RECT_RIGHT),children:(0,a.jsx)("div",{style:{transform:"rotate(-90deg)"},children:t})},"East"))}return e}renderWindows(){let t=[];if(this.supportsPopout){let i=this.props.model.getwindowsMap(),n=1;for(let[o,s]of i)o!==P.MAIN_WINDOW_ID&&(t.push((0,a.jsx)(et,{layout:this,title:this.popoutWindowName+" "+n,layoutWindow:s,url:this.popoutURL+"?id="+o,onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow,children:(0,a.jsx)("div",{className:this.props.popoutClassName,children:(0,a.jsx)(e,{...this.props,windowId:o,mainLayout:this})})},o)),n++)}return t}renderTabMoveables(){let e=new Map;return this.props.model.visitNodes(t=>{if(t instanceof O){let i=this.getMoveableElement(t.getId());t.setMoveableElement(i);let n=t.isSelected(),o=t.getParent().getContentRect(),r=n||!t.isEnableRenderOnDemand(),d=t.isRendered()||r&&o.width>0&&o.height>0;if(d){let n=t.getId()+(t.isEnableWindowReMount()?t.getWindowId():"");e.set(t.getId(),(0,s.createPortal)((0,a.jsx)(ec,{layout:this,node:t,rect:o,visible:r,forceRevision:this.state.forceRevision,tabsRevision:this.props.renderRevision},n),i,n)),t.setRendered(d)}}}),e}renderTabStamps(){let e=[];return this.props.model.visitNodes(t=>{t instanceof O&&e.push((0,a.jsx)(ee,{layout:this,node:t},t.getId()))}),e}renderTabs(){let e=new Map;return this.props.model.visitWindowNodes(this.windowId,t=>{if(t instanceof O){let i=t.isSelected(),n=t.getPath();(t.isRendered()||i||!t.isEnableRenderOnDemand())&&e.set(t.getId(),(0,a.jsx)(el,{layout:this,path:n,node:t,selected:i},t.getId()))}}),e}renderMetricsElements(){return(0,a.jsx)("div",{ref:this.findBorderBarSizeRef,className:this.getClassName(g.FLEXLAYOUT__BORDER_SIZER),children:"FindBorderBarSize"},"findBorderBarSize")}checkForBorderToShow(e,t){let i=this.getBoundingClientRect(this.mainRef.current),n=i.getCenter(),a=em/2,o=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===u.CENTER&&(t>n.y-a&&t<n.y+a||e>n.x-a&&e<n.x+a)&&(o=!0);let s=u.CENTER;!o&&(e<=i.x+e_?s=u.LEFT:e>=i.getRight()-e_?s=u.RIGHT:t<=i.y+e_?s=u.TOP:t>=i.getBottom()-e_&&(s=u.BOTTOM)),s!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:s})}tidyMoveablesMap(){let e=new Map;for(let[t,i]of(this.props.model.visitNodes((t,i)=>{t instanceof O&&e.set(t.getId(),t)}),this.moveableElementMap))e.has(t)||(i.remove(),this.moveableElementMap.delete(t))}reorderComponents(e,t){let i=[],n=new Set;for(let a of t)e.get(a)&&(i.push(a),n.add(a));for(let[a,o]of(t.splice(0,t.length,...i),e))n.has(a)||t.push(a);return t.map(t=>e.get(t))}redraw(e){this.mainLayout.setState((e,t)=>({forceRevision:e.forceRevision+1}))}redrawInternal(e){this.mainLayout.setState((e,t)=>({layoutRevision:e.layoutRevision+1}))}doAction(e){if(void 0===this.props.onAction)return this.props.model.doAction(e);{let t=this.props.onAction(e);return void 0!==t?this.props.model.doAction(t):void 0}}getBoundingClientRect(e){let t=this.getDomRect();return t?c.getBoundingClientRect(e).relativeTo(t):c.empty()}getMoveableContainer(){return this.moveablesRef.current}getMoveableElement(e){let t=this.moveableElementMap.get(e);return void 0===t&&(t=document.createElement("div"),this.moveablesRef.current.appendChild(t),t.className=g.FLEXLAYOUT__TAB_MOVEABLE,this.moveableElementMap.set(e,t)),t}getMainLayout(){return this.mainLayout}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current?c.fromDomRect(this.selfRef.current.getBoundingClientRect()):c.empty()}getWindowId(){return this.windowId}getRootDiv(){return this.selfRef.current}getMainElement(){return this.mainRef.current}getFactory(){return this.props.factory}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){return this.props.realtimeResize??!1}getPopoutURL(){return this.popoutURL}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}getModel(){return this.props.model}getScreenRect(e){let t=e.clone(),i=this.getDomRect();return t.x=this.currentWindow.screenX+this.currentWindow.scrollX+1+i.x+t.x,t.y=this.currentWindow.screenY+this.currentWindow.scrollY+59+i.y+t.y,t.height+=60,t.width+=2,t}addTabToTabSet(e,t){if(void 0!==this.props.model.getNodeById(e))return this.doAction(p.addNode(t,e,u.CENTER,-1))}addTabToActiveTabSet(e){let t=this.props.model.getActiveTabset(this.windowId);if(void 0!==t)return this.doAction(p.addNode(e,t.getId(),u.CENTER,-1))}maximize(e){this.doAction(p.maximizeToggle(e.getId(),this.getWindowId()))}customizeTab(e,t){this.props.onRenderTab&&this.props.onRenderTab(e,t)}customizeTabSet(e,t){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,t)}i18nName(e,t){let i;return this.props.i18nMapper&&(i=this.props.i18nMapper(e,t)),void 0===i&&(i=e+(void 0===t?"":t)),i}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,t){this.props.onContextMenu&&this.props.onContextMenu(e,t)}auxMouseClick(e,t){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,t)}showOverlay(e){this.setState({showOverlay:e}),A(!e,this.currentDocument)}addTabWithDragAndDrop(t,i,n){let a=O.fromJson(i,this.props.model,!1);e.dragState=new ef(this.mainLayout,"add",a,i,n)}moveTabWithDragAndDrop(e,t){this.setDragNode(e,t)}setDragComponent(e,t,i,n){let o=(0,a.jsx)("div",{style:{position:"unset"},className:this.getClassName(g.FLEXLAYOUT__LAYOUT)+" "+this.getClassName(g.FLEXLAYOUT__DRAG_RECT),children:t}),s=this.currentDocument.createElement("div");s.setAttribute("data-layout-path","/drag-rectangle"),s.style.position="absolute",s.style.left="-10000px",s.style.top="-10000px",this.currentDocument.body.appendChild(s),(0,r.createRoot)(s).render(o),e.dataTransfer.setDragImage(s,i,n),setTimeout(()=>{this.currentDocument.body.removeChild(s)},0)}setDraggingOverWindow(e){this.isDraggingOverWindow!==e&&(this.outlineDiv&&(this.outlineDiv.style.visibility=e?"hidden":"visible"),e?this.setState({showEdges:!1}):void 0===this.props.model.getMaximizedTabset(this.windowId)&&this.setState({showEdges:this.props.model.isEnableEdgeDock()}),this.isDraggingOverWindow=e)}clearDragMain(){for(let[,t]of(e.dragState=void 0,this.windowId===P.MAIN_WINDOW_ID&&(this.isDraggingOverWindow=!1),this.props.model.getwindowsMap()))t.layout.clearDragLocal()}clearDragLocal(){this.setState({showEdges:!1}),this.showOverlay(!1),this.dragEnterCount=0,this.dragging=!1,this.outlineDiv&&(this.selfRef.current.removeChild(this.outlineDiv),this.outlineDiv=void 0)}};l(eb,"dragState");let eg=eb,eT={close:(0,a.jsx)(ea,{}),closeTabset:(0,a.jsx)(ea,{}),popout:(0,a.jsx)(()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:en,viewBox:"0 0 20 20",fill:"var(--color-icon)",children:[(0,a.jsx)("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),(0,a.jsx)("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),{}),maximize:(0,a.jsx)(()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:en,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,a.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,a.jsx)("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})]}),{}),restore:(0,a.jsx)(()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:en,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,a.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,a.jsx)("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})]}),{}),more:(0,a.jsx)(()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:en,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,a.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,a.jsx)("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})]}),{}),edgeArrow:(0,a.jsx)(()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:10,height:10},preserveAspectRatio:"none",viewBox:"0 0 100 100",children:(0,a.jsx)("path",{fill:"var(--color-edge-icon)",stroke:"var(--color-edge-icon)",d:"M10 30 L90 30 l-40 40 Z"})}),{}),activeTabset:(0,a.jsx)(()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:en,height:"24px",viewBox:"0 -960 960 960",width:"24px",children:(0,a.jsx)("path",{fill:"var(--color-icon)",stroke:"var(--color-icon)",d:"M440-120v-264L254-197l-57-57 187-186H120v-80h264L197-706l57-57 186 187v-264h80v264l186-187 57 57-187 186h264v80H576l187 186-57 57-186-187v264h-80Z"})}),{})},ep=y(),em=100,e_=10;class ef{constructor(e,t,i,n,a){l(this,"mainLayout"),l(this,"dragSource"),l(this,"dragNode"),l(this,"dragJson"),l(this,"fnNewNodeDropped"),this.mainLayout=e,this.dragSource=t,this.dragNode=i,this.dragJson=n,this.fnNewNodeDropped=a}}function eE(e,t){let i;return(...n)=>{window.clearTimeout(i),i=window.setTimeout(()=>e(...n),t)}}function ew({debounce:e,scroll:t,polyfill:i,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){var a,s,r;let d=i||("undefined"==typeof window?class{}:window.ResizeObserver);if(!d)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[l,h]=(0,o.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=(0,o.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l,orientationHandler:null}),u=e?"number"==typeof e?e:e.scroll:null,b=e?"number"==typeof e?e:e.resize:null,g=(0,o.useRef)(!1);(0,o.useEffect)(()=>(g.current=!0,()=>void(g.current=!1)));let[T,p,m]=(0,o.useMemo)(()=>{let e=()=>{if(!c.current.element)return;let{left:e,top:t,width:i,height:a,bottom:o,right:s,x:r,y:d}=c.current.element.getBoundingClientRect(),l={left:e,top:t,width:i,height:a,bottom:o,right:s,x:r,y:d};c.current.element instanceof HTMLElement&&n&&(l.height=c.current.element.offsetHeight,l.width=c.current.element.offsetWidth),Object.freeze(l),g.current&&!ey(c.current.lastBounds,l)&&h(c.current.lastBounds=l)};return[e,b?eE(e,b):e,u?eE(e,u):e]},[h,n,u,b]);function _(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",m,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function f(){c.current.element&&(c.current.resizeObserver=new d(m),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(e=>e.addEventListener("scroll",m,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}return a=m,s=!!t,(0,o.useEffect)(()=>{if(s)return window.addEventListener("scroll",a,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",a,!0)},[a,s]),r=p,(0,o.useEffect)(()=>(window.addEventListener("resize",r),()=>void window.removeEventListener("resize",r)),[r]),(0,o.useEffect)(()=>{_(),f()},[t,m,p]),(0,o.useEffect)(()=>_,[]),[e=>{e&&e!==c.current.element&&(_(),c.current.element=e,c.current.scrollContainers=function e(t){let i=[];if(!t||t===document.body)return i;let{overflow:n,overflowX:a,overflowY:o}=window.getComputedStyle(t);return[n,a,o].some(e=>"auto"===e||"scroll"===e)&&i.push(t),[...i,...e(t.parentElement)]}(e),f())},l,T]}e.s(["Actions",()=>p,"DockLocation",()=>u,"Layout",()=>eu,"Model",()=>P],138027);let eO=["x","y","top","bottom","left","right","width","height"],ey=(e,t)=>eO.every(i=>e[i]===t[i]);e.s(["default",()=>ew],770578)},941929,e=>{"use strict";e.i(440875);var t=e.i(743182);let i={padding:1.5,paddingX:1.5,paddingY:1.5,syncPadding:!0,cardBgColor:t.DEFAULT_COLORS.CARD_BG,backgroundColorParam:t.DEFAULT_COLORS.BACKGROUND,borderStyle:"simple",showTopNav:!0},n={padding:1.5,paddingX:1.5,paddingY:1.5,syncPadding:!0,cardBgColor:t.DEFAULT_COLORS.CARD_BG,backgroundColorParam:t.DEFAULT_COLORS.BACKGROUND,borderStyle:"simple",showTopNav:!1};e.s(["MAX_WIDGET_SIZE",0,9999,"defaultLayoutSettings",0,i,"defaultMobileLayoutSettings",0,n,"defaultWidgets",0,[{id:"CoinChart",title:"Coin Chart",enabled:!0},{id:"LiveStream",title:"Live Stream",enabled:!0},{id:"CoinDetails",title:"Coin Details",enabled:!0},{id:"TradeBox",title:"Trade Box",enabled:!0},{id:"SimilarCoins",title:"Similar Coins",enabled:!0},{id:"TradesTable",title:"Trades",enabled:!0},{id:"HoldersTable",title:"Holders",enabled:!0},{id:"TopTradersTable",title:"Top Traders",enabled:!0},{id:"DevTokensTable",title:"Dev Tokens",enabled:!0},{id:"ThreadsTable",title:"Threads",enabled:!0},{id:"BubbleMaps",title:"Bubble Maps",enabled:!0},{id:"WalletTracker",title:"Wallet Tracker",enabled:!0}]])},18663,e=>{"use strict";var t=e.i(942765),i=e.i(649785);e.i(440875);var n=e.i(743182),a=e.i(138027),o=e.i(281675),s=e.i(770578),r=e.i(536925),d=e.i(941929);function l(e){return void 0!==e.layout}function h(e){return e&&"object"==typeof e&&"mobile"in e&&"tablet"in e&&"medium"in e&&"desktop"in e&&"ultrawide"in e}let c=(e,t)=>({global:{splitterSize:2,tabEnableRename:!1,tabSetEnableMaximize:!1,tabSetMinWidth:150},borders:[],layout:{type:"row",id:"#64efa0f8-5558-437c-9488-08e73b6b089f",children:[{type:"row",id:"#ca918d82-c75d-4984-9b8e-52fc46664807",weight:82.46544416757183,children:[{type:"tabset",id:"#e6a677ba-babb-4997-b4a2-771738b6f087",weight:55,children:[{type:"tab",id:"CoinChart",name:"Coin Chart",component:"CoinChart",enableClose:!1,config:{widget:{id:"CoinChart",title:"Coin Chart",enabled:!0,enableClose:!1}}}]},{type:"tabset",id:"#cc9a0391-aea2-4221-9037-f7ed10a82031",weight:45,children:[{type:"tab",id:"HoldersTable",name:"Holders",component:"HoldersTable",config:{widget:{id:"HoldersTable",title:"Holders",enabled:!0}}},{type:"tab",id:"TradesTable",name:"Trades",component:"TradesTable",config:{widget:{id:"TradesTable",title:"Trades",enabled:!1}}},{type:"tab",id:"TopTradersTable",name:"Top Traders",component:"TopTradersTable",config:{widget:{id:"TopTradersTable",title:"Top Traders",enabled:!0}}},{type:"tab",id:"DevTokensTable",name:"Dev Tokens",component:"DevTokensTable",config:{widget:{id:"DevTokensTable",title:"Dev Tokens",enabled:!0}}},{type:"tab",id:"ThreadsTable",name:"Threads",component:"ThreadsTable",config:{widget:{id:"ThreadsTable",title:"Threads",enabled:!0}}},{type:"tab",id:"BubbleMaps",name:"Bubble Maps",component:"BubbleMaps",config:{widget:{id:"BubbleMaps",title:"Bubble Maps",enabled:!0}}}]}]},{type:"row",id:"#11f26dc5-b9d7-4197-84d6-9ba168e43ca8",weight:17.534555832428172,children:[{type:"tabset",id:"#4b43df32-8136-4511-9fec-21ae88cb85d0",weight:45.56620363428166,children:[{type:"tab",id:"CoinDetails",name:"Coin Details",component:"CoinDetails",config:{widget:{id:"CoinDetails",title:"Coin Details",enabled:!0}},minWidth:322,maxHeight:435},{type:"tab",id:"SimilarCoins",name:"Similar Coins",component:"SimilarCoins",config:{widget:{id:"SimilarCoins",title:"Similar Coins",enabled:!0}},minWidth:322}],active:!0},{type:"tabset",id:"#1f9339f3-8156-40fa-9ff9-0aea8c3bb235",weight:24.92740979047671,children:[{type:"tab",id:"TradeBox",name:"Trade Box",component:"TradeBox",config:{widget:{id:"TradeBox",title:"Trade Box",enabled:!0}},minWidth:322,minHeight:330}]}]}]},popouts:{}}),u=(e,t)=>({global:{splitterSize:2,tabEnableRename:!1,tabSetEnableMaximize:!1,tabSetMinWidth:150},borders:[],layout:{type:"row",id:"#64efa0f8-5558-437c-9488-08e73b6b089f",children:[{type:"row",id:"#ca918d82-c75d-4984-9b8e-52fc46664807",weight:89.63296844816485,children:[{type:"tabset",id:"#e6a677ba-babb-4997-b4a2-771738b6f087",weight:55,children:[{type:"tab",id:"CoinChart",name:"Coin Chart",component:"CoinChart",enableClose:!1,config:{widget:{id:"CoinChart",title:"Coin Chart",enabled:!0,enableClose:!1}}}]},{type:"row",id:"#989f0e80-d910-4cfa-b349-3d95a7c2e637",weight:45,children:[{type:"tabset",id:"#cc9a0391-aea2-4221-9037-f7ed10a82031",weight:73.2072072072072,children:[{type:"tab",id:"HoldersTable",name:"Holders",component:"HoldersTable",config:{widget:{id:"HoldersTable",title:"Holders",enabled:!0}}},{type:"tab",id:"TradesTable",name:"Trades",component:"TradesTable",config:{widget:{id:"TradesTable",title:"Trades",enabled:!1}}},{type:"tab",id:"TopTradersTable",name:"Top Traders",component:"TopTradersTable",config:{widget:{id:"TopTradersTable",title:"Top Traders",enabled:!0}}},{type:"tab",id:"DevTokensTable",name:"Dev Tokens",component:"DevTokensTable",config:{widget:{id:"DevTokensTable",title:"Dev Tokens",enabled:!0}}},{type:"tab",id:"ThreadsTable",name:"Threads",component:"ThreadsTable",config:{widget:{id:"ThreadsTable",title:"Threads",enabled:!0}}},{type:"tab",id:"BubbleMaps",name:"Bubble Maps",component:"BubbleMaps",config:{widget:{id:"BubbleMaps",title:"Bubble Maps",enabled:!0}}}],active:!0}]}]},{type:"row",id:"#11f26dc5-b9d7-4197-84d6-9ba168e43ca8",weight:10.367031551835158,children:[{type:"tabset",id:"#4b43df32-8136-4511-9fec-21ae88cb85d0",weight:45.56620363428166,children:[{type:"tab",id:"CoinDetails",name:"Coin Details",component:"CoinDetails",config:{widget:{id:"CoinDetails",title:"Coin Details",enabled:!0}},minWidth:322,maxHeight:435},{type:"tab",id:"SimilarCoins",name:"Similar Coins",component:"SimilarCoins",config:{widget:{id:"SimilarCoins",title:"Similar Coins",enabled:!0}},minWidth:322}]},{type:"tabset",id:"#1f9339f3-8156-40fa-9ff9-0aea8c3bb235",weight:24.92740979047671,children:[{type:"tab",id:"TradeBox",name:"Trade Box",component:"TradeBox",config:{widget:{id:"TradeBox",title:"Trade Box",enabled:!0}},minWidth:322,minHeight:330}]}]}]},popouts:{}}),b=(e,t)=>(t?.paddingX,t?.paddingY,{global:{splitterSize:2,tabEnableRename:!1,tabSetEnableMaximize:!1,tabSetMinWidth:150},borders:[],layout:{type:"row",id:"#64efa0f8-5558-437c-9488-08e73b6b089f",children:[{type:"row",id:"#ca918d82-c75d-4984-9b8e-52fc46664807",weight:82.46544416757183,children:[{type:"tabset",id:"#e6a677ba-babb-4997-b4a2-771738b6f087",weight:55,children:[{type:"tab",id:"CoinChart",name:"Coin Chart",component:"CoinChart",enableClose:!1,config:{widget:{id:"CoinChart",title:"Coin Chart",enabled:!0,enableClose:!1}}}]},{type:"row",id:"#989f0e80-d910-4cfa-b349-3d95a7c2e637",weight:45,children:[{type:"tabset",id:"#cc9a0391-aea2-4221-9037-f7ed10a82031",weight:75.32898279166936,children:[{type:"tab",id:"TradesTable",name:"Trades",component:"TradesTable",config:{widget:{id:"TradesTable",title:"Trades",enabled:!0}}},{type:"tab",id:"HoldersTable",name:"Holders",component:"HoldersTable",config:{widget:{id:"HoldersTable",title:"Holders",enabled:!1}}},{type:"tab",id:"TopTradersTable",name:"Top Traders",component:"TopTradersTable",config:{widget:{id:"TopTradersTable",title:"Top Traders",enabled:!0}}},{type:"tab",id:"DevTokensTable",name:"Dev Tokens",component:"DevTokensTable",config:{widget:{id:"DevTokensTable",title:"Dev Tokens",enabled:!0}}},{type:"tab",id:"BubbleMaps",name:"Bubble Maps",component:"BubbleMaps",config:{widget:{id:"BubbleMaps",title:"Bubble Maps",enabled:!0}}}]},{type:"tabset",id:"#55616420-1dac-4467-8d1b-96e9fcef5f30",weight:24.671017208330642,children:[{type:"tab",id:"ThreadsTable",name:"Threads",component:"ThreadsTable",config:{widget:{id:"ThreadsTable",title:"Threads",enabled:!0}}}],active:!0}]}]},{type:"row",id:"#11f26dc5-b9d7-4197-84d6-9ba168e43ca8",weight:17.534555832428172,children:[{type:"tabset",id:"#4b43df32-8136-4511-9fec-21ae88cb85d0",weight:45.56620363428166,children:[{type:"tab",id:"CoinDetails",name:"Coin Details",component:"CoinDetails",config:{widget:{id:"CoinDetails",title:"Coin Details",enabled:!0}},minWidth:322,maxHeight:435},{type:"tab",id:"SimilarCoins",name:"Similar Coins",component:"SimilarCoins",config:{widget:{id:"SimilarCoins",title:"Similar Coins",enabled:!0}},minWidth:322}]},{type:"tabset",id:"#1f9339f3-8156-40fa-9ff9-0aea8c3bb235",weight:24.92740979047671,children:[{type:"tab",id:"TradeBox",name:"Trade Box",component:"TradeBox",config:{widget:{id:"TradeBox",title:"Trade Box",enabled:!0}},minWidth:322,minHeight:330}]}]}]},popouts:{}}),g=(e,t)=>(t?.paddingX,t?.paddingY,{global:{splitterSize:2,tabEnableRename:!1,tabSetEnableMaximize:!1,tabSetMinWidth:150},borders:[],layout:{type:"row",id:"#ultrawide-root",children:[{type:"row",id:"#ultrawide-main-area",weight:100,children:[{type:"row",id:"#ultrawide-chart-tables",weight:55,children:[{type:"tabset",id:"#ultrawide-chart",weight:80,children:[{type:"tab",id:"CoinChart",name:"Coin Chart",component:"CoinChart",enableClose:!1,config:{widget:{id:"CoinChart",title:"Coin Chart",enabled:!0,enableClose:!1}}}]}]},{type:"row",id:"#ultrawide-tables-section",weight:45,children:[{type:"tabset",id:"#ultrawide-main-tables",weight:50,children:[{type:"tab",id:"HoldersTable",name:"Holders",component:"HoldersTable",config:{widget:{id:"HoldersTable",title:"Holders",enabled:!0}}},{type:"tab",id:"TradesTable",name:"Trades",component:"TradesTable",config:{widget:{id:"TradesTable",title:"Trades",enabled:!1}}},{type:"tab",id:"TopTradersTable",name:"Top Traders",component:"TopTradersTable",config:{widget:{id:"TopTradersTable",title:"Top Traders",enabled:!0}}},{type:"tab",id:"DevTokensTable",name:"Dev Tokens",component:"DevTokensTable",config:{widget:{id:"DevTokensTable",title:"Dev Tokens",enabled:!0}}}]},{type:"tabset",id:"#ultrawide-BubbleMaps",weight:30,children:[{type:"tab",id:"BubbleMaps",name:"Bubble Maps",component:"BubbleMaps",config:{widget:{id:"BubbleMaps",title:"Bubble Maps",enabled:!0}}}],active:!0},{type:"tabset",id:"#ultrawide-threads",weight:20,children:[{type:"tab",id:"ThreadsTable",name:"Threads",component:"ThreadsTable",config:{widget:{id:"ThreadsTable",title:"Threads",enabled:!0}}}],active:!0}]}]},{type:"row",id:"#ultrawide-bottom-fixed",weight:15,children:[{type:"tabset",id:"#ultrawide-details",weight:45.56620363428166,children:[{type:"tab",id:"CoinDetails",name:"Coin Details",component:"CoinDetails",config:{widget:{id:"CoinDetails",title:"Coin Details",enabled:!0}},minWidth:322,maxHeight:435},{type:"tab",id:"SimilarCoins",name:"Similar Coins",component:"SimilarCoins",config:{widget:{id:"SimilarCoins",title:"Similar Coins",enabled:!0}},minWidth:322}]},{type:"tabset",id:"#ultrawide-trade",weight:24.92740979047671,children:[{type:"tab",id:"TradeBox",name:"Trade Box",component:"TradeBox",config:{widget:{id:"TradeBox",title:"Trade Box",enabled:!0}},minWidth:322,minHeight:330}]}]}]},popouts:{}}),T=(e,t)=>({global:{splitterSize:2,tabEnableRename:!1,tabSetEnableMaximize:!1,tabSetMinWidth:150},borders:[],layout:{type:"row",id:"#64efa0f8-5558-437c-9488-08e73b6b089f",children:[{type:"row",id:"#ca918d82-c75d-4984-9b8e-52fc46664807",weight:89.63296844816485,children:[{type:"tabset",id:"#e6a677ba-babb-4997-b4a2-771738b6f087",weight:55,children:[{type:"tab",id:"CoinChart",name:"Coin Chart",component:"CoinChart",enableClose:!1,config:{widget:{id:"CoinChart",title:"Coin Chart",enabled:!0,enableClose:!1}}}]},{type:"row",id:"#989f0e80-d910-4cfa-b349-3d95a7c2e637",weight:45,children:[{type:"tabset",id:"#cc9a0391-aea2-4221-9037-f7ed10a82031",weight:73.2072072072072,children:[{type:"tab",id:"HoldersTable",name:"Holders",component:"HoldersTable",config:{widget:{id:"HoldersTable",title:"Holders",enabled:!0}}},{type:"tab",id:"TradesTable",name:"Trades",component:"TradesTable",config:{widget:{id:"TradesTable",title:"Trades",enabled:!1}}},{type:"tab",id:"TopTradersTable",name:"Top Traders",component:"TopTradersTable",config:{widget:{id:"TopTradersTable",title:"Top Traders",enabled:!0}}},{type:"tab",id:"DevTokensTable",name:"Dev Tokens",component:"DevTokensTable",config:{widget:{id:"DevTokensTable",title:"Dev Tokens",enabled:!0}}},{type:"tab",id:"ThreadsTable",name:"Threads",component:"ThreadsTable",config:{widget:{id:"ThreadsTable",title:"Threads",enabled:!0}}},{type:"tab",id:"BubbleMaps",name:"Bubble Maps",component:"BubbleMaps",config:{widget:{id:"BubbleMaps",title:"Bubble Maps",enabled:!0}}}],active:!0}]}]},{type:"row",id:"#11f26dc5-b9d7-4197-84d6-9ba168e43ca8",weight:10.367031551835158,children:[{type:"tabset",id:"#4b43df32-8136-4511-9fec-21ae88cb85d0",weight:45.56620363428166,children:[{type:"tab",id:"CoinDetails",name:"Coin Details",component:"CoinDetails",config:{widget:{id:"CoinDetails",title:"Coin Details",enabled:!0}},minWidth:322,maxHeight:290},{type:"tab",id:"SimilarCoins",name:"Similar Coins",component:"SimilarCoins",config:{widget:{id:"SimilarCoins",title:"Similar Coins",enabled:!0}},minWidth:322}]},{type:"tabset",id:"#1f9339f3-8156-40fa-9ff9-0aea8c3bb235",weight:24.92740979047671,children:[{type:"tab",id:"TradeBox",name:"Trade Box",component:"TradeBox",config:{widget:{id:"TradeBox",title:"Trade Box",enabled:!0}},minWidth:322,minHeight:330}]}]}]},popouts:{}}),p=(e,t)=>({global:{splitterSize:2,tabEnableRename:!1,tabSetEnableMaximize:!1},borders:[],layout:{type:"row",id:"#mobile-root",children:[{type:"row",id:"#7a9750df-75d5-4cd2-82a9-426916eee34b",children:[{type:"tabset",id:"#mobile-main",weight:55,children:[{type:"tab",id:"CoinChart",name:"Chart",component:"CoinChart",enableClose:!1,config:{widget:{id:"CoinChart",title:"Coin Chart",enabled:!0,enableClose:!1}}},{type:"tab",id:"CoinDetails",name:"Coin Details",component:"CoinDetails",enableClose:!1,config:{widget:{id:"CoinDetails",title:"Coin Details",enabled:!0}}},{type:"tab",id:"BubbleMaps",name:"Bubble Maps",component:"BubbleMaps",enableClose:!1,config:{widget:{id:"BubbleMaps",title:"Bubble Maps",enabled:!0}}}]},{type:"tabset",id:"#b15fce30-5e69-4d92-9c2b-8c7a7f6fe972",weight:45,children:[{type:"tab",id:"TradeBox",name:"Trade Box",component:"TradeBox",enableClose:!1,config:{widget:{id:"TradeBox",title:"Trade Box",enabled:!0}}},{type:"tab",id:"TradesTable",name:"Trades",component:"TradesTable",enableClose:!1,config:{widget:{id:"TradesTable",title:"Trades",enabled:!0}}},{type:"tab",id:"TopTradersTable",name:"Top Traders",component:"TopTradersTable",enableClose:!1,config:{widget:{id:"TopTradersTable",title:"Top Traders",enabled:!0}}},{type:"tab",id:"HoldersTable",name:"Holders",component:"HoldersTable",enableClose:!1,config:{widget:{id:"HoldersTable",title:"Holders",enabled:!0}}},{type:"tab",id:"ThreadsTable",name:"Threads",component:"ThreadsTable",enableClose:!1,config:{widget:{id:"ThreadsTable",title:"Threads",enabled:!0}}}],active:!0}]}]},popouts:{}}),m=(e,t)=>({global:{splitterSize:2,tabEnableRename:!1,tabSetEnableMaximize:!1,tabSetMinWidth:150},borders:[],layout:{type:"row",id:"#64efa0f8-5558-437c-9488-08e73b6b089f",children:[{type:"row",id:"#ca918d82-c75d-4984-9b8e-52fc46664807",weight:82.46544416757183,children:[{type:"tabset",id:"#e6a677ba-babb-4997-b4a2-771738b6f087",weight:55,children:[{type:"tab",id:"CoinChart",name:"Coin Chart",component:"CoinChart",enableClose:!1,config:{widget:{id:"CoinChart",title:"Coin Chart",enabled:!0,enableClose:!1}}}]},{type:"tabset",id:"#cc9a0391-aea2-4221-9037-f7ed10a82031",weight:45,children:[{type:"tab",id:"HoldersTable",name:"Holders",component:"HoldersTable",config:{widget:{id:"HoldersTable",title:"Holders",enabled:!0}}},{type:"tab",id:"TradesTable",name:"Trades",component:"TradesTable",config:{widget:{id:"TradesTable",title:"Trades",enabled:!1}}},{type:"tab",id:"TopTradersTable",name:"Top Traders",component:"TopTradersTable",config:{widget:{id:"TopTradersTable",title:"Top Traders",enabled:!0}}},{type:"tab",id:"DevTokensTable",name:"Dev Tokens",component:"DevTokensTable",config:{widget:{id:"DevTokensTable",title:"Dev Tokens",enabled:!0}}},{type:"tab",id:"ThreadsTable",name:"Threads",component:"ThreadsTable",config:{widget:{id:"ThreadsTable",title:"Threads",enabled:!0}}},{type:"tab",id:"BubbleMaps",name:"Bubble Maps",component:"BubbleMaps",config:{widget:{id:"BubbleMaps",title:"Bubble Maps",enabled:!0}}}]}]},{type:"row",id:"#11f26dc5-b9d7-4197-84d6-9ba168e43ca8",weight:17.534555832428172,children:[{type:"tabset",id:"#4b43df32-8136-4511-9fec-21ae88cb85d0",weight:45.56620363428166,children:[{type:"tab",id:"CoinDetails",name:"Coin Details",component:"CoinDetails",config:{widget:{id:"CoinDetails",title:"Coin Details",enabled:!0}},minWidth:322,maxHeight:290},{type:"tab",id:"SimilarCoins",name:"Similar Coins",component:"SimilarCoins",config:{widget:{id:"SimilarCoins",title:"Similar Coins",enabled:!0}},minWidth:322}]},{type:"tabset",id:"#1f9339f3-8156-40fa-9ff9-0aea8c3bb235",weight:24.92740979047671,children:[{type:"tab",id:"TradeBox",name:"Trade Box",component:"TradeBox",config:{widget:{id:"TradeBox",title:"Trade Box",enabled:!0}},minWidth:322,minHeight:330}]}]}]},popouts:{}}),_=(e,t)=>(t?.paddingX,t?.paddingY,{global:{splitterSize:2,tabEnableRename:!1,tabSetEnableMaximize:!1,tabSetMinWidth:150},borders:[],layout:{type:"row",id:"#ultrawide-root",children:[{type:"row",id:"#ultrawide-main-area",weight:100,children:[{type:"row",id:"#ultrawide-chart-tables",weight:55,children:[{type:"tabset",id:"#ultrawide-chart",weight:80,children:[{type:"tab",id:"CoinChart",name:"Coin Chart",component:"CoinChart",enableClose:!1,config:{widget:{id:"CoinChart",title:"Coin Chart",enabled:!0,enableClose:!1}}}]}]},{type:"row",id:"#ultrawide-tables-section",weight:45,children:[{type:"tabset",id:"#ultrawide-main-tables",weight:50,children:[{type:"tab",id:"HoldersTable",name:"Holders",component:"HoldersTable",config:{widget:{id:"HoldersTable",title:"Holders",enabled:!0}}},{type:"tab",id:"TradesTable",name:"Trades",component:"TradesTable",config:{widget:{id:"TradesTable",title:"Trades",enabled:!1}}},{type:"tab",id:"TopTradersTable",name:"Top Traders",component:"TopTradersTable",config:{widget:{id:"TopTradersTable",title:"Top Traders",enabled:!0}}},{type:"tab",id:"DevTokensTable",name:"Dev Tokens",component:"DevTokensTable",config:{widget:{id:"DevTokensTable",title:"Dev Tokens",enabled:!0}}}]},{type:"tabset",id:"#ultrawide-BubbleMaps",weight:30,children:[{type:"tab",id:"BubbleMaps",name:"Bubble Maps",component:"BubbleMaps",config:{widget:{id:"BubbleMaps",title:"Bubble Maps",enabled:!0}}}],active:!0},{type:"tabset",id:"#ultrawide-threads",weight:20,children:[{type:"tab",id:"ThreadsTable",name:"Threads",component:"ThreadsTable",config:{widget:{id:"ThreadsTable",title:"Threads",enabled:!0}}}],active:!0}]}]},{type:"row",id:"#ultrawide-bottom-fixed",weight:15,children:[{type:"tabset",id:"#ultrawide-details",weight:45.56620363428166,children:[{type:"tab",id:"CoinDetails",name:"Coin Details",component:"CoinDetails",config:{widget:{id:"CoinDetails",title:"Coin Details",enabled:!0}},minWidth:322,maxHeight:290},{type:"tab",id:"SimilarCoins",name:"Similar Coins",component:"SimilarCoins",config:{widget:{id:"SimilarCoins",title:"Similar Coins",enabled:!0}},minWidth:322}]},{type:"tabset",id:"#ultrawide-trade",weight:24.92740979047671,children:[{type:"tab",id:"TradeBox",name:"Trade Box",component:"TradeBox",config:{widget:{id:"TradeBox",title:"Trade Box",enabled:!0}},minWidth:322,minHeight:330}]}]}]},popouts:{}}),f=(e,t)=>({mobile:p(e,t),tablet:T(e,t),"tablet-banner":u(e,t),medium:m(e,t),"medium-banner":c(e,t),desktop:_(e,t),"desktop-banner":b(e,t),ultrawide:_(e,t),"ultrawide-banner":g(e,t)}),E=(e,t,i)=>{switch(e){case"mobile":return p(t,i);case"tablet":return T(t,i);case"tablet-banner":return u(t,i);case"medium":return m(t,i);case"medium-banner":return c(t,i);case"desktop":case"ultrawide":return _(t,i);case"desktop-banner":return b(t,i);case"ultrawide-banner":return g(t,i);default:return i?.paddingX,i?.paddingY,{global:{splitterSize:2,tabEnableRename:!1,tabSetEnableMaximize:!1,tabSetMinWidth:150},borders:[],layout:{type:"row",id:"#64efa0f8-5558-437c-9488-08e73b6b089f",children:[{type:"row",id:"#ca918d82-c75d-4984-9b8e-52fc46664807",weight:82.46544416757183,children:[{type:"tabset",id:"#e6a677ba-babb-4997-b4a2-771738b6f087",weight:55,children:[{type:"tab",id:"CoinChart",name:"Coin Chart",component:"CoinChart",enableClose:!1,config:{widget:{id:"CoinChart",title:"Coin Chart",enabled:!0,enableClose:!1}}}]},{type:"row",id:"#989f0e80-d910-4cfa-b349-3d95a7c2e637",weight:45,children:[{type:"tabset",id:"#cc9a0391-aea2-4221-9037-f7ed10a82031",weight:75.32898279166936,children:[{type:"tab",id:"TradesTable",name:"Trades",component:"TradesTable",config:{widget:{id:"TradesTable",title:"Trades",enabled:!0}}},{type:"tab",id:"HoldersTable",name:"Holders",component:"HoldersTable",config:{widget:{id:"HoldersTable",title:"Holders",enabled:!1}}},{type:"tab",id:"TopTradersTable",name:"Top Traders",component:"TopTradersTable",config:{widget:{id:"TopTradersTable",title:"Top Traders",enabled:!0}}},{type:"tab",id:"DevTokensTable",name:"Dev Tokens",component:"DevTokensTable",config:{widget:{id:"DevTokensTable",title:"Dev Tokens",enabled:!0}}},{type:"tab",id:"BubbleMaps",name:"Bubble Maps",component:"BubbleMaps",config:{widget:{id:"BubbleMaps",title:"Bubble Maps",enabled:!0}}}]},{type:"tabset",id:"#55616420-1dac-4467-8d1b-96e9fcef5f30",weight:24.671017208330642,children:[{type:"tab",id:"ThreadsTable",name:"Threads",component:"ThreadsTable",config:{widget:{id:"ThreadsTable",title:"Threads",enabled:!0}}}],active:!0}]}]},{type:"row",id:"#11f26dc5-b9d7-4197-84d6-9ba168e43ca8",weight:17.534555832428172,children:[{type:"tabset",id:"#4b43df32-8136-4511-9fec-21ae88cb85d0",weight:45.56620363428166,children:[{type:"tab",id:"CoinDetails",name:"Coin Details",component:"CoinDetails",config:{widget:{id:"CoinDetails",title:"Coin Details",enabled:!0}},minWidth:322},{type:"tab",id:"SimilarCoins",name:"Similar Coins",component:"SimilarCoins",config:{widget:{id:"SimilarCoins",title:"Similar Coins",enabled:!0}},minWidth:322}]},{type:"tabset",id:"#1f9339f3-8156-40fa-9ff9-0aea8c3bb235",weight:24.92740979047671,children:[{type:"tab",id:"TradeBox",name:"Trade Box",component:"TradeBox",config:{widget:{id:"TradeBox",title:"Trade Box",enabled:!0}},minWidth:322,minHeight:330}]}]}]},popouts:{}}}},w=(0,o.createContext)(void 0);function O(e){let c,u,b,g,T,p,m,_,O,L,A,v,x,N=(0,i.c)(55),{children:D}=e,[C,S]=(0,r.useLocalStorage)(n.STORAGE_KEYS.WIDGETS_STATE,d.defaultWidgets),[B,M]=(0,r.useLocalStorage)(n.STORAGE_KEYS.WIDGET_LAYOUT,null),[I,W]=(0,r.useLocalStorage)(n.STORAGE_KEYS.WIDGET_LAYOUT_SETTINGS,d.defaultLayoutSettings),[U,H]=(0,r.useLocalStorage)(n.STORAGE_KEYS.WIDGET_LAYOUT_SETTINGS_MOBILE,d.defaultMobileLayoutSettings),[F,Y]=(0,o.useState)("desktop"),[P,X]=(0,o.useState)(!1),z=(0,o.useRef)(null),j=(0,o.useRef)(null),[k,G]=(0,s.default)(),V=(0,r.useMediaQuery)("(max-width: 768px)"),J=V?U:I;N[0]!==B?(c=e=>{if(B&&h(B))try{let t=B[e];return a.Model.fromJson(t),t}catch{}else if(B&&l(B))try{return a.Model.fromJson(B),B}catch{}return E(e,d.defaultWidgets,d.defaultLayoutSettings)},N[0]=B,N[1]=c):c=N[1];let Z=c;N[2]!==S||N[3]!==C?(u=e=>{let t=new Set,i=e=>{"tab"===e.type&&e.id&&t.add(e.id),"children"in e&&Array.isArray(e.children)&&e.children.forEach(e=>{"row"===e.type||"tabset"===e.type?i(e):"tab"===e.type&&e.id&&t.add(e.id)})};e.layout&&i(e.layout);let n=C.map(e=>({...e,enabled:t.has(e.id)}));n.some((e,t)=>e.enabled!==C[t]?.enabled)&&S(n)},N[2]=S,N[3]=C,N[4]=u):u=N[4];let q=u;N[5]!==G.width||N[6]!==F||N[7]!==Z||N[8]!==P||N[9]!==q?(b=()=>{if(G.width>0){var e;let t,i=(e=G.width,"mobile"==(t=e<=599?"mobile":e>=600&&e<=999?"medium":e>=1e3&&e<=1299?"tablet":e>=1300&&e<=2199?"desktop":"ultrawide")?"mobile":t);if(Y(i),P&&i!==F){let e=Z(i);try{z.current=a.Model.fromJson(e),q(e)}catch{let e=E(i,d.defaultWidgets,d.defaultLayoutSettings);z.current=a.Model.fromJson(e),q(e)}}}},g=[G.width,F,P,Z,q],N[5]=G.width,N[6]=F,N[7]=Z,N[8]=P,N[9]=q,N[10]=b,N[11]=g):(b=N[10],g=N[11]),(0,o.useEffect)(b,g),N[12]!==F||N[13]!==Z||N[14]!==P||N[15]!==q?(T=()=>{if(!P){let e=Z(F);try{z.current=a.Model.fromJson(e),q(e)}catch{let e=E(F,d.defaultWidgets,d.defaultLayoutSettings);z.current=a.Model.fromJson(e),q(e)}X(!0)}},p=[F,Z,P,q],N[12]=F,N[13]=Z,N[14]=P,N[15]=q,N[16]=T,N[17]=p):(T=N[16],p=N[17]),(0,o.useEffect)(T,p),N[18]!==S||N[19]!==C?(m=e=>{S(C.map(t=>t.id===e?{...t,enabled:!t.enabled}:t))},N[18]=S,N[19]=C,N[20]=m):m=N[20];let K=m;N[21]!==C?(_=()=>C.filter(R),N[21]=C,N[22]=_):_=N[22];let $=_;N[23]!==F||N[24]!==B||N[25]!==J||N[26]!==M||N[27]!==C?(O=e=>{if(l(e))if(B&&h(B))M({...B,[F]:e});else{let t=f(C,J);t[F]=e,M(t)}else M(Object.entries(e).reduce(y,{}))},N[23]=F,N[24]=B,N[25]=J,N[26]=M,N[27]=C,N[28]=O):O=N[28];let Q=O;N[29]!==V||N[30]!==J||N[31]!==W||N[32]!==H?(L=e=>{let t,i={...J,...e},n=i.paddingX,a=i.paddingY;if(i.syncPadding){let i;n=i=void 0!==e.paddingX?e.paddingX:void 0!==e.paddingY?e.paddingY:void 0!==e.padding?e.padding:J.paddingX,a=i,t=i}else t=Math.round((n+a)/2);let o={...i,paddingX:n,paddingY:a,padding:t};V?H(o):W(o)},N[29]=V,N[30]=J,N[31]=W,N[32]=H,N[33]=L):L=N[33];let ee=L;N[34]!==F||N[35]!==V||N[36]!==W||N[37]!==M||N[38]!==H||N[39]!==S?(A=()=>{let e=V?d.defaultMobileLayoutSettings:d.defaultLayoutSettings,t=f(d.defaultWidgets,e);z.current=a.Model.fromJson(t[F]),S(d.defaultWidgets),W(d.defaultLayoutSettings),H(d.defaultMobileLayoutSettings),M(t)},N[34]=F,N[35]=V,N[36]=W,N[37]=M,N[38]=H,N[39]=S,N[40]=A):A=N[40];let et=A;return N[41]!==F||N[42]!==$||N[43]!==B||N[44]!==J||N[45]!==k||N[46]!==et||N[47]!==Q||N[48]!==K||N[49]!==ee||N[50]!==C?(v={widgets:C,toggleWidget:K,getEnabledWidgets:$,saveLayout:Q,layout:B,layoutSettings:J,updateLayoutSettings:ee,resetLayoutSettings:et,layoutModelRef:z,layoutApi:j,currentBreakpoint:F,measureRef:k},N[41]=F,N[42]=$,N[43]=B,N[44]=J,N[45]=k,N[46]=et,N[47]=Q,N[48]=K,N[49]=ee,N[50]=C,N[51]=v):v=N[51],N[52]!==D||N[53]!==v?(x=(0,t.jsx)(w.Provider,{value:v,children:D}),N[52]=D,N[53]=v,N[54]=x):x=N[54],x}function y(e,t){let[i,n]=t;return e[i]=n.map(L),e}function L(e){return{...e,maxH:e.maxH===1/0?d.MAX_WIDGET_SIZE:e.maxH}}function R(e){return e.id,e.enabled}function A(){let e=(0,o.useContext)(w);if(void 0===e)throw Error("useWidgets must be used within a WidgetsProvider");return e}e.s(["WidgetsProvider",()=>O,"useWidgets",()=>A],18663)}]);